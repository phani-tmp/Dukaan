(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function TR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bm={exports:{}},Fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function ER(){if(sE)return Fc;sE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:a}}return Fc.Fragment=e,Fc.jsx=t,Fc.jsxs=t,Fc}var rE;function AR(){return rE||(rE=1,bm.exports=ER()),bm.exports}var p=AR(),Nm={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function SR(){if(oE)return je;oE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function A(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,B={};function L(V,ne,ae){this.props=V,this.context=ne,this.refs=B,this.updater=ae||R}L.prototype.isReactComponent={},L.prototype.setState=function(V,ne){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ne,"setState")},L.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function G(){}G.prototype=L.prototype;function H(V,ne,ae){this.props=V,this.context=ne,this.refs=B,this.updater=ae||R}var z=H.prototype=new G;z.constructor=H,M(z,L.prototype),z.isPureReactComponent=!0;var X=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},ue=Object.prototype.hasOwnProperty;function O(V,ne,ae,le,ye,Ce){return ae=Ce.ref,{$$typeof:n,type:V,key:ne,ref:ae!==void 0?ae:null,props:Ce}}function N(V,ne){return O(V.type,ne,void 0,void 0,void 0,V.props)}function D(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function k(V){var ne={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ae){return ne[ae]})}var F=/\/+/g;function U(V,ne){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):ne.toString(36)}function P(){}function _e(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(P,P):(V.status="pending",V.then(function(ne){V.status==="pending"&&(V.status="fulfilled",V.value=ne)},function(ne){V.status==="pending"&&(V.status="rejected",V.reason=ne)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Oe(V,ne,ae,le,ye){var Ce=typeof V;(Ce==="undefined"||Ce==="boolean")&&(V=null);var xe=!1;if(V===null)xe=!0;else switch(Ce){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(V.$$typeof){case n:case e:xe=!0;break;case _:return xe=V._init,Oe(xe(V._payload),ne,ae,le,ye)}}if(xe)return ye=ye(V),xe=le===""?"."+U(V,0):le,X(ye)?(ae="",xe!=null&&(ae=xe.replace(F,"$&/")+"/"),Oe(ye,ne,ae,"",function(Ht){return Ht})):ye!=null&&(D(ye)&&(ye=N(ye,ae+(ye.key==null||V&&V.key===ye.key?"":(""+ye.key).replace(F,"$&/")+"/")+xe)),ne.push(ye)),1;xe=0;var vt=le===""?".":le+":";if(X(V))for(var Ve=0;Ve<V.length;Ve++)le=V[Ve],Ce=vt+U(le,Ve),xe+=Oe(le,ne,ae,Ce,ye);else if(Ve=A(V),typeof Ve=="function")for(V=Ve.call(V),Ve=0;!(le=V.next()).done;)le=le.value,Ce=vt+U(le,Ve++),xe+=Oe(le,ne,ae,Ce,ye);else if(Ce==="object"){if(typeof V.then=="function")return Oe(_e(V),ne,ae,le,ye);throw ne=String(V),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return xe}function ie(V,ne,ae){if(V==null)return V;var le=[],ye=0;return Oe(V,le,"","",function(Ce){return ne.call(ae,Ce,ye++)}),le}function pe(V){if(V._status===-1){var ne=V._result;ne=ne(),ne.then(function(ae){(V._status===0||V._status===-1)&&(V._status=1,V._result=ae)},function(ae){(V._status===0||V._status===-1)&&(V._status=2,V._result=ae)}),V._status===-1&&(V._status=0,V._result=ne)}if(V._status===1)return V._result.default;throw V._result}var we=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function ze(){}return je.Children={map:ie,forEach:function(V,ne,ae){ie(V,function(){ne.apply(this,arguments)},ae)},count:function(V){var ne=0;return ie(V,function(){ne++}),ne},toArray:function(V){return ie(V,function(ne){return ne})||[]},only:function(V){if(!D(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},je.Component=L,je.Fragment=t,je.Profiler=r,je.PureComponent=H,je.StrictMode=i,je.Suspense=f,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,je.__COMPILER_RUNTIME={__proto__:null,c:function(V){return Y.H.useMemoCache(V)}},je.cache=function(V){return function(){return V.apply(null,arguments)}},je.cloneElement=function(V,ne,ae){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var le=M({},V.props),ye=V.key,Ce=void 0;if(ne!=null)for(xe in ne.ref!==void 0&&(Ce=void 0),ne.key!==void 0&&(ye=""+ne.key),ne)!ue.call(ne,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ne.ref===void 0||(le[xe]=ne[xe]);var xe=arguments.length-2;if(xe===1)le.children=ae;else if(1<xe){for(var vt=Array(xe),Ve=0;Ve<xe;Ve++)vt[Ve]=arguments[Ve+2];le.children=vt}return O(V.type,ye,void 0,void 0,Ce,le)},je.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:a,_context:V},V},je.createElement=function(V,ne,ae){var le,ye={},Ce=null;if(ne!=null)for(le in ne.key!==void 0&&(Ce=""+ne.key),ne)ue.call(ne,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ye[le]=ne[le]);var xe=arguments.length-2;if(xe===1)ye.children=ae;else if(1<xe){for(var vt=Array(xe),Ve=0;Ve<xe;Ve++)vt[Ve]=arguments[Ve+2];ye.children=vt}if(V&&V.defaultProps)for(le in xe=V.defaultProps,xe)ye[le]===void 0&&(ye[le]=xe[le]);return O(V,Ce,void 0,void 0,null,ye)},je.createRef=function(){return{current:null}},je.forwardRef=function(V){return{$$typeof:d,render:V}},je.isValidElement=D,je.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:pe}},je.memo=function(V,ne){return{$$typeof:h,type:V,compare:ne===void 0?null:ne}},je.startTransition=function(V){var ne=Y.T,ae={};Y.T=ae;try{var le=V(),ye=Y.S;ye!==null&&ye(ae,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ze,we)}catch(Ce){we(Ce)}finally{Y.T=ne}},je.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},je.use=function(V){return Y.H.use(V)},je.useActionState=function(V,ne,ae){return Y.H.useActionState(V,ne,ae)},je.useCallback=function(V,ne){return Y.H.useCallback(V,ne)},je.useContext=function(V){return Y.H.useContext(V)},je.useDebugValue=function(){},je.useDeferredValue=function(V,ne){return Y.H.useDeferredValue(V,ne)},je.useEffect=function(V,ne,ae){var le=Y.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(V,ne)},je.useId=function(){return Y.H.useId()},je.useImperativeHandle=function(V,ne,ae){return Y.H.useImperativeHandle(V,ne,ae)},je.useInsertionEffect=function(V,ne){return Y.H.useInsertionEffect(V,ne)},je.useLayoutEffect=function(V,ne){return Y.H.useLayoutEffect(V,ne)},je.useMemo=function(V,ne){return Y.H.useMemo(V,ne)},je.useOptimistic=function(V,ne){return Y.H.useOptimistic(V,ne)},je.useReducer=function(V,ne,ae){return Y.H.useReducer(V,ne,ae)},je.useRef=function(V){return Y.H.useRef(V)},je.useState=function(V){return Y.H.useState(V)},je.useSyncExternalStore=function(V,ne,ae){return Y.H.useSyncExternalStore(V,ne,ae)},je.useTransition=function(){return Y.H.useTransition()},je.version="19.1.1",je}var aE;function Og(){return aE||(aE=1,Nm.exports=SR()),Nm.exports}var $=Og();const rl=TR($);var Pm={exports:{}},qc={},Dm={exports:{}},km={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE;function wR(){return lE||(lE=1,(function(n){function e(ie,pe){var we=ie.length;ie.push(pe);e:for(;0<we;){var ze=we-1>>>1,V=ie[ze];if(0<r(V,pe))ie[ze]=pe,ie[we]=V,we=ze;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var pe=ie[0],we=ie.pop();if(we!==pe){ie[0]=we;e:for(var ze=0,V=ie.length,ne=V>>>1;ze<ne;){var ae=2*(ze+1)-1,le=ie[ae],ye=ae+1,Ce=ie[ye];if(0>r(le,we))ye<V&&0>r(Ce,le)?(ie[ze]=Ce,ie[ye]=we,ze=ye):(ie[ze]=le,ie[ae]=we,ze=ae);else if(ye<V&&0>r(Ce,we))ie[ze]=Ce,ie[ye]=we,ze=ye;else break e}}return pe}function r(ie,pe){var we=ie.sortIndex-pe.sortIndex;return we!==0?we:ie.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],h=[],_=1,E=null,A=3,R=!1,M=!1,B=!1,L=!1,G=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function X(ie){for(var pe=t(h);pe!==null;){if(pe.callback===null)i(h);else if(pe.startTime<=ie)i(h),pe.sortIndex=pe.expirationTime,e(f,pe);else break;pe=t(h)}}function Y(ie){if(B=!1,X(ie),!M)if(t(f)!==null)M=!0,ue||(ue=!0,U());else{var pe=t(h);pe!==null&&Oe(Y,pe.startTime-ie)}}var ue=!1,O=-1,N=5,D=-1;function k(){return L?!0:!(n.unstable_now()-D<N)}function F(){if(L=!1,ue){var ie=n.unstable_now();D=ie;var pe=!0;try{e:{M=!1,B&&(B=!1,H(O),O=-1),R=!0;var we=A;try{t:{for(X(ie),E=t(f);E!==null&&!(E.expirationTime>ie&&k());){var ze=E.callback;if(typeof ze=="function"){E.callback=null,A=E.priorityLevel;var V=ze(E.expirationTime<=ie);if(ie=n.unstable_now(),typeof V=="function"){E.callback=V,X(ie),pe=!0;break t}E===t(f)&&i(f),X(ie)}else i(f);E=t(f)}if(E!==null)pe=!0;else{var ne=t(h);ne!==null&&Oe(Y,ne.startTime-ie),pe=!1}}break e}finally{E=null,A=we,R=!1}pe=void 0}}finally{pe?U():ue=!1}}}var U;if(typeof z=="function")U=function(){z(F)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,_e=P.port2;P.port1.onmessage=F,U=function(){_e.postMessage(null)}}else U=function(){G(F,0)};function Oe(ie,pe){O=G(function(){ie(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(ie){switch(A){case 1:case 2:case 3:var pe=3;break;default:pe=A}var we=A;A=pe;try{return ie()}finally{A=we}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(ie,pe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var we=A;A=ie;try{return pe()}finally{A=we}},n.unstable_scheduleCallback=function(ie,pe,we){var ze=n.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?ze+we:ze):we=ze,ie){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=we+V,ie={id:_++,callback:pe,priorityLevel:ie,startTime:we,expirationTime:V,sortIndex:-1},we>ze?(ie.sortIndex=we,e(h,ie),t(f)===null&&ie===t(h)&&(B?(H(O),O=-1):B=!0,Oe(Y,we-ze))):(ie.sortIndex=V,e(f,ie),M||R||(M=!0,ue||(ue=!0,U()))),ie},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(ie){var pe=A;return function(){var we=A;A=pe;try{return ie.apply(this,arguments)}finally{A=we}}}})(km)),km}var cE;function CR(){return cE||(cE=1,Dm.exports=wR()),Dm.exports}var Mm={exports:{}},On={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function IR(){if(uE)return On;uE=1;var n=Og();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(f,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:f,containerInfo:h,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,On.createPortal=function(f,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,_)},On.flushSync=function(f){var h=c.T,_=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=h,i.p=_,i.d.f()}},On.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},On.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},On.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin),A=typeof h.integrity=="string"?h.integrity:void 0,R=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:R}):_==="script"&&i.d.X(f,{crossOrigin:E,integrity:A,fetchPriority:R,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},On.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},On.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin);i.d.L(f,_,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},On.preloadModule=function(f,h){if(typeof f=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},On.requestFormReset=function(f){i.d.r(f)},On.unstable_batchedUpdates=function(f,h){return f(h)},On.useFormState=function(f,h,_){return c.H.useFormState(f,h,_)},On.useFormStatus=function(){return c.H.useHostTransitionStatus()},On.version="19.1.1",On}var dE;function xR(){if(dE)return Mm.exports;dE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mm.exports=IR(),Mm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE;function RR(){if(hE)return qc;hE=1;var n=CR(),e=Og(),t=xR();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(a(s)!==s)throw Error(i(188))}function f(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var l=s,u=o;;){var y=l.return;if(y===null)break;var T=y.alternate;if(T===null){if(u=y.return,u!==null){l=u;continue}break}if(y.child===T.child){for(T=y.child;T;){if(T===l)return d(y),s;if(T===u)return d(y),o;T=T.sibling}throw Error(i(188))}if(l.return!==u.return)l=y,u=T;else{for(var C=!1,x=y.child;x;){if(x===l){C=!0,l=y,u=T;break}if(x===u){C=!0,u=y,l=T;break}x=x.sibling}if(!C){for(x=T.child;x;){if(x===l){C=!0,l=T,u=y;break}if(x===u){C=!0,u=T,l=y;break}x=x.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:o}function h(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=h(s),o!==null)return o;s=s.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),z=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=F&&s[F]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function _e(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case L:return"Profiler";case B:return"StrictMode";case Y:return"Suspense";case ue:return"SuspenseList";case D:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case z:return(s.displayName||"Context")+".Provider";case H:return(s._context.displayName||"Context")+".Consumer";case X:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return o=s.displayName||null,o!==null?o:_e(s.type)||"Memo";case N:o=s._payload,s=s._init;try{return _e(s(o))}catch{}}return null}var Oe=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},ze=[],V=-1;function ne(s){return{current:s}}function ae(s){0>V||(s.current=ze[V],ze[V]=null,V--)}function le(s,o){V++,ze[V]=s.current,s.current=o}var ye=ne(null),Ce=ne(null),xe=ne(null),vt=ne(null);function Ve(s,o){switch(le(xe,o),le(Ce,s),le(ye,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?DT(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=DT(o),s=kT(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ae(ye),le(ye,s)}function Ht(){ae(ye),ae(Ce),ae(xe)}function Je(s){s.memoizedState!==null&&le(vt,s);var o=ye.current,l=kT(o,s.type);o!==l&&(le(Ce,s),le(ye,l))}function Gt(s){Ce.current===s&&(ae(ye),ae(Ce)),vt.current===s&&(ae(vt),Mc._currentValue=we)}var Dn=Object.prototype.hasOwnProperty,hi=n.unstable_scheduleCallback,Zn=n.unstable_cancelCallback,Qi=n.unstable_shouldYield,js=n.unstable_requestPaint,kn=n.unstable_now,nt=n.unstable_getCurrentPriorityLevel,tn=n.unstable_ImmediatePriority,fi=n.unstable_UserBlockingPriority,ei=n.unstable_NormalPriority,kr=n.unstable_LowPriority,xi=n.unstable_IdlePriority,Xi=n.log,ms=n.unstable_setDisableYieldValue,xt=null,Xe=null;function pt(s){if(typeof Xi=="function"&&ms(s),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(xt,s)}catch{}}var Kt=Math.clz32?Math.clz32:Ri,Mr=Math.log,gs=Math.LN2;function Ri(s){return s>>>=0,s===0?32:31-(Mr(s)/gs|0)|0}var bi=256,Mn=4194304;function Lt(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ys(s,o,l){var u=s.pendingLanes;if(u===0)return 0;var y=0,T=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var x=u&134217727;return x!==0?(u=x&~T,u!==0?y=Lt(u):(C&=x,C!==0?y=Lt(C):l||(l=x&~s,l!==0&&(y=Lt(l))))):(x=u&~T,x!==0?y=Lt(x):C!==0?y=Lt(C):l||(l=u&~s,l!==0&&(y=Lt(l)))),y===0?0:o!==0&&o!==y&&(o&T)===0&&(T=y&-y,l=o&-o,T>=l||T===32&&(l&4194048)!==0)?o:y}function Zi(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function es(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ts(){var s=bi;return bi<<=1,(bi&4194048)===0&&(bi=256),s}function Ni(){var s=Mn;return Mn<<=1,(Mn&62914560)===0&&(Mn=4194304),s}function ti(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function jn(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ns(s,o,l,u,y,T){var C=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var x=s.entanglements,q=s.expirationTimes,Z=s.hiddenUpdates;for(l=C&~l;0<l;){var re=31-Kt(l),de=1<<re;x[re]=0,q[re]=-1;var ee=Z[re];if(ee!==null)for(Z[re]=null,re=0;re<ee.length;re++){var te=ee[re];te!==null&&(te.lane&=-536870913)}l&=~de}u!==0&&zn(s,u,0),T!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=T&~(C&~o))}function zn(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var u=31-Kt(o);s.entangledLanes|=o,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function Pi(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var u=31-Kt(l),y=1<<u;y&o|s[u]&o&&(s[u]|=o),l&=~y}}function Di(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function vs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ki(){var s=pe.p;return s!==0?s:(s=window.event,s===void 0?32:XT(s.type))}function Ur(s,o){var l=pe.p;try{return pe.p=s,o()}finally{pe.p=l}}var wt=Math.random().toString(36).slice(2),Dt="__reactFiber$"+wt,Be="__reactProps$"+wt,Fe="__reactContainer$"+wt,Ct="__reactEvents$"+wt,Mt="__reactListeners$"+wt,mt="__reactHandles$"+wt,An="__reactResources$"+wt,ct="__reactMarker$"+wt;function ni(s){delete s[Dt],delete s[Be],delete s[Ct],delete s[Mt],delete s[mt]}function Un(s){var o=s[Dt];if(o)return o;for(var l=s.parentNode;l;){if(o=l[Fe]||l[Dt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=LT(s);s!==null;){if(l=s[Dt])return l;s=LT(s)}return o}s=l,l=s.parentNode}return null}function $n(s){if(s=s[Dt]||s[Fe]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function Sn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Ot(s){var o=s[An];return o||(o=s[An]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function _t(s){s[ct]=!0}var Vr=new Set,Lr={};function pi(s,o){is(s,o),is(s+"Capture",o)}function is(s,o){for(Lr[s]=o,s=0;s<o.length;s++)Vr.add(o[s])}var ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ya={},zs={};function jl(s){return Dn.call(zs,s)?!0:Dn.call(ya,s)?!1:ga.test(s)?zs[s]=!0:(ya[s]=!0,!1)}function mi(s,o,l){if(jl(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function ss(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Ft(s,o,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+u)}}var Or,$s;function gi(s){if(Or===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Or=o&&o[1]||"",$s=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Or+s+$s}var Vn=!1;function Ks(s,o){if(!s||Vn)return"";Vn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(te){var ee=te}Reflect.construct(s,[],de)}else{try{de.call()}catch(te){ee=te}s.call(de.prototype)}}else{try{throw Error()}catch(te){ee=te}(de=s())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(te){if(te&&ee&&typeof te.stack=="string")return[te.stack,ee.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=u.DetermineComponentFrameRoot(),C=T[0],x=T[1];if(C&&x){var q=C.split(`
`),Z=x.split(`
`);for(y=u=0;u<q.length&&!q[u].includes("DetermineComponentFrameRoot");)u++;for(;y<Z.length&&!Z[y].includes("DetermineComponentFrameRoot");)y++;if(u===q.length||y===Z.length)for(u=q.length-1,y=Z.length-1;1<=u&&0<=y&&q[u]!==Z[y];)y--;for(;1<=u&&0<=y;u--,y--)if(q[u]!==Z[y]){if(u!==1||y!==1)do if(u--,y--,0>y||q[u]!==Z[y]){var re=`
`+q[u].replace(" at new "," at ");return s.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",s.displayName)),re}while(1<=u&&0<=y);break}}}finally{Vn=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?gi(l):""}function ii(s){switch(s.tag){case 26:case 27:case 5:return gi(s.type);case 16:return gi("Lazy");case 13:return gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return Ks(s.type,!1);case 11:return Ks(s.type.render,!1);case 1:return Ks(s.type,!0);case 31:return gi("Activity");default:return""}}function Ys(s){try{var o="";do o+=ii(s),s=s.return;while(s);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Rt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Fr(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Uu(s){var o=Fr(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),u=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,T=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(C){u=""+C,T.call(this,C)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Js(s){s._valueTracker||(s._valueTracker=Uu(s))}function Po(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),u="";return s&&(u=Fr(s)?s.checked?"true":"false":s.value),s=u,s!==l?(o.setValue(s),!0):!1}function Ws(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var qr=/[\n"\\]/g;function bt(s){return s.replace(qr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function I(s,o,l,u,y,T,C,x){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),o!=null?C==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Rt(o)):s.value!==""+Rt(o)&&(s.value=""+Rt(o)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),o!=null?fe(s,C,Rt(o)):l!=null?fe(s,C,Rt(l)):u!=null&&s.removeAttribute("value"),y==null&&T!=null&&(s.defaultChecked=!!T),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.name=""+Rt(x):s.removeAttribute("name")}function Q(s,o,l,u,y,T,C,x){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),o!=null||l!=null){if(!(T!=="submit"&&T!=="reset"||o!=null))return;l=l!=null?""+Rt(l):"",o=o!=null?""+Rt(o):l,x||o===s.value||(s.value=o),s.defaultValue=o}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=x?s.checked:!!u,s.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function fe(s,o,l){o==="number"&&Ws(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Ie(s,o,l,u){if(s=s.options,o){o={};for(var y=0;y<l.length;y++)o["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=o.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&u&&(s[l].defaultSelected=!0)}else{for(l=""+Rt(l),o=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,u&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function Ee(s,o,l){if(o!=null&&(o=""+Rt(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+Rt(l):""}function Re(s,o,l,u){if(o==null){if(u!=null){if(l!=null)throw Error(i(92));if(Oe(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),o=l}l=Rt(o),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function Ze(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var Mi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yt(s,o,l){var u=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":u?s.setProperty(o,l):typeof l!="number"||l===0||Mi.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function Do(s,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var y in o)u=o[y],o.hasOwnProperty(y)&&l[y]!==u&&Yt(s,y,u)}else for(var T in o)o.hasOwnProperty(T)&&Yt(s,T,o[T])}function zl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function va(s){return Vf.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Qs=null;function Ui(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Xs=null,Zs=null;function $l(s){var o=$n(s);if(o&&(s=o.stateNode)){var l=s[Be]||null;e:switch(s=o.stateNode,o.type){case"input":if(I(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+bt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var u=l[o];if(u!==s&&u.form===s.form){var y=u[Be]||null;if(!y)throw Error(i(90));I(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<l.length;o++)u=l[o],u.form===s.form&&Po(u)}break e;case"textarea":Ee(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Ie(s,!!l.multiple,o,!1)}}}var _s=!1;function Vu(s,o,l){if(_s)return s(o,l);_s=!0;try{var u=s(o);return u}finally{if(_s=!1,(Xs!==null||Zs!==null)&&(bd(),Xs&&(o=Xs,s=Zs,Zs=Xs=null,$l(o),s)))for(o=0;o<s.length;o++)$l(s[o])}}function ko(s,o){var l=s.stateNode;if(l===null)return null;var u=l[Be]||null;if(u===null)return null;l=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vi=!1;if(rs)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Vi=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Vi=!1}var Ts=null,Br=null,er=null;function Kl(){if(er)return er;var s,o=Br,l=o.length,u,y="value"in Ts?Ts.value:Ts.textContent,T=y.length;for(s=0;s<l&&o[s]===y[s];s++);var C=l-s;for(u=1;u<=C&&o[l-u]===y[T-u];u++);return er=y.slice(s,1<u?1-u:void 0)}function Es(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function As(){return!0}function Yl(){return!1}function dn(s){function o(l,u,y,T,C){this._reactName=l,this._targetInst=y,this.type=u,this.nativeEvent=T,this.target=C,this.currentTarget=null;for(var x in s)s.hasOwnProperty(x)&&(l=s[x],this[x]=l?l(T):T[x]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?As:Yl,this.isPropagationStopped=Yl,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),o}var ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_a=dn(ft),Uo=_({},ft,{view:0,detail:0}),Lu=dn(Uo),Ta,Ea,Ss,Vo=_({},Uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ss&&(Ss&&s.type==="mousemove"?(Ta=s.screenX-Ss.screenX,Ea=s.screenY-Ss.screenY):Ea=Ta=0,Ss=s),Ta)},movementY:function(s){return"movementY"in s?s.movementY:Ea}}),Li=dn(Vo),Ou=_({},Vo,{dataTransfer:0}),Lf=dn(Ou),Lo=_({},Uo,{relatedTarget:0}),Aa=dn(Lo),Jl=_({},ft,{animationName:0,elapsedTime:0,pseudoElement:0}),Sa=dn(Jl),Fu=_({},ft,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),wa=dn(Fu),Of=_({},ft,{data:0}),Wl=dn(Of),Oo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ql(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Bu[s])?!!o[s]:!1}function Fo(){return Ql}var Hu=_({},Uo,{key:function(s){if(s.key){var o=Oo[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Es(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?qu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fo,charCode:function(s){return s.type==="keypress"?Es(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Es(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ca=dn(Hu),Gu=_({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xl=dn(Gu),tr=_({},Uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fo}),ju=dn(tr),zu=_({},ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),$u=dn(zu),Ku=_({},Vo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ia=dn(Ku),Kn=_({},ft,{newState:0,oldState:0}),Yu=dn(Kn),Ju=[9,13,27,32],ws=rs&&"CompositionEvent"in window,m=null;rs&&"documentMode"in document&&(m=document.documentMode);var S=rs&&"TextEvent"in window&&!m,w=rs&&(!ws||m&&8<m&&11>=m),b=" ",J=!1;function se(s,o){switch(s){case"keyup":return Ju.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function me(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var st=!1;function nn(s,o){switch(s){case"compositionend":return me(o);case"keypress":return o.which!==32?null:(J=!0,b);case"textInput":return s=o.data,s===b&&J?null:s;default:return null}}function rt(s,o){if(st)return s==="compositionend"||!ws&&se(s,o)?(s=Kl(),er=Br=Ts=null,st=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return w&&o.locale!=="ko"?null:o.data;default:return null}}var hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sn(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!hn[s.type]:o==="textarea"}function nr(s,o,l,u){Xs?Zs?Zs.push(u):Zs=[u]:Xs=u,o=Ud(o,"onChange"),0<o.length&&(l=new _a("onChange","change",null,l,u),s.push({event:l,listeners:o}))}var wn=null,Cs=null;function Zl(s){xT(s,0)}function Wu(s){var o=Sn(s);if(Po(o))return s}function Yy(s,o){if(s==="change")return o}var Jy=!1;if(rs){var Ff;if(rs){var qf="oninput"in document;if(!qf){var Wy=document.createElement("div");Wy.setAttribute("oninput","return;"),qf=typeof Wy.oninput=="function"}Ff=qf}else Ff=!1;Jy=Ff&&(!document.documentMode||9<document.documentMode)}function Qy(){wn&&(wn.detachEvent("onpropertychange",Xy),Cs=wn=null)}function Xy(s){if(s.propertyName==="value"&&Wu(Cs)){var o=[];nr(o,Cs,s,Ui(s)),Vu(Zl,o)}}function WI(s,o,l){s==="focusin"?(Qy(),wn=o,Cs=l,wn.attachEvent("onpropertychange",Xy)):s==="focusout"&&Qy()}function QI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Wu(Cs)}function XI(s,o){if(s==="click")return Wu(o)}function ZI(s,o){if(s==="input"||s==="change")return Wu(o)}function ex(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var yi=typeof Object.is=="function"?Object.is:ex;function ec(s,o){if(yi(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),u=Object.keys(o);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var y=l[u];if(!Dn.call(o,y)||!yi(s[y],o[y]))return!1}return!0}function Zy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ev(s,o){var l=Zy(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=o&&u>=o)return{node:l,offset:o-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zy(l)}}function tv(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?tv(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function nv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Ws(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=Ws(s.document)}return o}function Bf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var tx=rs&&"documentMode"in document&&11>=document.documentMode,xa=null,Hf=null,tc=null,Gf=!1;function iv(s,o,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Gf||xa==null||xa!==Ws(u)||(u=xa,"selectionStart"in u&&Bf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),tc&&ec(tc,u)||(tc=u,u=Ud(Hf,"onSelect"),0<u.length&&(o=new _a("onSelect","select",null,o,l),s.push({event:o,listeners:u}),o.target=xa)))}function qo(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var Ra={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionrun:qo("Transition","TransitionRun"),transitionstart:qo("Transition","TransitionStart"),transitioncancel:qo("Transition","TransitionCancel"),transitionend:qo("Transition","TransitionEnd")},jf={},sv={};rs&&(sv=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function Bo(s){if(jf[s])return jf[s];if(!Ra[s])return s;var o=Ra[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in sv)return jf[s]=o[l];return s}var rv=Bo("animationend"),ov=Bo("animationiteration"),av=Bo("animationstart"),nx=Bo("transitionrun"),ix=Bo("transitionstart"),sx=Bo("transitioncancel"),lv=Bo("transitionend"),cv=new Map,zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zf.push("scrollEnd");function os(s,o){cv.set(s,o),pi(o,[s])}var uv=new WeakMap;function Oi(s,o){if(typeof s=="object"&&s!==null){var l=uv.get(s);return l!==void 0?l:(o={value:s,source:o,stack:Ys(o)},uv.set(s,o),o)}return{value:s,source:o,stack:Ys(o)}}var Fi=[],ba=0,$f=0;function Qu(){for(var s=ba,o=$f=ba=0;o<s;){var l=Fi[o];Fi[o++]=null;var u=Fi[o];Fi[o++]=null;var y=Fi[o];Fi[o++]=null;var T=Fi[o];if(Fi[o++]=null,u!==null&&y!==null){var C=u.pending;C===null?y.next=y:(y.next=C.next,C.next=y),u.pending=y}T!==0&&dv(l,y,T)}}function Xu(s,o,l,u){Fi[ba++]=s,Fi[ba++]=o,Fi[ba++]=l,Fi[ba++]=u,$f|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Kf(s,o,l,u){return Xu(s,o,l,u),Zu(s)}function Na(s,o){return Xu(s,null,null,o),Zu(s)}function dv(s,o,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var y=!1,T=s.return;T!==null;)T.childLanes|=l,u=T.alternate,u!==null&&(u.childLanes|=l),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(y=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,y&&o!==null&&(y=31-Kt(l),s=T.hiddenUpdates,u=s[y],u===null?s[y]=[o]:u.push(o),o.lane=l|536870912),T):null}function Zu(s){if(50<Ic)throw Ic=0,Zp=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Pa={};function rx(s,o,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vi(s,o,l,u){return new rx(s,o,l,u)}function Yf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ir(s,o){var l=s.alternate;return l===null?(l=vi(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function hv(s,o){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function ed(s,o,l,u,y,T){var C=0;if(u=s,typeof s=="function")Yf(s)&&(C=1);else if(typeof s=="string")C=aR(s,l,ye.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case D:return s=vi(31,l,o,y),s.elementType=D,s.lanes=T,s;case M:return Ho(l.children,y,T,o);case B:C=8,y|=24;break;case L:return s=vi(12,l,o,y|2),s.elementType=L,s.lanes=T,s;case Y:return s=vi(13,l,o,y),s.elementType=Y,s.lanes=T,s;case ue:return s=vi(19,l,o,y),s.elementType=ue,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case G:case z:C=10;break e;case H:C=9;break e;case X:C=11;break e;case O:C=14;break e;case N:C=16,u=null;break e}C=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return o=vi(C,l,o,y),o.elementType=s,o.type=u,o.lanes=T,o}function Ho(s,o,l,u){return s=vi(7,s,u,o),s.lanes=l,s}function Jf(s,o,l){return s=vi(6,s,null,o),s.lanes=l,s}function Wf(s,o,l){return o=vi(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Da=[],ka=0,td=null,nd=0,qi=[],Bi=0,Go=null,sr=1,rr="";function jo(s,o){Da[ka++]=nd,Da[ka++]=td,td=s,nd=o}function fv(s,o,l){qi[Bi++]=sr,qi[Bi++]=rr,qi[Bi++]=Go,Go=s;var u=sr;s=rr;var y=32-Kt(u)-1;u&=~(1<<y),l+=1;var T=32-Kt(o)+y;if(30<T){var C=y-y%5;T=(u&(1<<C)-1).toString(32),u>>=C,y-=C,sr=1<<32-Kt(o)+y|l<<y|u,rr=T+s}else sr=1<<T|l<<y|u,rr=s}function Qf(s){s.return!==null&&(jo(s,1),fv(s,1,0))}function Xf(s){for(;s===td;)td=Da[--ka],Da[ka]=null,nd=Da[--ka],Da[ka]=null;for(;s===Go;)Go=qi[--Bi],qi[Bi]=null,rr=qi[--Bi],qi[Bi]=null,sr=qi[--Bi],qi[Bi]=null}var Yn=null,qt=null,ht=!1,zo=null,Is=!1,Zf=Error(i(519));function $o(s){var o=Error(i(418,""));throw sc(Oi(o,s)),Zf}function pv(s){var o=s.stateNode,l=s.type,u=s.memoizedProps;switch(o[Dt]=s,o[Be]=u,l){case"dialog":Qe("cancel",o),Qe("close",o);break;case"iframe":case"object":case"embed":Qe("load",o);break;case"video":case"audio":for(l=0;l<Rc.length;l++)Qe(Rc[l],o);break;case"source":Qe("error",o);break;case"img":case"image":case"link":Qe("error",o),Qe("load",o);break;case"details":Qe("toggle",o);break;case"input":Qe("invalid",o),Q(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Js(o);break;case"select":Qe("invalid",o);break;case"textarea":Qe("invalid",o),Re(o,u.value,u.defaultValue,u.children),Js(o)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||u.suppressHydrationWarning===!0||PT(o.textContent,l)?(u.popover!=null&&(Qe("beforetoggle",o),Qe("toggle",o)),u.onScroll!=null&&Qe("scroll",o),u.onScrollEnd!=null&&Qe("scrollend",o),u.onClick!=null&&(o.onclick=Vd),o=!0):o=!1,o||$o(s)}function mv(s){for(Yn=s.return;Yn;)switch(Yn.tag){case 5:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:Yn=Yn.return}}function nc(s){if(s!==Yn)return!1;if(!ht)return mv(s),ht=!0,!1;var o=s.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||mm(s.type,s.memoizedProps)),l=!l),l&&qt&&$o(s),mv(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(o===0){qt=ls(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;s=s.nextSibling}qt=null}}else o===27?(o=qt,io(s.type)?(s=_m,_m=null,qt=s):qt=o):qt=Yn?ls(s.stateNode.nextSibling):null;return!0}function ic(){qt=Yn=null,ht=!1}function gv(){var s=zo;return s!==null&&(oi===null?oi=s:oi.push.apply(oi,s),zo=null),s}function sc(s){zo===null?zo=[s]:zo.push(s)}var ep=ne(null),Ko=null,or=null;function Hr(s,o,l){le(ep,o._currentValue),o._currentValue=l}function ar(s){s._currentValue=ep.current,ae(ep)}function tp(s,o,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),s===l)break;s=s.return}}function np(s,o,l,u){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var T=y.dependencies;if(T!==null){var C=y.child;T=T.firstContext;e:for(;T!==null;){var x=T;T=y;for(var q=0;q<o.length;q++)if(x.context===o[q]){T.lanes|=l,x=T.alternate,x!==null&&(x.lanes|=l),tp(T.return,l,s),u||(C=null);break e}T=x.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=l,T=C.alternate,T!==null&&(T.lanes|=l),tp(C,l,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function rc(s,o,l,u){s=null;for(var y=o,T=!1;y!==null;){if(!T){if((y.flags&524288)!==0)T=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var x=y.type;yi(y.pendingProps.value,C.value)||(s!==null?s.push(x):s=[x])}}else if(y===vt.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Mc):s=[Mc])}y=y.return}s!==null&&np(o,s,l,u),o.flags|=262144}function id(s){for(s=s.firstContext;s!==null;){if(!yi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Yo(s){Ko=s,or=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ln(s){return yv(Ko,s)}function sd(s,o){return Ko===null&&Yo(s),yv(s,o)}function yv(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},or===null){if(s===null)throw Error(i(308));or=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else or=or.next=o;return l}var ox=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},ax=n.unstable_scheduleCallback,lx=n.unstable_NormalPriority,rn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ip(){return{controller:new ox,data:new Map,refCount:0}}function oc(s){s.refCount--,s.refCount===0&&ax(lx,function(){s.controller.abort()})}var ac=null,sp=0,Ma=0,Ua=null;function cx(s,o){if(ac===null){var l=ac=[];sp=0,Ma=om(),Ua={status:"pending",value:void 0,then:function(u){l.push(u)}}}return sp++,o.then(vv,vv),o}function vv(){if(--sp===0&&ac!==null){Ua!==null&&(Ua.status="fulfilled");var s=ac;ac=null,Ma=0,Ua=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function ux(s,o){var l=[],u={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){u.status="fulfilled",u.value=o;for(var y=0;y<l.length;y++)(0,l[y])(o)},function(y){for(u.status="rejected",u.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),u}var _v=ie.S;ie.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&cx(s,o),_v!==null&&_v(s,o)};var Jo=ne(null);function rp(){var s=Jo.current;return s!==null?s:Nt.pooledCache}function rd(s,o){o===null?le(Jo,Jo.current):le(Jo,o.pool)}function Tv(){var s=rp();return s===null?null:{parent:rn._currentValue,pool:s}}var lc=Error(i(460)),Ev=Error(i(474)),od=Error(i(542)),op={then:function(){}};function Av(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ad(){}function Sv(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(ad,ad),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Cv(s),s;default:if(typeof o.status=="string")o.then(ad,ad);else{if(s=Nt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(u){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=u}},function(u){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Cv(s),s}throw cc=o,lc}}var cc=null;function wv(){if(cc===null)throw Error(i(459));var s=cc;return cc=null,s}function Cv(s){if(s===lc||s===od)throw Error(i(483))}var Gr=!1;function ap(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lp(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function jr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function zr(s,o,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(gt&2)!==0){var y=u.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),u.pending=o,o=Zu(s),dv(s,null,l),o}return Xu(s,u,o,l),Zu(s)}function uc(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var u=o.lanes;u&=s.pendingLanes,l|=u,o.lanes=l,Pi(s,l)}}function cp(s,o){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var y=null,T=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};T===null?y=T=C:T=T.next=C,l=l.next}while(l!==null);T===null?y=T=o:T=T.next=o}else y=T=o;l={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:T,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var up=!1;function dc(){if(up){var s=Ua;if(s!==null)throw s}}function hc(s,o,l,u){up=!1;var y=s.updateQueue;Gr=!1;var T=y.firstBaseUpdate,C=y.lastBaseUpdate,x=y.shared.pending;if(x!==null){y.shared.pending=null;var q=x,Z=q.next;q.next=null,C===null?T=Z:C.next=Z,C=q;var re=s.alternate;re!==null&&(re=re.updateQueue,x=re.lastBaseUpdate,x!==C&&(x===null?re.firstBaseUpdate=Z:x.next=Z,re.lastBaseUpdate=q))}if(T!==null){var de=y.baseState;C=0,re=Z=q=null,x=T;do{var ee=x.lane&-536870913,te=ee!==x.lane;if(te?(ot&ee)===ee:(u&ee)===ee){ee!==0&&ee===Ma&&(up=!0),re!==null&&(re=re.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Le=s,De=x;ee=o;var At=l;switch(De.tag){case 1:if(Le=De.payload,typeof Le=="function"){de=Le.call(At,de,ee);break e}de=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=De.payload,ee=typeof Le=="function"?Le.call(At,de,ee):Le,ee==null)break e;de=_({},de,ee);break e;case 2:Gr=!0}}ee=x.callback,ee!==null&&(s.flags|=64,te&&(s.flags|=8192),te=y.callbacks,te===null?y.callbacks=[ee]:te.push(ee))}else te={lane:ee,tag:x.tag,payload:x.payload,callback:x.callback,next:null},re===null?(Z=re=te,q=de):re=re.next=te,C|=ee;if(x=x.next,x===null){if(x=y.shared.pending,x===null)break;te=x,x=te.next,te.next=null,y.lastBaseUpdate=te,y.shared.pending=null}}while(!0);re===null&&(q=de),y.baseState=q,y.firstBaseUpdate=Z,y.lastBaseUpdate=re,T===null&&(y.shared.lanes=0),Zr|=C,s.lanes=C,s.memoizedState=de}}function Iv(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function xv(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Iv(l[s],o)}var Va=ne(null),ld=ne(0);function Rv(s,o){s=pr,le(ld,s),le(Va,o),pr=s|o.baseLanes}function dp(){le(ld,pr),le(Va,Va.current)}function hp(){pr=ld.current,ae(Va),ae(ld)}var $r=0,$e=null,Tt=null,Jt=null,cd=!1,La=!1,Wo=!1,ud=0,fc=0,Oa=null,dx=0;function jt(){throw Error(i(321))}function fp(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!yi(s[l],o[l]))return!1;return!0}function pp(s,o,l,u,y,T){return $r=T,$e=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ie.H=s===null||s.memoizedState===null?d_:h_,Wo=!1,T=l(u,y),Wo=!1,La&&(T=Nv(o,l,u,y)),bv(s),T}function bv(s){ie.H=gd;var o=Tt!==null&&Tt.next!==null;if($r=0,Jt=Tt=$e=null,cd=!1,fc=0,Oa=null,o)throw Error(i(300));s===null||fn||(s=s.dependencies,s!==null&&id(s)&&(fn=!0))}function Nv(s,o,l,u){$e=s;var y=0;do{if(La&&(Oa=null),fc=0,La=!1,25<=y)throw Error(i(301));if(y+=1,Jt=Tt=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}ie.H=vx,T=o(l,u)}while(La);return T}function hx(){var s=ie.H,o=s.useState()[0];return o=typeof o.then=="function"?pc(o):o,s=s.useState()[0],(Tt!==null?Tt.memoizedState:null)!==s&&($e.flags|=1024),o}function mp(){var s=ud!==0;return ud=0,s}function gp(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function yp(s){if(cd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}cd=!1}$r=0,Jt=Tt=$e=null,La=!1,fc=ud=0,Oa=null}function si(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?$e.memoizedState=Jt=s:Jt=Jt.next=s,Jt}function Wt(){if(Tt===null){var s=$e.alternate;s=s!==null?s.memoizedState:null}else s=Tt.next;var o=Jt===null?$e.memoizedState:Jt.next;if(o!==null)Jt=o,Tt=s;else{if(s===null)throw $e.alternate===null?Error(i(467)):Error(i(310));Tt=s,s={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Jt===null?$e.memoizedState=Jt=s:Jt=Jt.next=s}return Jt}function vp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(s){var o=fc;return fc+=1,Oa===null&&(Oa=[]),s=Sv(Oa,s,o),o=$e,(Jt===null?o.memoizedState:Jt.next)===null&&(o=o.alternate,ie.H=o===null||o.memoizedState===null?d_:h_),s}function dd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return pc(s);if(s.$$typeof===z)return Ln(s)}throw Error(i(438,String(s)))}function _p(s){var o=null,l=$e.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var u=$e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=vp(),$e.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),u=0;u<s;u++)l[u]=k;return o.index++,l}function lr(s,o){return typeof o=="function"?o(s):o}function hd(s){var o=Wt();return Tp(o,Tt,s)}function Tp(s,o,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var y=s.baseQueue,T=u.pending;if(T!==null){if(y!==null){var C=y.next;y.next=T.next,T.next=C}o.baseQueue=y=T,u.pending=null}if(T=s.baseState,y===null)s.memoizedState=T;else{o=y.next;var x=C=null,q=null,Z=o,re=!1;do{var de=Z.lane&-536870913;if(de!==Z.lane?(ot&de)===de:($r&de)===de){var ee=Z.revertLane;if(ee===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),de===Ma&&(re=!0);else if(($r&ee)===ee){Z=Z.next,ee===Ma&&(re=!0);continue}else de={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(x=q=de,C=T):q=q.next=de,$e.lanes|=ee,Zr|=ee;de=Z.action,Wo&&l(T,de),T=Z.hasEagerState?Z.eagerState:l(T,de)}else ee={lane:de,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(x=q=ee,C=T):q=q.next=ee,$e.lanes|=de,Zr|=de;Z=Z.next}while(Z!==null&&Z!==o);if(q===null?C=T:q.next=x,!yi(T,s.memoizedState)&&(fn=!0,re&&(l=Ua,l!==null)))throw l;s.memoizedState=T,s.baseState=C,s.baseQueue=q,u.lastRenderedState=T}return y===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Ep(s){var o=Wt(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,y=l.pending,T=o.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do T=s(T,C.action),C=C.next;while(C!==y);yi(T,o.memoizedState)||(fn=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),l.lastRenderedState=T}return[T,u]}function Pv(s,o,l){var u=$e,y=Wt(),T=ht;if(T){if(l===void 0)throw Error(i(407));l=l()}else l=o();var C=!yi((Tt||y).memoizedState,l);C&&(y.memoizedState=l,fn=!0),y=y.queue;var x=Mv.bind(null,u,y,s);if(mc(2048,8,x,[s]),y.getSnapshot!==o||C||Jt!==null&&Jt.memoizedState.tag&1){if(u.flags|=2048,Fa(9,fd(),kv.bind(null,u,y,l,o),null),Nt===null)throw Error(i(349));T||($r&124)!==0||Dv(u,o,l)}return l}function Dv(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=$e.updateQueue,o===null?(o=vp(),$e.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function kv(s,o,l,u){o.value=l,o.getSnapshot=u,Uv(o)&&Vv(s)}function Mv(s,o,l){return l(function(){Uv(o)&&Vv(s)})}function Uv(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!yi(s,l)}catch{return!0}}function Vv(s){var o=Na(s,2);o!==null&&Si(o,s,2)}function Ap(s){var o=si();if(typeof s=="function"){var l=s;if(s=l(),Wo){pt(!0);try{l()}finally{pt(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:s},o}function Lv(s,o,l,u){return s.baseState=l,Tp(s,Tt,typeof u=="function"?u:lr)}function fx(s,o,l,u,y){if(md(s))throw Error(i(485));if(s=o.action,s!==null){var T={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){T.listeners.push(C)}};ie.T!==null?l(!0):T.isTransition=!1,u(T),l=o.pending,l===null?(T.next=o.pending=T,Ov(o,T)):(T.next=l.next,o.pending=l.next=T)}}function Ov(s,o){var l=o.action,u=o.payload,y=s.state;if(o.isTransition){var T=ie.T,C={};ie.T=C;try{var x=l(y,u),q=ie.S;q!==null&&q(C,x),Fv(s,o,x)}catch(Z){Sp(s,o,Z)}finally{ie.T=T}}else try{T=l(y,u),Fv(s,o,T)}catch(Z){Sp(s,o,Z)}}function Fv(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){qv(s,o,u)},function(u){return Sp(s,o,u)}):qv(s,o,l)}function qv(s,o,l){o.status="fulfilled",o.value=l,Bv(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,Ov(s,l)))}function Sp(s,o,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=l,Bv(o),o=o.next;while(o!==u)}s.action=null}function Bv(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Hv(s,o){return o}function Gv(s,o){if(ht){var l=Nt.formState;if(l!==null){e:{var u=$e;if(ht){if(qt){t:{for(var y=qt,T=Is;y.nodeType!==8;){if(!T){y=null;break t}if(y=ls(y.nextSibling),y===null){y=null;break t}}T=y.data,y=T==="F!"||T==="F"?y:null}if(y){qt=ls(y.nextSibling),u=y.data==="F!";break e}}$o(u)}u=!1}u&&(o=l[0])}}return l=si(),l.memoizedState=l.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hv,lastRenderedState:o},l.queue=u,l=l_.bind(null,$e,u),u.dispatch=l,u=Ap(!1),T=Rp.bind(null,$e,!1,u.queue),u=si(),y={state:o,dispatch:null,action:s,pending:null},u.queue=y,l=fx.bind(null,$e,y,T,l),y.dispatch=l,u.memoizedState=s,[o,l,!1]}function jv(s){var o=Wt();return zv(o,Tt,s)}function zv(s,o,l){if(o=Tp(s,o,Hv)[0],s=hd(lr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=pc(o)}catch(C){throw C===lc?od:C}else u=o;o=Wt();var y=o.queue,T=y.dispatch;return l!==o.memoizedState&&($e.flags|=2048,Fa(9,fd(),px.bind(null,y,l),null)),[u,T,s]}function px(s,o){s.action=o}function $v(s){var o=Wt(),l=Tt;if(l!==null)return zv(o,l,s);Wt(),o=o.memoizedState,l=Wt();var u=l.queue.dispatch;return l.memoizedState=s,[o,u,!1]}function Fa(s,o,l,u){return s={tag:s,create:l,deps:u,inst:o,next:null},o=$e.updateQueue,o===null&&(o=vp(),$e.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,o.lastEffect=s),s}function fd(){return{destroy:void 0,resource:void 0}}function Kv(){return Wt().memoizedState}function pd(s,o,l,u){var y=si();u=u===void 0?null:u,$e.flags|=s,y.memoizedState=Fa(1|o,fd(),l,u)}function mc(s,o,l,u){var y=Wt();u=u===void 0?null:u;var T=y.memoizedState.inst;Tt!==null&&u!==null&&fp(u,Tt.memoizedState.deps)?y.memoizedState=Fa(o,T,l,u):($e.flags|=s,y.memoizedState=Fa(1|o,T,l,u))}function Yv(s,o){pd(8390656,8,s,o)}function Jv(s,o){mc(2048,8,s,o)}function Wv(s,o){return mc(4,2,s,o)}function Qv(s,o){return mc(4,4,s,o)}function Xv(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Zv(s,o,l){l=l!=null?l.concat([s]):null,mc(4,4,Xv.bind(null,o,s),l)}function wp(){}function e_(s,o){var l=Wt();o=o===void 0?null:o;var u=l.memoizedState;return o!==null&&fp(o,u[1])?u[0]:(l.memoizedState=[s,o],s)}function t_(s,o){var l=Wt();o=o===void 0?null:o;var u=l.memoizedState;if(o!==null&&fp(o,u[1]))return u[0];if(u=s(),Wo){pt(!0);try{s()}finally{pt(!1)}}return l.memoizedState=[u,o],u}function Cp(s,o,l){return l===void 0||($r&1073741824)!==0?s.memoizedState=o:(s.memoizedState=l,s=sT(),$e.lanes|=s,Zr|=s,l)}function n_(s,o,l,u){return yi(l,o)?l:Va.current!==null?(s=Cp(s,l,u),yi(s,o)||(fn=!0),s):($r&42)===0?(fn=!0,s.memoizedState=l):(s=sT(),$e.lanes|=s,Zr|=s,o)}function i_(s,o,l,u,y){var T=pe.p;pe.p=T!==0&&8>T?T:8;var C=ie.T,x={};ie.T=x,Rp(s,!1,o,l);try{var q=y(),Z=ie.S;if(Z!==null&&Z(x,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var re=ux(q,u);gc(s,o,re,Ai(s))}else gc(s,o,u,Ai(s))}catch(de){gc(s,o,{then:function(){},status:"rejected",reason:de},Ai())}finally{pe.p=T,ie.T=C}}function mx(){}function Ip(s,o,l,u){if(s.tag!==5)throw Error(i(476));var y=s_(s).queue;i_(s,y,o,we,l===null?mx:function(){return r_(s),l(u)})}function s_(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:we},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function r_(s){var o=s_(s).next.queue;gc(s,o,{},Ai())}function xp(){return Ln(Mc)}function o_(){return Wt().memoizedState}function a_(){return Wt().memoizedState}function gx(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=Ai();s=jr(l);var u=zr(o,s,l);u!==null&&(Si(u,o,l),uc(u,o,l)),o={cache:ip()},s.payload=o;return}o=o.return}}function yx(s,o,l){var u=Ai();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},md(s)?c_(o,l):(l=Kf(s,o,l,u),l!==null&&(Si(l,s,u),u_(l,o,u)))}function l_(s,o,l){var u=Ai();gc(s,o,l,u)}function gc(s,o,l,u){var y={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(md(s))c_(o,y);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var C=o.lastRenderedState,x=T(C,l);if(y.hasEagerState=!0,y.eagerState=x,yi(x,C))return Xu(s,o,y,0),Nt===null&&Qu(),!1}catch{}finally{}if(l=Kf(s,o,y,u),l!==null)return Si(l,s,u),u_(l,o,u),!0}return!1}function Rp(s,o,l,u){if(u={lane:2,revertLane:om(),action:u,hasEagerState:!1,eagerState:null,next:null},md(s)){if(o)throw Error(i(479))}else o=Kf(s,l,u,2),o!==null&&Si(o,s,2)}function md(s){var o=s.alternate;return s===$e||o!==null&&o===$e}function c_(s,o){La=cd=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function u_(s,o,l){if((l&4194048)!==0){var u=o.lanes;u&=s.pendingLanes,l|=u,o.lanes=l,Pi(s,l)}}var gd={readContext:Ln,use:dd,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt},d_={readContext:Ln,use:dd,useCallback:function(s,o){return si().memoizedState=[s,o===void 0?null:o],s},useContext:Ln,useEffect:Yv,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,pd(4194308,4,Xv.bind(null,o,s),l)},useLayoutEffect:function(s,o){return pd(4194308,4,s,o)},useInsertionEffect:function(s,o){pd(4,2,s,o)},useMemo:function(s,o){var l=si();o=o===void 0?null:o;var u=s();if(Wo){pt(!0);try{s()}finally{pt(!1)}}return l.memoizedState=[u,o],u},useReducer:function(s,o,l){var u=si();if(l!==void 0){var y=l(o);if(Wo){pt(!0);try{l(o)}finally{pt(!1)}}}else y=o;return u.memoizedState=u.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},u.queue=s,s=s.dispatch=yx.bind(null,$e,s),[u.memoizedState,s]},useRef:function(s){var o=si();return s={current:s},o.memoizedState=s},useState:function(s){s=Ap(s);var o=s.queue,l=l_.bind(null,$e,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:wp,useDeferredValue:function(s,o){var l=si();return Cp(l,s,o)},useTransition:function(){var s=Ap(!1);return s=i_.bind(null,$e,s.queue,!0,!1),si().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var u=$e,y=si();if(ht){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),Nt===null)throw Error(i(349));(ot&124)!==0||Dv(u,o,l)}y.memoizedState=l;var T={value:l,getSnapshot:o};return y.queue=T,Yv(Mv.bind(null,u,T,s),[s]),u.flags|=2048,Fa(9,fd(),kv.bind(null,u,T,l,o),null),l},useId:function(){var s=si(),o=Nt.identifierPrefix;if(ht){var l=rr,u=sr;l=(u&~(1<<32-Kt(u)-1)).toString(32)+l,o=""+o+"R"+l,l=ud++,0<l&&(o+="H"+l.toString(32)),o+=""}else l=dx++,o=""+o+"r"+l.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:xp,useFormState:Gv,useActionState:Gv,useOptimistic:function(s){var o=si();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Rp.bind(null,$e,!0,l),l.dispatch=o,[s,o]},useMemoCache:_p,useCacheRefresh:function(){return si().memoizedState=gx.bind(null,$e)}},h_={readContext:Ln,use:dd,useCallback:e_,useContext:Ln,useEffect:Jv,useImperativeHandle:Zv,useInsertionEffect:Wv,useLayoutEffect:Qv,useMemo:t_,useReducer:hd,useRef:Kv,useState:function(){return hd(lr)},useDebugValue:wp,useDeferredValue:function(s,o){var l=Wt();return n_(l,Tt.memoizedState,s,o)},useTransition:function(){var s=hd(lr)[0],o=Wt().memoizedState;return[typeof s=="boolean"?s:pc(s),o]},useSyncExternalStore:Pv,useId:o_,useHostTransitionStatus:xp,useFormState:jv,useActionState:jv,useOptimistic:function(s,o){var l=Wt();return Lv(l,Tt,s,o)},useMemoCache:_p,useCacheRefresh:a_},vx={readContext:Ln,use:dd,useCallback:e_,useContext:Ln,useEffect:Jv,useImperativeHandle:Zv,useInsertionEffect:Wv,useLayoutEffect:Qv,useMemo:t_,useReducer:Ep,useRef:Kv,useState:function(){return Ep(lr)},useDebugValue:wp,useDeferredValue:function(s,o){var l=Wt();return Tt===null?Cp(l,s,o):n_(l,Tt.memoizedState,s,o)},useTransition:function(){var s=Ep(lr)[0],o=Wt().memoizedState;return[typeof s=="boolean"?s:pc(s),o]},useSyncExternalStore:Pv,useId:o_,useHostTransitionStatus:xp,useFormState:$v,useActionState:$v,useOptimistic:function(s,o){var l=Wt();return Tt!==null?Lv(l,Tt,s,o):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:_p,useCacheRefresh:a_},qa=null,yc=0;function yd(s){var o=yc;return yc+=1,qa===null&&(qa=[]),Sv(qa,s,o)}function vc(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function vd(s,o){throw o.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function f_(s){var o=s._init;return o(s._payload)}function p_(s){function o(K,j){if(s){var W=K.deletions;W===null?(K.deletions=[j],K.flags|=16):W.push(j)}}function l(K,j){if(!s)return null;for(;j!==null;)o(K,j),j=j.sibling;return null}function u(K){for(var j=new Map;K!==null;)K.key!==null?j.set(K.key,K):j.set(K.index,K),K=K.sibling;return j}function y(K,j){return K=ir(K,j),K.index=0,K.sibling=null,K}function T(K,j,W){return K.index=W,s?(W=K.alternate,W!==null?(W=W.index,W<j?(K.flags|=67108866,j):W):(K.flags|=67108866,j)):(K.flags|=1048576,j)}function C(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function x(K,j,W,ce){return j===null||j.tag!==6?(j=Jf(W,K.mode,ce),j.return=K,j):(j=y(j,W),j.return=K,j)}function q(K,j,W,ce){var Ae=W.type;return Ae===M?re(K,j,W.props.children,ce,W.key):j!==null&&(j.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===N&&f_(Ae)===j.type)?(j=y(j,W.props),vc(j,W),j.return=K,j):(j=ed(W.type,W.key,W.props,null,K.mode,ce),vc(j,W),j.return=K,j)}function Z(K,j,W,ce){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=Wf(W,K.mode,ce),j.return=K,j):(j=y(j,W.children||[]),j.return=K,j)}function re(K,j,W,ce,Ae){return j===null||j.tag!==7?(j=Ho(W,K.mode,ce,Ae),j.return=K,j):(j=y(j,W),j.return=K,j)}function de(K,j,W){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Jf(""+j,K.mode,W),j.return=K,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return W=ed(j.type,j.key,j.props,null,K.mode,W),vc(W,j),W.return=K,W;case R:return j=Wf(j,K.mode,W),j.return=K,j;case N:var ce=j._init;return j=ce(j._payload),de(K,j,W)}if(Oe(j)||U(j))return j=Ho(j,K.mode,W,null),j.return=K,j;if(typeof j.then=="function")return de(K,yd(j),W);if(j.$$typeof===z)return de(K,sd(K,j),W);vd(K,j)}return null}function ee(K,j,W,ce){var Ae=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ae!==null?null:x(K,j,""+W,ce);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A:return W.key===Ae?q(K,j,W,ce):null;case R:return W.key===Ae?Z(K,j,W,ce):null;case N:return Ae=W._init,W=Ae(W._payload),ee(K,j,W,ce)}if(Oe(W)||U(W))return Ae!==null?null:re(K,j,W,ce,null);if(typeof W.then=="function")return ee(K,j,yd(W),ce);if(W.$$typeof===z)return ee(K,j,sd(K,W),ce);vd(K,W)}return null}function te(K,j,W,ce,Ae){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(W)||null,x(j,K,""+ce,Ae);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case A:return K=K.get(ce.key===null?W:ce.key)||null,q(j,K,ce,Ae);case R:return K=K.get(ce.key===null?W:ce.key)||null,Z(j,K,ce,Ae);case N:var Ye=ce._init;return ce=Ye(ce._payload),te(K,j,W,ce,Ae)}if(Oe(ce)||U(ce))return K=K.get(W)||null,re(j,K,ce,Ae,null);if(typeof ce.then=="function")return te(K,j,W,yd(ce),Ae);if(ce.$$typeof===z)return te(K,j,W,sd(j,ce),Ae);vd(j,ce)}return null}function Le(K,j,W,ce){for(var Ae=null,Ye=null,Pe=j,Me=j=0,mn=null;Pe!==null&&Me<W.length;Me++){Pe.index>Me?(mn=Pe,Pe=null):mn=Pe.sibling;var ut=ee(K,Pe,W[Me],ce);if(ut===null){Pe===null&&(Pe=mn);break}s&&Pe&&ut.alternate===null&&o(K,Pe),j=T(ut,j,Me),Ye===null?Ae=ut:Ye.sibling=ut,Ye=ut,Pe=mn}if(Me===W.length)return l(K,Pe),ht&&jo(K,Me),Ae;if(Pe===null){for(;Me<W.length;Me++)Pe=de(K,W[Me],ce),Pe!==null&&(j=T(Pe,j,Me),Ye===null?Ae=Pe:Ye.sibling=Pe,Ye=Pe);return ht&&jo(K,Me),Ae}for(Pe=u(Pe);Me<W.length;Me++)mn=te(Pe,K,Me,W[Me],ce),mn!==null&&(s&&mn.alternate!==null&&Pe.delete(mn.key===null?Me:mn.key),j=T(mn,j,Me),Ye===null?Ae=mn:Ye.sibling=mn,Ye=mn);return s&&Pe.forEach(function(lo){return o(K,lo)}),ht&&jo(K,Me),Ae}function De(K,j,W,ce){if(W==null)throw Error(i(151));for(var Ae=null,Ye=null,Pe=j,Me=j=0,mn=null,ut=W.next();Pe!==null&&!ut.done;Me++,ut=W.next()){Pe.index>Me?(mn=Pe,Pe=null):mn=Pe.sibling;var lo=ee(K,Pe,ut.value,ce);if(lo===null){Pe===null&&(Pe=mn);break}s&&Pe&&lo.alternate===null&&o(K,Pe),j=T(lo,j,Me),Ye===null?Ae=lo:Ye.sibling=lo,Ye=lo,Pe=mn}if(ut.done)return l(K,Pe),ht&&jo(K,Me),Ae;if(Pe===null){for(;!ut.done;Me++,ut=W.next())ut=de(K,ut.value,ce),ut!==null&&(j=T(ut,j,Me),Ye===null?Ae=ut:Ye.sibling=ut,Ye=ut);return ht&&jo(K,Me),Ae}for(Pe=u(Pe);!ut.done;Me++,ut=W.next())ut=te(Pe,K,Me,ut.value,ce),ut!==null&&(s&&ut.alternate!==null&&Pe.delete(ut.key===null?Me:ut.key),j=T(ut,j,Me),Ye===null?Ae=ut:Ye.sibling=ut,Ye=ut);return s&&Pe.forEach(function(_R){return o(K,_R)}),ht&&jo(K,Me),Ae}function At(K,j,W,ce){if(typeof W=="object"&&W!==null&&W.type===M&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case A:e:{for(var Ae=W.key;j!==null;){if(j.key===Ae){if(Ae=W.type,Ae===M){if(j.tag===7){l(K,j.sibling),ce=y(j,W.props.children),ce.return=K,K=ce;break e}}else if(j.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===N&&f_(Ae)===j.type){l(K,j.sibling),ce=y(j,W.props),vc(ce,W),ce.return=K,K=ce;break e}l(K,j);break}else o(K,j);j=j.sibling}W.type===M?(ce=Ho(W.props.children,K.mode,ce,W.key),ce.return=K,K=ce):(ce=ed(W.type,W.key,W.props,null,K.mode,ce),vc(ce,W),ce.return=K,K=ce)}return C(K);case R:e:{for(Ae=W.key;j!==null;){if(j.key===Ae)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){l(K,j.sibling),ce=y(j,W.children||[]),ce.return=K,K=ce;break e}else{l(K,j);break}else o(K,j);j=j.sibling}ce=Wf(W,K.mode,ce),ce.return=K,K=ce}return C(K);case N:return Ae=W._init,W=Ae(W._payload),At(K,j,W,ce)}if(Oe(W))return Le(K,j,W,ce);if(U(W)){if(Ae=U(W),typeof Ae!="function")throw Error(i(150));return W=Ae.call(W),De(K,j,W,ce)}if(typeof W.then=="function")return At(K,j,yd(W),ce);if(W.$$typeof===z)return At(K,j,sd(K,W),ce);vd(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,j!==null&&j.tag===6?(l(K,j.sibling),ce=y(j,W),ce.return=K,K=ce):(l(K,j),ce=Jf(W,K.mode,ce),ce.return=K,K=ce),C(K)):l(K,j)}return function(K,j,W,ce){try{yc=0;var Ae=At(K,j,W,ce);return qa=null,Ae}catch(Pe){if(Pe===lc||Pe===od)throw Pe;var Ye=vi(29,Pe,null,K.mode);return Ye.lanes=ce,Ye.return=K,Ye}finally{}}}var Ba=p_(!0),m_=p_(!1),Hi=ne(null),xs=null;function Kr(s){var o=s.alternate;le(on,on.current&1),le(Hi,s),xs===null&&(o===null||Va.current!==null||o.memoizedState!==null)&&(xs=s)}function g_(s){if(s.tag===22){if(le(on,on.current),le(Hi,s),xs===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(xs=s)}}else Yr()}function Yr(){le(on,on.current),le(Hi,Hi.current)}function cr(s){ae(Hi),xs===s&&(xs=null),ae(on)}var on=ne(0);function _d(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||vm(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function bp(s,o,l,u){o=s.memoizedState,l=l(u,o),l=l==null?o:_({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Np={enqueueSetState:function(s,o,l){s=s._reactInternals;var u=Ai(),y=jr(u);y.payload=o,l!=null&&(y.callback=l),o=zr(s,y,u),o!==null&&(Si(o,s,u),uc(o,s,u))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var u=Ai(),y=jr(u);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=zr(s,y,u),o!==null&&(Si(o,s,u),uc(o,s,u))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=Ai(),u=jr(l);u.tag=2,o!=null&&(u.callback=o),o=zr(s,u,l),o!==null&&(Si(o,s,l),uc(o,s,l))}};function y_(s,o,l,u,y,T,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,T,C):o.prototype&&o.prototype.isPureReactComponent?!ec(l,u)||!ec(y,T):!0}function v_(s,o,l,u){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,u),o.state!==s&&Np.enqueueReplaceState(o,o.state,null)}function Qo(s,o){var l=o;if("ref"in o){l={};for(var u in o)u!=="ref"&&(l[u]=o[u])}if(s=s.defaultProps){l===o&&(l=_({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}var Td=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function __(s){Td(s)}function T_(s){console.error(s)}function E_(s){Td(s)}function Ed(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function A_(s,o,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Pp(s,o,l){return l=jr(l),l.tag=3,l.payload={element:null},l.callback=function(){Ed(s,o)},l}function S_(s){return s=jr(s),s.tag=3,s}function w_(s,o,l,u){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var T=u.value;s.payload=function(){return y(T)},s.callback=function(){A_(o,l,u)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){A_(o,l,u),typeof y!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var x=u.stack;this.componentDidCatch(u.value,{componentStack:x!==null?x:""})})}function _x(s,o,l,u,y){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=l.alternate,o!==null&&rc(o,l,y,!0),l=Hi.current,l!==null){switch(l.tag){case 13:return xs===null?tm():l.alternate===null&&Bt===0&&(Bt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,u===op?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([u]):o.add(u),im(s,u,y)),!1;case 22:return l.flags|=65536,u===op?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([u]):l.add(u)),im(s,u,y)),!1}throw Error(i(435,l.tag))}return im(s,u,y),tm(),!1}if(ht)return o=Hi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,u!==Zf&&(s=Error(i(422),{cause:u}),sc(Oi(s,l)))):(u!==Zf&&(o=Error(i(423),{cause:u}),sc(Oi(o,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,u=Oi(u,l),y=Pp(s.stateNode,u,y),cp(s,y),Bt!==4&&(Bt=2)),!1;var T=Error(i(520),{cause:u});if(T=Oi(T,l),Cc===null?Cc=[T]:Cc.push(T),Bt!==4&&(Bt=2),o===null)return!0;u=Oi(u,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Pp(l.stateNode,u,s),cp(l,s),!1;case 1:if(o=l.type,T=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(eo===null||!eo.has(T))))return l.flags|=65536,y&=-y,l.lanes|=y,y=S_(y),w_(y,s,l,u),cp(l,y),!1}l=l.return}while(l!==null);return!1}var C_=Error(i(461)),fn=!1;function Cn(s,o,l,u){o.child=s===null?m_(o,null,l,u):Ba(o,s.child,l,u)}function I_(s,o,l,u,y){l=l.render;var T=o.ref;if("ref"in u){var C={};for(var x in u)x!=="ref"&&(C[x]=u[x])}else C=u;return Yo(o),u=pp(s,o,l,C,T,y),x=mp(),s!==null&&!fn?(gp(s,o,y),ur(s,o,y)):(ht&&x&&Qf(o),o.flags|=1,Cn(s,o,u,y),o.child)}function x_(s,o,l,u,y){if(s===null){var T=l.type;return typeof T=="function"&&!Yf(T)&&T.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=T,R_(s,o,T,u,y)):(s=ed(l.type,null,u,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(T=s.child,!Fp(s,y)){var C=T.memoizedProps;if(l=l.compare,l=l!==null?l:ec,l(C,u)&&s.ref===o.ref)return ur(s,o,y)}return o.flags|=1,s=ir(T,u),s.ref=o.ref,s.return=o,o.child=s}function R_(s,o,l,u,y){if(s!==null){var T=s.memoizedProps;if(ec(T,u)&&s.ref===o.ref)if(fn=!1,o.pendingProps=u=T,Fp(s,y))(s.flags&131072)!==0&&(fn=!0);else return o.lanes=s.lanes,ur(s,o,y)}return Dp(s,o,l,u,y)}function b_(s,o,l){var u=o.pendingProps,y=u.children,T=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((o.flags&128)!==0){if(u=T!==null?T.baseLanes|l:l,s!==null){for(y=o.child=s.child,T=0;y!==null;)T=T|y.lanes|y.childLanes,y=y.sibling;o.childLanes=T&~u}else o.childLanes=0,o.child=null;return N_(s,o,u,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&rd(o,T!==null?T.cachePool:null),T!==null?Rv(o,T):dp(),g_(o);else return o.lanes=o.childLanes=536870912,N_(s,o,T!==null?T.baseLanes|l:l,l)}else T!==null?(rd(o,T.cachePool),Rv(o,T),Yr(),o.memoizedState=null):(s!==null&&rd(o,null),dp(),Yr());return Cn(s,o,y,l),o.child}function N_(s,o,l,u){var y=rp();return y=y===null?null:{parent:rn._currentValue,pool:y},o.memoizedState={baseLanes:l,cachePool:y},s!==null&&rd(o,null),dp(),g_(o),s!==null&&rc(s,o,u,!0),null}function Ad(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(o.flags|=4194816)}}function Dp(s,o,l,u,y){return Yo(o),l=pp(s,o,l,u,void 0,y),u=mp(),s!==null&&!fn?(gp(s,o,y),ur(s,o,y)):(ht&&u&&Qf(o),o.flags|=1,Cn(s,o,l,y),o.child)}function P_(s,o,l,u,y,T){return Yo(o),o.updateQueue=null,l=Nv(o,u,l,y),bv(s),u=mp(),s!==null&&!fn?(gp(s,o,T),ur(s,o,T)):(ht&&u&&Qf(o),o.flags|=1,Cn(s,o,l,T),o.child)}function D_(s,o,l,u,y){if(Yo(o),o.stateNode===null){var T=Pa,C=l.contextType;typeof C=="object"&&C!==null&&(T=Ln(C)),T=new l(u,T),o.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Np,o.stateNode=T,T._reactInternals=o,T=o.stateNode,T.props=u,T.state=o.memoizedState,T.refs={},ap(o),C=l.contextType,T.context=typeof C=="object"&&C!==null?Ln(C):Pa,T.state=o.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(bp(o,l,C,u),T.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(C=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),C!==T.state&&Np.enqueueReplaceState(T,T.state,null),hc(o,u,T,y),dc(),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(s===null){T=o.stateNode;var x=o.memoizedProps,q=Qo(l,x);T.props=q;var Z=T.context,re=l.contextType;C=Pa,typeof re=="object"&&re!==null&&(C=Ln(re));var de=l.getDerivedStateFromProps;re=typeof de=="function"||typeof T.getSnapshotBeforeUpdate=="function",x=o.pendingProps!==x,re||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(x||Z!==C)&&v_(o,T,u,C),Gr=!1;var ee=o.memoizedState;T.state=ee,hc(o,u,T,y),dc(),Z=o.memoizedState,x||ee!==Z||Gr?(typeof de=="function"&&(bp(o,l,de,u),Z=o.memoizedState),(q=Gr||y_(o,l,q,u,ee,Z,C))?(re||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=Z),T.props=u,T.state=Z,T.context=C,u=q):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{T=o.stateNode,lp(s,o),C=o.memoizedProps,re=Qo(l,C),T.props=re,de=o.pendingProps,ee=T.context,Z=l.contextType,q=Pa,typeof Z=="object"&&Z!==null&&(q=Ln(Z)),x=l.getDerivedStateFromProps,(Z=typeof x=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==de||ee!==q)&&v_(o,T,u,q),Gr=!1,ee=o.memoizedState,T.state=ee,hc(o,u,T,y),dc();var te=o.memoizedState;C!==de||ee!==te||Gr||s!==null&&s.dependencies!==null&&id(s.dependencies)?(typeof x=="function"&&(bp(o,l,x,u),te=o.memoizedState),(re=Gr||y_(o,l,re,u,ee,te,q)||s!==null&&s.dependencies!==null&&id(s.dependencies))?(Z||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(u,te,q),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(u,te,q)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=te),T.props=u,T.state=te,T.context=q,u=re):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(o.flags|=1024),u=!1)}return T=u,Ad(s,o),u=(o.flags&128)!==0,T||u?(T=o.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:T.render(),o.flags|=1,s!==null&&u?(o.child=Ba(o,s.child,null,y),o.child=Ba(o,null,l,y)):Cn(s,o,l,y),o.memoizedState=T.state,s=o.child):s=ur(s,o,y),s}function k_(s,o,l,u){return ic(),o.flags|=256,Cn(s,o,l,u),o.child}var kp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mp(s){return{baseLanes:s,cachePool:Tv()}}function Up(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=Gi),s}function M_(s,o,l){var u=o.pendingProps,y=!1,T=(o.flags&128)!==0,C;if((C=T)||(C=s!==null&&s.memoizedState===null?!1:(on.current&2)!==0),C&&(y=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,s===null){if(ht){if(y?Kr(o):Yr(),ht){var x=qt,q;if(q=x){e:{for(q=x,x=Is;q.nodeType!==8;){if(!x){x=null;break e}if(q=ls(q.nextSibling),q===null){x=null;break e}}x=q}x!==null?(o.memoizedState={dehydrated:x,treeContext:Go!==null?{id:sr,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},q=vi(18,null,null,0),q.stateNode=x,q.return=o,o.child=q,Yn=o,qt=null,q=!0):q=!1}q||$o(o)}if(x=o.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return vm(x)?o.lanes=32:o.lanes=536870912,null;cr(o)}return x=u.children,u=u.fallback,y?(Yr(),y=o.mode,x=Sd({mode:"hidden",children:x},y),u=Ho(u,y,l,null),x.return=o,u.return=o,x.sibling=u,o.child=x,y=o.child,y.memoizedState=Mp(l),y.childLanes=Up(s,C,l),o.memoizedState=kp,u):(Kr(o),Vp(o,x))}if(q=s.memoizedState,q!==null&&(x=q.dehydrated,x!==null)){if(T)o.flags&256?(Kr(o),o.flags&=-257,o=Lp(s,o,l)):o.memoizedState!==null?(Yr(),o.child=s.child,o.flags|=128,o=null):(Yr(),y=u.fallback,x=o.mode,u=Sd({mode:"visible",children:u.children},x),y=Ho(y,x,l,null),y.flags|=2,u.return=o,y.return=o,u.sibling=y,o.child=u,Ba(o,s.child,null,l),u=o.child,u.memoizedState=Mp(l),u.childLanes=Up(s,C,l),o.memoizedState=kp,o=y);else if(Kr(o),vm(x)){if(C=x.nextSibling&&x.nextSibling.dataset,C)var Z=C.dgst;C=Z,u=Error(i(419)),u.stack="",u.digest=C,sc({value:u,source:null,stack:null}),o=Lp(s,o,l)}else if(fn||rc(s,o,l,!1),C=(l&s.childLanes)!==0,fn||C){if(C=Nt,C!==null&&(u=l&-l,u=(u&42)!==0?1:Di(u),u=(u&(C.suspendedLanes|l))!==0?0:u,u!==0&&u!==q.retryLane))throw q.retryLane=u,Na(s,u),Si(C,s,u),C_;x.data==="$?"||tm(),o=Lp(s,o,l)}else x.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=q.treeContext,qt=ls(x.nextSibling),Yn=o,ht=!0,zo=null,Is=!1,s!==null&&(qi[Bi++]=sr,qi[Bi++]=rr,qi[Bi++]=Go,sr=s.id,rr=s.overflow,Go=o),o=Vp(o,u.children),o.flags|=4096);return o}return y?(Yr(),y=u.fallback,x=o.mode,q=s.child,Z=q.sibling,u=ir(q,{mode:"hidden",children:u.children}),u.subtreeFlags=q.subtreeFlags&65011712,Z!==null?y=ir(Z,y):(y=Ho(y,x,l,null),y.flags|=2),y.return=o,u.return=o,u.sibling=y,o.child=u,u=y,y=o.child,x=s.child.memoizedState,x===null?x=Mp(l):(q=x.cachePool,q!==null?(Z=rn._currentValue,q=q.parent!==Z?{parent:Z,pool:Z}:q):q=Tv(),x={baseLanes:x.baseLanes|l,cachePool:q}),y.memoizedState=x,y.childLanes=Up(s,C,l),o.memoizedState=kp,u):(Kr(o),l=s.child,s=l.sibling,l=ir(l,{mode:"visible",children:u.children}),l.return=o,l.sibling=null,s!==null&&(C=o.deletions,C===null?(o.deletions=[s],o.flags|=16):C.push(s)),o.child=l,o.memoizedState=null,l)}function Vp(s,o){return o=Sd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Sd(s,o){return s=vi(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Lp(s,o,l){return Ba(o,s.child,null,l),s=Vp(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function U_(s,o,l){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o),tp(s.return,o,l)}function Op(s,o,l,u,y){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:y}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=l,T.tailMode=y)}function V_(s,o,l){var u=o.pendingProps,y=u.revealOrder,T=u.tail;if(Cn(s,o,u.children,l),u=on.current,(u&2)!==0)u=u&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&U_(s,l,o);else if(s.tag===19)U_(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(le(on,u),y){case"forwards":for(l=o.child,y=null;l!==null;)s=l.alternate,s!==null&&_d(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=o.child,o.child=null):(y=l.sibling,l.sibling=null),Op(o,!1,y,l,T);break;case"backwards":for(l=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&_d(s)===null){o.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Op(o,!0,l,null,T);break;case"together":Op(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ur(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Zr|=o.lanes,(l&o.childLanes)===0)if(s!==null){if(rc(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,l=ir(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=ir(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function Fp(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&id(s)))}function Tx(s,o,l){switch(o.tag){case 3:Ve(o,o.stateNode.containerInfo),Hr(o,rn,s.memoizedState.cache),ic();break;case 27:case 5:Je(o);break;case 4:Ve(o,o.stateNode.containerInfo);break;case 10:Hr(o,o.type,o.memoizedProps.value);break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Kr(o),o.flags|=128,null):(l&o.child.childLanes)!==0?M_(s,o,l):(Kr(o),s=ur(s,o,l),s!==null?s.sibling:null);Kr(o);break;case 19:var y=(s.flags&128)!==0;if(u=(l&o.childLanes)!==0,u||(rc(s,o,l,!1),u=(l&o.childLanes)!==0),y){if(u)return V_(s,o,l);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(on,on.current),u)break;return null;case 22:case 23:return o.lanes=0,b_(s,o,l);case 24:Hr(o,rn,s.memoizedState.cache)}return ur(s,o,l)}function L_(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)fn=!0;else{if(!Fp(s,l)&&(o.flags&128)===0)return fn=!1,Tx(s,o,l);fn=(s.flags&131072)!==0}else fn=!1,ht&&(o.flags&1048576)!==0&&fv(o,nd,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var u=o.elementType,y=u._init;if(u=y(u._payload),o.type=u,typeof u=="function")Yf(u)?(s=Qo(u,s),o.tag=1,o=D_(null,o,u,s,l)):(o.tag=0,o=Dp(null,o,u,s,l));else{if(u!=null){if(y=u.$$typeof,y===X){o.tag=11,o=I_(null,o,u,s,l);break e}else if(y===O){o.tag=14,o=x_(null,o,u,s,l);break e}}throw o=_e(u)||u,Error(i(306,o,""))}}return o;case 0:return Dp(s,o,o.type,o.pendingProps,l);case 1:return u=o.type,y=Qo(u,o.pendingProps),D_(s,o,u,y,l);case 3:e:{if(Ve(o,o.stateNode.containerInfo),s===null)throw Error(i(387));u=o.pendingProps;var T=o.memoizedState;y=T.element,lp(s,o),hc(o,u,null,l);var C=o.memoizedState;if(u=C.cache,Hr(o,rn,u),u!==T.cache&&np(o,[rn],l,!0),dc(),u=C.element,T.isDehydrated)if(T={element:u,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=k_(s,o,u,l);break e}else if(u!==y){y=Oi(Error(i(424)),o),sc(y),o=k_(s,o,u,l);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(qt=ls(s.firstChild),Yn=o,ht=!0,zo=null,Is=!0,l=m_(o,null,u,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ic(),u===y){o=ur(s,o,l);break e}Cn(s,o,u,l)}o=o.child}return o;case 26:return Ad(s,o),s===null?(l=BT(o.type,null,o.pendingProps,null))?o.memoizedState=l:ht||(l=o.type,s=o.pendingProps,u=Ld(xe.current).createElement(l),u[Dt]=o,u[Be]=s,xn(u,l,s),_t(u),o.stateNode=u):o.memoizedState=BT(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Je(o),s===null&&ht&&(u=o.stateNode=OT(o.type,o.pendingProps,xe.current),Yn=o,Is=!0,y=qt,io(o.type)?(_m=y,qt=ls(u.firstChild)):qt=y),Cn(s,o,o.pendingProps.children,l),Ad(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&ht&&((y=u=qt)&&(u=Yx(u,o.type,o.pendingProps,Is),u!==null?(o.stateNode=u,Yn=o,qt=ls(u.firstChild),Is=!1,y=!0):y=!1),y||$o(o)),Je(o),y=o.type,T=o.pendingProps,C=s!==null?s.memoizedProps:null,u=T.children,mm(y,T)?u=null:C!==null&&mm(y,C)&&(o.flags|=32),o.memoizedState!==null&&(y=pp(s,o,hx,null,null,l),Mc._currentValue=y),Ad(s,o),Cn(s,o,u,l),o.child;case 6:return s===null&&ht&&((s=l=qt)&&(l=Jx(l,o.pendingProps,Is),l!==null?(o.stateNode=l,Yn=o,qt=null,s=!0):s=!1),s||$o(o)),null;case 13:return M_(s,o,l);case 4:return Ve(o,o.stateNode.containerInfo),u=o.pendingProps,s===null?o.child=Ba(o,null,u,l):Cn(s,o,u,l),o.child;case 11:return I_(s,o,o.type,o.pendingProps,l);case 7:return Cn(s,o,o.pendingProps,l),o.child;case 8:return Cn(s,o,o.pendingProps.children,l),o.child;case 12:return Cn(s,o,o.pendingProps.children,l),o.child;case 10:return u=o.pendingProps,Hr(o,o.type,u.value),Cn(s,o,u.children,l),o.child;case 9:return y=o.type._context,u=o.pendingProps.children,Yo(o),y=Ln(y),u=u(y),o.flags|=1,Cn(s,o,u,l),o.child;case 14:return x_(s,o,o.type,o.pendingProps,l);case 15:return R_(s,o,o.type,o.pendingProps,l);case 19:return V_(s,o,l);case 31:return u=o.pendingProps,l=o.mode,u={mode:u.mode,children:u.children},s===null?(l=Sd(u,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=ir(s.child,u),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return b_(s,o,l);case 24:return Yo(o),u=Ln(rn),s===null?(y=rp(),y===null&&(y=Nt,T=ip(),y.pooledCache=T,T.refCount++,T!==null&&(y.pooledCacheLanes|=l),y=T),o.memoizedState={parent:u,cache:y},ap(o),Hr(o,rn,y)):((s.lanes&l)!==0&&(lp(s,o),hc(o,null,null,l),dc()),y=s.memoizedState,T=o.memoizedState,y.parent!==u?(y={parent:u,cache:u},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Hr(o,rn,u)):(u=T.cache,Hr(o,rn,u),u!==y.cache&&np(o,[rn],l,!0))),Cn(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function dr(s){s.flags|=4}function O_(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!$T(o)){if(o=Hi.current,o!==null&&((ot&4194048)===ot?xs!==null:(ot&62914560)!==ot&&(ot&536870912)===0||o!==xs))throw cc=op,Ev;s.flags|=8192}}function wd(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Ni():536870912,s.lanes|=o,za|=o)}function _c(s,o){if(!ht)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function Ut(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(o)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=u,s.childLanes=l,o}function Ex(s,o,l){var u=o.pendingProps;switch(Xf(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(o),null;case 1:return Ut(o),null;case 3:return l=o.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ar(rn),Ht(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(nc(o)?dr(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gv())),Ut(o),null;case 26:return l=o.memoizedState,s===null?(dr(o),l!==null?(Ut(o),O_(o,l)):(Ut(o),o.flags&=-16777217)):l?l!==s.memoizedState?(dr(o),Ut(o),O_(o,l)):(Ut(o),o.flags&=-16777217):(s.memoizedProps!==u&&dr(o),Ut(o),o.flags&=-16777217),null;case 27:Gt(o),l=xe.current;var y=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==u&&dr(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return Ut(o),null}s=ye.current,nc(o)?pv(o):(s=OT(y,u,l),o.stateNode=s,dr(o))}return Ut(o),null;case 5:if(Gt(o),l=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==u&&dr(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return Ut(o),null}if(s=ye.current,nc(o))pv(o);else{switch(y=Ld(xe.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?y.createElement("select",{is:u.is}):y.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?y.createElement(l,{is:u.is}):y.createElement(l)}}s[Dt]=o,s[Be]=u;e:for(y=o.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}o.stateNode=s;e:switch(xn(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&dr(o)}}return Ut(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==u&&dr(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(i(166));if(s=xe.current,nc(o)){if(s=o.stateNode,l=o.memoizedProps,u=null,y=Yn,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}s[Dt]=o,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||PT(s.nodeValue,l)),s||$o(o)}else s=Ld(s).createTextNode(u),s[Dt]=o,o.stateNode=s}return Ut(o),null;case 13:if(u=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=nc(o),u!==null&&u.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Dt]=o}else ic(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),y=!1}else y=gv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(cr(o),o):(cr(o),null)}if(cr(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=o.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool);var T=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(T=u.memoizedState.cachePool.pool),T!==y&&(u.flags|=2048)}return l!==s&&l&&(o.child.flags|=8192),wd(o,o.updateQueue),Ut(o),null;case 4:return Ht(),s===null&&um(o.stateNode.containerInfo),Ut(o),null;case 10:return ar(o.type),Ut(o),null;case 19:if(ae(on),y=o.memoizedState,y===null)return Ut(o),null;if(u=(o.flags&128)!==0,T=y.rendering,T===null)if(u)_c(y,!1);else{if(Bt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(T=_d(s),T!==null){for(o.flags|=128,_c(y,!1),s=T.updateQueue,o.updateQueue=s,wd(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)hv(l,s),l=l.sibling;return le(on,on.current&1|2),o.child}s=s.sibling}y.tail!==null&&kn()>xd&&(o.flags|=128,u=!0,_c(y,!1),o.lanes=4194304)}else{if(!u)if(s=_d(T),s!==null){if(o.flags|=128,u=!0,s=s.updateQueue,o.updateQueue=s,wd(o,s),_c(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!ht)return Ut(o),null}else 2*kn()-y.renderingStartTime>xd&&l!==536870912&&(o.flags|=128,u=!0,_c(y,!1),o.lanes=4194304);y.isBackwards?(T.sibling=o.child,o.child=T):(s=y.last,s!==null?s.sibling=T:o.child=T,y.last=T)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=kn(),o.sibling=null,s=on.current,le(on,u?s&1|2:s&1),o):(Ut(o),null);case 22:case 23:return cr(o),hp(),u=o.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(l&536870912)!==0&&(o.flags&128)===0&&(Ut(o),o.subtreeFlags&6&&(o.flags|=8192)):Ut(o),l=o.updateQueue,l!==null&&wd(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==l&&(o.flags|=2048),s!==null&&ae(Jo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),ar(rn),Ut(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Ax(s,o){switch(Xf(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ar(rn),Ht(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Gt(o),null;case 13:if(cr(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));ic()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ae(on),null;case 4:return Ht(),null;case 10:return ar(o.type),null;case 22:case 23:return cr(o),hp(),s!==null&&ae(Jo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return ar(rn),null;case 25:return null;default:return null}}function F_(s,o){switch(Xf(o),o.tag){case 3:ar(rn),Ht();break;case 26:case 27:case 5:Gt(o);break;case 4:Ht();break;case 13:cr(o);break;case 19:ae(on);break;case 10:ar(o.type);break;case 22:case 23:cr(o),hp(),s!==null&&ae(Jo);break;case 24:ar(rn)}}function Tc(s,o){try{var l=o.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var y=u.next;l=y;do{if((l.tag&s)===s){u=void 0;var T=l.create,C=l.inst;u=T(),C.destroy=u}l=l.next}while(l!==y)}}catch(x){It(o,o.return,x)}}function Jr(s,o,l){try{var u=o.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var T=y.next;u=T;do{if((u.tag&s)===s){var C=u.inst,x=C.destroy;if(x!==void 0){C.destroy=void 0,y=o;var q=l,Z=x;try{Z()}catch(re){It(y,q,re)}}}u=u.next}while(u!==T)}}catch(re){It(o,o.return,re)}}function q_(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{xv(o,l)}catch(u){It(s,s.return,u)}}}function B_(s,o,l){l.props=Qo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){It(s,o,u)}}function Ec(s,o){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(y){It(s,o,y)}}function Rs(s,o){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(y){It(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){It(s,o,y)}else l.current=null}function H_(s){var o=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(y){It(s,s.return,y)}}function qp(s,o,l){try{var u=s.stateNode;Gx(u,s.type,l,o),u[Be]=o}catch(y){It(s,s.return,y)}}function G_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&io(s.type)||s.tag===4}function Bp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||G_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&io(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Hp(s,o,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(s),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Vd));else if(u!==4&&(u===27&&io(s.type)&&(l=s.stateNode,o=null),s=s.child,s!==null))for(Hp(s,o,l),s=s.sibling;s!==null;)Hp(s,o,l),s=s.sibling}function Cd(s,o,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(u!==4&&(u===27&&io(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Cd(s,o,l),s=s.sibling;s!==null;)Cd(s,o,l),s=s.sibling}function j_(s){var o=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);xn(o,u,l),o[Dt]=s,o[Be]=l}catch(T){It(s,s.return,T)}}var hr=!1,zt=!1,Gp=!1,z_=typeof WeakSet=="function"?WeakSet:Set,pn=null;function Sx(s,o){if(s=s.containerInfo,fm=Gd,s=nv(s),Bf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var y=u.anchorOffset,T=u.focusNode;u=u.focusOffset;try{l.nodeType,T.nodeType}catch{l=null;break e}var C=0,x=-1,q=-1,Z=0,re=0,de=s,ee=null;t:for(;;){for(var te;de!==l||y!==0&&de.nodeType!==3||(x=C+y),de!==T||u!==0&&de.nodeType!==3||(q=C+u),de.nodeType===3&&(C+=de.nodeValue.length),(te=de.firstChild)!==null;)ee=de,de=te;for(;;){if(de===s)break t;if(ee===l&&++Z===y&&(x=C),ee===T&&++re===u&&(q=C),(te=de.nextSibling)!==null)break;de=ee,ee=de.parentNode}de=te}l=x===-1||q===-1?null:{start:x,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(pm={focusedElem:s,selectionRange:l},Gd=!1,pn=o;pn!==null;)if(o=pn,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,pn=s;else for(;pn!==null;){switch(o=pn,T=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,l=o,y=T.memoizedProps,T=T.memoizedState,u=l.stateNode;try{var Le=Qo(l.type,y,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(Le,T),u.__reactInternalSnapshotBeforeUpdate=s}catch(De){It(l,l.return,De)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)ym(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ym(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,pn=s;break}pn=o.return}}function $_(s,o,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Wr(s,l),u&4&&Tc(5,l);break;case 1:if(Wr(s,l),u&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(C){It(l,l.return,C)}else{var y=Qo(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(C){It(l,l.return,C)}}u&64&&q_(l),u&512&&Ec(l,l.return);break;case 3:if(Wr(s,l),u&64&&(s=l.updateQueue,s!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{xv(s,o)}catch(C){It(l,l.return,C)}}break;case 27:o===null&&u&4&&j_(l);case 26:case 5:Wr(s,l),o===null&&u&4&&H_(l),u&512&&Ec(l,l.return);break;case 12:Wr(s,l);break;case 13:Wr(s,l),u&4&&J_(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Dx.bind(null,l),Wx(s,l))));break;case 22:if(u=l.memoizedState!==null||hr,!u){o=o!==null&&o.memoizedState!==null||zt,y=hr;var T=zt;hr=u,(zt=o)&&!T?Qr(s,l,(l.subtreeFlags&8772)!==0):Wr(s,l),hr=y,zt=T}break;case 30:break;default:Wr(s,l)}}function K_(s){var o=s.alternate;o!==null&&(s.alternate=null,K_(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&ni(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var kt=null,ri=!1;function fr(s,o,l){for(l=l.child;l!==null;)Y_(s,o,l),l=l.sibling}function Y_(s,o,l){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(xt,l)}catch{}switch(l.tag){case 26:zt||Rs(l,o),fr(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:zt||Rs(l,o);var u=kt,y=ri;io(l.type)&&(kt=l.stateNode,ri=!1),fr(s,o,l),Nc(l.stateNode),kt=u,ri=y;break;case 5:zt||Rs(l,o);case 6:if(u=kt,y=ri,kt=null,fr(s,o,l),kt=u,ri=y,kt!==null)if(ri)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(l.stateNode)}catch(T){It(l,o,T)}else try{kt.removeChild(l.stateNode)}catch(T){It(l,o,T)}break;case 18:kt!==null&&(ri?(s=kt,VT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Oc(s)):VT(kt,l.stateNode));break;case 4:u=kt,y=ri,kt=l.stateNode.containerInfo,ri=!0,fr(s,o,l),kt=u,ri=y;break;case 0:case 11:case 14:case 15:zt||Jr(2,l,o),zt||Jr(4,l,o),fr(s,o,l);break;case 1:zt||(Rs(l,o),u=l.stateNode,typeof u.componentWillUnmount=="function"&&B_(l,o,u)),fr(s,o,l);break;case 21:fr(s,o,l);break;case 22:zt=(u=zt)||l.memoizedState!==null,fr(s,o,l),zt=u;break;default:fr(s,o,l)}}function J_(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Oc(s)}catch(l){It(o,o.return,l)}}function wx(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new z_),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new z_),o;default:throw Error(i(435,s.tag))}}function jp(s,o){var l=wx(s);o.forEach(function(u){var y=kx.bind(null,s,u);l.has(u)||(l.add(u),u.then(y,y))})}function _i(s,o){var l=o.deletions;if(l!==null)for(var u=0;u<l.length;u++){var y=l[u],T=s,C=o,x=C;e:for(;x!==null;){switch(x.tag){case 27:if(io(x.type)){kt=x.stateNode,ri=!1;break e}break;case 5:kt=x.stateNode,ri=!1;break e;case 3:case 4:kt=x.stateNode.containerInfo,ri=!0;break e}x=x.return}if(kt===null)throw Error(i(160));Y_(T,C,y),kt=null,ri=!1,T=y.alternate,T!==null&&(T.return=null),y.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)W_(o,s),o=o.sibling}var as=null;function W_(s,o){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:_i(o,s),Ti(s),u&4&&(Jr(3,s,s.return),Tc(3,s),Jr(5,s,s.return));break;case 1:_i(o,s),Ti(s),u&512&&(zt||l===null||Rs(l,l.return)),u&64&&hr&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var y=as;if(_i(o,s),Ti(s),u&512&&(zt||l===null||Rs(l,l.return)),u&4){var T=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":T=y.getElementsByTagName("title")[0],(!T||T[ct]||T[Dt]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=y.createElement(u),y.head.insertBefore(T,y.querySelector("head > title"))),xn(T,u,l),T[Dt]=s,_t(T),u=T;break e;case"link":var C=jT("link","href",y).get(u+(l.href||""));if(C){for(var x=0;x<C.length;x++)if(T=C[x],T.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&T.getAttribute("rel")===(l.rel==null?null:l.rel)&&T.getAttribute("title")===(l.title==null?null:l.title)&&T.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(x,1);break t}}T=y.createElement(u),xn(T,u,l),y.head.appendChild(T);break;case"meta":if(C=jT("meta","content",y).get(u+(l.content||""))){for(x=0;x<C.length;x++)if(T=C[x],T.getAttribute("content")===(l.content==null?null:""+l.content)&&T.getAttribute("name")===(l.name==null?null:l.name)&&T.getAttribute("property")===(l.property==null?null:l.property)&&T.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&T.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(x,1);break t}}T=y.createElement(u),xn(T,u,l),y.head.appendChild(T);break;default:throw Error(i(468,u))}T[Dt]=s,_t(T),u=T}s.stateNode=u}else zT(y,s.type,s.stateNode);else s.stateNode=GT(y,u,s.memoizedProps);else T!==u?(T===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):T.count--,u===null?zT(y,s.type,s.stateNode):GT(y,u,s.memoizedProps)):u===null&&s.stateNode!==null&&qp(s,s.memoizedProps,l.memoizedProps)}break;case 27:_i(o,s),Ti(s),u&512&&(zt||l===null||Rs(l,l.return)),l!==null&&u&4&&qp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(_i(o,s),Ti(s),u&512&&(zt||l===null||Rs(l,l.return)),s.flags&32){y=s.stateNode;try{Ze(y,"")}catch(te){It(s,s.return,te)}}u&4&&s.stateNode!=null&&(y=s.memoizedProps,qp(s,y,l!==null?l.memoizedProps:y)),u&1024&&(Gp=!0);break;case 6:if(_i(o,s),Ti(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(te){It(s,s.return,te)}}break;case 3:if(qd=null,y=as,as=Od(o.containerInfo),_i(o,s),as=y,Ti(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Oc(o.containerInfo)}catch(te){It(s,s.return,te)}Gp&&(Gp=!1,Q_(s));break;case 4:u=as,as=Od(s.stateNode.containerInfo),_i(o,s),Ti(s),as=u;break;case 12:_i(o,s),Ti(s);break;case 13:_i(o,s),Ti(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Wp=kn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,jp(s,u)));break;case 22:y=s.memoizedState!==null;var q=l!==null&&l.memoizedState!==null,Z=hr,re=zt;if(hr=Z||y,zt=re||q,_i(o,s),zt=re,hr=Z,Ti(s),u&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(l===null||q||hr||zt||Xo(s)),l=null,o=s;;){if(o.tag===5||o.tag===26){if(l===null){q=l=o;try{if(T=q.stateNode,y)C=T.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{x=q.stateNode;var de=q.memoizedProps.style,ee=de!=null&&de.hasOwnProperty("display")?de.display:null;x.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(te){It(q,q.return,te)}}}else if(o.tag===6){if(l===null){q=o;try{q.stateNode.nodeValue=y?"":q.memoizedProps}catch(te){It(q,q.return,te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,jp(s,l))));break;case 19:_i(o,s),Ti(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,jp(s,u)));break;case 30:break;case 21:break;default:_i(o,s),Ti(s)}}function Ti(s){var o=s.flags;if(o&2){try{for(var l,u=s.return;u!==null;){if(G_(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,T=Bp(s);Cd(s,T,y);break;case 5:var C=l.stateNode;l.flags&32&&(Ze(C,""),l.flags&=-33);var x=Bp(s);Cd(s,x,C);break;case 3:case 4:var q=l.stateNode.containerInfo,Z=Bp(s);Hp(s,Z,q);break;default:throw Error(i(161))}}catch(re){It(s,s.return,re)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Q_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Q_(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Wr(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)$_(s,o.alternate,o),o=o.sibling}function Xo(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Jr(4,o,o.return),Xo(o);break;case 1:Rs(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&B_(o,o.return,l),Xo(o);break;case 27:Nc(o.stateNode);case 26:case 5:Rs(o,o.return),Xo(o);break;case 22:o.memoizedState===null&&Xo(o);break;case 30:Xo(o);break;default:Xo(o)}s=s.sibling}}function Qr(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,y=s,T=o,C=T.flags;switch(T.tag){case 0:case 11:case 15:Qr(y,T,l),Tc(4,T);break;case 1:if(Qr(y,T,l),u=T,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Z){It(u,u.return,Z)}if(u=T,y=u.updateQueue,y!==null){var x=u.stateNode;try{var q=y.shared.hiddenCallbacks;if(q!==null)for(y.shared.hiddenCallbacks=null,y=0;y<q.length;y++)Iv(q[y],x)}catch(Z){It(u,u.return,Z)}}l&&C&64&&q_(T),Ec(T,T.return);break;case 27:j_(T);case 26:case 5:Qr(y,T,l),l&&u===null&&C&4&&H_(T),Ec(T,T.return);break;case 12:Qr(y,T,l);break;case 13:Qr(y,T,l),l&&C&4&&J_(y,T);break;case 22:T.memoizedState===null&&Qr(y,T,l),Ec(T,T.return);break;case 30:break;default:Qr(y,T,l)}o=o.sibling}}function zp(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&oc(l))}function $p(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&oc(s))}function bs(s,o,l,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)X_(s,o,l,u),o=o.sibling}function X_(s,o,l,u){var y=o.flags;switch(o.tag){case 0:case 11:case 15:bs(s,o,l,u),y&2048&&Tc(9,o);break;case 1:bs(s,o,l,u);break;case 3:bs(s,o,l,u),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&oc(s)));break;case 12:if(y&2048){bs(s,o,l,u),s=o.stateNode;try{var T=o.memoizedProps,C=T.id,x=T.onPostCommit;typeof x=="function"&&x(C,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){It(o,o.return,q)}}else bs(s,o,l,u);break;case 13:bs(s,o,l,u);break;case 23:break;case 22:T=o.stateNode,C=o.alternate,o.memoizedState!==null?T._visibility&2?bs(s,o,l,u):Ac(s,o):T._visibility&2?bs(s,o,l,u):(T._visibility|=2,Ha(s,o,l,u,(o.subtreeFlags&10256)!==0)),y&2048&&zp(C,o);break;case 24:bs(s,o,l,u),y&2048&&$p(o.alternate,o);break;default:bs(s,o,l,u)}}function Ha(s,o,l,u,y){for(y=y&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var T=s,C=o,x=l,q=u,Z=C.flags;switch(C.tag){case 0:case 11:case 15:Ha(T,C,x,q,y),Tc(8,C);break;case 23:break;case 22:var re=C.stateNode;C.memoizedState!==null?re._visibility&2?Ha(T,C,x,q,y):Ac(T,C):(re._visibility|=2,Ha(T,C,x,q,y)),y&&Z&2048&&zp(C.alternate,C);break;case 24:Ha(T,C,x,q,y),y&&Z&2048&&$p(C.alternate,C);break;default:Ha(T,C,x,q,y)}o=o.sibling}}function Ac(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,u=o,y=u.flags;switch(u.tag){case 22:Ac(l,u),y&2048&&zp(u.alternate,u);break;case 24:Ac(l,u),y&2048&&$p(u.alternate,u);break;default:Ac(l,u)}o=o.sibling}}var Sc=8192;function Ga(s){if(s.subtreeFlags&Sc)for(s=s.child;s!==null;)Z_(s),s=s.sibling}function Z_(s){switch(s.tag){case 26:Ga(s),s.flags&Sc&&s.memoizedState!==null&&cR(as,s.memoizedState,s.memoizedProps);break;case 5:Ga(s);break;case 3:case 4:var o=as;as=Od(s.stateNode.containerInfo),Ga(s),as=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=Sc,Sc=16777216,Ga(s),Sc=o):Ga(s));break;default:Ga(s)}}function eT(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function wc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];pn=u,nT(u,s)}eT(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)tT(s),s=s.sibling}function tT(s){switch(s.tag){case 0:case 11:case 15:wc(s),s.flags&2048&&Jr(9,s,s.return);break;case 3:wc(s);break;case 12:wc(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Id(s)):wc(s);break;default:wc(s)}}function Id(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];pn=u,nT(u,s)}eT(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Jr(8,o,o.return),Id(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Id(o));break;default:Id(o)}s=s.sibling}}function nT(s,o){for(;pn!==null;){var l=pn;switch(l.tag){case 0:case 11:case 15:Jr(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:oc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,pn=u;else e:for(l=s;pn!==null;){u=pn;var y=u.sibling,T=u.return;if(K_(u),u===l){pn=null;break e}if(y!==null){y.return=T,pn=y;break e}pn=T}}}var Cx={getCacheForType:function(s){var o=Ln(rn),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l}},Ix=typeof WeakMap=="function"?WeakMap:Map,gt=0,Nt=null,We=null,ot=0,yt=0,Ei=null,Xr=!1,ja=!1,Kp=!1,pr=0,Bt=0,Zr=0,Zo=0,Yp=0,Gi=0,za=0,Cc=null,oi=null,Jp=!1,Wp=0,xd=1/0,Rd=null,eo=null,In=0,to=null,$a=null,Ka=0,Qp=0,Xp=null,iT=null,Ic=0,Zp=null;function Ai(){if((gt&2)!==0&&ot!==0)return ot&-ot;if(ie.T!==null){var s=Ma;return s!==0?s:om()}return ki()}function sT(){Gi===0&&(Gi=(ot&536870912)===0||ht?ts():536870912);var s=Hi.current;return s!==null&&(s.flags|=32),Gi}function Si(s,o,l){(s===Nt&&(yt===2||yt===9)||s.cancelPendingCommit!==null)&&(Ya(s,0),no(s,ot,Gi,!1)),jn(s,l),((gt&2)===0||s!==Nt)&&(s===Nt&&((gt&2)===0&&(Zo|=l),Bt===4&&no(s,ot,Gi,!1)),Ns(s))}function rT(s,o,l){if((gt&6)!==0)throw Error(i(327));var u=!l&&(o&124)===0&&(o&s.expiredLanes)===0||Zi(s,o),y=u?bx(s,o):nm(s,o,!0),T=u;do{if(y===0){ja&&!u&&no(s,o,0,!1);break}else{if(l=s.current.alternate,T&&!xx(l)){y=nm(s,o,!1),T=!1;continue}if(y===2){if(T=o,s.errorRecoveryDisabledLanes&T)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var x=s;y=Cc;var q=x.current.memoizedState.isDehydrated;if(q&&(Ya(x,C).flags|=256),C=nm(x,C,!1),C!==2){if(Kp&&!q){x.errorRecoveryDisabledLanes|=T,Zo|=T,y=4;break e}T=oi,oi=y,T!==null&&(oi===null?oi=T:oi.push.apply(oi,T))}y=C}if(T=!1,y!==2)continue}}if(y===1){Ya(s,0),no(s,o,0,!0);break}e:{switch(u=s,T=y,T){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:no(u,o,Gi,!Xr);break e;case 2:oi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=Wp+300-kn(),10<y)){if(no(u,o,Gi,!Xr),ys(u,0,!0)!==0)break e;u.timeoutHandle=MT(oT.bind(null,u,l,oi,Rd,Jp,o,Gi,Zo,za,Xr,T,2,-0,0),y);break e}oT(u,l,oi,Rd,Jp,o,Gi,Zo,za,Xr,T,0,-0,0)}}break}while(!0);Ns(s)}function oT(s,o,l,u,y,T,C,x,q,Z,re,de,ee,te){if(s.timeoutHandle=-1,de=o.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(kc={stylesheets:null,count:0,unsuspend:lR},Z_(o),de=uR(),de!==null)){s.cancelPendingCommit=de(fT.bind(null,s,o,T,l,u,y,C,x,q,re,1,ee,te)),no(s,T,C,!Z);return}fT(s,o,T,l,u,y,C,x,q)}function xx(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var y=l[u],T=y.getSnapshot;y=y.value;try{if(!yi(T(),y))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function no(s,o,l,u){o&=~Yp,o&=~Zo,s.suspendedLanes|=o,s.pingedLanes&=~o,u&&(s.warmLanes|=o),u=s.expirationTimes;for(var y=o;0<y;){var T=31-Kt(y),C=1<<T;u[T]=-1,y&=~C}l!==0&&zn(s,l,o)}function bd(){return(gt&6)===0?(xc(0),!1):!0}function em(){if(We!==null){if(yt===0)var s=We.return;else s=We,or=Ko=null,yp(s),qa=null,yc=0,s=We;for(;s!==null;)F_(s.alternate,s),s=s.return;We=null}}function Ya(s,o){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,zx(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),em(),Nt=s,We=l=ir(s.current,null),ot=o,yt=0,Ei=null,Xr=!1,ja=Zi(s,o),Kp=!1,za=Gi=Yp=Zo=Zr=Bt=0,oi=Cc=null,Jp=!1,(o&8)!==0&&(o|=o&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=o;0<u;){var y=31-Kt(u),T=1<<y;o|=s[y],u&=~T}return pr=o,Qu(),l}function aT(s,o){$e=null,ie.H=gd,o===lc||o===od?(o=wv(),yt=3):o===Ev?(o=wv(),yt=4):yt=o===C_?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ei=o,We===null&&(Bt=1,Ed(s,Oi(o,s.current)))}function lT(){var s=ie.H;return ie.H=gd,s===null?gd:s}function cT(){var s=ie.A;return ie.A=Cx,s}function tm(){Bt=4,Xr||(ot&4194048)!==ot&&Hi.current!==null||(ja=!0),(Zr&134217727)===0&&(Zo&134217727)===0||Nt===null||no(Nt,ot,Gi,!1)}function nm(s,o,l){var u=gt;gt|=2;var y=lT(),T=cT();(Nt!==s||ot!==o)&&(Rd=null,Ya(s,o)),o=!1;var C=Bt;e:do try{if(yt!==0&&We!==null){var x=We,q=Ei;switch(yt){case 8:em(),C=6;break e;case 3:case 2:case 9:case 6:Hi.current===null&&(o=!0);var Z=yt;if(yt=0,Ei=null,Ja(s,x,q,Z),l&&ja){C=0;break e}break;default:Z=yt,yt=0,Ei=null,Ja(s,x,q,Z)}}Rx(),C=Bt;break}catch(re){aT(s,re)}while(!0);return o&&s.shellSuspendCounter++,or=Ko=null,gt=u,ie.H=y,ie.A=T,We===null&&(Nt=null,ot=0,Qu()),C}function Rx(){for(;We!==null;)uT(We)}function bx(s,o){var l=gt;gt|=2;var u=lT(),y=cT();Nt!==s||ot!==o?(Rd=null,xd=kn()+500,Ya(s,o)):ja=Zi(s,o);e:do try{if(yt!==0&&We!==null){o=We;var T=Ei;t:switch(yt){case 1:yt=0,Ei=null,Ja(s,o,T,1);break;case 2:case 9:if(Av(T)){yt=0,Ei=null,dT(o);break}o=function(){yt!==2&&yt!==9||Nt!==s||(yt=7),Ns(s)},T.then(o,o);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:Av(T)?(yt=0,Ei=null,dT(o)):(yt=0,Ei=null,Ja(s,o,T,7));break;case 5:var C=null;switch(We.tag){case 26:C=We.memoizedState;case 5:case 27:var x=We;if(!C||$T(C)){yt=0,Ei=null;var q=x.sibling;if(q!==null)We=q;else{var Z=x.return;Z!==null?(We=Z,Nd(Z)):We=null}break t}}yt=0,Ei=null,Ja(s,o,T,5);break;case 6:yt=0,Ei=null,Ja(s,o,T,6);break;case 8:em(),Bt=6;break e;default:throw Error(i(462))}}Nx();break}catch(re){aT(s,re)}while(!0);return or=Ko=null,ie.H=u,ie.A=y,gt=l,We!==null?0:(Nt=null,ot=0,Qu(),Bt)}function Nx(){for(;We!==null&&!Qi();)uT(We)}function uT(s){var o=L_(s.alternate,s,pr);s.memoizedProps=s.pendingProps,o===null?Nd(s):We=o}function dT(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=P_(l,o,o.pendingProps,o.type,void 0,ot);break;case 11:o=P_(l,o,o.pendingProps,o.type.render,o.ref,ot);break;case 5:yp(o);default:F_(l,o),o=We=hv(o,pr),o=L_(l,o,pr)}s.memoizedProps=s.pendingProps,o===null?Nd(s):We=o}function Ja(s,o,l,u){or=Ko=null,yp(o),qa=null,yc=0;var y=o.return;try{if(_x(s,y,o,l,ot)){Bt=1,Ed(s,Oi(l,s.current)),We=null;return}}catch(T){if(y!==null)throw We=y,T;Bt=1,Ed(s,Oi(l,s.current)),We=null;return}o.flags&32768?(ht||u===1?s=!0:ja||(ot&536870912)!==0?s=!1:(Xr=s=!0,(u===2||u===9||u===3||u===6)&&(u=Hi.current,u!==null&&u.tag===13&&(u.flags|=16384))),hT(o,s)):Nd(o)}function Nd(s){var o=s;do{if((o.flags&32768)!==0){hT(o,Xr);return}s=o.return;var l=Ex(o.alternate,o,pr);if(l!==null){We=l;return}if(o=o.sibling,o!==null){We=o;return}We=o=s}while(o!==null);Bt===0&&(Bt=5)}function hT(s,o){do{var l=Ax(s.alternate,s);if(l!==null){l.flags&=32767,We=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){We=s;return}We=s=l}while(s!==null);Bt=6,We=null}function fT(s,o,l,u,y,T,C,x,q){s.cancelPendingCommit=null;do Pd();while(In!==0);if((gt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(T=o.lanes|o.childLanes,T|=$f,ns(s,l,T,C,x,q),s===Nt&&(We=Nt=null,ot=0),$a=o,to=s,Ka=l,Qp=T,Xp=y,iT=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Mx(ei,function(){return vT(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=ie.T,ie.T=null,y=pe.p,pe.p=2,C=gt,gt|=4;try{Sx(s,o,l)}finally{gt=C,pe.p=y,ie.T=u}}In=1,pT(),mT(),gT()}}function pT(){if(In===1){In=0;var s=to,o=$a,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=ie.T,ie.T=null;var u=pe.p;pe.p=2;var y=gt;gt|=4;try{W_(o,s);var T=pm,C=nv(s.containerInfo),x=T.focusedElem,q=T.selectionRange;if(C!==x&&x&&x.ownerDocument&&tv(x.ownerDocument.documentElement,x)){if(q!==null&&Bf(x)){var Z=q.start,re=q.end;if(re===void 0&&(re=Z),"selectionStart"in x)x.selectionStart=Z,x.selectionEnd=Math.min(re,x.value.length);else{var de=x.ownerDocument||document,ee=de&&de.defaultView||window;if(ee.getSelection){var te=ee.getSelection(),Le=x.textContent.length,De=Math.min(q.start,Le),At=q.end===void 0?De:Math.min(q.end,Le);!te.extend&&De>At&&(C=At,At=De,De=C);var K=ev(x,De),j=ev(x,At);if(K&&j&&(te.rangeCount!==1||te.anchorNode!==K.node||te.anchorOffset!==K.offset||te.focusNode!==j.node||te.focusOffset!==j.offset)){var W=de.createRange();W.setStart(K.node,K.offset),te.removeAllRanges(),De>At?(te.addRange(W),te.extend(j.node,j.offset)):(W.setEnd(j.node,j.offset),te.addRange(W))}}}}for(de=[],te=x;te=te.parentNode;)te.nodeType===1&&de.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<de.length;x++){var ce=de[x];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Gd=!!fm,pm=fm=null}finally{gt=y,pe.p=u,ie.T=l}}s.current=o,In=2}}function mT(){if(In===2){In=0;var s=to,o=$a,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=ie.T,ie.T=null;var u=pe.p;pe.p=2;var y=gt;gt|=4;try{$_(s,o.alternate,o)}finally{gt=y,pe.p=u,ie.T=l}}In=3}}function gT(){if(In===4||In===3){In=0,js();var s=to,o=$a,l=Ka,u=iT;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?In=5:(In=0,$a=to=null,yT(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(eo=null),vs(l),o=o.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(xt,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=ie.T,y=pe.p,pe.p=2,ie.T=null;try{for(var T=s.onRecoverableError,C=0;C<u.length;C++){var x=u[C];T(x.value,{componentStack:x.stack})}}finally{ie.T=o,pe.p=y}}(Ka&3)!==0&&Pd(),Ns(s),y=s.pendingLanes,(l&4194090)!==0&&(y&42)!==0?s===Zp?Ic++:(Ic=0,Zp=s):Ic=0,xc(0)}}function yT(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,oc(o)))}function Pd(s){return pT(),mT(),gT(),vT()}function vT(){if(In!==5)return!1;var s=to,o=Qp;Qp=0;var l=vs(Ka),u=ie.T,y=pe.p;try{pe.p=32>l?32:l,ie.T=null,l=Xp,Xp=null;var T=to,C=Ka;if(In=0,$a=to=null,Ka=0,(gt&6)!==0)throw Error(i(331));var x=gt;if(gt|=4,tT(T.current),X_(T,T.current,C,l),gt=x,xc(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(xt,T)}catch{}return!0}finally{pe.p=y,ie.T=u,yT(s,o)}}function _T(s,o,l){o=Oi(l,o),o=Pp(s.stateNode,o,2),s=zr(s,o,2),s!==null&&(jn(s,2),Ns(s))}function It(s,o,l){if(s.tag===3)_T(s,s,l);else for(;o!==null;){if(o.tag===3){_T(o,s,l);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(eo===null||!eo.has(u))){s=Oi(l,s),l=S_(2),u=zr(o,l,2),u!==null&&(w_(l,u,o,s),jn(u,2),Ns(u));break}}o=o.return}}function im(s,o,l){var u=s.pingCache;if(u===null){u=s.pingCache=new Ix;var y=new Set;u.set(o,y)}else y=u.get(o),y===void 0&&(y=new Set,u.set(o,y));y.has(l)||(Kp=!0,y.add(l),s=Px.bind(null,s,o,l),o.then(s,s))}function Px(s,o,l){var u=s.pingCache;u!==null&&u.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,Nt===s&&(ot&l)===l&&(Bt===4||Bt===3&&(ot&62914560)===ot&&300>kn()-Wp?(gt&2)===0&&Ya(s,0):Yp|=l,za===ot&&(za=0)),Ns(s)}function TT(s,o){o===0&&(o=Ni()),s=Na(s,o),s!==null&&(jn(s,o),Ns(s))}function Dx(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),TT(s,l)}function kx(s,o){var l=0;switch(s.tag){case 13:var u=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(o),TT(s,l)}function Mx(s,o){return hi(s,o)}var Dd=null,Wa=null,sm=!1,kd=!1,rm=!1,ea=0;function Ns(s){s!==Wa&&s.next===null&&(Wa===null?Dd=Wa=s:Wa=Wa.next=s),kd=!0,sm||(sm=!0,Vx())}function xc(s,o){if(!rm&&kd){rm=!0;do for(var l=!1,u=Dd;u!==null;){if(s!==0){var y=u.pendingLanes;if(y===0)var T=0;else{var C=u.suspendedLanes,x=u.pingedLanes;T=(1<<31-Kt(42|s)+1)-1,T&=y&~(C&~x),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(l=!0,wT(u,T))}else T=ot,T=ys(u,u===Nt?T:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(T&3)===0||Zi(u,T)||(l=!0,wT(u,T));u=u.next}while(l);rm=!1}}function Ux(){ET()}function ET(){kd=sm=!1;var s=0;ea!==0&&(jx()&&(s=ea),ea=0);for(var o=kn(),l=null,u=Dd;u!==null;){var y=u.next,T=AT(u,o);T===0?(u.next=null,l===null?Dd=y:l.next=y,y===null&&(Wa=l)):(l=u,(s!==0||(T&3)!==0)&&(kd=!0)),u=y}xc(s)}function AT(s,o){for(var l=s.suspendedLanes,u=s.pingedLanes,y=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var C=31-Kt(T),x=1<<C,q=y[C];q===-1?((x&l)===0||(x&u)!==0)&&(y[C]=es(x,o)):q<=o&&(s.expiredLanes|=x),T&=~x}if(o=Nt,l=ot,l=ys(s,s===o?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===o&&(yt===2||yt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Zn(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Zi(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(u!==null&&Zn(u),vs(l)){case 2:case 8:l=fi;break;case 32:l=ei;break;case 268435456:l=xi;break;default:l=ei}return u=ST.bind(null,s),l=hi(l,u),s.callbackPriority=o,s.callbackNode=l,o}return u!==null&&u!==null&&Zn(u),s.callbackPriority=2,s.callbackNode=null,2}function ST(s,o){if(In!==0&&In!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Pd()&&s.callbackNode!==l)return null;var u=ot;return u=ys(s,s===Nt?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(rT(s,u,o),AT(s,kn()),s.callbackNode!=null&&s.callbackNode===l?ST.bind(null,s):null)}function wT(s,o){if(Pd())return null;rT(s,o,!0)}function Vx(){$x(function(){(gt&6)!==0?hi(tn,Ux):ET()})}function om(){return ea===0&&(ea=ts()),ea}function CT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:va(""+s)}function IT(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function Lx(s,o,l,u,y){if(o==="submit"&&l&&l.stateNode===y){var T=CT((y[Be]||null).action),C=u.submitter;C&&(o=(o=C[Be]||null)?CT(o.formAction):C.getAttribute("formAction"),o!==null&&(T=o,C=null));var x=new _a("action","action",null,u,y);s.push({event:x,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ea!==0){var q=C?IT(y,C):new FormData(y);Ip(l,{pending:!0,data:q,method:y.method,action:T},null,q)}}else typeof T=="function"&&(x.preventDefault(),q=C?IT(y,C):new FormData(y),Ip(l,{pending:!0,data:q,method:y.method,action:T},T,q))},currentTarget:y}]})}}for(var am=0;am<zf.length;am++){var lm=zf[am],Ox=lm.toLowerCase(),Fx=lm[0].toUpperCase()+lm.slice(1);os(Ox,"on"+Fx)}os(rv,"onAnimationEnd"),os(ov,"onAnimationIteration"),os(av,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(nx,"onTransitionRun"),os(ix,"onTransitionStart"),os(sx,"onTransitionCancel"),os(lv,"onTransitionEnd"),is("onMouseEnter",["mouseout","mouseover"]),is("onMouseLeave",["mouseout","mouseover"]),is("onPointerEnter",["pointerout","pointerover"]),is("onPointerLeave",["pointerout","pointerover"]),pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rc));function xT(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],y=u.event;u=u.listeners;e:{var T=void 0;if(o)for(var C=u.length-1;0<=C;C--){var x=u[C],q=x.instance,Z=x.currentTarget;if(x=x.listener,q!==T&&y.isPropagationStopped())break e;T=x,y.currentTarget=Z;try{T(y)}catch(re){Td(re)}y.currentTarget=null,T=q}else for(C=0;C<u.length;C++){if(x=u[C],q=x.instance,Z=x.currentTarget,x=x.listener,q!==T&&y.isPropagationStopped())break e;T=x,y.currentTarget=Z;try{T(y)}catch(re){Td(re)}y.currentTarget=null,T=q}}}}function Qe(s,o){var l=o[Ct];l===void 0&&(l=o[Ct]=new Set);var u=s+"__bubble";l.has(u)||(RT(o,s,2,!1),l.add(u))}function cm(s,o,l){var u=0;o&&(u|=4),RT(l,s,u,o)}var Md="_reactListening"+Math.random().toString(36).slice(2);function um(s){if(!s[Md]){s[Md]=!0,Vr.forEach(function(l){l!=="selectionchange"&&(qx.has(l)||cm(l,!1,s),cm(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Md]||(o[Md]=!0,cm("selectionchange",!1,o))}}function RT(s,o,l,u){switch(XT(o)){case 2:var y=fR;break;case 8:y=pR;break;default:y=wm}l=y.bind(null,o,l,s),y=void 0,!Vi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),u?y!==void 0?s.addEventListener(o,l,{capture:!0,passive:y}):s.addEventListener(o,l,!0):y!==void 0?s.addEventListener(o,l,{passive:y}):s.addEventListener(o,l,!1)}function dm(s,o,l,u,y){var T=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var x=u.stateNode.containerInfo;if(x===y)break;if(C===4)for(C=u.return;C!==null;){var q=C.tag;if((q===3||q===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;x!==null;){if(C=Un(x),C===null)return;if(q=C.tag,q===5||q===6||q===26||q===27){u=T=C;continue e}x=x.parentNode}}u=u.return}Vu(function(){var Z=T,re=Ui(l),de=[];e:{var ee=cv.get(s);if(ee!==void 0){var te=_a,Le=s;switch(s){case"keypress":if(Es(l)===0)break e;case"keydown":case"keyup":te=Ca;break;case"focusin":Le="focus",te=Aa;break;case"focusout":Le="blur",te=Aa;break;case"beforeblur":case"afterblur":te=Aa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Li;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Lf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=ju;break;case rv:case ov:case av:te=Sa;break;case lv:te=$u;break;case"scroll":case"scrollend":te=Lu;break;case"wheel":te=Ia;break;case"copy":case"cut":case"paste":te=wa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Xl;break;case"toggle":case"beforetoggle":te=Yu}var De=(o&4)!==0,At=!De&&(s==="scroll"||s==="scrollend"),K=De?ee!==null?ee+"Capture":null:ee;De=[];for(var j=Z,W;j!==null;){var ce=j;if(W=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||W===null||K===null||(ce=ko(j,K),ce!=null&&De.push(bc(j,ce,W))),At)break;j=j.return}0<De.length&&(ee=new te(ee,Le,null,l,re),de.push({event:ee,listeners:De}))}}if((o&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",te=s==="mouseout"||s==="pointerout",ee&&l!==Qs&&(Le=l.relatedTarget||l.fromElement)&&(Un(Le)||Le[Fe]))break e;if((te||ee)&&(ee=re.window===re?re:(ee=re.ownerDocument)?ee.defaultView||ee.parentWindow:window,te?(Le=l.relatedTarget||l.toElement,te=Z,Le=Le?Un(Le):null,Le!==null&&(At=a(Le),De=Le.tag,Le!==At||De!==5&&De!==27&&De!==6)&&(Le=null)):(te=null,Le=Z),te!==Le)){if(De=Li,ce="onMouseLeave",K="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(De=Xl,ce="onPointerLeave",K="onPointerEnter",j="pointer"),At=te==null?ee:Sn(te),W=Le==null?ee:Sn(Le),ee=new De(ce,j+"leave",te,l,re),ee.target=At,ee.relatedTarget=W,ce=null,Un(re)===Z&&(De=new De(K,j+"enter",Le,l,re),De.target=W,De.relatedTarget=At,ce=De),At=ce,te&&Le)t:{for(De=te,K=Le,j=0,W=De;W;W=Qa(W))j++;for(W=0,ce=K;ce;ce=Qa(ce))W++;for(;0<j-W;)De=Qa(De),j--;for(;0<W-j;)K=Qa(K),W--;for(;j--;){if(De===K||K!==null&&De===K.alternate)break t;De=Qa(De),K=Qa(K)}De=null}else De=null;te!==null&&bT(de,ee,te,De,!1),Le!==null&&At!==null&&bT(de,At,Le,De,!0)}}e:{if(ee=Z?Sn(Z):window,te=ee.nodeName&&ee.nodeName.toLowerCase(),te==="select"||te==="input"&&ee.type==="file")var Ae=Yy;else if(sn(ee))if(Jy)Ae=ZI;else{Ae=QI;var Ye=WI}else te=ee.nodeName,!te||te.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Z&&zl(Z.elementType)&&(Ae=Yy):Ae=XI;if(Ae&&(Ae=Ae(s,Z))){nr(de,Ae,l,re);break e}Ye&&Ye(s,ee,Z),s==="focusout"&&Z&&ee.type==="number"&&Z.memoizedProps.value!=null&&fe(ee,"number",ee.value)}switch(Ye=Z?Sn(Z):window,s){case"focusin":(sn(Ye)||Ye.contentEditable==="true")&&(xa=Ye,Hf=Z,tc=null);break;case"focusout":tc=Hf=xa=null;break;case"mousedown":Gf=!0;break;case"contextmenu":case"mouseup":case"dragend":Gf=!1,iv(de,l,re);break;case"selectionchange":if(tx)break;case"keydown":case"keyup":iv(de,l,re)}var Pe;if(ws)e:{switch(s){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else st?se(s,l)&&(Me="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&(w&&l.locale!=="ko"&&(st||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&st&&(Pe=Kl()):(Ts=re,Br="value"in Ts?Ts.value:Ts.textContent,st=!0)),Ye=Ud(Z,Me),0<Ye.length&&(Me=new Wl(Me,s,null,l,re),de.push({event:Me,listeners:Ye}),Pe?Me.data=Pe:(Pe=me(l),Pe!==null&&(Me.data=Pe)))),(Pe=S?nn(s,l):rt(s,l))&&(Me=Ud(Z,"onBeforeInput"),0<Me.length&&(Ye=new Wl("onBeforeInput","beforeinput",null,l,re),de.push({event:Ye,listeners:Me}),Ye.data=Pe)),Lx(de,s,Z,l,re)}xT(de,o)})}function bc(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Ud(s,o){for(var l=o+"Capture",u=[];s!==null;){var y=s,T=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||T===null||(y=ko(s,l),y!=null&&u.unshift(bc(s,y,T)),y=ko(s,o),y!=null&&u.push(bc(s,y,T))),s.tag===3)return u;s=s.return}return[]}function Qa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function bT(s,o,l,u,y){for(var T=o._reactName,C=[];l!==null&&l!==u;){var x=l,q=x.alternate,Z=x.stateNode;if(x=x.tag,q!==null&&q===u)break;x!==5&&x!==26&&x!==27||Z===null||(q=Z,y?(Z=ko(l,T),Z!=null&&C.unshift(bc(l,Z,q))):y||(Z=ko(l,T),Z!=null&&C.push(bc(l,Z,q)))),l=l.return}C.length!==0&&s.push({event:o,listeners:C})}var Bx=/\r\n?/g,Hx=/\u0000|\uFFFD/g;function NT(s){return(typeof s=="string"?s:""+s).replace(Bx,`
`).replace(Hx,"")}function PT(s,o){return o=NT(o),NT(s)===o}function Vd(){}function Et(s,o,l,u,y,T){switch(l){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Ze(s,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Ze(s,""+u);break;case"className":ss(s,"class",u);break;case"tabIndex":ss(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(s,l,u);break;case"style":Do(s,u,T);break;case"data":if(o!=="object"){ss(s,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=va(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(l==="formAction"?(o!=="input"&&Et(s,o,"name",y.name,y,null),Et(s,o,"formEncType",y.formEncType,y,null),Et(s,o,"formMethod",y.formMethod,y,null),Et(s,o,"formTarget",y.formTarget,y,null)):(Et(s,o,"encType",y.encType,y,null),Et(s,o,"method",y.method,y,null),Et(s,o,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=va(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=Vd);break;case"onScroll":u!=null&&Qe("scroll",s);break;case"onScrollEnd":u!=null&&Qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=va(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Qe("beforetoggle",s),Qe("toggle",s),mi(s,"popover",u);break;case"xlinkActuate":Ft(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ft(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ft(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ft(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ft(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ft(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ft(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ft(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ft(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":mi(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Uf.get(l)||l,mi(s,l,u))}}function hm(s,o,l,u,y,T){switch(l){case"style":Do(s,u,T);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Ze(s,u):(typeof u=="number"||typeof u=="bigint")&&Ze(s,""+u);break;case"onScroll":u!=null&&Qe("scroll",s);break;case"onScrollEnd":u!=null&&Qe("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Vd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lr.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),o=l.slice(2,y?l.length-7:void 0),T=s[Be]||null,T=T!=null?T[l]:null,typeof T=="function"&&s.removeEventListener(o,T,y),typeof u=="function")){typeof T!="function"&&T!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,u,y);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):mi(s,l,u)}}}function xn(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",s),Qe("load",s);var u=!1,y=!1,T;for(T in l)if(l.hasOwnProperty(T)){var C=l[T];if(C!=null)switch(T){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Et(s,o,T,C,l,null)}}y&&Et(s,o,"srcSet",l.srcSet,l,null),u&&Et(s,o,"src",l.src,l,null);return;case"input":Qe("invalid",s);var x=T=C=y=null,q=null,Z=null;for(u in l)if(l.hasOwnProperty(u)){var re=l[u];if(re!=null)switch(u){case"name":y=re;break;case"type":C=re;break;case"checked":q=re;break;case"defaultChecked":Z=re;break;case"value":T=re;break;case"defaultValue":x=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,o));break;default:Et(s,o,u,re,l,null)}}Q(s,T,x,q,Z,C,y,!1),Js(s);return;case"select":Qe("invalid",s),u=C=T=null;for(y in l)if(l.hasOwnProperty(y)&&(x=l[y],x!=null))switch(y){case"value":T=x;break;case"defaultValue":C=x;break;case"multiple":u=x;default:Et(s,o,y,x,l,null)}o=T,l=C,s.multiple=!!u,o!=null?Ie(s,!!u,o,!1):l!=null&&Ie(s,!!u,l,!0);return;case"textarea":Qe("invalid",s),T=y=u=null;for(C in l)if(l.hasOwnProperty(C)&&(x=l[C],x!=null))switch(C){case"value":u=x;break;case"defaultValue":y=x;break;case"children":T=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:Et(s,o,C,x,l,null)}Re(s,u,y,T),Js(s);return;case"option":for(q in l)if(l.hasOwnProperty(q)&&(u=l[q],u!=null))switch(q){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Et(s,o,q,u,l,null)}return;case"dialog":Qe("beforetoggle",s),Qe("toggle",s),Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":Qe("load",s);break;case"video":case"audio":for(u=0;u<Rc.length;u++)Qe(Rc[u],s);break;case"image":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"embed":case"source":case"link":Qe("error",s),Qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in l)if(l.hasOwnProperty(Z)&&(u=l[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Et(s,o,Z,u,l,null)}return;default:if(zl(o)){for(re in l)l.hasOwnProperty(re)&&(u=l[re],u!==void 0&&hm(s,o,re,u,l,void 0));return}}for(x in l)l.hasOwnProperty(x)&&(u=l[x],u!=null&&Et(s,o,x,u,l,null))}function Gx(s,o,l,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,T=null,C=null,x=null,q=null,Z=null,re=null;for(te in l){var de=l[te];if(l.hasOwnProperty(te)&&de!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":q=de;default:u.hasOwnProperty(te)||Et(s,o,te,null,u,de)}}for(var ee in u){var te=u[ee];if(de=l[ee],u.hasOwnProperty(ee)&&(te!=null||de!=null))switch(ee){case"type":T=te;break;case"name":y=te;break;case"checked":Z=te;break;case"defaultChecked":re=te;break;case"value":C=te;break;case"defaultValue":x=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:te!==de&&Et(s,o,ee,te,u,de)}}I(s,C,x,q,Z,re,T,y);return;case"select":te=C=x=ee=null;for(T in l)if(q=l[T],l.hasOwnProperty(T)&&q!=null)switch(T){case"value":break;case"multiple":te=q;default:u.hasOwnProperty(T)||Et(s,o,T,null,u,q)}for(y in u)if(T=u[y],q=l[y],u.hasOwnProperty(y)&&(T!=null||q!=null))switch(y){case"value":ee=T;break;case"defaultValue":x=T;break;case"multiple":C=T;default:T!==q&&Et(s,o,y,T,u,q)}o=x,l=C,u=te,ee!=null?Ie(s,!!l,ee,!1):!!u!=!!l&&(o!=null?Ie(s,!!l,o,!0):Ie(s,!!l,l?[]:"",!1));return;case"textarea":te=ee=null;for(x in l)if(y=l[x],l.hasOwnProperty(x)&&y!=null&&!u.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Et(s,o,x,null,u,y)}for(C in u)if(y=u[C],T=l[C],u.hasOwnProperty(C)&&(y!=null||T!=null))switch(C){case"value":ee=y;break;case"defaultValue":te=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==T&&Et(s,o,C,y,u,T)}Ee(s,ee,te);return;case"option":for(var Le in l)if(ee=l[Le],l.hasOwnProperty(Le)&&ee!=null&&!u.hasOwnProperty(Le))switch(Le){case"selected":s.selected=!1;break;default:Et(s,o,Le,null,u,ee)}for(q in u)if(ee=u[q],te=l[q],u.hasOwnProperty(q)&&ee!==te&&(ee!=null||te!=null))switch(q){case"selected":s.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Et(s,o,q,ee,u,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in l)ee=l[De],l.hasOwnProperty(De)&&ee!=null&&!u.hasOwnProperty(De)&&Et(s,o,De,null,u,ee);for(Z in u)if(ee=u[Z],te=l[Z],u.hasOwnProperty(Z)&&ee!==te&&(ee!=null||te!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:Et(s,o,Z,ee,u,te)}return;default:if(zl(o)){for(var At in l)ee=l[At],l.hasOwnProperty(At)&&ee!==void 0&&!u.hasOwnProperty(At)&&hm(s,o,At,void 0,u,ee);for(re in u)ee=u[re],te=l[re],!u.hasOwnProperty(re)||ee===te||ee===void 0&&te===void 0||hm(s,o,re,ee,u,te);return}}for(var K in l)ee=l[K],l.hasOwnProperty(K)&&ee!=null&&!u.hasOwnProperty(K)&&Et(s,o,K,null,u,ee);for(de in u)ee=u[de],te=l[de],!u.hasOwnProperty(de)||ee===te||ee==null&&te==null||Et(s,o,de,ee,u,te)}var fm=null,pm=null;function Ld(s){return s.nodeType===9?s:s.ownerDocument}function DT(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kT(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function mm(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var gm=null;function jx(){var s=window.event;return s&&s.type==="popstate"?s===gm?!1:(gm=s,!0):(gm=null,!1)}var MT=typeof setTimeout=="function"?setTimeout:void 0,zx=typeof clearTimeout=="function"?clearTimeout:void 0,UT=typeof Promise=="function"?Promise:void 0,$x=typeof queueMicrotask=="function"?queueMicrotask:typeof UT<"u"?function(s){return UT.resolve(null).then(s).catch(Kx)}:MT;function Kx(s){setTimeout(function(){throw s})}function io(s){return s==="head"}function VT(s,o){var l=o,u=0,y=0;do{var T=l.nextSibling;if(s.removeChild(l),T&&T.nodeType===8)if(l=T.data,l==="/$"){if(0<u&&8>u){l=u;var C=s.ownerDocument;if(l&1&&Nc(C.documentElement),l&2&&Nc(C.body),l&4)for(l=C.head,Nc(l),C=l.firstChild;C;){var x=C.nextSibling,q=C.nodeName;C[ct]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=x}}if(y===0){s.removeChild(T),Oc(o);return}y--}else l==="$"||l==="$?"||l==="$!"?y++:u=l.charCodeAt(0)-48;else u=0;l=T}while(l);Oc(o)}function ym(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ym(l),ni(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function Yx(s,o,l,u){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[ct])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var T=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=ls(s.nextSibling),s===null)break}return null}function Jx(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ls(s.nextSibling),s===null))return null;return s}function vm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Wx(s,o){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")o();else{var u=function(){o(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function ls(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var _m=null;function LT(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}function OT(s,o,l){switch(o=Ld(l),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Nc(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);ni(s)}var ji=new Map,FT=new Set;function Od(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var mr=pe.d;pe.d={f:Qx,r:Xx,D:Zx,C:eR,L:tR,m:nR,X:sR,S:iR,M:rR};function Qx(){var s=mr.f(),o=bd();return s||o}function Xx(s){var o=$n(s);o!==null&&o.tag===5&&o.type==="form"?r_(o):mr.r(s)}var Xa=typeof document>"u"?null:document;function qT(s,o,l){var u=Xa;if(u&&typeof o=="string"&&o){var y=bt(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),FT.has(y)||(FT.add(y),s={rel:s,crossOrigin:l,href:o},u.querySelector(y)===null&&(o=u.createElement("link"),xn(o,"link",s),_t(o),u.head.appendChild(o)))}}function Zx(s){mr.D(s),qT("dns-prefetch",s,null)}function eR(s,o){mr.C(s,o),qT("preconnect",s,o)}function tR(s,o,l){mr.L(s,o,l);var u=Xa;if(u&&s&&o){var y='link[rel="preload"][as="'+bt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+bt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+bt(l.imageSizes)+'"]')):y+='[href="'+bt(s)+'"]';var T=y;switch(o){case"style":T=Za(s);break;case"script":T=el(s)}ji.has(T)||(s=_({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),ji.set(T,s),u.querySelector(y)!==null||o==="style"&&u.querySelector(Pc(T))||o==="script"&&u.querySelector(Dc(T))||(o=u.createElement("link"),xn(o,"link",s),_t(o),u.head.appendChild(o)))}}function nR(s,o){mr.m(s,o);var l=Xa;if(l&&s){var u=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+bt(u)+'"][href="'+bt(s)+'"]',T=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=el(s)}if(!ji.has(T)&&(s=_({rel:"modulepreload",href:s},o),ji.set(T,s),l.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Dc(T)))return}u=l.createElement("link"),xn(u,"link",s),_t(u),l.head.appendChild(u)}}}function iR(s,o,l){mr.S(s,o,l);var u=Xa;if(u&&s){var y=Ot(u).hoistableStyles,T=Za(s);o=o||"default";var C=y.get(T);if(!C){var x={loading:0,preload:null};if(C=u.querySelector(Pc(T)))x.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":o},l),(l=ji.get(T))&&Tm(s,l);var q=C=u.createElement("link");_t(q),xn(q,"link",s),q._p=new Promise(function(Z,re){q.onload=Z,q.onerror=re}),q.addEventListener("load",function(){x.loading|=1}),q.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Fd(C,o,u)}C={type:"stylesheet",instance:C,count:1,state:x},y.set(T,C)}}}function sR(s,o){mr.X(s,o);var l=Xa;if(l&&s){var u=Ot(l).hoistableScripts,y=el(s),T=u.get(y);T||(T=l.querySelector(Dc(y)),T||(s=_({src:s,async:!0},o),(o=ji.get(y))&&Em(s,o),T=l.createElement("script"),_t(T),xn(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},u.set(y,T))}}function rR(s,o){mr.M(s,o);var l=Xa;if(l&&s){var u=Ot(l).hoistableScripts,y=el(s),T=u.get(y);T||(T=l.querySelector(Dc(y)),T||(s=_({src:s,async:!0,type:"module"},o),(o=ji.get(y))&&Em(s,o),T=l.createElement("script"),_t(T),xn(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},u.set(y,T))}}function BT(s,o,l,u){var y=(y=xe.current)?Od(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Za(l.href),l=Ot(y).hoistableStyles,u=l.get(o),u||(u={type:"style",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Za(l.href);var T=Ot(y).hoistableStyles,C=T.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,C),(T=y.querySelector(Pc(s)))&&!T._p&&(C.instance=T,C.state.loading=5),ji.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ji.set(s,l),T||oR(y,s,l,C.state))),o&&u===null)throw Error(i(528,""));return C}if(o&&u!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=el(l),l=Ot(y).hoistableScripts,u=l.get(o),u||(u={type:"script",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Za(s){return'href="'+bt(s)+'"'}function Pc(s){return'link[rel="stylesheet"]['+s+"]"}function HT(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function oR(s,o,l,u){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=s.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),xn(o,"link",l),_t(o),s.head.appendChild(o))}function el(s){return'[src="'+bt(s)+'"]'}function Dc(s){return"script[async]"+s}function GT(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var u=s.querySelector('style[data-href~="'+bt(l.href)+'"]');if(u)return o.instance=u,_t(u),u;var y=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),_t(u),xn(u,"style",y),Fd(u,l.precedence,s),o.instance=u;case"stylesheet":y=Za(l.href);var T=s.querySelector(Pc(y));if(T)return o.state.loading|=4,o.instance=T,_t(T),T;u=HT(l),(y=ji.get(y))&&Tm(u,y),T=(s.ownerDocument||s).createElement("link"),_t(T);var C=T;return C._p=new Promise(function(x,q){C.onload=x,C.onerror=q}),xn(T,"link",u),o.state.loading|=4,Fd(T,l.precedence,s),o.instance=T;case"script":return T=el(l.src),(y=s.querySelector(Dc(T)))?(o.instance=y,_t(y),y):(u=l,(y=ji.get(T))&&(u=_({},l),Em(u,y)),s=s.ownerDocument||s,y=s.createElement("script"),_t(y),xn(y,"link",u),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,Fd(u,l.precedence,s));return o.instance}function Fd(s,o,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,T=y,C=0;C<u.length;C++){var x=u[C];if(x.dataset.precedence===o)T=x;else if(T!==y)break}T?T.parentNode.insertBefore(s,T.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function Tm(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Em(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var qd=null;function jT(s,o,l){if(qd===null){var u=new Map,y=qd=new Map;y.set(l,u)}else y=qd,u=y.get(l),u||(u=new Map,y.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var T=l[y];if(!(T[ct]||T[Dt]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var C=T.getAttribute(o)||"";C=s+C;var x=u.get(C);x?x.push(T):u.set(C,[T])}}return u}function zT(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function aR(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function $T(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var kc=null;function lR(){}function cR(s,o,l){if(kc===null)throw Error(i(475));var u=kc;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=Za(l.href),T=s.querySelector(Pc(y));if(T){s=T._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Bd.bind(u),s.then(u,u)),o.state.loading|=4,o.instance=T,_t(T);return}T=s.ownerDocument||s,l=HT(l),(y=ji.get(y))&&Tm(l,y),T=T.createElement("link"),_t(T);var C=T;C._p=new Promise(function(x,q){C.onload=x,C.onerror=q}),xn(T,"link",l),o.instance=T}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(u.count++,o=Bd.bind(u),s.addEventListener("load",o),s.addEventListener("error",o))}}function uR(){if(kc===null)throw Error(i(475));var s=kc;return s.stylesheets&&s.count===0&&Am(s,s.stylesheets),0<s.count?function(o){var l=setTimeout(function(){if(s.stylesheets&&Am(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Bd(){if(this.count--,this.count===0){if(this.stylesheets)Am(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Hd=null;function Am(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Hd=new Map,o.forEach(dR,s),Hd=null,Bd.call(s))}function dR(s,o){if(!(o.state.loading&4)){var l=Hd.get(s);if(l)var u=l.get(null);else{l=new Map,Hd.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<y.length;T++){var C=y[T];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),u=C)}u&&l.set(null,u)}y=o.instance,C=y.getAttribute("data-precedence"),T=l.get(C)||u,T===u&&l.set(null,y),l.set(C,y),this.count++,u=Bd.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),T?T.parentNode.insertBefore(y,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var Mc={$$typeof:z,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function hR(s,o,l,u,y,T,C,x){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.hiddenUpdates=ti(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=T,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function KT(s,o,l,u,y,T,C,x,q,Z,re,de){return s=new hR(s,o,l,C,x,q,Z,de),o=1,T===!0&&(o|=24),T=vi(3,null,null,o),s.current=T,T.stateNode=s,o=ip(),o.refCount++,s.pooledCache=o,o.refCount++,T.memoizedState={element:u,isDehydrated:l,cache:o},ap(T),s}function YT(s){return s?(s=Pa,s):Pa}function JT(s,o,l,u,y,T){y=YT(y),u.context===null?u.context=y:u.pendingContext=y,u=jr(o),u.payload={element:l},T=T===void 0?null:T,T!==null&&(u.callback=T),l=zr(s,u,o),l!==null&&(Si(l,s,o),uc(l,s,o))}function WT(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function Sm(s,o){WT(s,o),(s=s.alternate)&&WT(s,o)}function QT(s){if(s.tag===13){var o=Na(s,67108864);o!==null&&Si(o,s,67108864),Sm(s,67108864)}}var Gd=!0;function fR(s,o,l,u){var y=ie.T;ie.T=null;var T=pe.p;try{pe.p=2,wm(s,o,l,u)}finally{pe.p=T,ie.T=y}}function pR(s,o,l,u){var y=ie.T;ie.T=null;var T=pe.p;try{pe.p=8,wm(s,o,l,u)}finally{pe.p=T,ie.T=y}}function wm(s,o,l,u){if(Gd){var y=Cm(u);if(y===null)dm(s,o,u,jd,l),ZT(s,u);else if(gR(y,s,o,l,u))u.stopPropagation();else if(ZT(s,u),o&4&&-1<mR.indexOf(s)){for(;y!==null;){var T=$n(y);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var C=Lt(T.pendingLanes);if(C!==0){var x=T;for(x.pendingLanes|=2,x.entangledLanes|=2;C;){var q=1<<31-Kt(C);x.entanglements[1]|=q,C&=~q}Ns(T),(gt&6)===0&&(xd=kn()+500,xc(0))}}break;case 13:x=Na(T,2),x!==null&&Si(x,T,2),bd(),Sm(T,2)}if(T=Cm(u),T===null&&dm(s,o,u,jd,l),T===y)break;y=T}y!==null&&u.stopPropagation()}else dm(s,o,u,null,l)}}function Cm(s){return s=Ui(s),Im(s)}var jd=null;function Im(s){if(jd=null,s=Un(s),s!==null){var o=a(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=c(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return jd=s,null}function XT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case tn:return 2;case fi:return 8;case ei:case kr:return 32;case xi:return 268435456;default:return 32}default:return 32}}var xm=!1,so=null,ro=null,oo=null,Uc=new Map,Vc=new Map,ao=[],mR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ZT(s,o){switch(s){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":oo=null;break;case"pointerover":case"pointerout":Uc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(o.pointerId)}}function Lc(s,o,l,u,y,T){return s===null||s.nativeEvent!==T?(s={blockedOn:o,domEventName:l,eventSystemFlags:u,nativeEvent:T,targetContainers:[y]},o!==null&&(o=$n(o),o!==null&&QT(o)),s):(s.eventSystemFlags|=u,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function gR(s,o,l,u,y){switch(o){case"focusin":return so=Lc(so,s,o,l,u,y),!0;case"dragenter":return ro=Lc(ro,s,o,l,u,y),!0;case"mouseover":return oo=Lc(oo,s,o,l,u,y),!0;case"pointerover":var T=y.pointerId;return Uc.set(T,Lc(Uc.get(T)||null,s,o,l,u,y)),!0;case"gotpointercapture":return T=y.pointerId,Vc.set(T,Lc(Vc.get(T)||null,s,o,l,u,y)),!0}return!1}function eE(s){var o=Un(s.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){s.blockedOn=o,Ur(s.priority,function(){if(l.tag===13){var u=Ai();u=Di(u);var y=Na(l,u);y!==null&&Si(y,l,u),Sm(l,u)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function zd(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=Cm(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Qs=u,l.target.dispatchEvent(u),Qs=null}else return o=$n(l),o!==null&&QT(o),s.blockedOn=l,!1;o.shift()}return!0}function tE(s,o,l){zd(s)&&l.delete(o)}function yR(){xm=!1,so!==null&&zd(so)&&(so=null),ro!==null&&zd(ro)&&(ro=null),oo!==null&&zd(oo)&&(oo=null),Uc.forEach(tE),Vc.forEach(tE)}function $d(s,o){s.blockedOn===o&&(s.blockedOn=null,xm||(xm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,yR)))}var Kd=null;function nE(s){Kd!==s&&(Kd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Kd===s&&(Kd=null);for(var o=0;o<s.length;o+=3){var l=s[o],u=s[o+1],y=s[o+2];if(typeof u!="function"){if(Im(u||l)===null)continue;break}var T=$n(l);T!==null&&(s.splice(o,3),o-=3,Ip(T,{pending:!0,data:y,method:l.method,action:u},u,y))}}))}function Oc(s){function o(q){return $d(q,s)}so!==null&&$d(so,s),ro!==null&&$d(ro,s),oo!==null&&$d(oo,s),Uc.forEach(o),Vc.forEach(o);for(var l=0;l<ao.length;l++){var u=ao[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<ao.length&&(l=ao[0],l.blockedOn===null);)eE(l),l.blockedOn===null&&ao.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var y=l[u],T=l[u+1],C=y[Be]||null;if(typeof T=="function")C||nE(l);else if(C){var x=null;if(T&&T.hasAttribute("formAction")){if(y=T,C=T[Be]||null)x=C.formAction;else if(Im(y)!==null)continue}else x=C.action;typeof x=="function"?l[u+1]=x:(l.splice(u,3),u-=3),nE(l)}}}function Rm(s){this._internalRoot=s}Yd.prototype.render=Rm.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,u=Ai();JT(l,u,s,o,null,null)},Yd.prototype.unmount=Rm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;JT(s.current,2,null,s,null,null),bd(),o[Fe]=null}};function Yd(s){this._internalRoot=s}Yd.prototype.unstable_scheduleHydration=function(s){if(s){var o=ki();s={blockedOn:null,target:s,priority:o};for(var l=0;l<ao.length&&o!==0&&o<ao[l].priority;l++);ao.splice(l,0,s),l===0&&eE(s)}};var iE=e.version;if(iE!=="19.1.1")throw Error(i(527,iE,"19.1.1"));pe.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(o),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var vR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{xt=Jd.inject(vR),Xe=Jd}catch{}}return qc.createRoot=function(s,o){if(!r(s))throw Error(i(299));var l=!1,u="",y=__,T=T_,C=E_,x=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(x=o.unstable_transitionCallbacks)),o=KT(s,1,!1,null,null,l,u,y,T,C,x,null),s[Fe]=o.current,um(s),new Rm(o)},qc.hydrateRoot=function(s,o,l){if(!r(s))throw Error(i(299));var u=!1,y="",T=__,C=T_,x=E_,q=null,Z=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(q=l.unstable_transitionCallbacks),l.formState!==void 0&&(Z=l.formState)),o=KT(s,1,!0,o,l??null,u,y,T,C,x,q,Z),o.context=YT(null),l=o.current,u=Ai(),u=Di(u),y=jr(u),y.callback=null,zr(l,y,u),l=u,o.current.lanes=l,jn(o,l),Ns(o),s[Fe]=o.current,um(s),new Yd(o)},qc.version="19.1.1",qc}var fE;function bR(){if(fE)return Pm.exports;fE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pm.exports=RR(),Pm.exports}var pE=bR();const NR="modulepreload",PR=function(n){return"/"+n},mE={},wi=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let f=function(h){return Promise.all(h.map(_=>Promise.resolve(_).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");r=f(t.map(h=>{if(h=PR(h),h in mE)return;mE[h]=!0;const _=h.endsWith(".css"),E=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${E}`))return;const A=document.createElement("link");if(A.rel=_?"stylesheet":NR,_||(A.as="script"),A.crossOrigin="",A.href=h,d&&A.setAttribute("nonce",d),document.head.appendChild(A),_)return new Promise((R,M)=>{A.addEventListener("load",R),A.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return r.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};var gE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},DR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],c=n[t++],d=n[t++],f=((r&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],c=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return e.join("")},_S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],c=r+1<n.length,d=c?n[r+1]:0,f=r+2<n.length,h=f?n[r+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let A=(d&15)<<2|h>>6,R=h&63;f||(R=64,c||(A=64)),i.push(t[_],t[E],t[A],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):DR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const E=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||d==null||h==null||E==null)throw new kR;const A=a<<2|d>>4;if(i.push(A),h!==64){const R=d<<4&240|h>>2;if(i.push(R),E!==64){const M=h<<6&192|E;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class kR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MR=function(n){const e=vS(n);return _S.encodeByteArray(e,!0)},_h=function(n){return MR(n).replace(/\./g,"")},TS=function(n){try{return _S.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=()=>UR().__FIREBASE_DEFAULTS__,LR=()=>{if(typeof process>"u"||typeof gE>"u")return;const n=gE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&TS(n[1]);return e&&JSON.parse(e)},jh=()=>{try{return VR()||LR()||OR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ES=n=>{var e,t;return(t=(e=jh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Fg=n=>{const e=ES(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},AS=()=>{var n;return(n=jh())===null||n===void 0?void 0:n.config},SS=n=>{var e;return(e=jh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_h(JSON.stringify(t)),_h(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function BR(){var n;const e=(n=jh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zR(){const n=Gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $R(){return!BR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KR(){try{return typeof indexedDB=="object"}catch{return!1}}function YR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="FirebaseError";class Bs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=JR,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],c=a?WR(a,i):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new Bs(r,d,i)}}function WR(n,e){return n.replace(QR,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const QR=/\{\$([^}]+)}/g;function XR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Th(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],c=e[r];if(yE(a)&&yE(c)){if(!Th(a,c))return!1}else if(a!==c)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function yE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function zc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,a]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function $c(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ZR(n,e){const t=new eb(n,e);return t.subscribe.bind(t)}class eb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");tb(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Um),r.error===void 0&&(r.error=Um),r.complete===void 0&&(r.complete=Um);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(n){return n&&n._delegate?n._delegate:n}class Ir{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new FR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sb(e))try{this.getOrInitializeService({instanceIdentifier:ta})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ta){return this.instances.has(e)}getOptions(e=ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&c.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&e(c,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ib(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ta){return this.component?this.component.multipleInstances?e:ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ib(n){return n===ta?void 0:n}function sb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(et||(et={}));const ob={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},ab=et.INFO,lb={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},cb=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=lb[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qg{constructor(e){this.name=e,this._logLevel=ab,this._logHandler=cb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ob[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const ub=(n,e)=>e.some(t=>n instanceof t);let vE,_E;function db(){return vE||(vE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hb(){return _E||(_E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CS=new WeakMap,eg=new WeakMap,IS=new WeakMap,Vm=new WeakMap,Bg=new WeakMap;function fb(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(po(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&CS.set(t,n)}).catch(()=>{}),Bg.set(e,n),e}function pb(n){if(eg.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});eg.set(n,e)}let tg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return eg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||IS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return po(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mb(n){tg=n(tg)}function gb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Lm(this),e,...t);return IS.set(i,e.sort?e.sort():[e]),po(i)}:hb().includes(n)?function(...e){return n.apply(Lm(this),e),po(CS.get(this))}:function(...e){return po(n.apply(Lm(this),e))}}function yb(n){return typeof n=="function"?gb(n):(n instanceof IDBTransaction&&pb(n),ub(n,db())?new Proxy(n,tg):n)}function po(n){if(n instanceof IDBRequest)return fb(n);if(Vm.has(n))return Vm.get(n);const e=yb(n);return e!==n&&(Vm.set(n,e),Bg.set(e,n)),e}const Lm=n=>Bg.get(n);function vb(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const c=indexedDB.open(n,e),d=po(c);return i&&c.addEventListener("upgradeneeded",f=>{i(po(c.result),f.oldVersion,f.newVersion,po(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),r&&f.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const _b=["get","getKey","getAll","getAllKeys","count"],Tb=["put","add","delete","clear"],Om=new Map;function TE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Om.get(e))return Om.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=Tb.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||_b.includes(t)))return;const a=async function(c,...d){const f=this.transaction(c,r?"readwrite":"readonly");let h=f.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),r&&f.done]))[0]};return Om.set(e,a),a}mb(n=>({...n,get:(e,t,i)=>TE(e,t)||n.get(e,t,i),has:(e,t)=>!!TE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ab(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Ab(n){const e=n.getComponent();return e?.type==="VERSION"}const ng="@firebase/app",EE="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new qg("@firebase/app"),Sb="@firebase/app-compat",wb="@firebase/analytics-compat",Cb="@firebase/analytics",Ib="@firebase/app-check-compat",xb="@firebase/app-check",Rb="@firebase/auth",bb="@firebase/auth-compat",Nb="@firebase/database",Pb="@firebase/data-connect",Db="@firebase/database-compat",kb="@firebase/functions",Mb="@firebase/functions-compat",Ub="@firebase/installations",Vb="@firebase/installations-compat",Lb="@firebase/messaging",Ob="@firebase/messaging-compat",Fb="@firebase/performance",qb="@firebase/performance-compat",Bb="@firebase/remote-config",Hb="@firebase/remote-config-compat",Gb="@firebase/storage",jb="@firebase/storage-compat",zb="@firebase/firestore",$b="@firebase/vertexai",Kb="@firebase/firestore-compat",Yb="firebase",Jb="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="[DEFAULT]",Wb={[ng]:"fire-core",[Sb]:"fire-core-compat",[Cb]:"fire-analytics",[wb]:"fire-analytics-compat",[xb]:"fire-app-check",[Ib]:"fire-app-check-compat",[Rb]:"fire-auth",[bb]:"fire-auth-compat",[Nb]:"fire-rtdb",[Pb]:"fire-data-connect",[Db]:"fire-rtdb-compat",[kb]:"fire-fn",[Mb]:"fire-fn-compat",[Ub]:"fire-iid",[Vb]:"fire-iid-compat",[Lb]:"fire-fcm",[Ob]:"fire-fcm-compat",[Fb]:"fire-perf",[qb]:"fire-perf-compat",[Bb]:"fire-rc",[Hb]:"fire-rc-compat",[Gb]:"fire-gcs",[jb]:"fire-gcs-compat",[zb]:"fire-fst",[Kb]:"fire-fst-compat",[$b]:"fire-vertex","fire-js":"fire-js",[Yb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Map,Qb=new Map,sg=new Map;function AE(n,e){try{n.container.addComponent(e)}catch(t){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _o(n){const e=n.name;if(sg.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;sg.set(e,n);for(const t of Eh.values())AE(t,n);for(const t of Qb.values())AE(t,n);return!0}function _u(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pn(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mo=new vu("app","Firebase",Xb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=Jb;function xS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ig,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw mo.create("bad-app-name",{appName:String(r)});if(t||(t=AS()),!t)throw mo.create("no-options");const a=Eh.get(r);if(a){if(Th(t,a.options)&&Th(i,a.config))return a;throw mo.create("duplicate-app",{appName:r})}const c=new rb(r);for(const f of sg.values())c.addComponent(f);const d=new Zb(t,i,c);return Eh.set(r,d),d}function zh(n=ig){const e=Eh.get(n);if(!e&&n===ig&&AS())return xS();if(!e)throw mo.create("no-app",{appName:n});return e}function Ki(n,e,t){var i;let r=(i=Wb[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${r}" with version "${e}":`];a&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(d.join(" "));return}_o(new Ir(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="firebase-heartbeat-database",tN=1,cu="firebase-heartbeat-store";let Fm=null;function RS(){return Fm||(Fm=vb(eN,tN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cu)}catch(t){console.warn(t)}}}}).catch(n=>{throw mo.create("idb-open",{originalErrorMessage:n.message})})),Fm}async function nN(n){try{const t=(await RS()).transaction(cu),i=await t.objectStore(cu).get(bS(n));return await t.done,i}catch(e){if(e instanceof Bs)xr.warn(e.message);else{const t=mo.create("idb-get",{originalErrorMessage:e?.message});xr.warn(t.message)}}}async function SE(n,e){try{const i=(await RS()).transaction(cu,"readwrite");await i.objectStore(cu).put(e,bS(n)),await i.done}catch(t){if(t instanceof Bs)xr.warn(t.message);else{const i=mo.create("idb-set",{originalErrorMessage:t?.message});xr.warn(i.message)}}}function bS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=1024,sN=720*60*60*1e3;class rN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=wE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=sN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){xr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=wE(),{heartbeatsToSend:i,unsentEntries:r}=oN(this._heartbeatsCache.heartbeats),a=_h(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return xr.warn(t),""}}}function wE(){return new Date().toISOString().substring(0,10)}function oN(n,e=iN){const t=[];let i=n.slice();for(const r of n){const a=t.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),CE(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),CE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class aN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KR()?YR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return SE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return SE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function CE(n){return _h(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(n){_o(new Ir("platform-logger",e=>new Eb(e),"PRIVATE")),_o(new Ir("heartbeat",e=>new rN(e),"PRIVATE")),Ki(ng,EE,n),Ki(ng,EE,"esm2017"),Ki("fire-js","")}lN("");function Hg(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function NS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PS=NS,DS=new vu("auth","Firebase",NS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new qg("@firebase/auth");function cN(n,...e){Ah.logLevel<=et.WARN&&Ah.warn(`Auth (${da}): ${n}`,...e)}function oh(n,...e){Ah.logLevel<=et.ERROR&&Ah.error(`Auth (${da}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(n,...e){throw jg(n,...e)}function ui(n,...e){return jg(n,...e)}function Gg(n,e,t){const i=Object.assign(Object.assign({},PS()),{[e]:t});return new vu("auth","Firebase",i).create(e,{appName:n.name})}function Xn(n){return Gg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $h(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ji(n,"argument-error"),Gg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return DS.create(n,...e)}function ve(n,e,...t){if(!n)throw jg(e,...t)}function Er(n){const e="INTERNAL ASSERTION FAILED: "+n;throw oh(e),new Error(e)}function Rr(n,e){n||Er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function zg(){return IE()==="http:"||IE()==="https:"}function IE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zg()||GR()||"connection"in navigator)?navigator.onLine:!0}function dN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rr(t>e,"Short delay should be less than long delay!"),this.isMobile=qR()||jR()}get(){return uN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(n,e){Rr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new Tu(3e4,6e4);function cn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function un(n,e,t,i,r={}){return MS(n,r,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const d=Nl(Object.assign({key:n.config.apiKey},c)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:f},a);return HR()||(h.referrerPolicy="no-referrer"),kS.fetch()(US(n,n.config.apiHost,t,d),h)})}async function MS(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},hN),e);try{const r=new mN(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Kc(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[f,h]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kc(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Kc(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Kc(n,"user-disabled",c);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Gg(n,_,h);Ji(n,_)}}catch(r){if(r instanceof Bs)throw r;Ji(n,"network-request-failed",{message:String(r)})}}async function Pr(n,e,t,i,r={}){const a=await un(n,e,t,i,r);return"mfaPendingCredential"in a&&Ji(n,"multi-factor-auth-required",{_serverResponse:a}),a}function US(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?$g(n.config,r):`${n.config.apiScheme}://${r}`}function pN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ui(this.auth,"network-request-failed")),fN.get())})}}function Kc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=ui(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(n){return n!==void 0&&n.getResponse!==void 0}function RE(n){return n!==void 0&&n.enterprise!==void 0}class VS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(n){return(await un(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function LS(n,e){return un(n,"GET","/v2/recaptchaConfig",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(n,e){return un(n,"POST","/v1/accounts:delete",e)}async function vN(n,e){return un(n,"POST","/v1/accounts:update",e)}async function OS(n,e){return un(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FS(n,e=!1){const t=He(n),i=await t.getIdToken(e),r=Kh(i);ve(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,c=a?.sign_in_provider;return{claims:r,token:i,authTime:Zc(qm(r.auth_time)),issuedAtTime:Zc(qm(r.iat)),expirationTime:Zc(qm(r.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function qm(n){return Number(n)*1e3}function Kh(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return oh("JWT malformed, contained fewer than 3 sections"),null;try{const r=TS(t);return r?JSON.parse(r):(oh("Failed to decode base64 JWT payload"),null)}catch(r){return oh("Caught error parsing JWT payload as JSON",r?.toString()),null}}function bE(n){const e=Kh(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Bs&&_N(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function _N({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(n){var e;const t=n.auth,i=await n.getIdToken(),r=await ra(n,OS(t,{idToken:i}));ve(r?.users.length,t,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?BS(a.providerUserInfo):[],d=EN(n.providerData,c),f=n.isAnonymous,h=!(n.email&&a.passwordHash)&&!d?.length,_=f?h:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new rg(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function qS(n){const e=He(n);await du(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EN(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function BS(n){return n.map(e=>{var{providerId:t}=e,i=Hg(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(n,e){const t=await MS(n,{},async()=>{const i=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,c=US(n,r,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",kS.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SN(n,e){return un(n,"POST","/v2/accounts:revokeToken",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const t=bE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await AN(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,c=new ll;return i&&(ve(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),r&&(ve(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),a&&(ve(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return Er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ar{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,a=Hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new TN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new rg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ra(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FS(this,e)}reload(){return qS(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await du(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(Xn(this.auth));const e=await this.getIdToken();return await ra(this,yN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,a,c,d,f,h,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,A=(r=t.email)!==null&&r!==void 0?r:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,M=(c=t.photoURL)!==null&&c!==void 0?c:void 0,B=(d=t.tenantId)!==null&&d!==void 0?d:void 0,L=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,G=(h=t.createdAt)!==null&&h!==void 0?h:void 0,H=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:z,emailVerified:X,isAnonymous:Y,providerData:ue,stsTokenManager:O}=t;ve(z&&O,e,"internal-error");const N=ll.fromJSON(this.name,O);ve(typeof z=="string",e,"internal-error"),co(E,e.name),co(A,e.name),ve(typeof X=="boolean",e,"internal-error"),ve(typeof Y=="boolean",e,"internal-error"),co(R,e.name),co(M,e.name),co(B,e.name),co(L,e.name),co(G,e.name),co(H,e.name);const D=new Ar({uid:z,auth:e,email:A,emailVerified:X,displayName:E,isAnonymous:Y,photoURL:M,phoneNumber:R,tenantId:B,stsTokenManager:N,createdAt:G,lastLoginAt:H});return ue&&Array.isArray(ue)&&(D.providerData=ue.map(k=>Object.assign({},k))),L&&(D._redirectEventId=L),D}static async _fromIdTokenResponse(e,t,i=!1){const r=new ll;r.updateFromServerResponse(t);const a=new Ar({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await du(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];ve(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?BS(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!a?.length,d=new ll;d.updateFromIdToken(i);const f=new Ar({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:c}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new rg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!a?.length};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Map;function Sr(n){Rr(n instanceof Function,"Expected a class definition");let e=NE.get(n);return e?(Rr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,NE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}HS.type="NONE";const og=HS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(n,e,t){return`firebase:${n}:${e}:${t}`}class cl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=ah(this.userKey,r.apiKey,a),this.fullPersistenceKey=ah("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ar._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new cl(Sr(og),e,i);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=r[0]||Sr(og);const c=ah(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const _=await h._get(c);if(_){const E=Ar._fromJSON(e,_);h!==a&&(d=E),a=h;break}}catch{}const f=r.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new cl(a,e,i):(a=f[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(c)}catch{}})),new cl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YS(e))return"Blackberry";if(JS(e))return"Webos";if(jS(e))return"Safari";if((e.includes("chrome/")||zS(e))&&!e.includes("edge/"))return"Chrome";if(KS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function GS(n=Gn()){return/firefox\//i.test(n)}function jS(n=Gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zS(n=Gn()){return/crios\//i.test(n)}function $S(n=Gn()){return/iemobile/i.test(n)}function KS(n=Gn()){return/android/i.test(n)}function YS(n=Gn()){return/blackberry/i.test(n)}function JS(n=Gn()){return/webos/i.test(n)}function Kg(n=Gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function wN(n=Gn()){var e;return Kg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CN(){return zR()&&document.documentMode===10}function WS(n=Gn()){return Kg(n)||KS(n)||JS(n)||YS(n)||/windows phone/i.test(n)||$S(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(n,e=[]){let t;switch(n){case"Browser":t=PE(Gn());break;case"Worker":t=`${PE(Gn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${da}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((c,d)=>{try{const f=e(a);c(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(n,e={}){return un(n,"GET","/v2/passwordPolicy",cn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=6;class bN{constructor(e){var t,i,r,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:RN,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,a,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(r=f.containsLowercaseLetter)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DE(this),this.idTokenSubscription=new DE(this),this.beforeStateQueue=new IN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sr(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await OS(this,{idToken:e}),i=await Ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Pn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=r?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&f?.user&&(r=f.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await du(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(Xn(this));const t=e?He(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(Xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(Xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xN(this),t=new bN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await SN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sr(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[Sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,r);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&cN(`Error while retrieving App Check token: ${t.error}`),t?.token}}function En(n){return He(n)}class DE{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZR(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PN(n){Eu=n}function Yg(n){return Eu.loadJS(n)}function DN(){return Eu.recaptchaV2Script}function kN(){return Eu.recaptchaEnterpriseScript}function MN(){return Eu.gapiScript}function XS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=500,VN=6e4,Wd=1e12;class LN{constructor(e){this.auth=e,this.counter=Wd,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new qN(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;const i=e||Wd;(t=this._widgets.get(i))===null||t===void 0||t.delete(),this._widgets.delete(i)}getResponse(e){var t;const i=e||Wd;return((t=this._widgets.get(i))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const i=e||Wd;return(t=this._widgets.get(i))===null||t===void 0||t.execute(),""}}class ON{constructor(){this.enterprise=new FN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class FN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class qN{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;ve(r,"argument-error",{appName:t}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=BN(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},VN)},UN))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function BN(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const HN="recaptcha-enterprise",eu="NO_RECAPTCHA";class ZS{constructor(e){this.type=HN,this.auth=En(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{LS(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new VS(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}}).catch(f=>{d(f)})})}function r(a,c,d){const f=window.grecaptcha;RE(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{c(h)}).catch(()=>{c(eu)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ON().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{i(this.auth).then(d=>{if(!t&&RE(window.grecaptcha))r(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=kN();f.length!==0&&(f+=d),Yg(f).then(()=>{r(d,a,c)}).catch(h=>{c(h)})}}).catch(d=>{c(d)})})}}async function Bc(n,e,t,i=!1,r=!1){const a=new ZS(n);let c;if(r)c=eu;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function go(n,e,t,i,r){var a,c;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Bc(n,e,t,t==="getOobCode");return i(n,d)}else return i(n,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Bc(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(d)});else if(r==="PHONE_PROVIDER")if(!((c=n._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("PHONE_PROVIDER")){const d=await Bc(n,e,t);return i(n,d).catch(async f=>{var h;if(((h=n._getRecaptchaConfig())===null||h===void 0?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(f.code==="auth/missing-recaptcha-token"||f.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const _=await Bc(n,e,t,!1,!0);return i(n,_)}return Promise.reject(f)})}else{const d=await Bc(n,e,t,!1,!0);return i(n,d)}else return Promise.reject(r+" provider is not supported.")}async function GN(n){const e=En(n),t=await LS(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new VS(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new ZS(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(n,e){const t=_u(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(Th(a,e??{}))return r;Ji(r,"already-initialized")}return t.initialize({options:e})}function jN(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Sr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function tw(n,e,t){const i=En(n);ve(i._canInitEmulator,i,"emulator-config-failed"),ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=nw(e),{host:c,port:d}=zN(e),f=d===null?"":`:${d}`;i.config.emulator={url:`${a}//${c}${f}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})}),$N()}function nw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zN(n){const e=nw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:kE(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:kE(c)}}}function kE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function $N(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Er("not implemented")}_getIdTokenResponse(e){return Er("not implemented")}_linkToIdToken(e,t){return Er("not implemented")}_getReauthenticationResolver(e){return Er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(n,e){return un(n,"POST","/v1/accounts:resetPassword",cn(n,e))}async function YN(n,e){return un(n,"POST","/v1/accounts:update",e)}async function JN(n,e){return un(n,"POST","/v1/accounts:signUp",e)}async function WN(n,e){return un(n,"POST","/v1/accounts:update",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(n,e){return Pr(n,"POST","/v1/accounts:signInWithPassword",cn(n,e))}async function Yh(n,e){return un(n,"POST","/v1/accounts:sendOobCode",cn(n,e))}async function XN(n,e){return Yh(n,e)}async function ZN(n,e){return Yh(n,e)}async function e1(n,e){return Yh(n,e)}async function t1(n,e){return Yh(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(n,e){return Pr(n,"POST","/v1/accounts:signInWithEmailLink",cn(n,e))}async function i1(n,e){return Pr(n,"POST","/v1/accounts:signInWithEmailLink",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Au{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new El(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new El(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return go(e,t,"signInWithPassword",QN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return n1(e,{email:this._email,oobCode:this._password});default:Ji(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return go(e,i,"signUpPassword",JN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return i1(e,{idToken:t,email:this._email,oobCode:this._password});default:Ji(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n,e){return Pr(n,"POST","/v1/accounts:signInWithIdp",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="http://localhost";class Ls extends Au{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ji("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,a=Hg(t,["providerId","signInMethod"]);if(!i||!r)return null;const c=new Ls(i,r);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ul(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ul(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ul(e,t)}buildRequest(){const e={requestUri:s1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(n,e){return un(n,"POST","/v1/accounts:sendVerificationCode",cn(n,e))}async function r1(n,e){return Pr(n,"POST","/v1/accounts:signInWithPhoneNumber",cn(n,e))}async function o1(n,e){const t=await Pr(n,"POST","/v1/accounts:signInWithPhoneNumber",cn(n,e));if(t.temporaryProof)throw Kc(n,"account-exists-with-different-credential",t);return t}const a1={USER_NOT_FOUND:"user-not-found"};async function l1(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Pr(n,"POST","/v1/accounts:signInWithPhoneNumber",cn(n,t),a1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Au{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new dl({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new dl({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return r1(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return o1(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return l1(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:a}=e;return!i&&!t&&!r&&!a?null:new dl({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u1(n){const e=zc($c(n)).link,t=e?zc($c(e)).deep_link_id:null,i=zc($c(n)).deep_link_id;return(i?zc($c(i)).link:null)||i||t||e||n}class Su{constructor(e){var t,i,r,a,c,d;const f=zc($c(e)),h=(t=f.apiKey)!==null&&t!==void 0?t:null,_=(i=f.oobCode)!==null&&i!==void 0?i:null,E=c1((r=f.mode)!==null&&r!==void 0?r:null);ve(h&&_&&E,"argument-error"),this.apiKey=h,this.operation=E,this.code=_,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=f.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=u1(e);try{return new Su(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.providerId=xo.PROVIDER_ID}static credential(e,t){return El._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Su.parseLink(t);return ve(i,"argument-error"),El._fromEmailAndCode(e,i.code,i.tenantId)}}xo.PROVIDER_ID="password";xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends Pl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class tu extends Dl{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ve("providerId"in t&&"signInMethod"in t,"argument-error"),Ls._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ve(e.idToken||e.accessToken,"argument-error"),Ls._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return tu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return tu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:a,nonce:c,providerId:d}=e;if(!i&&!r&&!t&&!a||!d)return null;try{return new tu(d)._credential({idToken:t,accessToken:i,nonce:c,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Dl{constructor(){super("facebook.com")}static credential(e){return Ls._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ls._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return vr.credential(t,i)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Dl{constructor(){super("github.com")}static credential(e){return Ls._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Dl{constructor(){super("twitter.com")}static credential(e,t){return Ls._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Tr.credential(t,i)}catch{return null}}}Tr.TWITTER_SIGN_IN_METHOD="twitter.com";Tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iw(n,e){return Pr(n,"POST","/v1/accounts:signUp",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await Ar._fromIdTokenResponse(e,i,r),c=UE(i);return new Os({user:a,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=UE(i);return new Os({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function UE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ag(n){var e;if(Pn(n.app))return Promise.reject(Xn(n));const t=En(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Os({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await iw(t,{returnSecureToken:!0}),r=await Os._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Bs{constructor(e,t,i,r){var a;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Sh(e,t,i,r)}}function sw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(n,a,e,i):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(n,e){const t=He(n);await Jh(!0,t,e);const{providerUserInfo:i}=await vN(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),r=rw(i||[]);return t.providerData=t.providerData.filter(a=>r.has(a.providerId)),r.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function ow(n,e,t=!1){const i=await ra(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Os._forOperation(n,"link",i)}async function Jh(n,e,t){await du(e);const i=rw(e.providerData),r=n===!1?"provider-already-linked":"no-such-provider";ve(i.has(t)===n,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(n,e,t=!1){const{auth:i}=n;if(Pn(i.app))return Promise.reject(Xn(i));const r="reauthenticate";try{const a=await ra(n,sw(i,r,e,n),t);ve(a.idToken,i,"internal-error");const c=Kh(a.idToken);ve(c,i,"internal-error");const{sub:d}=c;return ve(n.uid===d,i,"user-mismatch"),Os._forOperation(n,r,a)}catch(a){throw a?.code==="auth/user-not-found"&&Ji(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aw(n,e,t=!1){if(Pn(n.app))return Promise.reject(Xn(n));const i="signIn",r=await sw(n,i,e),a=await Os._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}async function Wh(n,e){return aw(En(n),e)}async function lw(n,e){const t=He(n);return await Jh(!1,t,e.providerId),ow(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(n,e){return Pr(n,"POST","/v1/accounts:signInWithCustomToken",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(n,e){if(Pn(n.app))return Promise.reject(Xn(n));const t=En(n),i=await f1(t,{token:e,returnSecureToken:!0}),r=await Os._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n,e,t){var i;ve(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),ve(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ve(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ve(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jg(n){const e=En(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function m1(n,e,t){const i=En(n),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Qh(i,r,t),await go(i,r,"getOobCode",ZN,"EMAIL_PASSWORD_PROVIDER")}async function g1(n,e,t){await KN(He(n),{oobCode:e,newPassword:t}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Jg(n),i})}async function y1(n,e){await WN(He(n),{oobCode:e})}async function v1(n,e,t){if(Pn(n.app))return Promise.reject(Xn(n));const i=En(n),c=await go(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iw,"EMAIL_PASSWORD_PROVIDER").catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Jg(n),f}),d=await Os._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function cw(n,e,t){return Pn(n.app)?Promise.reject(Xn(n)):Wh(He(n),xo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Jg(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(n,e,t){const i=En(n),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(c,d){ve(d.handleCodeInApp,i,"argument-error"),d&&Qh(i,c,d)}a(r,t),await go(i,r,"getOobCode",e1,"EMAIL_PASSWORD_PROVIDER")}function T1(n,e){const t=Su.parseLink(e);return t?.operation==="EMAIL_SIGNIN"}async function E1(n,e,t){if(Pn(n.app))return Promise.reject(Xn(n));const i=He(n),r=xo.credentialWithLink(e,t||uu());return ve(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Wh(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(n,e){return un(n,"POST","/v1/accounts:createAuthUri",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(n,e){const t=zg()?uu():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:r}=await A1(He(n),i);return r||[]}async function w1(n,e){const t=He(n),r={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Qh(t.auth,r,e);const{email:a}=await XN(t.auth,r);a!==n.email&&await n.reload()}async function C1(n,e,t){const i=He(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Qh(i.auth,a,t);const{email:c}=await t1(i.auth,a);c!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(n,e){return un(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=He(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await ra(i,I1(i.auth,a));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const d=i.providerData.find(({providerId:f})=>f==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function R1(n,e){const t=He(n);return Pn(t.auth.app)?Promise.reject(Xn(t.auth)):uw(t,e,null)}function b1(n,e){return uw(He(n),null,e)}async function uw(n,e,t){const{auth:i}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const c=await ra(n,YN(i,a));await n._updateTokensIfNecessary(c,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(n){var e,t;if(!n)return null;const{providerId:i}=n,r=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},a=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&n?.idToken){const c=(t=(e=Kh(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(c){const d=c!=="anonymous"&&c!=="custom"?c:null;return new hl(a,d)}}if(!i)return null;switch(i){case"facebook.com":return new P1(a,r);case"github.com":return new D1(a,r);case"google.com":return new k1(a,r);case"twitter.com":return new M1(a,r,n.screenName||null);case"custom":case"anonymous":return new hl(a,null);default:return new hl(a,i,r)}}class hl{constructor(e,t,i={}){this.isNewUser=e,this.providerId=t,this.profile=i}}class dw extends hl{constructor(e,t,i,r){super(e,t,i),this.username=r}}class P1 extends hl{constructor(e,t){super(e,"facebook.com",t)}}class D1 extends dw{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class k1 extends hl{constructor(e,t){super(e,"google.com",t)}}class M1 extends dw{constructor(e,t,i){super(e,"twitter.com",t,i)}}function U1(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:N1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(n,e){return He(n).setPersistence(e)}function hw(n,e,t,i){return He(n).onIdTokenChanged(e,t,i)}function fw(n,e,t){return He(n).beforeAuthStateChanged(e,t)}function Wg(n,e,t,i){return He(n).onAuthStateChanged(e,t,i)}function pw(n){return He(n).signOut()}function L1(n,e){return En(n).revokeAccessToken(e)}async function O1(n){return He(n).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(n,e){return un(n,"POST","/v2/accounts/mfaEnrollment:start",cn(n,e))}const wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=1e3,q1=10;class gw extends mw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);CN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,q1):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},F1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gw.type="LOCAL";const yw=gw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw extends mw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vw.type="SESSION";const Qg=vw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Xh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,c=this.handlersMap[r];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const d=Array.from(c).map(async h=>h(t.origin,a)),f=await B1(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,c;return new Promise((d,f)=>{const h=Zh("",20);r.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(E){const A=E;if(A.data.eventId===h)switch(A.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(A.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return window}function G1(n){Xt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(){return typeof Xt().WorkerGlobalScope<"u"&&typeof Xt().importScripts=="function"}async function j1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z1(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function $1(){return Xg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firebaseLocalStorageDb",K1=1,Ch="firebaseLocalStorage",Tw="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ef(n,e){return n.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function Y1(){const n=indexedDB.deleteDatabase(_w);return new wu(n).toPromise()}function lg(){const n=indexedDB.open(_w,K1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ch,{keyPath:Tw})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ch)?e(i):(i.close(),await Y1(),e(await lg()))})})}async function LE(n,e,t){const i=ef(n,!0).put({[Tw]:e,value:t});return new wu(i).toPromise()}async function J1(n,e){const t=ef(n,!1).get(e),i=await new wu(t).toPromise();return i===void 0?null:i.value}function OE(n,e){const t=ef(n,!0).delete(e);return new wu(t).toPromise()}const W1=800,Q1=3;class Ew{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Q1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xh._getInstance($1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await j1(),!this.activeServiceWorker)return;this.sender=new H1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lg();return await LE(e,wh,"1"),await OE(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>LE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>J1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>OE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=ef(r,!1).getAll();return new wu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ew.type="LOCAL";const Aw=Ew;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n,e){return un(n,"POST","/v2/accounts/mfaSignIn:start",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=XS("rcb"),X1=new Tu(3e4,6e4);class Z1{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Xt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return ve(eP(t),e,"argument-error"),this.shouldResolveImmediately(t)&&xE(Xt().grecaptcha)?Promise.resolve(Xt().grecaptcha):new Promise((i,r)=>{const a=Xt().setTimeout(()=>{r(ui(e,"network-request-failed"))},X1.get());Xt()[Bm]=()=>{Xt().clearTimeout(a),delete Xt()[Bm];const d=Xt().grecaptcha;if(!d||!xE(d)){r(ui(e,"internal-error"));return}const f=d.render;d.render=(h,_)=>{const E=f(h,_);return this.counter++,E},this.hostLanguage=t,i(d)};const c=`${DN()}?${Nl({onload:Bm,render:"explicit",hl:t})}`;Yg(c).catch(()=>{clearTimeout(a),r(ui(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Xt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function eP(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class tP{async load(e){return new LN(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="recaptcha",nP={theme:"light",type:"image"};class Zg{constructor(e,t,i=Object.assign({},nP)){this.parameters=i,this.type=nu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(e),this.isInvisible=this.parameters.size==="invisible",ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof t=="string"?document.getElementById(t):t;ve(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tP:new Z1,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(r=>{const a=c=>{c&&(this.tokenChangeListeners.delete(a),r(c))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=Xt()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ve(zg()&&!Xg(),this.auth,"internal-error"),await iP(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await gN(this.auth);ve(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function iP(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=dl._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ey(n,e,t){if(Pn(n.app))return Promise.reject(Xn(n));const i=En(n),r=await ww(i,e,He(t));return new Sw(r,a=>Wh(i,a))}async function sP(n,e,t){const i=He(n);await Jh(!1,i,"phone");const r=await ww(i.auth,e,He(t));return new Sw(r,a=>lw(i,a))}async function ww(n,e,t){var i;if(!n._getRecaptchaConfig())try{await GN(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const a=r.session;if("phoneNumber"in r){ve(a.type==="enroll",n,"internal-error");const c={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await go(n,c,"mfaSmsEnrollment",async(_,E)=>{if(E.phoneEnrollmentInfo.captchaResponse===eu){ve(t?.type===nu,_,"argument-error");const A=await Hm(_,E,t);return VE(_,A)}return VE(_,E)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneSessionInfo.sessionInfo}else{ve(a.type==="signin",n,"internal-error");const c=((i=r.multiFactorHint)===null||i===void 0?void 0:i.uid)||r.multiFactorUid;ve(c,n,"missing-multi-factor-info");const d={mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await go(n,d,"mfaSmsSignIn",async(E,A)=>{if(A.phoneSignInInfo.captchaResponse===eu){ve(t?.type===nu,E,"argument-error");const R=await Hm(E,A,t);return FE(E,R)}return FE(E,A)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await go(n,a,"sendVerificationCode",async(h,_)=>{if(_.captchaResponse===eu){ve(t?.type===nu,h,"argument-error");const E=await Hm(h,_,t);return ME(h,E)}return ME(h,_)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{t?._reset()}}async function Hm(n,e,t){ve(t.type===nu,n,"argument-error");const i=await t.verify();ve(typeof i=="string",n,"argument-error");const r=Object.assign({},e);if("phoneEnrollmentInfo"in r){const a=r.phoneEnrollmentInfo.phoneNumber,c=r.phoneEnrollmentInfo.captchaResponse,d=r.phoneEnrollmentInfo.clientType,f=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:i,captchaResponse:c,clientType:d,recaptchaVersion:f}}),r}else if("phoneSignInInfo"in r){const a=r.phoneSignInInfo.captchaResponse,c=r.phoneSignInInfo.clientType,d=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:a,clientType:c,recaptchaVersion:d}}),r}else return Object.assign(r,{recaptchaToken:i}),r}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(n,e){return e?Sr(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends Au{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rP(n){return aw(n.auth,new ty(n),n.bypassAuthState)}function oP(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),h1(t,new ty(n),n.bypassAuthState)}async function aP(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),ow(t,new ty(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rP;case"linkViaPopup":case"linkViaRedirect":return aP;case"reauthViaPopup":case"reauthViaRedirect":return oP;default:Ji(this.auth,"internal-error")}}resolve(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new Tu(2e3,1e4);async function cP(n,e,t){if(Pn(n.app))return Promise.reject(ui(n,"operation-not-supported-in-this-environment"));const i=En(n);$h(n,e,Pl);const r=Cu(i,t);return new uo(i,"signInViaPopup",e,r).executeNotNull()}async function uP(n,e,t){const i=He(n);$h(i.auth,e,Pl);const r=Cu(i.auth,t);return new uo(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class uo extends Cw{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,uo.currentPopupAction&&uo.currentPopupAction.cancel(),uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Rr(this.filter.length===1,"Popup operations only handle one event");const e=Zh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lP.get())};e()}}uo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="pendingRedirect",lh=new Map;class hP extends Cw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=lh.get(this.auth._key());if(!e){try{const i=await fP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}lh.set(this.auth._key(),e)}return this.bypassAuthState||lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fP(n,e){const t=Rw(e),i=xw(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}async function Iw(n,e){return xw(n)._set(Rw(e),"true")}function pP(n,e){lh.set(n._key(),e)}function xw(n){return Sr(n._redirectPersistence)}function Rw(n){return ah(dP,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(n,e,t){return gP(n,e,t)}async function gP(n,e,t){if(Pn(n.app))return Promise.reject(Xn(n));const i=En(n);$h(n,e,Pl),await i._initializationPromise;const r=Cu(i,t);return await Iw(r,i),r._openRedirect(i,e,"signInViaRedirect")}function yP(n,e,t){return vP(n,e,t)}async function vP(n,e,t){const i=He(n);$h(i.auth,e,Pl),await i.auth._initializationPromise;const r=Cu(i.auth,t);await Jh(!1,i,e.providerId),await Iw(r,i.auth);const a=await TP(i);return r._openRedirect(i.auth,e,"linkViaRedirect",a)}async function _P(n,e){return await En(n)._initializationPromise,bw(n,e,!1)}async function bw(n,e,t=!1){if(Pn(n.app))return Promise.reject(Xn(n));const i=En(n),r=Cu(i,e),c=await new hP(i,r,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}async function TP(n){const e=Zh(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=600*1e3;class AP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Nw(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ui(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EP&&this.cachedEventUids.clear(),this.cachedEventUids.has(qE(e))}saveEventToCache(e){this.cachedEventUids.add(qE(e)),this.lastProcessedEventTime=Date.now()}}function qE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Nw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function SP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(n,e={}){return un(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IP=/^https?/;async function xP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await wP(n);for(const t of e)try{if(RP(t))return}catch{}Ji(n,"unauthorized-domain")}function RP(n){const e=uu(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!IP.test(t))return!1;if(CP.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=new Tu(3e4,6e4);function BE(){const n=Xt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NP(n){return new Promise((e,t)=>{var i,r,a;function c(){BE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BE(),t(ui(n,"network-request-failed"))},timeout:bP.get()})}if(!((r=(i=Xt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((a=Xt().gapi)===null||a===void 0)&&a.load)c();else{const d=XS("iframefcb");return Xt()[d]=()=>{gapi.load?c():t(ui(n,"network-request-failed"))},Yg(`${MN()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw ch=null,e})}let ch=null;function PP(n){return ch=ch||NP(n),ch}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new Tu(5e3,15e3),kP="__/auth/iframe",MP="emulator/auth/iframe",UP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LP(n){const e=n.config;ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$g(e,MP):`https://${n.config.authDomain}/${kP}`,i={apiKey:e.apiKey,appName:n.name,v:da},r=VP.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Nl(i).slice(1)}`}async function OP(n){const e=await PP(n),t=Xt().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:LP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UP,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const c=ui(n,"network-request-failed"),d=Xt().setTimeout(()=>{a(c)},DP.get());function f(){Xt().clearTimeout(d),r(i)}i.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qP=500,BP=600,HP="_blank",GP="http://localhost";class HE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jP(n,e,t,i=qP,r=BP){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},FP),{width:i.toString(),height:r.toString(),top:a,left:c}),h=Gn().toLowerCase();t&&(d=zS(h)?HP:t),GS(h)&&(e=e||GP,f.scrollbars="yes");const _=Object.entries(f).reduce((A,[R,M])=>`${A}${R}=${M},`,"");if(wN(h)&&d!=="_self")return zP(e||"",d),new HE(null);const E=window.open(e||"",d,_);ve(E,n,"popup-blocked");try{E.focus()}catch{}return new HE(E)}function zP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="__/auth/handler",KP="emulator/auth/handler",YP=encodeURIComponent("fac");async function GE(n,e,t,i,r,a){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:da,eventId:r};if(e instanceof Pl){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",XR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Dl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),h=f?`#${YP}=${encodeURIComponent(f)}`:"";return`${JP(n)}?${Nl(d).slice(1)}${h}`}function JP({config:n}){return n.emulator?$g(n,KP):`https://${n.authDomain}/${$P}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class WP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qg,this._completeRedirectFn=bw,this._overrideRedirectResult=pP}async _openPopup(e,t,i,r){var a;Rr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await GE(e,t,i,uu(),r);return jP(e,c,Zh())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await GE(e,t,i,uu(),r);return G1(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(Rr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await OP(e),i=new AP(e);return t.register("authEvent",r=>(ve(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gm,{type:Gm},r=>{var a;const c=(a=r?.[0])===null||a===void 0?void 0:a[Gm];c!==void 0&&t(!!c),Ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return WS()||jS()||Kg()}}const Pw=WP;var jE="@firebase/auth",zE="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZP(n){_o(new Ir("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;ve(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QS(n)},h=new NN(i,r,a,f);return jN(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),_o(new Ir("auth-internal",e=>{const t=En(e.getProvider("auth").getImmediate());return(i=>new QP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ki(jE,zE,XP(n)),Ki(jE,zE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=300,tD=SS("authIdTokenMaxAge")||eD;let $E=null;const nD=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>tD)return;const r=t?.token;$E!==r&&($E=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Dw(n=zh()){const e=_u(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ew(n,{popupRedirectResolver:Pw,persistence:[Aw,yw,Qg]}),i=SS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=nD(a.toString());fw(t,c,()=>c(t.currentUser)),hw(t,d=>c(d))}}const r=ES("auth");return r&&tw(t,`http://${r}`),t}function iD(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}PN({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=ui("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",iD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZP("Browser");const KE=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Su,AuthCredential:Au,EmailAuthCredential:El,EmailAuthProvider:xo,FacebookAuthProvider:yr,GithubAuthProvider:_r,GoogleAuthProvider:vr,OAuthCredential:Ls,OAuthProvider:tu,PhoneAuthCredential:dl,RecaptchaVerifier:Zg,TwitterAuthProvider:Tr,applyActionCode:y1,beforeAuthStateChanged:fw,browserLocalPersistence:yw,browserPopupRedirectResolver:Pw,browserSessionPersistence:Qg,confirmPasswordReset:g1,connectAuthEmulator:tw,createUserWithEmailAndPassword:v1,deleteUser:O1,fetchSignInMethodsForEmail:S1,getAdditionalUserInfo:U1,getAuth:Dw,getIdTokenResult:FS,getRedirectResult:_P,inMemoryPersistence:og,indexedDBLocalPersistence:Aw,initializeAuth:ew,isSignInWithEmailLink:T1,linkWithCredential:lw,linkWithPhoneNumber:sP,linkWithPopup:uP,linkWithRedirect:yP,onAuthStateChanged:Wg,onIdTokenChanged:hw,prodErrorMap:PS,reload:qS,revokeAccessToken:L1,sendEmailVerification:w1,sendPasswordResetEmail:m1,sendSignInLinkToEmail:_1,setPersistence:V1,signInAnonymously:ag,signInWithCredential:Wh,signInWithCustomToken:p1,signInWithEmailAndPassword:cw,signInWithEmailLink:E1,signInWithPhoneNumber:ey,signInWithPopup:cP,signInWithRedirect:mP,signOut:pw,unlink:d1,updateEmail:R1,updatePassword:b1,updateProfile:x1,verifyBeforeUpdateEmail:C1},Symbol.toStringTag,{value:"Module"}));var YE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yo,kw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,N){function D(){}D.prototype=N.prototype,O.D=N.prototype,O.prototype=new D,O.prototype.constructor=O,O.C=function(k,F,U){for(var P=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)P[_e-2]=arguments[_e];return N.prototype[F].apply(k,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(O,N,D){D||(D=0);var k=Array(16);if(typeof N=="string")for(var F=0;16>F;++F)k[F]=N.charCodeAt(D++)|N.charCodeAt(D++)<<8|N.charCodeAt(D++)<<16|N.charCodeAt(D++)<<24;else for(F=0;16>F;++F)k[F]=N[D++]|N[D++]<<8|N[D++]<<16|N[D++]<<24;N=O.g[0],D=O.g[1],F=O.g[2];var U=O.g[3],P=N+(U^D&(F^U))+k[0]+3614090360&4294967295;N=D+(P<<7&4294967295|P>>>25),P=U+(F^N&(D^F))+k[1]+3905402710&4294967295,U=N+(P<<12&4294967295|P>>>20),P=F+(D^U&(N^D))+k[2]+606105819&4294967295,F=U+(P<<17&4294967295|P>>>15),P=D+(N^F&(U^N))+k[3]+3250441966&4294967295,D=F+(P<<22&4294967295|P>>>10),P=N+(U^D&(F^U))+k[4]+4118548399&4294967295,N=D+(P<<7&4294967295|P>>>25),P=U+(F^N&(D^F))+k[5]+1200080426&4294967295,U=N+(P<<12&4294967295|P>>>20),P=F+(D^U&(N^D))+k[6]+2821735955&4294967295,F=U+(P<<17&4294967295|P>>>15),P=D+(N^F&(U^N))+k[7]+4249261313&4294967295,D=F+(P<<22&4294967295|P>>>10),P=N+(U^D&(F^U))+k[8]+1770035416&4294967295,N=D+(P<<7&4294967295|P>>>25),P=U+(F^N&(D^F))+k[9]+2336552879&4294967295,U=N+(P<<12&4294967295|P>>>20),P=F+(D^U&(N^D))+k[10]+4294925233&4294967295,F=U+(P<<17&4294967295|P>>>15),P=D+(N^F&(U^N))+k[11]+2304563134&4294967295,D=F+(P<<22&4294967295|P>>>10),P=N+(U^D&(F^U))+k[12]+1804603682&4294967295,N=D+(P<<7&4294967295|P>>>25),P=U+(F^N&(D^F))+k[13]+4254626195&4294967295,U=N+(P<<12&4294967295|P>>>20),P=F+(D^U&(N^D))+k[14]+2792965006&4294967295,F=U+(P<<17&4294967295|P>>>15),P=D+(N^F&(U^N))+k[15]+1236535329&4294967295,D=F+(P<<22&4294967295|P>>>10),P=N+(F^U&(D^F))+k[1]+4129170786&4294967295,N=D+(P<<5&4294967295|P>>>27),P=U+(D^F&(N^D))+k[6]+3225465664&4294967295,U=N+(P<<9&4294967295|P>>>23),P=F+(N^D&(U^N))+k[11]+643717713&4294967295,F=U+(P<<14&4294967295|P>>>18),P=D+(U^N&(F^U))+k[0]+3921069994&4294967295,D=F+(P<<20&4294967295|P>>>12),P=N+(F^U&(D^F))+k[5]+3593408605&4294967295,N=D+(P<<5&4294967295|P>>>27),P=U+(D^F&(N^D))+k[10]+38016083&4294967295,U=N+(P<<9&4294967295|P>>>23),P=F+(N^D&(U^N))+k[15]+3634488961&4294967295,F=U+(P<<14&4294967295|P>>>18),P=D+(U^N&(F^U))+k[4]+3889429448&4294967295,D=F+(P<<20&4294967295|P>>>12),P=N+(F^U&(D^F))+k[9]+568446438&4294967295,N=D+(P<<5&4294967295|P>>>27),P=U+(D^F&(N^D))+k[14]+3275163606&4294967295,U=N+(P<<9&4294967295|P>>>23),P=F+(N^D&(U^N))+k[3]+4107603335&4294967295,F=U+(P<<14&4294967295|P>>>18),P=D+(U^N&(F^U))+k[8]+1163531501&4294967295,D=F+(P<<20&4294967295|P>>>12),P=N+(F^U&(D^F))+k[13]+2850285829&4294967295,N=D+(P<<5&4294967295|P>>>27),P=U+(D^F&(N^D))+k[2]+4243563512&4294967295,U=N+(P<<9&4294967295|P>>>23),P=F+(N^D&(U^N))+k[7]+1735328473&4294967295,F=U+(P<<14&4294967295|P>>>18),P=D+(U^N&(F^U))+k[12]+2368359562&4294967295,D=F+(P<<20&4294967295|P>>>12),P=N+(D^F^U)+k[5]+4294588738&4294967295,N=D+(P<<4&4294967295|P>>>28),P=U+(N^D^F)+k[8]+2272392833&4294967295,U=N+(P<<11&4294967295|P>>>21),P=F+(U^N^D)+k[11]+1839030562&4294967295,F=U+(P<<16&4294967295|P>>>16),P=D+(F^U^N)+k[14]+4259657740&4294967295,D=F+(P<<23&4294967295|P>>>9),P=N+(D^F^U)+k[1]+2763975236&4294967295,N=D+(P<<4&4294967295|P>>>28),P=U+(N^D^F)+k[4]+1272893353&4294967295,U=N+(P<<11&4294967295|P>>>21),P=F+(U^N^D)+k[7]+4139469664&4294967295,F=U+(P<<16&4294967295|P>>>16),P=D+(F^U^N)+k[10]+3200236656&4294967295,D=F+(P<<23&4294967295|P>>>9),P=N+(D^F^U)+k[13]+681279174&4294967295,N=D+(P<<4&4294967295|P>>>28),P=U+(N^D^F)+k[0]+3936430074&4294967295,U=N+(P<<11&4294967295|P>>>21),P=F+(U^N^D)+k[3]+3572445317&4294967295,F=U+(P<<16&4294967295|P>>>16),P=D+(F^U^N)+k[6]+76029189&4294967295,D=F+(P<<23&4294967295|P>>>9),P=N+(D^F^U)+k[9]+3654602809&4294967295,N=D+(P<<4&4294967295|P>>>28),P=U+(N^D^F)+k[12]+3873151461&4294967295,U=N+(P<<11&4294967295|P>>>21),P=F+(U^N^D)+k[15]+530742520&4294967295,F=U+(P<<16&4294967295|P>>>16),P=D+(F^U^N)+k[2]+3299628645&4294967295,D=F+(P<<23&4294967295|P>>>9),P=N+(F^(D|~U))+k[0]+4096336452&4294967295,N=D+(P<<6&4294967295|P>>>26),P=U+(D^(N|~F))+k[7]+1126891415&4294967295,U=N+(P<<10&4294967295|P>>>22),P=F+(N^(U|~D))+k[14]+2878612391&4294967295,F=U+(P<<15&4294967295|P>>>17),P=D+(U^(F|~N))+k[5]+4237533241&4294967295,D=F+(P<<21&4294967295|P>>>11),P=N+(F^(D|~U))+k[12]+1700485571&4294967295,N=D+(P<<6&4294967295|P>>>26),P=U+(D^(N|~F))+k[3]+2399980690&4294967295,U=N+(P<<10&4294967295|P>>>22),P=F+(N^(U|~D))+k[10]+4293915773&4294967295,F=U+(P<<15&4294967295|P>>>17),P=D+(U^(F|~N))+k[1]+2240044497&4294967295,D=F+(P<<21&4294967295|P>>>11),P=N+(F^(D|~U))+k[8]+1873313359&4294967295,N=D+(P<<6&4294967295|P>>>26),P=U+(D^(N|~F))+k[15]+4264355552&4294967295,U=N+(P<<10&4294967295|P>>>22),P=F+(N^(U|~D))+k[6]+2734768916&4294967295,F=U+(P<<15&4294967295|P>>>17),P=D+(U^(F|~N))+k[13]+1309151649&4294967295,D=F+(P<<21&4294967295|P>>>11),P=N+(F^(D|~U))+k[4]+4149444226&4294967295,N=D+(P<<6&4294967295|P>>>26),P=U+(D^(N|~F))+k[11]+3174756917&4294967295,U=N+(P<<10&4294967295|P>>>22),P=F+(N^(U|~D))+k[2]+718787259&4294967295,F=U+(P<<15&4294967295|P>>>17),P=D+(U^(F|~N))+k[9]+3951481745&4294967295,O.g[0]=O.g[0]+N&4294967295,O.g[1]=O.g[1]+(F+(P<<21&4294967295|P>>>11))&4294967295,O.g[2]=O.g[2]+F&4294967295,O.g[3]=O.g[3]+U&4294967295}i.prototype.u=function(O,N){N===void 0&&(N=O.length);for(var D=N-this.blockSize,k=this.B,F=this.h,U=0;U<N;){if(F==0)for(;U<=D;)r(this,O,U),U+=this.blockSize;if(typeof O=="string"){for(;U<N;)if(k[F++]=O.charCodeAt(U++),F==this.blockSize){r(this,k),F=0;break}}else for(;U<N;)if(k[F++]=O[U++],F==this.blockSize){r(this,k),F=0;break}}this.h=F,this.o+=N},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var N=1;N<O.length-8;++N)O[N]=0;var D=8*this.o;for(N=O.length-8;N<O.length;++N)O[N]=D&255,D/=256;for(this.u(O),O=Array(16),N=D=0;4>N;++N)for(var k=0;32>k;k+=8)O[D++]=this.g[N]>>>k&255;return O};function a(O,N){var D=d;return Object.prototype.hasOwnProperty.call(D,O)?D[O]:D[O]=N(O)}function c(O,N){this.h=N;for(var D=[],k=!0,F=O.length-1;0<=F;F--){var U=O[F]|0;k&&U==N||(D[F]=U,k=!1)}this.g=D}var d={};function f(O){return-128<=O&&128>O?a(O,function(N){return new c([N|0],0>N?-1:0)}):new c([O|0],0>O?-1:0)}function h(O){if(isNaN(O)||!isFinite(O))return E;if(0>O)return L(h(-O));for(var N=[],D=1,k=0;O>=D;k++)N[k]=O/D|0,D*=4294967296;return new c(N,0)}function _(O,N){if(O.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(O.charAt(0)=="-")return L(_(O.substring(1),N));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=h(Math.pow(N,8)),k=E,F=0;F<O.length;F+=8){var U=Math.min(8,O.length-F),P=parseInt(O.substring(F,F+U),N);8>U?(U=h(Math.pow(N,U)),k=k.j(U).add(h(P))):(k=k.j(D),k=k.add(h(P)))}return k}var E=f(0),A=f(1),R=f(16777216);n=c.prototype,n.m=function(){if(B(this))return-L(this).m();for(var O=0,N=1,D=0;D<this.g.length;D++){var k=this.i(D);O+=(0<=k?k:4294967296+k)*N,N*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(M(this))return"0";if(B(this))return"-"+L(this).toString(O);for(var N=h(Math.pow(O,6)),D=this,k="";;){var F=X(D,N).g;D=G(D,F.j(N));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(O);if(D=F,M(D))return U+k;for(;6>U.length;)U="0"+U;k=U+k}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function M(O){if(O.h!=0)return!1;for(var N=0;N<O.g.length;N++)if(O.g[N]!=0)return!1;return!0}function B(O){return O.h==-1}n.l=function(O){return O=G(this,O),B(O)?-1:M(O)?0:1};function L(O){for(var N=O.g.length,D=[],k=0;k<N;k++)D[k]=~O.g[k];return new c(D,~O.h).add(A)}n.abs=function(){return B(this)?L(this):this},n.add=function(O){for(var N=Math.max(this.g.length,O.g.length),D=[],k=0,F=0;F<=N;F++){var U=k+(this.i(F)&65535)+(O.i(F)&65535),P=(U>>>16)+(this.i(F)>>>16)+(O.i(F)>>>16);k=P>>>16,U&=65535,P&=65535,D[F]=P<<16|U}return new c(D,D[D.length-1]&-2147483648?-1:0)};function G(O,N){return O.add(L(N))}n.j=function(O){if(M(this)||M(O))return E;if(B(this))return B(O)?L(this).j(L(O)):L(L(this).j(O));if(B(O))return L(this.j(L(O)));if(0>this.l(R)&&0>O.l(R))return h(this.m()*O.m());for(var N=this.g.length+O.g.length,D=[],k=0;k<2*N;k++)D[k]=0;for(k=0;k<this.g.length;k++)for(var F=0;F<O.g.length;F++){var U=this.i(k)>>>16,P=this.i(k)&65535,_e=O.i(F)>>>16,Oe=O.i(F)&65535;D[2*k+2*F]+=P*Oe,H(D,2*k+2*F),D[2*k+2*F+1]+=U*Oe,H(D,2*k+2*F+1),D[2*k+2*F+1]+=P*_e,H(D,2*k+2*F+1),D[2*k+2*F+2]+=U*_e,H(D,2*k+2*F+2)}for(k=0;k<N;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=N;k<2*N;k++)D[k]=0;return new c(D,0)};function H(O,N){for(;(O[N]&65535)!=O[N];)O[N+1]+=O[N]>>>16,O[N]&=65535,N++}function z(O,N){this.g=O,this.h=N}function X(O,N){if(M(N))throw Error("division by zero");if(M(O))return new z(E,E);if(B(O))return N=X(L(O),N),new z(L(N.g),L(N.h));if(B(N))return N=X(O,L(N)),new z(L(N.g),N.h);if(30<O.g.length){if(B(O)||B(N))throw Error("slowDivide_ only works with positive integers.");for(var D=A,k=N;0>=k.l(O);)D=Y(D),k=Y(k);var F=ue(D,1),U=ue(k,1);for(k=ue(k,2),D=ue(D,2);!M(k);){var P=U.add(k);0>=P.l(O)&&(F=F.add(D),U=P),k=ue(k,1),D=ue(D,1)}return N=G(O,F.j(N)),new z(F,N)}for(F=E;0<=O.l(N);){for(D=Math.max(1,Math.floor(O.m()/N.m())),k=Math.ceil(Math.log(D)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),U=h(D),P=U.j(N);B(P)||0<P.l(O);)D-=k,U=h(D),P=U.j(N);M(U)&&(U=A),F=F.add(U),O=G(O,P)}return new z(F,O)}n.A=function(O){return X(this,O).h},n.and=function(O){for(var N=Math.max(this.g.length,O.g.length),D=[],k=0;k<N;k++)D[k]=this.i(k)&O.i(k);return new c(D,this.h&O.h)},n.or=function(O){for(var N=Math.max(this.g.length,O.g.length),D=[],k=0;k<N;k++)D[k]=this.i(k)|O.i(k);return new c(D,this.h|O.h)},n.xor=function(O){for(var N=Math.max(this.g.length,O.g.length),D=[],k=0;k<N;k++)D[k]=this.i(k)^O.i(k);return new c(D,this.h^O.h)};function Y(O){for(var N=O.g.length+1,D=[],k=0;k<N;k++)D[k]=O.i(k)<<1|O.i(k-1)>>>31;return new c(D,O.h)}function ue(O,N){var D=N>>5;N%=32;for(var k=O.g.length-D,F=[],U=0;U<k;U++)F[U]=0<N?O.i(U+D)>>>N|O.i(U+D+1)<<32-N:O.i(U+D);return new c(F,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,kw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=_,yo=c}).apply(typeof YE<"u"?YE:typeof self<"u"?self:typeof window<"u"?window:{});var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mw,Yc,Uw,uh,cg,Vw,Lw,Ow;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,S,w){return m==Array.prototype||m==Object.prototype||(m[S]=w.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qd=="object"&&Qd];for(var S=0;S<m.length;++S){var w=m[S];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function r(m,S){if(S)e:{var w=i;m=m.split(".");for(var b=0;b<m.length-1;b++){var J=m[b];if(!(J in w))break e;w=w[J]}m=m[m.length-1],b=w[m],S=S(b),S!=b&&S!=null&&e(w,m,{configurable:!0,writable:!0,value:S})}}function a(m,S){m instanceof String&&(m+="");var w=0,b=!1,J={next:function(){if(!b&&w<m.length){var se=w++;return{value:S(se,m[se]),done:!1}}return b=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}r("Array.prototype.values",function(m){return m||function(){return a(this,function(S,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(m){var S=typeof m;return S=S!="object"?S:m?Array.isArray(m)?"array":S:"null",S=="array"||S=="object"&&typeof m.length=="number"}function h(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function _(m,S,w){return m.call.apply(m.bind,arguments)}function E(m,S,w){if(!m)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,b),m.apply(S,J)}}return function(){return m.apply(S,arguments)}}function A(m,S,w){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,A.apply(null,arguments)}function R(m,S){var w=Array.prototype.slice.call(arguments,1);return function(){var b=w.slice();return b.push.apply(b,arguments),m.apply(this,b)}}function M(m,S){function w(){}w.prototype=S.prototype,m.aa=S.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(b,J,se){for(var me=Array(arguments.length-2),st=2;st<arguments.length;st++)me[st-2]=arguments[st];return S.prototype[J].apply(b,me)}}function B(m){const S=m.length;if(0<S){const w=Array(S);for(let b=0;b<S;b++)w[b]=m[b];return w}return[]}function L(m,S){for(let w=1;w<arguments.length;w++){const b=arguments[w];if(f(b)){const J=m.length||0,se=b.length||0;m.length=J+se;for(let me=0;me<se;me++)m[J+me]=b[me]}else m.push(b)}}class G{constructor(S,w){this.i=S,this.j=w,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function H(m){return/^[\s\xa0]*$/.test(m)}function z(){var m=d.navigator;return m&&(m=m.userAgent)?m:""}function X(m){return X[" "](m),m}X[" "]=function(){};var Y=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ue(m,S,w){for(const b in m)S.call(w,m[b],b,m)}function O(m,S){for(const w in m)S.call(void 0,m[w],w,m)}function N(m){const S={};for(const w in m)S[w]=m[w];return S}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(m,S){let w,b;for(let J=1;J<arguments.length;J++){b=arguments[J];for(w in b)m[w]=b[w];for(let se=0;se<D.length;se++)w=D[se],Object.prototype.hasOwnProperty.call(b,w)&&(m[w]=b[w])}}function F(m){var S=1;m=m.split(":");const w=[];for(;0<S&&m.length;)w.push(m.shift()),S--;return m.length&&w.push(m.join(":")),w}function U(m){d.setTimeout(()=>{throw m},0)}function P(){var m=ze;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class _e{constructor(){this.h=this.g=null}add(S,w){const b=Oe.get();b.set(S,w),this.h?this.h.next=b:this.g=b,this.h=b}}var Oe=new G(()=>new ie,m=>m.reset());class ie{constructor(){this.next=this.g=this.h=null}set(S,w){this.h=S,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,we=!1,ze=new _e,V=()=>{const m=d.Promise.resolve(void 0);pe=()=>{m.then(ne)}};var ne=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(w){U(w)}var S=Oe;S.j(m),100>S.h&&(S.h++,m.next=S.g,S.g=m)}we=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ye=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};d.addEventListener("test",w,S),d.removeEventListener("test",w,S)}catch{}return m})();function Ce(m,S){if(le.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,b=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget){if(Y){e:{try{X(S.nodeName);var J=!0;break e}catch{}J=!1}J||(S=null)}}else w=="mouseover"?S=m.fromElement:w=="mouseout"&&(S=m.toElement);this.relatedTarget=S,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:xe[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ce.aa.h.call(this)}}M(Ce,le);var xe={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var vt="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function Ht(m,S,w,b,J){this.listener=m,this.proxy=null,this.src=S,this.type=w,this.capture=!!b,this.ha=J,this.key=++Ve,this.da=this.fa=!1}function Je(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Gt(m){this.src=m,this.g={},this.h=0}Gt.prototype.add=function(m,S,w,b,J){var se=m.toString();m=this.g[se],m||(m=this.g[se]=[],this.h++);var me=hi(m,S,b,J);return-1<me?(S=m[me],w||(S.fa=!1)):(S=new Ht(S,this.src,se,!!b,J),S.fa=w,m.push(S)),S};function Dn(m,S){var w=S.type;if(w in m.g){var b=m.g[w],J=Array.prototype.indexOf.call(b,S,void 0),se;(se=0<=J)&&Array.prototype.splice.call(b,J,1),se&&(Je(S),m.g[w].length==0&&(delete m.g[w],m.h--))}}function hi(m,S,w,b){for(var J=0;J<m.length;++J){var se=m[J];if(!se.da&&se.listener==S&&se.capture==!!w&&se.ha==b)return J}return-1}var Zn="closure_lm_"+(1e6*Math.random()|0),Qi={};function js(m,S,w,b,J){if(Array.isArray(S)){for(var se=0;se<S.length;se++)js(m,S[se],w,b,J);return null}return w=ms(w),m&&m[vt]?m.K(S,w,h(b)?!!b.capture:!1,J):kn(m,S,w,!1,b,J)}function kn(m,S,w,b,J,se){if(!S)throw Error("Invalid event type");var me=h(J)?!!J.capture:!!J,st=xi(m);if(st||(m[Zn]=st=new Gt(m)),w=st.add(S,w,b,me,se),w.proxy)return w;if(b=nt(),w.proxy=b,b.src=m,b.listener=w,m.addEventListener)ye||(J=me),J===void 0&&(J=!1),m.addEventListener(S.toString(),b,J);else if(m.attachEvent)m.attachEvent(ei(S.toString()),b);else if(m.addListener&&m.removeListener)m.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return w}function nt(){function m(w){return S.call(m.src,m.listener,w)}const S=kr;return m}function tn(m,S,w,b,J){if(Array.isArray(S))for(var se=0;se<S.length;se++)tn(m,S[se],w,b,J);else b=h(b)?!!b.capture:!!b,w=ms(w),m&&m[vt]?(m=m.i,S=String(S).toString(),S in m.g&&(se=m.g[S],w=hi(se,w,b,J),-1<w&&(Je(se[w]),Array.prototype.splice.call(se,w,1),se.length==0&&(delete m.g[S],m.h--)))):m&&(m=xi(m))&&(S=m.g[S.toString()],m=-1,S&&(m=hi(S,w,b,J)),(w=-1<m?S[m]:null)&&fi(w))}function fi(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[vt])Dn(S.i,m);else{var w=m.type,b=m.proxy;S.removeEventListener?S.removeEventListener(w,b,m.capture):S.detachEvent?S.detachEvent(ei(w),b):S.addListener&&S.removeListener&&S.removeListener(b),(w=xi(S))?(Dn(w,m),w.h==0&&(w.src=null,S[Zn]=null)):Je(m)}}}function ei(m){return m in Qi?Qi[m]:Qi[m]="on"+m}function kr(m,S){if(m.da)m=!0;else{S=new Ce(S,this);var w=m.listener,b=m.ha||m.src;m.fa&&fi(m),m=w.call(b,S)}return m}function xi(m){return m=m[Zn],m instanceof Gt?m:null}var Xi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ms(m){return typeof m=="function"?m:(m[Xi]||(m[Xi]=function(S){return m.handleEvent(S)}),m[Xi])}function xt(){ae.call(this),this.i=new Gt(this),this.M=this,this.F=null}M(xt,ae),xt.prototype[vt]=!0,xt.prototype.removeEventListener=function(m,S,w,b){tn(this,m,S,w,b)};function Xe(m,S){var w,b=m.F;if(b)for(w=[];b;b=b.F)w.push(b);if(m=m.M,b=S.type||S,typeof S=="string")S=new le(S,m);else if(S instanceof le)S.target=S.target||m;else{var J=S;S=new le(b,m),k(S,J)}if(J=!0,w)for(var se=w.length-1;0<=se;se--){var me=S.g=w[se];J=pt(me,b,!0,S)&&J}if(me=S.g=m,J=pt(me,b,!0,S)&&J,J=pt(me,b,!1,S)&&J,w)for(se=0;se<w.length;se++)me=S.g=w[se],J=pt(me,b,!1,S)&&J}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var m=this.i,S;for(S in m.g){for(var w=m.g[S],b=0;b<w.length;b++)Je(w[b]);delete m.g[S],m.h--}}this.F=null},xt.prototype.K=function(m,S,w,b){return this.i.add(String(m),S,!1,w,b)},xt.prototype.L=function(m,S,w,b){return this.i.add(String(m),S,!0,w,b)};function pt(m,S,w,b){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();for(var J=!0,se=0;se<S.length;++se){var me=S[se];if(me&&!me.da&&me.capture==w){var st=me.listener,nn=me.ha||me.src;me.fa&&Dn(m.i,me),J=st.call(nn,b)!==!1&&J}}return J&&!b.defaultPrevented}function Kt(m,S,w){if(typeof m=="function")w&&(m=A(m,w));else if(m&&typeof m.handleEvent=="function")m=A(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:d.setTimeout(m,S||0)}function Mr(m){m.g=Kt(()=>{m.g=null,m.i&&(m.i=!1,Mr(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class gs extends ae{constructor(S,w){super(),this.m=S,this.l=w,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Mr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(m){ae.call(this),this.h=m,this.g={}}M(Ri,ae);var bi=[];function Mn(m){ue(m.g,function(S,w){this.g.hasOwnProperty(w)&&fi(S)},m),m.g={}}Ri.prototype.N=function(){Ri.aa.N.call(this),Mn(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lt=d.JSON.stringify,ys=d.JSON.parse,Zi=class{stringify(m){return d.JSON.stringify(m,void 0)}parse(m){return d.JSON.parse(m,void 0)}};function es(){}es.prototype.h=null;function ts(m){return m.h||(m.h=m.i())}function Ni(){}var ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jn(){le.call(this,"d")}M(jn,le);function ns(){le.call(this,"c")}M(ns,le);var zn={},Pi=null;function Di(){return Pi=Pi||new xt}zn.La="serverreachability";function vs(m){le.call(this,zn.La,m)}M(vs,le);function ki(m){const S=Di();Xe(S,new vs(S))}zn.STAT_EVENT="statevent";function Ur(m,S){le.call(this,zn.STAT_EVENT,m),this.stat=S}M(Ur,le);function wt(m){const S=Di();Xe(S,new Ur(S,m))}zn.Ma="timingevent";function Dt(m,S){le.call(this,zn.Ma,m),this.size=S}M(Dt,le);function Be(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){m()},S)}function Fe(){this.g=!0}Fe.prototype.xa=function(){this.g=!1};function Ct(m,S,w,b,J,se){m.info(function(){if(m.g)if(se)for(var me="",st=se.split("&"),nn=0;nn<st.length;nn++){var rt=st[nn].split("=");if(1<rt.length){var hn=rt[0];rt=rt[1];var sn=hn.split("_");me=2<=sn.length&&sn[1]=="type"?me+(hn+"="+rt+"&"):me+(hn+"=redacted&")}}else me=null;else me=se;return"XMLHTTP REQ ("+b+") [attempt "+J+"]: "+S+`
`+w+`
`+me})}function Mt(m,S,w,b,J,se,me){m.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+J+"]: "+S+`
`+w+`
`+se+" "+me})}function mt(m,S,w,b){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+ct(m,w)+(b?" "+b:"")})}function An(m,S){m.info(function(){return"TIMEOUT: "+S})}Fe.prototype.info=function(){};function ct(m,S){if(!m.g)return S;if(!S)return null;try{var w=JSON.parse(S);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var b=w[m];if(!(2>b.length)){var J=b[1];if(Array.isArray(J)&&!(1>J.length)){var se=J[0];if(se!="noop"&&se!="stop"&&se!="close")for(var me=1;me<J.length;me++)J[me]=""}}}}return Lt(w)}catch{return S}}var ni={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Un={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function Sn(){}M(Sn,es),Sn.prototype.g=function(){return new XMLHttpRequest},Sn.prototype.i=function(){return{}},$n=new Sn;function Ot(m,S,w,b){this.j=m,this.i=S,this.l=w,this.R=b||1,this.U=new Ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _t}function _t(){this.i=null,this.g="",this.h=!1}var Vr={},Lr={};function pi(m,S,w){m.L=1,m.v=Re(I(S)),m.m=w,m.P=!0,is(m,null)}function is(m,S){m.F=Date.now(),zs(m),m.A=I(m.v);var w=m.A,b=m.R;Array.isArray(b)||(b=[String(b)]),$l(w.i,"t",b),m.C=0,w=m.j.J,m.h=new _t,m.g=$u(m.j,w?S:null,!m.m),0<m.O&&(m.M=new gs(A(m.Y,m,m.g),m.O)),S=m.U,w=m.g,b=m.ca;var J="readystatechange";Array.isArray(J)||(J&&(bi[0]=J.toString()),J=bi);for(var se=0;se<J.length;se++){var me=js(w,J[se],b||S.handleEvent,!1,S.h||S);if(!me)break;S.g[me.key]=me}S=m.H?N(m.H):{},m.m?(m.u||(m.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,S)):(m.u="GET",m.g.ea(m.A,m.u,null,S)),ki(),Ct(m.i,m.u,m.A,m.l,m.R,m.m)}Ot.prototype.ca=function(m){m=m.target;const S=this.M;S&&Li(m)==3?S.j():this.Y(m)},Ot.prototype.Y=function(m){try{if(m==this.g)e:{const sn=Li(this.g);var S=this.g.Ba();const nr=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Ou(this.g)))){this.J||sn!=4||S==7||(S==8||0>=nr?ki(3):ki(2)),mi(this);var w=this.g.Z();this.X=w;t:if(ga(this)){var b=Ou(this.g);m="";var J=b.length,se=Li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ft(this),ss(this);var me="";break t}this.h.i=new d.TextDecoder}for(S=0;S<J;S++)this.h.h=!0,m+=this.h.i.decode(b[S],{stream:!(se&&S==J-1)});b.length=0,this.h.g+=m,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=w==200,Mt(this.i,this.u,this.A,this.l,this.R,sn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var st,nn=this.g;if((st=nn.g?nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(st)){var rt=st;break t}}rt=null}if(w=rt)mt(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Or(this,w);else{this.o=!1,this.s=3,wt(12),Ft(this),ss(this);break e}}if(this.P){w=!0;let wn;for(;!this.J&&this.C<me.length;)if(wn=ya(this,me),wn==Lr){sn==4&&(this.s=4,wt(14),w=!1),mt(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==Vr){this.s=4,wt(15),mt(this.i,this.l,me,"[Invalid Chunk]"),w=!1;break}else mt(this.i,this.l,wn,null),Or(this,wn);if(ga(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||me.length!=0||this.h.h||(this.s=1,wt(16),w=!1),this.o=this.o&&w,!w)mt(this.i,this.l,me,"[Invalid Chunked Response]"),Ft(this),ss(this);else if(0<me.length&&!this.W){this.W=!0;var hn=this.j;hn.g==this&&hn.ba&&!hn.M&&(hn.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),Fo(hn),hn.M=!0,wt(11))}}else mt(this.i,this.l,me,null),Or(this,me);sn==4&&Ft(this),this.o&&!this.J&&(sn==4?Gu(this.j,this):(this.o=!1,zs(this)))}else Lf(this.g),w==400&&0<me.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Ft(this),ss(this)}}}catch{}finally{}};function ga(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function ya(m,S){var w=m.C,b=S.indexOf(`
`,w);return b==-1?Lr:(w=Number(S.substring(w,b)),isNaN(w)?Vr:(b+=1,b+w>S.length?Lr:(S=S.slice(b,b+w),m.C=b+w,S)))}Ot.prototype.cancel=function(){this.J=!0,Ft(this)};function zs(m){m.S=Date.now()+m.I,jl(m,m.I)}function jl(m,S){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Be(A(m.ba,m),S)}function mi(m){m.B&&(d.clearTimeout(m.B),m.B=null)}Ot.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(An(this.i,this.A),this.L!=2&&(ki(),wt(17)),Ft(this),this.s=2,ss(this)):jl(this,this.S-m)};function ss(m){m.j.G==0||m.J||Gu(m.j,m)}function Ft(m){mi(m);var S=m.M;S&&typeof S.ma=="function"&&S.ma(),m.M=null,Mn(m.U),m.g&&(S=m.g,m.g=null,S.abort(),S.ma())}function Or(m,S){try{var w=m.j;if(w.G!=0&&(w.g==m||ii(w.h,m))){if(!m.K&&ii(w.h,m)&&w.G==3){try{var b=w.Da.g.parse(S)}catch{b=null}if(Array.isArray(b)&&b.length==3){var J=b;if(J[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)Ca(w),Sa(w);else break e;Ql(w),wt(18)}}else w.za=J[1],0<w.za-w.T&&37500>J[2]&&w.F&&w.v==0&&!w.C&&(w.C=Be(A(w.Za,w),6e3));if(1>=Ks(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else tr(w,11)}else if((m.K||w.g==m)&&Ca(w),!H(S))for(J=w.Da.g.parse(S),S=0;S<J.length;S++){let rt=J[S];if(w.T=rt[0],rt=rt[1],w.G==2)if(rt[0]=="c"){w.K=rt[1],w.ia=rt[2];const hn=rt[3];hn!=null&&(w.la=hn,w.j.info("VER="+w.la));const sn=rt[4];sn!=null&&(w.Aa=sn,w.j.info("SVER="+w.Aa));const nr=rt[5];nr!=null&&typeof nr=="number"&&0<nr&&(b=1.5*nr,w.L=b,w.j.info("backChannelRequestTimeoutMs_="+b)),b=w;const wn=m.g;if(wn){const Cs=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var se=b.h;se.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(Ys(se,se.h),se.h=null))}if(b.D){const Zl=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zl&&(b.ya=Zl,Ee(b.I,b.D,Zl))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),b=w;var me=m;if(b.qa=zu(b,b.J?b.ia:null,b.W),me.K){Rt(b.h,me);var st=me,nn=b.L;nn&&(st.I=nn),st.B&&(mi(st),zs(st)),b.g=me}else Bu(b);0<w.i.length&&wa(w)}else rt[0]!="stop"&&rt[0]!="close"||tr(w,7);else w.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?tr(w,7):Jl(w):rt[0]!="noop"&&w.l&&w.l.ta(rt),w.v=0)}}ki(4)}catch{}}var $s=class{constructor(m,S){this.g=m,this.map=S}};function gi(m){this.l=m||10,d.PerformanceNavigationTiming?(m=d.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vn(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ks(m){return m.h?1:m.g?m.g.size:0}function ii(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function Ys(m,S){m.g?m.g.add(S):m.h=S}function Rt(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}gi.prototype.cancel=function(){if(this.i=Fr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Fr(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const w of m.g.values())S=S.concat(w.D);return S}return B(m.i)}function Uu(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(f(m)){for(var S=[],w=m.length,b=0;b<w;b++)S.push(m[b]);return S}S=[],w=0;for(b in m)S[w++]=m[b];return S}function Js(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(f(m)||typeof m=="string"){var S=[];m=m.length;for(var w=0;w<m;w++)S.push(w);return S}S=[],w=0;for(const b in m)S[w++]=b;return S}}}function Po(m,S){if(m.forEach&&typeof m.forEach=="function")m.forEach(S,void 0);else if(f(m)||typeof m=="string")Array.prototype.forEach.call(m,S,void 0);else for(var w=Js(m),b=Uu(m),J=b.length,se=0;se<J;se++)S.call(void 0,b[se],w&&w[se],m)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qr(m,S){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var b=m[w].indexOf("="),J=null;if(0<=b){var se=m[w].substring(0,b);J=m[w].substring(b+1)}else se=m[w];S(se,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function bt(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof bt){this.h=m.h,Q(this,m.j),this.o=m.o,this.g=m.g,fe(this,m.s),this.l=m.l;var S=m.i,w=new Qs;w.i=S.i,S.g&&(w.g=new Map(S.g),w.h=S.h),Ie(this,w),this.m=m.m}else m&&(S=String(m).match(Ws))?(this.h=!1,Q(this,S[1]||"",!0),this.o=Ze(S[2]||""),this.g=Ze(S[3]||"",!0),fe(this,S[4]),this.l=Ze(S[5]||"",!0),Ie(this,S[6]||"",!0),this.m=Ze(S[7]||"")):(this.h=!1,this.i=new Qs(null,this.h))}bt.prototype.toString=function(){var m=[],S=this.j;S&&m.push(Mi(S,Do,!0),":");var w=this.g;return(w||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Mi(S,Do,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Mi(w,w.charAt(0)=="/"?Uf:zl,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Mi(w,va)),m.join("")};function I(m){return new bt(m)}function Q(m,S,w){m.j=w?Ze(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function fe(m,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);m.s=S}else m.s=null}function Ie(m,S,w){S instanceof Qs?(m.i=S,Vu(m.i,m.h)):(w||(S=Mi(S,Vf)),m.i=new Qs(S,m.h))}function Ee(m,S,w){m.i.set(S,w)}function Re(m){return Ee(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ze(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Mi(m,S,w){return typeof m=="string"?(m=encodeURI(m).replace(S,Yt),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Yt(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Do=/[#\/\?@]/g,zl=/[#\?:]/g,Uf=/[#\?]/g,Vf=/[#\?@]/g,va=/#/g;function Qs(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Ui(m){m.g||(m.g=new Map,m.h=0,m.i&&qr(m.i,function(S,w){m.add(decodeURIComponent(S.replace(/\+/g," ")),w)}))}n=Qs.prototype,n.add=function(m,S){Ui(this),this.i=null,m=_s(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(S),this.h+=1,this};function Xs(m,S){Ui(m),S=_s(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function Zs(m,S){return Ui(m),S=_s(m,S),m.g.has(S)}n.forEach=function(m,S){Ui(this),this.g.forEach(function(w,b){w.forEach(function(J){m.call(S,J,b,this)},this)},this)},n.na=function(){Ui(this);const m=Array.from(this.g.values()),S=Array.from(this.g.keys()),w=[];for(let b=0;b<S.length;b++){const J=m[b];for(let se=0;se<J.length;se++)w.push(S[b])}return w},n.V=function(m){Ui(this);let S=[];if(typeof m=="string")Zs(this,m)&&(S=S.concat(this.g.get(_s(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)S=S.concat(m[w])}return S},n.set=function(m,S){return Ui(this),this.i=null,m=_s(this,m),Zs(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},n.get=function(m,S){return m?(m=this.V(m),0<m.length?String(m[0]):S):S};function $l(m,S,w){Xs(m,S),0<w.length&&(m.i=null,m.g.set(_s(m,S),B(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(var w=0;w<S.length;w++){var b=S[w];const se=encodeURIComponent(String(b)),me=this.V(b);for(b=0;b<me.length;b++){var J=se;me[b]!==""&&(J+="="+encodeURIComponent(String(me[b]))),m.push(J)}}return this.i=m.join("&")};function _s(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function Vu(m,S){S&&!m.j&&(Ui(m),m.i=null,m.g.forEach(function(w,b){var J=b.toLowerCase();b!=J&&(Xs(this,b),$l(this,J,w))},m)),m.j=S}function ko(m,S){const w=new Fe;if(d.Image){const b=new Image;b.onload=R(Vi,w,"TestLoadImage: loaded",!0,S,b),b.onerror=R(Vi,w,"TestLoadImage: error",!1,S,b),b.onabort=R(Vi,w,"TestLoadImage: abort",!1,S,b),b.ontimeout=R(Vi,w,"TestLoadImage: timeout",!1,S,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=m}else S(!1)}function rs(m,S){const w=new Fe,b=new AbortController,J=setTimeout(()=>{b.abort(),Vi(w,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:b.signal}).then(se=>{clearTimeout(J),se.ok?Vi(w,"TestPingServer: ok",!0,S):Vi(w,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(J),Vi(w,"TestPingServer: error",!1,S)})}function Vi(m,S,w,b,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),b(w)}catch{}}function Mo(){this.g=new Zi}function Ts(m,S,w){const b=w||"";try{Po(m,function(J,se){let me=J;h(J)&&(me=Lt(J)),S.push(b+se+"="+encodeURIComponent(me))})}catch(J){throw S.push(b+"type="+encodeURIComponent("_badmap")),J}}function Br(m){this.l=m.Ub||null,this.j=m.eb||!1}M(Br,es),Br.prototype.g=function(){return new er(this.l,this.j)},Br.prototype.i=(function(m){return function(){return m}})({});function er(m,S){xt.call(this),this.D=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(er,xt),n=er.prototype,n.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=S,this.readyState=1,As(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(S.body=m),(this.D||d).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kl(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kl(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Es(this):As(this),this.readyState==3&&Kl(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,Es(this))},n.Qa=function(m){this.g&&(this.response=m,Es(this))},n.ga=function(){this.g&&Es(this)};function Es(m){m.readyState=4,m.l=null,m.j=null,m.v=null,As(m)}n.setRequestHeader=function(m,S){this.u.append(m,S)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var w=S.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=S.next();return m.join(`\r
`)};function As(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Yl(m){let S="";return ue(m,function(w,b){S+=b,S+=":",S+=w,S+=`\r
`}),S}function dn(m,S,w){e:{for(b in w){var b=!1;break e}b=!0}b||(w=Yl(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):Ee(m,S,w))}function ft(m){xt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(ft,xt);var _a=/^https?$/i,Uo=["POST","PUT"];n=ft.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,S,w,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?ts(this.o):ts($n),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(se){Lu(this,se);return}if(m=w||"",w=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var J in b)w.set(J,b[J]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const se of b.keys())w.set(se,b.get(se));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(w.keys()).find(se=>se.toLowerCase()=="content-type"),J=d.FormData&&m instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Uo,S,void 0))||b||J||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,me]of w)this.g.setRequestHeader(se,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vo(this),this.u=!0,this.g.send(m),this.u=!1}catch(se){Lu(this,se)}};function Lu(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.m=5,Ta(m),Ss(m)}function Ta(m){m.A||(m.A=!0,Xe(m,"complete"),Xe(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Xe(this,"complete"),Xe(this,"abort"),Ss(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ss(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ea(this):this.bb())},n.bb=function(){Ea(this)};function Ea(m){if(m.h&&typeof c<"u"&&(!m.v[1]||Li(m)!=4||m.Z()!=2)){if(m.u&&Li(m)==4)Kt(m.Ea,0,m);else if(Xe(m,"readystatechange"),Li(m)==4){m.h=!1;try{const me=m.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var w;if(!(w=S)){var b;if(b=me===0){var J=String(m.D).match(Ws)[1]||null;!J&&d.self&&d.self.location&&(J=d.self.location.protocol.slice(0,-1)),b=!_a.test(J?J.toLowerCase():"")}w=b}if(w)Xe(m,"complete"),Xe(m,"success");else{m.m=6;try{var se=2<Li(m)?m.g.statusText:""}catch{se=""}m.l=se+" ["+m.Z()+"]",Ta(m)}}finally{Ss(m)}}}}function Ss(m,S){if(m.g){Vo(m);const w=m.g,b=m.v[0]?()=>{}:null;m.g=null,m.v=null,S||Xe(m,"ready");try{w.onreadystatechange=b}catch{}}}function Vo(m){m.I&&(d.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Li(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Li(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),ys(S)}};function Ou(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Lf(m){const S={};m=(m.g&&2<=Li(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<m.length;b++){if(H(m[b]))continue;var w=F(m[b]);const J=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const se=S[J]||[];S[J]=se,se.push(w)}O(S,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lo(m,S,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||S}function Aa(m){this.Aa=0,this.i=[],this.j=new Fe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lo("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lo("baseRetryDelayMs",5e3,m),this.cb=Lo("retryDelaySeedMs",1e4,m),this.Wa=Lo("forwardChannelMaxRetries",2,m),this.wa=Lo("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new gi(m&&m.concurrentRequestLimit),this.Da=new Mo,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Aa.prototype,n.la=8,n.G=1,n.connect=function(m,S,w,b){wt(0),this.W=m,this.H=S||{},w&&b!==void 0&&(this.H.OSID=w,this.H.OAID=b),this.F=this.X,this.I=zu(this,null,this.W),wa(this)};function Jl(m){if(Fu(m),m.G==3){var S=m.U++,w=I(m.I);if(Ee(w,"SID",m.K),Ee(w,"RID",S),Ee(w,"TYPE","terminate"),Oo(m,w),S=new Ot(m,m.j,S),S.L=2,S.v=Re(I(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(S.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=S.v,w=!0),w||(S.g=$u(S.j,null),S.g.ea(S.v)),S.F=Date.now(),zs(S)}ju(m)}function Sa(m){m.g&&(Fo(m),m.g.cancel(),m.g=null)}function Fu(m){Sa(m),m.u&&(d.clearTimeout(m.u),m.u=null),Ca(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&d.clearTimeout(m.s),m.s=null)}function wa(m){if(!Vn(m.h)&&!m.s){m.s=!0;var S=m.Ga;pe||V(),we||(pe(),we=!0),ze.add(S,m),m.B=0}}function Of(m,S){return Ks(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=S.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Be(A(m.Ga,m,S),Xl(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const J=new Ot(this,this.j,m);let se=this.o;if(this.S&&(se?(se=N(se),k(se,this.S)):se=this.S),this.m!==null||this.O||(J.H=se,se=null),this.P)e:{for(var S=0,w=0;w<this.i.length;w++){t:{var b=this.i[w];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(S+=b,4096<S){S=w;break e}if(S===4096||w===this.i.length-1){S=w+1;break e}}S=1e3}else S=1e3;S=qu(this,J,S),w=I(this.I),Ee(w,"RID",m),Ee(w,"CVER",22),this.D&&Ee(w,"X-HTTP-Session-Id",this.D),Oo(this,w),se&&(this.O?S="headers="+encodeURIComponent(String(Yl(se)))+"&"+S:this.m&&dn(w,this.m,se)),Ys(this.h,J),this.Ua&&Ee(w,"TYPE","init"),this.P?(Ee(w,"$req",S),Ee(w,"SID","null"),J.T=!0,pi(J,w,null)):pi(J,w,S),this.G=2}}else this.G==3&&(m?Wl(this,m):this.i.length==0||Vn(this.h)||Wl(this))};function Wl(m,S){var w;S?w=S.l:w=m.U++;const b=I(m.I);Ee(b,"SID",m.K),Ee(b,"RID",w),Ee(b,"AID",m.T),Oo(m,b),m.m&&m.o&&dn(b,m.m,m.o),w=new Ot(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),S&&(m.i=S.D.concat(m.i)),S=qu(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Ys(m.h,w),pi(w,b,S)}function Oo(m,S){m.H&&ue(m.H,function(w,b){Ee(S,b,w)}),m.l&&Po({},function(w,b){Ee(S,b,w)})}function qu(m,S,w){w=Math.min(m.i.length,w);var b=m.l?A(m.l.Na,m.l,m):null;e:{var J=m.i;let se=-1;for(;;){const me=["count="+w];se==-1?0<w?(se=J[0].g,me.push("ofs="+se)):se=0:me.push("ofs="+se);let st=!0;for(let nn=0;nn<w;nn++){let rt=J[nn].g;const hn=J[nn].map;if(rt-=se,0>rt)se=Math.max(0,J[nn].g-100),st=!1;else try{Ts(hn,me,"req"+rt+"_")}catch{b&&b(hn)}}if(st){b=me.join("&");break e}}}return m=m.i.splice(0,w),S.D=m,b}function Bu(m){if(!m.g&&!m.u){m.Y=1;var S=m.Fa;pe||V(),we||(pe(),we=!0),ze.add(S,m),m.v=0}}function Ql(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Be(A(m.Fa,m),Xl(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Hu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Be(A(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Sa(this),Hu(this))};function Fo(m){m.A!=null&&(d.clearTimeout(m.A),m.A=null)}function Hu(m){m.g=new Ot(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var S=I(m.qa);Ee(S,"RID","rpc"),Ee(S,"SID",m.K),Ee(S,"AID",m.T),Ee(S,"CI",m.F?"0":"1"),!m.F&&m.ja&&Ee(S,"TO",m.ja),Ee(S,"TYPE","xmlhttp"),Oo(m,S),m.m&&m.o&&dn(S,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=Re(I(S)),w.m=null,w.P=!0,is(w,m)}n.Za=function(){this.C!=null&&(this.C=null,Sa(this),Ql(this),wt(19))};function Ca(m){m.C!=null&&(d.clearTimeout(m.C),m.C=null)}function Gu(m,S){var w=null;if(m.g==S){Ca(m),Fo(m),m.g=null;var b=2}else if(ii(m.h,S))w=S.D,Rt(m.h,S),b=1;else return;if(m.G!=0){if(S.o)if(b==1){w=S.m?S.m.length:0,S=Date.now()-S.F;var J=m.B;b=Di(),Xe(b,new Dt(b,w)),wa(m)}else Bu(m);else if(J=S.s,J==3||J==0&&0<S.X||!(b==1&&Of(m,S)||b==2&&Ql(m)))switch(w&&0<w.length&&(S=m.h,S.i=S.i.concat(w)),J){case 1:tr(m,5);break;case 4:tr(m,10);break;case 3:tr(m,6);break;default:tr(m,2)}}}function Xl(m,S){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*S}function tr(m,S){if(m.j.info("Error code "+S),S==2){var w=A(m.fb,m),b=m.Xa;const J=!b;b=new bt(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Q(b,"https"),Re(b),J?ko(b.toString(),w):rs(b.toString(),w)}else wt(2);m.G=0,m.l&&m.l.sa(S),ju(m),Fu(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function ju(m){if(m.G=0,m.ka=[],m.l){const S=Fr(m.h);(S.length!=0||m.i.length!=0)&&(L(m.ka,S),L(m.ka,m.i),m.h.i.length=0,B(m.i),m.i.length=0),m.l.ra()}}function zu(m,S,w){var b=w instanceof bt?I(w):new bt(w);if(b.g!="")S&&(b.g=S+"."+b.g),fe(b,b.s);else{var J=d.location;b=J.protocol,S=S?S+"."+J.hostname:J.hostname,J=+J.port;var se=new bt(null);b&&Q(se,b),S&&(se.g=S),J&&fe(se,J),w&&(se.l=w),b=se}return w=m.D,S=m.ya,w&&S&&Ee(b,w,S),Ee(b,"VER",m.la),Oo(m,b),b}function $u(m,S,w){if(S&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Ca&&!m.pa?new ft(new Br({eb:w})):new ft(m.pa),S.Ha(m.J),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ku(){}n=Ku.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ia(){}Ia.prototype.g=function(m,S){return new Kn(m,S)};function Kn(m,S){xt.call(this),this.g=new Aa(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(m?m["X-WebChannel-Client-Profile"]=S.va:m={"X-WebChannel-Client-Profile":S.va}),this.g.S=m,(m=S&&S.Sb)&&!H(m)&&(this.g.m=m),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!H(S)&&(this.g.D=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new ws(this)}M(Kn,xt),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){Jl(this.g)},Kn.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=Lt(m),m=w);S.i.push(new $s(S.Ya++,m)),S.G==3&&wa(S)},Kn.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,Kn.aa.N.call(this)};function Yu(m){jn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const w in S){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}M(Yu,jn);function Ju(){ns.call(this),this.status=1}M(Ju,ns);function ws(m){this.g=m}M(ws,Ku),ws.prototype.ua=function(){Xe(this.g,"a")},ws.prototype.ta=function(m){Xe(this.g,new Yu(m))},ws.prototype.sa=function(m){Xe(this.g,new Ju)},ws.prototype.ra=function(){Xe(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,Ow=function(){return new Ia},Lw=function(){return Di()},Vw=zn,cg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ni.NO_ERROR=0,ni.TIMEOUT=8,ni.HTTP_ERROR=6,uh=ni,Un.COMPLETE="complete",Uw=Un,Ni.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Yc=Ni,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,Mw=ft}).apply(typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{});const JE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new qg("@firebase/firestore");function tl(){return oa.logLevel}function Te(n,...e){if(oa.logLevel<=et.DEBUG){const t=e.map(ny);oa.debug(`Firestore (${kl}): ${n}`,...t)}}function br(n,...e){if(oa.logLevel<=et.ERROR){const t=e.map(ny);oa.error(`Firestore (${kl}): ${n}`,...t)}}function aa(n,...e){if(oa.logLevel<=et.WARN){const t=e.map(ny);oa.warn(`Firestore (${kl}): ${n}`,...t)}}function ny(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n="Unexpected state"){const e=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function lt(n,e){n||ke()}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Bs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qn.UNAUTHENTICATED)))}shutdown(){}}class sD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rD{constructor(e){this.t=e,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0);let i=this.i;const r=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new Ms;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ms,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},d=f=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ms)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string"),new Fw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new qn(e)}}class oD{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class aD{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new oD(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(qn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){lt(this.o===void 0);const i=a=>{a.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?r(a):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(lt(typeof t.token=="string"),this.R=t.token,new lD(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=uD(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%e.length))}return i}}function it(n,e){return n<e?-1:n>e?1:0}function Al(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{static now(){return en.fromMillis(Date.now())}static fromDate(e){return en.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new en(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new en(0,0))}static max(){return new Ue(new en(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,t,i){t===void 0?t=0:t>e.length&&ke(),i===void 0?i=e.length-t:i>e.length-t&&ke(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ps.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Ps.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=Ps.isNumericId(e),r=Ps.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Ps.extractNumericId(e).compare(Ps.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yo.fromString(e.substring(4,e.length-2))}}class St extends Ps{construct(e,t,i){return new St(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const dD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends Ps{construct(e,t,i){return new vn(e,t,i)}static isValidIdentifier(e){return dD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vn(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new ge(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ge(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else d==="`"?(c=!c,r++):d!=="."||c?(i+=d,r++):(a(),r++)}if(a(),c)throw new ge(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(t)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(St.fromString(e))}static fromName(e){return new Ne(St.fromString(e).popFirst(5))}static empty(){return new Ne(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new St(e.slice()))}}function hD(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ue.fromTimestamp(i===1e9?new en(t+1,0):new en(t,i));return new To(r,Ne.empty(),e)}function fD(n){return new To(n.readTime,n.key,-1)}class To{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new To(Ue.min(),Ne.empty(),-1)}static max(){return new To(Ue.max(),Ne.empty(),-1)}}function pD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:it(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==mD)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):he.reject(t)}static resolve(e){return new he(((t,i)=>{t(e)}))}static reject(e){return new he(((t,i)=>{i(e)}))}static waitFor(e){return new he(((t,i)=>{let r=0,a=0,c=!1;e.forEach((d=>{++r,d.next((()=>{++a,c&&a===r&&t()}),(f=>i(f)))})),c=!0,a===r&&t()}))}static or(e){let t=he.resolve(!1);for(const i of e)t=t.next((r=>r?he.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new he(((i,r)=>{const a=e.length,c=new Array(a);let d=0;for(let f=0;f<a;f++){const h=f;t(e[h]).next((_=>{c[h]=_,++d,d===a&&i(c)}),(_=>r(_)))}}))}static doWhile(e,t){return new he(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function yD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ul(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tf.oe=-1;function Iu(n){return n==null}function Ih(n){return n===0&&1/n==-1/0}function vD(n){return typeof n=="number"&&Number.isInteger(n)&&!Ih(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=WE(e)),e=TD(n.get(t),e);return WE(e)}function TD(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function WE(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ro(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Bw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,t){this.comparator=e,this.root=t||Rn.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xd(this.root,e,this.comparator,!0)}}class Xd{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rn{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??Rn.RED,this.left=r??Rn.EMPTY,this.right=a??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new Rn(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Rn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const e=this.left.check();if(e!==this.right.check())throw ke();return e+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(e,t,i,r,a){return this}insert(e,t,i){return new Rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new XE(this.data.getIterator())}getIteratorFrom(e){return new XE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class XE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new Ci([])}unionWith(e){let t=new ln(vn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Hw("Invalid base64 string: "+a):a}})(e);return new Tn(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a})(e);return new Tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const ED=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eo(n){if(lt(!!n),typeof n=="string"){let e=0;const t=ED.exec(n);if(lt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$t(n.seconds),nanos:$t(n.nanos)}}function $t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ao(n){return typeof n=="string"?Tn.fromBase64String(n):Tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function sf(n){const e=n.mapValue.fields.__previous_value__;return nf(e)?sf(e):e}function hu(n){const e=Eo(n.mapValue.fields.__local_write_time__.timestampValue);return new en(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t,i,r,a,c,d,f,h){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=h}}class Sl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd={mapValue:{}};function So(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nf(n)?4:wD(n)?9007199254740991:SD(n)?10:11:ke()}function Fs(n,e){if(n===e)return!0;const t=So(n);if(t!==So(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hu(n).isEqual(hu(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Eo(r.timestampValue),d=Eo(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return Ao(r.bytesValue).isEqual(Ao(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return $t(r.geoPointValue.latitude)===$t(a.geoPointValue.latitude)&&$t(r.geoPointValue.longitude)===$t(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return $t(r.integerValue)===$t(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=$t(r.doubleValue),d=$t(a.doubleValue);return c===d?Ih(c)===Ih(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Al(n.arrayValue.values||[],e.arrayValue.values||[],Fs);case 10:case 11:return(function(r,a){const c=r.mapValue.fields||{},d=a.mapValue.fields||{};if(QE(c)!==QE(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!Fs(c[f],d[f])))return!1;return!0})(n,e);default:return ke()}}function fu(n,e){return(n.values||[]).find((t=>Fs(t,e)))!==void 0}function wl(n,e){if(n===e)return 0;const t=So(n),i=So(e);if(t!==i)return it(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const d=$t(a.integerValue||a.doubleValue),f=$t(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return ZE(n.timestampValue,e.timestampValue);case 4:return ZE(hu(n),hu(e));case 5:return it(n.stringValue,e.stringValue);case 6:return(function(a,c){const d=Ao(a),f=Ao(c);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const d=a.split("/"),f=c.split("/");for(let h=0;h<d.length&&h<f.length;h++){const _=it(d[h],f[h]);if(_!==0)return _}return it(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const d=it($t(a.latitude),$t(c.latitude));return d!==0?d:it($t(a.longitude),$t(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return e0(n.arrayValue,e.arrayValue);case 10:return(function(a,c){var d,f,h,_;const E=a.fields||{},A=c.fields||{},R=(d=E.value)===null||d===void 0?void 0:d.arrayValue,M=(f=A.value)===null||f===void 0?void 0:f.arrayValue,B=it(((h=R?.values)===null||h===void 0?void 0:h.length)||0,((_=M?.values)===null||_===void 0?void 0:_.length)||0);return B!==0?B:e0(R,M)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Zd.mapValue&&c===Zd.mapValue)return 0;if(a===Zd.mapValue)return 1;if(c===Zd.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),h=c.fields||{},_=Object.keys(h);f.sort(),_.sort();for(let E=0;E<f.length&&E<_.length;++E){const A=it(f[E],_[E]);if(A!==0)return A;const R=wl(d[f[E]],h[_[E]]);if(R!==0)return R}return it(f.length,_.length)})(n.mapValue,e.mapValue);default:throw ke()}}function ZE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return it(n,e);const t=Eo(n),i=Eo(e),r=it(t.seconds,i.seconds);return r!==0?r:it(t.nanos,i.nanos)}function e0(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=wl(t[r],i[r]);if(a)return a}return it(t.length,i.length)}function Cl(n){return ug(n)}function ug(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Eo(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ao(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=ug(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const c of i)a?a=!1:r+=",",r+=`${c}:${ug(t.fields[c])}`;return r+"}"})(n.mapValue):ke()}function dh(n){switch(So(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sf(n);return e?16+dh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ao(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+dh(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Ro(i.fields,((a,c)=>{r+=a.length+dh(c)})),r})(n.mapValue);default:throw ke()}}function xh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dg(n){return!!n&&"integerValue"in n}function sy(n){return!!n&&"arrayValue"in n}function t0(n){return!!n&&"nullValue"in n}function n0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hh(n){return!!n&&"mapValue"in n}function SD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function iu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ro(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=iu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=iu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(t)}setAll(e){let t=vn.emptyPath(),i={},r=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,r),i={},r=[],t=d.popLast()}c?i[d.lastSegment()]=iu(c):r.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];hh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ro(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new Wn(iu(this.value))}}function Gw(n){const e=[];return Ro(n.fields,((t,i)=>{const r=new vn([t]);if(hh(i)){const a=Gw(i.mapValue).fields;if(a.length===0)e.push(r);else for(const c of a)e.push(r.child(c))}else e.push(r)})),new Ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t,i,r,a,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new yn(e,0,Ue.min(),Ue.min(),Ue.min(),Wn.empty(),0)}static newFoundDocument(e,t,i,r){return new yn(e,1,t,Ue.min(),i,r,0)}static newNoDocument(e,t){return new yn(e,2,t,Ue.min(),Ue.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,Ue.min(),Ue.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){this.position=e,this.inclusive=t}}function i0(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],c=n.position[r];if(a.field.isKeyField()?i=Ne.comparator(Ne.fromName(c.referenceValue),t.key):i=wl(c,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function s0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t="asc"){this.field=e,this.dir=t}}function CD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{}class Zt extends jw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new xD(e,t,i):t==="array-contains"?new ND(e,i):t==="in"?new PD(e,i):t==="not-in"?new DD(e,i):t==="array-contains-any"?new kD(e,i):new Zt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new RD(e,i):new bD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(wl(t,this.value)):t!==null&&So(this.value)===So(t)&&this.matchesComparison(wl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hs extends jw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new hs(e,t)}matches(e){return zw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zw(n){return n.op==="and"}function $w(n){return ID(n)&&zw(n)}function ID(n){for(const e of n.filters)if(e instanceof hs)return!1;return!0}function hg(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+Cl(n.value);if($w(n))return n.filters.map((e=>hg(e))).join(",");{const e=n.filters.map((t=>hg(t))).join(",");return`${n.op}(${e})`}}function Kw(n,e){return n instanceof Zt?(function(i,r){return r instanceof Zt&&i.op===r.op&&i.field.isEqual(r.field)&&Fs(i.value,r.value)})(n,e):n instanceof hs?(function(i,r){return r instanceof hs&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,c,d)=>a&&Kw(c,r.filters[d])),!0):!1})(n,e):void ke()}function Yw(n){return n instanceof Zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Cl(t.value)}`})(n):n instanceof hs?(function(t){return t.op.toString()+" {"+t.getFilters().map(Yw).join(" ,")+"}"})(n):"Filter"}class xD extends Zt{constructor(e,t,i){super(e,t,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class RD extends Zt{constructor(e,t){super(e,"in",t),this.keys=Jw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class bD extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=Jw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ne.fromName(i.referenceValue)))}class ND extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sy(t)&&fu(t.arrayValue,this.value)}}class PD extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fu(this.value.arrayValue,t)}}class DD extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!fu(this.value.arrayValue,t)}}class kD extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>fu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,t=null,i=[],r=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=c,this.endAt=d,this.ue=null}}function r0(n,e=null,t=[],i=[],r=null,a=null,c=null){return new MD(n,e,t,i,r,a,c)}function ry(n){const e=qe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>hg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Iu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Cl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Cl(i))).join(",")),e.ue=t}return e.ue}function oy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!CD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Kw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!s0(n.startAt,e.startAt)&&s0(n.endAt,e.endAt)}function fg(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,t=null,i=[],r=[],a=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UD(n,e,t,i,r,a,c,d){return new Vl(n,e,t,i,r,a,c,d)}function rf(n){return new Vl(n)}function o0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ay(n){return n.collectionGroup!==null}function fl(n){const e=qe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new ln(vn.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Rh(a,i))})),t.has(vn.keyField().canonicalString())||e.ce.push(new Rh(vn.keyField(),i))}return e.ce}function Us(n){const e=qe(n);return e.le||(e.le=VD(e,fl(n))),e.le}function VD(n,e){if(n.limitType==="F")return r0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new Rh(r.field,a)}));const t=n.endAt?new Il(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Il(n.startAt.position,n.startAt.inclusive):null;return r0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function pg(n,e){const t=n.filters.concat([e]);return new Vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bh(n,e,t){return new Vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function of(n,e){return oy(Us(n),Us(e))&&n.limitType===e.limitType}function Ww(n){return`${ry(Us(n))}|lt:${n.limitType}`}function nl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>Yw(r))).join(", ")}]`),Iu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Cl(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Cl(r))).join(",")),`Target(${i})`})(Us(n))}; limitType=${n.limitType})`}function af(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ne.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of fl(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(c,d,f){const h=i0(c,d,f);return c.inclusive?h<=0:h<0})(i.startAt,fl(i),r)||i.endAt&&!(function(c,d,f){const h=i0(c,d,f);return c.inclusive?h>=0:h>0})(i.endAt,fl(i),r))})(n,e)}function LD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Qw(n){return(e,t)=>{let i=!1;for(const r of fl(n)){const a=OD(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function OD(n,e,t){const i=n.field.isKeyField()?Ne.comparator(e.key,t.key):(function(a,c,d){const f=c.data.field(a),h=d.data.field(a);return f!==null&&h!==null?wl(f,h):ke()})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ro(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return Bw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new Vt(Ne.comparator);function Nr(){return FD}const Xw=new Vt(Ne.comparator);function Jc(...n){let e=Xw;for(const t of n)e=e.insert(t.key,t);return e}function Zw(n){let e=Xw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ia(){return su()}function eC(){return su()}function su(){return new ha((n=>n.toString()),((n,e)=>n.isEqual(e)))}const qD=new Vt(Ne.comparator),BD=new ln(Ne.comparator);function tt(...n){let e=BD;for(const t of n)e=e.add(t);return e}const HD=new ln(it);function GD(){return HD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function tC(n){return{integerValue:""+n}}function jD(n,e){return vD(e)?tC(e):ly(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this._=void 0}}function zD(n,e,t){return n instanceof Nh?(function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&nf(a)&&(a=sf(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}})(t,e):n instanceof pu?iC(n,e):n instanceof mu?sC(n,e):(function(r,a){const c=nC(r,a),d=a0(c)+a0(r.Pe);return dg(c)&&dg(r.Pe)?tC(d):ly(r.serializer,d)})(n,e)}function $D(n,e,t){return n instanceof pu?iC(n,e):n instanceof mu?sC(n,e):t}function nC(n,e){return n instanceof Ph?(function(i){return dg(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Nh extends lf{}class pu extends lf{constructor(e){super(),this.elements=e}}function iC(n,e){const t=rC(e);for(const i of n.elements)t.some((r=>Fs(r,i)))||t.push(i);return{arrayValue:{values:t}}}class mu extends lf{constructor(e){super(),this.elements=e}}function sC(n,e){let t=rC(e);for(const i of n.elements)t=t.filter((r=>!Fs(r,i)));return{arrayValue:{values:t}}}class Ph extends lf{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function a0(n){return $t(n.integerValue||n.doubleValue)}function rC(n){return sy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function KD(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof pu&&r instanceof pu||i instanceof mu&&r instanceof mu?Al(i.elements,r.elements,Fs):i instanceof Ph&&r instanceof Ph?Fs(i.Pe,r.Pe):i instanceof Nh&&r instanceof Nh})(n.transform,e.transform)}class YD{constructor(e,t){this.version=e,this.transformResults=t}}class bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cf{}function oC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uf(n.key,bn.none()):new xu(n.key,n.data,bn.none());{const t=n.data,i=Wn.empty();let r=new ln(vn.comparator);for(let a of e.fields)if(!r.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?i.delete(a):i.set(a,c),r=r.add(a)}return new bo(n.key,i,new Ci(r.toArray()),bn.none())}}function JD(n,e,t){n instanceof xu?(function(r,a,c){const d=r.value.clone(),f=c0(r.fieldTransforms,a,c.transformResults);d.setAll(f),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof bo?(function(r,a,c){if(!fh(r.precondition,a))return void a.convertToUnknownDocument(c.version);const d=c0(r.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(aC(r)),f.setAll(d),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):(function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ru(n,e,t,i){return n instanceof xu?(function(a,c,d,f){if(!fh(a.precondition,c))return d;const h=a.value.clone(),_=u0(a.fieldTransforms,f,c);return h.setAll(_),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof bo?(function(a,c,d,f){if(!fh(a.precondition,c))return d;const h=u0(a.fieldTransforms,f,c),_=c.data;return _.setAll(aC(a)),_.setAll(h),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,c,d){return fh(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function WD(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=nC(i.transform,r||null);a!=null&&(t===null&&(t=Wn.empty()),t.set(i.field,a))}return t||null}function l0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Al(i,r,((a,c)=>KD(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xu extends cf{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bo extends cf{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function aC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function c0(n,e,t){const i=new Map;lt(n.length===t.length);for(let r=0;r<t.length;r++){const a=n[r],c=a.transform,d=e.data.field(a.field);i.set(a.field,$D(c,d,t[r]))}return i}function u0(n,e,t){const i=new Map;for(const r of n){const a=r.transform,c=t.data.field(r.field);i.set(r.field,zD(a,c,e))}return i}class uf extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lC extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&JD(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ru(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ru(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=eC();return this.mutations.forEach((r=>{const a=e.get(r.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(r.key)?null:d;const f=oC(c,d);f!==null&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tt())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,((t,i)=>l0(t,i)))&&Al(this.baseMutations,e.baseMutations,((t,i)=>l0(t,i)))}}class cy{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){lt(e.mutations.length===i.length);let r=(function(){return qD})();const a=e.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,i[c].version);return new cy(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,at;function cC(n){switch(n){default:return ke();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function uC(n){if(n===void 0)return br("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Qt.OK:return oe.OK;case Qt.CANCELLED:return oe.CANCELLED;case Qt.UNKNOWN:return oe.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return oe.INTERNAL;case Qt.UNAVAILABLE:return oe.UNAVAILABLE;case Qt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Qt.NOT_FOUND:return oe.NOT_FOUND;case Qt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Qt.ABORTED:return oe.ABORTED;case Qt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Qt.DATA_LOSS:return oe.DATA_LOSS;default:return ke()}}(at=Qt||(Qt={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new yo([4294967295,4294967295],0);function d0(n){const e=ek().encode(n),t=new kw;return t.update(e),new Uint8Array(t.digest())}function h0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new yo([t,i],0),new yo([r,a],0)]}class uy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Wc(`Invalid padding: ${t}`);if(i<0)throw new Wc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Wc(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=yo.fromNumber(this.Te)}de(e,t,i){let r=e.add(t.multiply(yo.fromNumber(i)));return r.compare(tk)===1&&(r=new yo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=d0(e),[i,r]=h0(t);for(let a=0;a<this.hashCount;a++){const c=this.de(i,r,a);if(!this.Ee(c))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new uy(a,r,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.Te===0)return;const t=d0(e),[i,r]=h0(t);for(let a=0;a<this.hashCount;a++){const c=this.de(i,r,a);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new df(Ue.min(),r,new Vt(it),Nr(),tt())}}class Ru{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ru(i,t,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}}class dC{constructor(e,t){this.targetId=e,this.me=t}}class hC{constructor(e,t,i=Tn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class f0{constructor(){this.fe=0,this.ge=p0(),this.pe=Tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=tt(),t=tt(),i=tt();return this.ge.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ke()}})),new Ru(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=p0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class nk{constructor(e){this.Be=e,this.Le=new Map,this.ke=Nr(),this.qe=eh(),this.Qe=eh(),this.Ke=new Vt(it)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,(t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:ke()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach(((i,r)=>{this.je(r)&&t(r)}))}Je(e){const t=e.targetId,i=e.me.count,r=this.Ye(t);if(r){const a=r.target;if(fg(a))if(i===0){const c=new Ne(a.path);this.We(t,c,yn.newNoDocument(c,Ue.min()))}else lt(i===1);else{const c=this.Ze(t);if(c!==i){const d=this.Xe(e),f=d?this.et(d,e,c):1;if(f!==0){this.He(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let c,d;try{c=Ao(i).toUint8Array()}catch(f){if(f instanceof Hw)return aa("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new uy(c,r,a)}catch(f){return aa(f instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Te===0?null:d}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Be.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const c=this.Be.nt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.We(t,a,null),r++)})),r}it(e){const t=new Map;this.Le.forEach(((a,c)=>{const d=this.Ye(c);if(d){if(a.current&&fg(d.target)){const f=new Ne(d.target.path);this.st(f).has(c)||this.ot(c,f)||this.We(c,f,yn.newNoDocument(f,e))}a.be&&(t.set(c,a.ve()),a.Ce())}}));let i=tt();this.Qe.forEach(((a,c)=>{let d=!0;c.forEachWhile((f=>{const h=this.Ye(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ke.forEach(((a,c)=>c.setReadTime(e)));const r=new df(e,t,this.Ke,this.ke,i);return this.ke=Nr(),this.qe=eh(),this.Qe=eh(),this.Ke=new Vt(it),r}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const r=this.ze(e);this.ot(e,t)?r.Fe(t,1):r.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new f0,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new ln(it),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ln(it),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new f0),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function eh(){return new Vt(Ne.comparator)}function p0(){return new Vt(Ne.comparator)}const ik={asc:"ASCENDING",desc:"DESCENDING"},sk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rk={and:"AND",or:"OR"};class ok{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mg(n,e){return n.useProto3Json||Iu(e)?e:{value:e}}function Dh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ak(n,e){return Dh(n,e.toTimestamp())}function Ii(n){return lt(!!n),Ue.fromTimestamp((function(t){const i=Eo(t);return new en(i.seconds,i.nanos)})(n))}function dy(n,e){return gg(n,e).canonicalString()}function gg(n,e){const t=(function(r){return new St(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pC(n){const e=St.fromString(n);return lt(TC(e)),e}function kh(n,e){return dy(n.databaseId,e.path)}function ou(n,e){const t=pC(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(gC(t))}function mC(n,e){return dy(n.databaseId,e)}function lk(n){const e=pC(n);return e.length===4?St.emptyPath():gC(e)}function yg(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gC(n){return lt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function m0(n,e,t){return{name:kh(n,e),fields:t.value.mapValue.fields}}function ck(n,e){return"found"in e?(function(i,r){lt(!!r.found),r.found.name,r.found.updateTime;const a=ou(i,r.found.name),c=Ii(r.found.updateTime),d=r.found.createTime?Ii(r.found.createTime):Ue.min(),f=new Wn({mapValue:{fields:r.found.fields}});return yn.newFoundDocument(a,c,d,f)})(n,e):"missing"in e?(function(i,r){lt(!!r.missing),lt(!!r.readTime);const a=ou(i,r.missing),c=Ii(r.readTime);return yn.newNoDocument(a,c)})(n,e):ke()}function uk(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ke()})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(lt(_===void 0||typeof _=="string"),Tn.fromBase64String(_||"")):(lt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Tn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(h){const _=h.code===void 0?oe.UNKNOWN:uC(h.code);return new ge(_,h.message||"")})(c);t=new hC(i,r,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ou(n,i.document.name),a=Ii(i.document.updateTime),c=i.document.createTime?Ii(i.document.createTime):Ue.min(),d=new Wn({mapValue:{fields:i.document.fields}}),f=yn.newFoundDocument(r,a,c,d),h=i.targetIds||[],_=i.removedTargetIds||[];t=new ph(h,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ou(n,i.document),a=i.readTime?Ii(i.readTime):Ue.min(),c=yn.newNoDocument(r,a),d=i.removedTargetIds||[];t=new ph([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ou(n,i.document),a=i.removedTargetIds||[];t=new ph([],a,r,null)}else{if(!("filter"in e))return ke();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,c=new ZD(r,a),d=i.targetId;t=new dC(d,c)}}return t}function yC(n,e){let t;if(e instanceof xu)t={update:m0(n,e.key,e.value)};else if(e instanceof uf)t={delete:kh(n,e.key)};else if(e instanceof bo)t={update:m0(n,e.key,e.data),updateMask:_k(e.fieldMask)};else{if(!(e instanceof lC))return ke();t={verify:kh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,c){const d=c.transform;if(d instanceof Nh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof pu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof mu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ph)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw ke()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:ak(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke()})(n,e.precondition)),t}function dk(n,e){return n&&n.length>0?(lt(e!==void 0),n.map((t=>(function(r,a){let c=r.updateTime?Ii(r.updateTime):Ii(a);return c.isEqual(Ue.min())&&(c=Ii(a)),new YD(c,r.transformResults||[])})(t,e)))):[]}function hk(n,e){return{documents:[mC(n,e.path)]}}function fk(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=mC(n,r);const a=(function(h){if(h.length!==0)return _C(hs.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(h){if(h.length!==0)return h.map((_=>(function(A){return{field:il(A.field),direction:gk(A.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=mg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ct:t,parent:r}}function pk(n){let e=lk(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){lt(i===1);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const A=vC(E);return A instanceof hs&&$w(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(M){return new Rh(sl(M.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,Iu(A)?null:A})(t.limit));let f=null;t.startAt&&(f=(function(E){const A=!!E.before,R=E.values||[];return new Il(R,A)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const A=!E.before,R=E.values||[];return new Il(R,A)})(t.endAt)),UD(e,r,c,a,d,"F",f,h)}function mk(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=sl(t.unaryFilter.field);return Zt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=sl(t.unaryFilter.field);return Zt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=sl(t.unaryFilter.field);return Zt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=sl(t.unaryFilter.field);return Zt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ke()}})(n):n.fieldFilter!==void 0?(function(t){return Zt.create(sl(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hs.create(t.compositeFilter.filters.map((i=>vC(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ke()}})(t.compositeFilter.op))})(n):ke()}function gk(n){return ik[n]}function yk(n){return sk[n]}function vk(n){return rk[n]}function il(n){return{fieldPath:n.canonicalString()}}function sl(n){return vn.fromServerFormat(n.fieldPath)}function _C(n){return n instanceof Zt?(function(t){if(t.op==="=="){if(n0(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NAN"}};if(t0(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(n0(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NAN"}};if(t0(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(t.field),op:yk(t.op),value:t.value}}})(n):n instanceof hs?(function(t){const i=t.getFilters().map((r=>_C(r)));return i.length===1?i[0]:{compositeFilter:{op:vk(t.op),filters:i}}})(n):ke()}function _k(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function TC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,t,i,r,a=Ue.min(),c=Ue.min(),d=Tn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.ht=e}}function Ek(n){const e=pk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.ln=new Sk}addToCollectionParentIndex(e,t){return this.ln.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(To.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(To.min())}updateCollectionGroup(e,t,i){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class Sk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ln(St.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ln(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ai{static withCacheSize(e){return new ai(e,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ai.DEFAULT_COLLECTION_PERCENTILE=10,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ai.DEFAULT=new ai(41943040,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ai.DISABLED=new ai(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new xl(0)}static Qn(){return new xl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0([n,e],[t,i]){const r=it(n,t);return r===0?it(e,i):r}class wk{constructor(e){this.Gn=e,this.buffer=new ln(y0),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();y0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ck{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ul(t)?Te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ml(t)}await this.Yn(3e5)}))}}class Ik{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return he.resolve(tf.oe);const i=new wk(t);return this.Zn.forEachTarget(e,(r=>i.Hn(r.sequenceNumber))).next((()=>this.Zn.er(e,(r=>i.Hn(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(g0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g0):this.tr(e,t)))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,r,a,c,d,f,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(e,r)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),tl()<=et.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${r} in `+(d-c)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${E} documents in `+(h-f)+`ms
Total Duration: ${h-_}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:E}))))}}function xk(n,e){return new Ik(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.changes=new ha((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?he.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&ru(i.mutation,r,Ci.empty(),en.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,tt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=tt()){const r=ia();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let c=Jc();return a.forEach(((d,f)=>{c=c.insert(d,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=ia();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,tt())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,r){let a=Nr();const c=su(),d=(function(){return su()})();return t.forEach(((f,h)=>{const _=i.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof bo)?a=a.insert(h.key,h):_!==void 0?(c.set(h.key,_.mutation.getFieldMask()),ru(_.mutation,h,_.mutation.getFieldMask(),en.now())):c.set(h.key,Ci.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,_)=>c.set(h,_))),t.forEach(((h,_)=>{var E;return d.set(h,new bk(_,(E=c.get(h))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=su();let r=new Vt(((c,d)=>c-d)),a=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let _=i.get(f)||Ci.empty();_=d.applyToLocalView(h,_),i.set(f,_);const E=(r.get(d.batchId)||tt()).add(f);r=r.insert(d.batchId,E)}))})).next((()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),h=f.key,_=f.value,E=eC();_.forEach((A=>{if(!a.has(A)){const R=oC(t.get(A),i.get(A));R!==null&&E.set(A,R),a=a.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,E))}return he.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(c){return Ne.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ay(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):he.resolve(ia());let d=-1,f=a;return c.next((h=>he.forEach(h,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?he.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{f=f.insert(_,A)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,tt()))).next((_=>({batchId:d,changes:Zw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((i=>{let r=Jc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let c=Jc();return this.indexManager.getCollectionParents(e,a).next((d=>he.forEach(d,(f=>{const h=(function(E,A){return new Vl(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((_=>{_.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((c=>{a.forEach(((f,h)=>{const _=h.getKey();c.get(_)===null&&(c=c.insert(_,yn.newInvalidDocument(_)))}));let d=Jc();return c.forEach(((f,h)=>{const _=a.get(f);_!==void 0&&ru(_.mutation,h,Ci.empty(),en.now()),af(t,h)&&(d=d.insert(f,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return he.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Ii(r.createTime)}})(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,(function(r){return{name:r.name,query:Ek(r.bundledQuery),readTime:Ii(r.readTime)}})(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.overlays=new Vt(Ne.comparator),this.dr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ia();return he.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.Tt(e,t,a)})),he.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.dr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.dr.delete(i)),he.resolve()}getOverlaysForCollection(e,t,i){const r=ia(),a=t.length+1,c=new Ne(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>i&&r.set(f.getKey(),f)}return he.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new Vt(((h,_)=>h-_));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=ia(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=ia(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=r)););return he.resolve(d)}Tt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.dr.get(r.largestBatchId).delete(i.key);this.dr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new XD(t,i));let a=this.dr.get(t);a===void 0&&(a=tt(),this.dr.set(t,a)),this.dr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this.Er=new ln(gn.Ar),this.Rr=new ln(gn.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const i=new gn(e,t);this.Er=this.Er.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.gr(new gn(e,t))}pr(e,t){e.forEach((i=>this.removeReference(i,t)))}yr(e){const t=new Ne(new St([])),i=new gn(t,e),r=new gn(t,e+1),a=[];return this.Rr.forEachInRange([i,r],(c=>{this.gr(c),a.push(c.key)})),a}wr(){this.Er.forEach((e=>this.gr(e)))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Ne(new St([])),i=new gn(t,e),r=new gn(t,e+1);let a=tt();return this.Rr.forEachInRange([i,r],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new gn(e,0),i=this.Er.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class gn{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Ne.comparator(e.key,t.key)||it(e.br,t.br)}static Vr(e,t){return it(e.br,t.br)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new ln(gn.Ar)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new QD(a,t,i,r);this.mutationQueue.push(c);for(const d of r)this.vr=this.vr.add(new gn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Fr(i),a=r<0?0:r;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new gn(t,0),r=new gn(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([i,r],(c=>{const d=this.Cr(c.br);a.push(d)})),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ln(it);return t.forEach((r=>{const a=new gn(r,0),c=new gn(r,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,c],(d=>{i=i.add(d.br)}))})),he.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;Ne.isDocumentKey(a)||(a=a.child(""));const c=new gn(new Ne(a),0);let d=new ln(it);return this.vr.forEachWhile((f=>{const h=f.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(d=d.add(f.br)),!0)}),c),he.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach((i=>{const r=this.Cr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){lt(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return he.forEach(t.mutations,(r=>{const a=new gn(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.vr=i}))}Bn(e){}containsKey(e,t){const i=new gn(t,0),r=this.vr.firstAfterOrEqual(i);return he.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.Nr=e,this.docs=(function(){return new Vt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,c=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return he.resolve(i?i.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let i=Nr();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():yn.newInvalidDocument(r))})),he.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=Nr();const c=t.path,d=new Ne(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:h,value:{document:_}}=f.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||pD(fD(_),i)<=0||(r.has(_.key)||af(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,t,i,r){ke()}Br(e,t){return he.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Vk(this)}getSize(e){return he.resolve(this.size)}}class Vk extends Rk{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.hr.addEntry(e,r)):this.hr.removeEntry(i)})),he.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.persistence=e,this.Lr=new ha((t=>ry(t)),oy),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.kr=0,this.qr=new hy,this.targetCount=0,this.Qr=xl.qn()}forEachTarget(e,t){return this.Lr.forEach(((i,r)=>t(r))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),he.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new xl(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Un(t),he.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.Lr.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Lr.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),he.waitFor(a).next((()=>r))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const i=this.Lr.get(t)||null;return he.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),he.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((c=>{a.push(r.markPotentiallyOrphaned(e,c))})),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return he.resolve(i)}containsKey(e,t){return he.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,t){this.Kr={},this.overlays={},this.$r=new tf(0),this.Ur=!1,this.Ur=!0,this.Wr=new kk,this.referenceDelegate=e(this),this.Gr=new Lk(this),this.indexManager=new Ak,this.remoteDocumentCache=(function(r){return new Uk(r)})((i=>this.referenceDelegate.zr(i))),this.serializer=new Tk(t),this.jr=new Pk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Dk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new Mk(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){Te("MemoryPersistence","Starting transaction:",e);const r=new Ok(this.$r.next());return this.referenceDelegate.Hr(),i(r).next((a=>this.referenceDelegate.Jr(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Yr(e,t){return he.or(Object.values(this.Kr).map((i=>()=>i.containsKey(e,t))))}}class Ok extends gD{constructor(e){super(),this.currentSequenceNumber=e}}class fy{constructor(e){this.persistence=e,this.Zr=new hy,this.Xr=null}static ei(e){return new fy(e)}get ti(){if(this.Xr)return this.Xr;throw ke()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),he.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),he.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach((r=>this.ti.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.ti.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.ti,(i=>{const r=Ne.fromPath(i);return this.ni(e,r).next((a=>{a||t.removeEntry(r,Ue.min())}))})).next((()=>(this.Xr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ni(e,t).next((i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())}))}zr(e){return 0}ni(e,t){return he.or([()=>he.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Mh{constructor(e,t){this.persistence=e,this.ri=new ha((i=>_D(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=xk(this,t)}static ei(e,t){return new Mh(e,t)}Hr(){}Jr(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}nr(e){let t=0;return this.er(e,(i=>{t++})).next((()=>t))}er(e,t){return he.forEach(this.ri,((i,r)=>this.ir(e,i,r).next((a=>a?he.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.Br(e,(c=>this.ir(e,c,t).next((d=>{d||(i++,a.removeEntry(c,Ue.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),he.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),he.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dh(e.data.value)),t}ir(e,t,i){return he.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.ri.get(t);return he.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=r}static zi(e,t){let i=tt(),r=tt();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new py(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=(function(){return $R()?8:yD(Gn())>0?6:4})()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.Xi(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.es(e,t,r,i).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new Fk;return this.ts(e,t,c).next((d=>{if(a.result=d,this.Hi)return this.ns(e,t,c,d.size)}))})).next((()=>a.result))}ns(e,t,i,r){return i.documentReadCount<this.Ji?(tl()<=et.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),he.resolve()):(tl()<=et.DEBUG&&Te("QueryEngine","Query:",nl(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Yi*r?(tl()<=et.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Us(t))):he.resolve())}Xi(e,t){if(o0(t))return he.resolve(null);let i=Us(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=bh(t,null,"F"),i=Us(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const c=tt(...a);return this.Zi.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((f=>{const h=this.rs(t,d);return this.ss(t,h,c,f.readTime)?this.Xi(e,bh(t,null,"F")):this.os(e,h,t,f)}))))})))))}es(e,t,i,r){return o0(t)||r.isEqual(Ue.min())?he.resolve(null):this.Zi.getDocuments(e,i).next((a=>{const c=this.rs(t,a);return this.ss(t,c,i,r)?he.resolve(null):(tl()<=et.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nl(t)),this.os(e,c,t,hD(r,-1)).next((d=>d)))}))}rs(e,t){let i=new ln(Qw(e));return t.forEach(((r,a)=>{af(e,a)&&(i=i.add(a))})),i}ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ts(e,t,i){return tl()<=et.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",nl(t)),this.Zi.getDocumentsMatchingQuery(e,t,To.min(),i)}os(e,t,i,r){return this.Zi.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t,i,r){this.persistence=e,this._s=t,this.serializer=r,this.us=new Vt(it),this.cs=new ha((a=>ry(a)),oy),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nk(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.us)))}}function Hk(n,e,t,i){return new Bk(n,e,t,i)}async function AC(n,e){const t=qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const c=[],d=[];let f=tt();for(const h of r){c.push(h.batchId);for(const _ of h.mutations)f=f.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(i,f).next((h=>({Ts:h,removedBatchIds:c,addedBatchIds:d})))}))}))}function Gk(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return(function(d,f,h,_){const E=h.batch,A=E.keys();let R=he.resolve();return A.forEach((M=>{R=R.next((()=>_.getEntry(f,M))).next((B=>{const L=h.docVersions.get(M);lt(L!==null),B.version.compareTo(L)<0&&(E.applyToRemoteDocument(B,h),B.isValidDocument()&&(B.setReadTime(h.commitVersion),_.addEntry(B)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(f,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let f=tt();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(f=f.add(d.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function SC(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Gr.getLastRemoteSnapshotVersion(t)))}function jk(n,e){const t=qe(n),i=e.snapshotVersion;let r=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});r=t.us;const d=[];e.targetChanges.forEach(((_,E)=>{const A=r.get(E);if(!A)return;d.push(t.Gr.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Gr.addMatchingKeys(a,_.addedDocuments,E))));let R=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(Tn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),r=r.insert(E,R),(function(B,L,G){return B.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(A,R,_)&&d.push(t.Gr.updateTargetData(a,R))}));let f=Nr(),h=tt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(zk(a,c,e.documentUpdates).next((_=>{f=_.Is,h=_.ds}))),!i.isEqual(Ue.min())){const _=t.Gr.getLastRemoteSnapshotVersion(a).next((E=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return he.waitFor(d).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(t.us=r,a)))}function zk(n,e,t){let i=tt(),r=tt();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let c=Nr();return t.forEach(((d,f)=>{const h=a.get(d);f.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(Ue.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):Te("LocalStore","Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",f.version)})),{Is:c,ds:r}}))}function $k(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Kk(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Gr.getTargetData(i,e).next((a=>a?(r=a,he.resolve(r)):t.Gr.allocateTargetId(i).next((c=>(r=new ho(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.us.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i}))}async function vg(n,e,t){const i=qe(n),r=i.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Ul(c))throw c;Te("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.us=i.us.remove(e),i.cs.delete(r.target)}function v0(n,e,t){const i=qe(n);let r=Ue.min(),a=tt();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,h,_){const E=qe(f),A=E.cs.get(_);return A!==void 0?he.resolve(E.us.get(A)):E.Gr.getTargetData(h,_)})(i,c,Us(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(c,d.targetId).next((f=>{a=f}))})).next((()=>i._s.getDocumentsMatchingQuery(c,e,t?r:Ue.min(),t?a:tt()))).next((d=>(Yk(i,LD(e),d),{documents:d,Es:a})))))}function Yk(n,e,t){let i=n.ls.get(e)||Ue.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.ls.set(e,i)}class _0{constructor(){this.activeTargetIds=GD()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jk{constructor(){this._o=new _0,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new _0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th=null;function jm(){return th===null?th=(function(){return 268435456+Math.round(2147483648*Math.random())})():th++,"0x"+th.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class Zk extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${r}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Oo(t,i,r,a,c){const d=jm(),f=this.No(t,i.toUriEncodedString());Te("RestConnection",`Sending RPC '${t}' ${d}:`,f,r);const h={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(h,a,c),this.Lo(t,f,h,r).then((_=>(Te("RestConnection",`Received RPC '${t}' ${d}: `,_),_)),(_=>{throw aa("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",f,"request:",r),_}))}ko(t,i,r,a,c,d){return this.Oo(t,i,r,a,c)}Bo(t,i,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((a,c)=>t[c]=a)),r&&r.headers.forEach(((a,c)=>t[c]=a))}No(t,i){const r=Qk[t];return`${this.Fo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,i,r){const a=jm();return new Promise(((c,d)=>{const f=new Mw;f.setWithCredentials(!0),f.listenOnce(Uw.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case uh.NO_ERROR:const _=f.getResponseJson();Te(Fn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),c(_);break;case uh.TIMEOUT:Te(Fn,`RPC '${e}' ${a} timed out`),d(new ge(oe.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const E=f.getStatus();if(Te(Fn,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let A=f.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A?.error;if(R&&R.status&&R.message){const M=(function(L){const G=L.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(G)>=0?G:oe.UNKNOWN})(R.status);d(new ge(M,R.message))}else d(new ge(oe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ge(oe.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{Te(Fn,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(r);Te(Fn,`RPC '${e}' ${a} sending request:`,r),f.send(t,"POST",h,i,15)}))}qo(e,t,i){const r=jm(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Ow(),d=Lw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Bo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const _=a.join("");Te(Fn,`Creating RPC '${e}' stream ${r}: ${_}`,f);const E=c.createWebChannel(_,f);let A=!1,R=!1;const M=new Xk({Eo:L=>{R?Te(Fn,`Not sending because RPC '${e}' stream ${r} is closed:`,L):(A||(Te(Fn,`Opening RPC '${e}' stream ${r} transport.`),E.open(),A=!0),Te(Fn,`RPC '${e}' stream ${r} sending:`,L),E.send(L))},Ao:()=>E.close()}),B=(L,G,H)=>{L.listen(G,(z=>{try{H(z)}catch(X){setTimeout((()=>{throw X}),0)}}))};return B(E,Yc.EventType.OPEN,(()=>{R||(Te(Fn,`RPC '${e}' stream ${r} transport opened.`),M.So())})),B(E,Yc.EventType.CLOSE,(()=>{R||(R=!0,Te(Fn,`RPC '${e}' stream ${r} transport closed`),M.Do())})),B(E,Yc.EventType.ERROR,(L=>{R||(R=!0,aa(Fn,`RPC '${e}' stream ${r} transport errored:`,L),M.Do(new ge(oe.UNAVAILABLE,"The operation could not be completed")))})),B(E,Yc.EventType.MESSAGE,(L=>{var G;if(!R){const H=L.data[0];lt(!!H);const z=H,X=z?.error||((G=z[0])===null||G===void 0?void 0:G.error);if(X){Te(Fn,`RPC '${e}' stream ${r} received error:`,X);const Y=X.status;let ue=(function(D){const k=Qt[D];if(k!==void 0)return uC(k)})(Y),O=X.message;ue===void 0&&(ue=oe.INTERNAL,O="Unknown error status: "+Y+" with message "+X.message),R=!0,M.Do(new ge(ue,O)),E.close()}else Te(Fn,`RPC '${e}' stream ${r} received:`,H),M.vo(H)}})),B(d,Vw.STAT_EVENT,(L=>{L.stat===cg.PROXY?Te(Fn,`RPC '${e}' stream ${r} detected buffering proxy`):L.stat===cg.NOPROXY&&Te(Fn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{M.bo()}),0),M}}function zm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(n){return new ok(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t,i=1e3,r=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=r,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),r=Math.max(0,t-i);r>0&&Te("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,(()=>(this.Go=Date.now(),e()))),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t,i,r,a,c,d,f){this.li=e,this.Yo=i,this.Zo=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new my(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,(()=>this.u_())))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.Xo===t&&this.I_(i,r)}),(i=>{e((()=>{const r=new ge(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.d_(r)}))}))}I_(e,t){const i=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro((()=>{i((()=>this.listener.Ro()))})),this.stream.mo((()=>{i((()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,(()=>(this.s_()&&(this.state=3),Promise.resolve()))),this.listener.mo())))})),this.stream.po((r=>{i((()=>this.d_(r)))})),this.stream.onMessage((r=>{i((()=>++this.n_==1?this.A_(r):this.onNext(r)))}))}o_(){this.state=5,this.r_.jo((async()=>{this.state=0,this.start()}))}d_(e){return Te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget((()=>this.Xo===e?t():(Te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eM extends wC{constructor(e,t,i,r,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,c),this.serializer=a}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=uk(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ue.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ue.min():c.readTime?Ii(c.readTime):Ue.min()})(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=yg(this.serializer),t.addTarget=(function(a,c){let d;const f=c.target;if(d=fg(f)?{documents:hk(a,f)}:{query:fk(a,f).ct},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=fC(a,c.resumeToken);const h=mg(a,c.expectedCount);h!==null&&(d.expectedCount=h)}else if(c.snapshotVersion.compareTo(Ue.min())>0){d.readTime=Dh(a,c.snapshotVersion.toTimestamp());const h=mg(a,c.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=mk(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=yg(this.serializer),t.removeTarget=e,this.c_(t)}}class tM extends wC{constructor(e,t,i,r,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,c),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return lt(!!e.streamToken),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=dk(e.writeResults,e.commitTime),i=Ii(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=yg(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>yC(this.serializer,i)))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Oo(e,gg(t,i),r,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(oe.UNKNOWN,a.toString())}))}ko(e,t,i,r,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.ko(e,gg(t,i),r,c,d,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(oe.UNKNOWN,c.toString())}))}terminate(){this.S_=!0,this.connection.terminate()}}class iM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve()))))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(br(t),this.C_=!1):Te("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo((c=>{i.enqueueAndForget((async()=>{fa(this)&&(Te("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const h=qe(f);h.k_.add(4),await bu(h),h.K_.set("Unknown"),h.k_.delete(4),await ff(h)})(this))}))})),this.K_=new iM(i,r)}}async function ff(n){if(fa(n))for(const e of n.q_)await e(!0)}async function bu(n){for(const e of n.q_)await e(!1)}function CC(n,e){const t=qe(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),_y(t)?vy(t):Ll(t).s_()&&yy(t,e))}function gy(n,e){const t=qe(n),i=Ll(t);t.L_.delete(e),i.s_()&&IC(t,e),t.L_.size===0&&(i.s_()?i.a_():fa(t)&&t.K_.set("Unknown"))}function yy(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ll(n).V_(e)}function IC(n,e){n.U_.xe(e),Ll(n).m_(e)}function vy(n){n.U_=new nk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Ll(n).start(),n.K_.F_()}function _y(n){return fa(n)&&!Ll(n).i_()&&n.L_.size>0}function fa(n){return qe(n).k_.size===0}function xC(n){n.U_=void 0}async function rM(n){n.K_.set("Online")}async function oM(n){n.L_.forEach(((e,t)=>{yy(n,e)}))}async function aM(n,e){xC(n),_y(n)?(n.K_.O_(e),vy(n)):n.K_.set("Unknown")}async function lM(n,e,t){if(n.K_.set("Online"),e instanceof hC&&e.state===2&&e.cause)try{await(async function(r,a){const c=a.cause;for(const d of a.targetIds)r.L_.has(d)&&(await r.remoteSyncer.rejectListen(d,c),r.L_.delete(d),r.U_.removeTarget(d))})(n,e)}catch(i){Te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Uh(n,i)}else if(e instanceof ph?n.U_.$e(e):e instanceof dC?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Ue.min()))try{const i=await SC(n.localStore);t.compareTo(i)>=0&&await(function(a,c){const d=a.U_.it(c);return d.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.L_.get(h);_&&a.L_.set(h,_.withResumeToken(f.resumeToken,c))}})),d.targetMismatches.forEach(((f,h)=>{const _=a.L_.get(f);if(!_)return;a.L_.set(f,_.withResumeToken(Tn.EMPTY_BYTE_STRING,_.snapshotVersion)),IC(a,f);const E=new ho(_.target,f,h,_.sequenceNumber);yy(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){Te("RemoteStore","Failed to raise snapshot:",i),await Uh(n,i)}}async function Uh(n,e,t){if(!Ul(e))throw e;n.k_.add(1),await bu(n),n.K_.set("Offline"),t||(t=()=>SC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await ff(n)}))}function RC(n,e){return e().catch((t=>Uh(n,t,e)))}async function pf(n){const e=qe(n),t=wo(e);let i=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;cM(e);)try{const r=await $k(e.localStore,i);if(r===null){e.B_.length===0&&t.a_();break}i=r.batchId,uM(e,r)}catch(r){await Uh(e,r)}bC(e)&&NC(e)}function cM(n){return fa(n)&&n.B_.length<10}function uM(n,e){n.B_.push(e);const t=wo(n);t.s_()&&t.f_&&t.g_(e.mutations)}function bC(n){return fa(n)&&!wo(n).i_()&&n.B_.length>0}function NC(n){wo(n).start()}async function dM(n){wo(n).w_()}async function hM(n){const e=wo(n);for(const t of n.B_)e.g_(t.mutations)}async function fM(n,e,t){const i=n.B_.shift(),r=cy.from(i,e,t);await RC(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await pf(n)}async function pM(n,e){e&&wo(n).f_&&await(async function(i,r){if((function(c){return cC(c)&&c!==oe.ABORTED})(r.code)){const a=i.B_.shift();wo(i).__(),await RC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await pf(i)}})(n,e),bC(n)&&NC(n)}async function E0(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Te("RemoteStore","RemoteStore received new credentials");const i=fa(t);t.k_.add(3),await bu(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await ff(t)}async function mM(n,e){const t=qe(n);e?(t.k_.delete(2),await ff(t)):e||(t.k_.add(2),await bu(t),t.K_.set("Unknown"))}function Ll(n){return n.W_||(n.W_=(function(t,i,r){const a=qe(t);return a.b_(),new eM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Ro:rM.bind(null,n),mo:oM.bind(null,n),po:aM.bind(null,n),R_:lM.bind(null,n)}),n.q_.push((async e=>{e?(n.W_.__(),_y(n)?vy(n):n.K_.set("Unknown")):(await n.W_.stop(),xC(n))}))),n.W_}function wo(n){return n.G_||(n.G_=(function(t,i,r){const a=qe(t);return a.b_(),new tM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:dM.bind(null,n),po:pM.bind(null,n),p_:hM.bind(null,n),y_:fM.bind(null,n)}),n.q_.push((async e=>{e?(n.G_.__(),await pf(n)):(await n.G_.stop(),n.B_.length>0&&(Te("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))}))),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const c=Date.now()+i,d=new Ty(e,t,c,r,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ey(n,e){if(br("AsyncQueue",`${e}: ${n}`),Ul(n))return new ge(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{static emptySet(e){return new pl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ne.comparator(t.key,i.key):(t,i)=>Ne.comparator(t.key,i.key),this.keyedMap=Jc(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new pl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.z_=new Vt(Ne.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ke():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Rl{constructor(e,t,i,r,a,c,d,f,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,a){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Rl(e,t,pl.emptySet(t),c,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some((e=>e.Z_()))}}class yM{constructor(){this.queries=S0(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const r=qe(t),a=r.queries;r.queries=S0(),a.forEach(((c,d)=>{for(const f of d.J_)f.onError(i)}))})(this,new ge(oe.ABORTED,"Firestore shutting down"))}}function S0(){return new ha((n=>Ww(n)),of)}async function Ay(n,e){const t=qe(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Y_()&&e.Z_()&&(i=2):(a=new gM,i=e.Z_()?0:1);try{switch(i){case 0:a.H_=await t.onListen(r,!0);break;case 1:a.H_=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const d=Ey(c,`Initialization of query '${nl(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&wy(t)}async function Sy(n,e){const t=qe(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const c=a.J_.indexOf(e);c>=0&&(a.J_.splice(c,1),a.J_.length===0?r=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function vM(n,e){const t=qe(n);let i=!1;for(const r of e){const a=r.query,c=t.queries.get(a);if(c){for(const d of c.J_)d.ta(r)&&(i=!0);c.H_=r}}i&&wy(t)}function _M(n,e,t){const i=qe(n),r=i.queries.get(e);if(r)for(const a of r.J_)a.onError(t);i.queries.delete(e)}function wy(n){n.X_.forEach((e=>{e.next()}))}var _g,w0;(w0=_g||(_g={})).na="default",w0.Cache="cache";class Cy{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Rl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==_g.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.key=e}}class DC{constructor(e){this.key=e}}class TM{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=tt(),this.mutatedKeys=tt(),this.Va=Qw(e),this.ma=new pl(this.Va)}get fa(){return this.Ea}ga(e,t){const i=t?t.pa:new A0,r=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,c=r,d=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,E)=>{const A=r.get(_),R=af(this.query,E)?E:null,M=!!A&&this.mutatedKeys.has(A.key),B=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;A&&R?A.data.isEqual(R.data)?M!==B&&(i.track({type:3,doc:R}),L=!0):this.ya(A,R)||(i.track({type:2,doc:R}),L=!0,(f&&this.Va(R,f)>0||h&&this.Va(R,h)<0)&&(d=!0)):!A&&R?(i.track({type:0,doc:R}),L=!0):A&&!R&&(i.track({type:1,doc:A}),L=!0,(f||h)&&(d=!0)),L&&(R?(c=c.add(R),a=B?a.add(_):a.delete(_)):(c=c.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{ma:c,pa:i,ss:d,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort(((_,E)=>(function(R,M){const B=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return B(R)-B(M)})(_.type,E.type)||this.Va(_.doc,E.doc))),this.wa(i),r=r!=null&&r;const d=t&&!r?this.Sa():[],f=this.Ra.size===0&&this.current&&!r?1:0,h=f!==this.Aa;return this.Aa=f,c.length!==0||h?{snapshot:new Rl(this.query,e.ma,a,c,e.mutatedKeys,f===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new A0,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach((t=>this.Ea=this.Ea.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ea=this.Ea.delete(t))),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=tt(),this.ma.forEach((i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))}));const t=[];return e.forEach((i=>{this.Ra.has(i)||t.push(new DC(i))})),this.Ra.forEach((i=>{e.has(i)||t.push(new PC(i))})),t}va(e){this.Ea=e.Es,this.Ra=tt();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Rl.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class EM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class AM{constructor(e){this.key=e,this.Fa=!1}}class SM{constructor(e,t,i,r,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new ha((d=>Ww(d)),of),this.Oa=new Map,this.Na=new Set,this.Ba=new Vt(Ne.comparator),this.La=new Map,this.ka=new hy,this.qa={},this.Qa=new Map,this.Ka=xl.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function wM(n,e,t=!0){const i=OC(n);let r;const a=i.xa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.Ca()):r=await kC(i,e,t,!0),r}async function CM(n,e){const t=OC(n);await kC(t,e,!0,!1)}async function kC(n,e,t,i){const r=await Kk(n.localStore,Us(e)),a=r.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await IM(n,e,a,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&CC(n.remoteStore,r),d}async function IM(n,e,t,i,r){n.Ua=(E,A,R)=>(async function(B,L,G,H){let z=L.view.ga(G);z.ss&&(z=await v0(B.localStore,L.query,!1).then((({documents:O})=>L.view.ga(O,z))));const X=H&&H.targetChanges.get(L.targetId),Y=H&&H.targetMismatches.get(L.targetId)!=null,ue=L.view.applyChanges(z,B.isPrimaryClient,X,Y);return I0(B,L.targetId,ue.ba),ue.snapshot})(n,E,A,R);const a=await v0(n.localStore,e,!0),c=new TM(e,a.Es),d=c.ga(a.documents),f=Ru.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=c.applyChanges(d,n.isPrimaryClient,f);I0(n,t,h.ba);const _=new EM(e,t,c);return n.xa.set(e,_),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),h.snapshot}async function xM(n,e,t){const i=qe(n),r=i.xa.get(e),a=i.Oa.get(r.targetId);if(a.length>1)return i.Oa.set(r.targetId,a.filter((c=>!of(c,e)))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await vg(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&gy(i.remoteStore,r.targetId),Tg(i,r.targetId)})).catch(Ml)):(Tg(i,r.targetId),await vg(i.localStore,r.targetId,!0))}async function RM(n,e){const t=qe(n),i=t.xa.get(e),r=t.Oa.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),gy(t.remoteStore,i.targetId))}async function bM(n,e,t){const i=VM(n);try{const r=await(function(c,d){const f=qe(c),h=en.now(),_=d.reduce(((R,M)=>R.add(M.key)),tt());let E,A;return f.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let M=Nr(),B=tt();return f.hs.getEntries(R,_).next((L=>{M=L,M.forEach(((G,H)=>{H.isValidDocument()||(B=B.add(G))}))})).next((()=>f.localDocuments.getOverlayedDocuments(R,M))).next((L=>{E=L;const G=[];for(const H of d){const z=WD(H,E.get(H.key).overlayedDocument);z!=null&&G.push(new bo(H.key,z,Gw(z.value.mapValue),bn.exists(!0)))}return f.mutationQueue.addMutationBatch(R,h,G,d)})).next((L=>{A=L;const G=L.applyToLocalDocumentSet(E,B);return f.documentOverlayCache.saveOverlays(R,L.batchId,G)}))})).then((()=>({batchId:A.batchId,changes:Zw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(c,d,f){let h=c.qa[c.currentUser.toKey()];h||(h=new Vt(it)),h=h.insert(d,f),c.qa[c.currentUser.toKey()]=h})(i,r.batchId,t),await Nu(i,r.changes),await pf(i.remoteStore)}catch(r){const a=Ey(r,"Failed to persist write");t.reject(a)}}async function MC(n,e){const t=qe(n);try{const i=await jk(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const c=t.La.get(a);c&&(lt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.Fa=!0:r.modifiedDocuments.size>0?lt(c.Fa):r.removedDocuments.size>0&&(lt(c.Fa),c.Fa=!1))})),await Nu(t,i,e)}catch(i){await Ml(i)}}function C0(n,e,t){const i=qe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.xa.forEach(((a,c)=>{const d=c.view.ea(e);d.snapshot&&r.push(d.snapshot)})),(function(c,d){const f=qe(c);f.onlineState=d;let h=!1;f.queries.forEach(((_,E)=>{for(const A of E.J_)A.ea(d)&&(h=!0)})),h&&wy(f)})(i.eventManager,e),r.length&&i.Ma.R_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function NM(n,e,t){const i=qe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.La.get(e),a=r&&r.key;if(a){let c=new Vt(Ne.comparator);c=c.insert(a,yn.newNoDocument(a,Ue.min()));const d=tt().add(a),f=new df(Ue.min(),new Map,new Vt(it),c,d);await MC(i,f),i.Ba=i.Ba.remove(a),i.La.delete(e),Iy(i)}else await vg(i.localStore,e,!1).then((()=>Tg(i,e,t))).catch(Ml)}async function PM(n,e){const t=qe(n),i=e.batch.batchId;try{const r=await Gk(t.localStore,e);VC(t,i,null),UC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Nu(t,r)}catch(r){await Ml(r)}}async function DM(n,e,t){const i=qe(n);try{const r=await(function(c,d){const f=qe(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return f.mutationQueue.lookupMutationBatch(h,d).next((E=>(lt(E!==null),_=E.keys(),f.mutationQueue.removeMutationBatch(h,E)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>f.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);VC(i,e,t),UC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Nu(i,r)}catch(r){await Ml(r)}}function UC(n,e){(n.Qa.get(e)||[]).forEach((t=>{t.resolve()})),n.Qa.delete(e)}function VC(n,e,t){const i=qe(n);let r=i.qa[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.qa[i.currentUser.toKey()]=r}}function Tg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach((i=>{n.ka.containsKey(i)||LC(n,i)}))}function LC(n,e){n.Na.delete(e.path.canonicalString());const t=n.Ba.get(e);t!==null&&(gy(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),Iy(n))}function I0(n,e,t){for(const i of t)i instanceof PC?(n.ka.addReference(i.key,e),kM(n,i)):i instanceof DC?(Te("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||LC(n,i.key)):ke()}function kM(n,e){const t=e.key,i=t.path.canonicalString();n.Ba.get(t)||n.Na.has(i)||(Te("SyncEngine","New document in limbo: "+t),n.Na.add(i),Iy(n))}function Iy(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new Ne(St.fromString(e)),i=n.Ka.next();n.La.set(i,new AM(t)),n.Ba=n.Ba.insert(t,i),CC(n.remoteStore,new ho(Us(rf(t.path)),i,"TargetPurposeLimboResolution",tf.oe))}}async function Nu(n,e,t){const i=qe(n),r=[],a=[],c=[];i.xa.isEmpty()||(i.xa.forEach(((d,f)=>{c.push(i.Ua(f,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const E=h?!h.fromCache:(_=t?.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(h){r.push(h);const E=py.zi(f.targetId,h);a.push(E)}})))})),await Promise.all(c),i.Ma.R_(r),await(async function(f,h){const _=qe(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>he.forEach(h,(A=>he.forEach(A.Wi,(R=>_.persistence.referenceDelegate.addReference(E,A.targetId,R))).next((()=>he.forEach(A.Gi,(R=>_.persistence.referenceDelegate.removeReference(E,A.targetId,R)))))))))}catch(E){if(!Ul(E))throw E;Te("LocalStore","Failed to update sequence numbers: "+E)}for(const E of h){const A=E.targetId;if(!E.fromCache){const R=_.us.get(A),M=R.snapshotVersion,B=R.withLastLimboFreeSnapshotVersion(M);_.us=_.us.insert(A,B)}}})(i.localStore,a))}async function MM(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Te("SyncEngine","User change. New user:",e.toKey());const i=await AC(t.localStore,e);t.currentUser=e,(function(a,c){a.Qa.forEach((d=>{d.forEach((f=>{f.reject(new ge(oe.CANCELLED,c))}))})),a.Qa.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Nu(t,i.Ts)}}function UM(n,e){const t=qe(n),i=t.La.get(e);if(i&&i.Fa)return tt().add(i.key);{let r=tt();const a=t.Oa.get(e);if(!a)return r;for(const c of a){const d=t.xa.get(c);r=r.unionWith(d.view.fa)}return r}}function OC(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NM.bind(null,e),e.Ma.R_=vM.bind(null,e.eventManager),e.Ma.Wa=_M.bind(null,e.eventManager),e}function VM(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DM.bind(null,e),e}class Vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hf(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return Hk(this.persistence,new qk,e.initialUser,this.serializer)}ja(e){return new EC(fy.ei,this.serializer)}za(e){return new Jk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vh.provider={build:()=>new Vh};class LM extends Vh{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){lt(this.persistence.referenceDelegate instanceof Mh);const i=this.persistence.referenceDelegate.garbageCollector;return new Ck(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?ai.withCacheSize(this.cacheSizeBytes):ai.DEFAULT;return new EC((i=>Mh.ei(i,t)),this.serializer)}}class Eg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>C0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=MM.bind(null,this.syncEngine),await mM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yM})()}createDatastore(e){const t=hf(e.databaseInfo.databaseId),i=(function(a){return new Zk(a)})(e.databaseInfo);return(function(a,c,d,f){return new nM(a,c,d,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,c,d){return new sM(i,r,a,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>C0(this.syncEngine,t,0)),(function(){return T0.p()?new T0:new Wk})())}createSyncEngine(e,t){return(function(r,a,c,d,f,h,_){const E=new SM(r,a,c,d,f,h);return _&&(E.$a=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=qe(r);Te("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await bu(a),a.Q_.shutdown(),a.K_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Eg.provider={build:()=>new Eg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ge(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(r,a){const c=qe(r),d={documents:a.map((E=>kh(c.serializer,E)))},f=await c.ko("BatchGetDocuments",c.serializer.databaseId,St.emptyPath(),d,a.length),h=new Map;f.forEach((E=>{const A=ck(c.serializer,E);h.set(A.key.toString(),A)}));const _=[];return a.forEach((E=>{const A=h.get(E.toString());lt(!!A),_.push(A)})),_})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new uf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const r=Ne.fromPath(i);this.mutations.push(new lC(r,this.precondition(r)))})),await(async function(i,r){const a=qe(i),c={writes:r.map((d=>yC(a.serializer,d)))};await a.Oo("Commit",a.serializer.databaseId,St.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ke();t=Ue.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ge(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ue.min())?bn.exists(!1):bn.updateTime(t):bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ue.min()))throw new ge(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bn.updateTime(t)}return bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,t,i,r,a){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=a,this.uu=i.maxAttempts,this.r_=new my(this.asyncQueue,"transaction_retry")}cu(){this.uu-=1,this.lu()}lu(){this.r_.jo((async()=>{const e=new OM(this.datastore),t=this.hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((r=>{this.Pu(r)}))))})).catch((i=>{this.Pu(i)}))}))}hu(e){try{const t=this.updateFunction(e);return!Iu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Pu(e){this.uu>0&&this.Tu(e)?(this.uu-=1,this.asyncQueue.enqueueAndForget((()=>(this.lu(),Promise.resolve())))):this.deferred.reject(e)}Tu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!cC(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=qn.UNAUTHENTICATED,this.clientId=iy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async c=>{Te("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Te("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ey(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function $m(n,e){n.asyncQueue.verifyOperationInProgress(),Te("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await AC(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function x0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await BM(n);Te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>E0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>E0(e.remoteStore,r))),n._onlineComponents=e}async function BM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te("FirestoreClient","Using user provided OfflineComponentProvider");try{await $m(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===oe.FAILED_PRECONDITION||r.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;aa("Error using user provided cache. Falling back to memory cache: "+t),await $m(n,new Vh)}}else Te("FirestoreClient","Using default OfflineComponentProvider"),await $m(n,new LM(void 0));return n._offlineComponents}async function Ry(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te("FirestoreClient","Using user provided OnlineComponentProvider"),await x0(n,n._uninitializedComponentsProvider._online)):(Te("FirestoreClient","Using default OnlineComponentProvider"),await x0(n,new Eg))),n._onlineComponents}function HM(n){return Ry(n).then((e=>e.syncEngine))}function GM(n){return Ry(n).then((e=>e.datastore))}async function Lh(n){const e=await Ry(n),t=e.eventManager;return t.onListen=wM.bind(null,e.syncEngine),t.onUnlisten=xM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=CM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RM.bind(null,e.syncEngine),t}function jM(n,e,t={}){const i=new Ms;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,f,h){const _=new xy({next:A=>{_.eu(),c.enqueueAndForget((()=>Sy(a,E)));const R=A.docs.has(d);!R&&A.fromCache?h.reject(new ge(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&A.fromCache&&f&&f.source==="server"?h.reject(new ge(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(A)},error:A=>h.reject(A)}),E=new Cy(rf(d.path),_,{includeMetadataChanges:!0,ua:!0});return Ay(a,E)})(await Lh(n),n.asyncQueue,e,t,i))),i.promise}function zM(n,e,t={}){const i=new Ms;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,f,h){const _=new xy({next:A=>{_.eu(),c.enqueueAndForget((()=>Sy(a,E))),A.fromCache&&f.source==="server"?h.reject(new ge(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(A)},error:A=>h.reject(A)}),E=new Cy(d,_,{includeMetadataChanges:!0,ua:!0});return Ay(a,E)})(await Lh(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(n,e,t){if(!t)throw new ge(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BC(n,e,t,i){if(e===!0&&i===!0)throw new ge(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function b0(n){if(!Ne.isDocumentKey(n))throw new ge(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function N0(n){if(Ne.isDocumentKey(n))throw new ge(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ke()}function Hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mf(n);throw new ge(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $M(n,e){if(e<=0)throw new ge(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new qw;switch(i.type){case"firstParty":return new aD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=R0.get(t);i&&(Te("ComponentProvider","Removing Datastore"),R0.delete(t),i.terminate())})(this),Promise.resolve()}}function HC(n,e,t,i={}){var r;const a=(n=Hn(n,gf))._getSettings(),c=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),i.mockUserToken){let d,f;if(typeof i.mockUserToken=="string")d=i.mockUserToken,f=qn.MOCK_USER;else{d=wS(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new ge(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new qn(h)}n._authCredentials=new sD(new Fw(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hs(this.firestore,e,this._query)}}class _n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class wr extends Hs{constructor(e,t,i){super(e,t,rf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new Ne(e))}withConverter(e){return new wr(this.firestore,e,this._path)}}function an(n,e,...t){if(n=He(n),qC("collection","path",e),n instanceof gf){const i=St.fromString(e,...t);return N0(i),new wr(n,null,i)}{if(!(n instanceof _n||n instanceof wr))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(St.fromString(e,...t));return N0(i),new wr(n.firestore,null,i)}}function Ke(n,e,...t){if(n=He(n),arguments.length===1&&(e=iy.newId()),qC("doc","path",e),n instanceof gf){const i=St.fromString(e,...t);return b0(i),new _n(n,null,new Ne(i))}{if(!(n instanceof _n||n instanceof wr))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(St.fromString(e,...t));return b0(i),new _n(n.firestore,n instanceof wr?n.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new my(this,"async_queue_retry"),this.fu=()=>{const i=zm();i&&Te("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=zm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=zm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise((()=>{}));const t=new Ms;return this.yu((()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Iu.push(e),this.wu())))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ul(e))throw e;Te("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo((()=>this.wu()))}}yu(e){const t=this.gu.then((()=>(this.Ru=!0,e().catch((i=>{this.Au=i,this.Ru=!1;const r=(function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d})(i);throw br("INTERNAL UNHANDLED ERROR: ",r),i})).then((i=>(this.Ru=!1,i))))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const r=Ty.createAndSchedule(this,e,t,i,(a=>this.Su(a)));return this.Eu.push(r),r}pu(){this.Au&&ke()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then((()=>{this.Eu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()}))}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function k0(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1})(n,["next","error","complete"])}class fs extends gf{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new D0,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new D0(e),this._firestoreClient=void 0,await e}}}function GC(n,e){const t=typeof n=="object"?n:zh(),i=typeof n=="string"?n:"(default)",r=_u(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=Fg("firestore");a&&HC(r,...a)}return r}function Ol(n){if(n._terminated)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KM(n),n._firestoreClient}function KM(n){var e,t,i;const r=n._freezeSettings(),a=(function(d,f,h,_){return new AD(d,f,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,FC(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new qM(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Co(Tn.fromBase64String(e))}catch(t){throw new ge(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Co(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=/^__.*__$/;class JM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,t,this.fieldTransforms):new xu(e,this.data,t,this.fieldTransforms)}}class jC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new bo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class by{constructor(e,t,i,r,a,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new by(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.xu({path:i,Nu:!1});return r.Bu(e),r}Lu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.xu({path:i,Nu:!1});return r.Fu(),r}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Oh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(zC(this.Mu)&&YM.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class WM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hf(e)}$u(e,t,i,r=!1){return new by({Mu:e,methodName:t,Ku:i,path:vn.emptyPath(),Nu:!1,Qu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ql(n){const e=n._freezeSettings(),t=hf(n._databaseId);return new WM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ny(n,e,t,i,r,a={}){const c=n.$u(a.merge||a.mergeFields?2:0,e,t,r);Py("Data must be an object, but it was:",c,i);const d=JC(i,c);let f,h;if(a.merge)f=new Ci(c.fieldMask),h=c.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const A=Ag(e,E,t);if(!c.contains(A))throw new ge(oe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);QC(_,A)||_.push(A)}f=new Ci(_),h=c.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,h=c.fieldTransforms;return new JM(new Wn(d),f,h)}class Tf extends yf{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}function $C(n,e,t,i){const r=n.$u(1,e,t);Py("Data must be an object, but it was:",r,i);const a=[],c=Wn.empty();Ro(i,((f,h)=>{const _=Dy(e,f,t);h=He(h);const E=r.Lu(_);if(h instanceof Tf)a.push(_);else{const A=Pu(h,E);A!=null&&(a.push(_),c.set(_,A))}}));const d=new Ci(a);return new jC(c,d,r.fieldTransforms)}function KC(n,e,t,i,r,a){const c=n.$u(1,e,t),d=[Ag(e,i,t)],f=[r];if(a.length%2!=0)throw new ge(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)d.push(Ag(e,a[A])),f.push(a[A+1]);const h=[],_=Wn.empty();for(let A=d.length-1;A>=0;--A)if(!QC(h,d[A])){const R=d[A];let M=f[A];M=He(M);const B=c.Lu(R);if(M instanceof Tf)h.push(R);else{const L=Pu(M,B);L!=null&&(h.push(R),_.set(R,L))}}const E=new Ci(h);return new jC(_,E,c.fieldTransforms)}function YC(n,e,t,i=!1){return Pu(t,n.$u(i?4:3,e))}function Pu(n,e){if(WC(n=He(n)))return Py("Unsupported field value:",e,n),JC(n,e);if(n instanceof yf)return(function(i,r){if(!zC(r.Mu))throw r.qu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return(function(i,r){const a=[];let c=0;for(const d of i){let f=Pu(d,r.ku(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=He(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return jD(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=en.fromDate(i);return{timestampValue:Dh(r.serializer,a)}}if(i instanceof en){const a=new en(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dh(r.serializer,a)}}if(i instanceof vf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Co)return{bytesValue:fC(r.serializer,i._byteString)};if(i instanceof _n){const a=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw r.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:dy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof _f)return(function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw d.qu("VectorValues must only contain numeric values.");return ly(d.serializer,f)}))}}}}}})(i,r);throw r.qu(`Unsupported field value: ${mf(i)}`)})(n,e)}function JC(n,e){const t={};return Bw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ro(n,((i,r)=>{const a=Pu(r,e.Ou(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function WC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof en||n instanceof vf||n instanceof Co||n instanceof _n||n instanceof yf||n instanceof _f)}function Py(n,e,t){if(!WC(t)||!(function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)})(t)){const i=mf(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function Ag(n,e,t){if((e=He(e))instanceof Fl)return e._internalPath;if(typeof e=="string")return Dy(n,e);throw Oh("Field path arguments must be of type string or ",n,!1,void 0,t)}const QM=new RegExp("[~\\*/\\[\\]]");function Dy(n,e,t){if(e.search(QM)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fl(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Oh(n,e,t,i,r){const a=i&&!i.isEmpty(),c=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new ge(oe.INVALID_ARGUMENT,d+n+f)}function QC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ky("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class XM extends gu{data(){return super.data()}}function ky(n,e){return typeof e=="string"?Dy(n,e):e instanceof Fl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class My{}class Ef extends My{}function zi(n,e,...t){let i=[];e instanceof My&&i.push(e),i=i.concat(t),(function(a){const c=a.filter((f=>f instanceof Af)).length,d=a.filter((f=>f instanceof Du)).length;if(c>1||c>0&&d>0)throw new ge(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class Du extends Ef{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Du(e,t,i)}_apply(e){const t=this._parse(e);return eI(e._query,t),new Hs(e.firestore,e.converter,pg(e._query,t))}_parse(e){const t=ql(e.firestore);return(function(a,c,d,f,h,_,E){let A;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){U0(E,_);const R=[];for(const M of E)R.push(M0(f,a,M));A={arrayValue:{values:R}}}else A=M0(f,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||U0(E,_),A=YC(d,c,E,_==="in"||_==="not-in");return Zt.create(h,_,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ds(n,e,t){const i=e,r=ky("where",n);return Du._create(r,i,t)}class Af extends My{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Af(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:hs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,a){let c=r;const d=a.getFlattenedFilters();for(const f of d)eI(c,f),c=pg(c,f)})(e._query,t),new Hs(e.firestore,e.converter,pg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sf extends Ef{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Sf(e,t,i)}_apply(e){return new Hs(e.firestore,e.converter,bh(e._query,this._limit,this._limitType))}}function Sg(n){return $M("limit",n),Sf._create("limit",n,"F")}class wf extends Ef{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new wf(e,t,i)}_apply(e){const t=ZM(e,this.type,this._docOrFields,this._inclusive);return new Hs(e.firestore,e.converter,(function(r,a){return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)})(e._query,t))}}function ZC(...n){return wf._create("startAfter",n,!1)}function ZM(n,e,t,i){if(t[0]=He(t[0]),t[0]instanceof gu)return(function(a,c,d,f,h){if(!f)throw new ge(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const E of fl(a))if(E.field.isKeyField())_.push(xh(c,f.key));else{const A=f.data.field(E.field);if(nf(A))throw new ge(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const R=E.field.canonicalString();throw new ge(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}_.push(A)}return new Il(_,h)})(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=ql(n.firestore);return(function(c,d,f,h,_,E){const A=c.explicitOrderBy;if(_.length>A.length)throw new ge(oe.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let M=0;M<_.length;M++){const B=_[M];if(A[M].field.isKeyField()){if(typeof B!="string")throw new ge(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof B}`);if(!ay(c)&&B.indexOf("/")!==-1)throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${B}' contains a slash.`);const L=c.path.child(St.fromString(B));if(!Ne.isDocumentKey(L))throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const G=new Ne(L);R.push(xh(d,G))}else{const L=YC(f,h,B);R.push(L)}}return new Il(R,E)})(n._query,n.firestore._databaseId,r,e,t,i)}}function M0(n,e,t){if(typeof(t=He(t))=="string"){if(t==="")throw new ge(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ay(e)&&t.indexOf("/")!==-1)throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(St.fromString(t));if(!Ne.isDocumentKey(i))throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return xh(n,new Ne(i))}if(t instanceof _n)return xh(n,t._key);throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mf(t)}.`)}function U0(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eI(n,e){const t=(function(r,a){for(const c of r)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Uy{convertValue(e,t="none"){switch(So(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ro(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,r;const a=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map((c=>$t(c.doubleValue)));return new _f(a)}convertGeoPoint(e){return new vf($t(e.latitude),$t(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=sf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){const t=Eo(e);return new en(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=St.fromString(e);lt(TC(i));const r=new Sl(i.get(1),i.get(3)),a=new Ne(i.popFirst(5));return r.isEqual(t)||br(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class e2 extends Uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cf extends gu{constructor(e,t,i,r,a,c){super(e,t,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ky("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class au extends Cf{data(e={}){return super.data(e)}}class Ly{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new sa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new au(this._firestore,this._userDataWriter,i.key,i,new sa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((d=>{const f=new au(r._firestore,r._userDataWriter,d.doc.key,d.doc,new sa(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new au(r._firestore,r._userDataWriter,d.doc.key,d.doc,new sa(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return d.type!==0&&(h=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:t2(d.type),doc:f,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function t2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(n){n=Hn(n,_n);const e=Hn(n.firestore,fs);return jM(Ol(e),n._key).then((t=>tI(e,n,t)))}class If extends Uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,t)}}function Oy(n){n=Hn(n,Hs);const e=Hn(n.firestore,fs),t=Ol(e),i=new If(e);return XC(n._query),zM(t,n._query).then((r=>new Ly(e,i,n,r)))}function li(n,e,t){n=Hn(n,_n);const i=Hn(n.firestore,fs),r=Vy(n.converter,e,t);return ku(i,[Ny(ql(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,bn.none())])}function Qn(n,e,t,...i){n=Hn(n,_n);const r=Hn(n.firestore,fs),a=ql(r);let c;return c=typeof(e=He(e))=="string"||e instanceof Fl?KC(a,"updateDoc",n._key,e,t,i):$C(a,"updateDoc",n._key,e),ku(r,[c.toMutation(n._key,bn.exists(!0))])}function ol(n){return ku(Hn(n.firestore,fs),[new uf(n._key,bn.none())])}function xf(n,e){const t=Hn(n.firestore,fs),i=Ke(n),r=Vy(n.converter,e);return ku(t,[Ny(ql(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,bn.exists(!1))]).then((()=>i))}function Jn(n,...e){var t,i,r;n=He(n);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||k0(e[c])||(a=e[c],c++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(k0(e[c])){const E=e[c];e[c]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[c+2]=(r=E.complete)===null||r===void 0?void 0:r.bind(E)}let f,h,_;if(n instanceof _n)h=Hn(n.firestore,fs),_=rf(n._key.path),f={next:E=>{e[c]&&e[c](tI(h,n,E))},error:e[c+1],complete:e[c+2]};else{const E=Hn(n,Hs);h=Hn(E.firestore,fs),_=E._query;const A=new If(h);f={next:R=>{e[c]&&e[c](new Ly(h,A,E,R))},error:e[c+1],complete:e[c+2]},XC(n._query)}return(function(A,R,M,B){const L=new xy(B),G=new Cy(R,L,M);return A.asyncQueue.enqueueAndForget((async()=>Ay(await Lh(A),G))),()=>{L.eu(),A.asyncQueue.enqueueAndForget((async()=>Sy(await Lh(A),G)))}})(Ol(h),_,d,f)}function ku(n,e){return(function(i,r){const a=new Ms;return i.asyncQueue.enqueueAndForget((async()=>bM(await HM(i),r,a))),a.promise})(Ol(n),e)}function tI(n,e,t){const i=t.docs.get(e._key),r=new If(n);return new Cf(n,r,e._key,i,new sa(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={maxAttempts:5};function Hc(n,e){if((n=He(n)).firestore!==e)throw new ge(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=ql(t)}get(t){const i=Hc(t,this._firestore),r=new e2(this._firestore);return this._transaction.lookup([i._key]).then((a=>{if(!a||a.length!==1)return ke();const c=a[0];if(c.isFoundDocument())return new gu(this._firestore,r,c.key,c,i.converter);if(c.isNoDocument())return new gu(this._firestore,r,i._key,null,i.converter);throw ke()}))}set(t,i,r){const a=Hc(t,this._firestore),c=Vy(a.converter,i,r),d=Ny(this._dataReader,"Transaction.set",a._key,c,a.converter!==null,r);return this._transaction.set(a._key,d),this}update(t,i,r,...a){const c=Hc(t,this._firestore);let d;return d=typeof(i=He(i))=="string"||i instanceof Fl?KC(this._dataReader,"Transaction.update",c._key,i,r,a):$C(this._dataReader,"Transaction.update",c._key,i),this._transaction.update(c._key,d),this}delete(t){const i=Hc(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hc(e,this._firestore),i=new If(this._firestore);return super.get(e).then((r=>new Cf(this._firestore,i,t._key,r._document,new sa(!1,!1),t.converter)))}}function iI(n,e,t){n=Hn(n,fs);const i=Object.assign(Object.assign({},n2),t);return(function(a){if(a.maxAttempts<1)throw new ge(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(a,c,d){const f=new Ms;return a.asyncQueue.enqueueAndForget((async()=>{const h=await GM(a);new FM(a.asyncQueue,h,d,c,f).cu()})),f.promise})(Ol(n),(r=>e(new nI(n,r))),i)}(function(e,t=!0){(function(r){kl=r})(da),_o(new Ir("firestore",((i,{instanceIdentifier:r,options:a})=>{const c=i.getProvider("app").getImmediate(),d=new fs(new rD(i.getProvider("auth-internal")),new cD(i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ge(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(h.options.projectId,_)})(c,r),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Ki(JE,"4.7.6",e),Ki(JE,"4.7.6","esm2017")})();const sI=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Uy,Bytes:Co,CollectionReference:wr,DocumentReference:_n,DocumentSnapshot:Cf,FieldPath:Fl,FieldValue:yf,Firestore:fs,FirestoreError:ge,GeoPoint:vf,Query:Hs,QueryCompositeFilterConstraint:Af,QueryConstraint:Ef,QueryDocumentSnapshot:au,QueryFieldFilterConstraint:Du,QueryLimitConstraint:Sf,QuerySnapshot:Ly,QueryStartAtConstraint:wf,SnapshotMetadata:sa,Timestamp:en,Transaction:nI,VectorValue:_f,_AutoId:iy,_ByteString:Tn,_DatabaseId:Sl,_DocumentKey:Ne,_EmptyAuthCredentialsProvider:qw,_FieldPath:vn,_cast:Hn,_logWarn:aa,_validateIsNotUsedTogether:BC,addDoc:xf,collection:an,connectFirestoreEmulator:HC,deleteDoc:ol,doc:Ke,ensureFirestoreConfigured:Ol,executeWrite:ku,getDoc:na,getDocs:Oy,getFirestore:GC,limit:Sg,onSnapshot:Jn,query:zi,runTransaction:iI,setDoc:li,startAfter:ZC,updateDoc:Qn,where:Ds},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||t.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="us-central1";class s2{constructor(e,t,i,r,a=wg,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new i2(t,i,r),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=wg}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function r2(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}const V0="@firebase/functions",L0="0.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="auth-internal",a2="app-check-internal",l2="messaging-internal";function c2(n){const e=(t,{instanceIdentifier:i})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider(o2),c=t.getProvider(l2),d=t.getProvider(a2);return new s2(r,a,c,d,i)};_o(new Ir(rI,e,"PUBLIC").setMultipleInstances(!0)),Ki(V0,L0,n),Ki(V0,L0,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(n=zh(),e=wg){const i=_u(He(n),rI).getImmediate({identifier:e}),r=Fg("functions");return r&&d2(i,...r),i}function d2(n,e,t){r2(He(n),e,t)}c2();var h2="firebase",f2="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ki(h2,f2,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="firebasestorage.googleapis.com",p2="storageBucket",m2=120*1e3,g2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Bs{constructor(e,t,i=0){super(Km(e),`Firebase Storage: ${t} (${Km(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Km(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qs||(qs={}));function Km(n){return"storage/"+n}function y2(){const n="An unknown error occurred, please check the error payload for server response.";return new Gs(qs.UNKNOWN,n)}function v2(){return new Gs(qs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _2(){return new Gs(qs.CANCELED,"User canceled the upload/download.")}function T2(n){return new Gs(qs.INVALID_URL,"Invalid URL '"+n+"'.")}function E2(n){return new Gs(qs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function O0(n){return new Gs(qs.INVALID_ARGUMENT,n)}function aI(){return new Gs(qs.APP_DELETED,"The Firebase app was deleted.")}function A2(n){return new Gs(qs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=cs.makeFromUrl(e,t)}catch{return new cs(e,"")}if(i.path==="")return i;throw E2(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)";function a(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+r+c,"i"),f={bucket:1,path:3};function h(X){X.path_=decodeURIComponent(X.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",R=new RegExp(`^https?://${E}/${_}/b/${r}/o${A}`,"i"),M={bucket:1,path:3},B=t===oI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",G=new RegExp(`^https?://${B}/${r}/${L}`,"i"),z=[{regex:d,indices:f,postModify:a},{regex:R,indices:M,postModify:h},{regex:G,indices:{bucket:1,path:2},postModify:h}];for(let X=0;X<z.length;X++){const Y=z[X],ue=Y.regex.exec(e);if(ue){const O=ue[Y.indices.bucket];let N=ue[Y.indices.path];N||(N=""),i=new cs(O,N),Y.postModify(i);break}}if(i==null)throw T2(e);return i}}class S2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(n,e,t){let i=1,r=null,a=null,c=!1,d=0;function f(){return d===2}let h=!1;function _(...L){h||(h=!0,e.apply(null,L))}function E(L){r=setTimeout(()=>{r=null,n(R,f())},L)}function A(){a&&clearTimeout(a)}function R(L,...G){if(h){A();return}if(L){A(),_.call(null,L,...G);return}if(f()||c){A(),_.call(null,L,...G);return}i<64&&(i*=2);let z;d===1?(d=2,z=0):z=(i+Math.random())*1e3,E(z)}let M=!1;function B(L){M||(M=!0,A(),!h&&(r!==null?(L||(d=2),clearTimeout(r),E(0)):L||(d=1)))}return E(0),a=setTimeout(()=>{c=!0,B(!0)},t),B}function C2(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(n){return n!==void 0}function F0(n,e,t,i){if(i<e)throw O0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw O0(`Invalid value for '${n}'. Expected ${t} or less.`)}function x2(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}var Fh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Fh||(Fh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(n,e){const t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||r||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t,i,r,a,c,d,f,h,_,E,A=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=_,this.connectionFactory_=E,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,M)=>{this.resolve_=R,this.reject_=M,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new nh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=d=>{const f=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const d=a.getErrorCode()===Fh.NO_ERROR,f=a.getStatus();if(!d||R2(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Fh.ABORT;i(!1,new nh(!1,null,_));return}const h=this.successCodes_.indexOf(f)!==-1;i(!0,new nh(h,a))})},t=(i,r)=>{const a=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());I2(f)?a(f):a()}catch(f){c(f)}else if(d!==null){const f=y2();f.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,f)):c(f)}else if(r.canceled){const f=this.appDelete_?aI():_2();c(f)}else{const f=v2();c(f)}};this.canceled_?t(!1,new nh(!1,null,!0)):this.backoffId_=w2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&C2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nh{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function N2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function P2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function D2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function k2(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function M2(n,e,t,i,r,a,c=!0){const d=x2(n.urlParams),f=n.url+d,h=Object.assign({},n.headers);return D2(h,e),N2(h,t),P2(h,a),k2(h,i),new b2(f,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function V2(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t){this._service=e,t instanceof cs?this._location=t:this._location=cs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qh(e,t)}get root(){const e=new cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return V2(this._location.path)}get storage(){return this._service}get parent(){const e=U2(this._location.path);if(e===null)return null;const t=new cs(this._location.bucket,e);return new qh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw A2(e)}}function q0(n,e){const t=e?.[p2];return t==null?null:cs.makeFromBucketSpec(t,n)}function L2(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:wS(r,n.app.options.projectId))}class O2{constructor(e,t,i,r,a){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=a,this._bucket=null,this._host=oI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=m2,this._maxUploadRetryTime=g2,this._requests=new Set,r!=null?this._bucket=cs.makeFromBucketSpec(r,this._host):this._bucket=q0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cs.makeFromBucketSpec(this._url,e):this._bucket=q0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){F0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){F0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qh(this,e)}_makeRequest(e,t,i,r,a=!0){if(this._deleted)return new S2(aI());{const c=M2(e,this._appId,i,r,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()}}const B0="@firebase/storage",H0="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="storage";function F2(n=zh(),e){n=He(n);const i=_u(n,lI).getImmediate({identifier:e}),r=Fg("storage");return r&&q2(i,...r),i}function q2(n,e,t,i={}){L2(n,e,t,i)}function B2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new O2(t,i,r,e,da)}function H2(){_o(new Ir(lI,B2,"PUBLIC").setMultipleInstances(!0)),Ki(B0,H0,""),Ki(B0,H0,"esm2017")}H2();const G2={apiKey:"AIzaSyAWRYzgUdSBHcBLKJoVFs0M-r2bI7AYD1s",authDomain:"dukaan-476221.firebaseapp.com",projectId:"dukaan-476221",storageBucket:"dukaan-476221.firebasestorage.app",messagingSenderId:"344365593313",appId:"1:344365593313:web:6846271963a55723bcbda0",measurementId:"G-PBQPEPK818"},j2="dukaan-local-dev";let gr,Cg,Ig,xg,Rg;const cI=()=>(gr||(gr=xS(G2),Cg=GC(gr),Ig=Dw(gr),Rg=u2(gr),xg=F2(gr)),{app:gr,db:Cg,auth:Ig,storage:xg,functions:Rg}),Wi=()=>(gr||cI(),{app:gr,db:Cg,auth:Ig,storage:xg,functions:Rg}),be=j2,Qc=Object.freeze(Object.defineProperty({__proto__:null,appId:be,getFirebaseInstances:Wi,initializeFirebase:cI},Symbol.toStringTag,{value:"Module"}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var bl;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(bl||(bl={}));class Ym extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const z2=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},$2=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},i=t.Plugins=t.Plugins||{},r=()=>e!==null?e.name:z2(n),a=()=>r()!=="web",c=E=>{const A=h.get(E);return!!(A?.platforms.has(r())||d(E))},d=E=>{var A;return(A=t.PluginHeaders)===null||A===void 0?void 0:A.find(R=>R.name===E)},f=E=>n.console.error(E),h=new Map,_=(E,A={})=>{const R=h.get(E);if(R)return console.warn(`Capacitor plugin "${E}" already registered. Cannot register plugins twice.`),R.proxy;const M=r(),B=d(E);let L;const G=async()=>(!L&&M in A?L=typeof A[M]=="function"?L=await A[M]():L=A[M]:e!==null&&!L&&"web"in A&&(L=typeof A.web=="function"?L=await A.web():L=A.web),L),H=(N,D)=>{var k,F;if(B){const U=B?.methods.find(P=>D===P.name);if(U)return U.rtype==="promise"?P=>t.nativePromise(E,D.toString(),P):(P,_e)=>t.nativeCallback(E,D.toString(),P,_e);if(N)return(k=N[D])===null||k===void 0?void 0:k.bind(N)}else{if(N)return(F=N[D])===null||F===void 0?void 0:F.bind(N);throw new Ym(`"${E}" plugin is not implemented on ${M}`,bl.Unimplemented)}},z=N=>{let D;const k=(...F)=>{const U=G().then(P=>{const _e=H(P,N);if(_e){const Oe=_e(...F);return D=Oe?.remove,Oe}else throw new Ym(`"${E}.${N}()" is not implemented on ${M}`,bl.Unimplemented)});return N==="addListener"&&(U.remove=async()=>D()),U};return k.toString=()=>`${N.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:N,writable:!1,configurable:!1}),k},X=z("addListener"),Y=z("removeListener"),ue=(N,D)=>{const k=X({eventName:N},D),F=async()=>{const P=await k;Y({eventName:N,callbackId:P},D)},U=new Promise(P=>k.then(()=>P({remove:F})));return U.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await F()},U},O=new Proxy({},{get(N,D){switch(D){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return B?ue:X;case"removeListener":return Y;default:return z(D)}}});return i[E]=O,h.set(E,{name:E,proxy:O,platforms:new Set([...Object.keys(A),...B?[M]:[]])}),O};return t.convertFileSrc||(t.convertFileSrc=E=>E),t.getPlatform=r,t.handleError=f,t.isNativePlatform=a,t.isPluginAvailable=c,t.registerPlugin=_,t.Exception=Ym,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},K2=n=>n.Capacitor=$2(n),vo=K2(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Rf=vo.registerPlugin;class uI{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),i&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){const r=this.listeners[e];if(!r){if(i){let a=this.retainedEventArguments[e];a||(a=[]),a.push(t),this.retainedEventArguments[e]=a}return}r.forEach(a=>a(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new vo.Exception(e,bl.Unimplemented)}unavailable(e="not available"){return new vo.Exception(e,bl.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const r=i.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const G0=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),j0=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Y2 extends uI{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[r,a]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=j0(r).trim(),a=j0(a).trim(),t[r]=a}),t}async setCookie(e){try{const t=G0(e.key),i=G0(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${r}; path=${a}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Rf("CapacitorCookies",{web:()=>new Y2});const J2=async n=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const r=i.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},i.onerror=r=>t(r),i.readAsDataURL(n)}),W2=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(r=>r.toLocaleLowerCase()).reduce((r,a,c)=>(r[a]=n[e[c]],r),{})},Q2=(n,e=!0)=>n?Object.entries(n).reduce((i,r)=>{const[a,c]=r;let d,f;return Array.isArray(c)?(f="",c.forEach(h=>{d=e?encodeURIComponent(h):h,f+=`${a}=${d}&`}),f.slice(0,-1)):(d=e?encodeURIComponent(c):c,f=`${a}=${d}`),`${i}&${f}`},"").substr(1):null,X2=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),r=W2(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(r.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[c,d]of Object.entries(n.data||{}))a.set(c,d);t.body=a.toString()}else if(r.includes("multipart/form-data")||n.data instanceof FormData){const a=new FormData;if(n.data instanceof FormData)n.data.forEach((d,f)=>{a.append(f,d)});else for(const d of Object.keys(n.data))a.append(d,n.data[d]);t.body=a;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(r.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class Z2 extends uI{async request(e){const t=X2(e,e.webFetchExtra),i=Q2(e.params,e.shouldEncodeUrlParams),r=i?`${e.url}?${i}`:e.url,a=await fetch(r,t),c=a.headers.get("content-type")||"";let{responseType:d="text"}=a.ok?e:{};c.includes("application/json")&&(d="json");let f,h;switch(d){case"arraybuffer":case"blob":h=await a.blob(),f=await J2(h);break;case"json":f=await a.json();break;case"document":case"text":default:f=await a.text()}const _={};return a.headers.forEach((E,A)=>{_[A]=E}),{data:f,headers:_,status:a.status,url:a.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Rf("CapacitorHttp",{web:()=>new Z2});var z0;(function(n){n.IndexedDbLocal="INDEXED_DB_LOCAL",n.InMemory="IN_MEMORY",n.BrowserLocal="BROWSER_LOCAL",n.BrowserSession="BROWSER_SESSION"})(z0||(z0={}));var $0;(function(n){n.APPLE="apple.com",n.FACEBOOK="facebook.com",n.GAME_CENTER="gc.apple.com",n.GITHUB="github.com",n.GOOGLE="google.com",n.MICROSOFT="microsoft.com",n.PLAY_GAMES="playgames.google.com",n.TWITTER="twitter.com",n.YAHOO="yahoo.com",n.PASSWORD="password",n.PHONE="phone"})($0||($0={}));const K0=Rf("FirebaseAuthentication",{web:()=>wi(()=>import("./web-Cb-fUpLe.js"),[]).then(n=>new n.FirebaseAuthenticationWeb)}),dI=$.createContext(null),bf=()=>{const n=$.useContext(dI);if(!n)throw new Error("useAuth must be used within AuthProvider");return n},eU=({children:n})=>{const[e,t]=$.useState(null),[i,r]=$.useState(!0),[a,c]=$.useState(null),[d,f]=$.useState(!1),[h,_]=$.useState(""),[E,A]=$.useState("+91"),[R,M]=$.useState(""),[B,L]=$.useState(""),[G,H]=$.useState(null),[z,X]=$.useState("phone"),[Y,ue]=$.useState(!1),{auth:O,db:N,functions:D}=Wi();$.useEffect(()=>{const V=Wg(O,ne=>{ne?(console.log("[Auth] User authenticated:",ne.uid),t(ne),k(ne.uid)):(console.log("[Auth] No user authenticated"),t(null),c(null)),r(!1)});return()=>V()},[O]);const k=$.useCallback(async V=>{try{console.log("[Auth] Loading profile for UID:",V);const ne=Ke(N,"artifacts",be,"public","data","users",V),ae=await na(ne);if(ae.exists()){const le={id:ae.id,...ae.data()};console.log("[Auth] Profile loaded:",le.name,"Role:",le.role),c(le),f(!1);const ye=window.location.search;new URLSearchParams(ye).get("mode")||(le.role==="shopkeeper"?(console.log("[Auth] Auto-redirecting shopkeeper to dashboard"),window.location.href="?mode=shopkeeper"):le.role==="rider"&&(console.log("[Auth] Auto-redirecting rider to dashboard"),window.location.href="?mode=rider"))}else console.log("[Auth] User authenticated but no profile found for UID:",V),c(null)}catch(ne){console.error("Error loading user profile:",ne),c(null)}},[N]),F=async()=>{if(!h||h.length<10){alert("Please enter a valid 10-digit phone number");return}try{const V=`${E}${h}@dukaan.app`,ne=Ke(N,"artifacts",be,"public","data","users_by_phone",h),ae=await na(ne);if(ae.exists()){const le=ae.data().uid,ye=Ke(N,"artifacts",be,"public","data","users",le),Ce=await na(ye);Ce.exists()&&Ce.data().password?(ue(!1),X("password")):(console.log("[Auth] OTP-only user detected - sending OTP"),ue(!1),await U())}else ue(!0),await U()}catch(V){console.error("[Auth] Error checking user:",V),alert("Error checking user. Please try again.")}},U=async()=>{if(!O){alert("Authentication not initialized. Please refresh the page.");return}try{const V=`${E}${h}`;console.log("[Auth]  Attempting OTP send for:",V);const ne=vo.isNativePlatform();if(console.log("[Auth] Platform:",ne?"NATIVE":"WEB"),ne){console.log("[Auth]  Using Native Phone Auth...");const ae=await K0.signInWithPhoneNumber({phoneNumber:V});console.log("[Auth]  Native OTP sent! Verification ID:",ae.verificationId),H(ae.verificationId),X("otp"),alert("OTP sent to your phone!")}else{console.log("[Auth]  Using Web Phone Auth...");const ae=O.settings?.appVerificationDisabledForTesting;if(window.recaptchaVerifier){try{window.recaptchaVerifier.clear()}catch(Ce){console.log("[Auth] Error clearing old verifier:",Ce)}window.recaptchaVerifier=null}let le;ae?le={type:"recaptcha",verify:async()=>"test-recaptcha-token",_reset:()=>{},_render:()=>Promise.resolve(),clear:()=>{}}:(window.recaptchaVerifier=new Zg(O,"recaptcha-container",{size:"invisible",callback:Ce=>{console.log("[Auth]  reCAPTCHA/Play Integrity callback triggered:",Ce)},"expired-callback":()=>{console.warn("[Auth]  Verification expired - please try again")}}),le=window.recaptchaVerifier);const ye=await ey(O,V,le);console.log("[Auth]  Web OTP sent successfully!"),H(ye),X("otp"),alert("OTP sent to your phone!")}}catch(V){console.error("[Auth]  OTP Error:",V),alert(`Failed to send OTP: ${V.message}`)}},ze={user:e,loading:i,userProfile:a,phoneNumber:h,setPhoneNumber:_,countryCode:E,setCountryCode:A,password:R,setPassword:M,otp:B,setOtp:L,authStep:z,setAuthStep:X,isNewUser:Y,showProfileSetup:d,setShowProfileSetup:f,checkUserExists:F,handleSendOTP:U,handleVerifyOTP:async()=>{if(!B||B.length!==6){alert("Please enter a valid 6-digit OTP");return}if(console.log("[Auth]  Verifying OTP..."),!G){alert("Please request OTP first");return}try{const V=vo.isNativePlatform();let ne;V?(console.log("[Auth]  Verifying Native OTP..."),ne=(await K0.signInWithPhoneNumber({verificationId:G,verificationCode:B})).user,console.log("[Auth]  Native OTP Verified! User:",ne?.uid)):(console.log("[Auth]  Verifying Web OTP..."),ne=(await G.confirm(B)).user,console.log("[Auth]  Web OTP Verified! User:",ne.uid)),Y?(console.log("[Auth] New user - showing registration/profile setup"),f(!0),X("register")):(console.log("[Auth] Existing OTP-only user - login complete"),f(!1),X("phone")),L("")}catch(V){console.error("[Auth]  Verification Error:",V),alert("Invalid OTP. Please try again.")}},handlePasswordLogin:async()=>{if(!R||R.length<6){alert("Please enter your password");return}try{const V=`${E}${h}@dukaan.app`,ne=await cw(O,V,R);console.log("[Auth] Password login successful:",ne.user.uid),f(!1),M(""),_(""),X("phone")}catch(V){console.error("[Auth] Password login error:",V),V.code==="auth/wrong-password"||V.code==="auth/user-not-found"?alert("Incorrect phone number or password"):alert(`Login failed: ${V.message}`)}},handleCompleteRegistration:async V=>{if(!e){alert("Please verify OTP first");return}if(!V.password||V.password.length<6){alert("Password must be at least 6 characters");return}try{const ne=`${E}${h}@dukaan.app`,ae=Ke(N,"artifacts",be,"public","data","users",e.uid);await li(ae,{name:V.name,phoneNumber:`${E}${h}`,password:V.password,email:V.email||"",createdAt:new Date().toISOString()});const le=Ke(N,"artifacts",be,"public","data","users_by_phone",h);if(await li(le,{uid:e.uid,phoneNumber:`${E}${h}`}),V.address&&V.address.street){const ye=Ke(an(N,"artifacts",be,"public","data","addresses"));await li(ye,{userId:e.uid,label:"Home",street:V.address.street,city:V.address.city,state:V.address.state,pincode:V.address.pincode,isDefault:!0,createdAt:new Date().toISOString()})}f(!1),X("phone"),c({id:e.uid,...V,phoneNumber:`${E}${h}`}),alert("Registration successful! You can now login with your phone number and password.")}catch(ne){console.error("Error completing registration:",ne),alert("Failed to complete registration. Please try again.")}},handleLogout:async()=>{try{await pw(O),t(null),c(null),_(""),M(""),X("phone"),alert("Logged out successfully!")}catch(V){console.error("[Auth] Logout error:",V),alert("Failed to logout")}},handleSaveProfile:async V=>{if(e)try{const ne=e.phoneNumber||V.phoneNumber,ae=ne.replace(/[^\d]/g,"").slice(-10),le=Ke(N,"artifacts",be,"public","data","users_by_phone",ae),ye=await na(le);if(ye.exists()&&ye.data().uid!==e.uid){alert("This phone number is already registered. Please use a different number or login with your existing account."),console.error("[Auth] Duplicate phone number detected:",ae,"Existing UID:",ye.data().uid,"Current UID:",e.uid);return}const Ce=Ke(N,"artifacts",be,"public","data","users",e.uid),xe=await na(Ce),vt=xe.exists()?xe.data().role:null;let Ve=V.name;Ve||(Ve=`User${(await Oy(an(N,"artifacts",be,"public","data","users"))).size+1}`,console.log("[Auth] Auto-generated username:",Ve));const Ht={name:Ve,phoneNumber:e.phoneNumber||ne,email:V.email||null,role:vt||"customer",profileCompleted:V.profileCompleted||!1,updatedAt:new Date().toISOString()};xe.exists()||(Ht.createdAt=new Date().toISOString()),V.password&&(Ht.password=V.password),await li(Ce,Ht,{merge:!0}),await li(le,{uid:e.uid,phoneNumber:e.phoneNumber||ne}),f(!1);const Je={id:e.uid,name:Ve,phoneNumber:e.phoneNumber||ne,email:V.email||null,role:vt||"customer",profileCompleted:V.profileCompleted||!1};console.log("[Auth] Profile saved successfully:",Je),c(Je),V.profileCompleted?alert("Welcome to DUKAAN!  You can now start shopping."):alert("Welcome to DUKAAN! You can complete your profile anytime from the Profile tab.")}catch(ne){console.error("Error saving profile:",ne),alert("Failed to save profile. Please try again.")}},handleHostedPhoneLogin:async()=>{if(!h||h.length<10){alert("Please enter a valid 10-digit phone number");return}try{const{Browser:V}=await wi(async()=>{const{Browser:xe}=await import("./index-DfbnoRik.js");return{Browser:xe}},[]),ne="mydukaan://auth-complete",ae=`${E}${h}`,le="dukaan-476221.web.app";let ye=ne;vo.isNativePlatform()||(ye=window.location.origin,console.log("[Auth] Web detected, setting redirect to:",ye));const Ce=`https://${le}/phone-login?phone=${encodeURIComponent(ae)}&redirect=${encodeURIComponent(ye)}`;console.log("[Auth] Opening hosted login:",Ce),await V.open({url:Ce})}catch(V){console.error("[Auth] Error opening hosted login:",V),alert("Failed to open login page")}}};return p.jsx(dI.Provider,{value:ze,children:n})},hI=$.createContext(null),tU=()=>{const n=$.useContext(hI);if(!n)throw new Error("useData must be used within DataProvider");return n},nU=({children:n})=>{const{user:e,userProfile:t}=bf(),{db:i,auth:r}=Wi(),[a,c]=$.useState(null),[d,f]=$.useState([]),[h,_]=$.useState([]),[E,A]=$.useState([]),[R,M]=$.useState([]),[B,L]=$.useState([]),[G,H]=$.useState([]),[z,X]=$.useState([]),[Y,ue]=$.useState(!0);$.useEffect(()=>{if(!r)return;const k=Wg(r,F=>{c(F)});return()=>k()},[r]),$.useEffect(()=>{if(!e&&!a){ue(!1);return}ue(!0)},[e,a]),$.useEffect(()=>{if(!e&&!a)return;const k=zi(an(i,"artifacts",be,"public","data","categories")),F=Jn(k,U=>{const P=U.docs.map(_e=>({id:_e.id,..._e.data()}));_(P)});return()=>F()},[e,a,i]),$.useEffect(()=>{if(!e&&!a)return;const k=zi(an(i,"artifacts",be,"public","data","subcategories")),F=Jn(k,U=>{const P=U.docs.map(_e=>({id:_e.id,..._e.data()}));A(P)});return()=>F()},[e,a,i]),$.useEffect(()=>{if(!e&&!a)return;const k=zi(an(i,"artifacts",be,"public","data","products")),F=Jn(k,U=>{const P=U.docs.map(_e=>({id:_e.id,..._e.data()}));f(P),ue(!1)});return()=>F()},[e,a,i]),$.useEffect(()=>{if(!e)return;const k=zi(an(i,"artifacts",be,"public","data","orders"),Ds("userId","==",e.uid)),F=Jn(k,U=>{const P=U.docs.map(_e=>({id:_e.id,..._e.data()}));P.sort((_e,Oe)=>new Date(Oe.createdAt)-new Date(_e.createdAt)),M(P)});return()=>F()},[e,i]),$.useEffect(()=>{if(!e&&!a||!t||t.role!=="shopkeeper"&&t.role!=="admin")return;const k=zi(an(i,"artifacts",be,"public","data","users")),F=Jn(k,U=>{const P=U.docs.map(_e=>({id:_e.id,..._e.data()}));H(P)});return()=>F()},[e,a,i,t]),$.useEffect(()=>{if(!e&&!a||!t||t.role!=="shopkeeper"&&t.role!=="admin")return;const k=zi(an(i,"artifacts",be,"public","data","riders")),F=Jn(k,U=>{const P=U.docs.map(_e=>({id:_e.id,..._e.data()}));X(P)});return()=>F()},[e,a,i,t]);const O=$.useCallback(async(k,F,U=null)=>{try{const P=Ke(i,"artifacts",be,"public","data","orders",k),_e={deliveryMethod:F,updatedAt:new Date().toISOString()};if(F==="pickup")_e.deliveryAddress="Store Pickup",_e.deliveryInstructions="",_e.selectedAddressId=null;else{if(!U){alert("Please select a delivery address");return}_e.deliveryAddress=U.fullAddress||`${U.street}, ${U.city}, ${U.state} ${U.pincode}`,_e.deliveryInstructions=U.deliveryInstructions||"",_e.selectedAddressId=U.id}await Qn(P,_e),alert(`Order type changed to ${F==="pickup"?"Store Pickup":"Home Delivery"} successfully!`)}catch(P){console.error("Error changing delivery method:",P),alert("Failed to change order type. Please try again.")}},[i]),N=$.useCallback(async(k,F)=>{try{const U=Ke(i,"artifacts",be,"public","data","orders",k);await Qn(U,{status:"cancelled",cancellationReason:F||"Customer cancelled",updatedAt:new Date().toISOString()}),alert("Order cancelled successfully!")}catch(U){console.error("Error cancelling order:",U),alert("Failed to cancel order. Please try again.")}},[i]),D={products:d,categoriesData:h,subcategoriesData:E,orders:R,allOrders:B,allUsers:G,allRiders:z,loading:Y,handleChangeDeliveryMethod:O,handleCancelOrder:N};return p.jsx(hI.Provider,{value:D,children:n})},iU=async(n,e)=>{const t=new Date,i=5.5*60*60*1e3,a=new Date(t.getTime()+i).toISOString().split("T")[0].replace(/-/g,""),c=Ke(n,"artifacts",e,"public","meta","orderCounters",a);try{return await iI(n,async f=>{const h=await f.get(c);let _=1;return h.exists()&&(_=(h.data().counter||0)+1),f.set(c,{counter:_,date:a},{merge:!0}),`DKN-${_.toString().padStart(3,"0")}`})}catch(d){throw console.error("CRITICAL: Failed to generate order number with transaction:",d),new Error("Failed to generate order number. Please check your internet connection and try again.")}},fI=$.createContext(null),sU=()=>{const n=$.useContext(fI);if(!n)throw new Error("useCart must be used within CartProvider");return n},rU=({children:n})=>{const{user:e,userProfile:t}=bf(),{db:i}=Wi(),[r,a]=$.useState(()=>{try{const M=localStorage.getItem("cartItems");return M?JSON.parse(M):{}}catch(M){return console.error("Failed to load cart from storage:",M),{}}}),[c,d]=$.useState("delivery"),[f,h]=$.useState(null);rl.useEffect(()=>{try{localStorage.setItem("cartItems",JSON.stringify(r))}catch(M){console.error("Failed to save cart to storage:",M)}},[r]);const _=$.useCallback((M,B=1)=>{a(L=>{const H=(L[M.id]?.quantity||0)+B;if(H<=0){const z={...L};return delete z[M.id],z}return{...L,[M.id]:{...M,quantity:H}}})},[]),E=$.useCallback(()=>{a({}),localStorage.removeItem("cartItems")},[]),A=$.useCallback(async(M,B,L="en")=>{if(Object.keys(r).length===0)return;if(!t||!t.phoneNumber){alert("Please set up your profile first (Profile tab  Add your details)"),B("Profile");return}if(!t.profileCompleted){alert(`Please complete your profile before placing an order.

Go to Profile  Edit your name and details.`),B("Profile");return}if(c==="delivery"){if(M.length===0){alert("Please add a delivery address first (Profile tab  Manage Addresses)"),B("Profile");return}if(!f){alert("Please select a delivery address");return}}const G=Object.values(r),H=G.reduce((z,X)=>{const Y=X.discountedPrice!==""&&X.discountedPrice!=null?Number(X.discountedPrice):null,ue=Number(X.price)||0,O=Y??ue,N=Number(X.quantity)||0;return z+O*N},0);try{const z=await iU(i,be),X={orderNumber:z,userId:e.uid,customerName:t.name||"Customer",customerPhone:t.phoneNumber||"",customerLanguage:L,items:G.map(Y=>{const ue=Number(Y.price)||0,O=Y.discountedPrice!==""&&Y.discountedPrice!=null?Number(Y.discountedPrice):null,N=O??ue;return{id:Y.id||"",name:Y.name||"",nameEn:Y.nameEn||Y.name||"",nameTe:Y.nameTe||Y.name||"",originalPrice:ue,discountedPrice:O,price:N,quantity:Number(Y.quantity)||0,imageUrl:Y.imageUrl||"",weight:Y.weight||"",category:Y.category||""}}),total:H,totalSavings:G.reduce((Y,ue)=>{const O=Number(ue.price)||0,N=ue.discountedPrice!==""&&ue.discountedPrice!=null?Number(ue.discountedPrice):null,D=Number(ue.quantity)||0;return N!=null&&N<O?Y+(O-N)*D:Y},0),status:"pending",deliveryMethod:c||"delivery",deliveryAddress:c==="delivery"?f?.fullAddress||"":"Store Pickup",deliveryInstructions:c==="delivery"&&f?.deliveryInstructions||"",selectedAddressId:c==="delivery"&&f?.id?f.id:null,deliveryLatitude:c==="delivery"&&f?.latitude?f.latitude:null,deliveryLongitude:c==="delivery"&&f?.longitude?f.longitude:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await xf(an(i,"artifacts",be,"public","data","orders"),X),a({}),B("Orders"),alert(`Order placed successfully! Order Number: ${z}`)}catch(z){console.error("Error placing order:",z),alert(z.message||"Failed to place order. Please try again.")}},[r,e,t,c,f,i]),R={cartItems:r,deliveryMethod:c,setDeliveryMethod:d,selectedAddress:f,setSelectedAddress:h,handleAddToCart:_,clearCart:E,handleCheckout:A};return p.jsx(fI.Provider,{value:R,children:n})},pI=$.createContext(null),oU=()=>{const n=$.useContext(pI);if(!n)throw new Error("useAddress must be used within AddressProvider");return n},aU=({children:n})=>{const{user:e}=bf(),{db:t}=Wi(),[i,r]=$.useState([]),[a,c]=$.useState(!1),[d,f]=$.useState(!1),[h,_]=$.useState(null);$.useEffect(()=>{if(!e)return;const B=zi(an(t,"artifacts",be,"public","data","addresses"),Ds("userId","==",e.uid)),L=Jn(B,G=>{const H=G.docs.map(z=>({id:z.id,...z.data()}));r(H)});return()=>L()},[e,t]);const M={userAddresses:i,showAddressManager:a,setShowAddressManager:c,showAddressForm:d,setShowAddressForm:f,editingAddress:h,setEditingAddress:_,handleSaveAddress:async B=>{if(e)try{h?.id?(await Qn(Ke(t,"artifacts",be,"public","data","addresses",h.id),{...B,updatedAt:new Date().toISOString()}),alert("Address updated successfully!")):(await xf(an(t,"artifacts",be,"public","data","addresses"),{...B,userId:e.uid,isDefault:i.length===0,createdAt:new Date().toISOString()}),alert("Address added successfully!")),f(!1),_(null)}catch(L){console.error("Error saving address:",L),alert("Failed to save address. Please try again.")}},handleDeleteAddress:async B=>{if(!(!e||!window.confirm("Are you sure you want to delete this address?")))try{await ol(Ke(t,"artifacts",be,"public","data","addresses",B)),alert("Address deleted successfully!")}catch(G){console.error("Error deleting address:",G),alert("Failed to delete address. Please try again.")}},handleSetDefaultAddress:async B=>{if(e)try{const L=[];i.forEach(G=>{const H=Ke(t,"artifacts",be,"public","data","addresses",G.id);L.push(Qn(H,{isDefault:!1}))}),await Promise.all(L),await Qn(Ke(t,"artifacts",be,"public","data","addresses",B),{isDefault:!0}),await Qn(Ke(t,"artifacts",be,"public","data","users",e.uid),{defaultAddressId:B}),alert("Default address updated!")}catch(L){console.error("Error setting default address:",L),alert("Failed to set default address. Please try again.")}}};return p.jsx(pI.Provider,{value:M,children:n})},mI=$.createContext(null),lU=()=>{const n=$.useContext(mI);if(!n)throw new Error("useRider must be used within RiderProvider");return n},cU=({children:n})=>{const{db:e,auth:t}=Wi(),[i,r]=$.useState(null),[a,c]=$.useState(!0);$.useEffect(()=>{const A=localStorage.getItem("riderId");A?d(A):c(!1)},[]);const d=async A=>{try{const R=await na(Ke(e,"artifacts",be,"public","data","riders",A));R.exists()&&r({id:R.id,...R.data()}),c(!1)}catch(R){console.error("Error loading rider:",R),c(!1)}},E={rider:i,loading:a,loginRider:async(A,R)=>{try{const M=zi(an(e,"artifacts",be,"public","data","riders"),Ds("phone","==",A));return new Promise((B,L)=>{const G=Jn(M,H=>{if(G(),H.empty){L(new Error("No rider found with this phone number"));return}const z=H.docs[0],X=z.data();if(X.password!==R){L(new Error("Invalid password"));return}const Y={id:z.id,...X};r(Y),localStorage.setItem("riderId",z.id),ag(t).catch(console.error),B(Y)},H=>{G(),L(H)})})}catch(M){throw console.error("Rider login error:",M),M}},logoutRider:()=>{r(null),localStorage.removeItem("riderId")},registerRider:async A=>{try{const R=`rider_${Date.now()}`;await li(Ke(e,"artifacts",be,"public","data","riders",R),{...A,createdAt:new Date().toISOString(),totalOrders:0,activeOrders:0});const M={id:R,...A};return r(M),localStorage.setItem("riderId",R),await ag(t),M}catch(R){throw console.error("Rider registration error:",R),R}}};return p.jsx(mI.Provider,{value:E,children:n})},di={en:{appName:"DUKAAN",search:"Search for groceries, services...",deliveryTo:"Delivery to",categories:{groceries:"Groceries",vegetables:"Vegetables",milk:"Milk",snacks:"Snacks",medicines:"Medicines",electronics:"Electronics"},popularProducts:"Popular Products",addToCart:"Add to Cart",cart:"Cart",orders:"Orders",profile:"Profile",home:"Home",viewCart:"View Cart",items:"Items",checkout:"Checkout",total:"Total",placeOrder:"Place Order",myOrders:"My Orders",logout:"Logout",empty:"Empty",noOrders:"No orders yet",orderPlaced:"Order Placed",processing:"Processing",delivered:"Delivered",admin:"Admin",addProduct:"Add Product",productName:"Product Name",productPrice:"Price",productWeight:"Weight",productImage:"Image URL",category:"Category",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",orderHistory:"Order History",totalOrders:"Total Orders",totalSpent:"Total Spent",enterAdminCode:"Enter Admin Code",adminPanel:"Admin Panel",manageProducts:"Manage Products",shopkeeperDashboard:"Shopkeeper Dashboard",incomingOrders:"Incoming Orders",orderDetails:"Order Details",customer:"Customer",updateStatus:"Update Status",markProcessing:"Mark as Processing",markDelivered:"Mark as Delivered",noIncomingOrders:"No orders yet",ordersTab:"Orders",productsTab:"Products",outOfStock:"Out of Stock",pending:"Pending",accepted:"Accepted",readyForPickup:"Ready for Pickup",outForDelivery:"Out for Delivery",completed:"Completed",cancelled:"Cancelled",voiceSearchResults:"Voice Search Results",searchResults:"Search Results",noProductsFound:"No products found for",noPopularProducts:"No popular products yet. Visit Shopkeeper Dashboard to mark products as popular.",searchingProducts:"Searching for products...",aiSearching:"AI searching...",productNameEn:"Product Name (English)",productNameTe:"Product Name (Telugu)",add:"Add",remove:"Remove",close:"Close",back:"Back",confirm:"Confirm",loading:"Loading...",error:"Error",success:"Success",unavailablePickupDelivery:"unavailable for pickup/delivery",noActiveOrders:"No active orders",activeOrders:"Active Orders",orderDate:"Order Date",qty:"Qty",each:"each",cancellationReason:"Cancellation Reason",homeDelivery:"Home Delivery",storePickup:"Store Pickup",orderTotal:"Order Total",orderID:"Order ID",status:"Status",customerPhone:"Customer Phone",deliveryDetails:"Delivery Details",instructions:"Instructions",itemsOrdered:"Items Ordered",chooseDeliveryMethod:"Choose Delivery Method",deliveryAddress:"Delivery Address",noSavedAddresses:"No saved addresses",addAddress:"Add Address",manageAddresses:"Manage Addresses",confirmOrder:"Confirm Order",proceedToCheckout:"Proceed to Checkout",selectDeliveryAddress:"Please select a delivery address",default:"Default",note:"Note",orderSummary:"Order Summary",orderReadyPickup:"Your order will be ready for pickup at the store.",moneySaved:"Money Saved",printBill:"Print Bill"},te:{appName:"",search:"  ...",deliveryTo:" ",categories:{groceries:"",vegetables:"",milk:"",snacks:"",medicines:"",electronics:""},popularProducts:" ",addToCart:" ",cart:"",orders:"",profile:"",home:"",viewCart:" ",items:"",checkout:"",total:"",placeOrder:" ",myOrders:" ",logout:"",empty:"",noOrders:" ",orderPlaced:" ",processing:" ",delivered:" ",admin:"",addProduct:" ",productName:" ",productPrice:"",productWeight:"",productImage:" URL",category:"",save:" ",cancel:"",delete:"",edit:"",orderHistory:" ",totalOrders:" ",totalSpent:" ",enterAdminCode:"   ",adminPanel:" ",manageProducts:" ",shopkeeperDashboard:" ",incomingOrders:" ",orderDetails:" ",customer:"",updateStatus:"  ",markProcessing:" ",markDelivered:"  ",noIncomingOrders:" ",ordersTab:"",productsTab:"",outOfStock:" ",pending:"",accepted:"",readyForPickup:"   ",outForDelivery:" ",completed:"",cancelled:" ",voiceSearchResults:"  ",searchResults:" ",noProductsFound:"   ",noPopularProducts:"   .     .",searchingProducts:" ...",aiSearching:"AI ...",productNameEn:"  ()",productNameTe:"  ()",add:"",remove:"",close:"",back:"",confirm:"",loading:" ...",error:"",success:"",unavailablePickupDelivery:"/  ",noActiveOrders:"  ",activeOrders:" ",orderDate:" ",qty:"",each:"",cancellationReason:" ",homeDelivery:" ",storePickup:" ",orderTotal:" ",orderID:" ID",status:"",customerPhone:" ",deliveryDetails:" ",instructions:"",itemsOrdered:"  ",chooseDeliveryMethod:"  ",deliveryAddress:" ",noSavedAddresses:"   ",addAddress:" ",manageAddresses:" ",confirmOrder:" ",proceedToCheckout:" ",selectDeliveryAddress:"   ",default:"",note:"",orderSummary:" ",orderReadyPickup:"      ",moneySaved:"  ",printBill:"  "}},Y0=()=>{const[n,e]=$.useState(null);return $.useEffect(()=>{(async()=>{try{const{getFirebaseInstances:i,appId:r}=await wi(async()=>{const{getFirebaseInstances:h,appId:_}=await Promise.resolve().then(()=>Qc);return{getFirebaseInstances:h,appId:_}},void 0),{doc:a,getDoc:c}=await wi(async()=>{const{doc:h,getDoc:_}=await Promise.resolve().then(()=>sI);return{doc:h,getDoc:_}},void 0),{db:d}=i(),f=await c(a(d,"artifacts",r,"public","data","settings","branding"));f.exists()&&f.data().logoUrl?e(f.data().logoUrl):e("/dukaan-logo.png")}catch{console.log("Using default logo"),e("/dukaan-logo.png")}})()},[]),p.jsxs("div",{className:"flex-center p-8",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)"},children:[p.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"24px",padding:"48px",display:"flex",flexDirection:"column",alignItems:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[n?p.jsx("img",{src:n,alt:"DUKAAN Logo",style:{width:"200px",height:"200px",objectFit:"contain",marginBottom:"32px",animation:"pulse 2s ease-in-out infinite"}}):p.jsx("div",{style:{width:"200px",height:"200px",marginBottom:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:p.jsxs("h1",{style:{fontSize:"48px",fontWeight:"700",color:"#2E7D32",textAlign:"center",animation:"pulse 2s ease-in-out infinite"},children:["DUKAAN",p.jsx("br",{}),""]})}),p.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-3 border-white",style:{borderWidth:"4px",borderStyle:"solid",borderColor:"#4CAF50",borderBottomColor:"transparent",borderRadius:"50%",width:"48px",height:"48px",animation:"spin 1s linear infinite"}}),p.jsx("p",{style:{marginTop:"24px",color:"#2E7D32",fontWeight:"600",fontSize:"18px"},children:"Loading..."})]}),p.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dU=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),J0=n=>{const e=dU(n);return e.charAt(0).toUpperCase()+e.slice(1)},gI=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),hU=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=$.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...d},f)=>$.createElement("svg",{ref:f,...fU,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:gI("lucide",r),...!a&&!hU(d)&&{"aria-hidden":"true"},...d},[...c.map(([h,_])=>$.createElement(h,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(n,e)=>{const t=$.forwardRef(({className:i,...r},a)=>$.createElement(pU,{ref:a,iconNode:e,className:gI(`lucide-${uU(J0(n))}`,`lucide-${n}`,i),...r}));return t.displayName=J0(n),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],yI=Ge("bike",mU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],W0=Ge("calendar",gU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vU=Ge("check",yU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ih=Ge("chevron-down",_U);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ci=Ge("chevron-left",TU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],sh=Ge("chevron-up",EU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$i=Ge("circle-check-big",AU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],mh=Ge("circle-plus",SU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ml=Ge("circle-x",wU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yu=Ge("clock",CU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xU=Ge("eye",IU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],bU=Ge("house",RU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],ds=Ge("indian-rupee",NU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Q0=Ge("loader",PU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],gl=Ge("lock",DU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],MU=Ge("log-in",kU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],VU=Ge("log-out",UU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],OU=Ge("mail",LU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],la=Ge("map-pin",FU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],Fy=Ge("mic-off",qU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],qy=Ge("mic",BU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M5 12h14",key:"1ays0h"}]],vI=Ge("minus",HU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],_I=Ge("navigation",GU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Nn=Ge("package",jU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$U=Ge("pen",zU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Vs=Ge("phone",KU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],TI=Ge("plus",YU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],WU=Ge("refresh-cw",JU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yl=Ge("save",QU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],EI=Ge("search",XU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],X0=Ge("settings",ZU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ca=Ge("shopping-bag",eV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],AI=Ge("shopping-cart",tV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],gh=Ge("square-pen",nV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Jm=Ge("star",iV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],rV=Ge("store",sV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Xc=Ge("trash-2",oV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],lV=Ge("trending-up",aV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ks=Ge("truck",cV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Wm=Ge("upload",uV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Z0=Ge("user-plus",dV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],us=Ge("user",hV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pa=Ge("x",fV),eA=({message:n,type:e,onClose:t})=>($.useEffect(()=>{const i=setTimeout(t,5e3);return()=>clearTimeout(i)},[t]),p.jsxs("div",{className:`toast-notification toast-${e}`,children:[p.jsxs("div",{className:"toast-content",children:[e==="success"&&p.jsx($i,{className:"w-5 h-5"}),e==="info"&&p.jsx(Nn,{className:"w-5 h-5"}),p.jsx("p",{children:n})]}),p.jsx("button",{onClick:t,className:"toast-close",children:p.jsx(pa,{className:"w-4 h-4"})})]})),Gc=Rf("VoiceRecorder",{web:()=>wi(()=>import("./web-C0QLzbuf.js").then(n=>n.w),[]).then(n=>new n.VoiceRecorderWeb)});class Io{constructor(){this.mediaRecorder=null,this.audioChunks=[],this.stream=null,this.actualMimeType=null,this.isNative=vo.isNativePlatform(),this.nativeRecording=null,this.audioContext=null,this.analyser=null,this.silenceTimer=null,this.onAutoStop=null}static isSupported(){return vo.isNativePlatform()?!0:!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaRecorder)}async startRecording(e=null){try{if(!Io.isSupported())throw new Error("FEATURE_NOT_SUPPORTED");if(this.onAutoStop=e,this.isNative){if(!(await Gc.hasAudioRecordingPermission()).value&&!(await Gc.requestAudioRecordingPermission()).value)throw{name:"NotAllowedError",message:"Microphone permission denied"};return await Gc.startRecording(),console.log("[AudioRecorder] Native recording started"),e&&(this.silenceTimer=setTimeout(()=>{console.log("[AudioRecorder] Auto-stopping native recording after 5s"),this.onAutoStop&&this.onAutoStop()},5e3)),!0}this.stream=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:16e3,echoCancellation:!0,noiseSuppression:!0}}),this.audioChunks=[];let t=null;MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?t="audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")?t="audio/webm":MediaRecorder.isTypeSupported("audio/ogg;codecs=opus")?t="audio/ogg;codecs=opus":MediaRecorder.isTypeSupported("audio/mp4")&&(t="audio/mp4");const i=t?{mimeType:t}:{};return this.mediaRecorder=new MediaRecorder(this.stream,i),this.actualMimeType=this.mediaRecorder.mimeType||t||"audio/webm",this.mediaRecorder.ondataavailable=r=>{r.data.size>0&&this.audioChunks.push(r.data)},this.mediaRecorder.start(100),e&&this.startSilenceDetection(),console.log("[AudioRecorder] Web recording started with mimeType:",this.actualMimeType),!0}catch(t){throw console.error("[AudioRecorder] Error starting recording:",t),t}}startSilenceDetection(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext);const e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.analyser.smoothingTimeConstant=.8,e.connect(this.analyser);const t=this.analyser.frequencyBinCount,i=new Uint8Array(t);let r=Date.now();const a=20,c=1500,d=800,f=Date.now(),h=()=>{if(!this.analyser||!this.mediaRecorder||this.mediaRecorder.state!=="recording")return;if(this.analyser.getByteFrequencyData(i),i.reduce((E,A)=>E+A,0)/t<a){const E=Date.now()-r,A=Date.now()-f;if(E>c&&A>d){console.log("[AudioRecorder] Silence detected, auto-stopping..."),this.onAutoStop&&this.onAutoStop();return}}else r=Date.now();requestAnimationFrame(h)};h(),console.log("[AudioRecorder] Silence detection started")}catch(e){console.error("[AudioRecorder] Error starting silence detection:",e)}}async stopRecording(){if(this.audioContext){try{await this.audioContext.close()}catch(e){console.log("[AudioRecorder] Error closing audio context:",e)}this.audioContext=null,this.analyser=null}if(this.isNative){this.silenceTimer&&(clearTimeout(this.silenceTimer),this.silenceTimer=null);const e=await Gc.stopRecording();if(!e.value||!e.value.recordDataBase64)throw new Error("No recording data received");console.log("[AudioRecorder] Native recording stopped, duration:",e.value.msDuration,"ms");const t=e.value.recordDataBase64,i=e.value.mimeType||"audio/aac",r=atob(t),a=new Uint8Array(r.length);for(let d=0;d<r.length;d++)a[d]=r.charCodeAt(d);const c=new Blob([a],{type:i});return this.actualMimeType=i,c}return new Promise((e,t)=>{if(!this.mediaRecorder||this.mediaRecorder.state==="inactive"){t(new Error("No active recording"));return}this.mediaRecorder.onstop=async()=>{try{const i=new Blob(this.audioChunks,{type:this.actualMimeType});this.stream&&(this.stream.getTracks().forEach(r=>r.stop()),this.stream=null),console.log("[AudioRecorder] Web recording stopped, blob size:",i.size,"type:",this.actualMimeType),e(i)}catch(i){t(i)}},this.mediaRecorder.stop()})}async cancel(){if(this.audioContext){try{await this.audioContext.close()}catch(e){console.log("[AudioRecorder] Error closing audio context:",e)}this.audioContext=null,this.analyser=null}if(this.isNative){try{await Gc.stopRecording()}catch(e){console.log("[AudioRecorder] Cancel error (may already be stopped):",e)}return}this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop(),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.audioChunks=[]}async blobToBase64(e){return new Promise((t,i)=>{const r=new FileReader;r.onloadend=()=>{const a=r.result.split(",")[1];t(a)},r.onerror=i,r.readAsDataURL(e)})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pV,mV;function gV(){return{geminiUrl:pV,vertexUrl:mV}}function yV(n,e,t,i){var r,a;if(!n?.baseUrl){const c=gV();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(a=c.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ma{}function Se(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function v(n,e,t){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const f=n[d];if(Array.isArray(t))for(let h=0;h<f.length;h++){const _=f[h];v(_,e.slice(a+1),t[h])}else for(const h of f)v(h,e.slice(a+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const f=n[d];v(f[0],e.slice(a+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function g(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const c=n[a];return Array.isArray(c)?c.map(d=>g(d,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function vV(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),a=i.split("."),c=new Set;let d=-1;for(let f=0;f<r.length;f++)if(r[f]==="*"){d=f;break}if(d!==-1&&a.length>d)for(let f=d;f<a.length;f++){const h=a[f];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}bg(n,r,a,0,c)}}function bg(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const c=a.slice(0,-2),d=n;if(c in d&&Array.isArray(d[c]))for(const f of d[c])bg(f,e,t,i+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,d=Object.keys(c).filter(h=>!h.startsWith("_")&&!r.has(h)),f={};for(const h of d)f[h]=c[h];for(const[h,_]of Object.entries(f)){const E=[];for(const A of t.slice(i))A==="*"?E.push(h):E.push(A);v(c,E,_)}for(const h of d)delete c[h]}}else{const c=n;a in c&&bg(c[a],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function By(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _V(n){const e={},t=g(n,["operationName"]);t!=null&&v(e,["operationName"],t);const i=g(n,["resourceName"]);return i!=null&&v(e,["_url","resourceName"],i),e}function TV(n){const e={},t=g(n,["name"]);t!=null&&v(e,["name"],t);const i=g(n,["metadata"]);i!=null&&v(e,["metadata"],i);const r=g(n,["done"]);r!=null&&v(e,["done"],r);const a=g(n,["error"]);a!=null&&v(e,["error"],a);const c=g(n,["response","generateVideoResponse"]);return c!=null&&v(e,["response"],AV(c)),e}function EV(n){const e={},t=g(n,["name"]);t!=null&&v(e,["name"],t);const i=g(n,["metadata"]);i!=null&&v(e,["metadata"],i);const r=g(n,["done"]);r!=null&&v(e,["done"],r);const a=g(n,["error"]);a!=null&&v(e,["error"],a);const c=g(n,["response"]);return c!=null&&v(e,["response"],SV(c)),e}function AV(n){const e={},t=g(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>wV(c))),v(e,["generatedVideos"],a)}const i=g(n,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=g(n,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function SV(n){const e={},t=g(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>CV(c))),v(e,["generatedVideos"],a)}const i=g(n,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=g(n,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function wV(n){const e={},t=g(n,["video"]);return t!=null&&v(e,["video"],RV(t)),e}function CV(n){const e={},t=g(n,["_self"]);return t!=null&&v(e,["video"],bV(t)),e}function IV(n){const e={},t=g(n,["operationName"]);return t!=null&&v(e,["_url","operationName"],t),e}function xV(n){const e={},t=g(n,["operationName"]);return t!=null&&v(e,["_url","operationName"],t),e}function RV(n){const e={},t=g(n,["uri"]);t!=null&&v(e,["uri"],t);const i=g(n,["encodedVideo"]);i!=null&&v(e,["videoBytes"],By(i));const r=g(n,["encoding"]);return r!=null&&v(e,["mimeType"],r),e}function bV(n){const e={},t=g(n,["gcsUri"]);t!=null&&v(e,["uri"],t);const i=g(n,["bytesBase64Encoded"]);i!=null&&v(e,["videoBytes"],By(i));const r=g(n,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var tA;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(tA||(tA={}));var nA;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(nA||(nA={}));var iA;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(iA||(iA={}));var fo;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(fo||(fo={}));var sA;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(sA||(sA={}));var rA;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(rA||(rA={}));var oA;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(oA||(oA={}));var aA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(aA||(aA={}));var lA;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(lA||(lA={}));var cA;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(cA||(cA={}));var uA;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(uA||(uA={}));var dA;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(dA||(dA={}));var hA;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(hA||(hA={}));var fA;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(fA||(fA={}));var pA;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(pA||(pA={}));var mA;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(mA||(mA={}));var Bh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Bh||(Bh={}));var gA;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gA||(gA={}));var Ng;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ng||(Ng={}));var yA;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(yA||(yA={}));var vA;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(vA||(vA={}));var _A;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(_A||(_A={}));var TA;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(TA||(TA={}));var EA;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(EA||(EA={}));var AA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(AA||(AA={}));var SA;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(SA||(SA={}));var wA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(wA||(wA={}));var CA;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(CA||(CA={}));var IA;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(IA||(IA={}));var xA;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(xA||(xA={}));var RA;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(RA||(RA={}));var bA;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(bA||(bA={}));var NA;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(NA||(NA={}));var PA;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(PA||(PA={}));var DA;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(DA||(DA={}));var kA;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(kA||(kA={}));var MA;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(MA||(MA={}));var UA;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(UA||(UA={}));var VA;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(VA||(VA={}));var LA;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(LA||(LA={}));var OA;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(OA||(OA={}));var FA;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(FA||(FA={}));var qA;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(qA||(qA={}));var BA;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(BA||(BA={}));var HA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(HA||(HA={}));var GA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(GA||(GA={}));var jA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(jA||(jA={}));var zA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(zA||(zA={}));var al;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(al||(al={}));class Pg{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class jc{get text(){var e,t,i,r,a,c,d,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const E=[];for(const A of(f=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[R,M]of Object.entries(A))R!=="text"&&R!=="thought"&&(M!==null||M!==void 0)&&E.push(R);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;_=!0,h+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,r,a,c,d,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const E of(f=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[A,R]of Object.entries(E))A!=="inlineData"&&(R!==null||R!==void 0)&&_.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,r,a,c,d,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if(h?.length!==0)return h}get executableCode(){var e,t,i,r,a,c,d,f,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(f=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if(_?.length!==0)return(h=_?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,r,a,c,d,f,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(f=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if(_?.length!==0)return(h=_?.[0])===null||h===void 0?void 0:h.output}}class $A{}class KA{}class NV{}class PV{}class DV{}class kV{}class YA{}class JA{}class WA{}class MV{}class Hh{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new Hh;let r;const a=e;return t?r=EV(a):r=TV(a),Object.assign(i,r),i}}class QA{}class XA{}class ZA{}class UV{}class VV{}class LV{}class eS{}class OV{get text(){var e,t,i;let r="",a=!1;const c=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(d))f!=="text"&&f!=="thought"&&h!==null&&c.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,i;let r="";const a=[];for(const c of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(c))d!=="inlineData"&&f!==null&&a.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class FV{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function SI(n,e){const t=dt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function wI(n){return Array.isArray(n)?n.map(e=>Gh(e)):[Gh(n)]}function Gh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function CI(n){const e=Gh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function II(n){const e=Gh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tS(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function xI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>tS(e)):[tS(n)]}function Dg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function nS(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function iS(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Bn(n){if(n==null)throw new Error("ContentUnion is required");return Dg(n)?n:{role:"user",parts:xI(n)}}function Hy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=Bn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=Bn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Bn(t)):[Bn(e)]}function Yi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(nS(n)||iS(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Bn(n)]}const e=[],t=[],i=Dg(n[0]);for(const r of n){const a=Dg(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(nS(r)||iS(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:xI(t)}),e}function qV(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(fo).includes(t[0].toUpperCase())?t[0].toUpperCase():fo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(fo).includes(i.toUpperCase())?i.toUpperCase():fo.TYPE_UNSPECIFIED})}}function vl(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&qV(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(fo).includes(d.toUpperCase())?d.toUpperCase():fo.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=vl(d);else if(i.includes(c)){const f=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}f.push(vl(h))}e[c]=f}else if(r.includes(c)){const f={};for(const[h,_]of Object.entries(d))f[h]=vl(_);e[c]=f}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Gy(n){return vl(n)}function jy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function zy(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Bl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=vl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=vl(e.response));return n}function Hl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function BV(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Dr(n,e){if(typeof e!="string")throw new Error("name must be a string");return BV(n,e,"cachedContents")}function RI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function No(n){return By(n)}function HV(n){return n!=null&&typeof n=="object"&&"name"in n}function GV(n){return n!=null&&typeof n=="object"&&"video"in n}function jV(n){return n!=null&&typeof n=="object"&&"uri"in n}function bI(n){var e;let t;if(HV(n)&&(t=n.name),!(jV(n)&&(t=n.uri,t===void 0))&&!(GV(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function NI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function PI(n){for(const e of["models","tunedModels","publisherModels"])if(zV(n,e))return n[e];return[]}function zV(n,e){return n!==null&&typeof n=="object"&&e in n}function $V(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function KV(n,e={}){const t=[],i=new Set;for(const r of n){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const c=$V(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function DI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function YV(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function kI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const f=c.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Gl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function MI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JV(n){const e={},t=g(n,["responsesFile"]);t!=null&&v(e,["fileName"],t);const i=g(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>IL(c))),v(e,["inlinedResponses"],a)}const r=g(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),v(e,["inlinedEmbedContentResponses"],a)}return e}function WV(n){const e={},t=g(n,["predictionsFormat"]);t!=null&&v(e,["format"],t);const i=g(n,["gcsDestination","outputUriPrefix"]);i!=null&&v(e,["gcsUri"],i);const r=g(n,["bigqueryDestination","outputUri"]);return r!=null&&v(e,["bigqueryUri"],r),e}function QV(n){const e={},t=g(n,["format"]);t!=null&&v(e,["predictionsFormat"],t);const i=g(n,["gcsUri"]);i!=null&&v(e,["gcsDestination","outputUriPrefix"],i);const r=g(n,["bigqueryUri"]);if(r!=null&&v(e,["bigqueryDestination","outputUri"],r),g(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(g(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function yh(n){const e={},t=g(n,["name"]);t!=null&&v(e,["name"],t);const i=g(n,["metadata","displayName"]);i!=null&&v(e,["displayName"],i);const r=g(n,["metadata","state"]);r!=null&&v(e,["state"],MI(r));const a=g(n,["metadata","createTime"]);a!=null&&v(e,["createTime"],a);const c=g(n,["metadata","endTime"]);c!=null&&v(e,["endTime"],c);const d=g(n,["metadata","updateTime"]);d!=null&&v(e,["updateTime"],d);const f=g(n,["metadata","model"]);f!=null&&v(e,["model"],f);const h=g(n,["metadata","output"]);return h!=null&&v(e,["dest"],JV(kI(h))),e}function kg(n){const e={},t=g(n,["name"]);t!=null&&v(e,["name"],t);const i=g(n,["displayName"]);i!=null&&v(e,["displayName"],i);const r=g(n,["state"]);r!=null&&v(e,["state"],MI(r));const a=g(n,["error"]);a!=null&&v(e,["error"],a);const c=g(n,["createTime"]);c!=null&&v(e,["createTime"],c);const d=g(n,["startTime"]);d!=null&&v(e,["startTime"],d);const f=g(n,["endTime"]);f!=null&&v(e,["endTime"],f);const h=g(n,["updateTime"]);h!=null&&v(e,["updateTime"],h);const _=g(n,["model"]);_!=null&&v(e,["model"],_);const E=g(n,["inputConfig"]);E!=null&&v(e,["src"],XV(E));const A=g(n,["outputConfig"]);return A!=null&&v(e,["dest"],WV(kI(A))),e}function XV(n){const e={},t=g(n,["instancesFormat"]);t!=null&&v(e,["format"],t);const i=g(n,["gcsSource","uris"]);i!=null&&v(e,["gcsUri"],i);const r=g(n,["bigquerySource","inputUri"]);return r!=null&&v(e,["bigqueryUri"],r),e}function ZV(n,e){const t={};if(g(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=g(e,["fileName"]);i!=null&&v(t,["fileName"],i);const r=g(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>CL(n,c))),v(t,["requests","requests"],a)}return t}function eL(n){const e={},t=g(n,["format"]);t!=null&&v(e,["instancesFormat"],t);const i=g(n,["gcsUri"]);i!=null&&v(e,["gcsSource","uris"],i);const r=g(n,["bigqueryUri"]);if(r!=null&&v(e,["bigquerySource","inputUri"],r),g(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function tL(n){const e={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=g(n,["data"]);t!=null&&v(e,["data"],t);const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function nL(n,e){const t={},i=g(e,["name"]);return i!=null&&v(t,["_url","name"],Gl(n,i)),t}function iL(n,e){const t={},i=g(e,["name"]);return i!=null&&v(t,["_url","name"],Gl(n,i)),t}function sL(n){const e={},t=g(n,["content"]);t!=null&&v(e,["content"],t);const i=g(n,["citationMetadata"]);i!=null&&v(e,["citationMetadata"],rL(i));const r=g(n,["tokenCount"]);r!=null&&v(e,["tokenCount"],r);const a=g(n,["finishReason"]);a!=null&&v(e,["finishReason"],a);const c=g(n,["urlContextMetadata"]);c!=null&&v(e,["urlContextMetadata"],c);const d=g(n,["avgLogprobs"]);d!=null&&v(e,["avgLogprobs"],d);const f=g(n,["groundingMetadata"]);f!=null&&v(e,["groundingMetadata"],f);const h=g(n,["index"]);h!=null&&v(e,["index"],h);const _=g(n,["logprobsResult"]);_!=null&&v(e,["logprobsResult"],_);const E=g(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(R=>R)),v(e,["safetyRatings"],A)}return e}function rL(n){const e={},t=g(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["citations"],i)}return e}function UI(n){const e={},t=g(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>kL(a))),v(e,["parts"],r)}const i=g(n,["role"]);return i!=null&&v(e,["role"],i),e}function oL(n,e){const t={},i=g(n,["displayName"]);if(e!==void 0&&i!=null&&v(e,["batch","displayName"],i),g(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function aL(n,e){const t={},i=g(n,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const r=g(n,["dest"]);return e!==void 0&&r!=null&&v(e,["outputConfig"],QV(YV(r))),t}function sS(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["src"]);r!=null&&v(t,["batch","inputConfig"],ZV(n,DI(n,r)));const a=g(e,["config"]);return a!=null&&oL(a,t),t}function lL(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["model"],dt(n,i));const r=g(e,["src"]);r!=null&&v(t,["inputConfig"],eL(DI(n,r)));const a=g(e,["config"]);return a!=null&&aL(a,t),t}function cL(n,e){const t={},i=g(n,["displayName"]);return e!==void 0&&i!=null&&v(e,["batch","displayName"],i),t}function uL(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["src"]);r!=null&&v(t,["batch","inputConfig"],yL(n,r));const a=g(e,["config"]);return a!=null&&cL(a,t),t}function dL(n,e){const t={},i=g(e,["name"]);return i!=null&&v(t,["_url","name"],Gl(n,i)),t}function hL(n,e){const t={},i=g(e,["name"]);return i!=null&&v(t,["_url","name"],Gl(n,i)),t}function fL(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["name"]);i!=null&&v(e,["name"],i);const r=g(n,["done"]);r!=null&&v(e,["done"],r);const a=g(n,["error"]);return a!=null&&v(e,["error"],a),e}function pL(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["name"]);i!=null&&v(e,["name"],i);const r=g(n,["done"]);r!=null&&v(e,["done"],r);const a=g(n,["error"]);return a!=null&&v(e,["error"],a),e}function mL(n,e){const t={},i=g(e,["contents"]);if(i!=null){let a=Hy(n,i);Array.isArray(a)&&(a=a.map(c=>c)),v(t,["requests[]","request","content"],a)}const r=g(e,["config"]);return r!=null&&(v(t,["_self"],gL(r,t)),vV(t,{"requests[].*":"requests[].request.*"})),t}function gL(n,e){const t={},i=g(n,["taskType"]);e!==void 0&&i!=null&&v(e,["requests[]","taskType"],i);const r=g(n,["title"]);e!==void 0&&r!=null&&v(e,["requests[]","title"],r);const a=g(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&v(e,["requests[]","outputDimensionality"],a),g(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function yL(n,e){const t={},i=g(e,["fileName"]);i!=null&&v(t,["file_name"],i);const r=g(e,["inlinedRequests"]);return r!=null&&v(t,["requests"],mL(n,r)),t}function vL(n){const e={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=g(n,["fileUri"]);t!=null&&v(e,["fileUri"],t);const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function _L(n,e,t){const i={},r=g(e,["systemInstruction"]);t!==void 0&&r!=null&&v(t,["systemInstruction"],UI(Bn(r)));const a=g(e,["temperature"]);a!=null&&v(i,["temperature"],a);const c=g(e,["topP"]);c!=null&&v(i,["topP"],c);const d=g(e,["topK"]);d!=null&&v(i,["topK"],d);const f=g(e,["candidateCount"]);f!=null&&v(i,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&v(i,["maxOutputTokens"],h);const _=g(e,["stopSequences"]);_!=null&&v(i,["stopSequences"],_);const E=g(e,["responseLogprobs"]);E!=null&&v(i,["responseLogprobs"],E);const A=g(e,["logprobs"]);A!=null&&v(i,["logprobs"],A);const R=g(e,["presencePenalty"]);R!=null&&v(i,["presencePenalty"],R);const M=g(e,["frequencyPenalty"]);M!=null&&v(i,["frequencyPenalty"],M);const B=g(e,["seed"]);B!=null&&v(i,["seed"],B);const L=g(e,["responseMimeType"]);L!=null&&v(i,["responseMimeType"],L);const G=g(e,["responseSchema"]);G!=null&&v(i,["responseSchema"],Gy(G));const H=g(e,["responseJsonSchema"]);if(H!=null&&v(i,["responseJsonSchema"],H),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=g(e,["safetySettings"]);if(t!==void 0&&z!=null){let U=z;Array.isArray(U)&&(U=U.map(P=>ML(P))),v(t,["safetySettings"],U)}const X=g(e,["tools"]);if(t!==void 0&&X!=null){let U=Hl(X);Array.isArray(U)&&(U=U.map(P=>UL(Bl(P)))),v(t,["tools"],U)}const Y=g(e,["toolConfig"]);if(t!==void 0&&Y!=null&&v(t,["toolConfig"],Y),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=g(e,["cachedContent"]);t!==void 0&&ue!=null&&v(t,["cachedContent"],Dr(n,ue));const O=g(e,["responseModalities"]);O!=null&&v(i,["responseModalities"],O);const N=g(e,["mediaResolution"]);N!=null&&v(i,["mediaResolution"],N);const D=g(e,["speechConfig"]);if(D!=null&&v(i,["speechConfig"],jy(D)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=g(e,["thinkingConfig"]);k!=null&&v(i,["thinkingConfig"],k);const F=g(e,["imageConfig"]);return F!=null&&v(i,["imageConfig"],F),i}function TL(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>sL(h))),v(e,["candidates"],f)}const r=g(n,["modelVersion"]);r!=null&&v(e,["modelVersion"],r);const a=g(n,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const c=g(n,["responseId"]);c!=null&&v(e,["responseId"],c);const d=g(n,["usageMetadata"]);return d!=null&&v(e,["usageMetadata"],d),e}function EL(n,e){const t={},i=g(e,["name"]);return i!=null&&v(t,["_url","name"],Gl(n,i)),t}function AL(n,e){const t={},i=g(e,["name"]);return i!=null&&v(t,["_url","name"],Gl(n,i)),t}function SL(n){const e={};if(g(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=g(n,["enableWidget"]);return t!=null&&v(e,["enableWidget"],t),e}function wL(n){const e={},t=g(n,["timeRangeFilter"]);if(t!=null&&v(e,["timeRangeFilter"],t),g(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function CL(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["request","model"],dt(n,i));const r=g(e,["contents"]);if(r!=null){let d=Yi(r);Array.isArray(d)&&(d=d.map(f=>UI(f))),v(t,["request","contents"],d)}const a=g(e,["metadata"]);a!=null&&v(t,["metadata"],a);const c=g(e,["config"]);return c!=null&&v(t,["request","generationConfig"],_L(n,c,g(t,["request"],{}))),t}function IL(n){const e={},t=g(n,["response"]);t!=null&&v(e,["response"],TL(t));const i=g(n,["error"]);return i!=null&&v(e,["error"],i),e}function xL(n,e){const t={},i=g(n,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=g(n,["pageToken"]);if(e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),g(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function RL(n,e){const t={},i=g(n,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=g(n,["pageToken"]);e!==void 0&&r!=null&&v(e,["_query","pageToken"],r);const a=g(n,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),t}function bL(n){const e={},t=g(n,["config"]);return t!=null&&xL(t,e),e}function NL(n){const e={},t=g(n,["config"]);return t!=null&&RL(t,e),e}function PL(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=g(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>yh(c))),v(e,["batchJobs"],a)}return e}function DL(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=g(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>kg(c))),v(e,["batchJobs"],a)}return e}function kL(n){const e={},t=g(n,["videoMetadata"]);t!=null&&v(e,["videoMetadata"],t);const i=g(n,["thought"]);i!=null&&v(e,["thought"],i);const r=g(n,["inlineData"]);r!=null&&v(e,["inlineData"],tL(r));const a=g(n,["fileData"]);a!=null&&v(e,["fileData"],vL(a));const c=g(n,["thoughtSignature"]);c!=null&&v(e,["thoughtSignature"],c);const d=g(n,["functionCall"]);d!=null&&v(e,["functionCall"],d);const f=g(n,["codeExecutionResult"]);f!=null&&v(e,["codeExecutionResult"],f);const h=g(n,["executableCode"]);h!=null&&v(e,["executableCode"],h);const _=g(n,["functionResponse"]);_!=null&&v(e,["functionResponse"],_);const E=g(n,["text"]);return E!=null&&v(e,["text"],E),e}function ML(n){const e={};if(g(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=g(n,["category"]);t!=null&&v(e,["category"],t);const i=g(n,["threshold"]);return i!=null&&v(e,["threshold"],i),e}function UL(n){const e={},t=g(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(_=>_)),v(e,["functionDeclarations"],h)}if(g(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(n,["googleSearch"]);i!=null&&v(e,["googleSearch"],wL(i));const r=g(n,["googleSearchRetrieval"]);if(r!=null&&v(e,["googleSearchRetrieval"],r),g(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(n,["googleMaps"]);a!=null&&v(e,["googleMaps"],SL(a));const c=g(n,["urlContext"]);c!=null&&v(e,["urlContext"],c);const d=g(n,["computerUse"]);d!=null&&v(e,["computerUse"],d);const f=g(n,["codeExecution"]);return f!=null&&v(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ua;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ua||(ua={}));class Mu{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VL extends ma{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Mu(ua.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=sS(this.apiClient,e),i=t._url,r=Se("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,f=d.requests,h=[];for(const _ of f){const E=Object.assign({},_);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const R=E.request;R.systemInstruction=A,E.request=R}h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(c)i.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=lL(this.apiClient,e);return d=Se("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>kg(_))}else{const h=sS(this.apiClient,e);return d=Se("{model}:batchGenerateContent",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>yh(_))}}async createEmbeddingsInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uL(this.apiClient,e);return a=Se("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>yh(f))}}async get(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=AL(this.apiClient,e);return d=Se("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>kg(_))}else{const h=EL(this.apiClient,e);return d=Se("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>yh(_))}}async cancel(e){var t,i,r,a;let c="",d={};if(this.apiClient.isVertexAI()){const f=iL(this.apiClient,e);c=Se("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=nL(this.apiClient,e);c=Se("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=NL(e);return d=Se("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=DL(_),A=new eS;return Object.assign(A,E),A})}else{const h=bL(e);return d=Se("batches",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=PL(_),A=new eS;return Object.assign(A,E),A})}}async delete(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=hL(this.apiClient,e);return d=Se("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>pL(_))}else{const h=dL(this.apiClient,e);return d=Se("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>fL(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LL(n){const e={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=g(n,["data"]);t!=null&&v(e,["data"],t);const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function rS(n){const e={},t=g(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>sO(a))),v(e,["parts"],r)}const i=g(n,["role"]);return i!=null&&v(e,["role"],i),e}function OL(n,e){const t={},i=g(n,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=g(n,["expireTime"]);e!==void 0&&r!=null&&v(e,["expireTime"],r);const a=g(n,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const c=g(n,["contents"]);if(e!==void 0&&c!=null){let _=Yi(c);Array.isArray(_)&&(_=_.map(E=>rS(E))),v(e,["contents"],_)}const d=g(n,["systemInstruction"]);e!==void 0&&d!=null&&v(e,["systemInstruction"],rS(Bn(d)));const f=g(n,["tools"]);if(e!==void 0&&f!=null){let _=f;Array.isArray(_)&&(_=_.map(E=>rO(E))),v(e,["tools"],_)}const h=g(n,["toolConfig"]);if(e!==void 0&&h!=null&&v(e,["toolConfig"],h),g(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function FL(n,e){const t={},i=g(n,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=g(n,["expireTime"]);e!==void 0&&r!=null&&v(e,["expireTime"],r);const a=g(n,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const c=g(n,["contents"]);if(e!==void 0&&c!=null){let E=Yi(c);Array.isArray(E)&&(E=E.map(A=>A)),v(e,["contents"],E)}const d=g(n,["systemInstruction"]);e!==void 0&&d!=null&&v(e,["systemInstruction"],Bn(d));const f=g(n,["tools"]);if(e!==void 0&&f!=null){let E=f;Array.isArray(E)&&(E=E.map(A=>oO(A))),v(e,["tools"],E)}const h=g(n,["toolConfig"]);e!==void 0&&h!=null&&v(e,["toolConfig"],h);const _=g(n,["kmsKeyName"]);return e!==void 0&&_!=null&&v(e,["encryption_spec","kmsKeyName"],_),t}function qL(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["model"],SI(n,i));const r=g(e,["config"]);return r!=null&&OL(r,t),t}function BL(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["model"],SI(n,i));const r=g(e,["config"]);return r!=null&&FL(r,t),t}function HL(n,e){const t={},i=g(e,["name"]);return i!=null&&v(t,["_url","name"],Dr(n,i)),t}function GL(n,e){const t={},i=g(e,["name"]);return i!=null&&v(t,["_url","name"],Dr(n,i)),t}function jL(n){const e={},t=g(n,["sdkHttpResponse"]);return t!=null&&v(e,["sdkHttpResponse"],t),e}function zL(n){const e={},t=g(n,["sdkHttpResponse"]);return t!=null&&v(e,["sdkHttpResponse"],t),e}function $L(n){const e={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=g(n,["fileUri"]);t!=null&&v(e,["fileUri"],t);const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function KL(n){const e={};if(g(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=g(n,["description"]);t!=null&&v(e,["description"],t);const i=g(n,["name"]);i!=null&&v(e,["name"],i);const r=g(n,["parameters"]);r!=null&&v(e,["parameters"],r);const a=g(n,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const c=g(n,["response"]);c!=null&&v(e,["response"],c);const d=g(n,["responseJsonSchema"]);return d!=null&&v(e,["responseJsonSchema"],d),e}function YL(n,e){const t={},i=g(e,["name"]);return i!=null&&v(t,["_url","name"],Dr(n,i)),t}function JL(n,e){const t={},i=g(e,["name"]);return i!=null&&v(t,["_url","name"],Dr(n,i)),t}function WL(n){const e={};if(g(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=g(n,["enableWidget"]);return t!=null&&v(e,["enableWidget"],t),e}function QL(n){const e={},t=g(n,["timeRangeFilter"]);if(t!=null&&v(e,["timeRangeFilter"],t),g(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function XL(n,e){const t={},i=g(n,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=g(n,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),t}function ZL(n,e){const t={},i=g(n,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=g(n,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),t}function eO(n){const e={},t=g(n,["config"]);return t!=null&&XL(t,e),e}function tO(n){const e={},t=g(n,["config"]);return t!=null&&ZL(t,e),e}function nO(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=g(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),v(e,["cachedContents"],a)}return e}function iO(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=g(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),v(e,["cachedContents"],a)}return e}function sO(n){const e={},t=g(n,["videoMetadata"]);t!=null&&v(e,["videoMetadata"],t);const i=g(n,["thought"]);i!=null&&v(e,["thought"],i);const r=g(n,["inlineData"]);r!=null&&v(e,["inlineData"],LL(r));const a=g(n,["fileData"]);a!=null&&v(e,["fileData"],$L(a));const c=g(n,["thoughtSignature"]);c!=null&&v(e,["thoughtSignature"],c);const d=g(n,["functionCall"]);d!=null&&v(e,["functionCall"],d);const f=g(n,["codeExecutionResult"]);f!=null&&v(e,["codeExecutionResult"],f);const h=g(n,["executableCode"]);h!=null&&v(e,["executableCode"],h);const _=g(n,["functionResponse"]);_!=null&&v(e,["functionResponse"],_);const E=g(n,["text"]);return E!=null&&v(e,["text"],E),e}function rO(n){const e={},t=g(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(_=>_)),v(e,["functionDeclarations"],h)}if(g(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(n,["googleSearch"]);i!=null&&v(e,["googleSearch"],QL(i));const r=g(n,["googleSearchRetrieval"]);if(r!=null&&v(e,["googleSearchRetrieval"],r),g(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(n,["googleMaps"]);a!=null&&v(e,["googleMaps"],WL(a));const c=g(n,["urlContext"]);c!=null&&v(e,["urlContext"],c);const d=g(n,["computerUse"]);d!=null&&v(e,["computerUse"],d);const f=g(n,["codeExecution"]);return f!=null&&v(e,["codeExecution"],f),e}function oO(n){const e={},t=g(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>KL(A))),v(e,["functionDeclarations"],E)}const i=g(n,["retrieval"]);i!=null&&v(e,["retrieval"],i);const r=g(n,["googleSearch"]);r!=null&&v(e,["googleSearch"],r);const a=g(n,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],a);const c=g(n,["enterpriseWebSearch"]);c!=null&&v(e,["enterpriseWebSearch"],c);const d=g(n,["googleMaps"]);d!=null&&v(e,["googleMaps"],d);const f=g(n,["urlContext"]);f!=null&&v(e,["urlContext"],f);const h=g(n,["computerUse"]);h!=null&&v(e,["computerUse"],h);const _=g(n,["codeExecution"]);return _!=null&&v(e,["codeExecution"],_),e}function aO(n,e){const t={},i=g(n,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=g(n,["expireTime"]);return e!==void 0&&r!=null&&v(e,["expireTime"],r),t}function lO(n,e){const t={},i=g(n,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=g(n,["expireTime"]);return e!==void 0&&r!=null&&v(e,["expireTime"],r),t}function cO(n,e){const t={},i=g(e,["name"]);i!=null&&v(t,["_url","name"],Dr(n,i));const r=g(e,["config"]);return r!=null&&aO(r,t),t}function uO(n,e){const t={},i=g(e,["name"]);i!=null&&v(t,["_url","name"],Dr(n,i));const r=g(e,["config"]);return r!=null&&lO(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dO extends ma{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mu(ua.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=BL(this.apiClient,e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const h=qL(this.apiClient,e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async get(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=JL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const h=YL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async delete(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=GL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=zL(_),A=new XA;return Object.assign(A,E),A})}else{const h=HL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=jL(_),A=new XA;return Object.assign(A,E),A})}}async update(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=uO(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const h=cO(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async listInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=tO(e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=iO(_),A=new ZA;return Object.assign(A,E),A})}else{const h=eO(e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=nO(_),A=new ZA;return Object.assign(A,E),A})}}}function oS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pt(n){return this instanceof Pt?(this.v=n,this):new Pt(n)}function _l(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(R){return function(M){return Promise.resolve(M).then(R,E)}}function d(R,M){i[R]&&(r[R]=function(B){return new Promise(function(L,G){a.push([R,B,L,G])>1||f(R,B)})},M&&(r[R]=M(r[R])))}function f(R,M){try{h(i[R](M))}catch(B){A(a[0][3],B)}}function h(R){R.value instanceof Pt?Promise.resolve(R.value.v).then(_,E):A(a[0][2],R)}function _(R){f("next",R)}function E(R){f("throw",R)}function A(R,M){R(M),a.shift(),a.length&&f(a[0][0],a[0][1])}}function lu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof oS=="function"?oS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(c){return new Promise(function(d,f){c=n[a](c),r(d,f,c.done,c.value)})}}function r(a,c,d,f){Promise.resolve(f).then(function(h){a({value:h,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hO(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:VI(t)}function VI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function fO(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function aS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let a=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),a&&!VI(n[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class pO{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new mO(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class mO{constructor(e,t,i,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),fO(a)}async sendMessage(e){var t;await this.sendPromise;const i=Bn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,c,d;const f=await r,h=(c=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,_=f.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];_!=null&&(A=(d=_.slice(E))!==null&&d!==void 0?d:[]);const R=h?[h]:[];this.recordHistory(i,R,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=Bn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?aS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,r;return _l(this,arguments,function*(){var c,d,f,h;const _=[];try{for(var E=!0,A=lu(e),R;R=yield Pt(A.next()),c=R.done,!c;E=!0){h=R.value,E=!1;const M=h;if(hO(M)){const B=(r=(i=M.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;B!==void 0&&_.push(B)}yield yield Pt(M)}}catch(M){d={error:M}}finally{try{!E&&!c&&(f=A.return)&&(yield Pt(f.call(A)))}finally{if(d)throw d.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...aS(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Nf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gO(n){const e={},t=g(n,["file"]);return t!=null&&v(e,["file"],t),e}function yO(n){const e={},t=g(n,["sdkHttpResponse"]);return t!=null&&v(e,["sdkHttpResponse"],t),e}function vO(n){const e={},t=g(n,["name"]);return t!=null&&v(e,["_url","file"],bI(t)),e}function _O(n){const e={},t=g(n,["sdkHttpResponse"]);return t!=null&&v(e,["sdkHttpResponse"],t),e}function TO(n){const e={},t=g(n,["name"]);return t!=null&&v(e,["_url","file"],bI(t)),e}function EO(n,e){const t={},i=g(n,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=g(n,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),t}function AO(n){const e={},t=g(n,["config"]);return t!=null&&EO(t,e),e}function SO(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=g(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),v(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wO extends ma{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mu(ua.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=AO(e);return a=Se("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),r.then(f=>{const h=SO(f),_=new UV;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gO(e);return a=Se("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const h=yO(f),_=new VV;return Object.assign(_,h),_})}}async get(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=TO(e);return a=Se("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=vO(e);return a=Se("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),r.then(f=>{const h=_O(f),_=new LV;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vh(n){const e={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=g(n,["data"]);t!=null&&v(e,["data"],t);const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function CO(n){const e={},t=g(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>qO(a))),v(e,["parts"],r)}const i=g(n,["role"]);return i!=null&&v(e,["role"],i),e}function IO(n){const e={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=g(n,["fileUri"]);t!=null&&v(e,["fileUri"],t);const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function xO(n){const e={};if(g(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=g(n,["description"]);t!=null&&v(e,["description"],t);const i=g(n,["name"]);i!=null&&v(e,["name"],i);const r=g(n,["parameters"]);r!=null&&v(e,["parameters"],r);const a=g(n,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const c=g(n,["response"]);c!=null&&v(e,["response"],c);const d=g(n,["responseJsonSchema"]);return d!=null&&v(e,["responseJsonSchema"],d),e}function RO(n){const e={},t=g(n,["modelSelectionConfig"]);t!=null&&v(e,["modelConfig"],t);const i=g(n,["audioTimestamp"]);i!=null&&v(e,["audioTimestamp"],i);const r=g(n,["candidateCount"]);r!=null&&v(e,["candidateCount"],r);const a=g(n,["enableAffectiveDialog"]);a!=null&&v(e,["enableAffectiveDialog"],a);const c=g(n,["frequencyPenalty"]);c!=null&&v(e,["frequencyPenalty"],c);const d=g(n,["logprobs"]);d!=null&&v(e,["logprobs"],d);const f=g(n,["maxOutputTokens"]);f!=null&&v(e,["maxOutputTokens"],f);const h=g(n,["mediaResolution"]);h!=null&&v(e,["mediaResolution"],h);const _=g(n,["presencePenalty"]);_!=null&&v(e,["presencePenalty"],_);const E=g(n,["responseJsonSchema"]);E!=null&&v(e,["responseJsonSchema"],E);const A=g(n,["responseLogprobs"]);A!=null&&v(e,["responseLogprobs"],A);const R=g(n,["responseMimeType"]);R!=null&&v(e,["responseMimeType"],R);const M=g(n,["responseModalities"]);M!=null&&v(e,["responseModalities"],M);const B=g(n,["responseSchema"]);B!=null&&v(e,["responseSchema"],B);const L=g(n,["routingConfig"]);L!=null&&v(e,["routingConfig"],L);const G=g(n,["seed"]);G!=null&&v(e,["seed"],G);const H=g(n,["speechConfig"]);H!=null&&v(e,["speechConfig"],LI(H));const z=g(n,["stopSequences"]);z!=null&&v(e,["stopSequences"],z);const X=g(n,["temperature"]);X!=null&&v(e,["temperature"],X);const Y=g(n,["thinkingConfig"]);Y!=null&&v(e,["thinkingConfig"],Y);const ue=g(n,["topK"]);ue!=null&&v(e,["topK"],ue);const O=g(n,["topP"]);if(O!=null&&v(e,["topP"],O),g(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function bO(n){const e={};if(g(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=g(n,["enableWidget"]);return t!=null&&v(e,["enableWidget"],t),e}function NO(n){const e={},t=g(n,["timeRangeFilter"]);if(t!=null&&v(e,["timeRangeFilter"],t),g(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function PO(n,e){const t={},i=g(n,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],i);const r=g(n,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);const a=g(n,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const c=g(n,["topP"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topP"],c);const d=g(n,["topK"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","topK"],d);const f=g(n,["maxOutputTokens"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","maxOutputTokens"],f);const h=g(n,["mediaResolution"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","mediaResolution"],h);const _=g(n,["seed"]);e!==void 0&&_!=null&&v(e,["setup","generationConfig","seed"],_);const E=g(n,["speechConfig"]);e!==void 0&&E!=null&&v(e,["setup","generationConfig","speechConfig"],zy(E));const A=g(n,["thinkingConfig"]);e!==void 0&&A!=null&&v(e,["setup","generationConfig","thinkingConfig"],A);const R=g(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],R);const M=g(n,["systemInstruction"]);e!==void 0&&M!=null&&v(e,["setup","systemInstruction"],CO(Bn(M)));const B=g(n,["tools"]);if(e!==void 0&&B!=null){let ue=Hl(B);Array.isArray(ue)&&(ue=ue.map(O=>HO(Bl(O)))),v(e,["setup","tools"],ue)}const L=g(n,["sessionResumption"]);e!==void 0&&L!=null&&v(e,["setup","sessionResumption"],BO(L));const G=g(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&v(e,["setup","inputAudioTranscription"],G);const H=g(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&v(e,["setup","outputAudioTranscription"],H);const z=g(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&v(e,["setup","realtimeInputConfig"],z);const X=g(n,["contextWindowCompression"]);e!==void 0&&X!=null&&v(e,["setup","contextWindowCompression"],X);const Y=g(n,["proactivity"]);return e!==void 0&&Y!=null&&v(e,["setup","proactivity"],Y),t}function DO(n,e){const t={},i=g(n,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],RO(i));const r=g(n,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);const a=g(n,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const c=g(n,["topP"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topP"],c);const d=g(n,["topK"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","topK"],d);const f=g(n,["maxOutputTokens"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","maxOutputTokens"],f);const h=g(n,["mediaResolution"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","mediaResolution"],h);const _=g(n,["seed"]);e!==void 0&&_!=null&&v(e,["setup","generationConfig","seed"],_);const E=g(n,["speechConfig"]);e!==void 0&&E!=null&&v(e,["setup","generationConfig","speechConfig"],LI(zy(E)));const A=g(n,["thinkingConfig"]);e!==void 0&&A!=null&&v(e,["setup","generationConfig","thinkingConfig"],A);const R=g(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],R);const M=g(n,["systemInstruction"]);e!==void 0&&M!=null&&v(e,["setup","systemInstruction"],Bn(M));const B=g(n,["tools"]);if(e!==void 0&&B!=null){let ue=Hl(B);Array.isArray(ue)&&(ue=ue.map(O=>GO(Bl(O)))),v(e,["setup","tools"],ue)}const L=g(n,["sessionResumption"]);e!==void 0&&L!=null&&v(e,["setup","sessionResumption"],L);const G=g(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&v(e,["setup","inputAudioTranscription"],G);const H=g(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&v(e,["setup","outputAudioTranscription"],H);const z=g(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&v(e,["setup","realtimeInputConfig"],z);const X=g(n,["contextWindowCompression"]);e!==void 0&&X!=null&&v(e,["setup","contextWindowCompression"],X);const Y=g(n,["proactivity"]);return e!==void 0&&Y!=null&&v(e,["setup","proactivity"],Y),t}function kO(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["setup","model"],dt(n,i));const r=g(e,["config"]);return r!=null&&v(t,["config"],PO(r,t)),t}function MO(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["setup","model"],dt(n,i));const r=g(e,["config"]);return r!=null&&v(t,["config"],DO(r,t)),t}function UO(n){const e={},t=g(n,["musicGenerationConfig"]);return t!=null&&v(e,["musicGenerationConfig"],t),e}function VO(n){const e={},t=g(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["weightedPrompts"],i)}return e}function LO(n){const e={},t=g(n,["media"]);if(t!=null){let h=wI(t);Array.isArray(h)&&(h=h.map(_=>vh(_))),v(e,["mediaChunks"],h)}const i=g(n,["audio"]);i!=null&&v(e,["audio"],vh(II(i)));const r=g(n,["audioStreamEnd"]);r!=null&&v(e,["audioStreamEnd"],r);const a=g(n,["video"]);a!=null&&v(e,["video"],vh(CI(a)));const c=g(n,["text"]);c!=null&&v(e,["text"],c);const d=g(n,["activityStart"]);d!=null&&v(e,["activityStart"],d);const f=g(n,["activityEnd"]);return f!=null&&v(e,["activityEnd"],f),e}function OO(n){const e={},t=g(n,["media"]);if(t!=null){let h=wI(t);Array.isArray(h)&&(h=h.map(_=>_)),v(e,["mediaChunks"],h)}const i=g(n,["audio"]);i!=null&&v(e,["audio"],II(i));const r=g(n,["audioStreamEnd"]);r!=null&&v(e,["audioStreamEnd"],r);const a=g(n,["video"]);a!=null&&v(e,["video"],CI(a));const c=g(n,["text"]);c!=null&&v(e,["text"],c);const d=g(n,["activityStart"]);d!=null&&v(e,["activityStart"],d);const f=g(n,["activityEnd"]);return f!=null&&v(e,["activityEnd"],f),e}function FO(n){const e={},t=g(n,["setupComplete"]);t!=null&&v(e,["setupComplete"],t);const i=g(n,["serverContent"]);i!=null&&v(e,["serverContent"],i);const r=g(n,["toolCall"]);r!=null&&v(e,["toolCall"],r);const a=g(n,["toolCallCancellation"]);a!=null&&v(e,["toolCallCancellation"],a);const c=g(n,["usageMetadata"]);c!=null&&v(e,["usageMetadata"],jO(c));const d=g(n,["goAway"]);d!=null&&v(e,["goAway"],d);const f=g(n,["sessionResumptionUpdate"]);return f!=null&&v(e,["sessionResumptionUpdate"],f),e}function qO(n){const e={},t=g(n,["videoMetadata"]);t!=null&&v(e,["videoMetadata"],t);const i=g(n,["thought"]);i!=null&&v(e,["thought"],i);const r=g(n,["inlineData"]);r!=null&&v(e,["inlineData"],vh(r));const a=g(n,["fileData"]);a!=null&&v(e,["fileData"],IO(a));const c=g(n,["thoughtSignature"]);c!=null&&v(e,["thoughtSignature"],c);const d=g(n,["functionCall"]);d!=null&&v(e,["functionCall"],d);const f=g(n,["codeExecutionResult"]);f!=null&&v(e,["codeExecutionResult"],f);const h=g(n,["executableCode"]);h!=null&&v(e,["executableCode"],h);const _=g(n,["functionResponse"]);_!=null&&v(e,["functionResponse"],_);const E=g(n,["text"]);return E!=null&&v(e,["text"],E),e}function BO(n){const e={},t=g(n,["handle"]);if(t!=null&&v(e,["handle"],t),g(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function LI(n){const e={},t=g(n,["voiceConfig"]);if(t!=null&&v(e,["voiceConfig"],t),g(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=g(n,["languageCode"]);return i!=null&&v(e,["languageCode"],i),e}function HO(n){const e={},t=g(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(_=>_)),v(e,["functionDeclarations"],h)}if(g(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(n,["googleSearch"]);i!=null&&v(e,["googleSearch"],NO(i));const r=g(n,["googleSearchRetrieval"]);if(r!=null&&v(e,["googleSearchRetrieval"],r),g(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(n,["googleMaps"]);a!=null&&v(e,["googleMaps"],bO(a));const c=g(n,["urlContext"]);c!=null&&v(e,["urlContext"],c);const d=g(n,["computerUse"]);d!=null&&v(e,["computerUse"],d);const f=g(n,["codeExecution"]);return f!=null&&v(e,["codeExecution"],f),e}function GO(n){const e={},t=g(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>xO(A))),v(e,["functionDeclarations"],E)}const i=g(n,["retrieval"]);i!=null&&v(e,["retrieval"],i);const r=g(n,["googleSearch"]);r!=null&&v(e,["googleSearch"],r);const a=g(n,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],a);const c=g(n,["enterpriseWebSearch"]);c!=null&&v(e,["enterpriseWebSearch"],c);const d=g(n,["googleMaps"]);d!=null&&v(e,["googleMaps"],d);const f=g(n,["urlContext"]);f!=null&&v(e,["urlContext"],f);const h=g(n,["computerUse"]);h!=null&&v(e,["computerUse"],h);const _=g(n,["codeExecution"]);return _!=null&&v(e,["codeExecution"],_),e}function jO(n){const e={},t=g(n,["promptTokenCount"]);t!=null&&v(e,["promptTokenCount"],t);const i=g(n,["cachedContentTokenCount"]);i!=null&&v(e,["cachedContentTokenCount"],i);const r=g(n,["candidatesTokenCount"]);r!=null&&v(e,["responseTokenCount"],r);const a=g(n,["toolUsePromptTokenCount"]);a!=null&&v(e,["toolUsePromptTokenCount"],a);const c=g(n,["thoughtsTokenCount"]);c!=null&&v(e,["thoughtsTokenCount"],c);const d=g(n,["totalTokenCount"]);d!=null&&v(e,["totalTokenCount"],d);const f=g(n,["promptTokensDetails"]);if(f!=null){let R=f;Array.isArray(R)&&(R=R.map(M=>M)),v(e,["promptTokensDetails"],R)}const h=g(n,["cacheTokensDetails"]);if(h!=null){let R=h;Array.isArray(R)&&(R=R.map(M=>M)),v(e,["cacheTokensDetails"],R)}const _=g(n,["candidatesTokensDetails"]);if(_!=null){let R=_;Array.isArray(R)&&(R=R.map(M=>M)),v(e,["responseTokensDetails"],R)}const E=g(n,["toolUsePromptTokensDetails"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(M=>M)),v(e,["toolUsePromptTokensDetails"],R)}const A=g(n,["trafficType"]);return A!=null&&v(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zO(n){const e={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=g(n,["data"]);t!=null&&v(e,["data"],t);const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function $O(n){const e={},t=g(n,["content"]);t!=null&&v(e,["content"],t);const i=g(n,["citationMetadata"]);i!=null&&v(e,["citationMetadata"],KO(i));const r=g(n,["tokenCount"]);r!=null&&v(e,["tokenCount"],r);const a=g(n,["finishReason"]);a!=null&&v(e,["finishReason"],a);const c=g(n,["urlContextMetadata"]);c!=null&&v(e,["urlContextMetadata"],c);const d=g(n,["avgLogprobs"]);d!=null&&v(e,["avgLogprobs"],d);const f=g(n,["groundingMetadata"]);f!=null&&v(e,["groundingMetadata"],f);const h=g(n,["index"]);h!=null&&v(e,["index"],h);const _=g(n,["logprobsResult"]);_!=null&&v(e,["logprobsResult"],_);const E=g(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(R=>R)),v(e,["safetyRatings"],A)}return e}function KO(n){const e={},t=g(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["citations"],i)}return e}function YO(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["contents"]);if(r!=null){let a=Yi(r);Array.isArray(a)&&(a=a.map(c=>c)),v(t,["contents"],a)}return t}function JO(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),v(e,["tokensInfo"],r)}return e}function WO(n){const e={},t=g(n,["values"]);t!=null&&v(e,["values"],t);const i=g(n,["statistics"]);return i!=null&&v(e,["statistics"],QO(i)),e}function QO(n){const e={},t=g(n,["truncated"]);t!=null&&v(e,["truncated"],t);const i=g(n,["token_count"]);return i!=null&&v(e,["tokenCount"],i),e}function Pf(n){const e={},t=g(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>n6(a))),v(e,["parts"],r)}const i=g(n,["role"]);return i!=null&&v(e,["role"],i),e}function XO(n){const e={},t=g(n,["controlType"]);t!=null&&v(e,["controlType"],t);const i=g(n,["enableControlImageComputation"]);return i!=null&&v(e,["computeControl"],i),e}function ZO(n){const e={};if(g(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function e4(n,e){const t={},i=g(n,["systemInstruction"]);e!==void 0&&i!=null&&v(e,["systemInstruction"],Bn(i));const r=g(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>HI(d))),v(e,["tools"],c)}const a=g(n,["generationConfig"]);return e!==void 0&&a!=null&&v(e,["generationConfig"],G4(a)),t}function t4(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["contents"]);if(r!=null){let c=Yi(r);Array.isArray(c)&&(c=c.map(d=>Pf(d))),v(t,["contents"],c)}const a=g(e,["config"]);return a!=null&&ZO(a),t}function n4(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["contents"]);if(r!=null){let c=Yi(r);Array.isArray(c)&&(c=c.map(d=>d)),v(t,["contents"],c)}const a=g(e,["config"]);return a!=null&&e4(a,t),t}function i4(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["totalTokens"]);i!=null&&v(e,["totalTokens"],i);const r=g(n,["cachedContentTokenCount"]);return r!=null&&v(e,["cachedContentTokenCount"],r),e}function s4(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["totalTokens"]);return i!=null&&v(e,["totalTokens"],i),e}function r4(n,e){const t={},i=g(e,["model"]);return i!=null&&v(t,["_url","name"],dt(n,i)),t}function o4(n,e){const t={},i=g(e,["model"]);return i!=null&&v(t,["_url","name"],dt(n,i)),t}function a4(n){const e={},t=g(n,["sdkHttpResponse"]);return t!=null&&v(e,["sdkHttpResponse"],t),e}function l4(n){const e={},t=g(n,["sdkHttpResponse"]);return t!=null&&v(e,["sdkHttpResponse"],t),e}function c4(n,e){const t={},i=g(n,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const r=g(n,["negativePrompt"]);e!==void 0&&r!=null&&v(e,["parameters","negativePrompt"],r);const a=g(n,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const c=g(n,["aspectRatio"]);e!==void 0&&c!=null&&v(e,["parameters","aspectRatio"],c);const d=g(n,["guidanceScale"]);e!==void 0&&d!=null&&v(e,["parameters","guidanceScale"],d);const f=g(n,["seed"]);e!==void 0&&f!=null&&v(e,["parameters","seed"],f);const h=g(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&v(e,["parameters","safetySetting"],h);const _=g(n,["personGeneration"]);e!==void 0&&_!=null&&v(e,["parameters","personGeneration"],_);const E=g(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&v(e,["parameters","includeSafetyAttributes"],E);const A=g(n,["includeRaiReason"]);e!==void 0&&A!=null&&v(e,["parameters","includeRaiReason"],A);const R=g(n,["language"]);e!==void 0&&R!=null&&v(e,["parameters","language"],R);const M=g(n,["outputMimeType"]);e!==void 0&&M!=null&&v(e,["parameters","outputOptions","mimeType"],M);const B=g(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&v(e,["parameters","outputOptions","compressionQuality"],B);const L=g(n,["addWatermark"]);e!==void 0&&L!=null&&v(e,["parameters","addWatermark"],L);const G=g(n,["labels"]);e!==void 0&&G!=null&&v(e,["labels"],G);const H=g(n,["editMode"]);e!==void 0&&H!=null&&v(e,["parameters","editMode"],H);const z=g(n,["baseSteps"]);return e!==void 0&&z!=null&&v(e,["parameters","editConfig","baseSteps"],z),t}function u4(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["prompt"]);r!=null&&v(t,["instances[0]","prompt"],r);const a=g(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>l6(f))),v(t,["instances[0]","referenceImages"],d)}const c=g(e,["config"]);return c!=null&&c4(c,t),t}function d4(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Df(a))),v(e,["generatedImages"],r)}return e}function h4(n,e){const t={},i=g(n,["taskType"]);e!==void 0&&i!=null&&v(e,["requests[]","taskType"],i);const r=g(n,["title"]);e!==void 0&&r!=null&&v(e,["requests[]","title"],r);const a=g(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&v(e,["requests[]","outputDimensionality"],a),g(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function f4(n,e){const t={},i=g(n,["taskType"]);e!==void 0&&i!=null&&v(e,["instances[]","task_type"],i);const r=g(n,["title"]);e!==void 0&&r!=null&&v(e,["instances[]","title"],r);const a=g(n,["outputDimensionality"]);e!==void 0&&a!=null&&v(e,["parameters","outputDimensionality"],a);const c=g(n,["mimeType"]);e!==void 0&&c!=null&&v(e,["instances[]","mimeType"],c);const d=g(n,["autoTruncate"]);return e!==void 0&&d!=null&&v(e,["parameters","autoTruncate"],d),t}function p4(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["contents"]);if(r!=null){let d=Hy(n,r);Array.isArray(d)&&(d=d.map(f=>f)),v(t,["requests[]","content"],d)}const a=g(e,["config"]);a!=null&&h4(a,t);const c=g(e,["model"]);return c!==void 0&&v(t,["requests[]","model"],dt(n,c)),t}function m4(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["contents"]);if(r!=null){let c=Hy(n,r);Array.isArray(c)&&(c=c.map(d=>d)),v(t,["instances[]","content"],c)}const a=g(e,["config"]);return a!=null&&f4(a,t),t}function g4(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>c)),v(e,["embeddings"],a)}const r=g(n,["metadata"]);return r!=null&&v(e,["metadata"],r),e}function y4(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>WO(c))),v(e,["embeddings"],a)}const r=g(n,["metadata"]);return r!=null&&v(e,["metadata"],r),e}function v4(n){const e={},t=g(n,["endpoint"]);t!=null&&v(e,["name"],t);const i=g(n,["deployedModelId"]);return i!=null&&v(e,["deployedModelId"],i),e}function _4(n){const e={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=g(n,["fileUri"]);t!=null&&v(e,["fileUri"],t);const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function T4(n){const e={};if(g(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=g(n,["description"]);t!=null&&v(e,["description"],t);const i=g(n,["name"]);i!=null&&v(e,["name"],i);const r=g(n,["parameters"]);r!=null&&v(e,["parameters"],r);const a=g(n,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const c=g(n,["response"]);c!=null&&v(e,["response"],c);const d=g(n,["responseJsonSchema"]);return d!=null&&v(e,["responseJsonSchema"],d),e}function E4(n,e,t){const i={},r=g(e,["systemInstruction"]);t!==void 0&&r!=null&&v(t,["systemInstruction"],Pf(Bn(r)));const a=g(e,["temperature"]);a!=null&&v(i,["temperature"],a);const c=g(e,["topP"]);c!=null&&v(i,["topP"],c);const d=g(e,["topK"]);d!=null&&v(i,["topK"],d);const f=g(e,["candidateCount"]);f!=null&&v(i,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&v(i,["maxOutputTokens"],h);const _=g(e,["stopSequences"]);_!=null&&v(i,["stopSequences"],_);const E=g(e,["responseLogprobs"]);E!=null&&v(i,["responseLogprobs"],E);const A=g(e,["logprobs"]);A!=null&&v(i,["logprobs"],A);const R=g(e,["presencePenalty"]);R!=null&&v(i,["presencePenalty"],R);const M=g(e,["frequencyPenalty"]);M!=null&&v(i,["frequencyPenalty"],M);const B=g(e,["seed"]);B!=null&&v(i,["seed"],B);const L=g(e,["responseMimeType"]);L!=null&&v(i,["responseMimeType"],L);const G=g(e,["responseSchema"]);G!=null&&v(i,["responseSchema"],Gy(G));const H=g(e,["responseJsonSchema"]);if(H!=null&&v(i,["responseJsonSchema"],H),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=g(e,["safetySettings"]);if(t!==void 0&&z!=null){let U=z;Array.isArray(U)&&(U=U.map(P=>c6(P))),v(t,["safetySettings"],U)}const X=g(e,["tools"]);if(t!==void 0&&X!=null){let U=Hl(X);Array.isArray(U)&&(U=U.map(P=>m6(Bl(P)))),v(t,["tools"],U)}const Y=g(e,["toolConfig"]);if(t!==void 0&&Y!=null&&v(t,["toolConfig"],Y),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=g(e,["cachedContent"]);t!==void 0&&ue!=null&&v(t,["cachedContent"],Dr(n,ue));const O=g(e,["responseModalities"]);O!=null&&v(i,["responseModalities"],O);const N=g(e,["mediaResolution"]);N!=null&&v(i,["mediaResolution"],N);const D=g(e,["speechConfig"]);if(D!=null&&v(i,["speechConfig"],jy(D)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=g(e,["thinkingConfig"]);k!=null&&v(i,["thinkingConfig"],k);const F=g(e,["imageConfig"]);return F!=null&&v(i,["imageConfig"],F),i}function A4(n,e,t){const i={},r=g(e,["systemInstruction"]);t!==void 0&&r!=null&&v(t,["systemInstruction"],Bn(r));const a=g(e,["temperature"]);a!=null&&v(i,["temperature"],a);const c=g(e,["topP"]);c!=null&&v(i,["topP"],c);const d=g(e,["topK"]);d!=null&&v(i,["topK"],d);const f=g(e,["candidateCount"]);f!=null&&v(i,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&v(i,["maxOutputTokens"],h);const _=g(e,["stopSequences"]);_!=null&&v(i,["stopSequences"],_);const E=g(e,["responseLogprobs"]);E!=null&&v(i,["responseLogprobs"],E);const A=g(e,["logprobs"]);A!=null&&v(i,["logprobs"],A);const R=g(e,["presencePenalty"]);R!=null&&v(i,["presencePenalty"],R);const M=g(e,["frequencyPenalty"]);M!=null&&v(i,["frequencyPenalty"],M);const B=g(e,["seed"]);B!=null&&v(i,["seed"],B);const L=g(e,["responseMimeType"]);L!=null&&v(i,["responseMimeType"],L);const G=g(e,["responseSchema"]);G!=null&&v(i,["responseSchema"],Gy(G));const H=g(e,["responseJsonSchema"]);H!=null&&v(i,["responseJsonSchema"],H);const z=g(e,["routingConfig"]);z!=null&&v(i,["routingConfig"],z);const X=g(e,["modelSelectionConfig"]);X!=null&&v(i,["modelConfig"],X);const Y=g(e,["safetySettings"]);if(t!==void 0&&Y!=null){let ie=Y;Array.isArray(ie)&&(ie=ie.map(pe=>pe)),v(t,["safetySettings"],ie)}const ue=g(e,["tools"]);if(t!==void 0&&ue!=null){let ie=Hl(ue);Array.isArray(ie)&&(ie=ie.map(pe=>HI(Bl(pe)))),v(t,["tools"],ie)}const O=g(e,["toolConfig"]);t!==void 0&&O!=null&&v(t,["toolConfig"],O);const N=g(e,["labels"]);t!==void 0&&N!=null&&v(t,["labels"],N);const D=g(e,["cachedContent"]);t!==void 0&&D!=null&&v(t,["cachedContent"],Dr(n,D));const k=g(e,["responseModalities"]);k!=null&&v(i,["responseModalities"],k);const F=g(e,["mediaResolution"]);F!=null&&v(i,["mediaResolution"],F);const U=g(e,["speechConfig"]);U!=null&&v(i,["speechConfig"],BI(jy(U)));const P=g(e,["audioTimestamp"]);P!=null&&v(i,["audioTimestamp"],P);const _e=g(e,["thinkingConfig"]);_e!=null&&v(i,["thinkingConfig"],_e);const Oe=g(e,["imageConfig"]);return Oe!=null&&v(i,["imageConfig"],Oe),i}function lS(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["contents"]);if(r!=null){let c=Yi(r);Array.isArray(c)&&(c=c.map(d=>Pf(d))),v(t,["contents"],c)}const a=g(e,["config"]);return a!=null&&v(t,["generationConfig"],E4(n,a,t)),t}function cS(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["contents"]);if(r!=null){let c=Yi(r);Array.isArray(c)&&(c=c.map(d=>d)),v(t,["contents"],c)}const a=g(e,["config"]);return a!=null&&v(t,["generationConfig"],A4(n,a,t)),t}function uS(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>$O(h))),v(e,["candidates"],f)}const r=g(n,["modelVersion"]);r!=null&&v(e,["modelVersion"],r);const a=g(n,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const c=g(n,["responseId"]);c!=null&&v(e,["responseId"],c);const d=g(n,["usageMetadata"]);return d!=null&&v(e,["usageMetadata"],d),e}function dS(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),v(e,["candidates"],h)}const r=g(n,["createTime"]);r!=null&&v(e,["createTime"],r);const a=g(n,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const c=g(n,["promptFeedback"]);c!=null&&v(e,["promptFeedback"],c);const d=g(n,["responseId"]);d!=null&&v(e,["responseId"],d);const f=g(n,["usageMetadata"]);return f!=null&&v(e,["usageMetadata"],f),e}function S4(n,e){const t={};if(g(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=g(n,["numberOfImages"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const r=g(n,["aspectRatio"]);e!==void 0&&r!=null&&v(e,["parameters","aspectRatio"],r);const a=g(n,["guidanceScale"]);if(e!==void 0&&a!=null&&v(e,["parameters","guidanceScale"],a),g(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=g(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&v(e,["parameters","safetySetting"],c);const d=g(n,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const f=g(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&v(e,["parameters","includeSafetyAttributes"],f);const h=g(n,["includeRaiReason"]);e!==void 0&&h!=null&&v(e,["parameters","includeRaiReason"],h);const _=g(n,["language"]);e!==void 0&&_!=null&&v(e,["parameters","language"],_);const E=g(n,["outputMimeType"]);e!==void 0&&E!=null&&v(e,["parameters","outputOptions","mimeType"],E);const A=g(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&v(e,["parameters","outputOptions","compressionQuality"],A),g(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=g(n,["imageSize"]);if(e!==void 0&&R!=null&&v(e,["parameters","sampleImageSize"],R),g(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function w4(n,e){const t={},i=g(n,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const r=g(n,["negativePrompt"]);e!==void 0&&r!=null&&v(e,["parameters","negativePrompt"],r);const a=g(n,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const c=g(n,["aspectRatio"]);e!==void 0&&c!=null&&v(e,["parameters","aspectRatio"],c);const d=g(n,["guidanceScale"]);e!==void 0&&d!=null&&v(e,["parameters","guidanceScale"],d);const f=g(n,["seed"]);e!==void 0&&f!=null&&v(e,["parameters","seed"],f);const h=g(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&v(e,["parameters","safetySetting"],h);const _=g(n,["personGeneration"]);e!==void 0&&_!=null&&v(e,["parameters","personGeneration"],_);const E=g(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&v(e,["parameters","includeSafetyAttributes"],E);const A=g(n,["includeRaiReason"]);e!==void 0&&A!=null&&v(e,["parameters","includeRaiReason"],A);const R=g(n,["language"]);e!==void 0&&R!=null&&v(e,["parameters","language"],R);const M=g(n,["outputMimeType"]);e!==void 0&&M!=null&&v(e,["parameters","outputOptions","mimeType"],M);const B=g(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&v(e,["parameters","outputOptions","compressionQuality"],B);const L=g(n,["addWatermark"]);e!==void 0&&L!=null&&v(e,["parameters","addWatermark"],L);const G=g(n,["labels"]);e!==void 0&&G!=null&&v(e,["labels"],G);const H=g(n,["imageSize"]);e!==void 0&&H!=null&&v(e,["parameters","sampleImageSize"],H);const z=g(n,["enhancePrompt"]);return e!==void 0&&z!=null&&v(e,["parameters","enhancePrompt"],z),t}function C4(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["prompt"]);r!=null&&v(t,["instances[0]","prompt"],r);const a=g(e,["config"]);return a!=null&&S4(a,t),t}function I4(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["prompt"]);r!=null&&v(t,["instances[0]","prompt"],r);const a=g(e,["config"]);return a!=null&&w4(a,t),t}function x4(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>F4(c))),v(e,["generatedImages"],a)}const r=g(n,["positivePromptSafetyAttributes"]);return r!=null&&v(e,["positivePromptSafetyAttributes"],FI(r)),e}function R4(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>Df(c))),v(e,["generatedImages"],a)}const r=g(n,["positivePromptSafetyAttributes"]);return r!=null&&v(e,["positivePromptSafetyAttributes"],qI(r)),e}function b4(n,e){const t={},i=g(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i),g(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=g(n,["durationSeconds"]);if(e!==void 0&&r!=null&&v(e,["parameters","durationSeconds"],r),g(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=g(n,["aspectRatio"]);e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a);const c=g(n,["resolution"]);e!==void 0&&c!=null&&v(e,["parameters","resolution"],c);const d=g(n,["personGeneration"]);if(e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d),g(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=g(n,["negativePrompt"]);e!==void 0&&f!=null&&v(e,["parameters","negativePrompt"],f);const h=g(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&v(e,["parameters","enhancePrompt"],h),g(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=g(n,["lastFrame"]);e!==void 0&&_!=null&&v(e,["instances[0]","lastFrame"],kf(_));const E=g(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(R=>R6(R))),v(e,["instances[0]","referenceImages"],A)}if(g(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(g(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function N4(n,e){const t={},i=g(n,["numberOfVideos"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const r=g(n,["outputGcsUri"]);e!==void 0&&r!=null&&v(e,["parameters","storageUri"],r);const a=g(n,["fps"]);e!==void 0&&a!=null&&v(e,["parameters","fps"],a);const c=g(n,["durationSeconds"]);e!==void 0&&c!=null&&v(e,["parameters","durationSeconds"],c);const d=g(n,["seed"]);e!==void 0&&d!=null&&v(e,["parameters","seed"],d);const f=g(n,["aspectRatio"]);e!==void 0&&f!=null&&v(e,["parameters","aspectRatio"],f);const h=g(n,["resolution"]);e!==void 0&&h!=null&&v(e,["parameters","resolution"],h);const _=g(n,["personGeneration"]);e!==void 0&&_!=null&&v(e,["parameters","personGeneration"],_);const E=g(n,["pubsubTopic"]);e!==void 0&&E!=null&&v(e,["parameters","pubsubTopic"],E);const A=g(n,["negativePrompt"]);e!==void 0&&A!=null&&v(e,["parameters","negativePrompt"],A);const R=g(n,["enhancePrompt"]);e!==void 0&&R!=null&&v(e,["parameters","enhancePrompt"],R);const M=g(n,["generateAudio"]);e!==void 0&&M!=null&&v(e,["parameters","generateAudio"],M);const B=g(n,["lastFrame"]);e!==void 0&&B!=null&&v(e,["instances[0]","lastFrame"],ps(B));const L=g(n,["referenceImages"]);if(e!==void 0&&L!=null){let z=L;Array.isArray(z)&&(z=z.map(X=>b6(X))),v(e,["instances[0]","referenceImages"],z)}const G=g(n,["mask"]);e!==void 0&&G!=null&&v(e,["instances[0]","mask"],x6(G));const H=g(n,["compressionQuality"]);return e!==void 0&&H!=null&&v(e,["parameters","compressionQuality"],H),t}function P4(n){const e={},t=g(n,["name"]);t!=null&&v(e,["name"],t);const i=g(n,["metadata"]);i!=null&&v(e,["metadata"],i);const r=g(n,["done"]);r!=null&&v(e,["done"],r);const a=g(n,["error"]);a!=null&&v(e,["error"],a);const c=g(n,["response","generateVideoResponse"]);return c!=null&&v(e,["response"],U4(c)),e}function D4(n){const e={},t=g(n,["name"]);t!=null&&v(e,["name"],t);const i=g(n,["metadata"]);i!=null&&v(e,["metadata"],i);const r=g(n,["done"]);r!=null&&v(e,["done"],r);const a=g(n,["error"]);a!=null&&v(e,["error"],a);const c=g(n,["response"]);return c!=null&&v(e,["response"],V4(c)),e}function k4(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["prompt"]);r!=null&&v(t,["instances[0]","prompt"],r);const a=g(e,["image"]);a!=null&&v(t,["instances[0]","image"],kf(a));const c=g(e,["video"]);c!=null&&v(t,["instances[0]","video"],GI(c));const d=g(e,["source"]);d!=null&&L4(d,t);const f=g(e,["config"]);return f!=null&&b4(f,t),t}function M4(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["prompt"]);r!=null&&v(t,["instances[0]","prompt"],r);const a=g(e,["image"]);a!=null&&v(t,["instances[0]","image"],ps(a));const c=g(e,["video"]);c!=null&&v(t,["instances[0]","video"],jI(c));const d=g(e,["source"]);d!=null&&O4(d,t);const f=g(e,["config"]);return f!=null&&N4(f,t),t}function U4(n){const e={},t=g(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>B4(c))),v(e,["generatedVideos"],a)}const i=g(n,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=g(n,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function V4(n){const e={},t=g(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>H4(c))),v(e,["generatedVideos"],a)}const i=g(n,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=g(n,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function L4(n,e){const t={},i=g(n,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=g(n,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],kf(r));const a=g(n,["video"]);return e!==void 0&&a!=null&&v(e,["instances[0]","video"],GI(a)),t}function O4(n,e){const t={},i=g(n,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=g(n,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],ps(r));const a=g(n,["video"]);return e!==void 0&&a!=null&&v(e,["instances[0]","video"],jI(a)),t}function F4(n){const e={},t=g(n,["_self"]);t!=null&&v(e,["image"],Y4(t));const i=g(n,["raiFilteredReason"]);i!=null&&v(e,["raiFilteredReason"],i);const r=g(n,["_self"]);return r!=null&&v(e,["safetyAttributes"],FI(r)),e}function Df(n){const e={},t=g(n,["_self"]);t!=null&&v(e,["image"],OI(t));const i=g(n,["raiFilteredReason"]);i!=null&&v(e,["raiFilteredReason"],i);const r=g(n,["_self"]);r!=null&&v(e,["safetyAttributes"],qI(r));const a=g(n,["prompt"]);return a!=null&&v(e,["enhancedPrompt"],a),e}function q4(n){const e={},t=g(n,["_self"]);t!=null&&v(e,["mask"],OI(t));const i=g(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),v(e,["labels"],r)}return e}function B4(n){const e={},t=g(n,["video"]);return t!=null&&v(e,["video"],C6(t)),e}function H4(n){const e={},t=g(n,["_self"]);return t!=null&&v(e,["video"],I6(t)),e}function G4(n){const e={},t=g(n,["modelSelectionConfig"]);t!=null&&v(e,["modelConfig"],t);const i=g(n,["audioTimestamp"]);i!=null&&v(e,["audioTimestamp"],i);const r=g(n,["candidateCount"]);r!=null&&v(e,["candidateCount"],r);const a=g(n,["enableAffectiveDialog"]);a!=null&&v(e,["enableAffectiveDialog"],a);const c=g(n,["frequencyPenalty"]);c!=null&&v(e,["frequencyPenalty"],c);const d=g(n,["logprobs"]);d!=null&&v(e,["logprobs"],d);const f=g(n,["maxOutputTokens"]);f!=null&&v(e,["maxOutputTokens"],f);const h=g(n,["mediaResolution"]);h!=null&&v(e,["mediaResolution"],h);const _=g(n,["presencePenalty"]);_!=null&&v(e,["presencePenalty"],_);const E=g(n,["responseJsonSchema"]);E!=null&&v(e,["responseJsonSchema"],E);const A=g(n,["responseLogprobs"]);A!=null&&v(e,["responseLogprobs"],A);const R=g(n,["responseMimeType"]);R!=null&&v(e,["responseMimeType"],R);const M=g(n,["responseModalities"]);M!=null&&v(e,["responseModalities"],M);const B=g(n,["responseSchema"]);B!=null&&v(e,["responseSchema"],B);const L=g(n,["routingConfig"]);L!=null&&v(e,["routingConfig"],L);const G=g(n,["seed"]);G!=null&&v(e,["seed"],G);const H=g(n,["speechConfig"]);H!=null&&v(e,["speechConfig"],BI(H));const z=g(n,["stopSequences"]);z!=null&&v(e,["stopSequences"],z);const X=g(n,["temperature"]);X!=null&&v(e,["temperature"],X);const Y=g(n,["thinkingConfig"]);Y!=null&&v(e,["thinkingConfig"],Y);const ue=g(n,["topK"]);ue!=null&&v(e,["topK"],ue);const O=g(n,["topP"]);if(O!=null&&v(e,["topP"],O),g(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function j4(n,e){const t={},i=g(e,["model"]);return i!=null&&v(t,["_url","name"],dt(n,i)),t}function z4(n,e){const t={},i=g(e,["model"]);return i!=null&&v(t,["_url","name"],dt(n,i)),t}function $4(n){const e={};if(g(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=g(n,["enableWidget"]);return t!=null&&v(e,["enableWidget"],t),e}function K4(n){const e={},t=g(n,["timeRangeFilter"]);if(t!=null&&v(e,["timeRangeFilter"],t),g(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Y4(n){const e={},t=g(n,["bytesBase64Encoded"]);t!=null&&v(e,["imageBytes"],No(t));const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function OI(n){const e={},t=g(n,["gcsUri"]);t!=null&&v(e,["gcsUri"],t);const i=g(n,["bytesBase64Encoded"]);i!=null&&v(e,["imageBytes"],No(i));const r=g(n,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function kf(n){const e={};if(g(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=g(n,["imageBytes"]);t!=null&&v(e,["bytesBase64Encoded"],No(t));const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function ps(n){const e={},t=g(n,["gcsUri"]);t!=null&&v(e,["gcsUri"],t);const i=g(n,["imageBytes"]);i!=null&&v(e,["bytesBase64Encoded"],No(i));const r=g(n,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function J4(n,e,t){const i={},r=g(e,["pageSize"]);t!==void 0&&r!=null&&v(t,["_query","pageSize"],r);const a=g(e,["pageToken"]);t!==void 0&&a!=null&&v(t,["_query","pageToken"],a);const c=g(e,["filter"]);t!==void 0&&c!=null&&v(t,["_query","filter"],c);const d=g(e,["queryBase"]);return t!==void 0&&d!=null&&v(t,["_url","models_url"],NI(n,d)),i}function W4(n,e,t){const i={},r=g(e,["pageSize"]);t!==void 0&&r!=null&&v(t,["_query","pageSize"],r);const a=g(e,["pageToken"]);t!==void 0&&a!=null&&v(t,["_query","pageToken"],a);const c=g(e,["filter"]);t!==void 0&&c!=null&&v(t,["_query","filter"],c);const d=g(e,["queryBase"]);return t!==void 0&&d!=null&&v(t,["_url","models_url"],NI(n,d)),i}function Q4(n,e){const t={},i=g(e,["config"]);return i!=null&&J4(n,i,t),t}function X4(n,e){const t={},i=g(e,["config"]);return i!=null&&W4(n,i,t),t}function Z4(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=g(n,["_self"]);if(r!=null){let a=PI(r);Array.isArray(a)&&(a=a.map(c=>Mg(c))),v(e,["models"],a)}return e}function e6(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=g(n,["_self"]);if(r!=null){let a=PI(r);Array.isArray(a)&&(a=a.map(c=>Ug(c))),v(e,["models"],a)}return e}function t6(n){const e={},t=g(n,["maskMode"]);t!=null&&v(e,["maskMode"],t);const i=g(n,["segmentationClasses"]);i!=null&&v(e,["maskClasses"],i);const r=g(n,["maskDilation"]);return r!=null&&v(e,["dilation"],r),e}function Mg(n){const e={},t=g(n,["name"]);t!=null&&v(e,["name"],t);const i=g(n,["displayName"]);i!=null&&v(e,["displayName"],i);const r=g(n,["description"]);r!=null&&v(e,["description"],r);const a=g(n,["version"]);a!=null&&v(e,["version"],a);const c=g(n,["_self"]);c!=null&&v(e,["tunedModelInfo"],g6(c));const d=g(n,["inputTokenLimit"]);d!=null&&v(e,["inputTokenLimit"],d);const f=g(n,["outputTokenLimit"]);f!=null&&v(e,["outputTokenLimit"],f);const h=g(n,["supportedGenerationMethods"]);return h!=null&&v(e,["supportedActions"],h),e}function Ug(n){const e={},t=g(n,["name"]);t!=null&&v(e,["name"],t);const i=g(n,["displayName"]);i!=null&&v(e,["displayName"],i);const r=g(n,["description"]);r!=null&&v(e,["description"],r);const a=g(n,["versionId"]);a!=null&&v(e,["version"],a);const c=g(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>v4(A))),v(e,["endpoints"],E)}const d=g(n,["labels"]);d!=null&&v(e,["labels"],d);const f=g(n,["_self"]);f!=null&&v(e,["tunedModelInfo"],y6(f));const h=g(n,["defaultCheckpointId"]);h!=null&&v(e,["defaultCheckpointId"],h);const _=g(n,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(A=>A)),v(e,["checkpoints"],E)}return e}function n6(n){const e={},t=g(n,["videoMetadata"]);t!=null&&v(e,["videoMetadata"],t);const i=g(n,["thought"]);i!=null&&v(e,["thought"],i);const r=g(n,["inlineData"]);r!=null&&v(e,["inlineData"],zO(r));const a=g(n,["fileData"]);a!=null&&v(e,["fileData"],_4(a));const c=g(n,["thoughtSignature"]);c!=null&&v(e,["thoughtSignature"],c);const d=g(n,["functionCall"]);d!=null&&v(e,["functionCall"],d);const f=g(n,["codeExecutionResult"]);f!=null&&v(e,["codeExecutionResult"],f);const h=g(n,["executableCode"]);h!=null&&v(e,["executableCode"],h);const _=g(n,["functionResponse"]);_!=null&&v(e,["functionResponse"],_);const E=g(n,["text"]);return E!=null&&v(e,["text"],E),e}function i6(n){const e={},t=g(n,["productImage"]);return t!=null&&v(e,["image"],ps(t)),e}function s6(n,e){const t={},i=g(n,["numberOfImages"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const r=g(n,["baseSteps"]);e!==void 0&&r!=null&&v(e,["parameters","editConfig","baseSteps"],r);const a=g(n,["outputGcsUri"]);e!==void 0&&a!=null&&v(e,["parameters","storageUri"],a);const c=g(n,["seed"]);e!==void 0&&c!=null&&v(e,["parameters","seed"],c);const d=g(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&v(e,["parameters","safetySetting"],d);const f=g(n,["personGeneration"]);e!==void 0&&f!=null&&v(e,["parameters","personGeneration"],f);const h=g(n,["addWatermark"]);e!==void 0&&h!=null&&v(e,["parameters","addWatermark"],h);const _=g(n,["outputMimeType"]);e!==void 0&&_!=null&&v(e,["parameters","outputOptions","mimeType"],_);const E=g(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&v(e,["parameters","outputOptions","compressionQuality"],E);const A=g(n,["enhancePrompt"]);e!==void 0&&A!=null&&v(e,["parameters","enhancePrompt"],A);const R=g(n,["labels"]);return e!==void 0&&R!=null&&v(e,["labels"],R),t}function r6(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["source"]);r!=null&&a6(r,t);const a=g(e,["config"]);return a!=null&&s6(a,t),t}function o6(n){const e={},t=g(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Df(r))),v(e,["generatedImages"],i)}return e}function a6(n,e){const t={},i=g(n,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=g(n,["personImage"]);e!==void 0&&r!=null&&v(e,["instances[0]","personImage","image"],ps(r));const a=g(n,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>i6(d))),v(e,["instances[0]","productImages"],c)}return t}function l6(n){const e={},t=g(n,["referenceImage"]);t!=null&&v(e,["referenceImage"],ps(t));const i=g(n,["referenceId"]);i!=null&&v(e,["referenceId"],i);const r=g(n,["referenceType"]);r!=null&&v(e,["referenceType"],r);const a=g(n,["maskImageConfig"]);a!=null&&v(e,["maskImageConfig"],t6(a));const c=g(n,["controlImageConfig"]);c!=null&&v(e,["controlImageConfig"],XO(c));const d=g(n,["styleImageConfig"]);d!=null&&v(e,["styleImageConfig"],d);const f=g(n,["subjectImageConfig"]);return f!=null&&v(e,["subjectImageConfig"],f),e}function FI(n){const e={},t=g(n,["safetyAttributes","categories"]);t!=null&&v(e,["categories"],t);const i=g(n,["safetyAttributes","scores"]);i!=null&&v(e,["scores"],i);const r=g(n,["contentType"]);return r!=null&&v(e,["contentType"],r),e}function qI(n){const e={},t=g(n,["safetyAttributes","categories"]);t!=null&&v(e,["categories"],t);const i=g(n,["safetyAttributes","scores"]);i!=null&&v(e,["scores"],i);const r=g(n,["contentType"]);return r!=null&&v(e,["contentType"],r),e}function c6(n){const e={};if(g(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=g(n,["category"]);t!=null&&v(e,["category"],t);const i=g(n,["threshold"]);return i!=null&&v(e,["threshold"],i),e}function u6(n){const e={},t=g(n,["image"]);return t!=null&&v(e,["image"],ps(t)),e}function d6(n,e){const t={},i=g(n,["mode"]);e!==void 0&&i!=null&&v(e,["parameters","mode"],i);const r=g(n,["maxPredictions"]);e!==void 0&&r!=null&&v(e,["parameters","maxPredictions"],r);const a=g(n,["confidenceThreshold"]);e!==void 0&&a!=null&&v(e,["parameters","confidenceThreshold"],a);const c=g(n,["maskDilation"]);e!==void 0&&c!=null&&v(e,["parameters","maskDilation"],c);const d=g(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&v(e,["parameters","binaryColorThreshold"],d);const f=g(n,["labels"]);return e!==void 0&&f!=null&&v(e,["labels"],f),t}function h6(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["source"]);r!=null&&p6(r,t);const a=g(e,["config"]);return a!=null&&d6(a,t),t}function f6(n){const e={},t=g(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>q4(r))),v(e,["generatedMasks"],i)}return e}function p6(n,e){const t={},i=g(n,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=g(n,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],ps(r));const a=g(n,["scribbleImage"]);return e!==void 0&&a!=null&&v(e,["instances[0]","scribble"],u6(a)),t}function BI(n){const e={},t=g(n,["voiceConfig"]);if(t!=null&&v(e,["voiceConfig"],t),g(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=g(n,["languageCode"]);return i!=null&&v(e,["languageCode"],i),e}function m6(n){const e={},t=g(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(_=>_)),v(e,["functionDeclarations"],h)}if(g(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(n,["googleSearch"]);i!=null&&v(e,["googleSearch"],K4(i));const r=g(n,["googleSearchRetrieval"]);if(r!=null&&v(e,["googleSearchRetrieval"],r),g(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(n,["googleMaps"]);a!=null&&v(e,["googleMaps"],$4(a));const c=g(n,["urlContext"]);c!=null&&v(e,["urlContext"],c);const d=g(n,["computerUse"]);d!=null&&v(e,["computerUse"],d);const f=g(n,["codeExecution"]);return f!=null&&v(e,["codeExecution"],f),e}function HI(n){const e={},t=g(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>T4(A))),v(e,["functionDeclarations"],E)}const i=g(n,["retrieval"]);i!=null&&v(e,["retrieval"],i);const r=g(n,["googleSearch"]);r!=null&&v(e,["googleSearch"],r);const a=g(n,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],a);const c=g(n,["enterpriseWebSearch"]);c!=null&&v(e,["enterpriseWebSearch"],c);const d=g(n,["googleMaps"]);d!=null&&v(e,["googleMaps"],d);const f=g(n,["urlContext"]);f!=null&&v(e,["urlContext"],f);const h=g(n,["computerUse"]);h!=null&&v(e,["computerUse"],h);const _=g(n,["codeExecution"]);return _!=null&&v(e,["codeExecution"],_),e}function g6(n){const e={},t=g(n,["baseModel"]);t!=null&&v(e,["baseModel"],t);const i=g(n,["createTime"]);i!=null&&v(e,["createTime"],i);const r=g(n,["updateTime"]);return r!=null&&v(e,["updateTime"],r),e}function y6(n){const e={},t=g(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&v(e,["baseModel"],t);const i=g(n,["createTime"]);i!=null&&v(e,["createTime"],i);const r=g(n,["updateTime"]);return r!=null&&v(e,["updateTime"],r),e}function v6(n,e){const t={},i=g(n,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const r=g(n,["description"]);e!==void 0&&r!=null&&v(e,["description"],r);const a=g(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),t}function _6(n,e){const t={},i=g(n,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const r=g(n,["description"]);e!==void 0&&r!=null&&v(e,["description"],r);const a=g(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),t}function T6(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","name"],dt(n,i));const r=g(e,["config"]);return r!=null&&v6(r,t),t}function E6(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["config"]);return r!=null&&_6(r,t),t}function A6(n,e){const t={},i=g(n,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const r=g(n,["includeRaiReason"]);e!==void 0&&r!=null&&v(e,["parameters","includeRaiReason"],r);const a=g(n,["outputMimeType"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","mimeType"],a);const c=g(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&v(e,["parameters","outputOptions","compressionQuality"],c);const d=g(n,["enhanceInputImage"]);e!==void 0&&d!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=g(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=g(n,["labels"]);e!==void 0&&h!=null&&v(e,["labels"],h);const _=g(n,["numberOfImages"]);e!==void 0&&_!=null&&v(e,["parameters","sampleCount"],_);const E=g(n,["mode"]);return e!==void 0&&E!=null&&v(e,["parameters","mode"],E),t}function S6(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["_url","model"],dt(n,i));const r=g(e,["image"]);r!=null&&v(t,["instances[0]","image"],ps(r));const a=g(e,["upscaleFactor"]);a!=null&&v(t,["parameters","upscaleConfig","upscaleFactor"],a);const c=g(e,["config"]);return c!=null&&A6(c,t),t}function w6(n){const e={},t=g(n,["sdkHttpResponse"]);t!=null&&v(e,["sdkHttpResponse"],t);const i=g(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Df(a))),v(e,["generatedImages"],r)}return e}function C6(n){const e={},t=g(n,["uri"]);t!=null&&v(e,["uri"],t);const i=g(n,["encodedVideo"]);i!=null&&v(e,["videoBytes"],No(i));const r=g(n,["encoding"]);return r!=null&&v(e,["mimeType"],r),e}function I6(n){const e={},t=g(n,["gcsUri"]);t!=null&&v(e,["uri"],t);const i=g(n,["bytesBase64Encoded"]);i!=null&&v(e,["videoBytes"],No(i));const r=g(n,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function x6(n){const e={},t=g(n,["image"]);t!=null&&v(e,["_self"],ps(t));const i=g(n,["maskMode"]);return i!=null&&v(e,["maskMode"],i),e}function R6(n){const e={},t=g(n,["image"]);t!=null&&v(e,["image"],kf(t));const i=g(n,["referenceType"]);return i!=null&&v(e,["referenceType"],i),e}function b6(n){const e={},t=g(n,["image"]);t!=null&&v(e,["image"],ps(t));const i=g(n,["referenceType"]);return i!=null&&v(e,["referenceType"],i),e}function GI(n){const e={},t=g(n,["uri"]);t!=null&&v(e,["uri"],t);const i=g(n,["videoBytes"]);i!=null&&v(e,["encodedVideo"],No(i));const r=g(n,["mimeType"]);return r!=null&&v(e,["encoding"],r),e}function jI(n){const e={},t=g(n,["uri"]);t!=null&&v(e,["gcsUri"],t);const i=g(n,["videoBytes"]);i!=null&&v(e,["bytesBase64Encoded"],No(i));const r=g(n,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N6="Content-Type",P6="X-Server-Timeout",D6="User-Agent",Vg="x-goog-api-client",k6="1.27.0",M6=`google-genai-sdk/${k6}`,U6="v1beta1",V6="v1beta",hS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class L6{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:U6,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:V6,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const a=new AbortController,c=a.signal;if(t.timeout&&t?.timeout>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=c}return t&&t.extraBody!==null&&O6(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await fS(r),new Pg(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await fS(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return _l(this,arguments,function*(){const r=(t=e?.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:f}=yield Pt(r.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(f,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),R=A.status,M=A.code,B=`got status: ${R}. ${JSON.stringify(E)}`;if(M>=400&&M<600)throw new Nf({message:B,status:M})}}catch(E){if(E.name==="ApiError")throw E}c+=h;let _=c.match(hS);for(;_;){const E=_[1];try{const A=new Response(E,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Pt(new Pg(A)),c=c.slice(_[0].length),_=c.match(hS)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=M6+" "+this.clientOptions.userAgentExtra;return e[D6]=t,e[Vg]=t,e[N6]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(P6,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);r.sizeBytes=String(c.size);const d=(i=t?.mimeType)!==null&&i!==void 0?i:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const f=await this.fetchUploadUrl(r,t);return a.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let r={};t?.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},c=await this.request({path:Se("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:r});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(i=c?.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function fS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new Nf({message:r,status:t}):new Error(r)}}function O6(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,c){const d=Object.assign({},a);for(const f in c)if(Object.prototype.hasOwnProperty.call(c,f)){const h=c[f],_=d[f];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[f]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[f]=h)}return d}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F6="mcp_used/unknown";let q6=!1;function zI(n){for(const e of n)if(B6(e)||typeof e=="object"&&"inputSchema"in e)return!0;return q6}function $I(n){var e;const t=(e=n[Vg])!==null&&e!==void 0?e:"";n[Vg]=(t+` ${F6}`).trimStart()}function B6(n){return n!==null&&typeof n=="object"&&n instanceof $y}function H6(n,e=100){return _l(this,arguments,function*(){let i,r=0;for(;r<e;){const a=yield Pt(n.listTools({cursor:i}));for(const c of a.tools)yield yield Pt(c),r++;if(!a.nextCursor)break;i=a.nextCursor}})}class $y{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new $y(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const a={},c=[];for(const _ of this.mcpClients)try{for(var d=!0,f=(t=void 0,lu(H6(_))),h;h=await f.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const E=r;c.push(E);const A=E.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=_}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),KV(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await r.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function G6(n,e,t){const i=new FV;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class j6{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=K6(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(z=>{h=z}),E=e.callbacks,A=function(){h({})},R=this.apiClient,M={onopen:A,onmessage:z=>{G6(R,E.onmessage,z)},onerror:(t=E?.onerror)!==null&&t!==void 0?t:function(z){},onclose:(i=E?.onclose)!==null&&i!==void 0?i:function(z){}},B=this.webSocketFactory.create(f,$6(c),M);B.connect(),await _;const H={setup:{model:dt(this.apiClient,e.model)}};return B.send(JSON.stringify(H)),new z6(B,this.apiClient)}}class z6{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=VO(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=UO(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(al.PLAY)}pause(){this.sendPlaybackControl(al.PAUSE)}stop(){this.sendPlaybackControl(al.STOP)}resetContext(){this.sendPlaybackControl(al.RESET_CONTEXT)}close(){this.conn.close()}}function $6(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function K6(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function J6(n,e,t){const i=new OV;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const a=JSON.parse(r);if(n.isVertexAI()){const c=FO(a);Object.assign(i,c)}else Object.assign(i,a);e(i)}class W6{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new j6(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,a,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&zI(e.config.tools)&&$I(E);const A=e3(E);if(this.apiClient.isVertexAI())_=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,_);else{const D=this.apiClient.getApiKey();let k="BidiGenerateContent",F="key";D?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",F="access_token"),_=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${k}?${F}=${D}`}let R=()=>{};const M=new Promise(D=>{R=D}),B=e.callbacks,L=function(){var D;(D=B?.onopen)===null||D===void 0||D.call(B),R({})},G=this.apiClient,H={onopen:L,onmessage:D=>{J6(G,B.onmessage,D)},onerror:(t=B?.onerror)!==null&&t!==void 0?t:function(D){},onclose:(i=B?.onclose)!==null&&i!==void 0?i:function(D){}},z=this.webSocketFactory.create(_,Z6(A),H);z.connect(),await M;let X=dt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){const D=this.apiClient.getProject(),k=this.apiClient.getLocation();X=`projects/${D}/locations/${k}/`+X}let Y={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Bh.AUDIO]}:e.config.responseModalities=[Bh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],O=[];for(const D of ue)if(this.isCallableTool(D)){const k=D;O.push(await k.tool())}else O.push(D);O.length>0&&(e.config.tools=O);const N={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Y=MO(this.apiClient,N):Y=kO(this.apiClient,N),delete Y.config,z.send(JSON.stringify(Y)),new X6(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Q6={turnComplete:!0};class X6{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Yi(t.turns),e.isVertexAI()||(i=i.map(r=>Pf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Y6)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Q6),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:OO(e)}:t={realtimeInput:LO(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Z6(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function e3(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pS=10;function mS(n){var e,t,i;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n?.tools)!==null&&t!==void 0?t:[])if(Tl(c)){r=!0;break}if(!r)return!0;const a=(i=n?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Tl(n){return"callTool"in n&&typeof n.callTool=="function"}function t3(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Tl(r)))!==null&&i!==void 0?i:!1}function n3(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!Tl(r)))!==null&&i!==void 0?i:!1}function gS(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i3 extends ma{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,a,c,d;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!t3(t)||mS(t.config))return await this.generateContentInternal(f);if(n3(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,_;const E=Yi(f.contents),A=(a=(r=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:pS;let R=0;for(;R<A&&(h=await this.generateContentInternal(f),!(!h.functionCalls||h.functionCalls.length===0));){const M=h.candidates[0].content,B=[];for(const L of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Tl(L)){const H=await L.callTool(h.functionCalls);B.push(...H)}R++,_={role:"user",parts:B},f.contents=Yi(f.contents),f.contents.push(M),f.contents.push(_),gS(f.config)&&(E.push(M),E.push(_))}return gS(f.config)&&(h.automaticFunctionCallingHistory=E),h},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),mS(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let a;const c=[];if(i?.generatedImages)for(const f of i.generatedImages)f&&f?.safetyAttributes&&((r=f?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=f?.safetyAttributes:c.push(f);let d;return a?d={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Mu(ua.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,a,c,d,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(a=t.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((f=(d=t.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const c=await Promise.all(a.map(async f=>Tl(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&zI(e.config.tools)){const f=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),$I(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,r;const a=new Map;for(const c of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Tl(c)){const d=c,f=await d.tool();for(const h of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,r;const a=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:pS;let c=!1,d=0;const f=await this.initAfcToolsMap(e);return(function(h,_,E){var A,R;return _l(this,arguments,function*(){for(var M,B,L,G;d<a;){c&&(d++,c=!1);const Y=yield Pt(h.processParamsMaybeAddMcpUsage(E)),ue=yield Pt(h.generateContentStreamInternal(Y)),O=[],N=[];try{for(var H=!0,z=(B=void 0,lu(ue)),X;X=yield Pt(z.next()),M=X.done,!M;H=!0){G=X.value,H=!1;const D=G;if(yield yield Pt(D),D.candidates&&(!((A=D.candidates[0])===null||A===void 0)&&A.content)){N.push(D.candidates[0].content);for(const k of(R=D.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(d<a&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(k.functionCall.name)){const F=yield Pt(_.get(k.functionCall.name).callTool([k.functionCall]));O.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(D){B={error:D}}finally{try{!H&&!M&&(L=z.return)&&(yield Pt(L.call(z)))}finally{if(B)throw B.error}}if(O.length>0){c=!0;const D=new jc;D.candidates=[{content:{role:"user",parts:O}}],yield yield Pt(D);const k=[];k.push(...N),k.push({role:"user",parts:O});const F=Yi(E.contents).concat(k);E.contents=F}else break}})})(this,f,e)}async generateContentInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=cS(this.apiClient,e);return d=Se("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=dS(_),A=new jc;return Object.assign(A,E),A})}else{const h=lS(this.apiClient,e);return d=Se("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=uS(_),A=new jc;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=cS(this.apiClient,e);return d=Se("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(E){return _l(this,arguments,function*(){var A,R,M,B;try{for(var L=!0,G=lu(E),H;H=yield Pt(G.next()),A=H.done,!A;L=!0){B=H.value,L=!1;const z=B,X=dS(yield Pt(z.json()));X.sdkHttpResponse={headers:z.headers};const Y=new jc;Object.assign(Y,X),yield yield Pt(Y)}}catch(z){R={error:z}}finally{try{!L&&!A&&(M=G.return)&&(yield Pt(M.call(G)))}finally{if(R)throw R.error}}})})}else{const h=lS(this.apiClient,e);return d=Se("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(E){return _l(this,arguments,function*(){var A,R,M,B;try{for(var L=!0,G=lu(E),H;H=yield Pt(G.next()),A=H.done,!A;L=!0){B=H.value,L=!1;const z=B,X=uS(yield Pt(z.json()));X.sdkHttpResponse={headers:z.headers};const Y=new jc;Object.assign(Y,X),yield yield Pt(Y)}}catch(z){R={error:z}}finally{try{!L&&!A&&(M=G.return)&&(yield Pt(M.call(G)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=m4(this.apiClient,e);return d=Se("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=y4(_),A=new $A;return Object.assign(A,E),A})}else{const h=p4(this.apiClient,e);return d=Se("{model}:batchEmbedContents",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=g4(_),A=new $A;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=I4(this.apiClient,e);return d=Se("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=R4(_),A=new KA;return Object.assign(A,E),A})}else{const h=C4(this.apiClient,e);return d=Se("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=x4(_),A=new KA;return Object.assign(A,E),A})}}async editImageInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=u4(this.apiClient,e);return a=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),r.then(f=>{const h=d4(f),_=new NV;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=S6(this.apiClient,e);return a=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),r.then(f=>{const h=w6(f),_=new PV;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=r6(this.apiClient,e);return a=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const h=o6(f),_=new DV;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=h6(this.apiClient,e);return a=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const h=f6(f),_=new kV;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=z4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>Ug(_))}else{const h=j4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>Mg(_))}}async listInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=X4(this.apiClient,e);return d=Se("{models_url}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=e6(_),A=new YA;return Object.assign(A,E),A})}else{const h=Q4(this.apiClient,e);return d=Se("{models_url}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=Z4(_),A=new YA;return Object.assign(A,E),A})}}async update(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=E6(this.apiClient,e);return d=Se("{model}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>Ug(_))}else{const h=T6(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>Mg(_))}}async delete(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=o4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=l4(_),A=new JA;return Object.assign(A,E),A})}else{const h=r4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=a4(_),A=new JA;return Object.assign(A,E),A})}}async countTokens(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=n4(this.apiClient,e);return d=Se("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=s4(_),A=new WA;return Object.assign(A,E),A})}else{const h=t4(this.apiClient,e);return d=Se("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=i4(_),A=new WA;return Object.assign(A,E),A})}}async computeTokens(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=YO(this.apiClient,e);return a=Se("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),r.then(f=>{const h=JO(f),_=new MV;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=M4(this.apiClient,e);return d=Se("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c.then(_=>{const E=D4(_),A=new Hh;return Object.assign(A,E),A})}else{const h=k4(this.apiClient,e);return d=Se("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const E=P4(_),A=new Hh;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s3 extends ma{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=xV(e);return d=Se("{operationName}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),c}else{const h=IV(e);return d=Se("{operationName}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c}}async fetchPredictVideosOperationInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=_V(e);return a=Se("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r3(n){const e={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=g(n,["data"]);t!=null&&v(e,["data"],t);const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function o3(n){const e={},t=g(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>p3(a))),v(e,["parts"],r)}const i=g(n,["role"]);return i!=null&&v(e,["role"],i),e}function a3(n,e,t){const i={},r=g(e,["expireTime"]);t!==void 0&&r!=null&&v(t,["expireTime"],r);const a=g(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&v(t,["newSessionExpireTime"],a);const c=g(e,["uses"]);t!==void 0&&c!=null&&v(t,["uses"],c);const d=g(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&v(t,["bidiGenerateContentSetup"],f3(n,d));const f=g(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&v(t,["fieldMask"],f),i}function l3(n,e){const t={},i=g(e,["config"]);return i!=null&&v(t,["config"],a3(n,i,t)),t}function c3(n){const e={};if(g(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=g(n,["fileUri"]);t!=null&&v(e,["fileUri"],t);const i=g(n,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function u3(n){const e={};if(g(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=g(n,["enableWidget"]);return t!=null&&v(e,["enableWidget"],t),e}function d3(n){const e={},t=g(n,["timeRangeFilter"]);if(t!=null&&v(e,["timeRangeFilter"],t),g(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function h3(n,e){const t={},i=g(n,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],i);const r=g(n,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);const a=g(n,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const c=g(n,["topP"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topP"],c);const d=g(n,["topK"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","topK"],d);const f=g(n,["maxOutputTokens"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","maxOutputTokens"],f);const h=g(n,["mediaResolution"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","mediaResolution"],h);const _=g(n,["seed"]);e!==void 0&&_!=null&&v(e,["setup","generationConfig","seed"],_);const E=g(n,["speechConfig"]);e!==void 0&&E!=null&&v(e,["setup","generationConfig","speechConfig"],zy(E));const A=g(n,["thinkingConfig"]);e!==void 0&&A!=null&&v(e,["setup","generationConfig","thinkingConfig"],A);const R=g(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],R);const M=g(n,["systemInstruction"]);e!==void 0&&M!=null&&v(e,["setup","systemInstruction"],o3(Bn(M)));const B=g(n,["tools"]);if(e!==void 0&&B!=null){let ue=Hl(B);Array.isArray(ue)&&(ue=ue.map(O=>g3(Bl(O)))),v(e,["setup","tools"],ue)}const L=g(n,["sessionResumption"]);e!==void 0&&L!=null&&v(e,["setup","sessionResumption"],m3(L));const G=g(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&v(e,["setup","inputAudioTranscription"],G);const H=g(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&v(e,["setup","outputAudioTranscription"],H);const z=g(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&v(e,["setup","realtimeInputConfig"],z);const X=g(n,["contextWindowCompression"]);e!==void 0&&X!=null&&v(e,["setup","contextWindowCompression"],X);const Y=g(n,["proactivity"]);return e!==void 0&&Y!=null&&v(e,["setup","proactivity"],Y),t}function f3(n,e){const t={},i=g(e,["model"]);i!=null&&v(t,["setup","model"],dt(n,i));const r=g(e,["config"]);return r!=null&&v(t,["config"],h3(r,t)),t}function p3(n){const e={},t=g(n,["videoMetadata"]);t!=null&&v(e,["videoMetadata"],t);const i=g(n,["thought"]);i!=null&&v(e,["thought"],i);const r=g(n,["inlineData"]);r!=null&&v(e,["inlineData"],r3(r));const a=g(n,["fileData"]);a!=null&&v(e,["fileData"],c3(a));const c=g(n,["thoughtSignature"]);c!=null&&v(e,["thoughtSignature"],c);const d=g(n,["functionCall"]);d!=null&&v(e,["functionCall"],d);const f=g(n,["codeExecutionResult"]);f!=null&&v(e,["codeExecutionResult"],f);const h=g(n,["executableCode"]);h!=null&&v(e,["executableCode"],h);const _=g(n,["functionResponse"]);_!=null&&v(e,["functionResponse"],_);const E=g(n,["text"]);return E!=null&&v(e,["text"],E),e}function m3(n){const e={},t=g(n,["handle"]);if(t!=null&&v(e,["handle"],t),g(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function g3(n){const e={},t=g(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(_=>_)),v(e,["functionDeclarations"],h)}if(g(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(n,["googleSearch"]);i!=null&&v(e,["googleSearch"],d3(i));const r=g(n,["googleSearchRetrieval"]);if(r!=null&&v(e,["googleSearchRetrieval"],r),g(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(n,["googleMaps"]);a!=null&&v(e,["googleMaps"],u3(a));const c=g(n,["urlContext"]);c!=null&&v(e,["urlContext"],c);const d=g(n,["computerUse"]);d!=null&&v(e,["computerUse"],d);const f=g(n,["codeExecution"]);return f!=null&&v(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y3(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function v3(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const a=y3(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?n.fieldMask=a:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>c.includes(h)?`generationConfig.${h}`:h));const f=[];a&&f.push(a),d.length>0&&f.push(...d),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class _3 extends ma{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=l3(this.apiClient,e);a=Se("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=v3(d,e.config);return r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T3(n,e){const t={},i=g(n,["name"]);return i!=null&&v(t,["_url","name"],i),t}function E3(n,e){const t={},i=g(n,["name"]);return i!=null&&v(t,["_url","name"],i),t}function A3(n,e,t){const i={};if(g(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=g(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&v(e,["displayName"],r),g(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=g(n,["epochCount"]);e!==void 0&&a!=null&&v(e,["tuningTask","hyperparameters","epochCount"],a);const c=g(n,["learningRateMultiplier"]);if(c!=null&&v(i,["tuningTask","hyperparameters","learningRateMultiplier"],c),g(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(g(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=g(n,["batchSize"]);e!==void 0&&d!=null&&v(e,["tuningTask","hyperparameters","batchSize"],d);const f=g(n,["learningRate"]);if(e!==void 0&&f!=null&&v(e,["tuningTask","hyperparameters","learningRate"],f),g(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return i}function S3(n,e,t){const i={},r=g(n,["validationDataset"]);e!==void 0&&r!=null&&v(e,["supervisedTuningSpec"],O3(r));const a=g(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&v(e,["tunedModelDisplayName"],a);const c=g(n,["description"]);e!==void 0&&c!=null&&v(e,["description"],c);const d=g(n,["epochCount"]);e!==void 0&&d!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const f=g(n,["learningRateMultiplier"]);e!==void 0&&f!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const h=g(n,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h);const _=g(n,["adapterSize"]);if(e!==void 0&&_!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_),g(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=g(n,["labels"]);return e!==void 0&&E!=null&&v(e,["labels"],E),i}function w3(n,e){const t={},i=g(n,["baseModel"]);i!=null&&v(t,["baseModel"],i);const r=g(n,["preTunedModel"]);r!=null&&v(t,["preTunedModel"],r);const a=g(n,["trainingDataset"]);a!=null&&v(t,["tuningTask","trainingData"],U3(a));const c=g(n,["config"]);return c!=null&&A3(c,t),t}function C3(n,e){const t={},i=g(n,["baseModel"]);i!=null&&v(t,["baseModel"],i);const r=g(n,["preTunedModel"]);r!=null&&v(t,["preTunedModel"],r);const a=g(n,["trainingDataset"]);a!=null&&V3(a,t);const c=g(n,["config"]);return c!=null&&S3(c,t),t}function I3(n,e){const t={},i=g(n,["name"]);return i!=null&&v(t,["_url","name"],i),t}function x3(n,e){const t={},i=g(n,["name"]);return i!=null&&v(t,["_url","name"],i),t}function R3(n,e,t){const i={},r=g(n,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const a=g(n,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const c=g(n,["filter"]);return e!==void 0&&c!=null&&v(e,["_query","filter"],c),i}function b3(n,e,t){const i={},r=g(n,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const a=g(n,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const c=g(n,["filter"]);return e!==void 0&&c!=null&&v(e,["_query","filter"],c),i}function N3(n,e){const t={},i=g(n,["config"]);return i!=null&&R3(i,t),t}function P3(n,e){const t={},i=g(n,["config"]);return i!=null&&b3(i,t),t}function D3(n,e){const t={},i=g(n,["sdkHttpResponse"]);i!=null&&v(t,["sdkHttpResponse"],i);const r=g(n,["nextPageToken"]);r!=null&&v(t,["nextPageToken"],r);const a=g(n,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>KI(d))),v(t,["tuningJobs"],c)}return t}function k3(n,e){const t={},i=g(n,["sdkHttpResponse"]);i!=null&&v(t,["sdkHttpResponse"],i);const r=g(n,["nextPageToken"]);r!=null&&v(t,["nextPageToken"],r);const a=g(n,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>Lg(d))),v(t,["tuningJobs"],c)}return t}function M3(n,e){const t={},i=g(n,["name"]);i!=null&&v(t,["model"],i);const r=g(n,["name"]);return r!=null&&v(t,["endpoint"],r),t}function U3(n,e){const t={};if(g(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=g(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),v(t,["examples","examples"],r)}return t}function V3(n,e,t){const i={},r=g(n,["gcsUri"]);e!==void 0&&r!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],r);const a=g(n,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),g(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function KI(n,e){const t={},i=g(n,["sdkHttpResponse"]);i!=null&&v(t,["sdkHttpResponse"],i);const r=g(n,["name"]);r!=null&&v(t,["name"],r);const a=g(n,["state"]);a!=null&&v(t,["state"],RI(a));const c=g(n,["createTime"]);c!=null&&v(t,["createTime"],c);const d=g(n,["tuningTask","startTime"]);d!=null&&v(t,["startTime"],d);const f=g(n,["tuningTask","completeTime"]);f!=null&&v(t,["endTime"],f);const h=g(n,["updateTime"]);h!=null&&v(t,["updateTime"],h);const _=g(n,["description"]);_!=null&&v(t,["description"],_);const E=g(n,["baseModel"]);E!=null&&v(t,["baseModel"],E);const A=g(n,["_self"]);return A!=null&&v(t,["tunedModel"],M3(A)),t}function Lg(n,e){const t={},i=g(n,["sdkHttpResponse"]);i!=null&&v(t,["sdkHttpResponse"],i);const r=g(n,["name"]);r!=null&&v(t,["name"],r);const a=g(n,["state"]);a!=null&&v(t,["state"],RI(a));const c=g(n,["createTime"]);c!=null&&v(t,["createTime"],c);const d=g(n,["startTime"]);d!=null&&v(t,["startTime"],d);const f=g(n,["endTime"]);f!=null&&v(t,["endTime"],f);const h=g(n,["updateTime"]);h!=null&&v(t,["updateTime"],h);const _=g(n,["error"]);_!=null&&v(t,["error"],_);const E=g(n,["description"]);E!=null&&v(t,["description"],E);const A=g(n,["baseModel"]);A!=null&&v(t,["baseModel"],A);const R=g(n,["tunedModel"]);R!=null&&v(t,["tunedModel"],R);const M=g(n,["preTunedModel"]);M!=null&&v(t,["preTunedModel"],M);const B=g(n,["supervisedTuningSpec"]);B!=null&&v(t,["supervisedTuningSpec"],B);const L=g(n,["tuningDataStats"]);L!=null&&v(t,["tuningDataStats"],L);const G=g(n,["encryptionSpec"]);G!=null&&v(t,["encryptionSpec"],G);const H=g(n,["partnerModelTuningSpec"]);H!=null&&v(t,["partnerModelTuningSpec"],H);const z=g(n,["customBaseModel"]);z!=null&&v(t,["customBaseModel"],z);const X=g(n,["experiment"]);X!=null&&v(t,["experiment"],X);const Y=g(n,["labels"]);Y!=null&&v(t,["labels"],Y);const ue=g(n,["outputUri"]);ue!=null&&v(t,["outputUri"],ue);const O=g(n,["pipelineJob"]);O!=null&&v(t,["pipelineJob"],O);const N=g(n,["serviceAccount"]);N!=null&&v(t,["serviceAccount"],N);const D=g(n,["tunedModelDisplayName"]);D!=null&&v(t,["tunedModelDisplayName"],D);const k=g(n,["veoTuningSpec"]);return k!=null&&v(t,["veoTuningSpec"],k),t}function L3(n,e){const t={},i=g(n,["sdkHttpResponse"]);i!=null&&v(t,["sdkHttpResponse"],i);const r=g(n,["name"]);r!=null&&v(t,["name"],r);const a=g(n,["metadata"]);a!=null&&v(t,["metadata"],a);const c=g(n,["done"]);c!=null&&v(t,["done"],c);const d=g(n,["error"]);return d!=null&&v(t,["error"],d),t}function O3(n,e){const t={},i=g(n,["gcsUri"]);i!=null&&v(t,["validationDatasetUri"],i);const r=g(n,["vertexDatasetResource"]);return r!=null&&v(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F3 extends ma{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Mu(ua.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),a=await this.tuneMldevInternal(r);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:Ng.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=x3(e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>Lg(_))}else{const h=I3(e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>KI(_))}}async listInternal(e){var t,i,r,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=P3(e);return d=Se("tuningJobs",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=k3(_),A=new QA;return Object.assign(A,E),A})}else{const h=N3(e);return d=Se("tunedModels",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),c.then(_=>{const E=D3(_),A=new QA;return Object.assign(A,E),A})}}async cancel(e){var t,i,r,a;let c="",d={};if(this.apiClient.isVertexAI()){const f=E3(e);c=Se("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=T3(e);c=Se("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=C3(e);return a=Se("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),r.then(f=>Lg(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=w3(e);return a=Se("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),r.then(f=>L3(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const B3=1024*1024*8,H3=3,G3=1e3,j3=2,Qm="x-goog-upload-status";async function z3(n,e,t){var i,r,a;let c=0,d=0,f=new Pg(new Response),h="upload";for(c=n.size;d<c;){const E=Math.min(B3,c-d),A=n.slice(d,d+E);d+E>=c&&(h+=", finalize");let R=0,M=G3;for(;R<H3&&(f=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(d),"Content-Length":String(E)}}}),!(!((i=f?.headers)===null||i===void 0)&&i[Qm]));)R++,await K3(M),M=M*j3;if(d+=E,((r=f?.headers)===null||r===void 0?void 0:r[Qm])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const _=await f?.json();if(((a=f?.headers)===null||a===void 0?void 0:a[Qm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return _.file}async function $3(n){return{size:n.size,type:n.type}}function K3(n){return new Promise(e=>setTimeout(e,n))}class Y3{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await z3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J3{create(e,t,i){return new W3(e,t,i)}}class W3{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yS="x-goog-api-key";class Q3{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(yS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(yS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X3="gl-node/";class Z3{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=yV(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new Q3(this.apiKey);this.apiClient=new L6({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:X3+"web",uploader:new Y3,downloader:new q3}),this.models=new i3(this.apiClient),this.live=new W6(this.apiClient,r,new J3),this.batches=new VL(this.apiClient),this.chats=new pO(this.models,this.apiClient),this.caches=new dO(this.apiClient),this.files=new wO(this.apiClient),this.operations=new s3(this.apiClient),this.authTokens=new _3(this.apiClient),this.tunings=new F3(this.apiClient)}}const Mf=new Z3({apiKey:"AIzaSyDqzpbFL3ZYrzs4ladVKW7x6bN6VbcvvkQ"});async function eF(n,e){try{const i=`You are a product name translator for a quick commerce app in India.

Available products (format: id: name (telugu, hindi)):
${e.map(d=>`${d.id}: ${d.name} (${d.teluguName}, ${d.hindiName})`).join(`
`)}

User input: "${n}"

Task: Extract product names, quantities, and units from the user's input. The input may be in Telugu, English, Hindi, or Hinglish.

Match the input to products in the database using:
- Exact matches
- Synonyms (e.g., "dal" = "pappu" = "lentils")
- Telugu names (e.g., "" = "Milk", "" = "Onion")
- Common misspellings

Return a JSON array with this structure:
[
  {
    "productId": "product_id_from_database",
    "productName": "standardized product name",
    "quantity": number or null,
    "unit": "kg/litre/piece/packet" or null,
    "confidence": 0.0 to 1.0
  }
]

If no products match, return an empty array [].
Only return valid JSON, no explanations.`,c=((await Mf.models.generateContent({model:"gemini-3-flash-preview",contents:[{role:"user",parts:[{text:i}]}]})).text||"").match(/\[[\s\S]*\]/);return c?JSON.parse(c[0]):[]}catch(t){return console.error("[Gemini] Translation error:",t),[]}}async function YI(n,e){try{const t=e.map(d=>{const f=d.nameEn||d.name||"",h=d.nameTe||"",_=h?`${f} / ${h}`:f;return`${d.id}: ${_} (${d.category})`}).join(`
`),i=`You are a smart product search assistant for a quick commerce app.

User query: "${n}"

Available products (format: id: English Name / Telugu Name (category)):
${t}

Find products that match the user's intent. Consider:
- Synonyms (e.g., "vegetables" includes tomato, onion, etc.)
- Category matches (e.g., "breakfast items" includes milk, bread, etc.)
- Telugu/Hindi/English variations (e.g.,  = Milk, doodh = milk)
- Common misspellings

Return a JSON array of matching product IDs ordered by relevance:
["product_id_1", "product_id_2", ...]

Return up to 10 most relevant matches.
Only return valid JSON array, no explanations.`,c=((await Mf.models.generateContent({model:"gemini-3-flash-preview",contents:[{role:"user",parts:[{text:i}]}]})).text||"").match(/\[[\s\S]*\]/);if(c){const d=JSON.parse(c[0]);return e.filter(f=>d.includes(f.id))}return[]}catch(t){return console.error("[Gemini] Semantic search error:",t),[]}}async function tF(n){try{const e=`You are helping a shopkeeper add products to their inventory. They spoke this product name: "${n}"

Generate both English and Telugu names for this product:

Rules:
- If they spoke in Telugu, provide the proper English translation
- If they spoke in English, provide the proper Telugu translation
- If it's a mix, identify the product and provide both proper names
- Use commonly used names in Indian commerce
- Keep names simple and accurate

Return your response in this exact format:
ENGLISH: [English name]
TELUGU: [Telugu name]

Example input: ""
Example output:
ENGLISH: Tomato
TELUGU: 

Example input: "onion"
Example output:
ENGLISH: Onion
TELUGU: 

Now generate for: "${n}"`,i=((await Mf.models.generateContent({model:"gemini-3-flash-preview",contents:[{role:"user",parts:[{text:e}]}]})).text||"").trim(),r=i.match(/ENGLISH:\s*(.+)/i),a=i.match(/TELUGU:\s*(.+)/i);return{english:r?r[1].trim():n,telugu:a?a[1].trim():n}}catch(e){return console.error("[Gemini] Bilingual generation error:",e),{english:n,telugu:n}}}async function Ky(n,e="audio/webm"){try{console.log("[Gemini] Starting audio transcription...");const i=((await Mf.models.generateContent({model:"gemini-3-flash-preview",contents:[{role:"user",parts:[{text:"Listen to this audio and transcribe exactly what was said. The audio may be in Telugu, English, Hindi, or a mix. Return ONLY the transcribed text, no explanations or additional commentary."},{inlineData:{mimeType:e,data:n}}]}]})).text||"").trim();if(console.log("[Gemini] Transcription result:",i),!i)throw new Error("No speech detected in audio");return i}catch(t){throw console.error("[Gemini] Audio transcription error:",t),t}}const Cr={vegetables:{tomato:{english:["tomato","tomatoes"],telugu:["",""],hindi:["tamatar",""],aliases:["tamato"]},onion:{english:["onion","onions"],telugu:["","",""],hindi:["pyaz","kanda",""],aliases:["ulli","ullipaya"]},potato:{english:["potato","potatoes"],telugu:["",""],hindi:["aloo",""],aliases:["bangaladumpa"]},carrot:{english:["carrot","carrots"],telugu:["",""],hindi:["gajar",""],aliases:["gajjari"]},cauliflower:{english:["cauliflower"],telugu:["",""],hindi:["gobhi","phool gobhi",""],aliases:["gobi"]},cabbage:{english:["cabbage"],telugu:["",""],hindi:["patta gobhi"," "],aliases:["gosu"]},beans:{english:["beans","green beans"],telugu:[" ",""],hindi:["sem","beans",""],aliases:["chikkudu"]},ladyfinger:{english:["ladyfinger","okra","bhindi"],telugu:[""],hindi:["bhindi",""],aliases:["bendakaya"]},brinjal:{english:["brinjal","eggplant","aubergine"],telugu:["",""],hindi:["baingan",""],aliases:["vankaya"]},chilli:{english:["chilli","chili","green chilli"],telugu:[""," "],hindi:["mirch","hari mirch",""],aliases:["mirapakaya"]}},fruits:{apple:{english:["apple","apples"],telugu:["",""],hindi:["seb",""],aliases:["sebu"]},banana:{english:["banana","bananas"],telugu:[" ",""],hindi:["kela",""],aliases:["arati","kela"]},mango:{english:["mango","mangoes"],telugu:[" ",""],hindi:["aam",""],aliases:["mamidi"]},orange:{english:["orange","oranges"],telugu:["",""],hindi:["santra","narangi",""],aliases:["narinja"]},grapes:{english:["grapes","grape"],telugu:["",""],hindi:["angoor",""],aliases:["draksha"]},pomegranate:{english:["pomegranate"],telugu:[" "],hindi:["anar","anaar",""],aliases:["danimma"]}},dairy:{milk:{english:["milk"],telugu:["",""],hindi:["doodh",""],aliases:["palu"]},curd:{english:["curd","yogurt"],telugu:["",""],hindi:["dahi",""],aliases:["perugu"]},butter:{english:["butter"],telugu:["",""],hindi:["makhan",""],aliases:["venna"]},ghee:{english:["ghee","clarified butter"],telugu:[""],hindi:["ghee",""],aliases:["neyyi"]},paneer:{english:["paneer","cottage cheese"],telugu:[""],hindi:["paneer",""],aliases:["panneer"]}},groceries:{rice:{english:["rice"],telugu:["",""],hindi:["chawal",""],aliases:["biyyam","annam"]},wheat:{english:["wheat","wheat flour","atta"],telugu:["",""],hindi:["gehun","atta",""],aliases:["godhuma"]},lentils:{english:["lentils","dal","pulses"],telugu:["",""],hindi:["dal",""],aliases:["pappu","kandulu"]},oil:{english:["oil","cooking oil"],telugu:["",""],hindi:["tel",""],aliases:["noone"]},salt:{english:["salt"],telugu:[""],hindi:["namak",""],aliases:["uppu"]},sugar:{english:["sugar"],telugu:["",""],hindi:["cheeni",""],aliases:["chakkera","panchadara"]},tea:{english:["tea","tea powder"],telugu:["",""],hindi:["chai",""],aliases:["teyaku"]}}};function nF(n){return n.map(e=>{const t=e.nameEn||e.name||"";return{id:e.id,name:t,category:e.category,subcategory:e.subcategory,price:e.discountedPrice||e.price,unit:e.unit||"piece",teluguName:e.nameTe||iF(t),hindiName:sF(t),aliases:rF(t)}})}function iF(n){if(!n)return"";const e=n.toLowerCase().trim();for(const t in Cr)for(const i in Cr[t]){const r=Cr[t][i];if(r.english.some(a=>e.includes(a)))return r.telugu[0]}return n}function sF(n){if(!n)return"";const e=n.toLowerCase().trim();for(const t in Cr)for(const i in Cr[t]){const r=Cr[t][i];if(r.english.some(a=>e.includes(a)))return r.hindi[0]}return n}function rF(n){if(!n)return[];const e=n.toLowerCase().trim();for(const t in Cr)for(const i in Cr[t]){const r=Cr[t][i];if(r.english.some(a=>e.includes(a)))return[...r.english,...r.telugu,...r.hindi,...r.aliases]}return[n]}function oF({products:n,onProductsFound:e,language:t,onVoiceStart:i,onVoiceEnd:r,onProcessingChange:a}){const[c,d]=$.useState(!1),[f,h]=$.useState(!1),[_,E]=$.useState(!0),[A]=$.useState(()=>new Io);$.useEffect(()=>{E(Io.isSupported())},[]);const R=async G=>{h(!0),a?.(!0);try{const H=nF(n),z=await eF(G,H);if(z&&z.length>0){const Y=n.filter(ue=>z.some(O=>O.productId===ue.id));if(Y.length>0){e(Y,G);return}}const X=await YI(G,n);X.length>0?e(X,G):e([],G)}catch(H){console.error("[VoiceSearch] Search error:",H),e([],"")}finally{h(!1),a?.(!1)}},M=async()=>{try{await A.startRecording(()=>{console.log("[VoiceSearch] Auto-stopping after silence detected"),B()}),d(!0),i?.()}catch(G){console.error("[VoiceSearch] Recording error:",G),G.message==="FEATURE_NOT_SUPPORTED"?alert(t==="te"?"     ":"Voice recording is not supported on your device"):G.name==="NotAllowedError"||G.name==="PermissionDeniedError"?alert(t==="te"?"  ":"Please allow microphone access"):alert(t==="te"?"   ":"Failed to start voice recording")}},B=async()=>{try{d(!1),h(!0),a?.(!0);const G=await A.stopRecording(),H=await A.blobToBase64(G);console.log("[VoiceSearch] Audio recorded, sending to Gemini...");const z=await Ky(H,G.type);console.log("[VoiceSearch] Transcribed:",z),await R(z)}catch(G){console.error("[VoiceSearch] Transcription error:",G),alert(t==="te"?" .  ":"Voice search failed. Please try again"),e([],"")}finally{h(!1),r?.()}},L=async()=>{c?await B():await M()};return _?p.jsx("button",{onClick:L,className:`voice-search-btn ${c?"listening":""} ${f?"processing":""}`,disabled:f,"aria-label":t==="te"?" ":"Voice Search",title:c?t==="te"?"... (  -)":"Speak... (auto-stops after silence)":t==="te"?"  ":"Tap mic and speak",children:c?p.jsx(Fy,{size:20}):p.jsx(qy,{size:20})}):null}const aF=({searchTerm:n,setSearchTerm:e,language:t,toggleLanguage:i,logoUrl:r,products:a,onVoiceSearch:c,onVoiceProcessing:d})=>{const f=di[t];return p.jsxs("div",{className:"app-header-modern",children:[p.jsxs("div",{className:"header-top",children:[p.jsxs("div",{className:"brand-section",children:[p.jsx("img",{src:r||"/dukaan-logo.png",alt:"DUKAAN Logo",className:"header-logo"}),p.jsx("h1",{className:"brand-name",children:t==="en"?"DUKAAN":""})]}),p.jsx("button",{onClick:i,className:"language-toggle-modern",children:"/EN"})]}),p.jsxs("div",{className:"search-bar-modern",children:[p.jsx(EI,{className:"search-icon"}),p.jsx("input",{type:"text",placeholder:f.search,value:n,onChange:_=>e(_.target.value),className:"search-input"}),a&&c&&p.jsx(oF,{products:a,onProductsFound:c,language:t,onProcessingChange:d})]})]})},lF=({currentView:n,setCurrentView:e,cartItems:t,language:i,onHomeClick:r})=>{const a=di[i],c=Object.values(t).reduce((h,_)=>h+_.quantity,0),d=h=>{h==="Home"&&r&&r(),e(h)},f=[{name:a.home,icon:bU,view:"Home"},{name:a.orders,icon:Nn,view:"Orders"},{name:a.cart,icon:AI,view:"Cart",badge:c},{name:a.profile,icon:us,view:"Profile"}];return p.jsx("div",{className:"bottom-nav",children:f.map(h=>p.jsxs("button",{onClick:()=>d(h.view),className:`nav-item ${n===h.view?"nav-item-active":""}`,children:[p.jsxs("div",{className:"nav-icon-wrapper",children:[p.jsx(h.icon,{className:"w-6 h-6"}),h.badge>0&&p.jsx("span",{className:"nav-badge",children:h.badge})]}),p.jsx("span",{className:"nav-label",children:h.name})]},h.view))})},JI=({order:n,onClose:e,language:t})=>{const i=di[t],r=c=>({pending:i.pending,accepted:i.accepted,processing:i.processing,ready_for_pickup:i.readyForPickup,out_for_delivery:i.outForDelivery,delivered:i.delivered,completed:i.completed,cancelled:i.cancelled})[c]||c,a=c=>{switch(c){case"pending":return"#9E9E9E";case"accepted":return"#2196F3";case"processing":return"#2196F3";case"ready_for_pickup":return"#9C27B0";case"out_for_delivery":return"#FF9800";case"delivered":return"#4CAF50";case"completed":return"#4CAF50";case"cancelled":return"#F44336";default:return"#9E9E9E"}};return p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{className:"modal-title",children:i.orderDetails}),p.jsx("button",{onClick:e,className:"modal-close-btn",children:p.jsx(pa,{className:"w-6 h-6"})})]}),p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"modal-order-info",children:[p.jsxs("div",{className:"modal-info-row",children:[p.jsx("span",{className:"modal-label",children:i.orderID}),p.jsx("span",{className:"modal-value",children:n.orderNumber||`#${n.id.substring(0,12)}`})]}),p.jsxs("div",{className:"modal-info-row",children:[p.jsx("span",{className:"modal-label",children:i.orderDate}),p.jsx("span",{className:"modal-value",children:new Date(n.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),p.jsxs("div",{className:"modal-info-row",children:[p.jsx("span",{className:"modal-label",children:i.status}),p.jsx("span",{className:"modal-status-badge",style:{backgroundColor:a(n.status)},children:r(n.status)})]}),n.phoneNumber&&p.jsxs("div",{className:"modal-info-row",children:[p.jsx("span",{className:"modal-label",children:i.customerPhone}),p.jsxs("a",{href:`tel:${n.phoneNumber}`,className:"modal-phone-link",children:[p.jsx(Vs,{className:"w-4 h-4"}),n.phoneNumber]})]})]}),n.deliveryAddress&&p.jsxs("div",{className:"modal-delivery-section",children:[p.jsx("h4",{className:"modal-section-title",children:i.deliveryDetails}),p.jsxs("div",{className:"modal-address-card",children:[p.jsx(la,{className:"w-5 h-5 text-green-600"}),p.jsxs("div",{className:"modal-address-content",children:[p.jsx("p",{className:"modal-address-text",children:n.deliveryAddress}),n.deliveryInstructions&&p.jsxs("p",{className:"modal-instructions-text",children:[p.jsxs("strong",{children:[i.instructions,":"]})," ",n.deliveryInstructions]})]})]})]}),p.jsxs("div",{className:"modal-items-section",children:[p.jsx("h4",{className:"modal-section-title",children:i.itemsOrdered}),p.jsx("div",{className:"modal-items-list",children:n.items.map((c,d)=>{const f=t==="te"?c.nameTe||c.nameEn||c.name:c.nameEn||c.name;return p.jsxs("div",{className:"modal-item-card",children:[p.jsx("div",{className:"modal-item-image",children:p.jsx("img",{src:c.imageUrl||"https://via.placeholder.com/60",alt:f,onError:h=>h.target.src="https://via.placeholder.com/60"})}),p.jsxs("div",{className:"modal-item-details",children:[p.jsx("h5",{className:"modal-item-name",children:f}),p.jsx("p",{className:"modal-item-weight",children:c.weight}),p.jsxs("p",{className:"modal-item-quantity",children:[i.qty,": ",c.quantity]})]}),p.jsxs("div",{className:"modal-item-price",children:[p.jsx(ds,{className:"w-4 h-4"}),(c.price*c.quantity).toFixed(0)]})]},d)})})]}),p.jsxs("div",{className:"modal-total-section",children:[p.jsx("span",{className:"modal-total-label",children:i.orderTotal}),p.jsxs("span",{className:"modal-total-amount",children:[p.jsx(ds,{className:"w-5 h-5"}),n.total.toFixed(0)]})]})]})]})})},cF=({isOpen:n,onClose:e,onConfirm:t,cartItems:i,userAddresses:r,selectedAddress:a,onAddressSelect:c,onManageAddresses:d,language:f})=>{const[h,_]=$.useState("delivery");if(!n)return null;const E=i.reduce((M,B)=>M+(B.discountedPrice??B.price)*B.quantity,0),A=f==="te"?di.te:di.en,R=()=>{if(h==="delivery"&&!a){alert(A.selectDeliveryAddress);return}t(h)};return r.find(M=>M.isDefault)||r[0],p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content",onClick:M=>M.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{className:"modal-title",children:A.confirmOrder}),p.jsx("button",{className:"modal-close-btn",onClick:e,children:p.jsx(pa,{className:"w-6 h-6"})})]}),p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"checkout-section",children:[p.jsx("h3",{className:"checkout-section-title",children:A.chooseDeliveryMethod}),p.jsxs("div",{className:"delivery-options",children:[p.jsxs("button",{className:`delivery-option-btn ${h==="delivery"?"active":""}`,onClick:()=>_("delivery"),children:[p.jsx(ks,{className:"w-5 h-5"}),p.jsx("span",{children:A.homeDelivery})]}),p.jsxs("button",{className:`delivery-option-btn ${h==="pickup"?"active":""}`,onClick:()=>_("pickup"),children:[p.jsx(ca,{className:"w-5 h-5"}),p.jsx("span",{children:A.storePickup})]})]})]}),h==="delivery"&&p.jsxs("div",{className:"checkout-section",children:[p.jsx("h3",{className:"checkout-section-title",children:A.deliveryAddress}),r.length===0?p.jsxs("div",{className:"no-address-msg",children:[p.jsx("p",{children:A.noSavedAddresses}),p.jsx("button",{onClick:()=>{e(),d()},className:"add-address-btn",children:A.addAddress})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"address-list",children:r.map(M=>p.jsxs("div",{className:`address-card ${a?.id===M.id?"selected":""}`,onClick:()=>c(M),children:[p.jsxs("div",{className:"address-header",children:[p.jsx("span",{className:`address-label ${M.label.toLowerCase()}`,children:M.label}),M.isDefault&&p.jsx("span",{className:"default-badge",children:A.default})]}),p.jsx("p",{className:"address-text",children:M.fullAddress}),M.deliveryInstructions&&p.jsxs("p",{className:"address-instructions",children:[A.note,": ",M.deliveryInstructions]})]},M.id))}),p.jsx("button",{onClick:()=>{e(),d()},className:"manage-addresses-link",children:A.manageAddresses})]})]}),h==="pickup"&&p.jsx("div",{className:"checkout-section",children:p.jsxs("div",{className:"pickup-info-card",children:[p.jsx(ca,{className:"w-12 h-12 pickup-icon"}),p.jsx("h4",{children:A.storePickup}),p.jsx("p",{children:A.orderReadyPickup}),p.jsx("p",{className:"pickup-location",children:" Ponnur, Andhra Pradesh"})]})}),p.jsx("div",{className:"checkout-section",children:p.jsxs("div",{className:"order-summary",children:[p.jsx("h3",{className:"checkout-section-title",children:A.orderSummary}),p.jsx("div",{className:"summary-items",children:i.map(M=>{const B=f==="te"?M.nameTe||M.nameEn||M.name:M.nameEn||M.name;return p.jsxs("div",{className:"summary-item",children:[p.jsxs("span",{children:[B,"  ",M.quantity]}),p.jsxs("span",{children:["",((M.discountedPrice??M.price)*M.quantity).toFixed(2)]})]},M.id)})}),p.jsxs("div",{className:"summary-total",children:[p.jsx("span",{className:"total-label",children:A.total}),p.jsxs("span",{className:"total-amount",children:["",E.toFixed(2)]})]})]})})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:e,className:"cancel-btn",children:A.cancel}),p.jsxs("button",{onClick:R,className:"confirm-order-btn",disabled:h==="delivery"&&r.length===0,children:[p.jsx($i,{className:"w-5 h-5"}),A.placeOrder," - ",E.toFixed(2)]})]})]})})},uF=({categoriesData:n,onCategoryClick:e,language:t})=>{di[t];const i=[...n].sort((r,a)=>(r.sortOrder||0)-(a.sortOrder||0));return p.jsx("div",{className:"category-section",children:p.jsx("div",{className:"category-grid",children:i.map(r=>p.jsxs("button",{onClick:()=>e(r.id),className:"category-card",style:{background:r.gradient},children:[p.jsx("div",{className:"category-icon",children:p.jsx("img",{src:r.imageUrl||"https://via.placeholder.com/50/CCCCCC/666666?text=No+Image",alt:r.nameEn,className:"category-image"})}),p.jsxs("div",{className:"category-labels",children:[p.jsx("div",{className:"category-name-en",children:r.nameEn}),p.jsxs("div",{className:"category-name-te",children:["/ ",r.nameTe]})]})]},r.id))})})},rh=({product:n,onAddToCart:e,cartItems:t,language:i})=>{const r=di[i],a=t[n.id]?.quantity||0,c=n.outOfStock===!0,d=i==="te"?n.nameTe||n.nameEn||n.name:n.nameEn||n.name;return p.jsxs("div",{className:`product-card-modern ${c?"out-of-stock-card":""}`,children:[p.jsx("img",{src:n.imageUrl||"https://via.placeholder.com/150",alt:d,className:"product-image"}),c&&p.jsx("div",{className:"out-of-stock-overlay",children:p.jsx("span",{className:"out-of-stock-badge",children:r.outOfStock.toUpperCase()})}),p.jsxs("div",{className:"product-info",children:[p.jsx("h3",{className:"product-name",children:d}),p.jsx("p",{className:"product-weight",children:n.weight}),p.jsxs("div",{className:"product-price-row",children:[p.jsxs("span",{className:"product-price",children:[p.jsx(ds,{className:"w-4 h-4"}),n.discountedPrice||n.price]}),n.discountedPrice&&p.jsxs("span",{className:"product-original-price",children:[p.jsx(ds,{className:"w-3 h-3"}),n.price]})]})]}),c?p.jsx("button",{className:"add-to-cart-btn disabled-btn",disabled:!0,children:r.outOfStock}):a===0?p.jsx("button",{onClick:()=>e(n),className:"add-to-cart-btn",children:r.addToCart}):p.jsxs("div",{className:"quantity-controls",children:[p.jsx("button",{onClick:()=>e(n,-1),className:"quantity-btn",children:p.jsx(vI,{className:"w-4 h-4"})}),p.jsx("span",{className:"quantity-display",children:a}),p.jsx("button",{onClick:()=>e(n,1),className:"quantity-btn",children:p.jsx(TI,{className:"w-4 h-4"})})]})]})},dF=({categoriesData:n,selectedCategory:e,onCategoryClick:t,language:i})=>{const a=[...n].sort((c,d)=>(c.sortOrder||0)-(d.sortOrder||0)).slice(0,6);return p.jsx("div",{className:"quick-categories-bar",children:a.map(c=>p.jsx("button",{onClick:()=>t(c.id),className:`quick-category-chip ${e===c.id?"active":""}`,children:i==="en"?c.nameEn:c.nameTe},c.id))})},hF=({products:n,onAddToCart:e,cartItems:t,setCurrentView:i,selectedCategory:r,setSelectedCategory:a,selectedSubcategory:c,setSelectedSubcategory:d,searchTerm:f,language:h,categoriesData:_,subcategoriesData:E,voiceSearchResults:A=null,setVoiceSearchResults:R=()=>{}})=>{const M=di[h],[B,L]=$.useState(null),[G,H]=$.useState(!1);console.log("[HomeView] Rendering with:",{productsCount:n?.length,categoriesCount:_?.length,voiceSearchResults:A?.length}),$.useEffect(()=>{if(!f||f.trim().length===0){L(null);return}const U=async()=>{H(!0);try{const _e=await YI(f,n);L(_e)}catch(_e){console.error("[HomeView] Semantic search error:",_e),L(null)}finally{H(!1)}},P=setTimeout(()=>{U()},500);return()=>clearTimeout(P)},[f,n]);const z=$.useMemo(()=>{if(!f)return[];const U=f.toLowerCase();return n.filter(P=>(P.nameEn||P.name||"").toLowerCase().includes(U)||P.nameTe&&P.nameTe.toLowerCase().includes(U)||P.category&&P.category.toLowerCase().includes(U))},[n,f]),X=$.useMemo(()=>A||(f?B&&B.length>0?B:z:[]),[n,f,A,B,z]),Y=$.useMemo(()=>n.filter(U=>U.isPopular===!0).sort((U,P)=>(U.sortOrder||0)-(P.sortOrder||0)),[n]),ue=f.trim().length>0||A!==null,O=$.useMemo(()=>r?E.filter(U=>U.categoryId===r).sort((U,P)=>(U.sortOrder||0)-(P.sortOrder||0)):[],[E,r]),N=$.useMemo(()=>c?n.filter(U=>U.subcategoryId===c||!U.subcategoryId&&r&&E.find(P=>P.id===c)?.categoryId===U.category).sort((U,P)=>(U.sortOrder||0)-(P.sortOrder||0)):[],[n,c,r,E]),D=U=>{a(U),d(null)},k=U=>{d(U)},F=()=>{c?d(null):r&&a(null)};if(c){const U=E.find(P=>P.id===c);return _.find(P=>P.id===r),p.jsxs("div",{className:"subcategory-products-view",children:[p.jsxs("div",{className:"view-header",children:[p.jsx("button",{onClick:F,className:"back-button",children:p.jsx(ci,{className:"w-6 h-6"})}),p.jsx("h2",{className:"view-title",children:h==="en"?U?.nameEn:U?.nameTe||U?.nameEn})]}),p.jsx("div",{className:"products-grid",children:N.length>0?N.map(P=>p.jsx(rh,{product:P,onAddToCart:e,cartItems:t,language:h},P.id)):p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No products in this subcategory yet."})})})]})}if(r){const U=_.find(P=>P.id===r);if(O.length===0){const P=n.filter(_e=>_e.category===r).sort((_e,Oe)=>(_e.sortOrder||0)-(Oe.sortOrder||0));return p.jsxs("div",{className:"subcategory-products-view",children:[p.jsxs("div",{className:"view-header",children:[p.jsx("button",{onClick:F,className:"back-button",children:p.jsx(ci,{className:"w-6 h-6"})}),p.jsx("h2",{className:"view-title",children:h==="en"?U?.nameEn:U?.nameTe||U?.nameEn})]}),p.jsx("div",{className:"products-grid",children:P.length>0?P.map(_e=>p.jsx(rh,{product:_e,onAddToCart:e,cartItems:t,language:h},_e.id)):p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No products in this category yet."})})})]})}return p.jsxs("div",{className:"subcategories-view",children:[p.jsxs("div",{className:"view-header",children:[p.jsx("button",{onClick:F,className:"back-button",children:p.jsx(ci,{className:"w-6 h-6"})}),p.jsx("h2",{className:"view-title",children:h==="en"?U?.nameEn:U?.nameTe||U?.nameEn})]}),p.jsx("div",{className:"subcategory-grid",children:O.map(P=>p.jsxs("button",{onClick:()=>k(P.id),className:"subcategory-card",children:[p.jsx("span",{className:"subcategory-icon",children:p.jsx("img",{src:P.imageUrl||"https://via.placeholder.com/48/CCCCCC/666666?text=No+Image",alt:P.nameEn,className:"subcategory-image"})}),p.jsx("span",{className:"subcategory-name",children:h==="en"?P.nameEn:P.nameTe||P.nameEn})]},P.id))})]})}return p.jsxs("div",{className:"home-view",children:[!ue&&!r&&p.jsx(dF,{categoriesData:_,selectedCategory:r,onCategoryClick:D,language:h}),!ue&&p.jsx(uF,{categoriesData:_,onCategoryClick:D,language:h}),ue?p.jsxs("div",{className:"search-results-section",children:[p.jsxs("h2",{className:"section-title",children:[A?M.voiceSearchResults:M.searchResults," (",X.length,")",G&&p.jsxs("span",{className:"ai-searching",children:["  ",M.aiSearching]})]}),X.length>0?p.jsx("div",{className:"products-grid",children:X.map(U=>p.jsx(rh,{product:U,onAddToCart:e,cartItems:t,language:h},U.id))}):G?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:M.searchingProducts})}):p.jsx("div",{className:"empty-state",children:p.jsxs("p",{children:[M.noProductsFound,' "',f,'"']})})]}):p.jsxs("div",{className:"popular-section",children:[p.jsx("h2",{className:"section-title",children:M.popularProducts}),Y.length>0?p.jsx("div",{className:"products-grid",children:Y.map(U=>p.jsx(rh,{product:U,onAddToCart:e,cartItems:t,language:h},U.id))}):p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:M.noPopularProducts})})]})]})},fF=({cartItems:n,onAddToCart:e,setCurrentView:t,onCheckout:i,language:r})=>{const a=di[r],c=Object.values(n),d=c.reduce((f,h)=>f+(h.discountedPrice??h.price)*h.quantity,0);return c.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx(AI,{className:"empty-icon"}),p.jsxs("p",{className:"empty-text",children:[a.cart," ",a.empty]})]}):p.jsxs("div",{className:"cart-view",children:[p.jsxs("div",{className:"view-header",children:[p.jsx("button",{onClick:()=>t("Home"),className:"back-button",children:p.jsx(ci,{className:"w-6 h-6"})}),p.jsx("h2",{className:"view-title",children:a.cart})]}),p.jsx("div",{className:"cart-items",style:{paddingBottom:"140px"},children:c.map(f=>{const h=r==="te"?f.nameTe||f.nameEn||f.name||"":f.nameEn||f.nameTe||f.name||"Product";return p.jsxs("div",{className:"cart-item",children:[p.jsx("img",{src:f.imageUrl||"https://via.placeholder.com/80",alt:h,className:"cart-item-image"}),p.jsxs("div",{className:"cart-item-info",children:[p.jsx("h3",{className:"cart-item-name",children:h}),p.jsx("p",{className:"cart-item-weight",children:f.weight}),p.jsxs("p",{className:"cart-item-price",children:[p.jsx(ds,{className:"w-4 h-4"}),f.discountedPrice??f.price]})]}),p.jsxs("div",{className:"quantity-controls",children:[p.jsx("button",{onClick:()=>e(f,-1),className:"quantity-btn",children:p.jsx(vI,{className:"w-4 h-4"})}),p.jsx("span",{className:"quantity-display",children:f.quantity}),p.jsx("button",{onClick:()=>e(f,1),className:"quantity-btn",children:p.jsx(TI,{className:"w-4 h-4"})})]})]},f.id)})}),p.jsxs("div",{className:"cart-footer-fixed",children:[p.jsxs("div",{className:"cart-total",children:[p.jsx("span",{children:a.total}),p.jsxs("span",{className:"total-amount",children:[p.jsx(ds,{className:"w-5 h-5"}),d.toFixed(0)]})]}),p.jsx("button",{onClick:i,className:"checkout-button",children:a.proceedToCheckout})]})]})},pF=({isOpen:n,onClose:e,onConfirm:t,currentMethod:i,userAddresses:r,onManageAddresses:a})=>{const[c,d]=$.useState(r.find(_=>_.isDefault)||r[0]||null);if(!n)return null;const f=i==="delivery"?"pickup":"delivery",h=()=>{if(f==="delivery"){if(r.length===0){alert("Please add a delivery address first"),e(),a();return}if(!c){alert("Please select a delivery address");return}t(f,c)}else t(f,null)};return p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{className:"modal-title",children:"Change Order Type"}),p.jsx("button",{className:"modal-close-btn",onClick:e,children:p.jsx(pa,{className:"w-6 h-6"})})]}),p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"change-type-info",children:[p.jsxs("div",{className:"current-method-display",children:[p.jsx("span",{className:"change-label",children:"Current:"}),i==="delivery"?p.jsxs("div",{className:"method-badge delivery",children:[p.jsx(ks,{className:"w-4 h-4"}),p.jsx("span",{children:"Home Delivery"})]}):p.jsxs("div",{className:"method-badge pickup",children:[p.jsx(ca,{className:"w-4 h-4"}),p.jsx("span",{children:"Store Pickup"})]})]}),p.jsx("div",{className:"arrow-divider",children:""}),p.jsxs("div",{className:"new-method-display",children:[p.jsx("span",{className:"change-label",children:"Change to:"}),f==="delivery"?p.jsxs("div",{className:"method-badge delivery",children:[p.jsx(ks,{className:"w-4 h-4"}),p.jsx("span",{children:"Home Delivery"})]}):p.jsxs("div",{className:"method-badge pickup",children:[p.jsx(ca,{className:"w-4 h-4"}),p.jsx("span",{children:"Store Pickup"})]})]})]}),f==="delivery"&&p.jsxs("div",{className:"address-selection-section",children:[p.jsx("h3",{className:"section-title",children:"Select Delivery Address"}),r.length===0?p.jsxs("div",{className:"no-address-msg",children:[p.jsx("p",{children:"No saved addresses. Please add one first."}),p.jsx("button",{onClick:()=>{e(),a()},className:"add-address-btn",children:"Add Address"})]}):p.jsx("div",{className:"address-list",children:r.map(_=>p.jsxs("div",{className:`address-card ${c?.id===_.id?"selected":""}`,onClick:()=>d(_),children:[p.jsx("div",{className:"address-selection-radio",children:c?.id===_.id&&p.jsx(vU,{className:"w-4 h-4"})}),p.jsxs("div",{className:"address-info",children:[p.jsxs("div",{className:"address-header",children:[p.jsx("span",{className:`address-label ${_.label.toLowerCase()}`,children:_.label}),_.isDefault&&p.jsx("span",{className:"default-badge",children:"Default"})]}),p.jsx("p",{className:"address-text",children:_.fullAddress}),_.deliveryInstructions&&p.jsxs("p",{className:"address-instructions-small",children:["Note: ",_.deliveryInstructions]})]})]},_.id))})]}),f==="pickup"&&p.jsxs("div",{className:"pickup-confirmation",children:[p.jsx("p",{className:"confirmation-text",children:"Your order will be ready for pickup at the store."}),p.jsx("p",{className:"store-location",children:" Ponnur, Andhra Pradesh"})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:e,className:"cancel-btn",children:"Cancel"}),p.jsx("button",{onClick:h,className:"confirm-btn",disabled:f==="delivery"&&r.length===0,children:"Confirm Change"})]})]})})},mF=({orders:n,language:e,setSelectedOrder:t,onChangeDeliveryMethod:i,onCancelOrder:r,userAddresses:a,onManageAddresses:c})=>{const d=di[e],[f,h]=$.useState(!1),[_,E]=$.useState(null),A=n.filter(H=>H.status!=="delivered"&&H.status!=="completed"&&H.status!=="cancelled");if(A.length===0)return p.jsxs("div",{className:"empty-state",children:[p.jsx(Nn,{className:"empty-icon"}),p.jsx("p",{className:"empty-text",children:d.noActiveOrders})]});const R=H=>({pending:d.pending,accepted:d.accepted,out_for_delivery:d.outForDelivery,ready_for_pickup:d.readyForPickup,delivered:d.delivered,completed:d.completed,cancelled:d.cancelled})[H]||H,M=H=>H==="delivered"||H==="completed"?p.jsx($i,{className:"w-5 h-5"}):H==="cancelled"?p.jsx(ml,{className:"w-5 h-5"}):H==="out_for_delivery"?p.jsx(ks,{className:"w-5 h-5"}):H==="ready_for_pickup"?p.jsx(ca,{className:"w-5 h-5"}):H==="accepted"?p.jsx($i,{className:"w-5 h-5"}):p.jsx(yu,{className:"w-5 h-5"}),B=H=>{switch(H){case"delivered":return"#4CAF50";case"completed":return"#4CAF50";case"accepted":return"#2196F3";case"out_for_delivery":return"#FF9800";case"ready_for_pickup":return"#9C27B0";case"cancelled":return"#f44336";case"pending":return"#9E9E9E";default:return"#9E9E9E"}},L=H=>{E(H),h(!0)},G=(H,z)=>{_&&(i(_.id,H,z),h(!1),E(null))};return p.jsxs("div",{className:"orders-view",children:[p.jsx("h2",{className:"view-title",children:d.activeOrders}),p.jsx("div",{className:"orders-list",children:A.map(H=>p.jsxs("div",{className:"order-card-detailed",children:[p.jsx("div",{className:"order-header-detailed",children:p.jsxs("div",{className:"order-info-row",children:[p.jsxs("div",{className:"order-meta",children:[p.jsx("span",{className:"order-date-label",children:d.orderDate}),p.jsx("span",{className:"order-date-value",children:new Date(H.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),p.jsxs("div",{className:"order-status-badge",style:{backgroundColor:B(H.status)},children:[M(H.status),p.jsx("span",{children:R(H.status)})]})]})}),p.jsx("div",{className:"order-items-detailed",children:H.items.map((z,X)=>(console.log("[Order Item Debug]",{name:z.name,hasImageUrl:!!z.imageUrl,imageUrl:z.imageUrl,weight:z.weight}),p.jsxs("div",{className:"order-item-card",children:[p.jsx("div",{className:"order-item-image",children:p.jsx("img",{src:z.imageUrl||"https://via.placeholder.com/80?text=No+Image",alt:z.name,onError:Y=>{console.log("[Image Error]",z.name,"failed to load:",z.imageUrl),Y.target.src="https://via.placeholder.com/80?text=No+Image"}})}),p.jsxs("div",{className:"order-item-details",children:[p.jsx("h4",{className:"order-item-name",children:e==="te"?z.nameTe||z.nameEn||z.name:z.nameEn||z.name}),p.jsx("p",{className:"order-item-weight",children:z.weight||"N/A"}),p.jsxs("div",{className:"order-item-pricing",children:[p.jsxs("span",{className:"order-item-quantity",children:[d.qty,": ",z.quantity]}),p.jsxs("span",{className:"order-item-price",children:[p.jsx(ds,{className:"w-3 h-3"}),(z.discountedPrice??z.price).toFixed(0)," ",d.each]})]})]}),p.jsxs("div",{className:"order-item-total",children:[p.jsx(ds,{className:"w-4 h-4"}),((z.discountedPrice??z.price)*z.quantity).toFixed(0)]})]},X)))}),H.status==="cancelled"&&H.cancellationReason&&p.jsxs("div",{className:"order-cancellation-section",children:[p.jsxs("div",{className:"cancellation-badge",children:[p.jsx(ml,{className:"w-4 h-4 text-red-600"}),p.jsxs("span",{className:"cancellation-label",children:[d.cancellationReason,":"]})]}),p.jsx("p",{className:"cancellation-reason-text",children:H.cancellationReason})]}),p.jsxs("div",{className:"order-delivery-info",children:[p.jsx("div",{className:"delivery-method-badge",children:H.deliveryMethod==="delivery"?p.jsxs(p.Fragment,{children:[p.jsx(ks,{className:"w-4 h-4"}),p.jsx("span",{children:d.homeDelivery})]}):p.jsxs(p.Fragment,{children:[p.jsx(ca,{className:"w-4 h-4"}),p.jsx("span",{children:d.storePickup})]})}),p.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(H.status==="pending"||H.status==="accepted")&&i&&p.jsxs("button",{onClick:()=>L(H),className:"change-delivery-btn",children:[p.jsx(WU,{className:"w-4 h-4"}),e==="te"?"  ":"Change Order Type"]}),H.status==="pending"&&r&&p.jsxs("button",{onClick:()=>{window.confirm(e==="te"?"    ?":"Are you sure you want to cancel this order?")&&r(H.id,e==="te"?"  ":"Customer cancelled")},className:"cancel-order-btn",style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",background:"#fff",border:"1px solid #f44336",borderRadius:"8px",color:"#f44336",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},children:[p.jsx(ml,{className:"w-4 h-4"}),e==="te"?"  ":"Cancel Order"]})]})]}),H.riderPhone&&(H.status==="out_for_delivery"||H.status==="delivered")&&p.jsxs("div",{style:{background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",padding:"12px 16px",borderRadius:"8px",marginTop:"12px",border:"1px solid #2196F3"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[p.jsx(ks,{style:{color:"#1976D2",width:"18px",height:"18px"}}),p.jsx("span",{style:{fontWeight:"600",color:"#1565C0",fontSize:"14px"},children:"Delivery Partner"})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx(Vs,{style:{color:"#1976D2",width:"16px",height:"16px"}}),p.jsxs("a",{href:`tel:${H.riderPhone}`,style:{color:"#0D47A1",fontSize:"16px",fontWeight:"600",textDecoration:"none"},children:[H.riderName||"Delivery Partner",": ",H.riderPhone]})]})]}),p.jsx("div",{className:"order-footer-detailed",children:p.jsxs("div",{className:"order-total-row",children:[p.jsx("span",{className:"order-total-label",children:d.orderTotal}),p.jsxs("span",{className:"order-total-amount",children:[p.jsx(ds,{className:"w-5 h-5"}),H.total.toFixed(0)]})]})})]},H.id))}),f&&_&&p.jsx(pF,{isOpen:f,onClose:()=>{h(!1),E(null)},onConfirm:G,currentMethod:_.deliveryMethod,userAddresses:a||[],onManageAddresses:c})]})},gF=({userProfile:n,orders:e,onLogout:t,language:i,setCurrentView:r,userAddresses:a,onManageAddresses:c})=>{const d=di[i],[f,h]=$.useState(!1),[_,E]=$.useState({name:n?.name||"",email:n?.email||""}),A=e.length;e.reduce((H,z)=>H+z.total,0);const M=e.filter(H=>H.status==="delivered"||H.status==="completed").reduce((H,z)=>z.totalSavings?H+z.totalSavings:z.items?H+z.items.reduce((X,Y)=>Y.originalPrice&&Y.discountedPrice&&Y.discountedPrice<Y.originalPrice?X+(Y.originalPrice-Y.discountedPrice)*Y.quantity:X,0):H,0),B=()=>{E({name:n?.name||"",email:n?.email||""}),h(!0)},L=()=>{h(!1),E({name:n?.name||"",email:n?.email||""})},G=async()=>{if(!_.name.trim()){alert("Please enter your name");return}if(!n||!n.id){alert("User profile not found");return}try{const{db:H}=Wi(),z=Ke(H,"artifacts",be,"public","data","users",n.id);await Qn(z,{name:_.name.trim(),email:_.email.trim(),profileCompleted:!0,updatedAt:new Date().toISOString()}),h(!1),alert("Profile updated successfully! Please refresh to see changes."),window.location.reload()}catch(H){console.error("Error updating profile:",H),alert("Failed to update profile. Please try again.")}};return p.jsxs("div",{className:"profile-view",children:[p.jsx("h2",{className:"view-title",children:d.profile}),p.jsxs("div",{className:"profile-info",children:[p.jsx("div",{className:"profile-avatar",children:p.jsx(us,{className:"w-12 h-12"})}),n?f?p.jsxs("div",{className:"profile-edit-form",children:[p.jsx("input",{type:"text",value:_.name,onChange:H=>E({..._,name:H.target.value}),placeholder:"Enter your name",className:"profile-edit-input"}),p.jsx("input",{type:"email",value:_.email,onChange:H=>E({..._,email:H.target.value}),placeholder:"Enter your email (optional)",className:"profile-edit-input"}),p.jsxs("div",{className:"profile-edit-actions",children:[p.jsxs("button",{onClick:G,className:"profile-save-btn",children:[p.jsx(yl,{className:"w-4 h-4"}),"Save"]}),p.jsxs("button",{onClick:L,className:"profile-cancel-btn",children:[p.jsx(pa,{className:"w-4 h-4"}),"Cancel"]})]})]}):p.jsxs("div",{className:"profile-details",children:[p.jsxs("div",{className:"profile-info-text",children:[p.jsx("p",{className:"profile-name",children:n.name}),p.jsx("p",{className:"profile-phone",children:n.phoneNumber}),n.email&&p.jsx("p",{className:"profile-email",children:n.email})]}),p.jsx("button",{onClick:B,className:"profile-edit-btn",children:p.jsx($U,{className:"w-4 h-4"})})]}):p.jsx("p",{className:"profile-id",children:"Loading profile..."})]}),p.jsxs("div",{className:"profile-stats",children:[p.jsxs("div",{className:"stat-card",children:[p.jsx(Nn,{className:"w-6 h-6 text-green-600"}),p.jsxs("div",{children:[p.jsx("p",{className:"stat-value",children:A}),p.jsx("p",{className:"stat-label",children:d.totalOrders})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx(ds,{className:"w-6 h-6 text-green-600"}),p.jsxs("div",{children:[p.jsxs("p",{className:"stat-value",children:["",Math.round(M)]}),p.jsx("p",{className:"stat-label",children:d.moneySaved})]})]})]}),p.jsx("div",{className:"profile-section",children:p.jsxs("button",{className:"order-history-button",onClick:c,children:[p.jsx(la,{className:"w-5 h-5"}),p.jsxs("span",{children:["Manage Addresses (",a.length,")"]}),p.jsx(ci,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]})}),p.jsx("div",{className:"profile-section",children:p.jsxs("button",{className:"order-history-button",onClick:()=>r("OrderHistory"),children:[p.jsx(Nn,{className:"w-5 h-5"}),p.jsxs("span",{children:["View Order History (",A,")"]}),p.jsx(ci,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]})}),n&&(n.role==="shopkeeper"||n.role==="rider")&&p.jsxs("div",{className:"profile-section",children:[p.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"#666"},children:"Switch Mode"}),n.role==="shopkeeper"&&p.jsxs("button",{className:"order-history-button",onClick:()=>window.location.href="?mode=shopkeeper",style:{marginBottom:"8px"},children:[p.jsx(rV,{className:"w-5 h-5"}),p.jsx("span",{children:"Shopkeeper Dashboard"}),p.jsx(ci,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]}),n.role==="rider"&&p.jsxs("button",{className:"order-history-button",onClick:()=>window.location.href="?mode=rider",children:[p.jsx(yI,{className:"w-5 h-5"}),p.jsx("span",{children:"Rider Dashboard"}),p.jsx(ci,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]})]}),p.jsxs("button",{onClick:t,className:"logout-button",children:[p.jsx(VU,{className:"w-5 h-5"}),d.logout]})]})},yF=({orders:n,onBack:e,onSelectOrder:t,language:i,translations:r})=>{const a=r[i];return p.jsxs("div",{className:"order-history-view",children:[p.jsxs("div",{className:"view-header",children:[p.jsx("button",{onClick:e,className:"back-button",children:p.jsx(ci,{className:"w-6 h-6"})}),p.jsx("h2",{className:"view-title",children:"Order History"})]}),n.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx(Nn,{className:"empty-icon"}),p.jsx("p",{className:"empty-text",children:a.noOrders})]}):p.jsx("div",{className:"orders-list",children:n.map(c=>p.jsxs("div",{className:"order-history-item clickable",onClick:()=>t(c),children:[p.jsxs("div",{className:"order-history-info",children:[p.jsx("p",{className:"order-history-date",children:new Date(c.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),p.jsxs("p",{className:"order-history-items",children:[c.items.length," items  ",c.status]})]}),p.jsxs("div",{className:"order-history-right",children:[p.jsxs("p",{className:"order-history-price",children:["",c.total.toFixed(0)]}),p.jsx(ci,{className:"chevron-icon",style:{transform:"rotate(180deg)"}})]})]},c.id))})]})},vF=({phoneNumber:n,onPhoneChange:e,countryCode:t,onCountryCodeChange:i,password:r,onPasswordChange:a,otp:c,onOtpChange:d,authStep:f,isNewUser:h,onCheckUser:_,onSendOTP:E,onVerifyOTP:A,onPasswordLogin:R,onCompleteRegistration:M,onWhatsAppLogin:B,onHostedLogin:L})=>{const[G,H]=$.useState({name:"",password:"",confirmPassword:"",address:{street:"",city:"",state:"Andhra Pradesh",pincode:""}}),z=()=>{if(!G.name||!G.password){alert("Please fill in all required fields");return}if(G.password!==G.confirmPassword){alert("Passwords do not match");return}if(G.password.length<6){alert("Password must be at least 6 characters");return}if(!G.address.street||!G.address.city||!G.address.pincode){alert("Please enter your address details");return}if(G.address.pincode.length!==6){alert("Please enter a valid 6-digit pincode");return}M(G)};return p.jsx("div",{className:"login-screen",children:p.jsxs("div",{className:"login-container",children:[p.jsxs("div",{className:"login-header",children:[p.jsx("h1",{className:"login-title",children:"DUKAAN "}),p.jsxs("p",{className:"login-subtitle",children:[f==="phone"&&"Welcome! Enter your phone number",f==="password"&&"Welcome back! Enter your password",f==="otp"&&"Verify your phone number",f==="register"&&"Complete your registration"]})]}),f==="phone"&&p.jsxs("div",{className:"login-form",children:[p.jsx("h2",{className:"form-title",children:"Phone Number"}),p.jsxs("div",{className:"phone-input-group",children:[p.jsxs("select",{value:t,onChange:X=>i(X.target.value),className:"country-code-select",children:[p.jsx("option",{value:"+91",children:"+91 (India)"}),p.jsx("option",{value:"+1",children:"+1 (US)"}),p.jsx("option",{value:"+44",children:"+44 (UK)"}),p.jsx("option",{value:"+971",children:"+971 (UAE)"})]}),p.jsx("input",{type:"tel",placeholder:"Phone Number",value:n,onChange:X=>{const Y=X.target.value.replace(/\D/g,"").slice(0,10);e(Y)},className:"phone-input",maxLength:"10"})]}),p.jsxs("button",{onClick:L,className:"login-btn",disabled:n.length!==10,children:[p.jsx(Vs,{className:"w-5 h-5"}),"Continue"]})]}),f==="password"&&p.jsxs("div",{className:"login-form",children:[p.jsx("h2",{className:"form-title",children:"Enter Password"}),p.jsxs("p",{className:"form-hint",children:["Phone: ",t,n]}),p.jsxs("div",{className:"input-group",children:[p.jsx(gl,{className:"input-icon"}),p.jsx("input",{type:"password",placeholder:"Enter your password",value:r,onChange:X=>a(X.target.value),className:"password-input"})]}),p.jsxs("button",{onClick:R,className:"login-btn",children:[p.jsx($i,{className:"w-5 h-5"}),"Login"]}),p.jsxs("button",{onClick:E,className:"otp-link-btn",style:{background:"transparent",border:"2px solid #4CAF50",color:"#4CAF50",marginTop:"12px"},children:[p.jsx(Vs,{className:"w-5 h-5"}),"Use OTP Instead"]}),p.jsx("button",{onClick:()=>window.location.reload(),className:"back-btn",children:"Change Phone Number"})]}),f==="otp"&&p.jsxs("div",{className:"login-form",children:[p.jsx("h2",{className:"form-title",children:"Enter OTP"}),p.jsxs("p",{className:"form-hint",children:["We sent a 6-digit code to ",t,n]}),p.jsx("input",{type:"text",placeholder:"Enter 6-digit OTP",value:c,onChange:X=>{const Y=X.target.value.replace(/\D/g,"").slice(0,6);d(Y)},className:"otp-input",maxLength:"6"}),p.jsxs("button",{onClick:A,className:"login-btn",disabled:c.length!==6,children:[p.jsx($i,{className:"w-5 h-5"}),"Verify OTP"]}),p.jsx("button",{onClick:()=>window.location.reload(),className:"back-btn",children:"Change Phone Number"})]}),f==="register"&&p.jsxs("div",{className:"login-form",children:[p.jsx("h2",{className:"form-title",children:"Create Your Account"}),p.jsxs("p",{className:"form-hint",children:["Phone verified: ",t,n]}),p.jsxs("div",{className:"input-group",children:[p.jsx(us,{className:"input-icon"}),p.jsx("input",{type:"text",placeholder:"Your Full Name *",value:G.name,onChange:X=>H({...G,name:X.target.value}),className:"text-input"})]}),p.jsxs("div",{className:"input-group",children:[p.jsx(gl,{className:"input-icon"}),p.jsx("input",{type:"password",placeholder:"Create Password (min 6 characters) *",value:G.password,onChange:X=>H({...G,password:X.target.value}),className:"password-input"})]}),p.jsxs("div",{className:"input-group",children:[p.jsx(gl,{className:"input-icon"}),p.jsx("input",{type:"password",placeholder:"Confirm Password *",value:G.confirmPassword,onChange:X=>H({...G,confirmPassword:X.target.value}),className:"password-input"})]}),p.jsx("div",{className:"registration-divider",children:p.jsx("span",{children:"Your Address"})}),p.jsx("input",{type:"text",placeholder:"Street / Area / Village *",value:G.address.street,onChange:X=>H({...G,address:{...G.address,street:X.target.value}}),className:"registration-input"}),p.jsxs("div",{className:"registration-row",children:[p.jsx("input",{type:"text",placeholder:"City *",value:G.address.city,onChange:X=>H({...G,address:{...G.address,city:X.target.value}}),className:"registration-input",style:{flex:1}}),p.jsx("input",{type:"text",placeholder:"Pincode *",value:G.address.pincode,onChange:X=>{const Y=X.target.value.replace(/\D/g,"").slice(0,6);H({...G,address:{...G.address,pincode:Y}})},className:"registration-input",style:{flex:1},maxLength:"6"})]}),p.jsxs("select",{value:G.address.state,onChange:X=>H({...G,address:{...G.address,state:X.target.value}}),className:"registration-select",children:[p.jsx("option",{value:"Andhra Pradesh",children:"Andhra Pradesh"}),p.jsx("option",{value:"Telangana",children:"Telangana"}),p.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),p.jsx("option",{value:"Karnataka",children:"Karnataka"}),p.jsx("option",{value:"Other",children:"Other"})]}),p.jsxs("button",{onClick:z,className:"login-btn",disabled:!G.name||!G.password||!G.confirmPassword,children:[p.jsx($i,{className:"w-5 h-5"}),"Complete Registration"]})]}),p.jsx("div",{id:"recaptcha-container",style:{display:"none"}})]})})},_F=({onSave:n,onClose:e})=>{const[t,i]=$.useState({name:"",email:"",password:"",confirmPassword:""}),r=c=>{if(c.preventDefault(),!t.name.trim()){alert("Please enter your name");return}if(t.password&&t.password.length<6){alert("Password must be at least 6 characters");return}if(t.password&&t.password!==t.confirmPassword){alert("Passwords do not match");return}if(t.email&&!t.email.includes("@")){alert("Please enter a valid email address");return}n({name:t.name.trim(),email:t.email.trim()||null,password:t.password||null,profileCompleted:!0})},a=()=>{n({name:null,email:null,password:null,profileCompleted:!1})};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content profile-setup-modal",onClick:c=>c.stopPropagation(),style:{padding:"0"},children:[p.jsxs("div",{className:"modal-header profile-setup-header",children:[p.jsx("h3",{className:"modal-title",style:{color:"white",margin:0,fontSize:"24px",fontWeight:"700"},children:"Welcome! "}),p.jsx("p",{style:{fontSize:"15px",color:"rgba(255,255,255,0.95)",marginTop:"10px",margin:0},children:"Just tell us your name to get started"})]}),p.jsxs("form",{onSubmit:r,className:"profile-setup-form",children:[p.jsxs("div",{className:"form-group",style:{marginBottom:"22px"},children:[p.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",fontWeight:"600",fontSize:"15px"},children:[p.jsx(us,{className:"w-5 h-5"}),"Your Name *"]}),p.jsx("input",{type:"text",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"Enter your full name",value:t.name,onChange:c=>i({...t,name:c.target.value}),required:!0,autoFocus:!0})]}),p.jsxs("div",{style:{background:"#f5f5f5",padding:"18px",borderRadius:"12px",marginBottom:"24px"},children:[p.jsx("p",{style:{fontSize:"14px",color:"#666",margin:"0 0 16px 0",fontWeight:"600"},children:"Optional (for future logins)"}),p.jsxs("div",{className:"form-group",style:{marginBottom:"14px"},children:[p.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"14px"},children:[p.jsx(OU,{className:"w-5 h-5"}),"Email Address"]}),p.jsx("input",{type:"email",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"your@email.com (optional)",value:t.email,onChange:c=>i({...t,email:c.target.value})})]}),p.jsxs("div",{className:"form-group",style:{marginBottom:"14px"},children:[p.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"14px"},children:[p.jsx(gl,{className:"w-5 h-5"}),"Password"]}),p.jsx("input",{type:"password",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"Minimum 6 characters (optional)",value:t.password,onChange:c=>i({...t,password:c.target.value})})]}),t.password&&p.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[p.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"14px"},children:[p.jsx(gl,{className:"w-5 h-5"}),"Confirm Password"]}),p.jsx("input",{type:"password",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"Re-enter password",value:t.confirmPassword,onChange:c=>i({...t,confirmPassword:c.target.value})})]}),p.jsx("p",{style:{fontSize:"11px",color:"#999",marginTop:"8px",marginBottom:0},children:" Skip password to continue with OTP-only login"})]}),p.jsxs("button",{type:"submit",className:"btn-primary",style:{width:"100%",padding:"16px",fontSize:"16px",fontWeight:"600",background:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)",border:"none",borderRadius:"12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"12px"},children:[p.jsx(yl,{className:"w-5 h-5"}),"Complete Setup"]}),p.jsx("button",{type:"button",onClick:a,className:"btn-secondary",style:{width:"100%",padding:"14px",fontSize:"14px",fontWeight:"500",background:"transparent",color:"#4CAF50",border:"2px solid #4CAF50",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s"},children:"Skip for Now"}),p.jsx("p",{style:{fontSize:"11px",color:"#999",textAlign:"center",marginTop:"12px",marginBottom:0},children:"You can complete your profile later before placing orders"})]})]})})},TF=({addresses:n,onAddAddress:e,onEditAddress:t,onDeleteAddress:i,onSetDefault:r,onClose:a})=>p.jsx("div",{className:"modal-overlay",onClick:a,children:p.jsxs("div",{className:"modal-content address-manager-modal",onClick:c=>c.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{className:"modal-title",children:"Manage Addresses"}),p.jsx("button",{onClick:a,className:"modal-close-btn",children:p.jsx(pa,{className:"w-6 h-6"})})]}),p.jsxs("div",{className:"address-manager-body",children:[p.jsxs("button",{onClick:e,className:"add-address-btn",children:[p.jsx(mh,{className:"w-5 h-5"}),"Add New Address"]}),n.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx(la,{className:"w-16 h-16 text-gray-400"}),p.jsx("p",{children:"No saved addresses yet"})]}):p.jsx("div",{className:"addresses-list",children:n.map(c=>p.jsxs("div",{className:"address-card",children:[p.jsxs("div",{className:"address-card-header",children:[p.jsxs("div",{className:"address-label-section",children:[p.jsx("span",{className:`address-label-badge ${c.label.toLowerCase()}`,children:c.label}),c.isDefault&&p.jsx("span",{className:"default-badge",children:"Default"})]}),p.jsxs("div",{className:"address-actions",children:[p.jsx("button",{onClick:()=>t(c),className:"icon-btn",title:"Edit",children:p.jsx(gh,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>i(c.id),className:"icon-btn delete",title:"Delete",children:p.jsx(Xc,{className:"w-4 h-4"})})]})]}),p.jsxs("div",{className:"address-card-body",children:[p.jsx(la,{className:"w-4 h-4 text-gray-500"}),p.jsx("p",{className:"address-text",children:c.fullAddress})]}),c.deliveryInstructions&&p.jsxs("p",{className:"address-instructions",children:[p.jsx("strong",{children:"Instructions:"})," ",c.deliveryInstructions]}),!c.isDefault&&p.jsx("button",{onClick:()=>r(c.id),className:"set-default-btn",children:"Set as Default"})]},c.id))})]})]})}),EF=({onSave:n,onClose:e,editingAddress:t})=>{const[i,r]=$.useState({label:t?.label||"Home",fullAddress:t?.fullAddress||"",deliveryInstructions:t?.deliveryInstructions||"",latitude:t?.latitude||null,longitude:t?.longitude||null}),[a,c]=$.useState(!1),d=()=>{"geolocation"in navigator?(c(!0),navigator.geolocation.getCurrentPosition(async h=>{const{latitude:_,longitude:E}=h.coords;try{const M=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${_}&lon=${E}&addressdetails=1`)).json()).display_name||`${_.toFixed(6)}, ${E.toFixed(6)}`;r({...i,fullAddress:M,latitude:_,longitude:E}),c(!1)}catch(A){console.error("Error getting address:",A),r({...i,fullAddress:`Location: ${_.toFixed(6)}, ${E.toFixed(6)}`,latitude:_,longitude:E}),c(!1)}},h=>{console.error("Geolocation error:",h),alert("Unable to get your location. Please enter address manually or check location permissions."),c(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):alert("Geolocation is not supported by your device.")},f=h=>{if(h.preventDefault(),!i.fullAddress.trim()){alert("Please enter an address");return}n(i)};return p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{className:"modal-title",children:t?"Edit Address":"Add New Address"}),p.jsx("button",{onClick:e,className:"modal-close-btn",children:p.jsx(pa,{className:"w-6 h-6"})})]}),p.jsxs("form",{onSubmit:f,className:"address-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Address Label"}),p.jsxs("select",{className:"form-input",value:i.label,onChange:h=>r({...i,label:h.target.value}),children:[p.jsx("option",{value:"Home",children:"Home"}),p.jsx("option",{value:"Work",children:"Work"}),p.jsx("option",{value:"Other",children:"Other"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Full Address"}),p.jsx("textarea",{className:"form-input",rows:"3",placeholder:"Enter complete delivery address",value:i.fullAddress,onChange:h=>r({...i,fullAddress:h.target.value}),required:!0}),p.jsxs("button",{type:"button",onClick:d,disabled:a,style:{width:"100%",marginTop:"10px",background:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)",color:"white",border:"none",borderRadius:"8px",padding:"12px 16px",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",fontWeight:"600",opacity:a?.6:1,transition:"opacity 0.2s"},children:[p.jsx(_I,{className:"w-4 h-4"}),a?"Getting Location...":"Use My Location"]}),i.latitude&&i.longitude&&p.jsxs("p",{className:"form-hint",style:{color:"#4CAF50",marginTop:"8px",display:"flex",alignItems:"center",gap:"4px",fontSize:"13px"},children:[p.jsx(la,{className:"w-4 h-4"}),"Location captured: ",i.latitude.toFixed(6),", ",i.longitude.toFixed(6)]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Delivery Instructions (Optional)"}),p.jsx("input",{type:"text",className:"form-input",placeholder:"e.g., Ring bell twice, Gate code 1234",value:i.deliveryInstructions,onChange:h=>r({...i,deliveryInstructions:h.target.value})})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),p.jsxs("button",{type:"submit",className:"btn-primary",children:[p.jsx(yl,{className:"w-5 h-5"}),t?"Update Address":"Add Address"]})]})]})]})})},AF=()=>{const{db:n}=Wi(),[e,t]=$.useState([]),[i,r]=$.useState(!0);return $.useEffect(()=>{const a=an(n,"artifacts",be,"public","data","users"),c=Jn(a,d=>{const f=d.docs.map(h=>({id:h.id,...h.data()}));f.sort((h,_)=>new Date(_.createdAt||0)-new Date(h.createdAt||0)),t(f),r(!1)});return()=>c()},[n]),i?p.jsx("div",{className:"loading-state",children:"Loading users..."}):p.jsxs("div",{className:"users-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h3",{className:"section-subtitle",children:"Registered Users"}),p.jsx("span",{className:"count-badge",children:e.length})]}),p.jsx("p",{className:"section-description",children:"All users who have registered via phone authentication."}),e.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx(us,{className:"empty-icon"}),p.jsx("p",{className:"empty-text",children:"No users registered yet"})]}):p.jsx("div",{className:"users-list",children:e.map(a=>p.jsxs("div",{className:"user-card",children:[p.jsx("div",{className:"user-avatar",children:p.jsx(us,{className:"w-8 h-8"})}),p.jsxs("div",{className:"user-info",children:[p.jsx("h4",{className:"user-name",children:a.name||"No name"}),p.jsxs("p",{className:"user-phone",children:[p.jsx(Vs,{className:"w-4 h-4"}),p.jsx("a",{href:`tel:${a.phoneNumber}`,children:a.phoneNumber})]}),a.email&&p.jsx("p",{className:"user-email",children:a.email}),p.jsxs("p",{className:"user-date",children:["Joined: ",a.createdAt?new Date(a.createdAt).toLocaleDateString():"Unknown"]})]})]},a.id))})]})};function Xm({onTranscript:n,language:e="en",className:t=""}){const[i,r]=$.useState(!1),[a,c]=$.useState(!0),[d]=$.useState(()=>new Io);$.useEffect(()=>{c(Io.isSupported())},[]);const f=async()=>{try{await d.startRecording(()=>{console.log("[VoiceInput] Auto-stopping after silence"),h()}),r(!0)}catch(E){console.error("[VoiceInput] Recording error:",E),E.message==="FEATURE_NOT_SUPPORTED"?alert(e==="te"?"     ":"Voice recording is not supported on your device"):E.name==="NotAllowedError"||E.name==="PermissionDeniedError"?alert(e==="te"?"  ":"Please allow microphone access"):alert(e==="te"?"   ":"Failed to start voice recording")}},h=async()=>{try{const E=await d.stopRecording(),A=await d.blobToBase64(E),R=await Ky(A,E.type);n(R)}catch(E){console.error("[VoiceInput] Transcription error:",E),alert(e==="te"?" .  ":"Voice input failed. Please try again")}finally{r(!1)}},_=async()=>{i?await h():await f()};return a?p.jsx("button",{type:"button",onClick:_,className:`voice-input-btn ${i?"listening":""} ${t}`,"aria-label":e==="te"?" ":"Voice Input",title:i?e==="te"?"... 2    ":"Speaking... Auto-stops after 2s silence":e==="te"?"  ":"Tap mic and speak",children:i?p.jsx(Fy,{size:18}):p.jsx(qy,{size:18})}):null}const Zm=({onTranscript:n,className:e=""})=>{const[t,i]=$.useState(!1),[r,a]=$.useState(!0),[c]=$.useState(()=>new Io);$.useEffect(()=>{a(Io.isSupported())},[]);const d=async E=>{console.log("[BilingualVoiceInput] Recognized:",E);try{const{english:A,telugu:R}=await tF(E);console.log("[BilingualVoiceInput] Generated EN:",A,"TE:",R),n({english:A||"",telugu:R||"",original:E||""})}catch(A){console.error("[BilingualVoiceInput] Translation error:",A),n({english:E||"",telugu:E||"",original:E||""})}},f=async()=>{try{await c.startRecording(()=>{console.log("[BilingualVoiceInput] Auto-stopping after silence"),h()}),i(!0)}catch(E){console.error("[BilingualVoiceInput] Recording error:",E),E.message==="FEATURE_NOT_SUPPORTED"?alert(`Voice recording is not supported on your device
     `):E.name==="NotAllowedError"||E.name==="PermissionDeniedError"?alert(`Please allow microphone access
  `):alert(`Failed to start voice recording
   `)}},h=async()=>{try{const E=await c.stopRecording(),A=await c.blobToBase64(E),R=await Ky(A,E.type);await d(R)}catch(E){console.error("[BilingualVoiceInput] Transcription error:",E),alert(`Voice input failed. Please try again
 .  `)}finally{i(!1)}},_=async()=>{t?await h():await f()};return r?p.jsx("button",{type:"button",onClick:_,className:`voice-input-btn ${t?"listening":""} ${e}`,title:t?"Speaking... Auto-stops after 2s silence":"Tap and speak (auto-translates to both languages)",children:t?p.jsx(Fy,{className:"w-4 h-4"}):p.jsx(qy,{className:"w-4 h-4"})}):null},SF=({products:n,allOrders:e,allRiders:t,language:i,onExit:r,categoriesData:a,subcategoriesData:c,logoUrl:d,onLogoChange:f})=>{const{db:h,storage:_}=Wi(),E=di[i],[A,R]=$.useState("orders"),[M,B]=$.useState(new Date().toISOString().split("T")[0]),[L,G]=$.useState(!1),[H,z]=$.useState(""),[X,Y]=$.useState(null),[ue,O]=$.useState(null),[N,D]=$.useState(!1),[k,F]=$.useState({nameEn:"",nameTe:"",price:"",discountedPrice:"",weight:"",imageUrl:"",category:"",subcategoryId:"",isPopular:!1,outOfStock:!1}),[U,P]=$.useState(null),[_e,Oe]=$.useState(""),[ie,pe]=$.useState("all"),[we,ze]=$.useState(null),[V,ne]=$.useState(!1),[ae,le]=$.useState({nameEn:"",nameTe:"",imageUrl:"",color:"#4CAF50",gradient:""}),[ye,Ce]=$.useState(null),[xe,vt]=$.useState(null),[Ve,Ht]=$.useState(!1),[Je,Gt]=$.useState({nameEn:"",nameTe:"",categoryId:"",imageUrl:""}),[Dn,hi]=$.useState(null),[Zn,Qi]=$.useState(null),[js,kn]=$.useState(null),[nt,tn]=$.useState("active"),[fi,ei]=$.useState(!1),[kr,xi]=$.useState("orders"),[Xi,ms]=$.useState(new Set),xt=[{id:"groceries",nameEn:"Groceries",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1588964895597-cfccd6e2dbf9?w=100&h=100&fit=crop",color:"#4CAF50",gradient:"linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%)"},{id:"vegetables",nameEn:"Vegetables",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=100&h=100&fit=crop",color:"#8BC34A",gradient:"linear-gradient(135deg, #8BC34A 0%, #9CCC65 100%)"},{id:"milk",nameEn:"Milk",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100&h=100&fit=crop",color:"#5DADE2",gradient:"linear-gradient(135deg, #5DADE2 0%, #74B9E8 100%)"},{id:"snacks",nameEn:"Snacks",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1599490659213-e2b9527bd087?w=100&h=100&fit=crop",color:"#FF9800",gradient:"linear-gradient(135deg, #FF9800 0%, #FFA726 100%)"},{id:"medicines",nameEn:"Medicines",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1471864190281-a93a3070b6de?w=100&h=100&fit=crop",color:"#2196F3",gradient:"linear-gradient(135deg, #2196F3 0%, #42A5F5 100%)"},{id:"electronics",nameEn:"Electronics",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=100&h=100&fit=crop",color:"#9C27B0",gradient:"linear-gradient(135deg, #9C27B0 0%, #AB47BC 100%)"}],Xe=async()=>{try{if(!(await Oy(an(h,"artifacts",be,"public","data","categories"))).empty){alert("Categories already exist. Clear existing categories first if you want to reseed.");return}const Q=[{id:"groceries",nameEn:"Groceries",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1588964895597-cfccd6e2dbf9?w=100&h=100&fit=crop",color:"#4CAF50",gradient:"linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%)"},{id:"vegetables",nameEn:"Vegetables",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=100&h=100&fit=crop",color:"#8BC34A",gradient:"linear-gradient(135deg, #8BC34A 0%, #9CCC65 100%)"},{id:"milk",nameEn:"Milk & Dairy",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100&h=100&fit=crop",color:"#5DADE2",gradient:"linear-gradient(135deg, #5DADE2 0%, #74B9E8 100%)"},{id:"snacks",nameEn:"Snacks",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1599490659213-e2b9527bd087?w=100&h=100&fit=crop",color:"#FF9800",gradient:"linear-gradient(135deg, #FF9800 0%, #FFA726 100%)"},{id:"medicines",nameEn:"Medicines",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1471864190281-a93a3070b6de?w=100&h=100&fit=crop",color:"#2196F3",gradient:"linear-gradient(135deg, #2196F3 0%, #42A5F5 100%)"},{id:"electronics",nameEn:"Electronics",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=100&h=100&fit=crop",color:"#9C27B0",gradient:"linear-gradient(135deg, #9C27B0 0%, #AB47BC 100%)"}],fe=[{id:"groceries-dals",nameEn:"Dals & Pulses",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1572449102205-d51f05b2a0e0?w=100&h=100&fit=crop"},{id:"groceries-rice",nameEn:"Rice & Rice Products",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1586201375761-83865001e31c?w=100&h=100&fit=crop"},{id:"groceries-oils",nameEn:"Oils & Ghee",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?w=100&h=100&fit=crop"},{id:"groceries-spices",nameEn:"Spices",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1596040033229-a0b0b7b98adc?w=100&h=100&fit=crop"},{id:"groceries-flours",nameEn:"Flours & Atta",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b?w=100&h=100&fit=crop"},{id:"vegetables-leafy",nameEn:"Leafy Vegetables",nameTe:" ",categoryId:"vegetables",imageUrl:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=100&h=100&fit=crop"},{id:"vegetables-root",nameEn:"Root Vegetables",nameTe:"",categoryId:"vegetables",imageUrl:"https://images.unsplash.com/photo-1447175008436-054170c2e979?w=100&h=100&fit=crop"},{id:"vegetables-seasonal",nameEn:"Seasonal Vegetables",nameTe:" ",categoryId:"vegetables",imageUrl:"https://images.unsplash.com/photo-1566385101042-1a0aa0c1268c?w=100&h=100&fit=crop"},{id:"milk-fresh",nameEn:"Fresh Milk",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100&h=100&fit=crop"},{id:"milk-curd",nameEn:"Curd & Yogurt",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1571212515935-c0629c19f520?w=100&h=100&fit=crop"},{id:"milk-butter",nameEn:"Butter & Ghee",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1589985270826-4b7bb135bc9d?w=100&h=100&fit=crop"},{id:"milk-cheese",nameEn:"Cheese & Paneer",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1452195100486-9cc805987862?w=100&h=100&fit=crop"},{id:"snacks-namkeen",nameEn:"Namkeen",nameTe:"",categoryId:"snacks",imageUrl:"https://images.unsplash.com/photo-1621939514649-280e2ee25f60?w=100&h=100&fit=crop"},{id:"snacks-biscuits",nameEn:"Biscuits & Cookies",nameTe:"",categoryId:"snacks",imageUrl:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?w=100&h=100&fit=crop"},{id:"snacks-chips",nameEn:"Chips",nameTe:"",categoryId:"snacks",imageUrl:"https://images.unsplash.com/photo-1600952841320-db92ec8b5d2a?w=100&h=100&fit=crop"},{id:"medicines-firstaid",nameEn:"First Aid",nameTe:" ",categoryId:"medicines",imageUrl:"https://images.unsplash.com/photo-1603398938378-e54eab446dde?w=100&h=100&fit=crop"},{id:"medicines-supplements",nameEn:"Health Supplements",nameTe:"",categoryId:"medicines",imageUrl:"https://images.unsplash.com/photo-1471864190281-a93a3070b6de?w=100&h=100&fit=crop"},{id:"electronics-mobiles",nameEn:"Mobiles & Accessories",nameTe:"",categoryId:"electronics",imageUrl:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=100&h=100&fit=crop"},{id:"electronics-headphones",nameEn:"Headphones & Earphones",nameTe:"",categoryId:"electronics",imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100&h=100&fit=crop"},{id:"electronics-chargers",nameEn:"Chargers & Cables",nameTe:"",categoryId:"electronics",imageUrl:"https://images.unsplash.com/photo-1583863788434-e58a36330cf0?w=100&h=100&fit=crop"}];for(const Ie of Q){const{id:Ee,...Re}=Ie;await li(Ke(h,"artifacts",be,"public","data","categories",Ee),{...Re,createdAt:new Date().toISOString()})}for(const Ie of fe){const{id:Ee,...Re}=Ie;await li(Ke(h,"artifacts",be,"public","data","subcategories",Ee),{...Re,createdAt:new Date().toISOString()})}alert("Default categories and subcategories added successfully! Refresh the page to see them.")}catch(I){console.error("Error seeding data:",I),alert(`Failed to seed data: ${I.message}`)}},pt=I=>{const Q=I.target.files[0];if(Q){if(Q.size>5e5){alert("Image size should be less than 500KB");return}const fe=new FileReader;fe.onloadend=()=>{F({...k,imageUrl:fe.result}),ze(fe.result)},fe.readAsDataURL(Q)}},Kt=I=>{const Q=I.target.files[0];if(Q){if(Q.size>5e5){alert("Image size should be less than 500KB");return}const fe=new FileReader;fe.onloadend=()=>{le({...ae,imageUrl:fe.result}),vt(fe.result)},fe.readAsDataURL(Q)}},Mr=I=>{const Q=I.target.files[0];if(Q){if(Q.size>5e5){alert("Image size should be less than 500KB");return}const fe=new FileReader;fe.onloadend=()=>{Gt({...Je,imageUrl:fe.result}),Qi(fe.result)},fe.readAsDataURL(Q)}},gs=async(I,Q)=>{console.log("[Shopkeeper] Updating order:",I,"to status:",Q),console.log("[Shopkeeper] DB available:",!!h,"AppId:",be);try{if(!h)throw new Error("Firebase database not initialized");await Qn(Ke(h,"artifacts",be,"public","data","orders",I),{status:Q,updatedAt:new Date().toISOString()}),alert(`Order status updated to ${Q}!`)}catch(fe){console.error("Error updating order:",fe),alert(`Failed to update order status: ${fe.message}`)}},Ri=async I=>{const Q=prompt("Please enter reason for cancellation:");if(!(!Q||Q.trim()===""))try{if(!h)throw new Error("Firebase database not initialized");await Qn(Ke(h,"artifacts",be,"public","data","orders",I),{status:"cancelled",cancellationReason:Q.trim(),updatedAt:new Date().toISOString()}),alert("Order cancelled successfully!")}catch(fe){console.error("Error cancelling order:",fe),alert(`Failed to cancel order: ${fe.message}`)}},bi=I=>{kn(I),ei(!0)},Mn=I=>{const Q=window.open("","_blank"),fe=new Date(I.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),Ie=new Date(I.createdAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),Ee=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Receipt - ${I.orderNumber||I.id.substring(0,8)}</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { 
              font-family: 'Courier New', monospace; 
              padding: 30px 20px; 
              max-width: 320px; 
              margin: 0 auto;
              background: #fff;
              color: #333;
            }
            .receipt-header { 
              text-align: center; 
              margin-bottom: 20px;
              color: #999;
            }
            .receipt-header h1 { 
              font-size: 18px; 
              font-style: italic;
              font-weight: 400;
              margin-bottom: 10px;
              letter-spacing: 2px;
            }
            .receipt-number { 
              text-align: center;
              font-size: 11px;
              margin-bottom: 20px;
              color: #666;
            }
            .items-list { 
              margin-bottom: 20px;
            }
            .item-row { 
              display: flex;
              justify-content: space-between;
              margin-bottom: 8px;
              font-size: 13px;
            }
            .item-name {
              flex: 1;
              padding-right: 10px;
            }
            .item-price {
              text-align: right;
              white-space: nowrap;
            }
            .divider {
              border-top: 1px dashed #ccc;
              margin: 15px 0;
            }
            .total-row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 8px;
              font-size: 13px;
            }
            .total-row.grand {
              font-weight: bold;
              font-size: 16px;
              margin-top: 10px;
            }
            .footer {
              text-align: center;
              margin-top: 25px;
              font-size: 12px;
              color: #666;
            }
            .print-buttons {
              text-align: center;
              margin-top: 30px;
            }
            .print-buttons button {
              background: #333;
              color: white;
              border: none;
              padding: 10px 25px;
              font-size: 14px;
              cursor: pointer;
              margin: 0 5px;
              border-radius: 3px;
            }
            .print-buttons button:hover {
              background: #555;
            }
            @media print {
              body { padding: 10px; }
              .print-buttons { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="receipt-header">
            <h1>DUKAAN</h1>
            <div style="font-size: 11px; color: #999; margin-top: 5px;">
              ${I.customerName||"Customer"}<br>
              ${fe} ${Ie}
            </div>
          </div>
          
          <div class="receipt-number">
            ${I.orderNumber||`RECEIPT # ${I.id.substring(0,8).toUpperCase()}`}
          </div>

          <div class="items-list">
            ${I.items.map(Re=>`
                <div class="item-row">
                  <span class="item-name">${I.customerLanguage==="te"?Re.nameTe||Re.nameEn||Re.name:Re.nameEn||Re.name}</span>
                  <span class="item-price">${((Re.price||0)*Re.quantity).toFixed(2)}</span>
                </div>
              `).join("")}
          </div>

          <div class="divider"></div>

          ${I.totalSavings&&I.totalSavings>0?`
            <div class="total-row">
              <span>You Saved</span>
              <span style="color: #666;">${I.totalSavings.toFixed(2)}</span>
            </div>
          `:""}

          <div class="total-row grand">
            <span>TOTAL</span>
            <span>${I.total.toFixed(2)}</span>
          </div>

          <div class="footer">
            *** THANK YOU ***
          </div>

          <div class="print-buttons">
            <button onclick="window.print()">Print</button>
            <button onclick="window.close()">Close</button>
          </div>
        </body>
      </html>
    `;Q.document.write(Ee),Q.document.close()},Lt=async I=>{if(I.preventDefault(),!k.category||!k.subcategoryId){alert("Please select both Category and Subcategory before saving the product.");return}try{if(!h)throw new Error("Firebase database not initialized");const Q={...k,price:parseFloat(k.price),discountedPrice:k.discountedPrice?parseFloat(k.discountedPrice):null,isPopular:k.isPopular||!1};U?(await Qn(Ke(h,"artifacts",be,"public","data","products",U),Q),alert("Product updated successfully!")):(Q.sortOrder=n.length,Q.createdAt=new Date().toISOString(),await xf(an(h,"artifacts",be,"public","data","products"),Q),alert("Product added successfully!")),F({nameEn:"",nameTe:"",price:"",discountedPrice:"",weight:"",imageUrl:"",category:"",subcategoryId:"",isPopular:!1,outOfStock:!1}),ze(null),G(!1),P(null)}catch(Q){console.error("Error saving product:",Q),console.error("Error code:",Q.code),console.error("Error message:",Q.message),console.error("AppId:",be),console.error("Database instance:",h?"initialized":"not initialized"),alert(`Failed to save product: ${Q.message||Q.code||"Unknown error"}`)}},ys=I=>{F({nameEn:I.nameEn||I.name||"",nameTe:I.nameTe||"",price:I.price.toString(),discountedPrice:I.discountedPrice?.toString()||"",weight:I.weight,imageUrl:I.imageUrl||"",category:I.category||"",subcategoryId:I.subcategoryId||"",isPopular:I.isPopular||!1,outOfStock:I.outOfStock||!1}),ze(I.imageUrl||null),P(I.id),G(!0),R("products")},Zi=async I=>{if(console.log("[Shopkeeper] Delete product clicked:",I),window.confirm("Are you sure you want to delete this product?"))try{if(!h)throw new Error("Firebase database not initialized");await ol(Ke(h,"artifacts",be,"public","data","products",I)),alert("Product deleted successfully!")}catch(Q){console.error("Error deleting product:",Q),alert(`Failed to delete product: ${Q.message}`)}},es=async(I,Q)=>{console.log("[Shopkeeper] Toggle popular:",I,"current:",Q);try{if(!h)throw new Error("Firebase database not initialized");await Qn(Ke(h,"artifacts",be,"public","data","products",I),{isPopular:!Q}),console.log("[Shopkeeper] Popular status updated successfully")}catch(fe){console.error("Error updating popular status:",fe),alert(`Failed to update popular status: ${fe.message}`)}},ts=async(I,Q,fe,Ie)=>{if(!(fe===Ie||fe<0||Ie<0||fe>=Q.length||Ie>=Q.length))try{const Ee=[],Re=[...Q],[Ze]=Re.splice(fe,1);Re.splice(Ie,0,Ze),Re.forEach((Mi,Yt)=>{Ee.push(li(Ke(h,"artifacts",be,"public","data",I,Mi.id),{sortOrder:Yt},{merge:!0}))}),await Promise.all(Ee)}catch(Ee){console.error("Error reordering items:",Ee),alert("Failed to reorder items")}},Ni=async(I,Q)=>{const fe=[...a].sort((Re,Ze)=>(Re.sortOrder||0)-(Ze.sortOrder||0)),Ie=fe.findIndex(Re=>Re.id===I),Ee=Q==="up"?Ie-1:Ie+1;await ts("categories",fe,Ie,Ee)},ti=async(I,Q)=>{const fe=[...c].sort((Re,Ze)=>(Re.sortOrder||0)-(Ze.sortOrder||0)),Ie=fe.findIndex(Re=>Re.id===I),Ee=Q==="up"?Ie-1:Ie+1;await ts("subcategories",fe,Ie,Ee)},jn=async(I,Q)=>{const fe=[...n].sort((Re,Ze)=>(Re.sortOrder||0)-(Ze.sortOrder||0)),Ie=fe.findIndex(Re=>Re.id===I),Ee=Q==="up"?Ie-1:Ie+1;await ts("products",fe,Ie,Ee)},ns=async I=>{I.preventDefault();try{const Q=ae.nameEn.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),fe={nameEn:ae.nameEn,nameTe:ae.nameTe,imageUrl:ae.imageUrl,color:ae.color,gradient:ae.gradient||`linear-gradient(135deg, ${ae.color} 0%, ${ae.color}dd 100%)`,sortOrder:ye?void 0:a.length,createdAt:new Date().toISOString()};ye?(await li(Ke(h,"artifacts",be,"public","data","categories",ye),fe,{merge:!0}),alert("Category updated successfully!")):(await li(Ke(h,"artifacts",be,"public","data","categories",Q),fe),alert("Category added successfully!")),le({nameEn:"",nameTe:"",imageUrl:"",color:"#4CAF50",gradient:""}),ne(!1),Ce(null),vt(null)}catch(Q){console.error("Error saving category:",Q),alert(`Failed to save category: ${Q.message}`)}},zn=I=>{le({nameEn:I.nameEn||"",nameTe:I.nameTe||"",imageUrl:I.imageUrl||"",color:I.color||"#4CAF50",gradient:I.gradient||""}),vt(I.imageUrl||null),Ce(I.id),ne(!0)},Pi=async I=>{if(window.confirm("Are you sure? This will affect related subcategories and products."))try{await ol(Ke(h,"artifacts",be,"public","data","categories",I)),alert("Category deleted successfully!")}catch(Q){console.error("Error deleting category:",Q),alert(`Failed to delete category: ${Q.message}`)}},Di=async I=>{I.preventDefault();try{const Q=`${Je.categoryId}-${Je.nameEn.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}`,fe={nameEn:Je.nameEn,nameTe:Je.nameTe,categoryId:Je.categoryId,imageUrl:Je.imageUrl,sortOrder:Dn?void 0:c.length,createdAt:new Date().toISOString()};Dn?(await li(Ke(h,"artifacts",be,"public","data","subcategories",Dn),fe,{merge:!0}),alert("Subcategory updated successfully!")):(await li(Ke(h,"artifacts",be,"public","data","subcategories",Q),fe),alert("Subcategory added successfully!")),Gt({nameEn:"",nameTe:"",categoryId:"",imageUrl:""}),Ht(!1),hi(null),Qi(null)}catch(Q){console.error("Error saving subcategory:",Q),alert(`Failed to save subcategory: ${Q.message}`)}},vs=I=>{Gt({nameEn:I.nameEn,nameTe:I.nameTe||"",categoryId:I.categoryId,icon:I.icon||""}),hi(I.id),Ht(!0)},ki=async I=>{if(window.confirm("Are you sure? This will affect related products."))try{await ol(Ke(h,"artifacts",be,"public","data","subcategories",I)),alert("Subcategory deleted successfully!")}catch(Q){console.error("Error deleting subcategory:",Q),alert(`Failed to delete subcategory: ${Q.message}`)}},Ur=I=>{switch(I){case"pending":return"#9E9E9E";case"accepted":return"#2196F3";case"out_for_delivery":return"#FF9800";case"ready_for_pickup":return"#9C27B0";case"delivered":return"#4CAF50";case"completed":return"#4CAF50";case"cancelled":return"#f44336";default:return"#9E9E9E"}},wt=I=>{switch(I){case"pending":return"PENDING";case"accepted":return"ACCEPTED";case"out_for_delivery":return"OUT FOR DELIVERY";case"ready_for_pickup":return"READY FOR PICKUP";case"delivered":return"DELIVERED";case"completed":return"COMPLETED";case"cancelled":return"CANCELLED";default:return I.toUpperCase()}},Dt=n.filter(I=>{const Q=I.nameEn||I.nameTe||I.name||"",fe=I.nameTe||"",Ie=Q.toLowerCase().includes(_e.toLowerCase())||fe.includes(_e),Ee=ie==="all"||I.category===ie;return Ie&&Ee}),Be=n.filter(I=>I.isPopular),Fe=20,[Ct,Mt]=$.useState(1),[mt,An]=$.useState(1),[ct,ni]=$.useState(1),[Un,$n]=$.useState([]),[Sn,Ot]=$.useState([]),[_t,Vr]=$.useState([]),[Lr,pi]=$.useState({}),[is,ga]=$.useState({}),[ya,zs]=$.useState({}),[jl,mi]=$.useState(!1),[ss,Ft]=$.useState(!1),[Or,$s]=$.useState(!1),gi=(I,Q)=>{let fe=[Ds("status","in",I),Sg(Fe)];return Q&&fe.push(ZC(Q)),zi(an(h,"artifacts",be,"public","data","orders"),...fe)},[Vn,Ks]=$.useState(""),[ii,Ys]=$.useState(""),[Rt,Fr]=$.useState(!1);rl.useEffect(()=>{if(!h||Rt)return;mi(!0);const I=Ct===1?null:Lr[Ct-1],Q=gi(["pending","accepted","out_for_delivery","ready_for_pickup"],I),fe=Jn(Q,Ie=>{const Ee=Ie.docs.map(Re=>({id:Re.id,...Re.data()}));if(Ee.sort((Re,Ze)=>new Date(Ze.createdAt||0)-new Date(Re.createdAt||0)),$n(Ee),mi(!1),Ie.docs.length>0){const Re=Ie.docs[Ie.docs.length-1];pi(Ze=>({...Ze,[Ct]:Re}))}});return()=>fe()},[h,Ct,Rt]),rl.useEffect(()=>{if(!h||Rt)return;Ft(!0);const I=mt===1?null:is[mt-1],Q=gi(["delivered","completed"],I),fe=Jn(Q,Ie=>{const Ee=Ie.docs.map(Re=>({id:Re.id,...Re.data()}));if(Ee.sort((Re,Ze)=>new Date(Ze.createdAt||0)-new Date(Re.createdAt||0)),Ot(Ee),Ft(!1),Ie.docs.length>0){const Re=Ie.docs[Ie.docs.length-1];ga(Ze=>({...Ze,[mt]:Re}))}});return()=>fe()},[h,mt,Rt]),rl.useEffect(()=>{if(!h||Rt)return;$s(!0);const I=ct===1?null:ya[ct-1],Q=gi(["cancelled"],I),fe=Jn(Q,Ie=>{const Ee=Ie.docs.map(Re=>({id:Re.id,...Re.data()}));if(Ee.sort((Re,Ze)=>new Date(Ze.createdAt||0)-new Date(Re.createdAt||0)),Vr(Ee),$s(!1),Ie.docs.length>0){const Re=Ie.docs[Ie.docs.length-1];zs(Ze=>({...Ze,[ct]:Re}))}});return()=>fe()},[h,ct,Rt]),rl.useEffect(()=>{if(!h)return;if(!Vn&&!ii){Fr(!1);return}Fr(!0),mi(!0),Ft(!0),$s(!0);let I;const Q=[];if(Vn){const Ie=new Date(Vn);Ie.setHours(0,0,0,0);const Ee=new Date(Vn);Ee.setHours(23,59,59,999),Q.push(Ds("createdAt",">=",Ie.toISOString())),Q.push(Ds("createdAt","<=",Ee.toISOString()))}ii&&!Vn&&Q.push(Ds("customerPhone","==",ii)),Q.push(Sg(100)),I=zi(an(h,"artifacts",be,"public","data","orders"),...Q);const fe=Jn(I,Ie=>{let Ee=Ie.docs.map(Yt=>({id:Yt.id,...Yt.data()}));Vn&&ii&&(Ee=Ee.filter(Yt=>Yt.customerPhone===ii)),Ee.sort((Yt,Do)=>new Date(Do.createdAt||0)-new Date(Yt.createdAt||0));const Re=[],Ze=[],Mi=[];Ee.forEach(Yt=>{["pending","accepted","out_for_delivery","ready_for_pickup"].includes(Yt.status)?Re.push(Yt):["delivered","completed"].includes(Yt.status)?Ze.push(Yt):Yt.status==="cancelled"&&Mi.push(Yt)}),$n(Re),Ot(Ze),Vr(Mi),mi(!1),Ft(!1),$s(!1)});return()=>fe()},[h,Vn,ii,be]);const Js=nt==="active"?Un:nt==="completed"?Sn:nt==="cancelled"?_t:[],Po=()=>{nt==="active"&&Mt(I=>I+1),nt==="completed"&&An(I=>I+1),nt==="cancelled"&&ni(I=>I+1)},Ws=()=>{nt==="active"&&Ct>1&&Mt(I=>I-1),nt==="completed"&&mt>1&&An(I=>I-1),nt==="cancelled"&&ct>1&&ni(I=>I-1)},qr=()=>nt==="active"?Un.length===Fe:nt==="completed"?Sn.length===Fe:nt==="cancelled"?_t.length===Fe:!1,bt=()=>nt==="active"?Ct:nt==="completed"?mt:nt==="cancelled"?ct:1;return p.jsxs("div",{className:"shopkeeper-dashboard",children:[p.jsxs("div",{className:"view-header",children:[p.jsx("button",{onClick:r,className:"back-button",children:p.jsx(ci,{className:"w-6 h-6"})}),p.jsx("h2",{className:"view-title",children:E.shopkeeperDashboard})]}),p.jsxs("div",{className:"shopkeeper-search-bar",children:[p.jsx(EI,{className:"w-5 h-5 text-gray-400"}),p.jsx("input",{type:"text",placeholder:"Search products, orders...",value:_e,onChange:I=>Oe(I.target.value),className:"search-input"})]}),p.jsxs("div",{className:"shopkeeper-tabs",children:[p.jsxs("button",{className:`tab-button ${A==="orders"?"active":""}`,onClick:()=>R("orders"),children:[p.jsx(Nn,{className:"w-5 h-5"}),"Orders"]}),p.jsxs("button",{className:`tab-button ${A==="categories"?"active":""}`,onClick:()=>R("categories"),children:[p.jsx(X0,{className:"w-5 h-5"}),"Categories"]}),p.jsxs("button",{className:`tab-button ${A==="subcategories"?"active":""}`,onClick:()=>R("subcategories"),children:[p.jsx(ca,{className:"w-5 h-5"}),"Subcategories"]}),p.jsxs("button",{className:`tab-button ${A==="products"?"active":""}`,onClick:()=>R("products"),children:[p.jsx(Nn,{className:"w-5 h-5"}),"Products"]}),p.jsxs("button",{className:`tab-button ${A==="popular"?"active":""}`,onClick:()=>R("popular"),children:[p.jsx(Jm,{className:"w-5 h-5"}),"Popular"]}),p.jsxs("button",{className:`tab-button ${A==="users"?"active":""}`,onClick:()=>R("users"),children:[p.jsx(us,{className:"w-5 h-5"}),"Users"]}),p.jsxs("button",{className:`tab-button ${A==="riders"?"active":""}`,onClick:()=>R("riders"),children:[p.jsx(us,{className:"w-5 h-5"}),"Riders"]}),p.jsxs("button",{className:`tab-button ${A==="analytics"?"active":""}`,onClick:()=>R("analytics"),children:[p.jsx(lV,{className:"w-5 h-5"}),"Analytics"]})]}),p.jsxs("div",{className:"shopkeeper-content",children:[A==="orders"&&p.jsxs("div",{className:"orders-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h3",{className:"section-subtitle",children:"Orders Management"}),p.jsx("span",{className:"count-badge",children:Un.length+Sn.length+_t.length})]}),p.jsxs("div",{className:"tabs-header",style:{display:"flex",background:"#F3F4F6",padding:"6px",borderRadius:"16px",gap:"6px",marginBottom:"16px",width:"100%"},children:[p.jsxs("button",{onClick:()=>tn("active"),style:{flex:1,padding:"10px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",background:nt==="active"?"white":"transparent",color:nt==="active"?"#10B981":"#6B7280",boxShadow:nt==="active"?"0 2px 8px rgba(0,0,0,0.08)":"none"},children:["Active (",Un.length,!Rt&&Ct>1?"+":"",")"]}),p.jsxs("button",{onClick:()=>tn("completed"),style:{flex:1,padding:"10px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",background:nt==="completed"?"white":"transparent",color:nt==="completed"?"#059669":"#6B7280",boxShadow:nt==="completed"?"0 2px 8px rgba(0,0,0,0.08)":"none"},children:["Completed (",Sn.length,!Rt&&mt>1?"+":"",")"]}),p.jsxs("button",{onClick:()=>tn("cancelled"),style:{flex:1,padding:"10px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",background:nt==="cancelled"?"white":"transparent",color:nt==="cancelled"?"#EF4444":"#6B7280",boxShadow:nt==="cancelled"?"0 2px 8px rgba(0,0,0,0.08)":"none"},children:["Cancelled (",_t.length,!Rt&&ct>1?"+":"",")"]})]}),p.jsxs("div",{className:"filters-bar",style:{padding:"12px 16px",background:"#F9FAFB",borderBottom:"1px solid #E5E7EB",display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[p.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:"Filter Orders:"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"white",padding:"4px 8px",borderRadius:"6px",border:"1px solid #D1D5DB"},children:[p.jsx(W0,{className:"w-4 h-4 text-gray-500"}),p.jsx("input",{type:"date",value:Vn,onChange:I=>Ks(I.target.value),max:new Date().toISOString().split("T")[0],placeholder:"Date",style:{fontSize:"13px",border:"none",outline:"none",color:"#374151"}})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"white",padding:"4px 8px",borderRadius:"6px",border:"1px solid #D1D5DB"},children:[p.jsx(Vs,{className:"w-4 h-4 text-gray-500"}),p.jsx("input",{type:"text",value:ii,onChange:I=>Ys(I.target.value),placeholder:"Customer Mobile (Exact)",style:{fontSize:"13px",border:"none",outline:"none",width:"150px",color:"#374151"}})]}),(Vn||ii)&&p.jsx("button",{onClick:()=>{Ks(""),Ys("")},style:{fontSize:"12px",color:"#EF4444",fontWeight:"500",background:"none",border:"none",cursor:"pointer",marginLeft:"auto"},children:"Clear Filters"})]}),Js.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx(Nn,{className:"w-16 h-16 text-gray-400"}),p.jsx("p",{children:E.noIncomingOrders})]}):p.jsxs("div",{className:"shopkeeper-orders-list",children:[Js.map(I=>p.jsxs("div",{className:"shopkeeper-order-card-enhanced",children:[p.jsxs("div",{className:"order-card-top",children:[p.jsxs("div",{className:"order-info-section",children:[p.jsxs("div",{className:"order-id-row",children:[p.jsx(us,{className:"w-4 h-4 text-gray-500"}),p.jsx("span",{className:"order-customer",children:I.orderNumber||`Order #${I.id.substring(0,8)}`})]}),p.jsxs("div",{className:"order-time-row",children:[p.jsx(yu,{className:"w-4 h-4 text-gray-400"}),p.jsx("span",{className:"order-timestamp",children:new Date(I.createdAt).toLocaleString()})]}),I.customerPhone&&p.jsxs("div",{className:"order-phone-row",children:[p.jsx(Vs,{className:"w-4 h-4 text-green-600"}),p.jsx("a",{href:`tel:${I.customerPhone}`,className:"order-phone-link",children:I.customerPhone})]})]}),p.jsx("div",{className:"order-status-badge-new",style:{backgroundColor:Ur(I.status)},children:wt(I.status)})]}),I.deliveryAddress&&p.jsxs("div",{className:"order-address-section",children:[p.jsx(la,{className:"w-4 h-4 text-gray-500"}),p.jsx("span",{className:"order-address-text",children:I.deliveryAddress})]}),I.status==="cancelled"&&p.jsxs("div",{style:{marginTop:"12px",padding:"10px",backgroundColor:"#ffebee",borderRadius:"6px",border:"1px solid #ffcdd2",display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx(ml,{className:"w-4 h-4 text-red-600"}),p.jsxs("span",{style:{fontSize:"13px",color:"#d32f2f"},children:[p.jsx("strong",{children:"Cancellation Reason:"})," ",I.cancellationReason||"No reason provided"]})]}),p.jsxs("div",{className:"order-items-container",children:[p.jsxs("button",{onClick:()=>{const Q=new Set(Xi);Q.has(I.id)?Q.delete(I.id):Q.add(I.id),ms(Q)},className:"items-dropdown-toggle",children:[p.jsx(Nn,{className:"w-4 h-4"}),p.jsxs("span",{className:"items-count-text",children:[I.items.length," ",I.items.length===1?"Item":"Items"]}),Xi.has(I.id)?p.jsx(sh,{className:"w-4 h-4"}):p.jsx(ih,{className:"w-4 h-4"})]}),Xi.has(I.id)&&p.jsx("div",{className:"order-items-list-enhanced",children:I.items.map((Q,fe)=>p.jsxs("div",{className:"order-item-row-enhanced",children:[p.jsx("img",{src:Q.imageUrl||"https://via.placeholder.com/50",alt:Q.nameEn||Q.name,className:"order-item-image"}),p.jsxs("div",{className:"order-item-details",children:[p.jsx("span",{className:"item-name",children:Q.nameEn||Q.name}),Q.nameTe&&Q.nameTe!==Q.nameEn&&p.jsx("span",{className:"item-name-te",children:Q.nameTe}),p.jsx("span",{className:"item-weight",children:Q.weight})]}),p.jsxs("span",{className:"item-quantity-badge",children:[" ",Q.quantity]}),p.jsxs("span",{className:"item-price-bold",children:["",(Q.price*Q.quantity).toFixed(0)]})]},fe))})]}),p.jsxs("div",{className:"order-card-bottom",children:[p.jsxs("div",{className:"order-total-section",children:[p.jsx("span",{className:"total-label",children:E.total}),p.jsxs("span",{className:"total-amount-large",children:["",I.total.toFixed(0)]})]}),p.jsxs("div",{className:"order-management-section",children:[p.jsxs("div",{className:"order-status-controls",children:[p.jsx("label",{className:"status-dropdown-label",children:"Status:"}),p.jsxs("select",{value:I.status,onChange:Q=>gs(I.id,Q.target.value),className:"status-dropdown",disabled:I.status==="cancelled"||I.status==="delivered"||I.status==="completed",children:[p.jsx("option",{value:"pending",children:"Pending"}),p.jsx("option",{value:"accepted",children:"Accepted"}),I.deliveryMethod==="pickup"?p.jsxs(p.Fragment,{children:[p.jsx("option",{value:"ready_for_pickup",children:"Ready for Pickup"}),p.jsx("option",{value:"completed",children:"Completed"})]}):p.jsxs(p.Fragment,{children:[p.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),p.jsx("option",{value:"delivered",children:"Delivered"})]}),p.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),I.deliveryMethod==="delivery"&&(I.status==="ready_for_pickup"||I.status==="accepted"||I.status==="out_for_delivery"||I.status==="delivered")&&p.jsxs("div",{className:"rider-assignment-section",style:{marginTop:"12px"},children:[p.jsx("label",{className:"status-dropdown-label",style:{fontSize:"13px"},children:I.riderName?`Rider: ${I.riderName}`:"Assign Rider:"}),I.status!=="delivered"?p.jsxs("select",{value:I.riderId||"",onChange:async Q=>{const fe=t.find(Ie=>Ie.id===Q.target.value);if(fe)try{await Qn(Ke(h,"artifacts",be,"public","data","orders",I.id),{riderId:fe.id,riderName:fe.name,riderPhone:fe.phone,updatedAt:new Date().toISOString()}),alert(`Rider ${fe.name} assigned successfully!`)}catch(Ie){console.error("Error assigning rider:",Ie),alert("Failed to assign rider")}},className:"status-dropdown",style:{fontSize:"13px",padding:"6px 8px"},children:[p.jsx("option",{value:"",children:"Select Rider"}),t&&t.map(Q=>p.jsxs("option",{value:Q.id,children:[Q.name," - ",Q.phone]},Q.id))]}):p.jsx("span",{style:{fontSize:"13px",color:"#4CAF50",fontWeight:"600"},children:I.riderPhone&&` ${I.riderPhone}`})]}),p.jsxs("div",{className:"order-action-buttons",children:[p.jsxs("button",{onClick:()=>bi(I),className:"view-details-btn",children:[p.jsx(xU,{className:"w-4 h-4"}),"View Details"]}),p.jsxs("button",{onClick:()=>Mn(I),className:"view-details-btn",style:{background:"#2196F3"},children:[p.jsx(Nn,{className:"w-4 h-4"}),E.printBill]}),I.status!=="cancelled"&&I.status!=="delivered"&&I.status!=="completed"&&p.jsxs("button",{onClick:()=>Ri(I.id),className:"cancel-order-btn",children:[p.jsx(ml,{className:"w-4 h-4"}),"Cancel"]})]})]})]})]},I.id)),!Rt&&p.jsxs("div",{className:"pagination-controls",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",marginTop:"20px"},children:[p.jsxs("button",{onClick:Ws,disabled:bt()===1,className:"pagination-btn",style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #E0E0E0",background:bt()===1?"#F5F5F5":"white",color:bt()===1?"#9E9E9E":"#333",cursor:bt()===1?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx(ci,{className:"w-4 h-4"}),"Previous"]}),p.jsxs("span",{style:{fontSize:"14px",color:"#666",fontWeight:"500"},children:["Page ",bt()]}),p.jsxs("button",{onClick:Po,disabled:!qr(),className:"pagination-btn",style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #E0E0E0",background:qr()?"white":"#F5F5F5",color:qr()?"#333":"#9E9E9E",cursor:qr()?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px"},children:["Next",p.jsx(ci,{className:"w-4 h-4",style:{transform:"rotate(180deg)"}})]})]})]})]}),A==="products"&&p.jsxs("div",{className:"products-section",children:[p.jsxs("button",{onClick:()=>G(!L),className:"add-product-btn",children:[p.jsx(mh,{className:"w-5 h-5"}),E.addProduct]}),L&&p.jsxs("form",{onSubmit:Lt,className:"product-form",children:[p.jsxs("div",{className:"bilingual-input-group",children:[p.jsx("div",{className:"input-with-voice",children:p.jsx("input",{type:"text",placeholder:E.productNameEn,value:k.nameEn,onChange:I=>F({...k,nameEn:I.target.value}),required:!0,className:"form-input"})}),p.jsx("div",{className:"input-with-voice",children:p.jsx("input",{type:"text",placeholder:E.productNameTe,value:k.nameTe,onChange:I=>F({...k,nameTe:I.target.value}),required:!0,className:"form-input"})}),p.jsx(Zm,{onTranscript:({english:I,telugu:Q})=>{F({...k,nameEn:I||"",nameTe:Q||""})}})]}),p.jsxs("div",{className:"input-with-voice",children:[p.jsx("input",{type:"number",placeholder:E.productPrice,value:k.price,onChange:I=>F({...k,price:I.target.value}),required:!0,className:"form-input"}),p.jsx(Xm,{onTranscript:I=>F({...k,price:I.replace(/[^0-9]/g,"")}),language:i})]}),p.jsxs("div",{className:"input-with-voice",children:[p.jsx("input",{type:"number",placeholder:"Discounted Price (Optional)",value:k.discountedPrice,onChange:I=>F({...k,discountedPrice:I.target.value}),className:"form-input"}),p.jsx(Xm,{onTranscript:I=>F({...k,discountedPrice:I.replace(/[^0-9]/g,"")}),language:i})]}),p.jsxs("div",{className:"input-with-voice",children:[p.jsx("input",{type:"text",placeholder:E.productWeight,value:k.weight,onChange:I=>F({...k,weight:I.target.value}),required:!0,className:"form-input"}),p.jsx(Xm,{onTranscript:I=>F({...k,weight:I}),language:i})]}),p.jsxs("div",{className:"image-upload-section",children:[p.jsxs("label",{className:"upload-label",children:[p.jsx(Wm,{className:"w-5 h-5"}),"Upload Image (Max 500KB)",p.jsx("input",{type:"file",accept:"image/*",onChange:pt,className:"file-input-hidden"})]}),p.jsx("input",{type:"text",placeholder:"Or paste image URL",value:k.imageUrl,onChange:I=>F({...k,imageUrl:I.target.value}),className:"form-input"}),we&&p.jsx("div",{className:"image-preview",children:p.jsx("img",{src:we,alt:"Preview"})})]}),p.jsxs("select",{value:k.category,onChange:I=>F({...k,category:I.target.value,subcategoryId:""}),className:"form-input",required:!0,children:[p.jsx("option",{value:"",children:i==="te"?" ":"Select Category"}),a.map(I=>p.jsxs("option",{value:I.id,children:[I.nameEn," / ",I.nameTe||""]},I.id))]}),k.category&&p.jsxs("select",{value:k.subcategoryId,onChange:I=>F({...k,subcategoryId:I.target.value}),className:"form-input",required:!0,children:[p.jsx("option",{value:"",children:i==="te"?"- ":"Select Subcategory"}),c.filter(I=>I.categoryId===k.category).map(I=>p.jsxs("option",{value:I.id,children:[I.nameEn," / ",I.nameTe||""]},I.id))]}),p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:k.isPopular,onChange:I=>F({...k,isPopular:I.target.checked})}),i==="te"?"  ":"Mark as Popular Product"]}),p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:k.outOfStock,onChange:I=>F({...k,outOfStock:I.target.checked})}),E.outOfStock," (",E.unavailablePickupDelivery,")"]}),p.jsxs("div",{className:"form-actions",children:[p.jsxs("button",{type:"submit",className:"save-btn",children:[p.jsx(yl,{className:"w-4 h-4"}),E.save]}),p.jsx("button",{type:"button",onClick:()=>{G(!1),P(null),ze(null)},className:"cancel-btn",children:E.cancel})]})]}),p.jsxs("div",{className:"category-filters",children:[p.jsxs("button",{className:`filter-btn ${ie==="all"?"active":""}`,onClick:()=>pe("all"),children:[i==="te"?"":"All"," (",n.length,")"]}),xt.map(I=>{const Q=n.filter(fe=>fe.category===I.id).length;return p.jsxs("button",{className:`filter-btn ${ie===I.id?"active":""}`,onClick:()=>pe(I.id),children:[I.nameEn," (",Q,")"]},I.id)})]}),p.jsxs("div",{className:"products-admin-list",children:[p.jsxs("h3",{className:"section-subtitle",children:[E.manageProducts," (",Dt.length,")"]}),Dt.map(I=>p.jsxs("div",{className:"admin-product-card",children:[p.jsx("img",{src:I.imageUrl||"https://via.placeholder.com/60",alt:i==="te"?I.nameTe||I.nameEn||I.name:I.nameEn||I.name,className:"admin-product-img"}),p.jsxs("div",{className:"admin-product-info",children:[p.jsxs("h4",{children:[i==="te"?I.nameTe||I.nameEn||I.name:I.nameEn||I.name,I.nameEn&&I.nameTe&&i==="en"&&p.jsxs("span",{className:"name-alt",children:[" / ",I.nameTe]}),I.nameEn&&I.nameTe&&i==="te"&&p.jsxs("span",{className:"name-alt",children:[" / ",I.nameEn]})]}),p.jsxs("p",{children:[I.category,"  ",I.weight]}),p.jsxs("p",{className:"admin-price",children:["",I.discountedPrice||I.price]}),I.isPopular&&p.jsxs("span",{className:"popular-tag",children:[" ",i==="te"?"":"Popular"]})]}),p.jsxs("div",{className:"admin-product-actions",children:[p.jsx("button",{onClick:()=>ys(I),className:"edit-btn",children:p.jsx(gh,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>Zi(I.id),className:"delete-btn",children:p.jsx(Xc,{className:"w-4 h-4"})})]})]},I.id))]})]}),A==="categories"&&p.jsxs("div",{className:"categories-section",children:[a.length===0&&p.jsxs("div",{style:{padding:"24px",background:"linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%)",borderRadius:"12px",marginBottom:"20px",border:"2px dashed #FF9800",textAlign:"center"},children:[p.jsx("h3",{style:{color:"#E65100",marginBottom:"12px",fontSize:"18px"},children:" No Categories Found in Database"}),p.jsx("p",{style:{color:"#757575",marginBottom:"16px",fontSize:"14px"},children:"Click below to add Zepto-style default categories (Groceries, Vegetables, Milk, Snacks, Medicines, Electronics)"}),p.jsxs("button",{onClick:Xe,className:"add-product-btn",style:{background:"#FF9800",fontSize:"16px",padding:"12px 24px"},children:[p.jsx(X0,{className:"w-5 h-5"}),"Seed Default Categories"]})]}),p.jsx("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:p.jsxs("button",{onClick:()=>ne(!V),className:"add-product-btn",children:[p.jsx(mh,{className:"w-5 h-5"}),"Add Category"]})}),V&&p.jsxs("form",{onSubmit:ns,className:"product-form",children:[p.jsxs("div",{className:"bilingual-input-group",children:[p.jsx("div",{className:"input-with-voice",children:p.jsx("input",{type:"text",placeholder:"Category Name (English)",value:ae.nameEn,onChange:I=>le({...ae,nameEn:I.target.value}),required:!0,className:"form-input"})}),p.jsx("div",{className:"input-with-voice",children:p.jsx("input",{type:"text",placeholder:"Category Name (Telugu)",value:ae.nameTe,onChange:I=>le({...ae,nameTe:I.target.value}),className:"form-input"})}),p.jsx(Zm,{onTranscript:({english:I,telugu:Q})=>{le({...ae,nameEn:I||"",nameTe:Q||""})}})]}),p.jsxs("div",{className:"image-upload-section",children:[p.jsxs("label",{className:"upload-label",children:[p.jsx(Wm,{className:"w-5 h-5"}),"Upload Image (Max 500KB)",p.jsx("input",{type:"file",accept:"image/*",onChange:Kt,className:"file-input-hidden"})]}),p.jsx("input",{type:"text",placeholder:"Or paste image URL",value:ae.imageUrl,onChange:I=>le({...ae,imageUrl:I.target.value}),className:"form-input"}),(xe||ae.imageUrl)&&p.jsx("div",{className:"image-preview-container",children:p.jsx("img",{src:xe||ae.imageUrl,alt:"Category preview",className:"image-preview"})})]}),p.jsx("input",{type:"color",value:ae.color,onChange:I=>le({...ae,color:I.target.value}),className:"form-input"}),p.jsxs("div",{className:"form-actions",children:[p.jsxs("button",{type:"submit",className:"save-btn",children:[p.jsx(yl,{className:"w-4 h-4"}),"Save"]}),p.jsx("button",{type:"button",onClick:()=>{ne(!1),Ce(null),vt(null)},className:"cancel-btn",children:"Cancel"})]})]}),p.jsxs("div",{className:"products-admin-list",children:[p.jsxs("h3",{className:"section-subtitle",children:["Manage Categories (",a.length,")"]}),[...a].sort((I,Q)=>(I.sortOrder||0)-(Q.sortOrder||0)).map((I,Q,fe)=>p.jsxs("div",{className:"admin-product-card",children:[p.jsx("div",{className:"category-icon-preview",style:{background:I.gradient},children:p.jsx("img",{src:I.imageUrl||"https://via.placeholder.com/40/CCCCCC/666666?text=No+Image",alt:I.nameEn,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px"}})}),p.jsxs("div",{className:"admin-product-info",children:[p.jsx("h4",{children:I.nameEn}),p.jsx("p",{children:I.nameTe}),p.jsx("p",{className:"admin-price",children:I.color})]}),p.jsxs("div",{className:"admin-product-actions",children:[p.jsx("button",{onClick:()=>Ni(I.id,"up"),className:"edit-btn",disabled:Q===0,title:"Move up",style:{opacity:Q===0?.3:1},children:p.jsx(sh,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>Ni(I.id,"down"),className:"edit-btn",disabled:Q===fe.length-1,title:"Move down",style:{opacity:Q===fe.length-1?.3:1},children:p.jsx(ih,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>zn(I),className:"edit-btn",children:p.jsx(gh,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>Pi(I.id),className:"delete-btn",children:p.jsx(Xc,{className:"w-4 h-4"})})]})]},I.id))]})]}),A==="subcategories"&&p.jsxs("div",{className:"subcategories-section",children:[p.jsxs("button",{onClick:()=>Ht(!Ve),className:"add-product-btn",children:[p.jsx(mh,{className:"w-5 h-5"}),"Add Subcategory"]}),Ve&&p.jsxs("form",{onSubmit:Di,className:"product-form",children:[p.jsxs("select",{value:Je.categoryId,onChange:I=>Gt({...Je,categoryId:I.target.value}),required:!0,className:"form-input",children:[p.jsx("option",{value:"",children:"Select Parent Category"}),a.map(I=>p.jsx("option",{value:I.id,children:I.nameEn},I.id))]}),p.jsxs("div",{className:"bilingual-input-group",children:[p.jsx("div",{className:"input-with-voice",children:p.jsx("input",{type:"text",placeholder:"Subcategory Name (English)",value:Je.nameEn,onChange:I=>Gt({...Je,nameEn:I.target.value}),required:!0,className:"form-input"})}),p.jsx("div",{className:"input-with-voice",children:p.jsx("input",{type:"text",placeholder:"Subcategory Name (Telugu)",value:Je.nameTe,onChange:I=>Gt({...Je,nameTe:I.target.value}),className:"form-input"})}),p.jsx(Zm,{onTranscript:({english:I,telugu:Q})=>{Gt({...Je,nameEn:I||"",nameTe:Q||""})}})]}),p.jsxs("div",{className:"image-upload-section",children:[p.jsxs("label",{className:"upload-label",children:[p.jsx(Wm,{className:"w-5 h-5"}),"Upload Image (Max 500KB)",p.jsx("input",{type:"file",accept:"image/*",onChange:Mr,className:"file-input-hidden"})]}),p.jsx("input",{type:"text",placeholder:"Or paste image URL",value:Je.imageUrl,onChange:I=>Gt({...Je,imageUrl:I.target.value}),className:"form-input"}),(Zn||Je.imageUrl)&&p.jsx("div",{className:"image-preview-container",children:p.jsx("img",{src:Zn||Je.imageUrl,alt:"Subcategory preview",className:"image-preview"})})]}),p.jsxs("div",{className:"form-actions",children:[p.jsxs("button",{type:"submit",className:"save-btn",children:[p.jsx(yl,{className:"w-4 h-4"}),"Save"]}),p.jsx("button",{type:"button",onClick:()=>{Ht(!1),hi(null),Qi(null)},className:"cancel-btn",children:"Cancel"})]})]}),p.jsxs("div",{className:"products-admin-list",children:[p.jsxs("h3",{className:"section-subtitle",children:["Manage Subcategories (",c.length,")"]}),[...c].sort((I,Q)=>(I.sortOrder||0)-(Q.sortOrder||0)).map((I,Q,fe)=>{const Ie=a.find(Ee=>Ee.id===I.categoryId);return p.jsxs("div",{className:"admin-product-card",children:[p.jsx("div",{className:"subcategory-icon-preview",children:p.jsx("img",{src:I.imageUrl||"https://via.placeholder.com/40/CCCCCC/666666?text=No+Image",alt:I.nameEn,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px"}})}),p.jsxs("div",{className:"admin-product-info",children:[p.jsx("h4",{children:I.nameEn}),p.jsx("p",{children:I.nameTe}),p.jsxs("p",{className:"admin-price",children:["Parent: ",Ie?.nameEn||"N/A"]})]}),p.jsxs("div",{className:"admin-product-actions",children:[p.jsx("button",{onClick:()=>ti(I.id,"up"),className:"edit-btn",disabled:Q===0,title:"Move up",style:{opacity:Q===0?.3:1},children:p.jsx(sh,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>ti(I.id,"down"),className:"edit-btn",disabled:Q===fe.length-1,title:"Move down",style:{opacity:Q===fe.length-1?.3:1},children:p.jsx(ih,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>vs(I),className:"edit-btn",children:p.jsx(gh,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>ki(I.id),className:"delete-btn",children:p.jsx(Xc,{className:"w-4 h-4"})})]})]},I.id)})]})]}),A==="popular"&&p.jsxs("div",{className:"popular-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h3",{className:"section-subtitle",children:"Popular Products Management"}),p.jsx("span",{className:"count-badge",children:Be.length})]}),p.jsx("p",{className:"section-description",children:'Manage which products appear in the "Popular Products" section on the customer app. Toggle the star to add/remove from popular items.'}),p.jsx("div",{className:"products-admin-list",children:[...n].sort((I,Q)=>(I.sortOrder||0)-(Q.sortOrder||0)).map((I,Q,fe)=>p.jsxs("div",{className:"admin-product-card",children:[p.jsx("img",{src:I.imageUrl||"https://via.placeholder.com/60",alt:i==="te"?I.nameTe||I.nameEn||I.name:I.nameEn||I.name,className:"admin-product-img"}),p.jsxs("div",{className:"admin-product-info",children:[p.jsx("h4",{children:i==="te"?I.nameTe||I.nameEn||I.name:I.nameEn||I.name}),p.jsxs("p",{children:[I.category,"  ",I.weight]}),p.jsxs("p",{className:"admin-price",children:["",I.discountedPrice||I.price]})]}),p.jsxs("div",{className:"admin-product-actions",children:[p.jsx("button",{onClick:()=>jn(I.id,"up"),className:"edit-btn",disabled:Q===0,title:"Move up",style:{opacity:Q===0?.3:1},children:p.jsx(sh,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>jn(I.id,"down"),className:"edit-btn",disabled:Q===fe.length-1,title:"Move down",style:{opacity:Q===fe.length-1?.3:1},children:p.jsx(ih,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>es(I.id,I.isPopular),className:`popular-toggle-btn ${I.isPopular?"is-popular":""}`,title:I.isPopular?"Remove from popular":"Add to popular",children:I.isPopular?p.jsx(Jm,{fill:"gold",stroke:"gold",className:"w-5 h-5"}):p.jsx(Jm,{className:"w-5 h-5"})})]})]},I.id))})]}),A==="users"&&p.jsx(AF,{}),A==="riders"&&p.jsxs("div",{className:"riders-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsxs("h3",{className:"section-subtitle",children:["Riders Management (",t?.length||0,")"]}),p.jsxs("select",{value:kr,onChange:I=>xi(I.target.value),className:"form-input",style:{width:"auto",padding:"8px 12px"},children:[p.jsx("option",{value:"orders",children:"Sort by Orders"}),p.jsx("option",{value:"name",children:"Sort by Name"})]})]}),!t||t.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx(us,{className:"w-16 h-16 text-gray-400"}),p.jsx("p",{children:"No riders registered yet"}),p.jsx("p",{style:{fontSize:"14px",color:"#666",marginTop:"8px"},children:"Riders can register at: ?mode=rider"})]}):p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px",marginTop:"20px"},children:t.map(I=>({...I,totalOrders:e.filter(Q=>Q.riderId===I.id).length,activeOrders:e.filter(Q=>Q.riderId===I.id&&Q.status==="out_for_delivery").length,completedOrders:e.filter(Q=>Q.riderId===I.id&&Q.status==="delivered").length})).sort((I,Q)=>kr==="orders"?Q.totalOrders-I.totalOrders:I.name.localeCompare(Q.name)).map(I=>p.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0",position:"relative"},children:[p.jsx("button",{onClick:async()=>{if(I.activeOrders>0){alert(`Cannot delete rider ${I.name}. They have ${I.activeOrders} active delivery in progress.`);return}if(window.confirm(`Are you sure you want to delete rider ${I.name}? This action cannot be undone.`))try{await ol(Ke(h,"artifacts",be,"public","data","riders",I.id)),alert(`Rider ${I.name} deleted successfully!`)}catch(Q){console.error("Error deleting rider:",Q),alert("Failed to delete rider")}},className:"delete-btn",style:{position:"absolute",top:"12px",right:"12px",padding:"6px",borderRadius:"6px",background:"#fff",border:"1px solid #e0e0e0"},title:"Delete Rider",children:p.jsx(Xc,{className:"w-4 h-4",style:{color:"#f44336"}})}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid #f0f0f0"},children:[p.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #FF9800 0%, #F57C00 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px",fontWeight:"700"},children:I.name.charAt(0).toUpperCase()}),p.jsxs("div",{style:{flex:1},children:[p.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#333",marginBottom:"4px"},children:I.name}),p.jsxs("a",{href:`tel:${I.phone}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",color:"#2196F3",textDecoration:"none"},children:[p.jsx(Vs,{className:"w-4 h-4"}),I.phone]})]})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:[p.jsxs("div",{style:{textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#333"},children:I.totalOrders}),p.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"Total Orders"})]}),p.jsxs("div",{style:{textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#FF9800"},children:I.activeOrders}),p.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"Active"})]}),p.jsxs("div",{style:{textAlign:"center"},children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#4CAF50"},children:I.completedOrders}),p.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"Completed"})]})]})]},I.id))})]}),A==="analytics"&&p.jsxs("div",{className:"analytics-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h3",{className:"section-subtitle",children:"Daily Analytics"}),p.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx(W0,{className:"w-5 h-5 text-gray-600"}),p.jsx("input",{type:"date",value:M,onChange:I=>B(I.target.value),max:new Date().toISOString().split("T")[0],style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #E0E0E0",fontSize:"14px",cursor:"pointer"}})]})})]}),p.jsx(wF,{db:h,appId:be,selectedDate:M,t:E})]})]}),fi&&js&&p.jsx(JI,{order:js,onClose:()=>ei(!1),language:i})]})},wF=({db:n,appId:e,selectedDate:t,t:i})=>{const[r,a]=$.useState([]),[c,d]=$.useState(!0);rl.useEffect(()=>{if(!n||!t)return;d(!0);const A=new Date(t);A.setHours(0,0,0,0);const R=A.toISOString(),M=new Date(t);M.setHours(23,59,59,999);const B=M.toISOString(),L=zi(an(n,"artifacts",e,"public","data","orders"),Ds("createdAt",">=",R),Ds("createdAt","<=",B)),G=Jn(L,H=>{const z=H.docs.map(X=>({id:X.id,...X.data()}));z.sort((X,Y)=>new Date(Y.createdAt)-new Date(X.createdAt)),a(z),d(!1)},H=>{console.error("Analytics Error:",H),d(!1)});return()=>G()},[n,t,e]);const f=r.filter(A=>A.status==="completed"||A.status==="delivered").reduce((A,R)=>A+R.total,0),h=r.filter(A=>A.status==="completed"||A.status==="delivered").length,_=r.filter(A=>A.status==="pending").length,E=r.filter(A=>A.status==="cancelled").length;return c?p.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading daily analytics..."}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginTop:"20px"},children:[p.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[p.jsx(ds,{className:"w-6 h-6",style:{color:"#4CAF50"}}),p.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Total Revenue"})]}),p.jsxs("div",{style:{fontSize:"28px",fontWeight:"700",color:"#2E7D32"},children:["",f.toFixed(0)]})]}),p.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[p.jsx(Nn,{className:"w-6 h-6",style:{color:"#2196F3"}}),p.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Total Orders"})]}),p.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#1976D2"},children:r.length})]}),p.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[p.jsx(Nn,{className:"w-6 h-6",style:{color:"#4CAF50"}}),p.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Completed"})]}),p.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#2E7D32"},children:h})]}),p.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[p.jsx(yu,{className:"w-6 h-6",style:{color:"#FF9800"}}),p.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Pending"})]}),p.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#F57C00"},children:_})]}),p.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[p.jsx(ml,{className:"w-6 h-6",style:{color:"#f44336"}}),p.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Cancelled"})]}),p.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#d32f2f"},children:E})]})]}),p.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",marginTop:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[p.jsxs("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:["Orders for ",new Date(t).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),r.length===0?p.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:[p.jsx(Nn,{className:"w-12 h-12",style:{margin:"0 auto 12px",opacity:.3}}),p.jsx("p",{children:"No orders on this date"})]}):p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:r.map(A=>p.jsxs("div",{style:{padding:"16px",background:"#f9f9f9",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:A.orderNumber||`Order #${A.id.substring(0,8)}`}),p.jsxs("div",{style:{fontSize:"13px",color:"#666"},children:[new Date(A.createdAt).toLocaleTimeString("en-IN"),"  ",A.items.length," items"]})]}),p.jsxs("div",{style:{textAlign:"right"},children:[p.jsxs("div",{style:{fontWeight:"700",fontSize:"16px",color:"#2E7D32"},children:["",A.total.toFixed(0)]}),p.jsx("div",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px",background:A.status==="completed"||A.status==="delivered"?"#E8F5E9":A.status==="cancelled"?"#ffebee":"#FFF3E0",color:A.status==="completed"||A.status==="delivered"?"#2E7D32":A.status==="cancelled"?"#d32f2f":"#F57C00",marginTop:"4px"},children:A.status.charAt(0).toUpperCase()+A.status.slice(1)})]})]},A.id))})]})]})},CF=({rider:n,allOrders:e,language:t,onExit:i})=>{const{db:r}=Wi();di[t];const[a,c]=$.useState("pending"),d=e.filter(L=>L.deliveryMethod==="delivery"&&L.riderId===n.id),f=d.filter(L=>L.status==="ready_for_pickup"||L.status==="accepted"),h=d.filter(L=>L.status==="out_for_delivery"),_=d.filter(L=>L.status==="delivered"),E=async(L,G)=>{try{const H=Ke(r,"artifacts",be,"public","data","orders",L);await Qn(H,{status:G,updatedAt:new Date().toISOString()}),alert(`Order status updated to ${G}!`)}catch(H){console.error("Error updating order status:",H),alert("Failed to update order status. Please try again.")}},A=async L=>{if(window.confirm("Mark this order as picked up and out for delivery?"))try{const G=Ke(r,"artifacts",be,"public","data","orders",L);await Qn(G,{status:"out_for_delivery",riderId:n.id,riderName:n.name,riderPhone:n.phone,updatedAt:new Date().toISOString()}),alert("Order picked up! Now out for delivery.")}catch(G){console.error("Error picking up order:",G),alert("Failed to pick up order. Please try again.")}},R=L=>{window.confirm("Confirm that this order has been delivered?")&&E(L,"delivered")},B=a==="pending"?f:a==="active"?h:_;return p.jsxs("div",{className:"rider-dashboard",children:[p.jsxs("div",{className:"rider-header",children:[p.jsxs("button",{onClick:i,className:"back-btn",children:[p.jsx(ci,{className:"w-5 h-5"}),"Exit Rider Mode"]}),p.jsxs("div",{children:[p.jsxs("h1",{className:"rider-title",children:[p.jsx(ks,{className:"w-6 h-6"}),"Rider Dashboard"]}),p.jsxs("p",{style:{color:"#666",fontSize:"14px",marginTop:"4px"},children:["Welcome, ",n.name,"!"]})]})]}),p.jsxs("div",{className:"rider-stats",children:[p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon pending-bg",children:p.jsx(yu,{className:"w-5 h-5"})}),p.jsxs("div",{className:"stat-content",children:[p.jsx("div",{className:"stat-value",children:f.length}),p.jsx("div",{className:"stat-label",children:"Ready to Pickup"})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon active-bg",children:p.jsx(ks,{className:"w-5 h-5"})}),p.jsxs("div",{className:"stat-content",children:[p.jsx("div",{className:"stat-value",children:h.length}),p.jsx("div",{className:"stat-label",children:"Out for Delivery"})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon delivered-bg",children:p.jsx($i,{className:"w-5 h-5"})}),p.jsxs("div",{className:"stat-content",children:[p.jsx("div",{className:"stat-value",children:_.length}),p.jsx("div",{className:"stat-label",children:"Delivered Today"})]})]})]}),p.jsxs("div",{className:"rider-tabs",children:[p.jsxs("button",{className:`rider-tab ${a==="pending"?"active":""}`,onClick:()=>c("pending"),children:[p.jsx(yu,{className:"w-4 h-4"}),"Ready to Pickup (",f.length,")"]}),p.jsxs("button",{className:`rider-tab ${a==="active"?"active":""}`,onClick:()=>c("active"),children:[p.jsx(ks,{className:"w-4 h-4"}),"Out for Delivery (",h.length,")"]}),p.jsxs("button",{className:`rider-tab ${a==="completed"?"active":""}`,onClick:()=>c("completed"),children:[p.jsx($i,{className:"w-4 h-4"}),"Delivered (",_.length,")"]})]}),p.jsx("div",{className:"rider-orders-list",children:B.length===0?p.jsxs("div",{className:"no-orders-message",children:[p.jsx(Nn,{className:"w-12 h-12 text-gray-400"}),p.jsx("p",{children:"No orders in this category"})]}):B.map(L=>p.jsxs("div",{className:"rider-order-card",children:[p.jsxs("div",{className:"rider-order-header",children:[p.jsxs("div",{className:"order-id-section",children:[p.jsx(Nn,{className:"w-4 h-4"}),p.jsx("span",{className:"order-id-text",children:L.orderNumber||`Order #${L.id.slice(-6)}`})]}),p.jsxs("div",{className:"order-total-section",children:[p.jsx("span",{className:"total-label-small",children:"Total"}),p.jsxs("span",{className:"total-amount-rider",children:["",L.total.toFixed(0)]})]})]}),p.jsxs("div",{className:"rider-customer-info",children:[p.jsxs("div",{className:"customer-detail",children:[p.jsx(us,{className:"w-4 h-4 text-gray-600"}),p.jsx("span",{className:"customer-name",children:L.customerName||L.userName||"Customer"})]}),(L.customerPhone||L.userPhone)&&p.jsxs("a",{href:`tel:${L.customerPhone||L.userPhone}`,className:"customer-phone-link",children:[p.jsx(Vs,{className:"w-4 h-4"}),L.customerPhone||L.userPhone]})]}),p.jsxs("div",{className:"rider-delivery-address",children:[p.jsxs("div",{className:"address-header-rider",children:[p.jsx(la,{className:"w-5 h-5 text-green-600"}),p.jsx("span",{className:"address-label-rider",children:"Delivery Address"})]}),p.jsx("p",{className:"address-text-rider",children:L.deliveryAddress}),L.deliveryInstructions&&p.jsxs("p",{className:"delivery-instructions-rider",children:[p.jsx("strong",{children:"Instructions:"})," ",L.deliveryInstructions]}),p.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(L.deliveryAddress)}`,target:"_blank",rel:"noopener noreferrer",className:"navigate-btn",children:[p.jsx(_I,{className:"w-4 h-4"}),"Navigate"]})]}),p.jsxs("div",{className:"rider-order-items",children:[p.jsxs("div",{className:"items-count-badge",children:[p.jsx(Nn,{className:"w-4 h-4"}),L.items.length," items"]}),p.jsxs("div",{className:"items-preview",children:[L.items.slice(0,3).map((G,H)=>p.jsxs("span",{className:"item-preview-text",children:[G.name," x",G.quantity,H<Math.min(L.items.length,3)-1&&", "]},H)),L.items.length>3&&p.jsxs("span",{className:"more-items",children:["+",L.items.length-3," more"]})]})]}),a==="pending"&&p.jsxs("button",{onClick:()=>A(L.id),className:"rider-action-btn pickup-btn",children:[p.jsx(ks,{className:"w-4 h-4"}),"Pick Up & Start Delivery"]}),a==="active"&&p.jsxs("button",{onClick:()=>R(L.id),className:"rider-action-btn deliver-btn",children:[p.jsx($i,{className:"w-4 h-4"}),"Mark as Delivered"]}),a==="completed"&&p.jsxs("div",{className:"delivered-stamp",children:[p.jsx($i,{className:"w-5 h-5"}),"Delivered"]})]},L.id))})]})},IF=({onLogin:n,onRegister:e})=>{const[t,i]=$.useState(!1),[r,a]=$.useState(""),[c,d]=$.useState(""),[f,h]=$.useState(""),[_,E]=$.useState(""),[A,R]=$.useState(!1),M=async B=>{B.preventDefault(),E(""),R(!0);try{if(t){if(!f||!r||!c){E("All fields are required"),R(!1);return}await e({name:f,phone:r,password:c})}else{if(!r||!c){E("Phone and password are required"),R(!1);return}await n(r,c)}}catch(L){E(L.message||"Authentication failed"),R(!1)}};return p.jsxs("div",{className:"rider-login-container",children:[p.jsxs("div",{className:"rider-login-card",children:[p.jsxs("div",{className:"rider-login-header",children:[p.jsx("div",{className:"rider-icon-circle",children:p.jsx(yI,{className:"w-12 h-12",style:{color:"#FF9800"}})}),p.jsx("h1",{className:"rider-login-title",children:t?"Rider Registration":"Rider Login"}),p.jsx("p",{className:"rider-login-subtitle",children:t?"Create your rider account to start delivering":"Sign in to access your delivery dashboard"})]}),p.jsxs("form",{onSubmit:M,className:"rider-login-form",children:[t&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Full Name"}),p.jsxs("div",{className:"input-with-icon",children:[p.jsx(Z0,{className:"input-icon"}),p.jsx("input",{type:"text",value:f,onChange:B=>h(B.target.value),placeholder:"Enter your full name",className:"form-input",required:t})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Phone Number"}),p.jsxs("div",{className:"input-with-icon",children:[p.jsx(Vs,{className:"input-icon"}),p.jsx("input",{type:"tel",value:r,onChange:B=>a(B.target.value),placeholder:"10-digit phone number",className:"form-input",maxLength:"10",required:!0})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Password"}),p.jsxs("div",{className:"input-with-icon",children:[p.jsx(gl,{className:"input-icon"}),p.jsx("input",{type:"password",value:c,onChange:B=>d(B.target.value),placeholder:"Enter password",className:"form-input",required:!0})]})]}),_&&p.jsx("div",{className:"error-message",children:_}),p.jsx("button",{type:"submit",className:"rider-login-button",disabled:A,children:A?"Processing...":p.jsxs(p.Fragment,{children:[t?p.jsx(Z0,{className:"w-5 h-5"}):p.jsx(MU,{className:"w-5 h-5"}),t?"Register as Rider":"Login"]})})]}),p.jsx("div",{className:"rider-login-footer",children:p.jsx("button",{onClick:()=>{i(!t),E("")},className:"toggle-mode-button",children:t?"Already have an account? Login":"Don't have an account? Register"})})]}),p.jsx("style",{jsx:!0,children:`
        .rider-login-container {
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          padding: 20px;
        }

        .rider-login-card {
          background: white;
          border-radius: 20px;
          padding: 40px;
          max-width: 450px;
          width: 100%;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .rider-login-header {
          text-align: center;
          margin-bottom: 32px;
        }

        .rider-icon-circle {
          width: 80px;
          height: 80px;
          background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 auto 20px;
          box-shadow: 0 8px 16px rgba(255, 152, 0, 0.3);
        }

        .rider-icon-circle svg {
          color: white !important;
        }

        .rider-login-title {
          font-size: 28px;
          font-weight: 700;
          color: #1a1a1a;
          margin-bottom: 8px;
        }

        .rider-login-subtitle {
          font-size: 14px;
          color: #666;
        }

        .rider-login-form {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-label {
          font-size: 14px;
          font-weight: 600;
          color: #333;
        }

        .input-with-icon {
          position: relative;
        }

        .input-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          width: 20px;
          height: 20px;
          color: #999;
        }

        .form-input {
          width: 100%;
          padding: 12px 12px 12px 44px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          font-size: 16px;
          transition: all 0.3s;
        }

        .form-input:focus {
          outline: none;
          border-color: #FF9800;
          box-shadow: 0 0 0 3px rgba(255, 152, 0, 0.1);
        }

        .error-message {
          background: #ffebee;
          color: #c62828;
          padding: 12px;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        .rider-login-button {
          background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
          color: white;
          border: none;
          padding: 14px 24px;
          border-radius: 10px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          transition: transform 0.2s, box-shadow 0.2s;
          margin-top: 8px;
        }

        .rider-login-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 8px 16px rgba(255, 152, 0, 0.3);
        }

        .rider-login-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .rider-login-footer {
          margin-top: 24px;
          text-align: center;
        }

        .toggle-mode-button {
          background: none;
          border: none;
          color: #667eea;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          transition: color 0.3s;
        }

        .toggle-mode-button:hover {
          color: #764ba2;
          text-decoration: underline;
        }
      `})]})};function xF(){const{user:n,loading:e,userProfile:t,phoneNumber:i,setPhoneNumber:r,countryCode:a,setCountryCode:c,password:d,setPassword:f,otp:h,setOtp:_,authStep:E,isNewUser:A,showProfileSetup:R,setShowProfileSetup:M,checkUserExists:B,handleSendOTP:L,handleVerifyOTP:G,handlePasswordLogin:H,handleCompleteRegistration:z,handleLogout:X,handleSaveProfile:Y,handleHostedPhoneLogin:ue}=bf(),{rider:O,loading:N,loginRider:D,logoutRider:k,registerRider:F}=lU(),{products:U,categoriesData:P,subcategoriesData:_e,orders:Oe,allOrders:ie,allRiders:pe,loading:we,handleChangeDeliveryMethod:ze,handleCancelOrder:V}=tU(),{cartItems:ne,deliveryMethod:ae,setDeliveryMethod:le,selectedAddress:ye,setSelectedAddress:Ce,handleAddToCart:xe,handleCheckout:vt}=sU(),{userAddresses:Ve,showAddressManager:Ht,setShowAddressManager:Je,showAddressForm:Gt,setShowAddressForm:Dn,editingAddress:hi,setEditingAddress:Zn,handleSaveAddress:Qi,handleDeleteAddress:js,handleSetDefaultAddress:kn}=oU(),[nt,tn]=$.useState("Home"),[fi,ei]=$.useState(""),[kr,xi]=$.useState(null),[Xi,ms]=$.useState(null),[xt,Xe]=$.useState(null),[pt,Kt]=$.useState("en"),[Mr,gs]=$.useState("Getting location..."),[Ri,bi]=$.useState("/dukaan-logo.png"),[Mn,Lt]=$.useState(null),[ys,Zi]=$.useState({}),[es,ts]=$.useState(!1),[Ni,ti]=$.useState(!1),[jn,ns]=$.useState(null),[zn,Pi]=$.useState(!1),[Di,vs]=$.useState(!1),ki=()=>{Kt(Be=>Be==="en"?"te":"en")};$.useEffect(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(async Be=>{try{const{latitude:Fe,longitude:Ct}=Be.coords,mt=await(await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${Fe}&longitude=${Ct}&localityLanguage=en`)).json(),An=mt.city||mt.locality||mt.principalSubdivision||"Unknown",ct=mt.principalSubdivisionCode||"";gs(`${An}${ct?", "+ct:""}`)}catch(Fe){console.error("Error getting location name:",Fe),gs("Ponnur, AP")}},Be=>{console.error("Geolocation error:",Be),gs("Ponnur, AP")},{enableHighAccuracy:!1,timeout:1e4,maximumAge:3e5}):gs("Ponnur, AP")},[]),$.useEffect(()=>{const Fe=new URLSearchParams(window.location.search).get("mode");ts(Fe==="shopkeeper"),ti(Fe==="rider"),console.log("[Mode] Shopkeeper mode:",Fe==="shopkeeper","Rider mode:",Fe==="rider","URL:",window.location.search)},[]),$.useEffect(()=>{wi(async()=>{const{App:Fe}=await import("./index-C9DDpq7p.js");return{App:Fe}},[]).then(({App:Fe})=>{Fe.addListener("appUrlOpen",async Ct=>{try{const Mt=Ct.url;if(console.log("[DeepLink] URL received:",Mt),Mt.startsWith("mydukaan://auth-complete")){const mt=Mt.split("?")[1]||"",ct=new URLSearchParams(mt).get("token");if(ct){console.log("[DeepLink] Token found, signing in...");const{getAuth:ni,signInWithCustomToken:Un}=await wi(async()=>{const{getAuth:Ot,signInWithCustomToken:_t}=await Promise.resolve().then(()=>KE);return{getAuth:Ot,signInWithCustomToken:_t}},void 0),{getFirebaseInstances:$n}=await wi(async()=>{const{getFirebaseInstances:Ot}=await Promise.resolve().then(()=>Qc);return{getFirebaseInstances:Ot}},void 0),{auth:Sn}=$n();await Un(Sn,ct),console.log("[DeepLink] Signed in successfully via custom token"),Lt({message:"Login successful!",type:"success"})}}}catch(Mt){console.error("[DeepLink] Error handling deep link:",Mt),Lt({message:"Login failed via deep link",type:"error"})}})}),(async()=>{const Ct=new URLSearchParams(window.location.search).get("token");if(Ct){console.log("[WebAuth] Token found in URL, signing in...");try{const{signInWithCustomToken:Mt}=await wi(async()=>{const{signInWithCustomToken:ct}=await Promise.resolve().then(()=>KE);return{signInWithCustomToken:ct}},void 0),{getFirebaseInstances:mt}=await wi(async()=>{const{getFirebaseInstances:ct}=await Promise.resolve().then(()=>Qc);return{getFirebaseInstances:ct}},void 0),{auth:An}=mt();await Mt(An,Ct),console.log("[WebAuth] Signed in successfully via URL token"),Lt({message:"Login successful!",type:"success"}),window.history.replaceState({},document.title,window.location.pathname)}catch(Mt){console.error("[WebAuth] Error signing in with token:",Mt),Lt({message:"Login failed. Please try again.",type:"error"})}}})()},[]),$.useEffect(()=>{(async()=>{try{const{db:Fe}=await wi(()=>Promise.resolve().then(()=>Qc),void 0).then(ct=>({db:ct.getFirebaseInstances().db})),{doc:Ct,getDoc:Mt}=await wi(async()=>{const{doc:ct,getDoc:ni}=await Promise.resolve().then(()=>sI);return{doc:ct,getDoc:ni}},void 0),{appId:mt}=await wi(async()=>{const{appId:ct}=await Promise.resolve().then(()=>Qc);return{appId:ct}},void 0),An=await Mt(Ct(Fe,"artifacts",mt,"public","data","settings","app"));An.exists()&&An.data().logoUrl&&bi(An.data().logoUrl)}catch{console.log("Logo not found, using default")}})()},[]),$.useEffect(()=>{fi&&Xe(null)},[fi]),$.useEffect(()=>{if(!n||es||Ni||Oe.length===0)return;const Be={};Oe.forEach(Fe=>{Be[Fe.id]=Fe.status}),Oe.forEach(Fe=>{const Ct=ys[Fe.id],Mt=Fe.status;if(Ct&&Ct!==Mt&&Fe.updatedAt){const mt=new Date(Fe.updatedAt).getTime();new Date().getTime()-mt<1e4&&(Mt==="processing"?Lt({message:" Your order has been accepted! We are preparing it now.",type:"success"}):Mt==="delivered"&&Lt({message:" Your order has been delivered! Thank you for shopping.",type:"success"}))}}),Zi(Be)},[Oe,es,Ni,n]),$.useEffect(()=>{if(Ve.length>0&&!ye&&ae==="delivery"){const Be=Ve.find(Fe=>Fe.isDefault)||Ve[0];Ce(Be)}},[Ve,ye,ae]);const Ur=Be=>{if(le(Be),Be==="delivery"){if(!ye&&Ve.length>0){const Fe=Ve.find(Ct=>Ct.isDefault)||Ve[0];Ce(Fe)}}else Ce(null);Pi(!1),vt(Ve,tn,pt)};if(e||we)return p.jsx(Y0,{});if(es)return p.jsx(SF,{products:U,allOrders:ie,allRiders:pe,language:pt,onExit:()=>window.location.href="/",categoriesData:P,subcategoriesData:_e,logoUrl:Ri,onLogoChange:bi});if(Ni)return N?p.jsx(Y0,{}):O?p.jsx(CF,{rider:O,allOrders:ie,language:pt,onExit:()=>{k(),window.location.href="/"}}):p.jsx(IF,{onLogin:D,onRegister:F});if(!n)return p.jsxs(p.Fragment,{children:[p.jsx(vF,{phoneNumber:i,onPhoneChange:r,countryCode:a,onCountryCodeChange:c,password:d,onPasswordChange:f,otp:h,onOtpChange:_,authStep:E,isNewUser:A,onCheckUser:B,onSendOTP:L,onVerifyOTP:G,onPasswordLogin:H,onCompleteRegistration:z,onHostedLogin:ue}),Mn&&p.jsx(eA,{message:Mn.message,type:Mn.type,onClose:()=>Lt(null)})]});const Dt=(Be,Fe)=>{Xe(Be),ei(""),tn("Home"),xi(null),ms(null)};return p.jsxs("div",{className:"app-container-modern",children:[p.jsx(aF,{searchTerm:fi,setSearchTerm:ei,location:Mr,language:pt,toggleLanguage:ki,logoUrl:Ri,products:U,onVoiceSearch:Dt,onVoiceProcessing:vs}),Di&&p.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.95)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#4CAF50"},children:[p.jsx("div",{className:"voice-pulse-large",style:{width:"80px",height:"80px",borderRadius:"50%",background:"#4CAF50",animation:"voicePulse 1.5s infinite",marginBottom:"20px"}}),p.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold"},children:pt==="te"?"...":"Searching..."})]}),p.jsxs("div",{className:"app-content",children:[nt==="Home"&&p.jsx(hF,{products:U,onAddToCart:xe,cartItems:ne,setCurrentView:tn,selectedCategory:kr,setSelectedCategory:xi,selectedSubcategory:Xi,setSelectedSubcategory:ms,searchTerm:fi,language:pt,categoriesData:P,subcategoriesData:_e,voiceSearchResults:xt,setVoiceSearchResults:Xe}),nt==="Cart"&&p.jsx(fF,{cartItems:ne,onAddToCart:xe,setCurrentView:tn,onCheckout:()=>Pi(!0),language:pt}),nt==="Orders"&&p.jsx(mF,{orders:Oe,setCurrentView:tn,language:pt,onSelectOrder:ns,onChangeDeliveryMethod:ze,onCancelOrder:V,userAddresses:Ve,onManageAddresses:()=>Je(!0)}),nt==="Profile"&&p.jsx(gF,{userProfile:t,orders:Oe,onLogout:X,language:pt,setCurrentView:tn,userAddresses:Ve,onManageAddresses:()=>Je(!0)}),nt==="OrderHistory"&&p.jsx(yF,{orders:Oe,onBack:()=>tn("Profile"),onSelectOrder:ns,language:pt,translations:di})]}),p.jsx(lF,{currentView:nt,setCurrentView:tn,cartItems:ne,language:pt,onHomeClick:()=>{Xe(null),ei(""),xi(null),ms(null),tn("Home")}}),Mn&&p.jsx(eA,{message:Mn.message,type:Mn.type,onClose:()=>Lt(null)}),jn&&p.jsx(JI,{order:jn,onClose:()=>ns(null),language:pt}),R&&p.jsx(_F,{onSave:Y,onClose:()=>M(!1)}),Ht&&p.jsx(TF,{addresses:Ve,onAddAddress:()=>{Je(!1),Dn(!0),Zn(null)},onEditAddress:Be=>{Zn(Be),Je(!1),Dn(!0)},onDeleteAddress:js,onSetDefault:kn,onClose:()=>Je(!1)}),Gt&&p.jsx(EF,{onSave:Qi,onClose:()=>{Dn(!1),Zn(null)},editingAddress:hi}),zn&&p.jsx(cF,{isOpen:zn,onClose:()=>Pi(!1),onConfirm:Ur,cartItems:Object.values(ne),userAddresses:Ve,selectedAddress:ye,onAddressSelect:Ce,onManageAddresses:()=>{Pi(!1),Je(!0)},language:pt})]})}const RF=()=>{const[n,e]=$.useState(""),[t,i]=$.useState(""),[r,a]=$.useState(""),[c,d]=$.useState("init"),[f,h]=$.useState(""),[_,E]=$.useState(null),[A,R]=$.useState(""),[M,B]=$.useState(null),[L,G]=$.useState("");$.useEffect(()=>{const Y=new URLSearchParams(window.location.search),ue=Y.get("phone"),O=Y.get("redirect");ue&&e(ue),O&&R(O);const{auth:N}=Wi();window.recaptchaVerifier||(window.recaptchaVerifier=new Zg(N,"recaptcha-container",{size:"invisible",callback:D=>{console.log("reCAPTCHA solved")}}))},[]);const H=async()=>{if(!n){h("Phone number is missing");return}try{d("sending"),h("");const{auth:Y}=Wi(),ue=window.recaptchaVerifier,O=await ey(Y,n,ue);E(O),d("otp")}catch(Y){console.error("Error sending OTP:",Y),h(Y.message),d("init")}},z=async()=>{if(!t||t.length!==6){h("Please enter a valid 6-digit OTP");return}try{d("verifying"),h("");const Y=await _.confirm(t);B(Y),d("name")}catch(Y){console.error("Error verifying OTP:",Y),alert(`Error: ${Y.message}`),h(Y.message),d("otp")}},X=async(Y=!1)=>{try{d("verifying"),console.log("STARTING TOKEN EXCHANGE - VERSION: FETCH_METHOD");const O=await M.user.getIdToken(),N="https://exchangetoken-344365593313.us-central1.run.app";console.log("STARTING TOKEN EXCHANGE - VERSION: DIRECT_CLOUD_RUN"),console.log("Target URL:",N);const D=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:O,name:Y?null:r})});if(!D.ok){const P=await D.text();throw new Error(P)}const k=await D.json(),{firebaseCustomToken:F,name:U}=k;console.log("Token Exchange Success! Name:",U),d("success"),G(U),setTimeout(()=>{if(A){let P;const _e=window.location.protocol==="http:"||window.location.protocol==="https:",Oe=A.startsWith("mydukaan://");_e&&Oe?(console.log("Web environment detected: Preventing app scheme redirect. Redirecting to root."),P=`/?token=${encodeURIComponent(F)}`):P=`${A}?token=${encodeURIComponent(F)}`,console.log("Redirecting to:",P),window.location.href=P,window.finalRedirectUrl=P}else h("No redirect URL found"),d("error")},2e3)}catch(ue){console.error("Error exchanging token:",ue),alert(`Error: ${ue.message}`),h(ue.message),d("name")}};return p.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[p.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:p.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:c==="name"?"Enter Your Name":"Verify Phone Number"})}),p.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:p.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[f&&p.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded relative",role:"alert",children:p.jsx("span",{className:"block sm:inline",children:f})}),c==="init"||c==="sending"?p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{type:"text",value:n,readOnly:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-gray-100"})})]}),p.jsx("div",{children:p.jsx("button",{onClick:H,disabled:c==="sending",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:c==="sending"?p.jsxs(p.Fragment,{children:[p.jsx(Q0,{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"}),"Sending OTP..."]}):"Send OTP"})})]}):c==="otp"?p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enter OTP"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{type:"text",value:t,onChange:Y=>i(Y.target.value),maxLength:6,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"123456"})})]}),p.jsx("div",{children:p.jsx("button",{onClick:z,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Verify OTP"})})]}):c==="name"?p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Your Name (Optional)"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{type:"text",value:r,onChange:Y=>a(Y.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter your name"})})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>X(!0),className:"flex-1 flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none",children:"Skip"}),p.jsx("button",{onClick:()=>X(!1),className:"flex-1 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none",children:"Continue"})]})]}):c==="verifying"?p.jsxs("div",{className:"text-center",children:[p.jsx(Q0,{className:"mx-auto h-12 w-12 text-indigo-500 animate-spin"}),p.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Finalizing login..."})]}):p.jsxs("div",{className:"text-center",children:[p.jsx($i,{className:"mx-auto h-12 w-12 text-green-500"}),p.jsxs("h3",{className:"mt-2 text-xl font-medium text-gray-900",children:["Welcome, ",L||"User","!"]}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Redirecting back to app..."}),p.jsx("button",{onClick:()=>{window.finalRedirectUrl&&(window.location.href=window.finalRedirectUrl)},className:"mt-4 w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none",children:"Click here if not redirected"})]}),p.jsx("div",{id:"recaptcha-container"})]})})]})},bF=window.location.pathname;bF==="/phone-login"?pE.createRoot(document.getElementById("root")).render(p.jsx($.StrictMode,{children:p.jsx(RF,{})})):pE.createRoot(document.getElementById("root")).render(p.jsx($.StrictMode,{children:p.jsx(eU,{children:p.jsx(nU,{children:p.jsx(rU,{children:p.jsx(aU,{children:p.jsx(cU,{children:p.jsx(xF,{})})})})})})}));export{x1 as A,tw as B,C1 as C,mP as D,xo as E,yr as F,_r as G,cP as H,yP as I,uP as J,lw as K,Ls as L,U1 as M,og as N,tu as O,$0 as P,Aw as Q,Zg as R,Qg as S,Tr as T,yw as U,X2 as V,uI as W,vo as X,TR as Y,wi as _,y1 as a,g1 as b,v1 as c,O1 as d,_P as e,S1 as f,Dw as g,vr as h,T1 as i,qS as j,L1 as k,sP as l,m1 as m,_1 as n,z0 as o,V1 as p,ag as q,Rf as r,w1 as s,p1 as t,cw as u,E1 as v,ey as w,d1 as x,R1 as y,b1 as z};
