(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var pm={exports:{}},bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function oN(){if(zT)return bc;zT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var c=null;if(a!==void 0&&(c=""+a),o.key!==void 0&&(c=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:c,ref:o!==void 0?o:null,props:a}}return bc.Fragment=e,bc.jsx=t,bc.jsxs=t,bc}var jT;function aN(){return jT||(jT=1,pm.exports=oN()),pm.exports}var g=aN(),mm={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function lN(){if($T)return qe;$T=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function A(B){return B===null||typeof B!="object"?null:(B=E&&B[E]||B["@@iterator"],typeof B=="function"?B:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,F={};function U(B,ie,de){this.props=B,this.context=ie,this.refs=F,this.updater=de||N}U.prototype.isReactComponent={},U.prototype.setState=function(B,ie){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ie,"setState")},U.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function Q(){}Q.prototype=U.prototype;function H(B,ie,de){this.props=B,this.context=ie,this.refs=F,this.updater=de||N}var z=H.prototype=new Q;z.constructor=H,L(z,U.prototype),z.isPureReactComponent=!0;var re=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},he=Object.prototype.hasOwnProperty;function O(B,ie,de,fe,_e,Ve){return de=Ve.ref,{$$typeof:n,type:B,key:ie,ref:de!==void 0?de:null,props:Ve}}function D(B,ie){return O(B.type,ie,void 0,void 0,void 0,B.props)}function b(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function M(B){var ie={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(de){return ie[de]})}var k=/\/+/g;function V(B,ie){return typeof B=="object"&&B!==null&&B.key!=null?M(""+B.key):ie.toString(36)}function x(){}function we(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(x,x):(B.status="pending",B.then(function(ie){B.status==="pending"&&(B.status="fulfilled",B.value=ie)},function(ie){B.status==="pending"&&(B.status="rejected",B.reason=ie)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Be(B,ie,de,fe,_e){var Ve=typeof B;(Ve==="undefined"||Ve==="boolean")&&(B=null);var Ce=!1;if(B===null)Ce=!0;else switch(Ve){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(B.$$typeof){case n:case e:Ce=!0;break;case v:return Ce=B._init,Be(Ce(B._payload),ie,de,fe,_e)}}if(Ce)return _e=_e(B),Ce=fe===""?"."+V(B,0):fe,re(_e)?(de="",Ce!=null&&(de=Ce.replace(k,"$&/")+"/"),Be(_e,ie,de,"",function(Rt){return Rt})):_e!=null&&(b(_e)&&(_e=D(_e,de+(_e.key==null||B&&B.key===_e.key?"":(""+_e.key).replace(k,"$&/")+"/")+Ce)),ie.push(_e)),1;Ce=0;var He=fe===""?".":fe+":";if(re(B))for(var Qe=0;Qe<B.length;Qe++)fe=B[Qe],Ve=He+V(fe,Qe),Ce+=Be(fe,ie,de,Ve,_e);else if(Qe=A(B),typeof Qe=="function")for(B=Qe.call(B),Qe=0;!(fe=B.next()).done;)fe=fe.value,Ve=He+V(fe,Qe++),Ce+=Be(fe,ie,de,Ve,_e);else if(Ve==="object"){if(typeof B.then=="function")return Be(we(B),ie,de,fe,_e);throw ie=String(B),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function ne(B,ie,de){if(B==null)return B;var fe=[],_e=0;return Be(B,fe,"","",function(Ve){return ie.call(de,Ve,_e++)}),fe}function pe(B){if(B._status===-1){var ie=B._result;ie=ie(),ie.then(function(de){(B._status===0||B._status===-1)&&(B._status=1,B._result=de)},function(de){(B._status===0||B._status===-1)&&(B._status=2,B._result=de)}),B._status===-1&&(B._status=0,B._result=ie)}if(B._status===1)return B._result.default;throw B._result}var se=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Ee(){}return qe.Children={map:ne,forEach:function(B,ie,de){ne(B,function(){ie.apply(this,arguments)},de)},count:function(B){var ie=0;return ne(B,function(){ie++}),ie},toArray:function(B){return ne(B,function(ie){return ie})||[]},only:function(B){if(!b(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},qe.Component=U,qe.Fragment=t,qe.Profiler=o,qe.PureComponent=H,qe.StrictMode=i,qe.Suspense=f,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,qe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return ee.H.useMemoCache(B)}},qe.cache=function(B){return function(){return B.apply(null,arguments)}},qe.cloneElement=function(B,ie,de){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var fe=L({},B.props),_e=B.key,Ve=void 0;if(ie!=null)for(Ce in ie.ref!==void 0&&(Ve=void 0),ie.key!==void 0&&(_e=""+ie.key),ie)!he.call(ie,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&ie.ref===void 0||(fe[Ce]=ie[Ce]);var Ce=arguments.length-2;if(Ce===1)fe.children=de;else if(1<Ce){for(var He=Array(Ce),Qe=0;Qe<Ce;Qe++)He[Qe]=arguments[Qe+2];fe.children=He}return O(B.type,_e,void 0,void 0,Ve,fe)},qe.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},qe.createElement=function(B,ie,de){var fe,_e={},Ve=null;if(ie!=null)for(fe in ie.key!==void 0&&(Ve=""+ie.key),ie)he.call(ie,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(_e[fe]=ie[fe]);var Ce=arguments.length-2;if(Ce===1)_e.children=de;else if(1<Ce){for(var He=Array(Ce),Qe=0;Qe<Ce;Qe++)He[Qe]=arguments[Qe+2];_e.children=He}if(B&&B.defaultProps)for(fe in Ce=B.defaultProps,Ce)_e[fe]===void 0&&(_e[fe]=Ce[fe]);return O(B,Ve,void 0,void 0,null,_e)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(B){return{$$typeof:d,render:B}},qe.isValidElement=b,qe.lazy=function(B){return{$$typeof:v,_payload:{_status:-1,_result:B},_init:pe}},qe.memo=function(B,ie){return{$$typeof:h,type:B,compare:ie===void 0?null:ie}},qe.startTransition=function(B){var ie=ee.T,de={};ee.T=de;try{var fe=B(),_e=ee.S;_e!==null&&_e(de,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Ee,se)}catch(Ve){se(Ve)}finally{ee.T=ie}},qe.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},qe.use=function(B){return ee.H.use(B)},qe.useActionState=function(B,ie,de){return ee.H.useActionState(B,ie,de)},qe.useCallback=function(B,ie){return ee.H.useCallback(B,ie)},qe.useContext=function(B){return ee.H.useContext(B)},qe.useDebugValue=function(){},qe.useDeferredValue=function(B,ie){return ee.H.useDeferredValue(B,ie)},qe.useEffect=function(B,ie,de){var fe=ee.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return fe.useEffect(B,ie)},qe.useId=function(){return ee.H.useId()},qe.useImperativeHandle=function(B,ie,de){return ee.H.useImperativeHandle(B,ie,de)},qe.useInsertionEffect=function(B,ie){return ee.H.useInsertionEffect(B,ie)},qe.useLayoutEffect=function(B,ie){return ee.H.useLayoutEffect(B,ie)},qe.useMemo=function(B,ie){return ee.H.useMemo(B,ie)},qe.useOptimistic=function(B,ie){return ee.H.useOptimistic(B,ie)},qe.useReducer=function(B,ie,de){return ee.H.useReducer(B,ie,de)},qe.useRef=function(B){return ee.H.useRef(B)},qe.useState=function(B){return ee.H.useState(B)},qe.useSyncExternalStore=function(B,ie,de){return ee.H.useSyncExternalStore(B,ie,de)},qe.useTransition=function(){return ee.H.useTransition()},qe.version="19.1.1",qe}var YT;function Sg(){return YT||(YT=1,mm.exports=lN()),mm.exports}var X=Sg(),gm={exports:{}},Pc={},ym={exports:{}},_m={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function cN(){return KT||(KT=1,(function(n){function e(ne,pe){var se=ne.length;ne.push(pe);e:for(;0<se;){var Ee=se-1>>>1,B=ne[Ee];if(0<o(B,pe))ne[Ee]=pe,ne[se]=B,se=Ee;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var pe=ne[0],se=ne.pop();if(se!==pe){ne[0]=se;e:for(var Ee=0,B=ne.length,ie=B>>>1;Ee<ie;){var de=2*(Ee+1)-1,fe=ne[de],_e=de+1,Ve=ne[_e];if(0>o(fe,se))_e<B&&0>o(Ve,fe)?(ne[Ee]=Ve,ne[_e]=se,Ee=_e):(ne[Ee]=fe,ne[de]=se,Ee=de);else if(_e<B&&0>o(Ve,se))ne[Ee]=Ve,ne[_e]=se,Ee=_e;else break e}}return pe}function o(ne,pe){var se=ne.sortIndex-pe.sortIndex;return se!==0?se:ne.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],h=[],v=1,E=null,A=3,N=!1,L=!1,F=!1,U=!1,Q=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function re(ne){for(var pe=t(h);pe!==null;){if(pe.callback===null)i(h);else if(pe.startTime<=ne)i(h),pe.sortIndex=pe.expirationTime,e(f,pe);else break;pe=t(h)}}function ee(ne){if(F=!1,re(ne),!L)if(t(f)!==null)L=!0,he||(he=!0,V());else{var pe=t(h);pe!==null&&Be(ee,pe.startTime-ne)}}var he=!1,O=-1,D=5,b=-1;function M(){return U?!0:!(n.unstable_now()-b<D)}function k(){if(U=!1,he){var ne=n.unstable_now();b=ne;var pe=!0;try{e:{L=!1,F&&(F=!1,H(O),O=-1),N=!0;var se=A;try{t:{for(re(ne),E=t(f);E!==null&&!(E.expirationTime>ne&&M());){var Ee=E.callback;if(typeof Ee=="function"){E.callback=null,A=E.priorityLevel;var B=Ee(E.expirationTime<=ne);if(ne=n.unstable_now(),typeof B=="function"){E.callback=B,re(ne),pe=!0;break t}E===t(f)&&i(f),re(ne)}else i(f);E=t(f)}if(E!==null)pe=!0;else{var ie=t(h);ie!==null&&Be(ee,ie.startTime-ne),pe=!1}}break e}finally{E=null,A=se,N=!1}pe=void 0}}finally{pe?V():he=!1}}}var V;if(typeof z=="function")V=function(){z(k)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,we=x.port2;x.port1.onmessage=k,V=function(){we.postMessage(null)}}else V=function(){Q(k,0)};function Be(ne,pe){O=Q(function(){ne(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(ne){switch(A){case 1:case 2:case 3:var pe=3;break;default:pe=A}var se=A;A=pe;try{return ne()}finally{A=se}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(ne,pe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var se=A;A=ne;try{return pe()}finally{A=se}},n.unstable_scheduleCallback=function(ne,pe,se){var Ee=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ee+se:Ee):se=Ee,ne){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=se+B,ne={id:v++,callback:pe,priorityLevel:ne,startTime:se,expirationTime:B,sortIndex:-1},se>Ee?(ne.sortIndex=se,e(h,ne),t(f)===null&&ne===t(h)&&(F?(H(O),O=-1):F=!0,Be(ee,se-Ee))):(ne.sortIndex=B,e(f,ne),L||N||(L=!0,he||(he=!0,V()))),ne},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(ne){var pe=A;return function(){var se=A;A=pe;try{return ne.apply(this,arguments)}finally{A=se}}}})(_m)),_m}var JT;function uN(){return JT||(JT=1,ym.exports=cN()),ym.exports}var vm={exports:{}},Rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function dN(){if(QT)return Rn;QT=1;var n=Sg();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(f,h,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:f,containerInfo:h,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Rn.createPortal=function(f,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,v)},Rn.flushSync=function(f){var h=c.T,v=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=h,i.p=v,i.d.f()}},Rn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},Rn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Rn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var v=h.as,E=d(v,h.crossOrigin),A=typeof h.integrity=="string"?h.integrity:void 0,N=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:N}):v==="script"&&i.d.X(f,{crossOrigin:E,integrity:A,fetchPriority:N,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Rn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=d(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},Rn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,E=d(v,h.crossOrigin);i.d.L(f,v,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Rn.preloadModule=function(f,h){if(typeof f=="string")if(h){var v=d(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},Rn.requestFormReset=function(f){i.d.r(f)},Rn.unstable_batchedUpdates=function(f,h){return f(h)},Rn.useFormState=function(f,h,v){return c.H.useFormState(f,h,v)},Rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Rn.version="19.1.1",Rn}var WT;function hN(){if(WT)return vm.exports;WT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vm.exports=dN(),vm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function fN(){if(XT)return Pc;XT=1;var n=uN(),e=Sg(),t=hN();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function c(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(a(s)!==s)throw Error(i(188))}function f(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,u=r;;){var y=l.return;if(y===null)break;var T=y.alternate;if(T===null){if(u=y.return,u!==null){l=u;continue}break}if(y.child===T.child){for(T=y.child;T;){if(T===l)return d(y),s;if(T===u)return d(y),r;T=T.sibling}throw Error(i(188))}if(l.return!==u.return)l=y,u=T;else{for(var C=!1,I=y.child;I;){if(I===l){C=!0,l=y,u=T;break}if(I===u){C=!0,u=y,l=T;break}I=I.sibling}if(!C){for(I=T.child;I;){if(I===l){C=!0,l=T,u=y;break}if(I===u){C=!0,u=T,l=y;break}I=I.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function h(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=h(s),r!==null)return r;s=s.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),z=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var x=Symbol.for("react.client.reference");function we(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===x?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case L:return"Fragment";case U:return"Profiler";case F:return"StrictMode";case ee:return"Suspense";case he:return"SuspenseList";case b:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case N:return"Portal";case z:return(s.displayName||"Context")+".Provider";case H:return(s._context.displayName||"Context")+".Consumer";case re:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return r=s.displayName||null,r!==null?r:we(s.type)||"Memo";case D:r=s._payload,s=s._init;try{return we(s(r))}catch{}}return null}var Be=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Ee=[],B=-1;function ie(s){return{current:s}}function de(s){0>B||(s.current=Ee[B],Ee[B]=null,B--)}function fe(s,r){B++,Ee[B]=s.current,s.current=r}var _e=ie(null),Ve=ie(null),Ce=ie(null),He=ie(null);function Qe(s,r){switch(fe(Ce,r),fe(Ve,s),fe(_e,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?_T(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=_T(r),s=vT(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}de(_e),fe(_e,s)}function Rt(){de(_e),de(Ve),de(Ce)}function yt(s){s.memoizedState!==null&&fe(He,s);var r=_e.current,l=vT(r,s.type);r!==l&&(fe(Ve,s),fe(_e,l))}function Qt(s){Ve.current===s&&(de(_e),de(Ve)),He.current===s&&(de(He),Cc._currentValue=se)}var mi=Object.prototype.hasOwnProperty,Mn=n.unstable_scheduleCallback,Pi=n.unstable_cancelCallback,Rs=n.unstable_shouldYield,es=n.unstable_requestPaint,bt=n.unstable_now,fn=n.unstable_getCurrentPriorityLevel,_t=n.unstable_ImmediatePriority,Pt=n.unstable_UserBlockingPriority,zn=n.unstable_NormalPriority,ts=n.unstable_LowPriority,Ns=n.unstable_IdlePriority,Di=n.log,Mi=n.unstable_setDisableYieldValue,kn=null,ot=null;function Sn(s){if(typeof Di=="function"&&Mi(s),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(kn,s)}catch{}}var Wt=Math.clz32?Math.clz32:bs,ns=Math.log,xs=Math.LN2;function bs(s){return s>>>=0,s===0?32:31-(ns(s)/xs|0)|0}var Xt=256,Vn=4194304;function Un(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function wn(s,r,l){var u=s.pendingLanes;if(u===0)return 0;var y=0,T=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var I=u&134217727;return I!==0?(u=I&~T,u!==0?y=Un(u):(C&=I,C!==0?y=Un(C):l||(l=I&~s,l!==0&&(y=Un(l))))):(I=u&~T,I!==0?y=Un(I):C!==0?y=Un(C):l||(l=u&~s,l!==0&&(y=Un(l)))),y===0?0:r!==0&&r!==y&&(r&T)===0&&(T=y&-y,l=r&-r,T>=l||T===32&&(l&4194048)!==0)?r:y}function jn(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function is(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ti(){var s=Xt;return Xt<<=1,(Xt&4194048)===0&&(Xt=256),s}function ni(){var s=Vn;return Vn<<=1,(Vn&62914560)===0&&(Vn=4194304),s}function gi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function dt(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ps(s,r,l,u,y,T){var C=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var I=s.entanglements,q=s.expirationTimes,K=s.hiddenUpdates;for(l=C&~l;0<l;){var oe=31-Wt(l),ce=1<<oe;I[oe]=0,q[oe]=-1;var W=K[oe];if(W!==null)for(K[oe]=null,oe=0;oe<W.length;oe++){var Z=W[oe];Z!==null&&(Z.lane&=-536870913)}l&=~ce}u!==0&&Ln(s,u,0),T!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=T&~(C&~r))}function Ln(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var u=31-Wt(r);s.entangledLanes|=r,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function yi(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var u=31-Wt(l),y=1<<u;y&r|s[u]&r&&(s[u]|=r),l&=~y}}function Ds(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function lr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ii(){var s=pe.p;return s!==0?s:(s=window.event,s===void 0?32:OT(s.type))}function wt(s,r){var l=pe.p;try{return pe.p=s,r()}finally{pe.p=l}}var Ye=Math.random().toString(36).slice(2),it="__reactFiber$"+Ye,vt="__reactProps$"+Ye,Zt="__reactContainer$"+Ye,pn="__reactEvents$"+Ye,Gt="__reactListeners$"+Ye,co="__reactHandles$"+Ye,R="__reactResources$"+Ye,J="__reactMarker$"+Ye;function ge(s){delete s[it],delete s[vt],delete s[pn],delete s[Gt],delete s[co]}function Oe(s){var r=s[it];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Zt]||l[it]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=ST(s);s!==null;){if(l=s[it])return l;s=ST(s)}return r}s=l,l=s.parentNode}return null}function Ie(s){if(s=s[it]||s[Zt]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function Ge(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function mn(s){var r=s[R];return r||(r=s[R]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Dt(s){s[J]=!0}var ca=new Set,uo={};function ss(s,r){rs(s,r),rs(s+"Capture",r)}function rs(s,r){for(uo[s]=r,s=0;s<r.length;s++)ca.add(r[s])}var ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),os={},ua={};function Ef(s){return mi.call(ua,s)?!0:mi.call(os,s)?!1:ho.test(s)?ua[s]=!0:(os[s]=!0,!1)}function fo(s,r,l){if(Ef(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function po(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function _i(s,r,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+u)}}var mo,da;function Ms(s){if(mo===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);mo=r&&r[1]||"",da=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mo+s+da}var ha=!1;function fa(s,r){if(!s||ha)return"";ha=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(Z){var W=Z}Reflect.construct(s,[],ce)}else{try{ce.call()}catch(Z){W=Z}s.call(ce.prototype)}}else{try{throw Error()}catch(Z){W=Z}(ce=s())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=u.DetermineComponentFrameRoot(),C=T[0],I=T[1];if(C&&I){var q=C.split(`
`),K=I.split(`
`);for(y=u=0;u<q.length&&!q[u].includes("DetermineComponentFrameRoot");)u++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(u===q.length||y===K.length)for(u=q.length-1,y=K.length-1;1<=u&&0<=y&&q[u]!==K[y];)y--;for(;1<=u&&0<=y;u--,y--)if(q[u]!==K[y]){if(u!==1||y!==1)do if(u--,y--,0>y||q[u]!==K[y]){var oe=`
`+q[u].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=u&&0<=y);break}}}finally{ha=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Ms(l):""}function Af(s){switch(s.tag){case 26:case 27:case 5:return Ms(s.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 15:return fa(s.type,!1);case 11:return fa(s.type.render,!1);case 1:return fa(s.type,!0);case 31:return Ms("Activity");default:return""}}function ki(s){try{var r="";do r+=Af(s),s=s.return;while(s);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Mt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function cr(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function go(s){var r=cr(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),u=""+s[r];if(!s.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,T=l.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){u=""+C,T.call(this,C)}}),Object.defineProperty(s,r,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function ur(s){s._valueTracker||(s._valueTracker=go(s))}function ht(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),u="";return s&&(u=cr(s)?s.checked?"true":"false":s.value),s=u,s!==l?(r.setValue(s),!0):!1}function ks(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var yo=/[\n"\\]/g;function rn(s){return s.replace(yo,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function bl(s,r,l,u,y,T,C,I){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),r!=null?C==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Mt(r)):s.value!==""+Mt(r)&&(s.value=""+Mt(r)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),r!=null?Dl(s,C,Mt(r)):l!=null?Dl(s,C,Mt(l)):u!=null&&s.removeAttribute("value"),y==null&&T!=null&&(s.defaultChecked=!!T),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+Mt(I):s.removeAttribute("name")}function Pl(s,r,l,u,y,T,C,I){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),r!=null||l!=null){if(!(T!=="submit"&&T!=="reset"||r!=null))return;l=l!=null?""+Mt(l):"",r=r!=null?""+Mt(r):l,I||r===s.value||(s.value=r),s.defaultValue=r}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=I?s.checked:!!u,s.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function Dl(s,r,l){r==="number"&&ks(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function dr(s,r,l,u){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&u&&(s[l].defaultSelected=!0)}else{for(l=""+Mt(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,u&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function xu(s,r,l){if(r!=null&&(r=""+Mt(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+Mt(l):""}function bu(s,r,l,u){if(r==null){if(u!=null){if(l!=null)throw Error(i(92));if(Be(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),r=l}l=Mt(r),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function vi(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Vs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ml(s,r,l){var u=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":u?s.setProperty(r,l):typeof l!="number"||l===0||Vs.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function kl(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var y in r)u=r[y],r.hasOwnProperty(y)&&l[y]!==u&&Ml(s,y,u)}else for(var T in r)r.hasOwnProperty(T)&&Ml(s,T,r[T])}function pa(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Du=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vi(s){return Du.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Vl=null;function Ul(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var hr=null,On=null;function Mu(s){var r=Ie(s);if(r&&(s=r.stateNode)){var l=s[vt]||null;e:switch(s=r.stateNode,r.type){case"input":if(bl(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+rn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var u=l[r];if(u!==s&&u.form===s.form){var y=u[vt]||null;if(!y)throw Error(i(90));bl(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)u=l[r],u.form===s.form&&ht(u)}break e;case"textarea":xu(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&dr(s,!!l.multiple,r,!1)}}}var _o=!1;function vo(s,r,l){if(_o)return s(r,l);_o=!0;try{var u=s(r);return u}finally{if(_o=!1,(hr!==null||On!==null)&&(Ad(),hr&&(r=hr,s=On,On=hr=null,Mu(r),s)))for(r=0;r<s.length;r++)Mu(s[r])}}function fr(s,r){var l=s.stateNode;if(l===null)return null;var u=l[vt]||null;if(u===null)return null;l=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Us=!1;if(Fn)try{var pr={};Object.defineProperty(pr,"passive",{get:function(){Us=!0}}),window.addEventListener("test",pr,pr),window.removeEventListener("test",pr,pr)}catch{Us=!1}var Ti=null,Et=null,ma=null;function ku(){if(ma)return ma;var s,r=Et,l=r.length,u,y="value"in Ti?Ti.value:Ti.textContent,T=y.length;for(s=0;s<l&&r[s]===y[s];s++);var C=l-s;for(u=1;u<=C&&r[l-u]===y[T-u];u++);return ma=y.slice(s,1<u?1-u:void 0)}function To(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Eo(){return!0}function Ll(){return!1}function en(s){function r(l,u,y,T,C){this._reactName=l,this._targetInst=y,this.type=u,this.nativeEvent=T,this.target=C,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(l=s[I],this[I]=l?l(T):T[I]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Eo:Ll,this.isPropagationStopped=Ll,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),r}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ao=en(Cn),So=v({},Cn,{view:0,detail:0}),wo=en(So),ga,Co,as,Io=v({},So,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:va,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==as&&(as&&s.type==="mousemove"?(ga=s.screenX-as.screenX,Co=s.screenY-as.screenY):Co=ga=0,as=s),ga)},movementY:function(s){return"movementY"in s?s.movementY:Co}}),Ro=en(Io),Sf=v({},Io,{dataTransfer:0}),Vu=en(Sf),No=v({},So,{relatedTarget:0}),ya=en(No),Uu=v({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ol=en(Uu),Fl=v({},Cn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Lu=en(Fl),_a=v({},Cn,{data:0}),ql=en(_a),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ls={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qu(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Fu[s])?!!r[s]:!1}function va(){return qu}var Bu=v({},So,{key:function(s){if(s.key){var r=Ou[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=To(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ls[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:va,charCode:function(s){return s.type==="keypress"?To(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?To(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ta=en(Bu),qn=v({},Io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bl=en(qn),Hu=v({},So,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:va}),mr=en(Hu),m=v({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=en(m),w=v({},Io,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),P=en(w),Y=v({},Cn,{newState:0,oldState:0}),te=en(Y),me=[9,13,27,32],Le=Fn&&"CompositionEvent"in window,Ct=null;Fn&&"documentMode"in document&&(Ct=document.documentMode);var lt=Fn&&"TextEvent"in window&&!Ct,Ft=Fn&&(!Le||Ct&&8<Ct&&11>=Ct),si=" ",ls=!1;function Ui(s,r){switch(s){case"keyup":return me.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Li(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Oi=!1;function Hl(s,r){switch(s){case"compositionend":return Li(r);case"keypress":return r.which!==32?null:(ls=!0,si);case"textInput":return s=r.data,s===si&&ls?null:s;default:return null}}function MI(s,r){if(Oi)return s==="compositionend"||!Le&&Ui(s,r)?(s=ku(),ma=Et=Ti=null,Oi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ft&&r.locale!=="ko"?null:r.data;default:return null}}var kI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!kI[s.type]:r==="textarea"}function My(s,r,l,u){hr?On?On.push(u):On=[u]:hr=u,r=Nd(r,"onChange"),0<r.length&&(l=new Ao("onChange","change",null,l,u),s.push({event:l,listeners:r}))}var Gl=null,zl=null;function VI(s){fT(s,0)}function Gu(s){var r=Ge(s);if(ht(r))return s}function ky(s,r){if(s==="change")return r}var Vy=!1;if(Fn){var wf;if(Fn){var Cf="oninput"in document;if(!Cf){var Uy=document.createElement("div");Uy.setAttribute("oninput","return;"),Cf=typeof Uy.oninput=="function"}wf=Cf}else wf=!1;Vy=wf&&(!document.documentMode||9<document.documentMode)}function Ly(){Gl&&(Gl.detachEvent("onpropertychange",Oy),zl=Gl=null)}function Oy(s){if(s.propertyName==="value"&&Gu(zl)){var r=[];My(r,zl,s,Ul(s)),vo(VI,r)}}function UI(s,r,l){s==="focusin"?(Ly(),Gl=r,zl=l,Gl.attachEvent("onpropertychange",Oy)):s==="focusout"&&Ly()}function LI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Gu(zl)}function OI(s,r){if(s==="click")return Gu(r)}function FI(s,r){if(s==="input"||s==="change")return Gu(r)}function qI(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var ri=typeof Object.is=="function"?Object.is:qI;function jl(s,r){if(ri(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),u=Object.keys(r);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var y=l[u];if(!mi.call(r,y)||!ri(s[y],r[y]))return!1}return!0}function Fy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function qy(s,r){var l=Fy(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=r&&u>=r)return{node:l,offset:r-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Fy(l)}}function By(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?By(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Hy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=ks(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=ks(s.document)}return r}function If(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var BI=Fn&&"documentMode"in document&&11>=document.documentMode,Ea=null,Rf=null,$l=null,Nf=!1;function Gy(s,r,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Nf||Ea==null||Ea!==ks(u)||(u=Ea,"selectionStart"in u&&If(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$l&&jl($l,u)||($l=u,u=Nd(Rf,"onSelect"),0<u.length&&(r=new Ao("onSelect","select",null,r,l),s.push({event:r,listeners:u}),r.target=Ea)))}function xo(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Aa={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionrun:xo("Transition","TransitionRun"),transitionstart:xo("Transition","TransitionStart"),transitioncancel:xo("Transition","TransitionCancel"),transitionend:xo("Transition","TransitionEnd")},xf={},zy={};Fn&&(zy=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function bo(s){if(xf[s])return xf[s];if(!Aa[s])return s;var r=Aa[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in zy)return xf[s]=r[l];return s}var jy=bo("animationend"),$y=bo("animationiteration"),Yy=bo("animationstart"),HI=bo("transitionrun"),GI=bo("transitionstart"),zI=bo("transitioncancel"),Ky=bo("transitionend"),Jy=new Map,bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bf.push("scrollEnd");function Fi(s,r){Jy.set(s,r),ss(r,[s])}var Qy=new WeakMap;function Ei(s,r){if(typeof s=="object"&&s!==null){var l=Qy.get(s);return l!==void 0?l:(r={value:s,source:r,stack:ki(r)},Qy.set(s,r),r)}return{value:s,source:r,stack:ki(r)}}var Ai=[],Sa=0,Pf=0;function zu(){for(var s=Sa,r=Pf=Sa=0;r<s;){var l=Ai[r];Ai[r++]=null;var u=Ai[r];Ai[r++]=null;var y=Ai[r];Ai[r++]=null;var T=Ai[r];if(Ai[r++]=null,u!==null&&y!==null){var C=u.pending;C===null?y.next=y:(y.next=C.next,C.next=y),u.pending=y}T!==0&&Wy(l,y,T)}}function ju(s,r,l,u){Ai[Sa++]=s,Ai[Sa++]=r,Ai[Sa++]=l,Ai[Sa++]=u,Pf|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Df(s,r,l,u){return ju(s,r,l,u),$u(s)}function wa(s,r){return ju(s,null,null,r),$u(s)}function Wy(s,r,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var y=!1,T=s.return;T!==null;)T.childLanes|=l,u=T.alternate,u!==null&&(u.childLanes|=l),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(y=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,y&&r!==null&&(y=31-Wt(l),s=T.hiddenUpdates,u=s[y],u===null?s[y]=[r]:u.push(r),r.lane=l|536870912),T):null}function $u(s){if(50<yc)throw yc=0,Op=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Ca={};function jI(s,r,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(s,r,l,u){return new jI(s,r,l,u)}function Mf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Os(s,r){var l=s.alternate;return l===null?(l=oi(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Xy(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Yu(s,r,l,u,y,T){var C=0;if(u=s,typeof s=="function")Mf(s)&&(C=1);else if(typeof s=="string")C=YR(s,l,_e.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case b:return s=oi(31,l,r,y),s.elementType=b,s.lanes=T,s;case L:return Po(l.children,y,T,r);case F:C=8,y|=24;break;case U:return s=oi(12,l,r,y|2),s.elementType=U,s.lanes=T,s;case ee:return s=oi(13,l,r,y),s.elementType=ee,s.lanes=T,s;case he:return s=oi(19,l,r,y),s.elementType=he,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Q:case z:C=10;break e;case H:C=9;break e;case re:C=11;break e;case O:C=14;break e;case D:C=16,u=null;break e}C=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return r=oi(C,l,r,y),r.elementType=s,r.type=u,r.lanes=T,r}function Po(s,r,l,u){return s=oi(7,s,u,r),s.lanes=l,s}function kf(s,r,l){return s=oi(6,s,null,r),s.lanes=l,s}function Vf(s,r,l){return r=oi(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Ia=[],Ra=0,Ku=null,Ju=0,Si=[],wi=0,Do=null,Fs=1,qs="";function Mo(s,r){Ia[Ra++]=Ju,Ia[Ra++]=Ku,Ku=s,Ju=r}function Zy(s,r,l){Si[wi++]=Fs,Si[wi++]=qs,Si[wi++]=Do,Do=s;var u=Fs;s=qs;var y=32-Wt(u)-1;u&=~(1<<y),l+=1;var T=32-Wt(r)+y;if(30<T){var C=y-y%5;T=(u&(1<<C)-1).toString(32),u>>=C,y-=C,Fs=1<<32-Wt(r)+y|l<<y|u,qs=T+s}else Fs=1<<T|l<<y|u,qs=s}function Uf(s){s.return!==null&&(Mo(s,1),Zy(s,1,0))}function Lf(s){for(;s===Ku;)Ku=Ia[--Ra],Ia[Ra]=null,Ju=Ia[--Ra],Ia[Ra]=null;for(;s===Do;)Do=Si[--wi],Si[wi]=null,qs=Si[--wi],Si[wi]=null,Fs=Si[--wi],Si[wi]=null}var Bn=null,Lt=null,at=!1,ko=null,cs=!1,Of=Error(i(519));function Vo(s){var r=Error(i(418,""));throw Jl(Ei(r,s)),Of}function e_(s){var r=s.stateNode,l=s.type,u=s.memoizedProps;switch(r[it]=s,r[vt]=u,l){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(l=0;l<vc.length;l++)Je(vc[l],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":Je("invalid",r),Pl(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ur(r);break;case"select":Je("invalid",r);break;case"textarea":Je("invalid",r),bu(r,u.value,u.defaultValue,u.children),ur(r)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||u.suppressHydrationWarning===!0||yT(r.textContent,l)?(u.popover!=null&&(Je("beforetoggle",r),Je("toggle",r)),u.onScroll!=null&&Je("scroll",r),u.onScrollEnd!=null&&Je("scrollend",r),u.onClick!=null&&(r.onclick=xd),r=!0):r=!1,r||Vo(s)}function t_(s){for(Bn=s.return;Bn;)switch(Bn.tag){case 5:case 13:cs=!1;return;case 27:case 3:cs=!0;return;default:Bn=Bn.return}}function Yl(s){if(s!==Bn)return!1;if(!at)return t_(s),at=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||em(s.type,s.memoizedProps)),l=!l),l&&Lt&&Vo(s),t_(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(r===0){Lt=Bi(s.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;s=s.nextSibling}Lt=null}}else r===27?(r=Lt,Pr(s.type)?(s=sm,sm=null,Lt=s):Lt=r):Lt=Bn?Bi(s.stateNode.nextSibling):null;return!0}function Kl(){Lt=Bn=null,at=!1}function n_(){var s=ko;return s!==null&&(Kn===null?Kn=s:Kn.push.apply(Kn,s),ko=null),s}function Jl(s){ko===null?ko=[s]:ko.push(s)}var Ff=ie(null),Uo=null,Bs=null;function gr(s,r,l){fe(Ff,r._currentValue),r._currentValue=l}function Hs(s){s._currentValue=Ff.current,de(Ff)}function qf(s,r,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),s===l)break;s=s.return}}function Bf(s,r,l,u){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var T=y.dependencies;if(T!==null){var C=y.child;T=T.firstContext;e:for(;T!==null;){var I=T;T=y;for(var q=0;q<r.length;q++)if(I.context===r[q]){T.lanes|=l,I=T.alternate,I!==null&&(I.lanes|=l),qf(T.return,l,s),u||(C=null);break e}T=I.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=l,T=C.alternate,T!==null&&(T.lanes|=l),qf(C,l,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Ql(s,r,l,u){s=null;for(var y=r,T=!1;y!==null;){if(!T){if((y.flags&524288)!==0)T=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var I=y.type;ri(y.pendingProps.value,C.value)||(s!==null?s.push(I):s=[I])}}else if(y===He.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Cc):s=[Cc])}y=y.return}s!==null&&Bf(r,s,l,u),r.flags|=262144}function Qu(s){for(s=s.firstContext;s!==null;){if(!ri(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Lo(s){Uo=s,Bs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function In(s){return i_(Uo,s)}function Wu(s,r){return Uo===null&&Lo(s),i_(s,r)}function i_(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Bs===null){if(s===null)throw Error(i(308));Bs=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Bs=Bs.next=r;return l}var $I=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},YI=n.unstable_scheduleCallback,KI=n.unstable_NormalPriority,tn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hf(){return{controller:new $I,data:new Map,refCount:0}}function Wl(s){s.refCount--,s.refCount===0&&YI(KI,function(){s.controller.abort()})}var Xl=null,Gf=0,Na=0,xa=null;function JI(s,r){if(Xl===null){var l=Xl=[];Gf=0,Na=jp(),xa={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Gf++,r.then(s_,s_),r}function s_(){if(--Gf===0&&Xl!==null){xa!==null&&(xa.status="fulfilled");var s=Xl;Xl=null,Na=0,xa=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function QI(s,r){var l=[],u={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){u.status="fulfilled",u.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(u.status="rejected",u.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),u}var r_=ne.S;ne.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&JI(s,r),r_!==null&&r_(s,r)};var Oo=ie(null);function zf(){var s=Oo.current;return s!==null?s:At.pooledCache}function Xu(s,r){r===null?fe(Oo,Oo.current):fe(Oo,r.pool)}function o_(){var s=zf();return s===null?null:{parent:tn._currentValue,pool:s}}var Zl=Error(i(460)),a_=Error(i(474)),Zu=Error(i(542)),jf={then:function(){}};function l_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ed(){}function c_(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(ed,ed),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,d_(s),s;default:if(typeof r.status=="string")r.then(ed,ed);else{if(s=At,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(u){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=u}},function(u){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,d_(s),s}throw ec=r,Zl}}var ec=null;function u_(){if(ec===null)throw Error(i(459));var s=ec;return ec=null,s}function d_(s){if(s===Zl||s===Zu)throw Error(i(483))}var yr=!1;function $f(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yf(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function _r(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function vr(s,r,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(ct&2)!==0){var y=u.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),u.pending=r,r=$u(s),Wy(s,null,l),r}return ju(s,u,r,l),$u(s)}function tc(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var u=r.lanes;u&=s.pendingLanes,l|=u,r.lanes=l,yi(s,l)}}function Kf(s,r){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var y=null,T=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};T===null?y=T=C:T=T.next=C,l=l.next}while(l!==null);T===null?y=T=r:T=T.next=r}else y=T=r;l={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:T,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Jf=!1;function nc(){if(Jf){var s=xa;if(s!==null)throw s}}function ic(s,r,l,u){Jf=!1;var y=s.updateQueue;yr=!1;var T=y.firstBaseUpdate,C=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var q=I,K=q.next;q.next=null,C===null?T=K:C.next=K,C=q;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,I=oe.lastBaseUpdate,I!==C&&(I===null?oe.firstBaseUpdate=K:I.next=K,oe.lastBaseUpdate=q))}if(T!==null){var ce=y.baseState;C=0,oe=K=q=null,I=T;do{var W=I.lane&-536870913,Z=W!==I.lane;if(Z?(et&W)===W:(u&W)===W){W!==0&&W===Na&&(Jf=!0),oe!==null&&(oe=oe.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ke=s,Pe=I;W=r;var mt=l;switch(Pe.tag){case 1:if(ke=Pe.payload,typeof ke=="function"){ce=ke.call(mt,ce,W);break e}ce=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Pe.payload,W=typeof ke=="function"?ke.call(mt,ce,W):ke,W==null)break e;ce=v({},ce,W);break e;case 2:yr=!0}}W=I.callback,W!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:I.tag,payload:I.payload,callback:I.callback,next:null},oe===null?(K=oe=Z,q=ce):oe=oe.next=Z,C|=W;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);oe===null&&(q=ce),y.baseState=q,y.firstBaseUpdate=K,y.lastBaseUpdate=oe,T===null&&(y.shared.lanes=0),Rr|=C,s.lanes=C,s.memoizedState=ce}}function h_(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function f_(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)h_(l[s],r)}var ba=ie(null),td=ie(0);function p_(s,r){s=Js,fe(td,s),fe(ba,r),Js=s|r.baseLanes}function Qf(){fe(td,Js),fe(ba,ba.current)}function Wf(){Js=td.current,de(ba),de(td)}var Tr=0,ze=null,ft=null,zt=null,nd=!1,Pa=!1,Fo=!1,id=0,sc=0,Da=null,WI=0;function qt(){throw Error(i(321))}function Xf(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!ri(s[l],r[l]))return!1;return!0}function Zf(s,r,l,u,y,T){return Tr=T,ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ne.H=s===null||s.memoizedState===null?W_:X_,Fo=!1,T=l(u,y),Fo=!1,Pa&&(T=g_(r,l,u,y)),m_(s),T}function m_(s){ne.H=cd;var r=ft!==null&&ft.next!==null;if(Tr=0,zt=ft=ze=null,nd=!1,sc=0,Da=null,r)throw Error(i(300));s===null||on||(s=s.dependencies,s!==null&&Qu(s)&&(on=!0))}function g_(s,r,l,u){ze=s;var y=0;do{if(Pa&&(Da=null),sc=0,Pa=!1,25<=y)throw Error(i(301));if(y+=1,zt=ft=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}ne.H=sR,T=r(l,u)}while(Pa);return T}function XI(){var s=ne.H,r=s.useState()[0];return r=typeof r.then=="function"?rc(r):r,s=s.useState()[0],(ft!==null?ft.memoizedState:null)!==s&&(ze.flags|=1024),r}function ep(){var s=id!==0;return id=0,s}function tp(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function np(s){if(nd){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}nd=!1}Tr=0,zt=ft=ze=null,Pa=!1,sc=id=0,Da=null}function $n(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?ze.memoizedState=zt=s:zt=zt.next=s,zt}function jt(){if(ft===null){var s=ze.alternate;s=s!==null?s.memoizedState:null}else s=ft.next;var r=zt===null?ze.memoizedState:zt.next;if(r!==null)zt=r,ft=s;else{if(s===null)throw ze.alternate===null?Error(i(467)):Error(i(310));ft=s,s={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},zt===null?ze.memoizedState=zt=s:zt=zt.next=s}return zt}function ip(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rc(s){var r=sc;return sc+=1,Da===null&&(Da=[]),s=c_(Da,s,r),r=ze,(zt===null?r.memoizedState:zt.next)===null&&(r=r.alternate,ne.H=r===null||r.memoizedState===null?W_:X_),s}function sd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return rc(s);if(s.$$typeof===z)return In(s)}throw Error(i(438,String(s)))}function sp(s){var r=null,l=ze.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var u=ze.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=ip(),ze.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),u=0;u<s;u++)l[u]=M;return r.index++,l}function Gs(s,r){return typeof r=="function"?r(s):r}function rd(s){var r=jt();return rp(r,ft,s)}function rp(s,r,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var y=s.baseQueue,T=u.pending;if(T!==null){if(y!==null){var C=y.next;y.next=T.next,T.next=C}r.baseQueue=y=T,u.pending=null}if(T=s.baseState,y===null)s.memoizedState=T;else{r=y.next;var I=C=null,q=null,K=r,oe=!1;do{var ce=K.lane&-536870913;if(ce!==K.lane?(et&ce)===ce:(Tr&ce)===ce){var W=K.revertLane;if(W===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ce===Na&&(oe=!0);else if((Tr&W)===W){K=K.next,W===Na&&(oe=!0);continue}else ce={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},q===null?(I=q=ce,C=T):q=q.next=ce,ze.lanes|=W,Rr|=W;ce=K.action,Fo&&l(T,ce),T=K.hasEagerState?K.eagerState:l(T,ce)}else W={lane:ce,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},q===null?(I=q=W,C=T):q=q.next=W,ze.lanes|=ce,Rr|=ce;K=K.next}while(K!==null&&K!==r);if(q===null?C=T:q.next=I,!ri(T,s.memoizedState)&&(on=!0,oe&&(l=xa,l!==null)))throw l;s.memoizedState=T,s.baseState=C,s.baseQueue=q,u.lastRenderedState=T}return y===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function op(s){var r=jt(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,y=l.pending,T=r.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do T=s(T,C.action),C=C.next;while(C!==y);ri(T,r.memoizedState)||(on=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),l.lastRenderedState=T}return[T,u]}function y_(s,r,l){var u=ze,y=jt(),T=at;if(T){if(l===void 0)throw Error(i(407));l=l()}else l=r();var C=!ri((ft||y).memoizedState,l);C&&(y.memoizedState=l,on=!0),y=y.queue;var I=T_.bind(null,u,y,s);if(oc(2048,8,I,[s]),y.getSnapshot!==r||C||zt!==null&&zt.memoizedState.tag&1){if(u.flags|=2048,Ma(9,od(),v_.bind(null,u,y,l,r),null),At===null)throw Error(i(349));T||(Tr&124)!==0||__(u,r,l)}return l}function __(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=ze.updateQueue,r===null?(r=ip(),ze.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function v_(s,r,l,u){r.value=l,r.getSnapshot=u,E_(r)&&A_(s)}function T_(s,r,l){return l(function(){E_(r)&&A_(s)})}function E_(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!ri(s,l)}catch{return!0}}function A_(s){var r=wa(s,2);r!==null&&di(r,s,2)}function ap(s){var r=$n();if(typeof s=="function"){var l=s;if(s=l(),Fo){Sn(!0);try{l()}finally{Sn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:s},r}function S_(s,r,l,u){return s.baseState=l,rp(s,ft,typeof u=="function"?u:Gs)}function ZI(s,r,l,u,y){if(ld(s))throw Error(i(485));if(s=r.action,s!==null){var T={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){T.listeners.push(C)}};ne.T!==null?l(!0):T.isTransition=!1,u(T),l=r.pending,l===null?(T.next=r.pending=T,w_(r,T)):(T.next=l.next,r.pending=l.next=T)}}function w_(s,r){var l=r.action,u=r.payload,y=s.state;if(r.isTransition){var T=ne.T,C={};ne.T=C;try{var I=l(y,u),q=ne.S;q!==null&&q(C,I),C_(s,r,I)}catch(K){lp(s,r,K)}finally{ne.T=T}}else try{T=l(y,u),C_(s,r,T)}catch(K){lp(s,r,K)}}function C_(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){I_(s,r,u)},function(u){return lp(s,r,u)}):I_(s,r,l)}function I_(s,r,l){r.status="fulfilled",r.value=l,R_(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,w_(s,l)))}function lp(s,r,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=l,R_(r),r=r.next;while(r!==u)}s.action=null}function R_(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function N_(s,r){return r}function x_(s,r){if(at){var l=At.formState;if(l!==null){e:{var u=ze;if(at){if(Lt){t:{for(var y=Lt,T=cs;y.nodeType!==8;){if(!T){y=null;break t}if(y=Bi(y.nextSibling),y===null){y=null;break t}}T=y.data,y=T==="F!"||T==="F"?y:null}if(y){Lt=Bi(y.nextSibling),u=y.data==="F!";break e}}Vo(u)}u=!1}u&&(r=l[0])}}return l=$n(),l.memoizedState=l.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:N_,lastRenderedState:r},l.queue=u,l=K_.bind(null,ze,u),u.dispatch=l,u=ap(!1),T=fp.bind(null,ze,!1,u.queue),u=$n(),y={state:r,dispatch:null,action:s,pending:null},u.queue=y,l=ZI.bind(null,ze,y,T,l),y.dispatch=l,u.memoizedState=s,[r,l,!1]}function b_(s){var r=jt();return P_(r,ft,s)}function P_(s,r,l){if(r=rp(s,r,N_)[0],s=rd(Gs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=rc(r)}catch(C){throw C===Zl?Zu:C}else u=r;r=jt();var y=r.queue,T=y.dispatch;return l!==r.memoizedState&&(ze.flags|=2048,Ma(9,od(),eR.bind(null,y,l),null)),[u,T,s]}function eR(s,r){s.action=r}function D_(s){var r=jt(),l=ft;if(l!==null)return P_(r,l,s);jt(),r=r.memoizedState,l=jt();var u=l.queue.dispatch;return l.memoizedState=s,[r,u,!1]}function Ma(s,r,l,u){return s={tag:s,create:l,deps:u,inst:r,next:null},r=ze.updateQueue,r===null&&(r=ip(),ze.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,r.lastEffect=s),s}function od(){return{destroy:void 0,resource:void 0}}function M_(){return jt().memoizedState}function ad(s,r,l,u){var y=$n();u=u===void 0?null:u,ze.flags|=s,y.memoizedState=Ma(1|r,od(),l,u)}function oc(s,r,l,u){var y=jt();u=u===void 0?null:u;var T=y.memoizedState.inst;ft!==null&&u!==null&&Xf(u,ft.memoizedState.deps)?y.memoizedState=Ma(r,T,l,u):(ze.flags|=s,y.memoizedState=Ma(1|r,T,l,u))}function k_(s,r){ad(8390656,8,s,r)}function V_(s,r){oc(2048,8,s,r)}function U_(s,r){return oc(4,2,s,r)}function L_(s,r){return oc(4,4,s,r)}function O_(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function F_(s,r,l){l=l!=null?l.concat([s]):null,oc(4,4,O_.bind(null,r,s),l)}function cp(){}function q_(s,r){var l=jt();r=r===void 0?null:r;var u=l.memoizedState;return r!==null&&Xf(r,u[1])?u[0]:(l.memoizedState=[s,r],s)}function B_(s,r){var l=jt();r=r===void 0?null:r;var u=l.memoizedState;if(r!==null&&Xf(r,u[1]))return u[0];if(u=s(),Fo){Sn(!0);try{s()}finally{Sn(!1)}}return l.memoizedState=[u,r],u}function up(s,r,l){return l===void 0||(Tr&1073741824)!==0?s.memoizedState=r:(s.memoizedState=l,s=zv(),ze.lanes|=s,Rr|=s,l)}function H_(s,r,l,u){return ri(l,r)?l:ba.current!==null?(s=up(s,l,u),ri(s,r)||(on=!0),s):(Tr&42)===0?(on=!0,s.memoizedState=l):(s=zv(),ze.lanes|=s,Rr|=s,r)}function G_(s,r,l,u,y){var T=pe.p;pe.p=T!==0&&8>T?T:8;var C=ne.T,I={};ne.T=I,fp(s,!1,r,l);try{var q=y(),K=ne.S;if(K!==null&&K(I,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var oe=QI(q,u);ac(s,r,oe,ui(s))}else ac(s,r,u,ui(s))}catch(ce){ac(s,r,{then:function(){},status:"rejected",reason:ce},ui())}finally{pe.p=T,ne.T=C}}function tR(){}function dp(s,r,l,u){if(s.tag!==5)throw Error(i(476));var y=z_(s).queue;G_(s,y,r,se,l===null?tR:function(){return j_(s),l(u)})}function z_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:se},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function j_(s){var r=z_(s).next.queue;ac(s,r,{},ui())}function hp(){return In(Cc)}function $_(){return jt().memoizedState}function Y_(){return jt().memoizedState}function nR(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=ui();s=_r(l);var u=vr(r,s,l);u!==null&&(di(u,r,l),tc(u,r,l)),r={cache:Hf()},s.payload=r;return}r=r.return}}function iR(s,r,l){var u=ui();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},ld(s)?J_(r,l):(l=Df(s,r,l,u),l!==null&&(di(l,s,u),Q_(l,r,u)))}function K_(s,r,l){var u=ui();ac(s,r,l,u)}function ac(s,r,l,u){var y={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(ld(s))J_(r,y);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var C=r.lastRenderedState,I=T(C,l);if(y.hasEagerState=!0,y.eagerState=I,ri(I,C))return ju(s,r,y,0),At===null&&zu(),!1}catch{}finally{}if(l=Df(s,r,y,u),l!==null)return di(l,s,u),Q_(l,r,u),!0}return!1}function fp(s,r,l,u){if(u={lane:2,revertLane:jp(),action:u,hasEagerState:!1,eagerState:null,next:null},ld(s)){if(r)throw Error(i(479))}else r=Df(s,l,u,2),r!==null&&di(r,s,2)}function ld(s){var r=s.alternate;return s===ze||r!==null&&r===ze}function J_(s,r){Pa=nd=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function Q_(s,r,l){if((l&4194048)!==0){var u=r.lanes;u&=s.pendingLanes,l|=u,r.lanes=l,yi(s,l)}}var cd={readContext:In,use:sd,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},W_={readContext:In,use:sd,useCallback:function(s,r){return $n().memoizedState=[s,r===void 0?null:r],s},useContext:In,useEffect:k_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,ad(4194308,4,O_.bind(null,r,s),l)},useLayoutEffect:function(s,r){return ad(4194308,4,s,r)},useInsertionEffect:function(s,r){ad(4,2,s,r)},useMemo:function(s,r){var l=$n();r=r===void 0?null:r;var u=s();if(Fo){Sn(!0);try{s()}finally{Sn(!1)}}return l.memoizedState=[u,r],u},useReducer:function(s,r,l){var u=$n();if(l!==void 0){var y=l(r);if(Fo){Sn(!0);try{l(r)}finally{Sn(!1)}}}else y=r;return u.memoizedState=u.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},u.queue=s,s=s.dispatch=iR.bind(null,ze,s),[u.memoizedState,s]},useRef:function(s){var r=$n();return s={current:s},r.memoizedState=s},useState:function(s){s=ap(s);var r=s.queue,l=K_.bind(null,ze,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:cp,useDeferredValue:function(s,r){var l=$n();return up(l,s,r)},useTransition:function(){var s=ap(!1);return s=G_.bind(null,ze,s.queue,!0,!1),$n().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var u=ze,y=$n();if(at){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),At===null)throw Error(i(349));(et&124)!==0||__(u,r,l)}y.memoizedState=l;var T={value:l,getSnapshot:r};return y.queue=T,k_(T_.bind(null,u,T,s),[s]),u.flags|=2048,Ma(9,od(),v_.bind(null,u,T,l,r),null),l},useId:function(){var s=$n(),r=At.identifierPrefix;if(at){var l=qs,u=Fs;l=(u&~(1<<32-Wt(u)-1)).toString(32)+l,r=""+r+"R"+l,l=id++,0<l&&(r+="H"+l.toString(32)),r+=""}else l=WI++,r=""+r+"r"+l.toString(32)+"";return s.memoizedState=r},useHostTransitionStatus:hp,useFormState:x_,useActionState:x_,useOptimistic:function(s){var r=$n();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=fp.bind(null,ze,!0,l),l.dispatch=r,[s,r]},useMemoCache:sp,useCacheRefresh:function(){return $n().memoizedState=nR.bind(null,ze)}},X_={readContext:In,use:sd,useCallback:q_,useContext:In,useEffect:V_,useImperativeHandle:F_,useInsertionEffect:U_,useLayoutEffect:L_,useMemo:B_,useReducer:rd,useRef:M_,useState:function(){return rd(Gs)},useDebugValue:cp,useDeferredValue:function(s,r){var l=jt();return H_(l,ft.memoizedState,s,r)},useTransition:function(){var s=rd(Gs)[0],r=jt().memoizedState;return[typeof s=="boolean"?s:rc(s),r]},useSyncExternalStore:y_,useId:$_,useHostTransitionStatus:hp,useFormState:b_,useActionState:b_,useOptimistic:function(s,r){var l=jt();return S_(l,ft,s,r)},useMemoCache:sp,useCacheRefresh:Y_},sR={readContext:In,use:sd,useCallback:q_,useContext:In,useEffect:V_,useImperativeHandle:F_,useInsertionEffect:U_,useLayoutEffect:L_,useMemo:B_,useReducer:op,useRef:M_,useState:function(){return op(Gs)},useDebugValue:cp,useDeferredValue:function(s,r){var l=jt();return ft===null?up(l,s,r):H_(l,ft.memoizedState,s,r)},useTransition:function(){var s=op(Gs)[0],r=jt().memoizedState;return[typeof s=="boolean"?s:rc(s),r]},useSyncExternalStore:y_,useId:$_,useHostTransitionStatus:hp,useFormState:D_,useActionState:D_,useOptimistic:function(s,r){var l=jt();return ft!==null?S_(l,ft,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:sp,useCacheRefresh:Y_},ka=null,lc=0;function ud(s){var r=lc;return lc+=1,ka===null&&(ka=[]),c_(ka,s,r)}function cc(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function dd(s,r){throw r.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Z_(s){var r=s._init;return r(s._payload)}function ev(s){function r(j,G){if(s){var $=j.deletions;$===null?(j.deletions=[G],j.flags|=16):$.push(G)}}function l(j,G){if(!s)return null;for(;G!==null;)r(j,G),G=G.sibling;return null}function u(j){for(var G=new Map;j!==null;)j.key!==null?G.set(j.key,j):G.set(j.index,j),j=j.sibling;return G}function y(j,G){return j=Os(j,G),j.index=0,j.sibling=null,j}function T(j,G,$){return j.index=$,s?($=j.alternate,$!==null?($=$.index,$<G?(j.flags|=67108866,G):$):(j.flags|=67108866,G)):(j.flags|=1048576,G)}function C(j){return s&&j.alternate===null&&(j.flags|=67108866),j}function I(j,G,$,le){return G===null||G.tag!==6?(G=kf($,j.mode,le),G.return=j,G):(G=y(G,$),G.return=j,G)}function q(j,G,$,le){var Ae=$.type;return Ae===L?oe(j,G,$.props.children,le,$.key):G!==null&&(G.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===D&&Z_(Ae)===G.type)?(G=y(G,$.props),cc(G,$),G.return=j,G):(G=Yu($.type,$.key,$.props,null,j.mode,le),cc(G,$),G.return=j,G)}function K(j,G,$,le){return G===null||G.tag!==4||G.stateNode.containerInfo!==$.containerInfo||G.stateNode.implementation!==$.implementation?(G=Vf($,j.mode,le),G.return=j,G):(G=y(G,$.children||[]),G.return=j,G)}function oe(j,G,$,le,Ae){return G===null||G.tag!==7?(G=Po($,j.mode,le,Ae),G.return=j,G):(G=y(G,$),G.return=j,G)}function ce(j,G,$){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=kf(""+G,j.mode,$),G.return=j,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return $=Yu(G.type,G.key,G.props,null,j.mode,$),cc($,G),$.return=j,$;case N:return G=Vf(G,j.mode,$),G.return=j,G;case D:var le=G._init;return G=le(G._payload),ce(j,G,$)}if(Be(G)||V(G))return G=Po(G,j.mode,$,null),G.return=j,G;if(typeof G.then=="function")return ce(j,ud(G),$);if(G.$$typeof===z)return ce(j,Wu(j,G),$);dd(j,G)}return null}function W(j,G,$,le){var Ae=G!==null?G.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ae!==null?null:I(j,G,""+$,le);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return $.key===Ae?q(j,G,$,le):null;case N:return $.key===Ae?K(j,G,$,le):null;case D:return Ae=$._init,$=Ae($._payload),W(j,G,$,le)}if(Be($)||V($))return Ae!==null?null:oe(j,G,$,le,null);if(typeof $.then=="function")return W(j,G,ud($),le);if($.$$typeof===z)return W(j,G,Wu(j,$),le);dd(j,$)}return null}function Z(j,G,$,le,Ae){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return j=j.get($)||null,I(G,j,""+le,Ae);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case A:return j=j.get(le.key===null?$:le.key)||null,q(G,j,le,Ae);case N:return j=j.get(le.key===null?$:le.key)||null,K(G,j,le,Ae);case D:var $e=le._init;return le=$e(le._payload),Z(j,G,$,le,Ae)}if(Be(le)||V(le))return j=j.get($)||null,oe(G,j,le,Ae,null);if(typeof le.then=="function")return Z(j,G,$,ud(le),Ae);if(le.$$typeof===z)return Z(j,G,$,Wu(G,le),Ae);dd(G,le)}return null}function ke(j,G,$,le){for(var Ae=null,$e=null,Re=G,De=G=0,ln=null;Re!==null&&De<$.length;De++){Re.index>De?(ln=Re,Re=null):ln=Re.sibling;var st=W(j,Re,$[De],le);if(st===null){Re===null&&(Re=ln);break}s&&Re&&st.alternate===null&&r(j,Re),G=T(st,G,De),$e===null?Ae=st:$e.sibling=st,$e=st,Re=ln}if(De===$.length)return l(j,Re),at&&Mo(j,De),Ae;if(Re===null){for(;De<$.length;De++)Re=ce(j,$[De],le),Re!==null&&(G=T(Re,G,De),$e===null?Ae=Re:$e.sibling=Re,$e=Re);return at&&Mo(j,De),Ae}for(Re=u(Re);De<$.length;De++)ln=Z(Re,j,De,$[De],le),ln!==null&&(s&&ln.alternate!==null&&Re.delete(ln.key===null?De:ln.key),G=T(ln,G,De),$e===null?Ae=ln:$e.sibling=ln,$e=ln);return s&&Re.forEach(function(Ur){return r(j,Ur)}),at&&Mo(j,De),Ae}function Pe(j,G,$,le){if($==null)throw Error(i(151));for(var Ae=null,$e=null,Re=G,De=G=0,ln=null,st=$.next();Re!==null&&!st.done;De++,st=$.next()){Re.index>De?(ln=Re,Re=null):ln=Re.sibling;var Ur=W(j,Re,st.value,le);if(Ur===null){Re===null&&(Re=ln);break}s&&Re&&Ur.alternate===null&&r(j,Re),G=T(Ur,G,De),$e===null?Ae=Ur:$e.sibling=Ur,$e=Ur,Re=ln}if(st.done)return l(j,Re),at&&Mo(j,De),Ae;if(Re===null){for(;!st.done;De++,st=$.next())st=ce(j,st.value,le),st!==null&&(G=T(st,G,De),$e===null?Ae=st:$e.sibling=st,$e=st);return at&&Mo(j,De),Ae}for(Re=u(Re);!st.done;De++,st=$.next())st=Z(Re,j,De,st.value,le),st!==null&&(s&&st.alternate!==null&&Re.delete(st.key===null?De:st.key),G=T(st,G,De),$e===null?Ae=st:$e.sibling=st,$e=st);return s&&Re.forEach(function(rN){return r(j,rN)}),at&&Mo(j,De),Ae}function mt(j,G,$,le){if(typeof $=="object"&&$!==null&&$.type===L&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case A:e:{for(var Ae=$.key;G!==null;){if(G.key===Ae){if(Ae=$.type,Ae===L){if(G.tag===7){l(j,G.sibling),le=y(G,$.props.children),le.return=j,j=le;break e}}else if(G.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===D&&Z_(Ae)===G.type){l(j,G.sibling),le=y(G,$.props),cc(le,$),le.return=j,j=le;break e}l(j,G);break}else r(j,G);G=G.sibling}$.type===L?(le=Po($.props.children,j.mode,le,$.key),le.return=j,j=le):(le=Yu($.type,$.key,$.props,null,j.mode,le),cc(le,$),le.return=j,j=le)}return C(j);case N:e:{for(Ae=$.key;G!==null;){if(G.key===Ae)if(G.tag===4&&G.stateNode.containerInfo===$.containerInfo&&G.stateNode.implementation===$.implementation){l(j,G.sibling),le=y(G,$.children||[]),le.return=j,j=le;break e}else{l(j,G);break}else r(j,G);G=G.sibling}le=Vf($,j.mode,le),le.return=j,j=le}return C(j);case D:return Ae=$._init,$=Ae($._payload),mt(j,G,$,le)}if(Be($))return ke(j,G,$,le);if(V($)){if(Ae=V($),typeof Ae!="function")throw Error(i(150));return $=Ae.call($),Pe(j,G,$,le)}if(typeof $.then=="function")return mt(j,G,ud($),le);if($.$$typeof===z)return mt(j,G,Wu(j,$),le);dd(j,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,G!==null&&G.tag===6?(l(j,G.sibling),le=y(G,$),le.return=j,j=le):(l(j,G),le=kf($,j.mode,le),le.return=j,j=le),C(j)):l(j,G)}return function(j,G,$,le){try{lc=0;var Ae=mt(j,G,$,le);return ka=null,Ae}catch(Re){if(Re===Zl||Re===Zu)throw Re;var $e=oi(29,Re,null,j.mode);return $e.lanes=le,$e.return=j,$e}finally{}}}var Va=ev(!0),tv=ev(!1),Ci=ie(null),us=null;function Er(s){var r=s.alternate;fe(nn,nn.current&1),fe(Ci,s),us===null&&(r===null||ba.current!==null||r.memoizedState!==null)&&(us=s)}function nv(s){if(s.tag===22){if(fe(nn,nn.current),fe(Ci,s),us===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(us=s)}}else Ar()}function Ar(){fe(nn,nn.current),fe(Ci,Ci.current)}function zs(s){de(Ci),us===s&&(us=null),de(nn)}var nn=ie(0);function hd(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||im(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function pp(s,r,l,u){r=s.memoizedState,l=l(u,r),l=l==null?r:v({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var mp={enqueueSetState:function(s,r,l){s=s._reactInternals;var u=ui(),y=_r(u);y.payload=r,l!=null&&(y.callback=l),r=vr(s,y,u),r!==null&&(di(r,s,u),tc(r,s,u))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var u=ui(),y=_r(u);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=vr(s,y,u),r!==null&&(di(r,s,u),tc(r,s,u))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=ui(),u=_r(l);u.tag=2,r!=null&&(u.callback=r),r=vr(s,u,l),r!==null&&(di(r,s,l),tc(r,s,l))}};function iv(s,r,l,u,y,T,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,T,C):r.prototype&&r.prototype.isPureReactComponent?!jl(l,u)||!jl(y,T):!0}function sv(s,r,l,u){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,u),r.state!==s&&mp.enqueueReplaceState(r,r.state,null)}function qo(s,r){var l=r;if("ref"in r){l={};for(var u in r)u!=="ref"&&(l[u]=r[u])}if(s=s.defaultProps){l===r&&(l=v({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}var fd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function rv(s){fd(s)}function ov(s){console.error(s)}function av(s){fd(s)}function pd(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function lv(s,r,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function gp(s,r,l){return l=_r(l),l.tag=3,l.payload={element:null},l.callback=function(){pd(s,r)},l}function cv(s){return s=_r(s),s.tag=3,s}function uv(s,r,l,u){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var T=u.value;s.payload=function(){return y(T)},s.callback=function(){lv(r,l,u)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){lv(r,l,u),typeof y!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function rR(s,r,l,u,y){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=l.alternate,r!==null&&Ql(r,l,y,!0),l=Ci.current,l!==null){switch(l.tag){case 13:return us===null?qp():l.alternate===null&&Ot===0&&(Ot=3),l.flags&=-257,l.flags|=65536,l.lanes=y,u===jf?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([u]):r.add(u),Hp(s,u,y)),!1;case 22:return l.flags|=65536,u===jf?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([u]):l.add(u)),Hp(s,u,y)),!1}throw Error(i(435,l.tag))}return Hp(s,u,y),qp(),!1}if(at)return r=Ci.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,u!==Of&&(s=Error(i(422),{cause:u}),Jl(Ei(s,l)))):(u!==Of&&(r=Error(i(423),{cause:u}),Jl(Ei(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,u=Ei(u,l),y=gp(s.stateNode,u,y),Kf(s,y),Ot!==4&&(Ot=2)),!1;var T=Error(i(520),{cause:u});if(T=Ei(T,l),gc===null?gc=[T]:gc.push(T),Ot!==4&&(Ot=2),r===null)return!0;u=Ei(u,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=gp(l.stateNode,u,s),Kf(l,s),!1;case 1:if(r=l.type,T=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Nr===null||!Nr.has(T))))return l.flags|=65536,y&=-y,l.lanes|=y,y=cv(y),uv(y,s,l,u),Kf(l,y),!1}l=l.return}while(l!==null);return!1}var dv=Error(i(461)),on=!1;function gn(s,r,l,u){r.child=s===null?tv(r,null,l,u):Va(r,s.child,l,u)}function hv(s,r,l,u,y){l=l.render;var T=r.ref;if("ref"in u){var C={};for(var I in u)I!=="ref"&&(C[I]=u[I])}else C=u;return Lo(r),u=Zf(s,r,l,C,T,y),I=ep(),s!==null&&!on?(tp(s,r,y),js(s,r,y)):(at&&I&&Uf(r),r.flags|=1,gn(s,r,u,y),r.child)}function fv(s,r,l,u,y){if(s===null){var T=l.type;return typeof T=="function"&&!Mf(T)&&T.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=T,pv(s,r,T,u,y)):(s=Yu(l.type,null,u,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(T=s.child,!wp(s,y)){var C=T.memoizedProps;if(l=l.compare,l=l!==null?l:jl,l(C,u)&&s.ref===r.ref)return js(s,r,y)}return r.flags|=1,s=Os(T,u),s.ref=r.ref,s.return=r,r.child=s}function pv(s,r,l,u,y){if(s!==null){var T=s.memoizedProps;if(jl(T,u)&&s.ref===r.ref)if(on=!1,r.pendingProps=u=T,wp(s,y))(s.flags&131072)!==0&&(on=!0);else return r.lanes=s.lanes,js(s,r,y)}return yp(s,r,l,u,y)}function mv(s,r,l){var u=r.pendingProps,y=u.children,T=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=T!==null?T.baseLanes|l:l,s!==null){for(y=r.child=s.child,T=0;y!==null;)T=T|y.lanes|y.childLanes,y=y.sibling;r.childLanes=T&~u}else r.childLanes=0,r.child=null;return gv(s,r,u,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Xu(r,T!==null?T.cachePool:null),T!==null?p_(r,T):Qf(),nv(r);else return r.lanes=r.childLanes=536870912,gv(s,r,T!==null?T.baseLanes|l:l,l)}else T!==null?(Xu(r,T.cachePool),p_(r,T),Ar(),r.memoizedState=null):(s!==null&&Xu(r,null),Qf(),Ar());return gn(s,r,y,l),r.child}function gv(s,r,l,u){var y=zf();return y=y===null?null:{parent:tn._currentValue,pool:y},r.memoizedState={baseLanes:l,cachePool:y},s!==null&&Xu(r,null),Qf(),nv(r),s!==null&&Ql(s,r,u,!0),null}function md(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function yp(s,r,l,u,y){return Lo(r),l=Zf(s,r,l,u,void 0,y),u=ep(),s!==null&&!on?(tp(s,r,y),js(s,r,y)):(at&&u&&Uf(r),r.flags|=1,gn(s,r,l,y),r.child)}function yv(s,r,l,u,y,T){return Lo(r),r.updateQueue=null,l=g_(r,u,l,y),m_(s),u=ep(),s!==null&&!on?(tp(s,r,T),js(s,r,T)):(at&&u&&Uf(r),r.flags|=1,gn(s,r,l,T),r.child)}function _v(s,r,l,u,y){if(Lo(r),r.stateNode===null){var T=Ca,C=l.contextType;typeof C=="object"&&C!==null&&(T=In(C)),T=new l(u,T),r.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=mp,r.stateNode=T,T._reactInternals=r,T=r.stateNode,T.props=u,T.state=r.memoizedState,T.refs={},$f(r),C=l.contextType,T.context=typeof C=="object"&&C!==null?In(C):Ca,T.state=r.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(pp(r,l,C,u),T.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(C=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),C!==T.state&&mp.enqueueReplaceState(T,T.state,null),ic(r,u,T,y),nc(),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(s===null){T=r.stateNode;var I=r.memoizedProps,q=qo(l,I);T.props=q;var K=T.context,oe=l.contextType;C=Ca,typeof oe=="object"&&oe!==null&&(C=In(oe));var ce=l.getDerivedStateFromProps;oe=typeof ce=="function"||typeof T.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,oe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I||K!==C)&&sv(r,T,u,C),yr=!1;var W=r.memoizedState;T.state=W,ic(r,u,T,y),nc(),K=r.memoizedState,I||W!==K||yr?(typeof ce=="function"&&(pp(r,l,ce,u),K=r.memoizedState),(q=yr||iv(r,l,q,u,W,K,C))?(oe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=K),T.props=u,T.state=K,T.context=C,u=q):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{T=r.stateNode,Yf(s,r),C=r.memoizedProps,oe=qo(l,C),T.props=oe,ce=r.pendingProps,W=T.context,K=l.contextType,q=Ca,typeof K=="object"&&K!==null&&(q=In(K)),I=l.getDerivedStateFromProps,(K=typeof I=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==ce||W!==q)&&sv(r,T,u,q),yr=!1,W=r.memoizedState,T.state=W,ic(r,u,T,y),nc();var Z=r.memoizedState;C!==ce||W!==Z||yr||s!==null&&s.dependencies!==null&&Qu(s.dependencies)?(typeof I=="function"&&(pp(r,l,I,u),Z=r.memoizedState),(oe=yr||iv(r,l,oe,u,W,Z,q)||s!==null&&s.dependencies!==null&&Qu(s.dependencies))?(K||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(u,Z,q),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(u,Z,q)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Z),T.props=u,T.state=Z,T.context=q,u=oe):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(r.flags|=1024),u=!1)}return T=u,md(s,r),u=(r.flags&128)!==0,T||u?(T=r.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:T.render(),r.flags|=1,s!==null&&u?(r.child=Va(r,s.child,null,y),r.child=Va(r,null,l,y)):gn(s,r,l,y),r.memoizedState=T.state,s=r.child):s=js(s,r,y),s}function vv(s,r,l,u){return Kl(),r.flags|=256,gn(s,r,l,u),r.child}var _p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vp(s){return{baseLanes:s,cachePool:o_()}}function Tp(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Ii),s}function Tv(s,r,l){var u=r.pendingProps,y=!1,T=(r.flags&128)!==0,C;if((C=T)||(C=s!==null&&s.memoizedState===null?!1:(nn.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,s===null){if(at){if(y?Er(r):Ar(),at){var I=Lt,q;if(q=I){e:{for(q=I,I=cs;q.nodeType!==8;){if(!I){I=null;break e}if(q=Bi(q.nextSibling),q===null){I=null;break e}}I=q}I!==null?(r.memoizedState={dehydrated:I,treeContext:Do!==null?{id:Fs,overflow:qs}:null,retryLane:536870912,hydrationErrors:null},q=oi(18,null,null,0),q.stateNode=I,q.return=r,r.child=q,Bn=r,Lt=null,q=!0):q=!1}q||Vo(r)}if(I=r.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return im(I)?r.lanes=32:r.lanes=536870912,null;zs(r)}return I=u.children,u=u.fallback,y?(Ar(),y=r.mode,I=gd({mode:"hidden",children:I},y),u=Po(u,y,l,null),I.return=r,u.return=r,I.sibling=u,r.child=I,y=r.child,y.memoizedState=vp(l),y.childLanes=Tp(s,C,l),r.memoizedState=_p,u):(Er(r),Ep(r,I))}if(q=s.memoizedState,q!==null&&(I=q.dehydrated,I!==null)){if(T)r.flags&256?(Er(r),r.flags&=-257,r=Ap(s,r,l)):r.memoizedState!==null?(Ar(),r.child=s.child,r.flags|=128,r=null):(Ar(),y=u.fallback,I=r.mode,u=gd({mode:"visible",children:u.children},I),y=Po(y,I,l,null),y.flags|=2,u.return=r,y.return=r,u.sibling=y,r.child=u,Va(r,s.child,null,l),u=r.child,u.memoizedState=vp(l),u.childLanes=Tp(s,C,l),r.memoizedState=_p,r=y);else if(Er(r),im(I)){if(C=I.nextSibling&&I.nextSibling.dataset,C)var K=C.dgst;C=K,u=Error(i(419)),u.stack="",u.digest=C,Jl({value:u,source:null,stack:null}),r=Ap(s,r,l)}else if(on||Ql(s,r,l,!1),C=(l&s.childLanes)!==0,on||C){if(C=At,C!==null&&(u=l&-l,u=(u&42)!==0?1:Ds(u),u=(u&(C.suspendedLanes|l))!==0?0:u,u!==0&&u!==q.retryLane))throw q.retryLane=u,wa(s,u),di(C,s,u),dv;I.data==="$?"||qp(),r=Ap(s,r,l)}else I.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=q.treeContext,Lt=Bi(I.nextSibling),Bn=r,at=!0,ko=null,cs=!1,s!==null&&(Si[wi++]=Fs,Si[wi++]=qs,Si[wi++]=Do,Fs=s.id,qs=s.overflow,Do=r),r=Ep(r,u.children),r.flags|=4096);return r}return y?(Ar(),y=u.fallback,I=r.mode,q=s.child,K=q.sibling,u=Os(q,{mode:"hidden",children:u.children}),u.subtreeFlags=q.subtreeFlags&65011712,K!==null?y=Os(K,y):(y=Po(y,I,l,null),y.flags|=2),y.return=r,u.return=r,u.sibling=y,r.child=u,u=y,y=r.child,I=s.child.memoizedState,I===null?I=vp(l):(q=I.cachePool,q!==null?(K=tn._currentValue,q=q.parent!==K?{parent:K,pool:K}:q):q=o_(),I={baseLanes:I.baseLanes|l,cachePool:q}),y.memoizedState=I,y.childLanes=Tp(s,C,l),r.memoizedState=_p,u):(Er(r),l=s.child,s=l.sibling,l=Os(l,{mode:"visible",children:u.children}),l.return=r,l.sibling=null,s!==null&&(C=r.deletions,C===null?(r.deletions=[s],r.flags|=16):C.push(s)),r.child=l,r.memoizedState=null,l)}function Ep(s,r){return r=gd({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function gd(s,r){return s=oi(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ap(s,r,l){return Va(r,s.child,null,l),s=Ep(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Ev(s,r,l){s.lanes|=r;var u=s.alternate;u!==null&&(u.lanes|=r),qf(s.return,r,l)}function Sp(s,r,l,u,y){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:y}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=l,T.tailMode=y)}function Av(s,r,l){var u=r.pendingProps,y=u.revealOrder,T=u.tail;if(gn(s,r,u.children,l),u=nn.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ev(s,l,r);else if(s.tag===19)Ev(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(fe(nn,u),y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&hd(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Sp(r,!1,y,l,T);break;case"backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&hd(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Sp(r,!0,l,null,T);break;case"together":Sp(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function js(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Rr|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Ql(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Os(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Os(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function wp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Qu(s)))}function oR(s,r,l){switch(r.tag){case 3:Qe(r,r.stateNode.containerInfo),gr(r,tn,s.memoizedState.cache),Kl();break;case 27:case 5:yt(r);break;case 4:Qe(r,r.stateNode.containerInfo);break;case 10:gr(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Er(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Tv(s,r,l):(Er(r),s=js(s,r,l),s!==null?s.sibling:null);Er(r);break;case 19:var y=(s.flags&128)!==0;if(u=(l&r.childLanes)!==0,u||(Ql(s,r,l,!1),u=(l&r.childLanes)!==0),y){if(u)return Av(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(nn,nn.current),u)break;return null;case 22:case 23:return r.lanes=0,mv(s,r,l);case 24:gr(r,tn,s.memoizedState.cache)}return js(s,r,l)}function Sv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)on=!0;else{if(!wp(s,l)&&(r.flags&128)===0)return on=!1,oR(s,r,l);on=(s.flags&131072)!==0}else on=!1,at&&(r.flags&1048576)!==0&&Zy(r,Ju,r.index);switch(r.lanes=0,r.tag){case 16:e:{s=r.pendingProps;var u=r.elementType,y=u._init;if(u=y(u._payload),r.type=u,typeof u=="function")Mf(u)?(s=qo(u,s),r.tag=1,r=_v(null,r,u,s,l)):(r.tag=0,r=yp(null,r,u,s,l));else{if(u!=null){if(y=u.$$typeof,y===re){r.tag=11,r=hv(null,r,u,s,l);break e}else if(y===O){r.tag=14,r=fv(null,r,u,s,l);break e}}throw r=we(u)||u,Error(i(306,r,""))}}return r;case 0:return yp(s,r,r.type,r.pendingProps,l);case 1:return u=r.type,y=qo(u,r.pendingProps),_v(s,r,u,y,l);case 3:e:{if(Qe(r,r.stateNode.containerInfo),s===null)throw Error(i(387));u=r.pendingProps;var T=r.memoizedState;y=T.element,Yf(s,r),ic(r,u,null,l);var C=r.memoizedState;if(u=C.cache,gr(r,tn,u),u!==T.cache&&Bf(r,[tn],l,!0),nc(),u=C.element,T.isDehydrated)if(T={element:u,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){r=vv(s,r,u,l);break e}else if(u!==y){y=Ei(Error(i(424)),r),Jl(y),r=vv(s,r,u,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Lt=Bi(s.firstChild),Bn=r,at=!0,ko=null,cs=!0,l=tv(r,null,u,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Kl(),u===y){r=js(s,r,l);break e}gn(s,r,u,l)}r=r.child}return r;case 26:return md(s,r),s===null?(l=RT(r.type,null,r.pendingProps,null))?r.memoizedState=l:at||(l=r.type,s=r.pendingProps,u=bd(Ce.current).createElement(l),u[it]=r,u[vt]=s,_n(u,l,s),Dt(u),r.stateNode=u):r.memoizedState=RT(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return yt(r),s===null&&at&&(u=r.stateNode=wT(r.type,r.pendingProps,Ce.current),Bn=r,cs=!0,y=Lt,Pr(r.type)?(sm=y,Lt=Bi(u.firstChild)):Lt=y),gn(s,r,r.pendingProps.children,l),md(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&at&&((y=u=Lt)&&(u=kR(u,r.type,r.pendingProps,cs),u!==null?(r.stateNode=u,Bn=r,Lt=Bi(u.firstChild),cs=!1,y=!0):y=!1),y||Vo(r)),yt(r),y=r.type,T=r.pendingProps,C=s!==null?s.memoizedProps:null,u=T.children,em(y,T)?u=null:C!==null&&em(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=Zf(s,r,XI,null,null,l),Cc._currentValue=y),md(s,r),gn(s,r,u,l),r.child;case 6:return s===null&&at&&((s=l=Lt)&&(l=VR(l,r.pendingProps,cs),l!==null?(r.stateNode=l,Bn=r,Lt=null,s=!0):s=!1),s||Vo(r)),null;case 13:return Tv(s,r,l);case 4:return Qe(r,r.stateNode.containerInfo),u=r.pendingProps,s===null?r.child=Va(r,null,u,l):gn(s,r,u,l),r.child;case 11:return hv(s,r,r.type,r.pendingProps,l);case 7:return gn(s,r,r.pendingProps,l),r.child;case 8:return gn(s,r,r.pendingProps.children,l),r.child;case 12:return gn(s,r,r.pendingProps.children,l),r.child;case 10:return u=r.pendingProps,gr(r,r.type,u.value),gn(s,r,u.children,l),r.child;case 9:return y=r.type._context,u=r.pendingProps.children,Lo(r),y=In(y),u=u(y),r.flags|=1,gn(s,r,u,l),r.child;case 14:return fv(s,r,r.type,r.pendingProps,l);case 15:return pv(s,r,r.type,r.pendingProps,l);case 19:return Av(s,r,l);case 31:return u=r.pendingProps,l=r.mode,u={mode:u.mode,children:u.children},s===null?(l=gd(u,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=Os(s.child,u),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return mv(s,r,l);case 24:return Lo(r),u=In(tn),s===null?(y=zf(),y===null&&(y=At,T=Hf(),y.pooledCache=T,T.refCount++,T!==null&&(y.pooledCacheLanes|=l),y=T),r.memoizedState={parent:u,cache:y},$f(r),gr(r,tn,y)):((s.lanes&l)!==0&&(Yf(s,r),ic(r,null,null,l),nc()),y=s.memoizedState,T=r.memoizedState,y.parent!==u?(y={parent:u,cache:u},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),gr(r,tn,u)):(u=T.cache,gr(r,tn,u),u!==y.cache&&Bf(r,[tn],l,!0))),gn(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function $s(s){s.flags|=4}function wv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!DT(r)){if(r=Ci.current,r!==null&&((et&4194048)===et?us!==null:(et&62914560)!==et&&(et&536870912)===0||r!==us))throw ec=jf,a_;s.flags|=8192}}function yd(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?ni():536870912,s.lanes|=r,Fa|=r)}function uc(s,r){if(!at)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function kt(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=u,s.childLanes=l,r}function aR(s,r,l){var u=r.pendingProps;switch(Lf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(r),null;case 1:return kt(r),null;case 3:return l=r.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Hs(tn),Rt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Yl(r)?$s(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,n_())),kt(r),null;case 26:return l=r.memoizedState,s===null?($s(r),l!==null?(kt(r),wv(r,l)):(kt(r),r.flags&=-16777217)):l?l!==s.memoizedState?($s(r),kt(r),wv(r,l)):(kt(r),r.flags&=-16777217):(s.memoizedProps!==u&&$s(r),kt(r),r.flags&=-16777217),null;case 27:Qt(r),l=Ce.current;var y=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==u&&$s(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return kt(r),null}s=_e.current,Yl(r)?e_(r):(s=wT(y,u,l),r.stateNode=s,$s(r))}return kt(r),null;case 5:if(Qt(r),l=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==u&&$s(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return kt(r),null}if(s=_e.current,Yl(r))e_(r);else{switch(y=bd(Ce.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?y.createElement("select",{is:u.is}):y.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?y.createElement(l,{is:u.is}):y.createElement(l)}}s[it]=r,s[vt]=u;e:for(y=r.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===r)break e;for(;y.sibling===null;){if(y.return===null||y.return===r)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}r.stateNode=s;e:switch(_n(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&$s(r)}}return kt(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==u&&$s(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(s=Ce.current,Yl(r)){if(s=r.stateNode,l=r.memoizedProps,u=null,y=Bn,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}s[it]=r,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||yT(s.nodeValue,l)),s||Vo(r)}else s=bd(s).createTextNode(u),s[it]=r,r.stateNode=s}return kt(r),null;case 13:if(u=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Yl(r),u!==null&&u.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[it]=r}else Kl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;kt(r),y=!1}else y=n_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(zs(r),r):(zs(r),null)}if(zs(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=r.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool);var T=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(T=u.memoizedState.cachePool.pool),T!==y&&(u.flags|=2048)}return l!==s&&l&&(r.child.flags|=8192),yd(r,r.updateQueue),kt(r),null;case 4:return Rt(),s===null&&Jp(r.stateNode.containerInfo),kt(r),null;case 10:return Hs(r.type),kt(r),null;case 19:if(de(nn),y=r.memoizedState,y===null)return kt(r),null;if(u=(r.flags&128)!==0,T=y.rendering,T===null)if(u)uc(y,!1);else{if(Ot!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(T=hd(s),T!==null){for(r.flags|=128,uc(y,!1),s=T.updateQueue,r.updateQueue=s,yd(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)Xy(l,s),l=l.sibling;return fe(nn,nn.current&1|2),r.child}s=s.sibling}y.tail!==null&&bt()>Td&&(r.flags|=128,u=!0,uc(y,!1),r.lanes=4194304)}else{if(!u)if(s=hd(T),s!==null){if(r.flags|=128,u=!0,s=s.updateQueue,r.updateQueue=s,yd(r,s),uc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!at)return kt(r),null}else 2*bt()-y.renderingStartTime>Td&&l!==536870912&&(r.flags|=128,u=!0,uc(y,!1),r.lanes=4194304);y.isBackwards?(T.sibling=r.child,r.child=T):(s=y.last,s!==null?s.sibling=T:r.child=T,y.last=T)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=bt(),r.sibling=null,s=nn.current,fe(nn,u?s&1|2:s&1),r):(kt(r),null);case 22:case 23:return zs(r),Wf(),u=r.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(l&536870912)!==0&&(r.flags&128)===0&&(kt(r),r.subtreeFlags&6&&(r.flags|=8192)):kt(r),l=r.updateQueue,l!==null&&yd(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==l&&(r.flags|=2048),s!==null&&de(Oo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Hs(tn),kt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function lR(s,r){switch(Lf(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Hs(tn),Rt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Qt(r),null;case 13:if(zs(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Kl()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return de(nn),null;case 4:return Rt(),null;case 10:return Hs(r.type),null;case 22:case 23:return zs(r),Wf(),s!==null&&de(Oo),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Hs(tn),null;case 25:return null;default:return null}}function Cv(s,r){switch(Lf(r),r.tag){case 3:Hs(tn),Rt();break;case 26:case 27:case 5:Qt(r);break;case 4:Rt();break;case 13:zs(r);break;case 19:de(nn);break;case 10:Hs(r.type);break;case 22:case 23:zs(r),Wf(),s!==null&&de(Oo);break;case 24:Hs(tn)}}function dc(s,r){try{var l=r.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var y=u.next;l=y;do{if((l.tag&s)===s){u=void 0;var T=l.create,C=l.inst;u=T(),C.destroy=u}l=l.next}while(l!==y)}}catch(I){Tt(r,r.return,I)}}function Sr(s,r,l){try{var u=r.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var T=y.next;u=T;do{if((u.tag&s)===s){var C=u.inst,I=C.destroy;if(I!==void 0){C.destroy=void 0,y=r;var q=l,K=I;try{K()}catch(oe){Tt(y,q,oe)}}}u=u.next}while(u!==T)}}catch(oe){Tt(r,r.return,oe)}}function Iv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{f_(r,l)}catch(u){Tt(s,s.return,u)}}}function Rv(s,r,l){l.props=qo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){Tt(s,r,u)}}function hc(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(y){Tt(s,r,y)}}function ds(s,r){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(y){Tt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){Tt(s,r,y)}else l.current=null}function Nv(s){var r=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(y){Tt(s,s.return,y)}}function Cp(s,r,l){try{var u=s.stateNode;xR(u,s.type,l,r),u[vt]=r}catch(y){Tt(s,s.return,y)}}function xv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Pr(s.type)||s.tag===4}function Ip(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||xv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Pr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Rp(s,r,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=xd));else if(u!==4&&(u===27&&Pr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Rp(s,r,l),s=s.sibling;s!==null;)Rp(s,r,l),s=s.sibling}function _d(s,r,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(u!==4&&(u===27&&Pr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(_d(s,r,l),s=s.sibling;s!==null;)_d(s,r,l),s=s.sibling}function bv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);_n(r,u,l),r[it]=s,r[vt]=l}catch(T){Tt(s,s.return,T)}}var Ys=!1,Bt=!1,Np=!1,Pv=typeof WeakSet=="function"?WeakSet:Set,an=null;function cR(s,r){if(s=s.containerInfo,Xp=Ud,s=Hy(s),If(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var y=u.anchorOffset,T=u.focusNode;u=u.focusOffset;try{l.nodeType,T.nodeType}catch{l=null;break e}var C=0,I=-1,q=-1,K=0,oe=0,ce=s,W=null;t:for(;;){for(var Z;ce!==l||y!==0&&ce.nodeType!==3||(I=C+y),ce!==T||u!==0&&ce.nodeType!==3||(q=C+u),ce.nodeType===3&&(C+=ce.nodeValue.length),(Z=ce.firstChild)!==null;)W=ce,ce=Z;for(;;){if(ce===s)break t;if(W===l&&++K===y&&(I=C),W===T&&++oe===u&&(q=C),(Z=ce.nextSibling)!==null)break;ce=W,W=ce.parentNode}ce=Z}l=I===-1||q===-1?null:{start:I,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zp={focusedElem:s,selectionRange:l},Ud=!1,an=r;an!==null;)if(r=an,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,an=s;else for(;an!==null;){switch(r=an,T=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,l=r,y=T.memoizedProps,T=T.memoizedState,u=l.stateNode;try{var ke=qo(l.type,y,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(ke,T),u.__reactInternalSnapshotBeforeUpdate=s}catch(Pe){Tt(l,l.return,Pe)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)nm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":nm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,an=s;break}an=r.return}}function Dv(s,r,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:wr(s,l),u&4&&dc(5,l);break;case 1:if(wr(s,l),u&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(C){Tt(l,l.return,C)}else{var y=qo(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(C){Tt(l,l.return,C)}}u&64&&Iv(l),u&512&&hc(l,l.return);break;case 3:if(wr(s,l),u&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{f_(s,r)}catch(C){Tt(l,l.return,C)}}break;case 27:r===null&&u&4&&bv(l);case 26:case 5:wr(s,l),r===null&&u&4&&Nv(l),u&512&&hc(l,l.return);break;case 12:wr(s,l);break;case 13:wr(s,l),u&4&&Vv(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=_R.bind(null,l),UR(s,l))));break;case 22:if(u=l.memoizedState!==null||Ys,!u){r=r!==null&&r.memoizedState!==null||Bt,y=Ys;var T=Bt;Ys=u,(Bt=r)&&!T?Cr(s,l,(l.subtreeFlags&8772)!==0):wr(s,l),Ys=y,Bt=T}break;case 30:break;default:wr(s,l)}}function Mv(s){var r=s.alternate;r!==null&&(s.alternate=null,Mv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&ge(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Nt=null,Yn=!1;function Ks(s,r,l){for(l=l.child;l!==null;)kv(s,r,l),l=l.sibling}function kv(s,r,l){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(kn,l)}catch{}switch(l.tag){case 26:Bt||ds(l,r),Ks(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Bt||ds(l,r);var u=Nt,y=Yn;Pr(l.type)&&(Nt=l.stateNode,Yn=!1),Ks(s,r,l),Ec(l.stateNode),Nt=u,Yn=y;break;case 5:Bt||ds(l,r);case 6:if(u=Nt,y=Yn,Nt=null,Ks(s,r,l),Nt=u,Yn=y,Nt!==null)if(Yn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(l.stateNode)}catch(T){Tt(l,r,T)}else try{Nt.removeChild(l.stateNode)}catch(T){Tt(l,r,T)}break;case 18:Nt!==null&&(Yn?(s=Nt,AT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),xc(s)):AT(Nt,l.stateNode));break;case 4:u=Nt,y=Yn,Nt=l.stateNode.containerInfo,Yn=!0,Ks(s,r,l),Nt=u,Yn=y;break;case 0:case 11:case 14:case 15:Bt||Sr(2,l,r),Bt||Sr(4,l,r),Ks(s,r,l);break;case 1:Bt||(ds(l,r),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Rv(l,r,u)),Ks(s,r,l);break;case 21:Ks(s,r,l);break;case 22:Bt=(u=Bt)||l.memoizedState!==null,Ks(s,r,l),Bt=u;break;default:Ks(s,r,l)}}function Vv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{xc(s)}catch(l){Tt(r,r.return,l)}}function uR(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Pv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Pv),r;default:throw Error(i(435,s.tag))}}function xp(s,r){var l=uR(s);r.forEach(function(u){var y=vR.bind(null,s,u);l.has(u)||(l.add(u),u.then(y,y))})}function ai(s,r){var l=r.deletions;if(l!==null)for(var u=0;u<l.length;u++){var y=l[u],T=s,C=r,I=C;e:for(;I!==null;){switch(I.tag){case 27:if(Pr(I.type)){Nt=I.stateNode,Yn=!1;break e}break;case 5:Nt=I.stateNode,Yn=!1;break e;case 3:case 4:Nt=I.stateNode.containerInfo,Yn=!0;break e}I=I.return}if(Nt===null)throw Error(i(160));kv(T,C,y),Nt=null,Yn=!1,T=y.alternate,T!==null&&(T.return=null),y.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Uv(r,s),r=r.sibling}var qi=null;function Uv(s,r){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ai(r,s),li(s),u&4&&(Sr(3,s,s.return),dc(3,s),Sr(5,s,s.return));break;case 1:ai(r,s),li(s),u&512&&(Bt||l===null||ds(l,l.return)),u&64&&Ys&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var y=qi;if(ai(r,s),li(s),u&512&&(Bt||l===null||ds(l,l.return)),u&4){var T=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":T=y.getElementsByTagName("title")[0],(!T||T[J]||T[it]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=y.createElement(u),y.head.insertBefore(T,y.querySelector("head > title"))),_n(T,u,l),T[it]=s,Dt(T),u=T;break e;case"link":var C=bT("link","href",y).get(u+(l.href||""));if(C){for(var I=0;I<C.length;I++)if(T=C[I],T.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&T.getAttribute("rel")===(l.rel==null?null:l.rel)&&T.getAttribute("title")===(l.title==null?null:l.title)&&T.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(I,1);break t}}T=y.createElement(u),_n(T,u,l),y.head.appendChild(T);break;case"meta":if(C=bT("meta","content",y).get(u+(l.content||""))){for(I=0;I<C.length;I++)if(T=C[I],T.getAttribute("content")===(l.content==null?null:""+l.content)&&T.getAttribute("name")===(l.name==null?null:l.name)&&T.getAttribute("property")===(l.property==null?null:l.property)&&T.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&T.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(I,1);break t}}T=y.createElement(u),_n(T,u,l),y.head.appendChild(T);break;default:throw Error(i(468,u))}T[it]=s,Dt(T),u=T}s.stateNode=u}else PT(y,s.type,s.stateNode);else s.stateNode=xT(y,u,s.memoizedProps);else T!==u?(T===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):T.count--,u===null?PT(y,s.type,s.stateNode):xT(y,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Cp(s,s.memoizedProps,l.memoizedProps)}break;case 27:ai(r,s),li(s),u&512&&(Bt||l===null||ds(l,l.return)),l!==null&&u&4&&Cp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(ai(r,s),li(s),u&512&&(Bt||l===null||ds(l,l.return)),s.flags&32){y=s.stateNode;try{vi(y,"")}catch(Z){Tt(s,s.return,Z)}}u&4&&s.stateNode!=null&&(y=s.memoizedProps,Cp(s,y,l!==null?l.memoizedProps:y)),u&1024&&(Np=!0);break;case 6:if(ai(r,s),li(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(Z){Tt(s,s.return,Z)}}break;case 3:if(Md=null,y=qi,qi=Pd(r.containerInfo),ai(r,s),qi=y,li(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{xc(r.containerInfo)}catch(Z){Tt(s,s.return,Z)}Np&&(Np=!1,Lv(s));break;case 4:u=qi,qi=Pd(s.stateNode.containerInfo),ai(r,s),li(s),qi=u;break;case 12:ai(r,s),li(s);break;case 13:ai(r,s),li(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Vp=bt()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,xp(s,u)));break;case 22:y=s.memoizedState!==null;var q=l!==null&&l.memoizedState!==null,K=Ys,oe=Bt;if(Ys=K||y,Bt=oe||q,ai(r,s),Bt=oe,Ys=K,li(s),u&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||q||Ys||Bt||Bo(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){q=l=r;try{if(T=q.stateNode,y)C=T.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{I=q.stateNode;var ce=q.memoizedProps.style,W=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;I.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Z){Tt(q,q.return,Z)}}}else if(r.tag===6){if(l===null){q=r;try{q.stateNode.nodeValue=y?"":q.memoizedProps}catch(Z){Tt(q,q.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,xp(s,l))));break;case 19:ai(r,s),li(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,xp(s,u)));break;case 30:break;case 21:break;default:ai(r,s),li(s)}}function li(s){var r=s.flags;if(r&2){try{for(var l,u=s.return;u!==null;){if(xv(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,T=Ip(s);_d(s,T,y);break;case 5:var C=l.stateNode;l.flags&32&&(vi(C,""),l.flags&=-33);var I=Ip(s);_d(s,I,C);break;case 3:case 4:var q=l.stateNode.containerInfo,K=Ip(s);Rp(s,K,q);break;default:throw Error(i(161))}}catch(oe){Tt(s,s.return,oe)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Lv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Lv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function wr(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Dv(s,r.alternate,r),r=r.sibling}function Bo(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Sr(4,r,r.return),Bo(r);break;case 1:ds(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Rv(r,r.return,l),Bo(r);break;case 27:Ec(r.stateNode);case 26:case 5:ds(r,r.return),Bo(r);break;case 22:r.memoizedState===null&&Bo(r);break;case 30:Bo(r);break;default:Bo(r)}s=s.sibling}}function Cr(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,y=s,T=r,C=T.flags;switch(T.tag){case 0:case 11:case 15:Cr(y,T,l),dc(4,T);break;case 1:if(Cr(y,T,l),u=T,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){Tt(u,u.return,K)}if(u=T,y=u.updateQueue,y!==null){var I=u.stateNode;try{var q=y.shared.hiddenCallbacks;if(q!==null)for(y.shared.hiddenCallbacks=null,y=0;y<q.length;y++)h_(q[y],I)}catch(K){Tt(u,u.return,K)}}l&&C&64&&Iv(T),hc(T,T.return);break;case 27:bv(T);case 26:case 5:Cr(y,T,l),l&&u===null&&C&4&&Nv(T),hc(T,T.return);break;case 12:Cr(y,T,l);break;case 13:Cr(y,T,l),l&&C&4&&Vv(y,T);break;case 22:T.memoizedState===null&&Cr(y,T,l),hc(T,T.return);break;case 30:break;default:Cr(y,T,l)}r=r.sibling}}function bp(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Wl(l))}function Pp(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Wl(s))}function hs(s,r,l,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ov(s,r,l,u),r=r.sibling}function Ov(s,r,l,u){var y=r.flags;switch(r.tag){case 0:case 11:case 15:hs(s,r,l,u),y&2048&&dc(9,r);break;case 1:hs(s,r,l,u);break;case 3:hs(s,r,l,u),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Wl(s)));break;case 12:if(y&2048){hs(s,r,l,u),s=r.stateNode;try{var T=r.memoizedProps,C=T.id,I=T.onPostCommit;typeof I=="function"&&I(C,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){Tt(r,r.return,q)}}else hs(s,r,l,u);break;case 13:hs(s,r,l,u);break;case 23:break;case 22:T=r.stateNode,C=r.alternate,r.memoizedState!==null?T._visibility&2?hs(s,r,l,u):fc(s,r):T._visibility&2?hs(s,r,l,u):(T._visibility|=2,Ua(s,r,l,u,(r.subtreeFlags&10256)!==0)),y&2048&&bp(C,r);break;case 24:hs(s,r,l,u),y&2048&&Pp(r.alternate,r);break;default:hs(s,r,l,u)}}function Ua(s,r,l,u,y){for(y=y&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var T=s,C=r,I=l,q=u,K=C.flags;switch(C.tag){case 0:case 11:case 15:Ua(T,C,I,q,y),dc(8,C);break;case 23:break;case 22:var oe=C.stateNode;C.memoizedState!==null?oe._visibility&2?Ua(T,C,I,q,y):fc(T,C):(oe._visibility|=2,Ua(T,C,I,q,y)),y&&K&2048&&bp(C.alternate,C);break;case 24:Ua(T,C,I,q,y),y&&K&2048&&Pp(C.alternate,C);break;default:Ua(T,C,I,q,y)}r=r.sibling}}function fc(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,u=r,y=u.flags;switch(u.tag){case 22:fc(l,u),y&2048&&bp(u.alternate,u);break;case 24:fc(l,u),y&2048&&Pp(u.alternate,u);break;default:fc(l,u)}r=r.sibling}}var pc=8192;function La(s){if(s.subtreeFlags&pc)for(s=s.child;s!==null;)Fv(s),s=s.sibling}function Fv(s){switch(s.tag){case 26:La(s),s.flags&pc&&s.memoizedState!==null&&JR(qi,s.memoizedState,s.memoizedProps);break;case 5:La(s);break;case 3:case 4:var r=qi;qi=Pd(s.stateNode.containerInfo),La(s),qi=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=pc,pc=16777216,La(s),pc=r):La(s));break;default:La(s)}}function qv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function mc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];an=u,Hv(u,s)}qv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Bv(s),s=s.sibling}function Bv(s){switch(s.tag){case 0:case 11:case 15:mc(s),s.flags&2048&&Sr(9,s,s.return);break;case 3:mc(s);break;case 12:mc(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,vd(s)):mc(s);break;default:mc(s)}}function vd(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];an=u,Hv(u,s)}qv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Sr(8,r,r.return),vd(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,vd(r));break;default:vd(r)}s=s.sibling}}function Hv(s,r){for(;an!==null;){var l=an;switch(l.tag){case 0:case 11:case 15:Sr(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Wl(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,an=u;else e:for(l=s;an!==null;){u=an;var y=u.sibling,T=u.return;if(Mv(u),u===l){an=null;break e}if(y!==null){y.return=T,an=y;break e}an=T}}}var dR={getCacheForType:function(s){var r=In(tn),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l}},hR=typeof WeakMap=="function"?WeakMap:Map,ct=0,At=null,Ke=null,et=0,ut=0,ci=null,Ir=!1,Oa=!1,Dp=!1,Js=0,Ot=0,Rr=0,Ho=0,Mp=0,Ii=0,Fa=0,gc=null,Kn=null,kp=!1,Vp=0,Td=1/0,Ed=null,Nr=null,yn=0,xr=null,qa=null,Ba=0,Up=0,Lp=null,Gv=null,yc=0,Op=null;function ui(){if((ct&2)!==0&&et!==0)return et&-et;if(ne.T!==null){var s=Na;return s!==0?s:jp()}return ii()}function zv(){Ii===0&&(Ii=(et&536870912)===0||at?ti():536870912);var s=Ci.current;return s!==null&&(s.flags|=32),Ii}function di(s,r,l){(s===At&&(ut===2||ut===9)||s.cancelPendingCommit!==null)&&(Ha(s,0),br(s,et,Ii,!1)),dt(s,l),((ct&2)===0||s!==At)&&(s===At&&((ct&2)===0&&(Ho|=l),Ot===4&&br(s,et,Ii,!1)),fs(s))}function jv(s,r,l){if((ct&6)!==0)throw Error(i(327));var u=!l&&(r&124)===0&&(r&s.expiredLanes)===0||jn(s,r),y=u?mR(s,r):Bp(s,r,!0),T=u;do{if(y===0){Oa&&!u&&br(s,r,0,!1);break}else{if(l=s.current.alternate,T&&!fR(l)){y=Bp(s,r,!1),T=!1;continue}if(y===2){if(T=r,s.errorRecoveryDisabledLanes&T)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var I=s;y=gc;var q=I.current.memoizedState.isDehydrated;if(q&&(Ha(I,C).flags|=256),C=Bp(I,C,!1),C!==2){if(Dp&&!q){I.errorRecoveryDisabledLanes|=T,Ho|=T,y=4;break e}T=Kn,Kn=y,T!==null&&(Kn===null?Kn=T:Kn.push.apply(Kn,T))}y=C}if(T=!1,y!==2)continue}}if(y===1){Ha(s,0),br(s,r,0,!0);break}e:{switch(u=s,T=y,T){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:br(u,r,Ii,!Ir);break e;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Vp+300-bt(),10<y)){if(br(u,r,Ii,!Ir),wn(u,0,!0)!==0)break e;u.timeoutHandle=TT($v.bind(null,u,l,Kn,Ed,kp,r,Ii,Ho,Fa,Ir,T,2,-0,0),y);break e}$v(u,l,Kn,Ed,kp,r,Ii,Ho,Fa,Ir,T,0,-0,0)}}break}while(!0);fs(s)}function $v(s,r,l,u,y,T,C,I,q,K,oe,ce,W,Z){if(s.timeoutHandle=-1,ce=r.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(wc={stylesheets:null,count:0,unsuspend:KR},Fv(r),ce=QR(),ce!==null)){s.cancelPendingCommit=ce(Zv.bind(null,s,r,T,l,u,y,C,I,q,oe,1,W,Z)),br(s,T,C,!K);return}Zv(s,r,T,l,u,y,C,I,q)}function fR(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var y=l[u],T=y.getSnapshot;y=y.value;try{if(!ri(T(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function br(s,r,l,u){r&=~Mp,r&=~Ho,s.suspendedLanes|=r,s.pingedLanes&=~r,u&&(s.warmLanes|=r),u=s.expirationTimes;for(var y=r;0<y;){var T=31-Wt(y),C=1<<T;u[T]=-1,y&=~C}l!==0&&Ln(s,l,r)}function Ad(){return(ct&6)===0?(_c(0),!1):!0}function Fp(){if(Ke!==null){if(ut===0)var s=Ke.return;else s=Ke,Bs=Uo=null,np(s),ka=null,lc=0,s=Ke;for(;s!==null;)Cv(s.alternate,s),s=s.return;Ke=null}}function Ha(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,PR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Fp(),At=s,Ke=l=Os(s.current,null),et=r,ut=0,ci=null,Ir=!1,Oa=jn(s,r),Dp=!1,Fa=Ii=Mp=Ho=Rr=Ot=0,Kn=gc=null,kp=!1,(r&8)!==0&&(r|=r&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=r;0<u;){var y=31-Wt(u),T=1<<y;r|=s[y],u&=~T}return Js=r,zu(),l}function Yv(s,r){ze=null,ne.H=cd,r===Zl||r===Zu?(r=u_(),ut=3):r===a_?(r=u_(),ut=4):ut=r===dv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ci=r,Ke===null&&(Ot=1,pd(s,Ei(r,s.current)))}function Kv(){var s=ne.H;return ne.H=cd,s===null?cd:s}function Jv(){var s=ne.A;return ne.A=dR,s}function qp(){Ot=4,Ir||(et&4194048)!==et&&Ci.current!==null||(Oa=!0),(Rr&134217727)===0&&(Ho&134217727)===0||At===null||br(At,et,Ii,!1)}function Bp(s,r,l){var u=ct;ct|=2;var y=Kv(),T=Jv();(At!==s||et!==r)&&(Ed=null,Ha(s,r)),r=!1;var C=Ot;e:do try{if(ut!==0&&Ke!==null){var I=Ke,q=ci;switch(ut){case 8:Fp(),C=6;break e;case 3:case 2:case 9:case 6:Ci.current===null&&(r=!0);var K=ut;if(ut=0,ci=null,Ga(s,I,q,K),l&&Oa){C=0;break e}break;default:K=ut,ut=0,ci=null,Ga(s,I,q,K)}}pR(),C=Ot;break}catch(oe){Yv(s,oe)}while(!0);return r&&s.shellSuspendCounter++,Bs=Uo=null,ct=u,ne.H=y,ne.A=T,Ke===null&&(At=null,et=0,zu()),C}function pR(){for(;Ke!==null;)Qv(Ke)}function mR(s,r){var l=ct;ct|=2;var u=Kv(),y=Jv();At!==s||et!==r?(Ed=null,Td=bt()+500,Ha(s,r)):Oa=jn(s,r);e:do try{if(ut!==0&&Ke!==null){r=Ke;var T=ci;t:switch(ut){case 1:ut=0,ci=null,Ga(s,r,T,1);break;case 2:case 9:if(l_(T)){ut=0,ci=null,Wv(r);break}r=function(){ut!==2&&ut!==9||At!==s||(ut=7),fs(s)},T.then(r,r);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:l_(T)?(ut=0,ci=null,Wv(r)):(ut=0,ci=null,Ga(s,r,T,7));break;case 5:var C=null;switch(Ke.tag){case 26:C=Ke.memoizedState;case 5:case 27:var I=Ke;if(!C||DT(C)){ut=0,ci=null;var q=I.sibling;if(q!==null)Ke=q;else{var K=I.return;K!==null?(Ke=K,Sd(K)):Ke=null}break t}}ut=0,ci=null,Ga(s,r,T,5);break;case 6:ut=0,ci=null,Ga(s,r,T,6);break;case 8:Fp(),Ot=6;break e;default:throw Error(i(462))}}gR();break}catch(oe){Yv(s,oe)}while(!0);return Bs=Uo=null,ne.H=u,ne.A=y,ct=l,Ke!==null?0:(At=null,et=0,zu(),Ot)}function gR(){for(;Ke!==null&&!Rs();)Qv(Ke)}function Qv(s){var r=Sv(s.alternate,s,Js);s.memoizedProps=s.pendingProps,r===null?Sd(s):Ke=r}function Wv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=yv(l,r,r.pendingProps,r.type,void 0,et);break;case 11:r=yv(l,r,r.pendingProps,r.type.render,r.ref,et);break;case 5:np(r);default:Cv(l,r),r=Ke=Xy(r,Js),r=Sv(l,r,Js)}s.memoizedProps=s.pendingProps,r===null?Sd(s):Ke=r}function Ga(s,r,l,u){Bs=Uo=null,np(r),ka=null,lc=0;var y=r.return;try{if(rR(s,y,r,l,et)){Ot=1,pd(s,Ei(l,s.current)),Ke=null;return}}catch(T){if(y!==null)throw Ke=y,T;Ot=1,pd(s,Ei(l,s.current)),Ke=null;return}r.flags&32768?(at||u===1?s=!0:Oa||(et&536870912)!==0?s=!1:(Ir=s=!0,(u===2||u===9||u===3||u===6)&&(u=Ci.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xv(r,s)):Sd(r)}function Sd(s){var r=s;do{if((r.flags&32768)!==0){Xv(r,Ir);return}s=r.return;var l=aR(r.alternate,r,Js);if(l!==null){Ke=l;return}if(r=r.sibling,r!==null){Ke=r;return}Ke=r=s}while(r!==null);Ot===0&&(Ot=5)}function Xv(s,r){do{var l=lR(s.alternate,s);if(l!==null){l.flags&=32767,Ke=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ke=s;return}Ke=s=l}while(s!==null);Ot=6,Ke=null}function Zv(s,r,l,u,y,T,C,I,q){s.cancelPendingCommit=null;do wd();while(yn!==0);if((ct&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(T=r.lanes|r.childLanes,T|=Pf,Ps(s,l,T,C,I,q),s===At&&(Ke=At=null,et=0),qa=r,xr=s,Ba=l,Up=T,Lp=y,Gv=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,TR(zn,function(){return sT(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=ne.T,ne.T=null,y=pe.p,pe.p=2,C=ct,ct|=4;try{cR(s,r,l)}finally{ct=C,pe.p=y,ne.T=u}}yn=1,eT(),tT(),nT()}}function eT(){if(yn===1){yn=0;var s=xr,r=qa,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null;var u=pe.p;pe.p=2;var y=ct;ct|=4;try{Uv(r,s);var T=Zp,C=Hy(s.containerInfo),I=T.focusedElem,q=T.selectionRange;if(C!==I&&I&&I.ownerDocument&&By(I.ownerDocument.documentElement,I)){if(q!==null&&If(I)){var K=q.start,oe=q.end;if(oe===void 0&&(oe=K),"selectionStart"in I)I.selectionStart=K,I.selectionEnd=Math.min(oe,I.value.length);else{var ce=I.ownerDocument||document,W=ce&&ce.defaultView||window;if(W.getSelection){var Z=W.getSelection(),ke=I.textContent.length,Pe=Math.min(q.start,ke),mt=q.end===void 0?Pe:Math.min(q.end,ke);!Z.extend&&Pe>mt&&(C=mt,mt=Pe,Pe=C);var j=qy(I,Pe),G=qy(I,mt);if(j&&G&&(Z.rangeCount!==1||Z.anchorNode!==j.node||Z.anchorOffset!==j.offset||Z.focusNode!==G.node||Z.focusOffset!==G.offset)){var $=ce.createRange();$.setStart(j.node,j.offset),Z.removeAllRanges(),Pe>mt?(Z.addRange($),Z.extend(G.node,G.offset)):($.setEnd(G.node,G.offset),Z.addRange($))}}}}for(ce=[],Z=I;Z=Z.parentNode;)Z.nodeType===1&&ce.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ce.length;I++){var le=ce[I];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Ud=!!Xp,Zp=Xp=null}finally{ct=y,pe.p=u,ne.T=l}}s.current=r,yn=2}}function tT(){if(yn===2){yn=0;var s=xr,r=qa,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=ne.T,ne.T=null;var u=pe.p;pe.p=2;var y=ct;ct|=4;try{Dv(s,r.alternate,r)}finally{ct=y,pe.p=u,ne.T=l}}yn=3}}function nT(){if(yn===4||yn===3){yn=0,es();var s=xr,r=qa,l=Ba,u=Gv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?yn=5:(yn=0,qa=xr=null,iT(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Nr=null),lr(l),r=r.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(kn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=ne.T,y=pe.p,pe.p=2,ne.T=null;try{for(var T=s.onRecoverableError,C=0;C<u.length;C++){var I=u[C];T(I.value,{componentStack:I.stack})}}finally{ne.T=r,pe.p=y}}(Ba&3)!==0&&wd(),fs(s),y=s.pendingLanes,(l&4194090)!==0&&(y&42)!==0?s===Op?yc++:(yc=0,Op=s):yc=0,_c(0)}}function iT(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Wl(r)))}function wd(s){return eT(),tT(),nT(),sT()}function sT(){if(yn!==5)return!1;var s=xr,r=Up;Up=0;var l=lr(Ba),u=ne.T,y=pe.p;try{pe.p=32>l?32:l,ne.T=null,l=Lp,Lp=null;var T=xr,C=Ba;if(yn=0,qa=xr=null,Ba=0,(ct&6)!==0)throw Error(i(331));var I=ct;if(ct|=4,Bv(T.current),Ov(T,T.current,C,l),ct=I,_c(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(kn,T)}catch{}return!0}finally{pe.p=y,ne.T=u,iT(s,r)}}function rT(s,r,l){r=Ei(l,r),r=gp(s.stateNode,r,2),s=vr(s,r,2),s!==null&&(dt(s,2),fs(s))}function Tt(s,r,l){if(s.tag===3)rT(s,s,l);else for(;r!==null;){if(r.tag===3){rT(r,s,l);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Nr===null||!Nr.has(u))){s=Ei(l,s),l=cv(2),u=vr(r,l,2),u!==null&&(uv(l,u,r,s),dt(u,2),fs(u));break}}r=r.return}}function Hp(s,r,l){var u=s.pingCache;if(u===null){u=s.pingCache=new hR;var y=new Set;u.set(r,y)}else y=u.get(r),y===void 0&&(y=new Set,u.set(r,y));y.has(l)||(Dp=!0,y.add(l),s=yR.bind(null,s,r,l),r.then(s,s))}function yR(s,r,l){var u=s.pingCache;u!==null&&u.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,At===s&&(et&l)===l&&(Ot===4||Ot===3&&(et&62914560)===et&&300>bt()-Vp?(ct&2)===0&&Ha(s,0):Mp|=l,Fa===et&&(Fa=0)),fs(s)}function oT(s,r){r===0&&(r=ni()),s=wa(s,r),s!==null&&(dt(s,r),fs(s))}function _R(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),oT(s,l)}function vR(s,r){var l=0;switch(s.tag){case 13:var u=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),oT(s,l)}function TR(s,r){return Mn(s,r)}var Cd=null,za=null,Gp=!1,Id=!1,zp=!1,Go=0;function fs(s){s!==za&&s.next===null&&(za===null?Cd=za=s:za=za.next=s),Id=!0,Gp||(Gp=!0,AR())}function _c(s,r){if(!zp&&Id){zp=!0;do for(var l=!1,u=Cd;u!==null;){if(s!==0){var y=u.pendingLanes;if(y===0)var T=0;else{var C=u.suspendedLanes,I=u.pingedLanes;T=(1<<31-Wt(42|s)+1)-1,T&=y&~(C&~I),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(l=!0,uT(u,T))}else T=et,T=wn(u,u===At?T:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(T&3)===0||jn(u,T)||(l=!0,uT(u,T));u=u.next}while(l);zp=!1}}function ER(){aT()}function aT(){Id=Gp=!1;var s=0;Go!==0&&(bR()&&(s=Go),Go=0);for(var r=bt(),l=null,u=Cd;u!==null;){var y=u.next,T=lT(u,r);T===0?(u.next=null,l===null?Cd=y:l.next=y,y===null&&(za=l)):(l=u,(s!==0||(T&3)!==0)&&(Id=!0)),u=y}_c(s)}function lT(s,r){for(var l=s.suspendedLanes,u=s.pingedLanes,y=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var C=31-Wt(T),I=1<<C,q=y[C];q===-1?((I&l)===0||(I&u)!==0)&&(y[C]=is(I,r)):q<=r&&(s.expiredLanes|=I),T&=~I}if(r=At,l=et,l=wn(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===r&&(ut===2||ut===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Pi(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||jn(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(u!==null&&Pi(u),lr(l)){case 2:case 8:l=Pt;break;case 32:l=zn;break;case 268435456:l=Ns;break;default:l=zn}return u=cT.bind(null,s),l=Mn(l,u),s.callbackPriority=r,s.callbackNode=l,r}return u!==null&&u!==null&&Pi(u),s.callbackPriority=2,s.callbackNode=null,2}function cT(s,r){if(yn!==0&&yn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(wd()&&s.callbackNode!==l)return null;var u=et;return u=wn(s,s===At?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(jv(s,u,r),lT(s,bt()),s.callbackNode!=null&&s.callbackNode===l?cT.bind(null,s):null)}function uT(s,r){if(wd())return null;jv(s,r,!0)}function AR(){DR(function(){(ct&6)!==0?Mn(_t,ER):aT()})}function jp(){return Go===0&&(Go=ti()),Go}function dT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Vi(""+s)}function hT(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function SR(s,r,l,u,y){if(r==="submit"&&l&&l.stateNode===y){var T=dT((y[vt]||null).action),C=u.submitter;C&&(r=(r=C[vt]||null)?dT(r.formAction):C.getAttribute("formAction"),r!==null&&(T=r,C=null));var I=new Ao("action","action",null,u,y);s.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Go!==0){var q=C?hT(y,C):new FormData(y);dp(l,{pending:!0,data:q,method:y.method,action:T},null,q)}}else typeof T=="function"&&(I.preventDefault(),q=C?hT(y,C):new FormData(y),dp(l,{pending:!0,data:q,method:y.method,action:T},T,q))},currentTarget:y}]})}}for(var $p=0;$p<bf.length;$p++){var Yp=bf[$p],wR=Yp.toLowerCase(),CR=Yp[0].toUpperCase()+Yp.slice(1);Fi(wR,"on"+CR)}Fi(jy,"onAnimationEnd"),Fi($y,"onAnimationIteration"),Fi(Yy,"onAnimationStart"),Fi("dblclick","onDoubleClick"),Fi("focusin","onFocus"),Fi("focusout","onBlur"),Fi(HI,"onTransitionRun"),Fi(GI,"onTransitionStart"),Fi(zI,"onTransitionCancel"),Fi(Ky,"onTransitionEnd"),rs("onMouseEnter",["mouseout","mouseover"]),rs("onMouseLeave",["mouseout","mouseover"]),rs("onPointerEnter",["pointerout","pointerover"]),rs("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vc));function fT(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],y=u.event;u=u.listeners;e:{var T=void 0;if(r)for(var C=u.length-1;0<=C;C--){var I=u[C],q=I.instance,K=I.currentTarget;if(I=I.listener,q!==T&&y.isPropagationStopped())break e;T=I,y.currentTarget=K;try{T(y)}catch(oe){fd(oe)}y.currentTarget=null,T=q}else for(C=0;C<u.length;C++){if(I=u[C],q=I.instance,K=I.currentTarget,I=I.listener,q!==T&&y.isPropagationStopped())break e;T=I,y.currentTarget=K;try{T(y)}catch(oe){fd(oe)}y.currentTarget=null,T=q}}}}function Je(s,r){var l=r[pn];l===void 0&&(l=r[pn]=new Set);var u=s+"__bubble";l.has(u)||(pT(r,s,2,!1),l.add(u))}function Kp(s,r,l){var u=0;r&&(u|=4),pT(l,s,u,r)}var Rd="_reactListening"+Math.random().toString(36).slice(2);function Jp(s){if(!s[Rd]){s[Rd]=!0,ca.forEach(function(l){l!=="selectionchange"&&(IR.has(l)||Kp(l,!1,s),Kp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Rd]||(r[Rd]=!0,Kp("selectionchange",!1,r))}}function pT(s,r,l,u){switch(OT(r)){case 2:var y=ZR;break;case 8:y=eN;break;default:y=cm}l=y.bind(null,r,l,s),y=void 0,!Us||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),u?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function Qp(s,r,l,u,y){var T=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var I=u.stateNode.containerInfo;if(I===y)break;if(C===4)for(C=u.return;C!==null;){var q=C.tag;if((q===3||q===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;I!==null;){if(C=Oe(I),C===null)return;if(q=C.tag,q===5||q===6||q===26||q===27){u=T=C;continue e}I=I.parentNode}}u=u.return}vo(function(){var K=T,oe=Ul(l),ce=[];e:{var W=Jy.get(s);if(W!==void 0){var Z=Ao,ke=s;switch(s){case"keypress":if(To(l)===0)break e;case"keydown":case"keyup":Z=Ta;break;case"focusin":ke="focus",Z=ya;break;case"focusout":ke="blur",Z=ya;break;case"beforeblur":case"afterblur":Z=ya;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ro;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=mr;break;case jy:case $y:case Yy:Z=Ol;break;case Ky:Z=S;break;case"scroll":case"scrollend":Z=wo;break;case"wheel":Z=P;break;case"copy":case"cut":case"paste":Z=Lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Bl;break;case"toggle":case"beforetoggle":Z=te}var Pe=(r&4)!==0,mt=!Pe&&(s==="scroll"||s==="scrollend"),j=Pe?W!==null?W+"Capture":null:W;Pe=[];for(var G=K,$;G!==null;){var le=G;if($=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||$===null||j===null||(le=fr(G,j),le!=null&&Pe.push(Tc(G,le,$))),mt)break;G=G.return}0<Pe.length&&(W=new Z(W,ke,null,l,oe),ce.push({event:W,listeners:Pe}))}}if((r&7)===0){e:{if(W=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",W&&l!==Vl&&(ke=l.relatedTarget||l.fromElement)&&(Oe(ke)||ke[Zt]))break e;if((Z||W)&&(W=oe.window===oe?oe:(W=oe.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(ke=l.relatedTarget||l.toElement,Z=K,ke=ke?Oe(ke):null,ke!==null&&(mt=a(ke),Pe=ke.tag,ke!==mt||Pe!==5&&Pe!==27&&Pe!==6)&&(ke=null)):(Z=null,ke=K),Z!==ke)){if(Pe=Ro,le="onMouseLeave",j="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Pe=Bl,le="onPointerLeave",j="onPointerEnter",G="pointer"),mt=Z==null?W:Ge(Z),$=ke==null?W:Ge(ke),W=new Pe(le,G+"leave",Z,l,oe),W.target=mt,W.relatedTarget=$,le=null,Oe(oe)===K&&(Pe=new Pe(j,G+"enter",ke,l,oe),Pe.target=$,Pe.relatedTarget=mt,le=Pe),mt=le,Z&&ke)t:{for(Pe=Z,j=ke,G=0,$=Pe;$;$=ja($))G++;for($=0,le=j;le;le=ja(le))$++;for(;0<G-$;)Pe=ja(Pe),G--;for(;0<$-G;)j=ja(j),$--;for(;G--;){if(Pe===j||j!==null&&Pe===j.alternate)break t;Pe=ja(Pe),j=ja(j)}Pe=null}else Pe=null;Z!==null&&mT(ce,W,Z,Pe,!1),ke!==null&&mt!==null&&mT(ce,mt,ke,Pe,!0)}}e:{if(W=K?Ge(K):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var Ae=ky;else if(Dy(W))if(Vy)Ae=FI;else{Ae=LI;var $e=UI}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?K&&pa(K.elementType)&&(Ae=ky):Ae=OI;if(Ae&&(Ae=Ae(s,K))){My(ce,Ae,l,oe);break e}$e&&$e(s,W,K),s==="focusout"&&K&&W.type==="number"&&K.memoizedProps.value!=null&&Dl(W,"number",W.value)}switch($e=K?Ge(K):window,s){case"focusin":(Dy($e)||$e.contentEditable==="true")&&(Ea=$e,Rf=K,$l=null);break;case"focusout":$l=Rf=Ea=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Gy(ce,l,oe);break;case"selectionchange":if(BI)break;case"keydown":case"keyup":Gy(ce,l,oe)}var Re;if(Le)e:{switch(s){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Oi?Ui(s,l)&&(De="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(Ft&&l.locale!=="ko"&&(Oi||De!=="onCompositionStart"?De==="onCompositionEnd"&&Oi&&(Re=ku()):(Ti=oe,Et="value"in Ti?Ti.value:Ti.textContent,Oi=!0)),$e=Nd(K,De),0<$e.length&&(De=new ql(De,s,null,l,oe),ce.push({event:De,listeners:$e}),Re?De.data=Re:(Re=Li(l),Re!==null&&(De.data=Re)))),(Re=lt?Hl(s,l):MI(s,l))&&(De=Nd(K,"onBeforeInput"),0<De.length&&($e=new ql("onBeforeInput","beforeinput",null,l,oe),ce.push({event:$e,listeners:De}),$e.data=Re)),SR(ce,s,K,l,oe)}fT(ce,r)})}function Tc(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Nd(s,r){for(var l=r+"Capture",u=[];s!==null;){var y=s,T=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||T===null||(y=fr(s,l),y!=null&&u.unshift(Tc(s,y,T)),y=fr(s,r),y!=null&&u.push(Tc(s,y,T))),s.tag===3)return u;s=s.return}return[]}function ja(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function mT(s,r,l,u,y){for(var T=r._reactName,C=[];l!==null&&l!==u;){var I=l,q=I.alternate,K=I.stateNode;if(I=I.tag,q!==null&&q===u)break;I!==5&&I!==26&&I!==27||K===null||(q=K,y?(K=fr(l,T),K!=null&&C.unshift(Tc(l,K,q))):y||(K=fr(l,T),K!=null&&C.push(Tc(l,K,q)))),l=l.return}C.length!==0&&s.push({event:r,listeners:C})}var RR=/\r\n?/g,NR=/\u0000|\uFFFD/g;function gT(s){return(typeof s=="string"?s:""+s).replace(RR,`
`).replace(NR,"")}function yT(s,r){return r=gT(r),gT(s)===r}function xd(){}function pt(s,r,l,u,y,T){switch(l){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||vi(s,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&vi(s,""+u);break;case"className":po(s,"class",u);break;case"tabIndex":po(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":po(s,l,u);break;case"style":kl(s,u,T);break;case"data":if(r!=="object"){po(s,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Vi(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(l==="formAction"?(r!=="input"&&pt(s,r,"name",y.name,y,null),pt(s,r,"formEncType",y.formEncType,y,null),pt(s,r,"formMethod",y.formMethod,y,null),pt(s,r,"formTarget",y.formTarget,y,null)):(pt(s,r,"encType",y.encType,y,null),pt(s,r,"method",y.method,y,null),pt(s,r,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Vi(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=xd);break;case"onScroll":u!=null&&Je("scroll",s);break;case"onScrollEnd":u!=null&&Je("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=Vi(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Je("beforetoggle",s),Je("toggle",s),fo(s,"popover",u);break;case"xlinkActuate":_i(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":_i(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":_i(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":_i(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":_i(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":_i(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":_i(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":_i(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":_i(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":fo(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Pu.get(l)||l,fo(s,l,u))}}function Wp(s,r,l,u,y,T){switch(l){case"style":kl(s,u,T);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?vi(s,u):(typeof u=="number"||typeof u=="bigint")&&vi(s,""+u);break;case"onScroll":u!=null&&Je("scroll",s);break;case"onScrollEnd":u!=null&&Je("scrollend",s);break;case"onClick":u!=null&&(s.onclick=xd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),T=s[vt]||null,T=T!=null?T[l]:null,typeof T=="function"&&s.removeEventListener(r,T,y),typeof u=="function")){typeof T!="function"&&T!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,u,y);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):fo(s,l,u)}}}function _n(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",s),Je("load",s);var u=!1,y=!1,T;for(T in l)if(l.hasOwnProperty(T)){var C=l[T];if(C!=null)switch(T){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:pt(s,r,T,C,l,null)}}y&&pt(s,r,"srcSet",l.srcSet,l,null),u&&pt(s,r,"src",l.src,l,null);return;case"input":Je("invalid",s);var I=T=C=y=null,q=null,K=null;for(u in l)if(l.hasOwnProperty(u)){var oe=l[u];if(oe!=null)switch(u){case"name":y=oe;break;case"type":C=oe;break;case"checked":q=oe;break;case"defaultChecked":K=oe;break;case"value":T=oe;break;case"defaultValue":I=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,r));break;default:pt(s,r,u,oe,l,null)}}Pl(s,T,I,q,K,C,y,!1),ur(s);return;case"select":Je("invalid",s),u=C=T=null;for(y in l)if(l.hasOwnProperty(y)&&(I=l[y],I!=null))switch(y){case"value":T=I;break;case"defaultValue":C=I;break;case"multiple":u=I;default:pt(s,r,y,I,l,null)}r=T,l=C,s.multiple=!!u,r!=null?dr(s,!!u,r,!1):l!=null&&dr(s,!!u,l,!0);return;case"textarea":Je("invalid",s),T=y=u=null;for(C in l)if(l.hasOwnProperty(C)&&(I=l[C],I!=null))switch(C){case"value":u=I;break;case"defaultValue":y=I;break;case"children":T=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:pt(s,r,C,I,l,null)}bu(s,u,y,T),ur(s);return;case"option":for(q in l)if(l.hasOwnProperty(q)&&(u=l[q],u!=null))switch(q){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:pt(s,r,q,u,l,null)}return;case"dialog":Je("beforetoggle",s),Je("toggle",s),Je("cancel",s),Je("close",s);break;case"iframe":case"object":Je("load",s);break;case"video":case"audio":for(u=0;u<vc.length;u++)Je(vc[u],s);break;case"image":Je("error",s),Je("load",s);break;case"details":Je("toggle",s);break;case"embed":case"source":case"link":Je("error",s),Je("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(u=l[K],u!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:pt(s,r,K,u,l,null)}return;default:if(pa(r)){for(oe in l)l.hasOwnProperty(oe)&&(u=l[oe],u!==void 0&&Wp(s,r,oe,u,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(u=l[I],u!=null&&pt(s,r,I,u,l,null))}function xR(s,r,l,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,T=null,C=null,I=null,q=null,K=null,oe=null;for(Z in l){var ce=l[Z];if(l.hasOwnProperty(Z)&&ce!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":q=ce;default:u.hasOwnProperty(Z)||pt(s,r,Z,null,u,ce)}}for(var W in u){var Z=u[W];if(ce=l[W],u.hasOwnProperty(W)&&(Z!=null||ce!=null))switch(W){case"type":T=Z;break;case"name":y=Z;break;case"checked":K=Z;break;case"defaultChecked":oe=Z;break;case"value":C=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==ce&&pt(s,r,W,Z,u,ce)}}bl(s,C,I,q,K,oe,T,y);return;case"select":Z=C=I=W=null;for(T in l)if(q=l[T],l.hasOwnProperty(T)&&q!=null)switch(T){case"value":break;case"multiple":Z=q;default:u.hasOwnProperty(T)||pt(s,r,T,null,u,q)}for(y in u)if(T=u[y],q=l[y],u.hasOwnProperty(y)&&(T!=null||q!=null))switch(y){case"value":W=T;break;case"defaultValue":I=T;break;case"multiple":C=T;default:T!==q&&pt(s,r,y,T,u,q)}r=I,l=C,u=Z,W!=null?dr(s,!!l,W,!1):!!u!=!!l&&(r!=null?dr(s,!!l,r,!0):dr(s,!!l,l?[]:"",!1));return;case"textarea":Z=W=null;for(I in l)if(y=l[I],l.hasOwnProperty(I)&&y!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:pt(s,r,I,null,u,y)}for(C in u)if(y=u[C],T=l[C],u.hasOwnProperty(C)&&(y!=null||T!=null))switch(C){case"value":W=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==T&&pt(s,r,C,y,u,T)}xu(s,W,Z);return;case"option":for(var ke in l)if(W=l[ke],l.hasOwnProperty(ke)&&W!=null&&!u.hasOwnProperty(ke))switch(ke){case"selected":s.selected=!1;break;default:pt(s,r,ke,null,u,W)}for(q in u)if(W=u[q],Z=l[q],u.hasOwnProperty(q)&&W!==Z&&(W!=null||Z!=null))switch(q){case"selected":s.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:pt(s,r,q,W,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in l)W=l[Pe],l.hasOwnProperty(Pe)&&W!=null&&!u.hasOwnProperty(Pe)&&pt(s,r,Pe,null,u,W);for(K in u)if(W=u[K],Z=l[K],u.hasOwnProperty(K)&&W!==Z&&(W!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:pt(s,r,K,W,u,Z)}return;default:if(pa(r)){for(var mt in l)W=l[mt],l.hasOwnProperty(mt)&&W!==void 0&&!u.hasOwnProperty(mt)&&Wp(s,r,mt,void 0,u,W);for(oe in u)W=u[oe],Z=l[oe],!u.hasOwnProperty(oe)||W===Z||W===void 0&&Z===void 0||Wp(s,r,oe,W,u,Z);return}}for(var j in l)W=l[j],l.hasOwnProperty(j)&&W!=null&&!u.hasOwnProperty(j)&&pt(s,r,j,null,u,W);for(ce in u)W=u[ce],Z=l[ce],!u.hasOwnProperty(ce)||W===Z||W==null&&Z==null||pt(s,r,ce,W,u,Z)}var Xp=null,Zp=null;function bd(s){return s.nodeType===9?s:s.ownerDocument}function _T(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vT(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function em(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var tm=null;function bR(){var s=window.event;return s&&s.type==="popstate"?s===tm?!1:(tm=s,!0):(tm=null,!1)}var TT=typeof setTimeout=="function"?setTimeout:void 0,PR=typeof clearTimeout=="function"?clearTimeout:void 0,ET=typeof Promise=="function"?Promise:void 0,DR=typeof queueMicrotask=="function"?queueMicrotask:typeof ET<"u"?function(s){return ET.resolve(null).then(s).catch(MR)}:TT;function MR(s){setTimeout(function(){throw s})}function Pr(s){return s==="head"}function AT(s,r){var l=r,u=0,y=0;do{var T=l.nextSibling;if(s.removeChild(l),T&&T.nodeType===8)if(l=T.data,l==="/$"){if(0<u&&8>u){l=u;var C=s.ownerDocument;if(l&1&&Ec(C.documentElement),l&2&&Ec(C.body),l&4)for(l=C.head,Ec(l),C=l.firstChild;C;){var I=C.nextSibling,q=C.nodeName;C[J]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=I}}if(y===0){s.removeChild(T),xc(r);return}y--}else l==="$"||l==="$?"||l==="$!"?y++:u=l.charCodeAt(0)-48;else u=0;l=T}while(l);xc(r)}function nm(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":nm(l),ge(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function kR(s,r,l,u){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[J])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var T=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=Bi(s.nextSibling),s===null)break}return null}function VR(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Bi(s.nextSibling),s===null))return null;return s}function im(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function UR(s,r){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")r();else{var u=function(){r(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Bi(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var sm=null;function ST(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return s;r--}else l==="/$"&&r++}s=s.previousSibling}return null}function wT(s,r,l){switch(r=bd(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Ec(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);ge(s)}var Ri=new Map,CT=new Set;function Pd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Qs=pe.d;pe.d={f:LR,r:OR,D:FR,C:qR,L:BR,m:HR,X:zR,S:GR,M:jR};function LR(){var s=Qs.f(),r=Ad();return s||r}function OR(s){var r=Ie(s);r!==null&&r.tag===5&&r.type==="form"?j_(r):Qs.r(s)}var $a=typeof document>"u"?null:document;function IT(s,r,l){var u=$a;if(u&&typeof r=="string"&&r){var y=rn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),CT.has(y)||(CT.add(y),s={rel:s,crossOrigin:l,href:r},u.querySelector(y)===null&&(r=u.createElement("link"),_n(r,"link",s),Dt(r),u.head.appendChild(r)))}}function FR(s){Qs.D(s),IT("dns-prefetch",s,null)}function qR(s,r){Qs.C(s,r),IT("preconnect",s,r)}function BR(s,r,l){Qs.L(s,r,l);var u=$a;if(u&&s&&r){var y='link[rel="preload"][as="'+rn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+rn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+rn(l.imageSizes)+'"]')):y+='[href="'+rn(s)+'"]';var T=y;switch(r){case"style":T=Ya(s);break;case"script":T=Ka(s)}Ri.has(T)||(s=v({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Ri.set(T,s),u.querySelector(y)!==null||r==="style"&&u.querySelector(Ac(T))||r==="script"&&u.querySelector(Sc(T))||(r=u.createElement("link"),_n(r,"link",s),Dt(r),u.head.appendChild(r)))}}function HR(s,r){Qs.m(s,r);var l=$a;if(l&&s){var u=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+rn(u)+'"][href="'+rn(s)+'"]',T=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ka(s)}if(!Ri.has(T)&&(s=v({rel:"modulepreload",href:s},r),Ri.set(T,s),l.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Sc(T)))return}u=l.createElement("link"),_n(u,"link",s),Dt(u),l.head.appendChild(u)}}}function GR(s,r,l){Qs.S(s,r,l);var u=$a;if(u&&s){var y=mn(u).hoistableStyles,T=Ya(s);r=r||"default";var C=y.get(T);if(!C){var I={loading:0,preload:null};if(C=u.querySelector(Ac(T)))I.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Ri.get(T))&&rm(s,l);var q=C=u.createElement("link");Dt(q),_n(q,"link",s),q._p=new Promise(function(K,oe){q.onload=K,q.onerror=oe}),q.addEventListener("load",function(){I.loading|=1}),q.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Dd(C,r,u)}C={type:"stylesheet",instance:C,count:1,state:I},y.set(T,C)}}}function zR(s,r){Qs.X(s,r);var l=$a;if(l&&s){var u=mn(l).hoistableScripts,y=Ka(s),T=u.get(y);T||(T=l.querySelector(Sc(y)),T||(s=v({src:s,async:!0},r),(r=Ri.get(y))&&om(s,r),T=l.createElement("script"),Dt(T),_n(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},u.set(y,T))}}function jR(s,r){Qs.M(s,r);var l=$a;if(l&&s){var u=mn(l).hoistableScripts,y=Ka(s),T=u.get(y);T||(T=l.querySelector(Sc(y)),T||(s=v({src:s,async:!0,type:"module"},r),(r=Ri.get(y))&&om(s,r),T=l.createElement("script"),Dt(T),_n(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},u.set(y,T))}}function RT(s,r,l,u){var y=(y=Ce.current)?Pd(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Ya(l.href),l=mn(y).hoistableStyles,u=l.get(r),u||(u={type:"style",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Ya(l.href);var T=mn(y).hoistableStyles,C=T.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,C),(T=y.querySelector(Ac(s)))&&!T._p&&(C.instance=T,C.state.loading=5),Ri.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ri.set(s,l),T||$R(y,s,l,C.state))),r&&u===null)throw Error(i(528,""));return C}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ka(l),l=mn(y).hoistableScripts,u=l.get(r),u||(u={type:"script",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ya(s){return'href="'+rn(s)+'"'}function Ac(s){return'link[rel="stylesheet"]['+s+"]"}function NT(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function $R(s,r,l,u){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=s.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),_n(r,"link",l),Dt(r),s.head.appendChild(r))}function Ka(s){return'[src="'+rn(s)+'"]'}function Sc(s){return"script[async]"+s}function xT(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var u=s.querySelector('style[data-href~="'+rn(l.href)+'"]');if(u)return r.instance=u,Dt(u),u;var y=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Dt(u),_n(u,"style",y),Dd(u,l.precedence,s),r.instance=u;case"stylesheet":y=Ya(l.href);var T=s.querySelector(Ac(y));if(T)return r.state.loading|=4,r.instance=T,Dt(T),T;u=NT(l),(y=Ri.get(y))&&rm(u,y),T=(s.ownerDocument||s).createElement("link"),Dt(T);var C=T;return C._p=new Promise(function(I,q){C.onload=I,C.onerror=q}),_n(T,"link",u),r.state.loading|=4,Dd(T,l.precedence,s),r.instance=T;case"script":return T=Ka(l.src),(y=s.querySelector(Sc(T)))?(r.instance=y,Dt(y),y):(u=l,(y=Ri.get(T))&&(u=v({},l),om(u,y)),s=s.ownerDocument||s,y=s.createElement("script"),Dt(y),_n(y,"link",u),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Dd(u,l.precedence,s));return r.instance}function Dd(s,r,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,T=y,C=0;C<u.length;C++){var I=u[C];if(I.dataset.precedence===r)T=I;else if(T!==y)break}T?T.parentNode.insertBefore(s,T.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function rm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function om(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Md=null;function bT(s,r,l){if(Md===null){var u=new Map,y=Md=new Map;y.set(l,u)}else y=Md,u=y.get(l),u||(u=new Map,y.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var T=l[y];if(!(T[J]||T[it]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var C=T.getAttribute(r)||"";C=s+C;var I=u.get(C);I?I.push(T):u.set(C,[T])}}return u}function PT(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function YR(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function DT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var wc=null;function KR(){}function JR(s,r,l){if(wc===null)throw Error(i(475));var u=wc;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var y=Ya(l.href),T=s.querySelector(Ac(y));if(T){s=T._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=kd.bind(u),s.then(u,u)),r.state.loading|=4,r.instance=T,Dt(T);return}T=s.ownerDocument||s,l=NT(l),(y=Ri.get(y))&&rm(l,y),T=T.createElement("link"),Dt(T);var C=T;C._p=new Promise(function(I,q){C.onload=I,C.onerror=q}),_n(T,"link",l),r.instance=T}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=kd.bind(u),s.addEventListener("load",r),s.addEventListener("error",r))}}function QR(){if(wc===null)throw Error(i(475));var s=wc;return s.stylesheets&&s.count===0&&am(s,s.stylesheets),0<s.count?function(r){var l=setTimeout(function(){if(s.stylesheets&&am(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(l)}}:null}function kd(){if(this.count--,this.count===0){if(this.stylesheets)am(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Vd=null;function am(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Vd=new Map,r.forEach(WR,s),Vd=null,kd.call(s))}function WR(s,r){if(!(r.state.loading&4)){var l=Vd.get(s);if(l)var u=l.get(null);else{l=new Map,Vd.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<y.length;T++){var C=y[T];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),u=C)}u&&l.set(null,u)}y=r.instance,C=y.getAttribute("data-precedence"),T=l.get(C)||u,T===u&&l.set(null,y),l.set(C,y),this.count++,u=kd.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),T?T.parentNode.insertBefore(y,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Cc={$$typeof:z,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function XR(s,r,l,u,y,T,C,I){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=T,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function MT(s,r,l,u,y,T,C,I,q,K,oe,ce){return s=new XR(s,r,l,C,I,q,K,ce),r=1,T===!0&&(r|=24),T=oi(3,null,null,r),s.current=T,T.stateNode=s,r=Hf(),r.refCount++,s.pooledCache=r,r.refCount++,T.memoizedState={element:u,isDehydrated:l,cache:r},$f(T),s}function kT(s){return s?(s=Ca,s):Ca}function VT(s,r,l,u,y,T){y=kT(y),u.context===null?u.context=y:u.pendingContext=y,u=_r(r),u.payload={element:l},T=T===void 0?null:T,T!==null&&(u.callback=T),l=vr(s,u,r),l!==null&&(di(l,s,r),tc(l,s,r))}function UT(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function lm(s,r){UT(s,r),(s=s.alternate)&&UT(s,r)}function LT(s){if(s.tag===13){var r=wa(s,67108864);r!==null&&di(r,s,67108864),lm(s,67108864)}}var Ud=!0;function ZR(s,r,l,u){var y=ne.T;ne.T=null;var T=pe.p;try{pe.p=2,cm(s,r,l,u)}finally{pe.p=T,ne.T=y}}function eN(s,r,l,u){var y=ne.T;ne.T=null;var T=pe.p;try{pe.p=8,cm(s,r,l,u)}finally{pe.p=T,ne.T=y}}function cm(s,r,l,u){if(Ud){var y=um(u);if(y===null)Qp(s,r,u,Ld,l),FT(s,u);else if(nN(y,s,r,l,u))u.stopPropagation();else if(FT(s,u),r&4&&-1<tN.indexOf(s)){for(;y!==null;){var T=Ie(y);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var C=Un(T.pendingLanes);if(C!==0){var I=T;for(I.pendingLanes|=2,I.entangledLanes|=2;C;){var q=1<<31-Wt(C);I.entanglements[1]|=q,C&=~q}fs(T),(ct&6)===0&&(Td=bt()+500,_c(0))}}break;case 13:I=wa(T,2),I!==null&&di(I,T,2),Ad(),lm(T,2)}if(T=um(u),T===null&&Qp(s,r,u,Ld,l),T===y)break;y=T}y!==null&&u.stopPropagation()}else Qp(s,r,u,null,l)}}function um(s){return s=Ul(s),dm(s)}var Ld=null;function dm(s){if(Ld=null,s=Oe(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=c(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Ld=s,null}function OT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fn()){case _t:return 2;case Pt:return 8;case zn:case ts:return 32;case Ns:return 268435456;default:return 32}default:return 32}}var hm=!1,Dr=null,Mr=null,kr=null,Ic=new Map,Rc=new Map,Vr=[],tN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FT(s,r){switch(s){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Ic.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(r.pointerId)}}function Nc(s,r,l,u,y,T){return s===null||s.nativeEvent!==T?(s={blockedOn:r,domEventName:l,eventSystemFlags:u,nativeEvent:T,targetContainers:[y]},r!==null&&(r=Ie(r),r!==null&&LT(r)),s):(s.eventSystemFlags|=u,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function nN(s,r,l,u,y){switch(r){case"focusin":return Dr=Nc(Dr,s,r,l,u,y),!0;case"dragenter":return Mr=Nc(Mr,s,r,l,u,y),!0;case"mouseover":return kr=Nc(kr,s,r,l,u,y),!0;case"pointerover":var T=y.pointerId;return Ic.set(T,Nc(Ic.get(T)||null,s,r,l,u,y)),!0;case"gotpointercapture":return T=y.pointerId,Rc.set(T,Nc(Rc.get(T)||null,s,r,l,u,y)),!0}return!1}function qT(s){var r=Oe(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){s.blockedOn=r,wt(s.priority,function(){if(l.tag===13){var u=ui();u=Ds(u);var y=wa(l,u);y!==null&&di(y,l,u),lm(l,u)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Od(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=um(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Vl=u,l.target.dispatchEvent(u),Vl=null}else return r=Ie(l),r!==null&&LT(r),s.blockedOn=l,!1;r.shift()}return!0}function BT(s,r,l){Od(s)&&l.delete(r)}function iN(){hm=!1,Dr!==null&&Od(Dr)&&(Dr=null),Mr!==null&&Od(Mr)&&(Mr=null),kr!==null&&Od(kr)&&(kr=null),Ic.forEach(BT),Rc.forEach(BT)}function Fd(s,r){s.blockedOn===r&&(s.blockedOn=null,hm||(hm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,iN)))}var qd=null;function HT(s){qd!==s&&(qd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){qd===s&&(qd=null);for(var r=0;r<s.length;r+=3){var l=s[r],u=s[r+1],y=s[r+2];if(typeof u!="function"){if(dm(u||l)===null)continue;break}var T=Ie(l);T!==null&&(s.splice(r,3),r-=3,dp(T,{pending:!0,data:y,method:l.method,action:u},u,y))}}))}function xc(s){function r(q){return Fd(q,s)}Dr!==null&&Fd(Dr,s),Mr!==null&&Fd(Mr,s),kr!==null&&Fd(kr,s),Ic.forEach(r),Rc.forEach(r);for(var l=0;l<Vr.length;l++){var u=Vr[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Vr.length&&(l=Vr[0],l.blockedOn===null);)qT(l),l.blockedOn===null&&Vr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var y=l[u],T=l[u+1],C=y[vt]||null;if(typeof T=="function")C||HT(l);else if(C){var I=null;if(T&&T.hasAttribute("formAction")){if(y=T,C=T[vt]||null)I=C.formAction;else if(dm(y)!==null)continue}else I=C.action;typeof I=="function"?l[u+1]=I:(l.splice(u,3),u-=3),HT(l)}}}function fm(s){this._internalRoot=s}Bd.prototype.render=fm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,u=ui();VT(l,u,s,r,null,null)},Bd.prototype.unmount=fm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;VT(s.current,2,null,s,null,null),Ad(),r[Zt]=null}};function Bd(s){this._internalRoot=s}Bd.prototype.unstable_scheduleHydration=function(s){if(s){var r=ii();s={blockedOn:null,target:s,priority:r};for(var l=0;l<Vr.length&&r!==0&&r<Vr[l].priority;l++);Vr.splice(l,0,s),l===0&&qT(s)}};var GT=e.version;if(GT!=="19.1.1")throw Error(i(527,GT,"19.1.1"));pe.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(r),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var sN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{kn=Hd.inject(sN),ot=Hd}catch{}}return Pc.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,u="",y=rv,T=ov,C=av,I=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(I=r.unstable_transitionCallbacks)),r=MT(s,1,!1,null,null,l,u,y,T,C,I,null),s[Zt]=r.current,Jp(s),new fm(r)},Pc.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var u=!1,y="",T=rv,C=ov,I=av,q=null,K=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(q=l.unstable_transitionCallbacks),l.formState!==void 0&&(K=l.formState)),r=MT(s,1,!0,r,l??null,u,y,T,C,I,q,K),r.context=kT(null),l=r.current,u=ui(),u=Ds(u),y=_r(u),y.callback=null,vr(l,y,u),l=u,r.current.lanes=l,dt(r,l),fs(r),s[Zt]=r.current,Jp(s),new Bd(r)},Pc.version="19.1.1",Pc}var ZT;function pN(){if(ZT)return gm.exports;ZT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gm.exports=fN(),gm.exports}var mN=pN();const gN="modulepreload",yN=function(n){return"/"+n},eE={},nl=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let f=function(h){return Promise.all(h.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");o=f(t.map(h=>{if(h=yN(h),h in eE)return;eE[h]=!0;const v=h.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${E}`))return;const A=document.createElement("link");if(A.rel=v?"stylesheet":gN,v||(A.as="script"),A.crossOrigin="",A.href=h,d&&A.setAttribute("nonce",d),document.head.appendChild(A),v)return new Promise((N,L)=>{A.addEventListener("load",N),A.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},_N=()=>{};var tE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},vN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],d=n[t++],f=((o&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},dS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,d=c?n[o+1]:0,f=o+2<n.length,h=f?n[o+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let A=(d&15)<<2|h>>6,N=h&63;f||(N=64,c||(A=64)),i.push(t[v],t[E],t[A],t[N])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||h==null||E==null)throw new TN;const A=a<<2|d>>4;if(i.push(A),h!==64){const N=d<<4&240|h>>2;if(i.push(N),E!==64){const L=h<<6&192|E;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EN=function(n){const e=uS(n);return dS.encodeByteArray(e,!0)},ph=function(n){return EN(n).replace(/\./g,"")},hS=function(n){try{return dS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=()=>AN().__FIREBASE_DEFAULTS__,wN=()=>{if(typeof process>"u"||typeof tE>"u")return;const n=tE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},CN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hS(n[1]);return e&&JSON.parse(e)},Hh=()=>{try{return _N()||SN()||wN()||CN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fS=n=>Hh()?.emulatorHosts?.[n],pS=n=>{const e=fS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},mS=()=>Hh()?.config,gS=n=>Hh()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ph(JSON.stringify(t)),ph(JSON.stringify(c)),""].join(".")}const Gc={};function RN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gc))Gc[e]?n.emulator.push(e):n.prod.push(e);return n}function NN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let nE=!1;function Cg(n,e){if(typeof window>"u"||typeof document>"u"||!ia(window.location.host)||Gc[n]===e||Gc[n]||nE)return;Gc[n]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",a=RN().prod.length>0;function c(){const A=document.getElementById(i);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function f(A,N){A.setAttribute("width","24"),A.setAttribute("id",N),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function h(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{nE=!0,c()},A}function v(A,N){A.setAttribute("id",N),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=NN(i),N=t("text"),L=document.getElementById(N)||document.createElement("span"),F=t("learnmore"),U=document.getElementById(F)||document.createElement("a"),Q=t("preprendIcon"),H=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const z=A.element;d(z),v(U,F);const re=h();f(H,Q),z.append(H,L,U,re),document.body.appendChild(z)}a?(L.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function bN(){const n=Hh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function MN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kN(){const n=Dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VN(){return!bN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UN(){try{return typeof indexedDB=="object"}catch{return!1}}function LN(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="FirebaseError";class Ss extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ON,Object.setPrototypeOf(this,Ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hu.prototype.create)}}class hu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?FN(a,i):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Ss(o,d,i)}}function FN(n,e){return n.replace(qN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const qN=/\{\$([^}]+)}/g;function BN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ko(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],c=e[o];if(iE(a)&&iE(c)){if(!Ko(a,c))return!1}else if(a!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function iE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Vc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Uc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function HN(n,e){const t=new GN(n,e);return t.subscribe.bind(t)}class GN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");zN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Tm),o.error===void 0&&(o.error=Tm),o.complete===void 0&&(o.complete=Tm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n){return n&&n._delegate?n._delegate:n}class Jr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new IN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YN(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&c.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$N(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $N(n){return n===zo?void 0:n}function YN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(We||(We={}));const JN={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},QN=We.INFO,WN={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},XN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=WN[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ig{constructor(e){this.name=e,this._logLevel=QN,this._logHandler=XN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const ZN=(n,e)=>e.some(t=>n instanceof t);let sE,rE;function ex(){return sE||(sE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tx(){return rE||(rE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _S=new WeakMap,qm=new WeakMap,vS=new WeakMap,Em=new WeakMap,Rg=new WeakMap;function nx(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(jr(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&_S.set(t,n)}).catch(()=>{}),Rg.set(e,n),e}function ix(n){if(qm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});qm.set(n,e)}let Bm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function sx(n){Bm=n(Bm)}function rx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Am(this),e,...t);return vS.set(i,e.sort?e.sort():[e]),jr(i)}:tx().includes(n)?function(...e){return n.apply(Am(this),e),jr(_S.get(this))}:function(...e){return jr(n.apply(Am(this),e))}}function ox(n){return typeof n=="function"?rx(n):(n instanceof IDBTransaction&&ix(n),ZN(n,ex())?new Proxy(n,Bm):n)}function jr(n){if(n instanceof IDBRequest)return nx(n);if(Em.has(n))return Em.get(n);const e=ox(n);return e!==n&&(Em.set(n,e),Rg.set(e,n)),e}const Am=n=>Rg.get(n);function ax(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),d=jr(c);return i&&c.addEventListener("upgradeneeded",f=>{i(jr(c.result),f.oldVersion,f.newVersion,jr(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const lx=["get","getKey","getAll","getAllKeys","count"],cx=["put","add","delete","clear"],Sm=new Map;function oE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Sm.get(e))return Sm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=cx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||lx.includes(t)))return;const a=async function(c,...d){const f=this.transaction(c,o?"readwrite":"readonly");let h=f.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&f.done]))[0]};return Sm.set(e,a),a}sx(n=>({...n,get:(e,t,i)=>oE(e,t)||n.get(e,t,i),has:(e,t)=>!!oE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function dx(n){return n.getComponent()?.type==="VERSION"}const Hm="@firebase/app",aE="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Ig("@firebase/app"),hx="@firebase/app-compat",fx="@firebase/analytics-compat",px="@firebase/analytics",mx="@firebase/app-check-compat",gx="@firebase/app-check",yx="@firebase/auth",_x="@firebase/auth-compat",vx="@firebase/database",Tx="@firebase/data-connect",Ex="@firebase/database-compat",Ax="@firebase/functions",Sx="@firebase/functions-compat",wx="@firebase/installations",Cx="@firebase/installations-compat",Ix="@firebase/messaging",Rx="@firebase/messaging-compat",Nx="@firebase/performance",xx="@firebase/performance-compat",bx="@firebase/remote-config",Px="@firebase/remote-config-compat",Dx="@firebase/storage",Mx="@firebase/storage-compat",kx="@firebase/firestore",Vx="@firebase/ai",Ux="@firebase/firestore-compat",Lx="firebase",Ox="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",Fx={[Hm]:"fire-core",[hx]:"fire-core-compat",[px]:"fire-analytics",[fx]:"fire-analytics-compat",[gx]:"fire-app-check",[mx]:"fire-app-check-compat",[yx]:"fire-auth",[_x]:"fire-auth-compat",[vx]:"fire-rtdb",[Tx]:"fire-data-connect",[Ex]:"fire-rtdb-compat",[Ax]:"fire-fn",[Sx]:"fire-fn-compat",[wx]:"fire-iid",[Cx]:"fire-iid-compat",[Ix]:"fire-fcm",[Rx]:"fire-fcm-compat",[Nx]:"fire-perf",[xx]:"fire-perf-compat",[bx]:"fire-rc",[Px]:"fire-rc-compat",[Dx]:"fire-gcs",[Mx]:"fire-gcs-compat",[kx]:"fire-fst",[Ux]:"fire-fst-compat",[Vx]:"fire-vertex","fire-js":"fire-js",[Lx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map,qx=new Map,zm=new Map;function lE(n,e){try{n.container.addComponent(e)}catch(t){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jo(n){const e=n.name;if(zm.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,n);for(const t of mh.values())lE(t,n);for(const t of qx.values())lE(t,n);return!0}function Gh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new hu("app","Firebase",Bx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=Ox;function TS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Gm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw $r.create("bad-app-name",{appName:String(o)});if(t||(t=mS()),!t)throw $r.create("no-options");const a=mh.get(o);if(a){if(Ko(t,a.options)&&Ko(i,a.config))return a;throw $r.create("duplicate-app",{appName:o})}const c=new KN(o);for(const f of zm.values())c.addComponent(f);const d=new Hx(t,i,c);return mh.set(o,d),d}function Ng(n=Gm){const e=mh.get(n);if(!e&&n===Gm&&mS())return TS();if(!e)throw $r.create("no-app",{appName:n});return e}function ys(n,e,t){let i=Fx[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(c.join(" "));return}Jo(new Jr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="firebase-heartbeat-database",zx=1,nu="firebase-heartbeat-store";let wm=null;function ES(){return wm||(wm=ax(Gx,zx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(nu)}catch(t){console.warn(t)}}}}).catch(n=>{throw $r.create("idb-open",{originalErrorMessage:n.message})})),wm}async function jx(n){try{const t=(await ES()).transaction(nu),i=await t.objectStore(nu).get(AS(n));return await t.done,i}catch(e){if(e instanceof Ss)nr.warn(e.message);else{const t=$r.create("idb-get",{originalErrorMessage:e?.message});nr.warn(t.message)}}}async function cE(n,e){try{const i=(await ES()).transaction(nu,"readwrite");await i.objectStore(nu).put(e,AS(n)),await i.done}catch(t){if(t instanceof Ss)nr.warn(t.message);else{const i=$r.create("idb-set",{originalErrorMessage:t?.message});nr.warn(i.message)}}}function AS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=1024,Yx=30;class Kx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Qx(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=uE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Yx){const o=Wx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){nr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=uE(),{heartbeatsToSend:t,unsentEntries:i}=Jx(this._heartbeatsCache.heartbeats),o=ph(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return nr.warn(e),""}}}function uE(){return new Date().toISOString().substring(0,10)}function Jx(n,e=$x){const t=[];let i=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),dE(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),dE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Qx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UN()?LN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await jx(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return cE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return cE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function dE(n){return ph(JSON.stringify({version:2,heartbeats:n})).length}function Wx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n){Jo(new Jr("platform-logger",e=>new ux(e),"PRIVATE")),Jo(new Jr("heartbeat",e=>new Kx(e),"PRIVATE")),ys(Hm,aE,n),ys(Hm,aE,"esm2020"),ys("fire-js","")}Xx("");function SS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zx=SS,wS=new hu("auth","Firebase",SS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Ig("@firebase/auth");function eb(n,...e){gh.logLevel<=We.WARN&&gh.warn(`Auth (${sa}): ${n}`,...e)}function Zd(n,...e){gh.logLevel<=We.ERROR&&gh.error(`Auth (${sa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n,...e){throw xg(n,...e)}function fi(n,...e){return xg(n,...e)}function CS(n,e,t){const i={...Zx(),[e]:t};return new hu("auth","Firebase",i).create(e,{appName:n.name})}function _s(n){return CS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return wS.create(n,...e)}function Te(n,e,...t){if(!n)throw xg(e,...t)}function Ws(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zd(e),new Error(e)}function ir(n,e){n||Ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(){return typeof self<"u"&&self.location?.href||""}function IS(){return hE()==="http:"||hE()==="https:"}function hE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IS()||DN()||"connection"in navigator)?navigator.onLine:!0}function nb(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ir(t>e,"Short delay should be less than long delay!"),this.isMobile=xN()||MN()}get(){return tb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(n,e){ir(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rb=new fu(3e4,6e4);function ei(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function bi(n,e,t,i,o={}){return NS(n,o,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const d=vl({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...a};return PN()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&ia(n.emulatorConfig.host)&&(h.credentials="include"),RS.fetch()(await xS(n,n.config.apiHost,t,d),h)})}async function NS(n,e,t){n._canInitEmulator=!1;const i={...ib,...e};try{const o=new ab(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Lc(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[f,h]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lc(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Lc(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Lc(n,"user-disabled",c);const v=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw CS(n,v,h);Qi(n,v)}}catch(o){if(o instanceof Ss)throw o;Qi(n,"network-request-failed",{message:String(o)})}}async function so(n,e,t,i,o={}){const a=await bi(n,e,t,i,o);return"mfaPendingCredential"in a&&Qi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function xS(n,e,t,i){const o=`${e}${t}?${i}`,a=n,c=a.config.emulator?bg(n.config,o):`${n.config.apiScheme}://${o}`;return sb.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function ob(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ab{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(fi(this.auth,"network-request-failed")),rb.get())})}}function Lc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=fi(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(n){return n!==void 0&&n.getResponse!==void 0}function pE(n){return n!==void 0&&n.enterprise!==void 0}class bS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ob(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lb(n){return(await bi(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function PS(n,e){return bi(n,"GET","/v2/recaptchaConfig",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cb(n,e){return bi(n,"POST","/v1/accounts:delete",e)}async function yh(n,e){return bi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ub(n,e=!1){const t=Vt(n),i=await t.getIdToken(e),o=Pg(i);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a?.sign_in_provider;return{claims:o,token:i,authTime:zc(Cm(o.auth_time)),issuedAtTime:zc(Cm(o.iat)),expirationTime:zc(Cm(o.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Cm(n){return Number(n)*1e3}function Pg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Zd("JWT malformed, contained fewer than 3 sections"),null;try{const o=hS(t);return o?JSON.parse(o):(Zd("Failed to decode base64 JWT payload"),null)}catch(o){return Zd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function mE(n){const e=Pg(n);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ss&&db(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function db({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zc(this.lastLoginAt),this.creationTime=zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(n){const e=n.auth,t=await n.getIdToken(),i=await iu(n,yh(e,{idToken:t}));Te(i?.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=o.providerUserInfo?.length?DS(o.providerUserInfo):[],c=pb(n.providerData,a),d=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!c?.length,h=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new $m(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,v)}async function fb(n){const e=Vt(n);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pb(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function DS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(n,e){const t=await NS(n,{},async()=>{const i=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=await xS(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:i};return n.emulatorConfig&&ia(n.emulatorConfig.host)&&(f.credentials="include"),RS.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function gb(n,e){return bi(n,"POST","/v2/accounts:revokeToken",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=mE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await mb(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,c=new il;return i&&(Te(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Te(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Te(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new il,this.toJSON())}_performRefresh(){return Ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(n,e){Te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Gi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new hb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $m(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await iu(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ub(this,e)}reload(){return fb(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await _h(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await iu(this,cb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,f=t._redirectEventId??void 0,h=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:N,providerData:L,stsTokenManager:F}=t;Te(E&&F,e,"internal-error");const U=il.fromJSON(this.name,F);Te(typeof E=="string",e,"internal-error"),Lr(i,e.name),Lr(o,e.name),Te(typeof A=="boolean",e,"internal-error"),Te(typeof N=="boolean",e,"internal-error"),Lr(a,e.name),Lr(c,e.name),Lr(d,e.name),Lr(f,e.name),Lr(h,e.name),Lr(v,e.name);const Q=new Gi({uid:E,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:N,photoURL:c,phoneNumber:a,tenantId:d,stsTokenManager:U,createdAt:h,lastLoginAt:v});return L&&Array.isArray(L)&&(Q.providerData=L.map(H=>({...H}))),f&&(Q._redirectEventId=f),Q}static async _fromIdTokenResponse(e,t,i=!1){const o=new il;o.updateFromServerResponse(t);const a=new Gi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await _h(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?DS(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!a?.length,d=new il;d.updateFromIdToken(i);const f=new Gi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new $m(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=new Map;function Xs(n){ir(n instanceof Function,"Expected a class definition");let e=gE.get(n);return e?(ir(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}MS.type="NONE";const yE=MS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(n,e,t){return`firebase:${n}:${e}:${t}`}class sl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=eh(this.userKey,o.apiKey,a),this.fullPersistenceKey=eh("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yh(this.auth,{idToken:e}).catch(()=>{});return t?Gi._fromGetAccountInfoResponse(this.auth,t,e):null}return Gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new sl(Xs(yE),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||Xs(yE);const c=eh(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const v=await h._get(c);if(v){let E;if(typeof v=="string"){const A=await yh(e,{idToken:v}).catch(()=>{});if(!A)break;E=await Gi._fromGetAccountInfoResponse(e,A,v)}else E=Gi._fromJSON(e,v);h!==a&&(d=E),a=h;break}}catch{}const f=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new sl(a,e,i):(a=f[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(c)}catch{}})),new sl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FS(e))return"Blackberry";if(qS(e))return"Webos";if(VS(e))return"Safari";if((e.includes("chrome/")||US(e))&&!e.includes("edge/"))return"Chrome";if(OS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function kS(n=Dn()){return/firefox\//i.test(n)}function VS(n=Dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function US(n=Dn()){return/crios\//i.test(n)}function LS(n=Dn()){return/iemobile/i.test(n)}function OS(n=Dn()){return/android/i.test(n)}function FS(n=Dn()){return/blackberry/i.test(n)}function qS(n=Dn()){return/webos/i.test(n)}function Dg(n=Dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yb(n=Dn()){return Dg(n)&&!!window.navigator?.standalone}function _b(){return kN()&&document.documentMode===10}function BS(n=Dn()){return Dg(n)||OS(n)||qS(n)||FS(n)||/windows phone/i.test(n)||LS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(n,e=[]){let t;switch(n){case"Browser":t=_E(Dn());break;case"Worker":t=`${_E(Dn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((c,d)=>{try{const f=e(a);c(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(n,e={}){return bi(n,"GET","/v2/passwordPolicy",ei(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=6;class Ab{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Eb,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vE(this),this.idTokenSubscription=new vE(this),this.beforeStateQueue=new vb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await sl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yh(this,{idToken:e}),i=await Gi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(_s(this));const t=e?Vt(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Tb(this),t=new Ab(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await gb(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xs(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await sl.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,o);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&eb(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ws(n){return Vt(n)}class vE{constructor(e){this.auth=e,this.observer=null,this.addObserver=HN(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wb(n){pu=n}function Mg(n){return pu.loadJS(n)}function Cb(){return pu.recaptchaV2Script}function Ib(){return pu.recaptchaEnterpriseScript}function Rb(){return pu.gapiScript}function GS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=500,xb=6e4,Gd=1e12;class bb{constructor(e){this.auth=e,this.counter=Gd,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new Mb(e,this.auth.name,t||{})),this.counter++,i}reset(e){const t=e||Gd;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Gd;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Gd;return this._widgets.get(t)?.execute(),""}}class Pb{constructor(){this.enterprise=new Db}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Db{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Mb{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;Te(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=kb(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},xb)},Nb))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function kb(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const Vb="recaptcha-enterprise",jc="NO_RECAPTCHA";class zS{constructor(e){this.type=Vb,this.auth=ws(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{PS(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new bS(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}}).catch(f=>{d(f)})})}function o(a,c,d){const f=window.grecaptcha;pE(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{c(h)}).catch(()=>{c(jc)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Pb().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{i(this.auth).then(d=>{if(!t&&pE(window.grecaptcha))o(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=Ib();f.length!==0&&(f+=d),Mg(f).then(()=>{o(d,a,c)}).catch(h=>{c(h)})}}).catch(d=>{c(d)})})}}async function Dc(n,e,t,i=!1,o=!1){const a=new zS(n);let c;if(o)c=jc;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function $c(n,e,t,i,o){if(o==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Dc(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Dc(n,e,t,t==="getOobCode");return i(n,c)}else return Promise.reject(a)});else if(o==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const a=await Dc(n,e,t);return i(n,a).catch(async c=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const d=await Dc(n,e,t,!1,!0);return i(n,d)}return Promise.reject(c)})}else{const a=await Dc(n,e,t,!1,!0);return i(n,a)}else return Promise.reject(o+" provider is not supported.")}async function Ub(n){const e=ws(n),t=await PS(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new bS(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new zS(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(n,e){const t=Gh(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ko(a,e??{}))return o;Qi(o,"already-initialized")}return t.initialize({options:e})}function Ob(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Xs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Fb(n,e,t){const i=ws(n);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=jS(e),{host:c,port:d}=qb(e),f=d===null?"":`:${d}`,h={url:`${a}//${c}${f}/`},v=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(Ko(h,i.config.emulator)&&Ko(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,ia(c)?(wg(`${a}//${c}${f}`),Cg("Auth",!0)):Bb()}function jS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qb(n){const e=jS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:TE(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:TE(c)}}}function TE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Bb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ws("not implemented")}_getIdTokenResponse(e){return Ws("not implemented")}_linkToIdToken(e,t){return Ws("not implemented")}_getReauthenticationResolver(e){return Ws("not implemented")}}async function Hb(n,e){return bi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(n,e){return so(n,"POST","/v1/accounts:signInWithPassword",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(n,e){return so(n,"POST","/v1/accounts:signInWithEmailLink",ei(n,e))}async function jb(n,e){return so(n,"POST","/v1/accounts:signInWithEmailLink",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends zh{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new su(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new su(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $c(e,t,"signInWithPassword",Gb,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return zb(e,{email:this._email,oobCode:this._password});default:Qi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $c(e,i,"signUpPassword",Hb,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return jb(e,{idToken:t,email:this._email,oobCode:this._password});default:Qi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(n,e){return so(n,"POST","/v1/accounts:signInWithIdp",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="http://localhost";class Qo extends zh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const c=new Qo(i,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return rl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,rl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,rl(e,t)}buildRequest(){const e={requestUri:$b,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EE(n,e){return bi(n,"POST","/v1/accounts:sendVerificationCode",ei(n,e))}async function Yb(n,e){return so(n,"POST","/v1/accounts:signInWithPhoneNumber",ei(n,e))}async function Kb(n,e){const t=await so(n,"POST","/v1/accounts:signInWithPhoneNumber",ei(n,e));if(t.temporaryProof)throw Lc(n,"account-exists-with-different-credential",t);return t}const Jb={USER_NOT_FOUND:"user-not-found"};async function Qb(n,e){const t={...e,operation:"REAUTH"};return so(n,"POST","/v1/accounts:signInWithPhoneNumber",ei(n,t),Jb)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends zh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Yc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Yc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Yb(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Kb(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Qb(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:o,temporaryProof:a}=e;return!i&&!t&&!o&&!a?null:new Yc({verificationId:t,verificationCode:i,phoneNumber:o,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Xb(n){const e=Vc(Uc(n)).link,t=e?Vc(Uc(e)).deep_link_id:null,i=Vc(Uc(n)).deep_link_id;return(i?Vc(Uc(i)).link:null)||i||t||e||n}class kg{constructor(e){const t=Vc(Uc(e)),i=t.apiKey??null,o=t.oobCode??null,a=Wb(t.mode??null);Te(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Xb(e);try{return new kg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.providerId=Tl.PROVIDER_ID}static credential(e,t){return su._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=kg.parseLink(t);return Te(i,"argument-error"),su._fromEmailAndCode(e,i.code,i.tenantId)}}Tl.PROVIDER_ID="password";Tl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Tl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends $S{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends mu{constructor(){super("facebook.com")}static credential(e){return Qo._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return qr.credential(t,i)}catch{return null}}}qr.GOOGLE_SIGN_IN_METHOD="google.com";qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends mu{constructor(){super("github.com")}static credential(e){return Qo._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.GITHUB_SIGN_IN_METHOD="github.com";Br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends mu{constructor(){super("twitter.com")}static credential(e,t){return Qo._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Hr.credential(t,i)}catch{return null}}}Hr.TWITTER_SIGN_IN_METHOD="twitter.com";Hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(n,e){return so(n,"POST","/v1/accounts:signUp",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Gi._fromIdTokenResponse(e,i,o),c=AE(i);return new Qr({user:a,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=AE(i);return new Qr({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function AE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(n){if(Wn(n.app))return Promise.reject(_s(n));const e=ws(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Qr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await Zb(e,{returnSecureToken:!0}),i=await Qr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends Ss{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new vh(e,t,i,o)}}function YS(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?vh._fromErrorAndOperation(n,a,e,i):a})}async function e1(n,e,t=!1){const i=await iu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Qr._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t1(n,e,t=!1){const{auth:i}=n;if(Wn(i.app))return Promise.reject(_s(i));const o="reauthenticate";try{const a=await iu(n,YS(i,o,e,n),t);Te(a.idToken,i,"internal-error");const c=Pg(a.idToken);Te(c,i,"internal-error");const{sub:d}=c;return Te(n.uid===d,i,"user-mismatch"),Qr._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&Qi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(n,e,t=!1){if(Wn(n.app))return Promise.reject(_s(n));const i="signIn",o=await YS(n,i,e),a=await Qr._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function JS(n,e){return KS(ws(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(n){const e=ws(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function i1(n,e,t){return Wn(n.app)?Promise.reject(_s(n)):JS(Vt(n),Tl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&n1(n),i})}function s1(n,e,t,i){return Vt(n).onIdTokenChanged(e,t,i)}function r1(n,e,t){return Vt(n).beforeAuthStateChanged(e,t)}function QS(n,e,t,i){return Vt(n).onAuthStateChanged(e,t,i)}function o1(n){return Vt(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(n,e){return bi(n,"POST","/v2/accounts/mfaEnrollment:start",ei(n,e))}const Th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=1e3,l1=10;class XS extends WS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);_b()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,l1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},a1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XS.type="LOCAL";const c1=XS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS extends WS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ZS.type="SESSION";const ew=ZS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new jh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(c).map(async h=>h(t.origin,a)),f=await u1(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((d,f)=>{const h=Vg("",20);o.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===h)switch(A.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(A.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return window}function h1(n){Yt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(){return typeof Yt().WorkerGlobalScope<"u"&&typeof Yt().importScripts=="function"}async function f1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p1(){return navigator?.serviceWorker?.controller||null}function m1(){return Ug()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="firebaseLocalStorageDb",g1=1,Eh="firebaseLocalStorage",nw="fbase_key";class gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $h(n,e){return n.transaction([Eh],e?"readwrite":"readonly").objectStore(Eh)}function y1(){const n=indexedDB.deleteDatabase(tw);return new gu(n).toPromise()}function Ym(){const n=indexedDB.open(tw,g1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Eh,{keyPath:nw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Eh)?e(i):(i.close(),await y1(),e(await Ym()))})})}async function CE(n,e,t){const i=$h(n,!0).put({[nw]:e,value:t});return new gu(i).toPromise()}async function _1(n,e){const t=$h(n,!1).get(e),i=await new gu(t).toPromise();return i===void 0?null:i.value}function IE(n,e){const t=$h(n,!0).delete(e);return new gu(t).toPromise()}const v1=800,T1=3;class iw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>T1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ug()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jh._getInstance(m1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await f1(),!this.activeServiceWorker)return;this.sender=new d1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await CE(e,Th,"1"),await IE(e,Th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>CE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>_1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>IE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=$h(o,!1).getAll();return new gu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iw.type="LOCAL";const E1=iw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n,e){return bi(n,"POST","/v2/accounts/mfaSignIn:start",ei(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=GS("rcb"),A1=new fu(3e4,6e4);class S1{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Yt().grecaptcha?.render}load(e,t=""){return Te(w1(t),e,"argument-error"),this.shouldResolveImmediately(t)&&fE(Yt().grecaptcha)?Promise.resolve(Yt().grecaptcha):new Promise((i,o)=>{const a=Yt().setTimeout(()=>{o(fi(e,"network-request-failed"))},A1.get());Yt()[Im]=()=>{Yt().clearTimeout(a),delete Yt()[Im];const d=Yt().grecaptcha;if(!d||!fE(d)){o(fi(e,"internal-error"));return}const f=d.render;d.render=(h,v)=>{const E=f(h,v);return this.counter++,E},this.hostLanguage=t,i(d)};const c=`${Cb()}?${vl({onload:Im,render:"explicit",hl:t})}`;Mg(c).catch(()=>{clearTimeout(a),o(fi(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Yt().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function w1(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class C1{async load(e){return new bb(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc="recaptcha",I1={theme:"light",type:"image"};class R1{constructor(e,t,i={...I1}){this.parameters=i,this.type=Kc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ws(e),this.isInvisible=this.parameters.size==="invisible",Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;Te(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new C1:new S1,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(o=>{const a=c=>{c&&(this.tokenChangeListeners.delete(a),o(c))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=Yt()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Te(IS()&&!Ug(),this.auth,"internal-error"),await N1(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await lb(this.auth);Te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function N1(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Yc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function b1(n,e,t){if(Wn(n.app))return Promise.reject(_s(n));const i=ws(n),o=await P1(i,e,Vt(t));return new x1(o,a=>JS(i,a))}async function P1(n,e,t){if(!n._getRecaptchaConfig())try{await Ub(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i){Te(o.type==="enroll",n,"internal-error");const a={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await $c(n,a,"mfaSmsEnrollment",async(h,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===jc){Te(t?.type===Kc,h,"argument-error");const E=await Rm(h,v,t);return wE(h,E)}return wE(h,v)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{Te(o.type==="signin",n,"internal-error");const a=i.multiFactorHint?.uid||i.multiFactorUid;Te(a,n,"missing-multi-factor-info");const c={mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await $c(n,c,"mfaSmsSignIn",async(v,E)=>{if(E.phoneSignInInfo.captchaResponse===jc){Te(t?.type===Kc,v,"argument-error");const A=await Rm(v,E,t);return RE(v,A)}return RE(v,E)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await $c(n,o,"sendVerificationCode",async(f,h)=>{if(h.captchaResponse===jc){Te(t?.type===Kc,f,"argument-error");const v=await Rm(f,h,t);return EE(f,v)}return EE(f,h)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{t?._reset()}}async function Rm(n,e,t){Te(t.type===Kc,n,"argument-error");const i=await t.verify();Te(typeof i=="string",n,"argument-error");const o={...e};if("phoneEnrollmentInfo"in o){const a=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.captchaResponse,d=o.phoneEnrollmentInfo.clientType,f=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:i,captchaResponse:c,clientType:d,recaptchaVersion:f}}),o}else if("phoneSignInInfo"in o){const a=o.phoneSignInInfo.captchaResponse,c=o.phoneSignInInfo.clientType,d=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:a,clientType:c,recaptchaVersion:d}}),o}else return Object.assign(o,{recaptchaToken:i}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(n,e){return e?Xs(e):(Te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends zh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function M1(n){return KS(n.auth,new Lg(n),n.bypassAuthState)}function k1(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),t1(t,new Lg(n),n.bypassAuthState)}async function V1(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),e1(t,new Lg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M1;case"linkViaPopup":case"linkViaRedirect":return V1;case"reauthViaPopup":case"reauthViaRedirect":return k1;default:Qi(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=new fu(2e3,1e4);class Za extends sw{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,U1.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="pendingRedirect",th=new Map;class O1 extends sw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=th.get(this.auth._key());if(!e){try{const i=await F1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}th.set(this.auth._key(),e)}return this.bypassAuthState||th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F1(n,e){const t=H1(e),i=B1(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function q1(n,e){th.set(n._key(),e)}function B1(n){return Xs(n._redirectPersistence)}function H1(n){return eh(L1,n.config.apiKey,n.name)}async function G1(n,e,t=!1){if(Wn(n.app))return Promise.reject(_s(n));const i=ws(n),o=D1(i,e),c=await new O1(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=600*1e3;class j1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(fi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z1&&this.cachedEventUids.clear(),this.cachedEventUids.has(NE(e))}saveEventToCache(e){this.cachedEventUids.add(NE(e)),this.lastProcessedEventTime=Date.now()}}function NE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function rw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function $1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(n,e={}){return bi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J1=/^https?/;async function Q1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Y1(n);for(const t of e)try{if(W1(t))return}catch{}Qi(n,"unauthorized-domain")}function W1(n){const e=jm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!J1.test(t))return!1;if(K1.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new fu(3e4,6e4);function xE(){const n=Yt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Z1(n){return new Promise((e,t)=>{function i(){xE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xE(),t(fi(n,"network-request-failed"))},timeout:X1.get()})}if(Yt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Yt().gapi?.load)i();else{const o=GS("iframefcb");return Yt()[o]=()=>{gapi.load?i():t(fi(n,"network-request-failed"))},Mg(`${Rb()}?onload=${o}`).catch(a=>t(a))}}).catch(e=>{throw nh=null,e})}let nh=null;function eP(n){return nh=nh||Z1(n),nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new fu(5e3,15e3),nP="__/auth/iframe",iP="emulator/auth/iframe",sP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oP(n){const e=n.config;Te(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bg(e,iP):`https://${n.config.authDomain}/${nP}`,i={apiKey:e.apiKey,appName:n.name,v:sa},o=rP.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${vl(i).slice(1)}`}async function aP(n){const e=await eP(n),t=Yt().gapi;return Te(t,n,"internal-error"),e.open({where:document.body,url:oP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sP,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const c=fi(n,"network-request-failed"),d=Yt().setTimeout(()=>{a(c)},tP.get());function f(){Yt().clearTimeout(d),o(i)}i.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cP=500,uP=600,dP="_blank",hP="http://localhost";class bE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fP(n,e,t,i=cP,o=uP){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f={...lP,width:i.toString(),height:o.toString(),top:a,left:c},h=Dn().toLowerCase();t&&(d=US(h)?dP:t),kS(h)&&(e=e||hP,f.scrollbars="yes");const v=Object.entries(f).reduce((A,[N,L])=>`${A}${N}=${L},`,"");if(yb(h)&&d!=="_self")return pP(e||"",d),new bE(null);const E=window.open(e||"",d,v);Te(E,n,"popup-blocked");try{E.focus()}catch{}return new bE(E)}function pP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="__/auth/handler",gP="emulator/auth/handler",yP=encodeURIComponent("fac");async function PE(n,e,t,i,o,a){Te(n.config.authDomain,n,"auth-domain-config-required"),Te(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:sa,eventId:o};if(e instanceof $S){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",BN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof mu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),h=f?`#${yP}=${encodeURIComponent(f)}`:"";return`${_P(n)}?${vl(d).slice(1)}${h}`}function _P({config:n}){return n.emulator?bg(n,gP):`https://${n.authDomain}/${mP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="webStorageSupport";class vP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ew,this._completeRedirectFn=G1,this._overrideRedirectResult=q1}async _openPopup(e,t,i,o){ir(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await PE(e,t,i,jm(),o);return fP(e,a,Vg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await PE(e,t,i,jm(),o);return h1(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ir(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await aP(e),i=new j1(e);return t.register("authEvent",o=>(Te(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nm,{type:Nm},o=>{const a=o?.[0]?.[Nm];a!==void 0&&t(!!a),Qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Q1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BS()||VS()||Dg()}}const TP=vP;var DE="@firebase/auth",ME="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SP(n){Jo(new Jr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Te(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HS(n)},h=new Sb(i,o,a,f);return Ob(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Jo(new Jr("auth-internal",e=>{const t=ws(e.getProvider("auth").getImmediate());return(i=>new EP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(DE,ME,AP(n)),ys(DE,ME,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=300,CP=gS("authIdTokenMaxAge")||wP;let kE=null;const IP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>CP)return;const o=t?.token;kE!==o&&(kE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function RP(n=Ng()){const e=Gh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Lb(n,{popupRedirectResolver:TP,persistence:[E1,c1,ew]}),i=gS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=IP(a.toString());r1(t,c,()=>c(t.currentUser)),s1(t,d=>c(d))}}const o=fS("auth");return o&&Fb(t,`http://${o}`),t}function NP(){return document.getElementsByTagName("head")?.[0]??document}wb({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=fi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",NP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SP("Browser");var VE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yr,ow;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,D){function b(){}b.prototype=D.prototype,O.F=D.prototype,O.prototype=new b,O.prototype.constructor=O,O.D=function(M,k,V){for(var x=Array(arguments.length-2),we=2;we<arguments.length;we++)x[we-2]=arguments[we];return D.prototype[k].apply(M,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,D,b){b||(b=0);const M=Array(16);if(typeof D=="string")for(var k=0;k<16;++k)M[k]=D.charCodeAt(b++)|D.charCodeAt(b++)<<8|D.charCodeAt(b++)<<16|D.charCodeAt(b++)<<24;else for(k=0;k<16;++k)M[k]=D[b++]|D[b++]<<8|D[b++]<<16|D[b++]<<24;D=O.g[0],b=O.g[1],k=O.g[2];let V=O.g[3],x;x=D+(V^b&(k^V))+M[0]+3614090360&4294967295,D=b+(x<<7&4294967295|x>>>25),x=V+(k^D&(b^k))+M[1]+3905402710&4294967295,V=D+(x<<12&4294967295|x>>>20),x=k+(b^V&(D^b))+M[2]+606105819&4294967295,k=V+(x<<17&4294967295|x>>>15),x=b+(D^k&(V^D))+M[3]+3250441966&4294967295,b=k+(x<<22&4294967295|x>>>10),x=D+(V^b&(k^V))+M[4]+4118548399&4294967295,D=b+(x<<7&4294967295|x>>>25),x=V+(k^D&(b^k))+M[5]+1200080426&4294967295,V=D+(x<<12&4294967295|x>>>20),x=k+(b^V&(D^b))+M[6]+2821735955&4294967295,k=V+(x<<17&4294967295|x>>>15),x=b+(D^k&(V^D))+M[7]+4249261313&4294967295,b=k+(x<<22&4294967295|x>>>10),x=D+(V^b&(k^V))+M[8]+1770035416&4294967295,D=b+(x<<7&4294967295|x>>>25),x=V+(k^D&(b^k))+M[9]+2336552879&4294967295,V=D+(x<<12&4294967295|x>>>20),x=k+(b^V&(D^b))+M[10]+4294925233&4294967295,k=V+(x<<17&4294967295|x>>>15),x=b+(D^k&(V^D))+M[11]+2304563134&4294967295,b=k+(x<<22&4294967295|x>>>10),x=D+(V^b&(k^V))+M[12]+1804603682&4294967295,D=b+(x<<7&4294967295|x>>>25),x=V+(k^D&(b^k))+M[13]+4254626195&4294967295,V=D+(x<<12&4294967295|x>>>20),x=k+(b^V&(D^b))+M[14]+2792965006&4294967295,k=V+(x<<17&4294967295|x>>>15),x=b+(D^k&(V^D))+M[15]+1236535329&4294967295,b=k+(x<<22&4294967295|x>>>10),x=D+(k^V&(b^k))+M[1]+4129170786&4294967295,D=b+(x<<5&4294967295|x>>>27),x=V+(b^k&(D^b))+M[6]+3225465664&4294967295,V=D+(x<<9&4294967295|x>>>23),x=k+(D^b&(V^D))+M[11]+643717713&4294967295,k=V+(x<<14&4294967295|x>>>18),x=b+(V^D&(k^V))+M[0]+3921069994&4294967295,b=k+(x<<20&4294967295|x>>>12),x=D+(k^V&(b^k))+M[5]+3593408605&4294967295,D=b+(x<<5&4294967295|x>>>27),x=V+(b^k&(D^b))+M[10]+38016083&4294967295,V=D+(x<<9&4294967295|x>>>23),x=k+(D^b&(V^D))+M[15]+3634488961&4294967295,k=V+(x<<14&4294967295|x>>>18),x=b+(V^D&(k^V))+M[4]+3889429448&4294967295,b=k+(x<<20&4294967295|x>>>12),x=D+(k^V&(b^k))+M[9]+568446438&4294967295,D=b+(x<<5&4294967295|x>>>27),x=V+(b^k&(D^b))+M[14]+3275163606&4294967295,V=D+(x<<9&4294967295|x>>>23),x=k+(D^b&(V^D))+M[3]+4107603335&4294967295,k=V+(x<<14&4294967295|x>>>18),x=b+(V^D&(k^V))+M[8]+1163531501&4294967295,b=k+(x<<20&4294967295|x>>>12),x=D+(k^V&(b^k))+M[13]+2850285829&4294967295,D=b+(x<<5&4294967295|x>>>27),x=V+(b^k&(D^b))+M[2]+4243563512&4294967295,V=D+(x<<9&4294967295|x>>>23),x=k+(D^b&(V^D))+M[7]+1735328473&4294967295,k=V+(x<<14&4294967295|x>>>18),x=b+(V^D&(k^V))+M[12]+2368359562&4294967295,b=k+(x<<20&4294967295|x>>>12),x=D+(b^k^V)+M[5]+4294588738&4294967295,D=b+(x<<4&4294967295|x>>>28),x=V+(D^b^k)+M[8]+2272392833&4294967295,V=D+(x<<11&4294967295|x>>>21),x=k+(V^D^b)+M[11]+1839030562&4294967295,k=V+(x<<16&4294967295|x>>>16),x=b+(k^V^D)+M[14]+4259657740&4294967295,b=k+(x<<23&4294967295|x>>>9),x=D+(b^k^V)+M[1]+2763975236&4294967295,D=b+(x<<4&4294967295|x>>>28),x=V+(D^b^k)+M[4]+1272893353&4294967295,V=D+(x<<11&4294967295|x>>>21),x=k+(V^D^b)+M[7]+4139469664&4294967295,k=V+(x<<16&4294967295|x>>>16),x=b+(k^V^D)+M[10]+3200236656&4294967295,b=k+(x<<23&4294967295|x>>>9),x=D+(b^k^V)+M[13]+681279174&4294967295,D=b+(x<<4&4294967295|x>>>28),x=V+(D^b^k)+M[0]+3936430074&4294967295,V=D+(x<<11&4294967295|x>>>21),x=k+(V^D^b)+M[3]+3572445317&4294967295,k=V+(x<<16&4294967295|x>>>16),x=b+(k^V^D)+M[6]+76029189&4294967295,b=k+(x<<23&4294967295|x>>>9),x=D+(b^k^V)+M[9]+3654602809&4294967295,D=b+(x<<4&4294967295|x>>>28),x=V+(D^b^k)+M[12]+3873151461&4294967295,V=D+(x<<11&4294967295|x>>>21),x=k+(V^D^b)+M[15]+530742520&4294967295,k=V+(x<<16&4294967295|x>>>16),x=b+(k^V^D)+M[2]+3299628645&4294967295,b=k+(x<<23&4294967295|x>>>9),x=D+(k^(b|~V))+M[0]+4096336452&4294967295,D=b+(x<<6&4294967295|x>>>26),x=V+(b^(D|~k))+M[7]+1126891415&4294967295,V=D+(x<<10&4294967295|x>>>22),x=k+(D^(V|~b))+M[14]+2878612391&4294967295,k=V+(x<<15&4294967295|x>>>17),x=b+(V^(k|~D))+M[5]+4237533241&4294967295,b=k+(x<<21&4294967295|x>>>11),x=D+(k^(b|~V))+M[12]+1700485571&4294967295,D=b+(x<<6&4294967295|x>>>26),x=V+(b^(D|~k))+M[3]+2399980690&4294967295,V=D+(x<<10&4294967295|x>>>22),x=k+(D^(V|~b))+M[10]+4293915773&4294967295,k=V+(x<<15&4294967295|x>>>17),x=b+(V^(k|~D))+M[1]+2240044497&4294967295,b=k+(x<<21&4294967295|x>>>11),x=D+(k^(b|~V))+M[8]+1873313359&4294967295,D=b+(x<<6&4294967295|x>>>26),x=V+(b^(D|~k))+M[15]+4264355552&4294967295,V=D+(x<<10&4294967295|x>>>22),x=k+(D^(V|~b))+M[6]+2734768916&4294967295,k=V+(x<<15&4294967295|x>>>17),x=b+(V^(k|~D))+M[13]+1309151649&4294967295,b=k+(x<<21&4294967295|x>>>11),x=D+(k^(b|~V))+M[4]+4149444226&4294967295,D=b+(x<<6&4294967295|x>>>26),x=V+(b^(D|~k))+M[11]+3174756917&4294967295,V=D+(x<<10&4294967295|x>>>22),x=k+(D^(V|~b))+M[2]+718787259&4294967295,k=V+(x<<15&4294967295|x>>>17),x=b+(V^(k|~D))+M[9]+3951481745&4294967295,O.g[0]=O.g[0]+D&4294967295,O.g[1]=O.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,O.g[2]=O.g[2]+k&4294967295,O.g[3]=O.g[3]+V&4294967295}i.prototype.v=function(O,D){D===void 0&&(D=O.length);const b=D-this.blockSize,M=this.C;let k=this.h,V=0;for(;V<D;){if(k==0)for(;V<=b;)o(this,O,V),V+=this.blockSize;if(typeof O=="string"){for(;V<D;)if(M[k++]=O.charCodeAt(V++),k==this.blockSize){o(this,M),k=0;break}}else for(;V<D;)if(M[k++]=O[V++],k==this.blockSize){o(this,M),k=0;break}}this.h=k,this.o+=D},i.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var D=1;D<O.length-8;++D)O[D]=0;D=this.o*8;for(var b=O.length-8;b<O.length;++b)O[b]=D&255,D/=256;for(this.v(O),O=Array(16),D=0,b=0;b<4;++b)for(let M=0;M<32;M+=8)O[D++]=this.g[b]>>>M&255;return O};function a(O,D){var b=d;return Object.prototype.hasOwnProperty.call(b,O)?b[O]:b[O]=D(O)}function c(O,D){this.h=D;const b=[];let M=!0;for(let k=O.length-1;k>=0;k--){const V=O[k]|0;M&&V==D||(b[k]=V,M=!1)}this.g=b}var d={};function f(O){return-128<=O&&O<128?a(O,function(D){return new c([D|0],D<0?-1:0)}):new c([O|0],O<0?-1:0)}function h(O){if(isNaN(O)||!isFinite(O))return E;if(O<0)return U(h(-O));const D=[];let b=1;for(let M=0;O>=b;M++)D[M]=O/b|0,b*=4294967296;return new c(D,0)}function v(O,D){if(O.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(O.charAt(0)=="-")return U(v(O.substring(1),D));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=h(Math.pow(D,8));let M=E;for(let V=0;V<O.length;V+=8){var k=Math.min(8,O.length-V);const x=parseInt(O.substring(V,V+k),D);k<8?(k=h(Math.pow(D,k)),M=M.j(k).add(h(x))):(M=M.j(b),M=M.add(h(x)))}return M}var E=f(0),A=f(1),N=f(16777216);n=c.prototype,n.m=function(){if(F(this))return-U(this).m();let O=0,D=1;for(let b=0;b<this.g.length;b++){const M=this.i(b);O+=(M>=0?M:4294967296+M)*D,D*=4294967296}return O},n.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(L(this))return"0";if(F(this))return"-"+U(this).toString(O);const D=h(Math.pow(O,6));var b=this;let M="";for(;;){const k=re(b,D).g;b=Q(b,k.j(D));let V=((b.g.length>0?b.g[0]:b.h)>>>0).toString(O);if(b=k,L(b))return V+M;for(;V.length<6;)V="0"+V;M=V+M}},n.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function L(O){if(O.h!=0)return!1;for(let D=0;D<O.g.length;D++)if(O.g[D]!=0)return!1;return!0}function F(O){return O.h==-1}n.l=function(O){return O=Q(this,O),F(O)?-1:L(O)?0:1};function U(O){const D=O.g.length,b=[];for(let M=0;M<D;M++)b[M]=~O.g[M];return new c(b,~O.h).add(A)}n.abs=function(){return F(this)?U(this):this},n.add=function(O){const D=Math.max(this.g.length,O.g.length),b=[];let M=0;for(let k=0;k<=D;k++){let V=M+(this.i(k)&65535)+(O.i(k)&65535),x=(V>>>16)+(this.i(k)>>>16)+(O.i(k)>>>16);M=x>>>16,V&=65535,x&=65535,b[k]=x<<16|V}return new c(b,b[b.length-1]&-2147483648?-1:0)};function Q(O,D){return O.add(U(D))}n.j=function(O){if(L(this)||L(O))return E;if(F(this))return F(O)?U(this).j(U(O)):U(U(this).j(O));if(F(O))return U(this.j(U(O)));if(this.l(N)<0&&O.l(N)<0)return h(this.m()*O.m());const D=this.g.length+O.g.length,b=[];for(var M=0;M<2*D;M++)b[M]=0;for(M=0;M<this.g.length;M++)for(let k=0;k<O.g.length;k++){const V=this.i(M)>>>16,x=this.i(M)&65535,we=O.i(k)>>>16,Be=O.i(k)&65535;b[2*M+2*k]+=x*Be,H(b,2*M+2*k),b[2*M+2*k+1]+=V*Be,H(b,2*M+2*k+1),b[2*M+2*k+1]+=x*we,H(b,2*M+2*k+1),b[2*M+2*k+2]+=V*we,H(b,2*M+2*k+2)}for(O=0;O<D;O++)b[O]=b[2*O+1]<<16|b[2*O];for(O=D;O<2*D;O++)b[O]=0;return new c(b,0)};function H(O,D){for(;(O[D]&65535)!=O[D];)O[D+1]+=O[D]>>>16,O[D]&=65535,D++}function z(O,D){this.g=O,this.h=D}function re(O,D){if(L(D))throw Error("division by zero");if(L(O))return new z(E,E);if(F(O))return D=re(U(O),D),new z(U(D.g),U(D.h));if(F(D))return D=re(O,U(D)),new z(U(D.g),D.h);if(O.g.length>30){if(F(O)||F(D))throw Error("slowDivide_ only works with positive integers.");for(var b=A,M=D;M.l(O)<=0;)b=ee(b),M=ee(M);var k=he(b,1),V=he(M,1);for(M=he(M,2),b=he(b,2);!L(M);){var x=V.add(M);x.l(O)<=0&&(k=k.add(b),V=x),M=he(M,1),b=he(b,1)}return D=Q(O,k.j(D)),new z(k,D)}for(k=E;O.l(D)>=0;){for(b=Math.max(1,Math.floor(O.m()/D.m())),M=Math.ceil(Math.log(b)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),V=h(b),x=V.j(D);F(x)||x.l(O)>0;)b-=M,V=h(b),x=V.j(D);L(V)&&(V=A),k=k.add(V),O=Q(O,x)}return new z(k,O)}n.B=function(O){return re(this,O).h},n.and=function(O){const D=Math.max(this.g.length,O.g.length),b=[];for(let M=0;M<D;M++)b[M]=this.i(M)&O.i(M);return new c(b,this.h&O.h)},n.or=function(O){const D=Math.max(this.g.length,O.g.length),b=[];for(let M=0;M<D;M++)b[M]=this.i(M)|O.i(M);return new c(b,this.h|O.h)},n.xor=function(O){const D=Math.max(this.g.length,O.g.length),b=[];for(let M=0;M<D;M++)b[M]=this.i(M)^O.i(M);return new c(b,this.h^O.h)};function ee(O){const D=O.g.length+1,b=[];for(let M=0;M<D;M++)b[M]=O.i(M)<<1|O.i(M-1)>>>31;return new c(b,O.h)}function he(O,D){const b=D>>5;D%=32;const M=O.g.length-b,k=[];for(let V=0;V<M;V++)k[V]=D>0?O.i(V+b)>>>D|O.i(V+b+1)<<32-D:O.i(V+b);return new c(k,O.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ow=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=v,Yr=c}).apply(typeof VE<"u"?VE:typeof self<"u"?self:typeof window<"u"?window:{});var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aw,Oc,lw,ih,Km,cw,uw,dw;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof zd=="object"&&zd];for(var S=0;S<m.length;++S){var w=m[S];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function o(m,S){if(S)e:{var w=i;m=m.split(".");for(var P=0;P<m.length-1;P++){var Y=m[P];if(!(Y in w))break e;w=w[Y]}m=m[m.length-1],P=w[m],S=S(P),S!=P&&S!=null&&e(w,m,{configurable:!0,writable:!0,value:S})}}o("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(m){return m||function(S){var w=[],P;for(P in S)Object.prototype.hasOwnProperty.call(S,P)&&w.push([P,S[P]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function d(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function f(m,S,w){return m.call.apply(m.bind,arguments)}function h(m,S,w){return h=f,h.apply(null,arguments)}function v(m,S){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),m.apply(this,P)}}function E(m,S){function w(){}w.prototype=S.prototype,m.Z=S.prototype,m.prototype=new w,m.prototype.constructor=m,m.Ob=function(P,Y,te){for(var me=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)me[Le-2]=arguments[Le];return S.prototype[Y].apply(P,me)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function N(m){const S=m.length;if(S>0){const w=Array(S);for(let P=0;P<S;P++)w[P]=m[P];return w}return[]}function L(m,S){for(let P=1;P<arguments.length;P++){const Y=arguments[P];var w=typeof Y;if(w=w!="object"?w:Y?Array.isArray(Y)?"array":w:"null",w=="array"||w=="object"&&typeof Y.length=="number"){w=m.length||0;const te=Y.length||0;m.length=w+te;for(let me=0;me<te;me++)m[w+me]=Y[me]}else m.push(Y)}}class F{constructor(S,w){this.i=S,this.j=w,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function U(m){c.setTimeout(()=>{throw m},0)}function Q(){var m=O;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class H{constructor(){this.h=this.g=null}add(S,w){const P=z.get();P.set(S,w),this.h?this.h.next=P:this.g=P,this.h=P}}var z=new F(()=>new re,m=>m.reset());class re{constructor(){this.next=this.g=this.h=null}set(S,w){this.h=S,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,he=!1,O=new H,D=()=>{const m=Promise.resolve(void 0);ee=()=>{m.then(b)}};function b(){for(var m;m=Q();){try{m.h.call(m.g)}catch(w){U(w)}var S=z;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}he=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};c.addEventListener("test",w,S),c.removeEventListener("test",w,S)}catch{}return m})();function x(m){return/^[\s\xa0]*$/.test(m)}function we(m,S){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}E(we,k),we.prototype.init=function(m,S){const w=this.type=m.type,P=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(w=="mouseover"?S=m.fromElement:w=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Be="closure_listenable_"+(Math.random()*1e6|0),ne=0;function pe(m,S,w,P,Y){this.listener=m,this.proxy=null,this.src=S,this.type=w,this.capture=!!P,this.ha=Y,this.key=++ne,this.da=this.fa=!1}function se(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ee(m,S,w){for(const P in m)S.call(w,m[P],P,m)}function B(m,S){for(const w in m)S.call(void 0,m[w],w,m)}function ie(m){const S={};for(const w in m)S[w]=m[w];return S}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(m,S){let w,P;for(let Y=1;Y<arguments.length;Y++){P=arguments[Y];for(w in P)m[w]=P[w];for(let te=0;te<de.length;te++)w=de[te],Object.prototype.hasOwnProperty.call(P,w)&&(m[w]=P[w])}}function _e(m){this.src=m,this.g={},this.h=0}_e.prototype.add=function(m,S,w,P,Y){const te=m.toString();m=this.g[te],m||(m=this.g[te]=[],this.h++);const me=Ce(m,S,P,Y);return me>-1?(S=m[me],w||(S.fa=!1)):(S=new pe(S,this.src,te,!!P,Y),S.fa=w,m.push(S)),S};function Ve(m,S){const w=S.type;if(w in m.g){var P=m.g[w],Y=Array.prototype.indexOf.call(P,S,void 0),te;(te=Y>=0)&&Array.prototype.splice.call(P,Y,1),te&&(se(S),m.g[w].length==0&&(delete m.g[w],m.h--))}}function Ce(m,S,w,P){for(let Y=0;Y<m.length;++Y){const te=m[Y];if(!te.da&&te.listener==S&&te.capture==!!w&&te.ha==P)return Y}return-1}var He="closure_lm_"+(Math.random()*1e6|0),Qe={};function Rt(m,S,w,P,Y){if(Array.isArray(S)){for(let te=0;te<S.length;te++)Rt(m,S[te],w,P,Y);return null}return w=fn(w),m&&m[Be]?m.J(S,w,d(P)?!!P.capture:!1,Y):yt(m,S,w,!1,P,Y)}function yt(m,S,w,P,Y,te){if(!S)throw Error("Invalid event type");const me=d(Y)?!!Y.capture:!!Y;let Le=es(m);if(Le||(m[He]=Le=new _e(m)),w=Le.add(S,w,P,me,te),w.proxy)return w;if(P=Qt(),w.proxy=P,P.src=m,P.listener=w,m.addEventListener)V||(Y=me),Y===void 0&&(Y=!1),m.addEventListener(S.toString(),P,Y);else if(m.attachEvent)m.attachEvent(Pi(S.toString()),P);else if(m.addListener&&m.removeListener)m.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Qt(){function m(w){return S.call(m.src,m.listener,w)}const S=Rs;return m}function mi(m,S,w,P,Y){if(Array.isArray(S))for(var te=0;te<S.length;te++)mi(m,S[te],w,P,Y);else P=d(P)?!!P.capture:!!P,w=fn(w),m&&m[Be]?(m=m.i,te=String(S).toString(),te in m.g&&(S=m.g[te],w=Ce(S,w,P,Y),w>-1&&(se(S[w]),Array.prototype.splice.call(S,w,1),S.length==0&&(delete m.g[te],m.h--)))):m&&(m=es(m))&&(S=m.g[S.toString()],m=-1,S&&(m=Ce(S,w,P,Y)),(w=m>-1?S[m]:null)&&Mn(w))}function Mn(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[Be])Ve(S.i,m);else{var w=m.type,P=m.proxy;S.removeEventListener?S.removeEventListener(w,P,m.capture):S.detachEvent?S.detachEvent(Pi(w),P):S.addListener&&S.removeListener&&S.removeListener(P),(w=es(S))?(Ve(w,m),w.h==0&&(w.src=null,S[He]=null)):se(m)}}}function Pi(m){return m in Qe?Qe[m]:Qe[m]="on"+m}function Rs(m,S){if(m.da)m=!0;else{S=new we(S,this);const w=m.listener,P=m.ha||m.src;m.fa&&Mn(m),m=w.call(P,S)}return m}function es(m){return m=m[He],m instanceof _e?m:null}var bt="__closure_events_fn_"+(Math.random()*1e9>>>0);function fn(m){return typeof m=="function"?m:(m[bt]||(m[bt]=function(S){return m.handleEvent(S)}),m[bt])}function _t(){M.call(this),this.i=new _e(this),this.M=this,this.G=null}E(_t,M),_t.prototype[Be]=!0,_t.prototype.removeEventListener=function(m,S,w,P){mi(this,m,S,w,P)};function Pt(m,S){var w,P=m.G;if(P)for(w=[];P;P=P.G)w.push(P);if(m=m.M,P=S.type||S,typeof S=="string")S=new k(S,m);else if(S instanceof k)S.target=S.target||m;else{var Y=S;S=new k(P,m),fe(S,Y)}Y=!0;let te,me;if(w)for(me=w.length-1;me>=0;me--)te=S.g=w[me],Y=zn(te,P,!0,S)&&Y;if(te=S.g=m,Y=zn(te,P,!0,S)&&Y,Y=zn(te,P,!1,S)&&Y,w)for(me=0;me<w.length;me++)te=S.g=w[me],Y=zn(te,P,!1,S)&&Y}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var m=this.i;for(const S in m.g){const w=m.g[S];for(let P=0;P<w.length;P++)se(w[P]);delete m.g[S],m.h--}}this.G=null},_t.prototype.J=function(m,S,w,P){return this.i.add(String(m),S,!1,w,P)},_t.prototype.K=function(m,S,w,P){return this.i.add(String(m),S,!0,w,P)};function zn(m,S,w,P){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let Y=!0;for(let te=0;te<S.length;++te){const me=S[te];if(me&&!me.da&&me.capture==w){const Le=me.listener,Ct=me.ha||me.src;me.fa&&Ve(m.i,me),Y=Le.call(Ct,P)!==!1&&Y}}return Y&&!P.defaultPrevented}function ts(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:c.setTimeout(m,S||0)}function Ns(m){m.g=ts(()=>{m.g=null,m.i&&(m.i=!1,Ns(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class Di extends M{constructor(S,w){super(),this.m=S,this.l=w,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Ns(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(m){M.call(this),this.h=m,this.g={}}E(Mi,M);var kn=[];function ot(m){Ee(m.g,function(S,w){this.g.hasOwnProperty(w)&&Mn(S)},m),m.g={}}Mi.prototype.N=function(){Mi.Z.N.call(this),ot(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=c.JSON.stringify,Wt=c.JSON.parse,ns=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function xs(){}function bs(){}var Xt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vn(){k.call(this,"d")}E(Vn,k);function Un(){k.call(this,"c")}E(Un,k);var wn={},jn=null;function is(){return jn=jn||new _t}wn.Ia="serverreachability";function ti(m){k.call(this,wn.Ia,m)}E(ti,k);function ni(m){const S=is();Pt(S,new ti(S))}wn.STAT_EVENT="statevent";function gi(m,S){k.call(this,wn.STAT_EVENT,m),this.stat=S}E(gi,k);function dt(m){const S=is();Pt(S,new gi(S,m))}wn.Ja="timingevent";function Ps(m,S){k.call(this,wn.Ja,m),this.size=S}E(Ps,k);function Ln(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},S)}function yi(){this.g=!0}yi.prototype.ua=function(){this.g=!1};function Ds(m,S,w,P,Y,te){m.info(function(){if(m.g)if(te){var me="",Le=te.split("&");for(let lt=0;lt<Le.length;lt++){var Ct=Le[lt].split("=");if(Ct.length>1){const Ft=Ct[0];Ct=Ct[1];const si=Ft.split("_");me=si.length>=2&&si[1]=="type"?me+(Ft+"="+Ct+"&"):me+(Ft+"=redacted&")}}}else me=null;else me=te;return"XMLHTTP REQ ("+P+") [attempt "+Y+"]: "+S+`
`+w+`
`+me})}function lr(m,S,w,P,Y,te,me){m.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+Y+"]: "+S+`
`+w+`
`+te+" "+me})}function ii(m,S,w,P){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Ye(m,w)+(P?" "+P:"")})}function wt(m,S){m.info(function(){return"TIMEOUT: "+S})}yi.prototype.info=function(){};function Ye(m,S){if(!m.g)return S;if(!S)return null;try{const te=JSON.parse(S);if(te){for(m=0;m<te.length;m++)if(Array.isArray(te[m])){var w=te[m];if(!(w.length<2)){var P=w[1];if(Array.isArray(P)&&!(P.length<1)){var Y=P[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let me=1;me<P.length;me++)P[me]=""}}}}return Sn(te)}catch{return S}}var it={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zt;function pn(){}E(pn,xs),pn.prototype.g=function(){return new XMLHttpRequest},Zt=new pn;function Gt(m){return encodeURIComponent(String(m))}function co(m){var S=1;m=m.split(":");const w=[];for(;S>0&&m.length;)w.push(m.shift()),S--;return m.length&&w.push(m.join(":")),w}function R(m,S,w,P){this.j=m,this.i=S,this.l=w,this.S=P||1,this.V=new Mi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new J}function J(){this.i=null,this.g="",this.h=!1}var ge={},Oe={};function Ie(m,S,w){m.M=1,m.A=ks(Mt(S)),m.u=w,m.R=!0,Ge(m,null)}function Ge(m,S){m.F=Date.now(),uo(m),m.B=Mt(m.A);var w=m.B,P=m.S;Array.isArray(P)||(P=[String(P)]),Pu(w.i,"t",P),m.C=0,w=m.j.L,m.h=new J,m.g=va(m.j,w?S:null,!m.u),m.P>0&&(m.O=new Di(h(m.Y,m,m.g),m.P)),S=m.V,w=m.g,P=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(kn[0]=Y.toString()),Y=kn);for(let te=0;te<Y.length;te++){const me=Rt(w,Y[te],P||S.handleEvent,!1,S.h||S);if(!me)break;S.g[me.key]=me}S=m.J?ie(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),ni(),Ds(m.i,m.v,m.B,m.l,m.S,m.u)}R.prototype.ba=function(m){m=m.target;const S=this.O;S&&Cn(m)==3?S.j():this.Y(m)},R.prototype.Y=function(m){try{if(m==this.g)e:{const Le=Cn(this.g),Ct=this.g.ya(),lt=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||Ao(this.g)))){this.K||Le!=4||Ct==7||(Ct==8||lt<=0?ni(3):ni(2)),rs(this);var S=this.g.ca();this.X=S;var w=mn(this);if(this.o=S==200,lr(this.i,this.v,this.B,this.l,this.S,Le,S),this.o){if(this.U&&!this.L){t:{if(this.g){var P,Y=this.g;if((P=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(P)){var te=P;break t}}te=null}if(m=te)ii(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ua(this,m);else{this.o=!1,this.m=3,dt(12),os(this),ho(this);break e}}if(this.R){m=!0;let Ft;for(;!this.K&&this.C<w.length;)if(Ft=ca(this,w),Ft==Oe){Le==4&&(this.m=4,dt(14),m=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==ge){this.m=4,dt(15),ii(this.i,this.l,w,"[Invalid Chunk]"),m=!1;break}else ii(this.i,this.l,Ft,null),ua(this,Ft);if(Dt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||w.length!=0||this.h.h||(this.m=1,dt(16),m=!1),this.o=this.o&&m,!m)ii(this.i,this.l,w,"[Invalid Chunked Response]"),os(this),ho(this);else if(w.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Fl(me),me.P=!0,dt(11))}}else ii(this.i,this.l,w,null),ua(this,w);Le==4&&os(this),this.o&&!this.K&&(Le==4?ql(this.j,this):(this.o=!1,uo(this)))}else So(this.g),S==400&&w.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),os(this),ho(this)}}}catch{}finally{}};function mn(m){if(!Dt(m))return m.g.la();const S=Ao(m.g);if(S==="")return"";let w="";const P=S.length,Y=Cn(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return os(m),ho(m),"";m.h.i=new c.TextDecoder}for(let te=0;te<P;te++)m.h.h=!0,w+=m.h.i.decode(S[te],{stream:!(Y&&te==P-1)});return S.length=0,m.h.g+=w,m.C=0,m.h.g}function Dt(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function ca(m,S){var w=m.C,P=S.indexOf(`
`,w);return P==-1?Oe:(w=Number(S.substring(w,P)),isNaN(w)?ge:(P+=1,P+w>S.length?Oe:(S=S.slice(P,P+w),m.C=P+w,S)))}R.prototype.cancel=function(){this.K=!0,os(this)};function uo(m){m.T=Date.now()+m.H,ss(m,m.H)}function ss(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ln(h(m.aa,m),S)}function rs(m){m.D&&(c.clearTimeout(m.D),m.D=null)}R.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(wt(this.i,this.B),this.M!=2&&(ni(),dt(17)),os(this),this.m=2,ho(this)):ss(this,this.T-m)};function ho(m){m.j.I==0||m.K||ql(m.j,m)}function os(m){rs(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,ot(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function ua(m,S){try{var w=m.j;if(w.I!=0&&(w.g==m||mo(w.h,m))){if(!m.L&&mo(w.h,m)&&w.I==3){try{var P=w.Ba.g.parse(S)}catch{P=null}if(Array.isArray(P)&&P.length==3){var Y=P;if(Y[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<m.F)_a(w),as(w);else break e;Ol(w),dt(18)}}else w.xa=Y[1],0<w.xa-w.K&&Y[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ln(h(w.Va,w),6e3));_i(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ls(w,11)}else if((m.L||w.g==m)&&_a(w),!x(S))for(Y=w.Ba.g.parse(S),S=0;S<Y.length;S++){let lt=Y[S];const Ft=lt[0];if(!(Ft<=w.K))if(w.K=Ft,lt=lt[1],w.I==2)if(lt[0]=="c"){w.M=lt[1],w.ba=lt[2];const si=lt[3];si!=null&&(w.ka=si,w.j.info("VER="+w.ka));const ls=lt[4];ls!=null&&(w.za=ls,w.j.info("SVER="+w.za));const Ui=lt[5];Ui!=null&&typeof Ui=="number"&&Ui>0&&(P=1.5*Ui,w.O=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const Li=m.g;if(Li){const Oi=Li.g?Li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oi){var te=P.h;te.g||Oi.indexOf("spdy")==-1&&Oi.indexOf("quic")==-1&&Oi.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(da(te,te.h),te.h=null))}if(P.G){const Hl=Li.g?Li.g.getResponseHeader("X-HTTP-Session-Id"):null;Hl&&(P.wa=Hl,ht(P.J,P.G,Hl))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-m.F,w.j.info("Handshake RTT: "+w.T+"ms")),P=w;var me=m;if(P.na=qu(P,P.L?P.ba:null,P.W),me.L){Ms(P.h,me);var Le=me,Ct=P.O;Ct&&(Le.H=Ct),Le.D&&(rs(Le),uo(Le)),P.g=me}else Uu(P);w.i.length>0&&Ro(w)}else lt[0]!="stop"&&lt[0]!="close"||Ls(w,7);else w.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Ls(w,7):Co(w):lt[0]!="noop"&&w.l&&w.l.qa(lt),w.A=0)}}ni(4)}catch{}}var Ef=class{constructor(m,S){this.g=m,this.map=S}};function fo(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function po(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function _i(m){return m.h?1:m.g?m.g.size:0}function mo(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function da(m,S){m.g?m.g.add(S):m.h=S}function Ms(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}fo.prototype.cancel=function(){if(this.i=ha(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ha(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const w of m.g.values())S=S.concat(w.G);return S}return N(m.i)}var fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Af(m,S){if(m){m=m.split("&");for(let w=0;w<m.length;w++){const P=m[w].indexOf("=");let Y,te=null;P>=0?(Y=m[w].substring(0,P),te=m[w].substring(P+1)):Y=m[w],S(Y,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function ki(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof ki?(this.l=m.l,cr(this,m.j),this.o=m.o,this.g=m.g,go(this,m.u),this.h=m.h,ur(this,Du(m.i)),this.m=m.m):m&&(S=String(m).match(fa))?(this.l=!1,cr(this,S[1]||"",!0),this.o=yo(S[2]||""),this.g=yo(S[3]||"",!0),go(this,S[4]),this.h=yo(S[5]||"",!0),ur(this,S[6]||"",!0),this.m=yo(S[7]||"")):(this.l=!1,this.i=new vi(null,this.l))}ki.prototype.toString=function(){const m=[];var S=this.j;S&&m.push(rn(S,Pl,!0),":");var w=this.g;return(w||S=="file")&&(m.push("//"),(S=this.o)&&m.push(rn(S,Pl,!0),"@"),m.push(Gt(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&m.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(rn(w,w.charAt(0)=="/"?dr:Dl,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",rn(w,bu)),m.join("")},ki.prototype.resolve=function(m){const S=Mt(this);let w=!!m.j;w?cr(S,m.j):w=!!m.o,w?S.o=m.o:w=!!m.g,w?S.g=m.g:w=m.u!=null;var P=m.h;if(w)go(S,m.u);else if(w=!!m.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var Y=S.h.lastIndexOf("/");Y!=-1&&(P=S.h.slice(0,Y+1)+P)}if(Y=P,Y==".."||Y==".")P="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){P=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const te=[];for(let me=0;me<Y.length;){const Le=Y[me++];Le=="."?P&&me==Y.length&&te.push(""):Le==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),P&&me==Y.length&&te.push("")):(te.push(Le),P=!0)}P=te.join("/")}else P=Y}return w?S.h=P:w=m.i.toString()!=="",w?ur(S,Du(m.i)):w=!!m.m,w&&(S.m=m.m),S};function Mt(m){return new ki(m)}function cr(m,S,w){m.j=w?yo(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function go(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function ur(m,S,w){S instanceof vi?(m.i=S,Vl(m.i,m.l)):(w||(S=rn(S,xu)),m.i=new vi(S,m.l))}function ht(m,S,w){m.i.set(S,w)}function ks(m){return ht(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function yo(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function rn(m,S,w){return typeof m=="string"?(m=encodeURI(m).replace(S,bl),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function bl(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Pl=/[#\/\?@]/g,Dl=/[#\?:]/g,dr=/[#\?]/g,xu=/[#\?@]/g,bu=/#/g;function vi(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Vs(m){m.g||(m.g=new Map,m.h=0,m.i&&Af(m.i,function(S,w){m.add(decodeURIComponent(S.replace(/\+/g," ")),w)}))}n=vi.prototype,n.add=function(m,S){Vs(this),this.i=null,m=Vi(this,m);let w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(S),this.h+=1,this};function Ml(m,S){Vs(m),S=Vi(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function kl(m,S){return Vs(m),S=Vi(m,S),m.g.has(S)}n.forEach=function(m,S){Vs(this),this.g.forEach(function(w,P){w.forEach(function(Y){m.call(S,Y,P,this)},this)},this)};function pa(m,S){Vs(m);let w=[];if(typeof S=="string")kl(m,S)&&(w=w.concat(m.g.get(Vi(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)w=w.concat(m[S]);return w}n.set=function(m,S){return Vs(this),this.i=null,m=Vi(this,m),kl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},n.get=function(m,S){return m?(m=pa(this,m),m.length>0?String(m[0]):S):S};function Pu(m,S,w){Ml(m,S),w.length>0&&(m.i=null,m.g.set(Vi(m,S),N(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(let P=0;P<S.length;P++){var w=S[P];const Y=Gt(w);w=pa(this,w);for(let te=0;te<w.length;te++){let me=Y;w[te]!==""&&(me+="="+Gt(w[te])),m.push(me)}}return this.i=m.join("&")};function Du(m){const S=new vi;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function Vi(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function Vl(m,S){S&&!m.j&&(Vs(m),m.i=null,m.g.forEach(function(w,P){const Y=P.toLowerCase();P!=Y&&(Ml(this,P),Pu(this,Y,w))},m)),m.j=S}function Ul(m,S){const w=new yi;if(c.Image){const P=new Image;P.onload=v(On,w,"TestLoadImage: loaded",!0,S,P),P.onerror=v(On,w,"TestLoadImage: error",!1,S,P),P.onabort=v(On,w,"TestLoadImage: abort",!1,S,P),P.ontimeout=v(On,w,"TestLoadImage: timeout",!1,S,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=m}else S(!1)}function hr(m,S){const w=new yi,P=new AbortController,Y=setTimeout(()=>{P.abort(),On(w,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:P.signal}).then(te=>{clearTimeout(Y),te.ok?On(w,"TestPingServer: ok",!0,S):On(w,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Y),On(w,"TestPingServer: error",!1,S)})}function On(m,S,w,P,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),P(w)}catch{}}function Mu(){this.g=new ns}function _o(m){this.i=m.Sb||null,this.h=m.ab||!1}E(_o,xs),_o.prototype.g=function(){return new vo(this.i,this.h)};function vo(m,S){_t.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(vo,_t),n=vo.prototype,n.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,Us(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||c).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function fr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Fn(this):Us(this),this.readyState==3&&fr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Fn(this))},n.Na=function(m){this.g&&(this.response=m,Fn(this))},n.ga=function(){this.g&&Fn(this)};function Fn(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Us(m)}n.setRequestHeader=function(m,S){this.A.append(m,S)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var w=S.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=S.next();return m.join(`\r
`)};function Us(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function pr(m){let S="";return Ee(m,function(w,P){S+=P,S+=":",S+=w,S+=`\r
`}),S}function Ti(m,S,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=pr(w),typeof m=="string"?w!=null&&Gt(w):ht(m,S,w))}function Et(m){_t.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Et,_t);var ma=/^https?$/i,ku=["POST","PUT"];n=Et.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,S,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zt.g(),this.g.onreadystatechange=A(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(te){To(this,te);return}if(m=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var Y in P)w.set(Y,P[Y]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const te of P.keys())w.set(te,P.get(te));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(te=>te.toLowerCase()=="content-type"),Y=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(ku,S,void 0)>=0)||P||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of w)this.g.setRequestHeader(te,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(te){To(this,te)}};function To(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,Eo(m),en(m)}function Eo(m){m.A||(m.A=!0,Pt(m,"complete"),Pt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Pt(this,"complete"),Pt(this,"abort"),en(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),en(this,!0)),Et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ll(this):this.Xa())},n.Xa=function(){Ll(this)};function Ll(m){if(m.h&&typeof a<"u"){if(m.v&&Cn(m)==4)setTimeout(m.Ca.bind(m),0);else if(Pt(m,"readystatechange"),Cn(m)==4){m.h=!1;try{const te=m.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var w;if(!(w=S)){var P;if(P=te===0){let me=String(m.D).match(fa)[1]||null;!me&&c.self&&c.self.location&&(me=c.self.location.protocol.slice(0,-1)),P=!ma.test(me?me.toLowerCase():"")}w=P}if(w)Pt(m,"complete"),Pt(m,"success");else{m.o=6;try{var Y=Cn(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",Eo(m)}}finally{en(m)}}}}function en(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const w=m.g;m.g=null,S||Pt(m,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Cn(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Cn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Wt(S)}};function Ao(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function So(m){const S={};m=(m.g&&Cn(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<m.length;P++){if(x(m[P]))continue;var w=co(m[P]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const te=S[Y]||[];S[Y]=te,te.push(w)}B(S,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wo(m,S,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||S}function ga(m){this.za=0,this.i=[],this.j=new yi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wo("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wo("baseRetryDelayMs",5e3,m),this.Za=wo("retryDelaySeedMs",1e4,m),this.Ta=wo("forwardChannelMaxRetries",2,m),this.va=wo("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new fo(m&&m.concurrentRequestLimit),this.Ba=new Mu,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ga.prototype,n.ka=8,n.I=1,n.connect=function(m,S,w,P){dt(0),this.W=m,this.H=S||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.J=qu(this,null,this.W),Ro(this)};function Co(m){if(Io(m),m.I==3){var S=m.V++,w=Mt(m.J);if(ht(w,"SID",m.M),ht(w,"RID",S),ht(w,"TYPE","terminate"),No(m,w),S=new R(m,m.j,S),S.M=2,S.A=ks(Mt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(S.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=S.A,w=!0),w||(S.g=va(S.j,null),S.g.ea(S.A)),S.F=Date.now(),uo(S)}Fu(m)}function as(m){m.g&&(Fl(m),m.g.cancel(),m.g=null)}function Io(m){as(m),m.v&&(c.clearTimeout(m.v),m.v=null),_a(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Ro(m){if(!po(m.h)&&!m.m){m.m=!0;var S=m.Ea;ee||D(),he||(ee(),he=!0),O.add(S,m),m.D=0}}function Sf(m,S){return _i(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ln(h(m.Ea,m,S),Ou(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new R(this,this.j,m);let te=this.o;if(this.U&&(te?(te=ie(te),fe(te,this.U)):te=this.U),this.u!==null||this.R||(Y.J=te,te=null),this.S)e:{for(var S=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(S+=P,S>4096){S=w;break e}if(S===4096||w===this.i.length-1){S=w+1;break e}}S=1e3}else S=1e3;S=ya(this,Y,S),w=Mt(this.J),ht(w,"RID",m),ht(w,"CVER",22),this.G&&ht(w,"X-HTTP-Session-Id",this.G),No(this,w),te&&(this.R?S="headers="+Gt(pr(te))+"&"+S:this.u&&Ti(w,this.u,te)),da(this.h,Y),this.Ra&&ht(w,"TYPE","init"),this.S?(ht(w,"$req",S),ht(w,"SID","null"),Y.U=!0,Ie(Y,w,null)):Ie(Y,w,S),this.I=2}}else this.I==3&&(m?Vu(this,m):this.i.length==0||po(this.h)||Vu(this))};function Vu(m,S){var w;S?w=S.l:w=m.V++;const P=Mt(m.J);ht(P,"SID",m.M),ht(P,"RID",w),ht(P,"AID",m.K),No(m,P),m.u&&m.o&&Ti(P,m.u,m.o),w=new R(m,m.j,w,m.D+1),m.u===null&&(w.J=m.o),S&&(m.i=S.G.concat(m.i)),S=ya(m,w,1e3),w.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),da(m.h,w),Ie(w,P,S)}function No(m,S){m.H&&Ee(m.H,function(w,P){ht(S,P,w)}),m.l&&Ee({},function(w,P){ht(S,P,w)})}function ya(m,S,w){w=Math.min(m.i.length,w);const P=m.l?h(m.l.Ka,m.l,m):null;e:{var Y=m.i;let Le=-1;for(;;){const Ct=["count="+w];Le==-1?w>0?(Le=Y[0].g,Ct.push("ofs="+Le)):Le=0:Ct.push("ofs="+Le);let lt=!0;for(let Ft=0;Ft<w;Ft++){var te=Y[Ft].g;const si=Y[Ft].map;if(te-=Le,te<0)Le=Math.max(0,Y[Ft].g-100),lt=!1;else try{te="req"+te+"_"||"";try{var me=si instanceof Map?si:Object.entries(si);for(const[ls,Ui]of me){let Li=Ui;d(Ui)&&(Li=Sn(Ui)),Ct.push(te+ls+"="+encodeURIComponent(Li))}}catch(ls){throw Ct.push(te+"type="+encodeURIComponent("_badmap")),ls}}catch{P&&P(si)}}if(lt){me=Ct.join("&");break e}}me=void 0}return m=m.i.splice(0,w),S.G=m,me}function Uu(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;ee||D(),he||(ee(),he=!0),O.add(S,m),m.A=0}}function Ol(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ln(h(m.Da,m),Ou(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ln(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),as(this),Lu(this))};function Fl(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Lu(m){m.g=new R(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=Mt(m.na);ht(S,"RID","rpc"),ht(S,"SID",m.M),ht(S,"AID",m.K),ht(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&ht(S,"TO",m.ia),ht(S,"TYPE","xmlhttp"),No(m,S),m.u&&m.o&&Ti(S,m.u,m.o),m.O&&(m.g.H=m.O);var w=m.g;m=m.ba,w.M=1,w.A=ks(Mt(S)),w.u=null,w.R=!0,Ge(w,m)}n.Va=function(){this.C!=null&&(this.C=null,as(this),Ol(this),dt(19))};function _a(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function ql(m,S){var w=null;if(m.g==S){_a(m),Fl(m),m.g=null;var P=2}else if(mo(m.h,S))w=S.G,Ms(m.h,S),P=1;else return;if(m.I!=0){if(S.o)if(P==1){w=S.u?S.u.length:0,S=Date.now()-S.F;var Y=m.D;P=is(),Pt(P,new Ps(P,w)),Ro(m)}else Uu(m);else if(Y=S.m,Y==3||Y==0&&S.X>0||!(P==1&&Sf(m,S)||P==2&&Ol(m)))switch(w&&w.length>0&&(S=m.h,S.i=S.i.concat(w)),Y){case 1:Ls(m,5);break;case 4:Ls(m,10);break;case 3:Ls(m,6);break;default:Ls(m,2)}}}function Ou(m,S){let w=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(w*=2),w*S}function Ls(m,S){if(m.j.info("Error code "+S),S==2){var w=h(m.bb,m),P=m.Ua;const Y=!P;P=new ki(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||cr(P,"https"),ks(P),Y?Ul(P.toString(),w):hr(P.toString(),w)}else dt(2);m.I=0,m.l&&m.l.pa(S),Fu(m),Io(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Fu(m){if(m.I=0,m.ja=[],m.l){const S=ha(m.h);(S.length!=0||m.i.length!=0)&&(L(m.ja,S),L(m.ja,m.i),m.h.i.length=0,N(m.i),m.i.length=0),m.l.oa()}}function qu(m,S,w){var P=w instanceof ki?Mt(w):new ki(w);if(P.g!="")S&&(P.g=S+"."+P.g),go(P,P.u);else{var Y=c.location;P=Y.protocol,S=S?S+"."+Y.hostname:Y.hostname,Y=+Y.port;const te=new ki(null);P&&cr(te,P),S&&(te.g=S),Y&&go(te,Y),w&&(te.h=w),P=te}return w=m.G,S=m.wa,w&&S&&ht(P,w,S),ht(P,"VER",m.ka),No(m,P),P}function va(m,S,w){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new Et(new _o({ab:w})):new Et(m.ma),S.Fa(m.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}n=Bu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ta(){}Ta.prototype.g=function(m,S){return new qn(m,S)};function qn(m,S){_t.call(this),this.g=new ga(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!x(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!x(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new mr(this)}E(qn,_t),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){Co(this.g)},qn.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.v&&(w={},w.__data__=Sn(m),m=w);S.i.push(new Ef(S.Ya++,m)),S.I==3&&Ro(S)},qn.prototype.N=function(){this.g.l=null,delete this.j,Co(this.g),delete this.g,qn.Z.N.call(this)};function Bl(m){Vn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const w in S){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}E(Bl,Vn);function Hu(){Un.call(this),this.status=1}E(Hu,Un);function mr(m){this.g=m}E(mr,Bu),mr.prototype.ra=function(){Pt(this.g,"a")},mr.prototype.qa=function(m){Pt(this.g,new Bl(m))},mr.prototype.pa=function(m){Pt(this.g,new Hu)},mr.prototype.oa=function(){Pt(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,dw=function(){return new Ta},uw=function(){return is()},cw=wn,Km={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,ih=it,vt.COMPLETE="complete",lw=vt,bs.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",_t.prototype.listen=_t.prototype.J,Oc=bs,Et.prototype.listenOnce=Et.prototype.K,Et.prototype.getLastError=Et.prototype.Ha,Et.prototype.getLastErrorCode=Et.prototype.ya,Et.prototype.getStatus=Et.prototype.ca,Et.prototype.getResponseJson=Et.prototype.La,Et.prototype.getResponseText=Et.prototype.la,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Fa,aw=Et}).apply(typeof zd<"u"?zd:typeof self<"u"?self:typeof window<"u"?window:{});const UE="@firebase/firestore",LE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new Ig("@firebase/firestore");function Ja(){return Wo.logLevel}function ve(n,...e){if(Wo.logLevel<=We.DEBUG){const t=e.map(Og);Wo.debug(`Firestore (${El}): ${n}`,...t)}}function sr(n,...e){if(Wo.logLevel<=We.ERROR){const t=e.map(Og);Wo.error(`Firestore (${El}): ${n}`,...t)}}function Xo(n,...e){if(Wo.logLevel<=We.WARN){const t=e.map(Og);Wo.warn(`Firestore (${El}): ${n}`,...t)}}function Og(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,hw(n,i,t)}function hw(n,e,t){let i=`FIRESTORE (${El}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw sr(i),new Error(i)}function nt(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||hw(e,o,i)}function Ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(xn.UNAUTHENTICATED)))}shutdown(){}}class xP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class bP{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let i=this.i;const o=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vs,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},d=f=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string",31837,{l:i}),new fw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class PP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new PP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class OE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const i=a=>{a.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new OE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new OE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=kP(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Xe(n,e){return n<e?-1:n>e?1:0}function Jm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return xm(o)===xm(a)?Xe(o,a):xm(o)?1:-1}return Xe(n.length,e.length)}const VP=55296,UP=57343;function xm(n){const e=n.charCodeAt(0);return e>=VP&&e<=UP}function hl(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="__name__";class ps{constructor(e,t,i){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ps.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ps?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=ps.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Xe(e.length,t.length)}static compareSegments(e,t){const i=ps.isNumericId(e),o=ps.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ps.extractNumericId(e).compare(ps.extractNumericId(t)):Jm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yr.fromString(e.substring(4,e.length-2))}}class gt extends ps{construct(e,t,i){return new gt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new gt(t)}static emptyPath(){return new gt([])}}const LP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends ps{construct(e,t,i){return new dn(e,t,i)}static isValidIdentifier(e){return LP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FE}static keyField(){return new dn([FE])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ye(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ye(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ye(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(i+=d,o++):(a(),o++)}if(a(),c)throw new ye(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(t)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(gt.fromString(e))}static fromName(e){return new Ne(gt.fromString(e).popFirst(5))}static empty(){return new Ne(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(n,e,t){if(!t)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gw(n,e,t,i){if(e===!0&&i===!0)throw new ye(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qE(n){if(!Ne.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BE(n){if(Ne.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Kh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":be(12329,{type:typeof n})}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kh(n);throw new ye(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n,e){const t={typeString:n};return e&&(t.value=e),t}function yu(n,e){if(!yw(n))throw new ye(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ye(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=-62135596800,GE=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*GE);return new St(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<HE)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GE}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yu(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:Jt("string",St._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new St(0,0))}static max(){return new Me(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=-1;function OP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Me.fromTimestamp(i===1e9?new St(t+1,0):new St(t,i));return new Wr(o,Ne.empty(),e)}function FP(n){return new Wr(n.readTime,n.key,ru)}class Wr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Wr(Me.min(),Ne.empty(),ru)}static max(){return new Wr(Me.max(),Ne.empty(),ru)}}function qP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==BP)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,i)=>{t(e)}))}static reject(e){return new ue(((t,i)=>{i(e)}))}static waitFor(e){return new ue(((t,i)=>{let o=0,a=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++a,c&&a===o&&t()}),(f=>i(f)))})),c=!0,a===o&&t()}))}static or(e){let t=ue.resolve(!1);for(const i of e)t=t.next((o=>o?ue.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new ue(((i,o)=>{const a=e.length,c=new Array(a);let d=0;for(let f=0;f<a;f++){const h=f;t(e[h]).next((v=>{c[h]=v,++d,d===a&&i(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new ue(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function GP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Sl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=-1;function _u(n){return n==null}function Ah(n){return n===0&&1/n==-1/0}function zP(n){return typeof n=="number"&&Number.isInteger(n)&&!Ah(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="";function jP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zE(e)),e=$P(n.get(t),e);return zE(e)}function $P(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case _w:t+="";break;default:t+=a}}return t}function zE(n){return n+_w+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ro(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t){this.comparator=e,this.root=t||vn.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jd(this.root,e,this.comparator,!1)}getReverseIterator(){return new jd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jd(this.root,e,this.comparator,!0)}}class jd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??vn.RED,this.left=o??vn.EMPTY,this.right=a??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new vn(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return vn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $E(this.data.getIterator())}getIteratorFrom(e){return new $E(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class $E{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new hi([])}unionWith(e){let t=new sn(dn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new hi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Tw("Invalid base64 string: "+a):a}})(e);return new hn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a})(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const YP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xr(n){if(nt(!!n,39018),typeof n=="string"){let e=0;const t=YP.exec(n);if(nt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ht(n.seconds),nanos:Ht(n.nanos)}}function Ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zr(n){return typeof n=="string"?hn.fromBase64String(n):hn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="server_timestamp",Aw="__type__",Sw="__previous_value__",ww="__local_write_time__";function qg(n){return(n?.mapValue?.fields||{})[Aw]?.stringValue===Ew}function Qh(n){const e=n.mapValue.fields[Sw];return qg(e)?Qh(e):e}function ou(n){const e=Xr(n.mapValue.fields[ww].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,i,o,a,c,d,f,h,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=v}}const Sh="(default)";class fl{constructor(e,t){this.projectId=e,this.database=t||Sh}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===Sh}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="__type__",JP="__max__",$d={mapValue:{}},Iw="__vector__",wh="value";function eo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qg(n)?4:WP(n)?9007199254740991:QP(n)?10:11:be(28295,{value:n})}function Es(n,e){if(n===e)return!0;const t=eo(n);if(t!==eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ou(n).isEqual(ou(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=Xr(o.timestampValue),d=Xr(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Zr(o.bytesValue).isEqual(Zr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Ht(o.geoPointValue.latitude)===Ht(a.geoPointValue.latitude)&&Ht(o.geoPointValue.longitude)===Ht(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Ht(o.integerValue)===Ht(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=Ht(o.doubleValue),d=Ht(a.doubleValue);return c===d?Ah(c)===Ah(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return hl(n.arrayValue.values||[],e.arrayValue.values||[],Es);case 10:case 11:return(function(o,a){const c=o.mapValue.fields||{},d=a.mapValue.fields||{};if(jE(c)!==jE(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!Es(c[f],d[f])))return!1;return!0})(n,e);default:return be(52216,{left:n})}}function au(n,e){return(n.values||[]).find((t=>Es(t,e)))!==void 0}function pl(n,e){if(n===e)return 0;const t=eo(n),i=eo(e);if(t!==i)return Xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const d=Ht(a.integerValue||a.doubleValue),f=Ht(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return YE(n.timestampValue,e.timestampValue);case 4:return YE(ou(n),ou(e));case 5:return Jm(n.stringValue,e.stringValue);case 6:return(function(a,c){const d=Zr(a),f=Zr(c);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const d=a.split("/"),f=c.split("/");for(let h=0;h<d.length&&h<f.length;h++){const v=Xe(d[h],f[h]);if(v!==0)return v}return Xe(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const d=Xe(Ht(a.latitude),Ht(c.latitude));return d!==0?d:Xe(Ht(a.longitude),Ht(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return KE(n.arrayValue,e.arrayValue);case 10:return(function(a,c){const d=a.fields||{},f=c.fields||{},h=d[wh]?.arrayValue,v=f[wh]?.arrayValue,E=Xe(h?.values?.length||0,v?.values?.length||0);return E!==0?E:KE(h,v)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===$d.mapValue&&c===$d.mapValue)return 0;if(a===$d.mapValue)return 1;if(c===$d.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),h=c.fields||{},v=Object.keys(h);f.sort(),v.sort();for(let E=0;E<f.length&&E<v.length;++E){const A=Jm(f[E],v[E]);if(A!==0)return A;const N=pl(d[f[E]],h[v[E]]);if(N!==0)return N}return Xe(f.length,v.length)})(n.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function YE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=Xr(n),i=Xr(e),o=Xe(t.seconds,i.seconds);return o!==0?o:Xe(t.nanos,i.nanos)}function KE(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=pl(t[o],i[o]);if(a)return a}return Xe(t.length,i.length)}function ml(n){return Qm(n)}function Qm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Xr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Zr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Qm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of i)a?a=!1:o+=",",o+=`${c}:${Qm(t.fields[c])}`;return o+"}"})(n.mapValue):be(61005,{value:n})}function sh(n){switch(eo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qh(n);return e?16+sh(e):16;case 5:return 2*n.stringValue.length;case 6:return Zr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+sh(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return ro(i.fields,((a,c)=>{o+=a.length+sh(c)})),o})(n.mapValue);default:throw be(13486,{value:n})}}function JE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wm(n){return!!n&&"integerValue"in n}function Bg(n){return!!n&&"arrayValue"in n}function QE(n){return!!n&&"nullValue"in n}function WE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rh(n){return!!n&&"mapValue"in n}function QP(n){return(n?.mapValue?.fields||{})[Cw]?.stringValue===Iw}function Jc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ro(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Jc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jc(n.arrayValue.values[t]);return e}return{...n}}function WP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===JP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(t)}setAll(e){let t=dn.emptyPath(),i={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,o),i={},o=[],t=d.popLast()}c?i[d.lastSegment()]=Jc(c):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Es(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];rh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ro(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Hn(Jc(this.value))}}function Rw(n){const e=[];return ro(n.fields,((t,i)=>{const o=new dn([t]);if(rh(i)){const a=Rw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)})),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,i,o,a,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new un(e,0,Me.min(),Me.min(),Me.min(),Hn.empty(),0)}static newFoundDocument(e,t,i,o){return new un(e,1,t,Me.min(),i,o,0)}static newNoDocument(e,t){return new un(e,2,t,Me.min(),Me.min(),Hn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Me.min(),Me.min(),Hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t){this.position=e,this.inclusive=t}}function XE(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?i=Ne.comparator(Ne.fromName(c.referenceValue),t.key):i=pl(c,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function ZE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Es(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,t="asc"){this.field=e,this.dir=t}}function XP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{}class Kt extends Nw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new eD(e,t,i):t==="array-contains"?new iD(e,i):t==="in"?new sD(e,i):t==="not-in"?new rD(e,i):t==="array-contains-any"?new oD(e,i):new Kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new tD(e,i):new nD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(pl(t,this.value)):t!==null&&eo(this.value)===eo(t)&&this.matchesComparison(pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wi extends Nw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wi(e,t)}matches(e){return xw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xw(n){return n.op==="and"}function bw(n){return ZP(n)&&xw(n)}function ZP(n){for(const e of n.filters)if(e instanceof Wi)return!1;return!0}function Xm(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+ml(n.value);if(bw(n))return n.filters.map((e=>Xm(e))).join(",");{const e=n.filters.map((t=>Xm(t))).join(",");return`${n.op}(${e})`}}function Pw(n,e){return n instanceof Kt?(function(i,o){return o instanceof Kt&&i.op===o.op&&i.field.isEqual(o.field)&&Es(i.value,o.value)})(n,e):n instanceof Wi?(function(i,o){return o instanceof Wi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,c,d)=>a&&Pw(c,o.filters[d])),!0):!1})(n,e):void be(19439)}function Dw(n){return n instanceof Kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ml(t.value)}`})(n):n instanceof Wi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Dw).join(" ,")+"}"})(n):"Filter"}class eD extends Kt{constructor(e,t,i){super(e,t,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class tD extends Kt{constructor(e,t){super(e,"in",t),this.keys=Mw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class nD extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=Mw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Mw(n,e){return(e.arrayValue?.values||[]).map((t=>Ne.fromName(t.referenceValue)))}class iD extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bg(t)&&au(t.arrayValue,this.value)}}class sD extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&au(this.value.arrayValue,t)}}class rD extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!au(this.value.arrayValue,t)}}class oD extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>au(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,t=null,i=[],o=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=c,this.endAt=d,this.Te=null}}function e0(n,e=null,t=[],i=[],o=null,a=null,c=null){return new aD(n,e,t,i,o,a,c)}function Hg(n){const e=Ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Xm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),_u(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ml(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ml(i))).join(",")),e.Te=t}return e.Te}function Gg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!XP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Pw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZE(n.startAt,e.startAt)&&ZE(n.endAt,e.endAt)}function Zm(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t=null,i=[],o=[],a=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function lD(n,e,t,i,o,a,c,d){return new vu(n,e,t,i,o,a,c,d)}function Wh(n){return new vu(n)}function t0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kw(n){return n.collectionGroup!==null}function Qc(n){const e=Ue(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new sn(dn.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ih(a,i))})),t.has(dn.keyField().canonicalString())||e.Ie.push(new Ih(dn.keyField(),i))}return e.Ie}function Ts(n){const e=Ue(n);return e.Ee||(e.Ee=cD(e,Qc(n))),e.Ee}function cD(n,e){if(n.limitType==="F")return e0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Ih(o.field,a)}));const t=n.endAt?new Ch(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ch(n.startAt.position,n.startAt.inclusive):null;return e0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function eg(n,e){const t=n.filters.concat([e]);return new vu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tg(n,e,t){return new vu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xh(n,e){return Gg(Ts(n),Ts(e))&&n.limitType===e.limitType}function Vw(n){return`${Hg(Ts(n))}|lt:${n.limitType}`}function Qa(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Dw(o))).join(", ")}]`),_u(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>ml(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>ml(o))).join(",")),`Target(${i})`})(Ts(n))}; limitType=${n.limitType})`}function Zh(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ne.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of Qc(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(c,d,f){const h=XE(c,d,f);return c.inclusive?h<=0:h<0})(i.startAt,Qc(i),o)||i.endAt&&!(function(c,d,f){const h=XE(c,d,f);return c.inclusive?h>=0:h>0})(i.endAt,Qc(i),o))})(n,e)}function uD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Uw(n){return(e,t)=>{let i=!1;for(const o of Qc(n)){const a=dD(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function dD(n,e,t){const i=n.field.isKeyField()?Ne.comparator(e.key,t.key):(function(a,c,d){const f=c.data.field(a),h=d.data.field(a);return f!==null&&h!==null?pl(f,h):be(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return be(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ro(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return vw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=new Ut(Ne.comparator);function rr(){return hD}const Lw=new Ut(Ne.comparator);function Fc(...n){let e=Lw;for(const t of n)e=e.insert(t.key,t);return e}function Ow(n){let e=Lw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function $o(){return Wc()}function Fw(){return Wc()}function Wc(){return new ra((n=>n.toString()),((n,e)=>n.isEqual(e)))}const fD=new Ut(Ne.comparator),pD=new sn(Ne.comparator);function Ze(...n){let e=pD;for(const t of n)e=e.add(t);return e}const mD=new sn(Xe);function gD(){return mD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function qw(n){return{integerValue:""+n}}function yD(n,e){return zP(e)?qw(e):zg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this._=void 0}}function _D(n,e,t){return n instanceof Rh?(function(o,a){const c={fields:{[Aw]:{stringValue:Ew},[ww]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&qg(a)&&(a=Qh(a)),a&&(c.fields[Sw]=a),{mapValue:c}})(t,e):n instanceof lu?Hw(n,e):n instanceof cu?Gw(n,e):(function(o,a){const c=Bw(o,a),d=n0(c)+n0(o.Ae);return Wm(c)&&Wm(o.Ae)?qw(d):zg(o.serializer,d)})(n,e)}function vD(n,e,t){return n instanceof lu?Hw(n,e):n instanceof cu?Gw(n,e):t}function Bw(n,e){return n instanceof Nh?(function(i){return Wm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Rh extends ef{}class lu extends ef{constructor(e){super(),this.elements=e}}function Hw(n,e){const t=zw(e);for(const i of n.elements)t.some((o=>Es(o,i)))||t.push(i);return{arrayValue:{values:t}}}class cu extends ef{constructor(e){super(),this.elements=e}}function Gw(n,e){let t=zw(e);for(const i of n.elements)t=t.filter((o=>!Es(o,i)));return{arrayValue:{values:t}}}class Nh extends ef{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function n0(n){return Ht(n.integerValue||n.doubleValue)}function zw(n){return Bg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function TD(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof lu&&o instanceof lu||i instanceof cu&&o instanceof cu?hl(i.elements,o.elements,Es):i instanceof Nh&&o instanceof Nh?Es(i.Ae,o.Ae):i instanceof Rh&&o instanceof Rh})(n.transform,e.transform)}class ED{constructor(e,t){this.version=e,this.transformResults=t}}class An{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class tf{}function jw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nf(n.key,An.none()):new Tu(n.key,n.data,An.none());{const t=n.data,i=Hn.empty();let o=new sn(dn.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?i.delete(a):i.set(a,c),o=o.add(a)}return new oo(n.key,i,new hi(o.toArray()),An.none())}}function AD(n,e,t){n instanceof Tu?(function(o,a,c){const d=o.value.clone(),f=s0(o.fieldTransforms,a,c.transformResults);d.setAll(f),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof oo?(function(o,a,c){if(!oh(o.precondition,a))return void a.convertToUnknownDocument(c.version);const d=s0(o.fieldTransforms,a,c.transformResults),f=a.data;f.setAll($w(o)),f.setAll(d),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):(function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Xc(n,e,t,i){return n instanceof Tu?(function(a,c,d,f){if(!oh(a.precondition,c))return d;const h=a.value.clone(),v=r0(a.fieldTransforms,f,c);return h.setAll(v),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof oo?(function(a,c,d,f){if(!oh(a.precondition,c))return d;const h=r0(a.fieldTransforms,f,c),v=c.data;return v.setAll($w(a)),v.setAll(h),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,c,d){return oh(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function SD(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=Bw(i.transform,o||null);a!=null&&(t===null&&(t=Hn.empty()),t.set(i.field,a))}return t||null}function i0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&hl(i,o,((a,c)=>TD(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tu extends tf{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class oo extends tf{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $w(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function s0(n,e,t){const i=new Map;nt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,d=e.data.field(a.field);i.set(a.field,vD(c,d,t[o]))}return i}function r0(n,e,t){const i=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);i.set(o.field,_D(a,c,e))}return i}class nf extends tf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yw extends tf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&AD(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Xc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Xc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Fw();return this.mutations.forEach((o=>{const a=e.get(o.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(o.key)?null:d;const f=jw(c,d);f!==null&&i.set(o.key,f),c.isValidDocument()||c.convertToNoDocument(Me.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&hl(this.mutations,e.mutations,((t,i)=>i0(t,i)))&&hl(this.baseMutations,e.baseMutations,((t,i)=>i0(t,i)))}}class jg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){nt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return fD})();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,i[c].version);return new jg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,tt;function Kw(n){switch(n){case ae.OK:return be(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return be(15467,{code:n})}}function Jw(n){if(n===void 0)return sr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case $t.OK:return ae.OK;case $t.CANCELLED:return ae.CANCELLED;case $t.UNKNOWN:return ae.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ae.INTERNAL;case $t.UNAVAILABLE:return ae.UNAVAILABLE;case $t.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case $t.NOT_FOUND:return ae.NOT_FOUND;case $t.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case $t.ABORTED:return ae.ABORTED;case $t.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case $t.DATA_LOSS:return ae.DATA_LOSS;default:return be(39323,{code:n})}}(tt=$t||($t={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=new Yr([4294967295,4294967295],0);function o0(n){const e=RD().encode(n),t=new ow;return t.update(e),new Uint8Array(t.digest())}function a0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Yr([t,i],0),new Yr([o,a],0)]}class $g{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new qc(`Invalid padding: ${t}`);if(i<0)throw new qc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new qc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Yr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Yr.fromNumber(i)));return o.compare(ND)===1&&(o=new Yr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=o0(e),[i,o]=a0(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(i,o,a);if(!this.we(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new $g(a,o,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=o0(e),[i,o]=a0(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(i,o,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new sf(Me.min(),o,new Ut(Xe),rr(),Ze())}}class Eu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Eu(i,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Qw{constructor(e,t){this.targetId=e,this.Ce=t}}class Ww{constructor(e,t,i=hn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class l0{constructor(){this.ve=0,this.Fe=c0(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),i=Ze();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:be(38017,{changeType:a})}})),new Eu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=c0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xD{constructor(e){this.Ge=e,this.ze=new Map,this.je=rr(),this.Je=Yd(),this.He=Yd(),this.Ye=new Ut(Xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(Zm(a))if(i===0){const c=new Ne(a.path);this.et(t,c,un.newNoDocument(c,Me.min()))}else nt(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),f=d?this.ct(d,e,c):1;if(f!==0){this.it(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let c,d;try{c=Zr(i).toUint8Array()}catch(f){if(f instanceof Tw)return Xo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new $g(c,o,a)}catch(f){return Xo(f instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const d=this.ot(c);if(d){if(a.current&&Zm(d.target)){const f=new Ne(d.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,un.newNoDocument(f,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let i=Ze();this.He.forEach(((a,c)=>{let d=!0;c.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const o=new sf(e,t,this.Ye,this.je,i);return this.je=rr(),this.Je=Yd(),this.He=Yd(),this.Ye=new Ut(Xe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new l0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new sn(Xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new sn(Xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new l0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Yd(){return new Ut(Ne.comparator)}function c0(){return new Ut(Ne.comparator)}const bD={asc:"ASCENDING",desc:"DESCENDING"},PD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DD={and:"AND",or:"OR"};class MD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ng(n,e){return n.useProto3Json||_u(e)?e:{value:e}}function xh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kD(n,e){return xh(n,e.toTimestamp())}function pi(n){return nt(!!n,49232),Me.fromTimestamp((function(t){const i=Xr(t);return new St(i.seconds,i.nanos)})(n))}function Yg(n,e){return ig(n,e).canonicalString()}function ig(n,e){const t=(function(o){return new gt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Zw(n){const e=gt.fromString(n);return nt(rC(e),10190,{key:e.toString()}),e}function bh(n,e){return Yg(n.databaseId,e.path)}function Zc(n,e){const t=Zw(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(tC(t))}function eC(n,e){return Yg(n.databaseId,e)}function VD(n){const e=Zw(n);return e.length===4?gt.emptyPath():tC(e)}function sg(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tC(n){return nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function u0(n,e,t){return{name:bh(n,e),fields:t.value.mapValue.fields}}function UD(n,e){return"found"in e?(function(i,o){nt(!!o.found,43571),o.found.name,o.found.updateTime;const a=Zc(i,o.found.name),c=pi(o.found.updateTime),d=o.found.createTime?pi(o.found.createTime):Me.min(),f=new Hn({mapValue:{fields:o.found.fields}});return un.newFoundDocument(a,c,d,f)})(n,e):"missing"in e?(function(i,o){nt(!!o.missing,3894),nt(!!o.readTime,22933);const a=Zc(i,o.missing),c=pi(o.readTime);return un.newNoDocument(a,c)})(n,e):be(7234,{result:e})}function LD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:be(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,v){return h.useProto3Json?(nt(v===void 0||typeof v=="string",58123),hn.fromBase64String(v||"")):(nt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),hn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(h){const v=h.code===void 0?ae.UNKNOWN:Jw(h.code);return new ye(v,h.message||"")})(c);t=new Ww(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Zc(n,i.document.name),a=pi(i.document.updateTime),c=i.document.createTime?pi(i.document.createTime):Me.min(),d=new Hn({mapValue:{fields:i.document.fields}}),f=un.newFoundDocument(o,a,c,d),h=i.targetIds||[],v=i.removedTargetIds||[];t=new ah(h,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Zc(n,i.document),a=i.readTime?pi(i.readTime):Me.min(),c=un.newNoDocument(o,a),d=i.removedTargetIds||[];t=new ah([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Zc(n,i.document),a=i.removedTargetIds||[];t=new ah([],a,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,c=new ID(o,a),d=i.targetId;t=new Qw(d,c)}}return t}function nC(n,e){let t;if(e instanceof Tu)t={update:u0(n,e.key,e.value)};else if(e instanceof nf)t={delete:bh(n,e.key)};else if(e instanceof oo)t={update:u0(n,e.key,e.data),updateMask:$D(e.fieldMask)};else{if(!(e instanceof Yw))return be(16599,{Vt:e.type});t={verify:bh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,c){const d=c.transform;if(d instanceof Rh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof lu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof cu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Nh)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw be(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:kD(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:be(27497)})(n,e.precondition)),t}function OD(n,e){return n&&n.length>0?(nt(e!==void 0,14353),n.map((t=>(function(o,a){let c=o.updateTime?pi(o.updateTime):pi(a);return c.isEqual(Me.min())&&(c=pi(a)),new ED(c,o.transformResults||[])})(t,e)))):[]}function FD(n,e){return{documents:[eC(n,e.path)]}}function qD(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=eC(n,o);const a=(function(h){if(h.length!==0)return sC(Wi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(h){if(h.length!==0)return h.map((v=>(function(A){return{field:Wa(A.field),direction:GD(A.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=ng(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function BD(n){let e=VD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){nt(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(E){const A=iC(E);return A instanceof Wi&&bw(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(L){return new Ih(Xa(L.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,_u(A)?null:A})(t.limit));let f=null;t.startAt&&(f=(function(E){const A=!!E.before,N=E.values||[];return new Ch(N,A)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const A=!E.before,N=E.values||[];return new Ch(N,A)})(t.endAt)),lD(e,o,c,a,d,"F",f,h)}function HD(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Xa(t.unaryFilter.field);return Kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Xa(t.unaryFilter.field);return Kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Xa(t.unaryFilter.field);return Kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Xa(t.unaryFilter.field);return Kt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Kt.create(Xa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wi.create(t.compositeFilter.filters.map((i=>iC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(n):be(30097,{filter:n})}function GD(n){return bD[n]}function zD(n){return PD[n]}function jD(n){return DD[n]}function Wa(n){return{fieldPath:n.canonicalString()}}function Xa(n){return dn.fromServerFormat(n.fieldPath)}function sC(n){return n instanceof Kt?(function(t){if(t.op==="=="){if(WE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NAN"}};if(QE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(WE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NAN"}};if(QE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(t.field),op:zD(t.op),value:t.value}}})(n):n instanceof Wi?(function(t){const i=t.getFilters().map((o=>sC(o)));return i.length===1?i[0]:{compositeFilter:{op:jD(t.op),filters:i}}})(n):be(54877,{filter:n})}function $D(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function rC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t,i,o,a=Me.min(),c=Me.min(),d=hn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.yt=e}}function KD(n){const e=BD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.Cn=new QD}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Wr.min())}updateCollectionGroup(e,t,i){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class QD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new sn(gt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new sn(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oC=41943040;class Jn{static withCacheSize(e){return new Jn(e,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(oC,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gl(0)}static cr(){return new gl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="LruGarbageCollector",WD=1048576;function f0([n,e],[t,i]){const o=Xe(n,t);return o===0?Xe(e,i):o}class XD{constructor(e){this.Ir=e,this.buffer=new sn(f0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();f0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZD{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(h0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sl(t)?ve(h0,"Ignoring IndexedDB error during garbage collection: ",t):await Al(t)}await this.Vr(3e5)}))}}class eM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Jh.ce);const i=new XD(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(d0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,c,d,f,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),Ja()<=We.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${E} documents in `+(h-f)+`ms
Total Duration: ${h-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function tM(n,e){return new eM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.changes=new ra((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ue.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Xc(i.mutation,o,hi.empty(),St.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ze()){const o=$o();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let c=Fc();return a.forEach(((d,f)=>{c=c.insert(d,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=$o();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ze())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,o){let a=rr();const c=Wc(),d=(function(){return Wc()})();return t.forEach(((f,h)=>{const v=i.get(h.key);o.has(h.key)&&(v===void 0||v.mutation instanceof oo)?a=a.insert(h.key,h):v!==void 0?(c.set(h.key,v.mutation.getFieldMask()),Xc(v.mutation,h,v.mutation.getFieldMask(),St.now())):c.set(h.key,hi.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,v)=>c.set(h,v))),t.forEach(((h,v)=>d.set(h,new iM(v,c.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Wc();let o=new Ut(((c,d)=>c-d)),a=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let v=i.get(f)||hi.empty();v=d.applyToLocalView(h,v),i.set(f,v);const E=(o.get(d.batchId)||Ze()).add(f);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),h=f.key,v=f.value,E=Fw();v.forEach((A=>{if(!a.has(A)){const N=jw(t.get(A),i.get(A));N!==null&&E.set(A,N),a=a.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ue.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return Ne.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):ue.resolve($o());let d=ru,f=a;return c.next((h=>ue.forEach(h,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{f=f.insert(v,A)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,Ze()))).next((v=>({batchId:d,changes:Ow(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((i=>{let o=Fc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let c=Fc();return this.indexManager.getCollectionParents(e,a).next((d=>ue.forEach(d,(f=>{const h=(function(E,A){return new vu(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((v=>{v.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((c=>{a.forEach(((f,h)=>{const v=h.getKey();c.get(v)===null&&(c=c.insert(v,un.newInvalidDocument(v)))}));let d=Fc();return c.forEach(((f,h)=>{const v=a.get(f);v!==void 0&&Xc(v.mutation,h,hi.empty(),St.now()),Zh(t,h)&&(d=d.insert(f,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:pi(o.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:KD(o.bundledQuery),readTime:pi(o.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.overlays=new Ut(Ne.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const i=$o();return ue.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),ue.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),ue.resolve()}getOverlaysForCollection(e,t,i){const o=$o(),a=t.length+1,c=new Ne(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new Ut(((h,v)=>h-v));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let v=a.get(h.largestBatchId);v===null&&(v=$o(),a=a.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const d=$o(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,v)=>d.set(h,v))),!(d.size()>=o)););return ue.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new CD(t,i));let a=this.qr.get(t);a===void 0&&(a=Ze(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(){this.Qr=new sn(cn.$r),this.Ur=new sn(cn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new cn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new cn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ne(new gt([])),i=new cn(t,e),o=new cn(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new gt([])),i=new cn(t,e),o=new cn(t,e+1);let a=Ze();return this.Ur.forEachInRange([i,o],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new cn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class cn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||Xe(e.Yr,t.Yr)}static Kr(e,t){return Xe(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new sn(cn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new wD(a,t,i,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new cn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Fg:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new cn(t,0),o=new cn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(c=>{const d=this.Xr(c.Yr);a.push(d)})),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new sn(Xe);return t.forEach((o=>{const a=new cn(o,0),c=new cn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(d=>{i=i.add(d.Yr)}))})),ue.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ne.isDocumentKey(a)||(a=a.child(""));const c=new cn(new Ne(a),0);let d=new sn(Xe);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(f.Yr)),!0)}),c),ue.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ue.forEach(t.mutations,(o=>{const a=new cn(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new cn(t,0),o=this.Zr.firstAfterOrEqual(i);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.ri=e,this.docs=(function(){return new Ut(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ue.resolve(i?i.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let i=rr();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():un.newInvalidDocument(o))})),ue.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=rr();const c=t.path,d=new Ne(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:h,value:{document:v}}=f.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||qP(FP(v),i)<=0||(o.has(v.key)||Zh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,i,o){be(9500)}ii(e,t){return ue.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new uM(this)}getSize(e){return ue.resolve(this.size)}}class uM extends nM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.persistence=e,this.si=new ra((t=>Hg(t)),Gg),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new Kg,this.targetCount=0,this.ai=gl.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new gl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ue.waitFor(a).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ue.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ue.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((c=>{a.push(o.markPotentiallyOrphaned(e,c))})),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ue.resolve(i)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t){this.ui={},this.overlays={},this.ci=new Jh(0),this.li=!1,this.li=!0,this.hi=new aM,this.referenceDelegate=e(this),this.Pi=new dM(this),this.indexManager=new JD,this.remoteDocumentCache=(function(o){return new cM(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new YD(t),this.Ii=new rM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new lM(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const o=new hM(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return ue.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class hM extends HP{constructor(e){super(),this.currentSequenceNumber=e}}class Jg{constructor(e){this.persistence=e,this.Ri=new Kg,this.Vi=null}static mi(e){return new Jg(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ue.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(i=>{const o=Ne.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Me.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ph{constructor(e,t){this.persistence=e,this.pi=new ra((i=>jP(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=tM(this,t)}static mi(e,t){return new Ph(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?ue.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((d=>{d||(i++,a.removeEntry(c,Me.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sh(e.data.value)),t}br(e,t,i){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ue.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ze(),o=Ze();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Qg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VN()?8:GP(Dn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new fM;return this.Ss(e,t,c).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Ja()<=We.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Qa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Ja()<=We.DEBUG&&ve("QueryEngine","Query:",Qa(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ja()<=We.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Qa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ts(t))):ue.resolve())}ys(e,t){if(t0(t))return ue.resolve(null);let i=Ts(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=tg(t,null,"F"),i=Ts(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const c=Ze(...a);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((f=>{const h=this.Ds(t,d);return this.Cs(t,h,c,f.readTime)?this.ys(e,tg(t,null,"F")):this.vs(e,h,t,f)}))))})))))}ws(e,t,i,o){return t0(t)||o.isEqual(Me.min())?ue.resolve(null):this.ps.getDocuments(e,i).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,i,o)?ue.resolve(null):(Ja()<=We.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Qa(t)),this.vs(e,c,t,OP(o,ru)).next((d=>d)))}))}Ds(e,t){let i=new sn(Uw(e));return t.forEach(((o,a)=>{Zh(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return Ja()<=We.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Qa(t)),this.ps.getDocumentsMatchingQuery(e,t,Wr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="LocalStore",mM=3e8;class gM{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Ut(Xe),this.xs=new ra((a=>Hg(a)),Gg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function yM(n,e,t,i){return new gM(n,e,t,i)}async function lC(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const c=[],d=[];let f=Ze();for(const h of o){c.push(h.batchId);for(const v of h.mutations)f=f.add(v.key)}for(const h of a){d.push(h.batchId);for(const v of h.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(i,f).next((h=>({Ls:h,removedBatchIds:c,addedBatchIds:d})))}))}))}function _M(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,f,h,v){const E=h.batch,A=E.keys();let N=ue.resolve();return A.forEach((L=>{N=N.next((()=>v.getEntry(f,L))).next((F=>{const U=h.docVersions.get(L);nt(U!==null,48541),F.version.compareTo(U)<0&&(E.applyToRemoteDocument(F,h),F.isValidDocument()&&(F.setReadTime(h.commitVersion),v.addEntry(F)))}))})),N.next((()=>d.mutationQueue.removeMutationBatch(f,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let f=Ze();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(f=f.add(d.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function cC(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function vM(n,e){const t=Ue(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const A=o.get(E);if(!A)return;d.push(t.Pi.removeMatchingKeys(a,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,v.addedDocuments,E))));let N=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?N=N.withResumeToken(hn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,i)),o=o.insert(E,N),(function(F,U,Q){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=mM?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(A,N,v)&&d.push(t.Pi.updateTargetData(a,N))}));let f=rr(),h=Ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(TM(a,c,e.documentUpdates).next((v=>{f=v.ks,h=v.qs}))),!i.isEqual(Me.min())){const v=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return ue.waitFor(d).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(t.Ms=o,a)))}function TM(n,e,t){let i=Ze(),o=Ze();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let c=rr();return t.forEach(((d,f)=>{const h=a.get(d);f.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(Me.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):ve(Wg,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",f.version)})),{ks:c,qs:o}}))}function EM(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Fg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function AM(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,ue.resolve(o)):t.Pi.allocateTargetId(i).next((c=>(o=new Gr(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function rg(n,e,t){const i=Ue(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Sl(c))throw c;ve(Wg,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function p0(n,e,t){const i=Ue(n);let o=Me.min(),a=Ze();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,h,v){const E=Ue(f),A=E.xs.get(v);return A!==void 0?ue.resolve(E.Ms.get(A)):E.Pi.getTargetData(h,v)})(i,c,Ts(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((f=>{a=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?o:Me.min(),t?a:Ze()))).next((d=>(SM(i,uD(e),d),{documents:d,Qs:a})))))}function SM(n,e,t){let i=n.Os.get(e)||Me.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class m0{constructor(){this.activeTargetIds=gD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wM{constructor(){this.Mo=new m0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new m0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="ConnectivityMonitor";class y0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(g0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(g0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd=null;function og(){return Kd===null?Kd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kd++,"0x"+Kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="RestConnection",IM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Sh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const c=og(),d=this.zo(e,t.toUriEncodedString());ve(bm,`Sending RPC '${e}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,o,a);const{host:h}=new URL(d),v=ia(h);return this.Jo(e,d,f,i,v).then((E=>(ve(bm,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Xo(bm,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",i),E}))}Ho(e,t,i,o,a,c){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+El})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=IM[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="WebChannelConnection";class xM extends RM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const c=og();return new Promise(((d,f)=>{const h=new aw;h.setWithCredentials(!0),h.listenOnce(lw.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case ih.NO_ERROR:const E=h.getResponseJson();ve(Nn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case ih.TIMEOUT:ve(Nn,`RPC '${e}' ${c} timed out`),f(new ye(ae.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const A=h.getStatus();if(ve(Nn,`RPC '${e}' ${c} failed with status:`,A,"response text:",h.getResponseText()),A>0){let N=h.getResponseJson();Array.isArray(N)&&(N=N[0]);const L=N?.error;if(L&&L.status&&L.message){const F=(function(Q){const H=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(H)>=0?H:ae.UNKNOWN})(L.status);f(new ye(F,L.message))}else f(new ye(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new ye(ae.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:c,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ve(Nn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);ve(Nn,`RPC '${e}' ${c} sending request:`,o),h.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=og(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=dw(),d=uw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const v=a.join("");ve(Nn,`Creating RPC '${e}' stream ${o}: ${v}`,f);const E=c.createWebChannel(v,f);this.I_(E);let A=!1,N=!1;const L=new NM({Yo:U=>{N?ve(Nn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(A||(ve(Nn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),ve(Nn,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),F=(U,Q,H)=>{U.listen(Q,(z=>{try{H(z)}catch(re){setTimeout((()=>{throw re}),0)}}))};return F(E,Oc.EventType.OPEN,(()=>{N||(ve(Nn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),F(E,Oc.EventType.CLOSE,(()=>{N||(N=!0,ve(Nn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(E))})),F(E,Oc.EventType.ERROR,(U=>{N||(N=!0,Xo(Nn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),L.a_(new ye(ae.UNAVAILABLE,"The operation could not be completed")))})),F(E,Oc.EventType.MESSAGE,(U=>{if(!N){const Q=U.data[0];nt(!!Q,16349);const H=Q,z=H?.error||H[0]?.error;if(z){ve(Nn,`RPC '${e}' stream ${o} received error:`,z);const re=z.status;let ee=(function(D){const b=$t[D];if(b!==void 0)return Jw(b)})(re),he=z.message;ee===void 0&&(ee=ae.INTERNAL,he="Unknown error status: "+re+" with message "+z.message),N=!0,L.a_(new ye(ee,he)),E.close()}else ve(Nn,`RPC '${e}' stream ${o} received:`,Q),L.u_(Q)}})),F(d,cw.STAT_EVENT,(U=>{U.stat===Km.PROXY?ve(Nn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Km.NOPROXY&&ve(Nn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(n){return new MD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="PersistentStream";class uC{constructor(e,t,i,o,a,c,d,f){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ye(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(_0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(_0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bM extends uC{constructor(e,t,i,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=LD(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Me.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Me.min():c.readTime?pi(c.readTime):Me.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=sg(this.serializer),t.addTarget=(function(a,c){let d;const f=c.target;if(d=Zm(f)?{documents:FD(a,f)}:{query:qD(a,f).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Xw(a,c.resumeToken);const h=ng(a,c.expectedCount);h!==null&&(d.expectedCount=h)}else if(c.snapshotVersion.compareTo(Me.min())>0){d.readTime=xh(a,c.snapshotVersion.toTimestamp());const h=ng(a,c.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=HD(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=sg(this.serializer),t.removeTarget=e,this.q_(t)}}class PM extends uC{constructor(e,t,i,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=OD(e.writeResults,e.commitTime),i=pi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=sg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>nC(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{}class MM extends DM{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,ig(t,i),o,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(ae.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,ig(t,i),o,c,d,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(ae.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class kM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sr(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="RemoteStore";class VM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{oa(this)&&(ve(Zo,"Restarting streams for network reachability change."),await(async function(f){const h=Ue(f);h.Ea.add(4),await Au(h),h.Ra.set("Unknown"),h.Ea.delete(4),await of(h)})(this))}))})),this.Ra=new kM(i,o)}}async function of(n){if(oa(n))for(const e of n.da)await e(!0)}async function Au(n){for(const e of n.da)await e(!1)}function dC(n,e){const t=Ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ny(t)?ty(t):wl(t).O_()&&ey(t,e))}function Zg(n,e){const t=Ue(n),i=wl(t);t.Ia.delete(e),i.O_()&&hC(t,e),t.Ia.size===0&&(i.O_()?i.L_():oa(t)&&t.Ra.set("Unknown"))}function ey(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wl(n).Y_(e)}function hC(n,e){n.Va.Ue(e),wl(n).Z_(e)}function ty(n){n.Va=new xD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),wl(n).start(),n.Ra.ua()}function ny(n){return oa(n)&&!wl(n).x_()&&n.Ia.size>0}function oa(n){return Ue(n).Ea.size===0}function fC(n){n.Va=void 0}async function UM(n){n.Ra.set("Online")}async function LM(n){n.Ia.forEach(((e,t)=>{ey(n,e)}))}async function OM(n,e){fC(n),ny(n)?(n.Ra.ha(e),ty(n)):n.Ra.set("Unknown")}async function FM(n,e,t){if(n.Ra.set("Online"),e instanceof Ww&&e.state===2&&e.cause)try{await(async function(o,a){const c=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){ve(Zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dh(n,i)}else if(e instanceof ah?n.Va.Ze(e):e instanceof Qw?n.Va.st(e):n.Va.tt(e),!t.isEqual(Me.min()))try{const i=await cC(n.localStore);t.compareTo(i)>=0&&await(function(a,c){const d=a.Va.Tt(c);return d.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ia.get(h);v&&a.Ia.set(h,v.withResumeToken(f.resumeToken,c))}})),d.targetMismatches.forEach(((f,h)=>{const v=a.Ia.get(f);if(!v)return;a.Ia.set(f,v.withResumeToken(hn.EMPTY_BYTE_STRING,v.snapshotVersion)),hC(a,f);const E=new Gr(v.target,f,h,v.sequenceNumber);ey(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ve(Zo,"Failed to raise snapshot:",i),await Dh(n,i)}}async function Dh(n,e,t){if(!Sl(e))throw e;n.Ea.add(1),await Au(n),n.Ra.set("Offline"),t||(t=()=>cC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve(Zo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await of(n)}))}function pC(n,e){return e().catch((t=>Dh(n,t,e)))}async function af(n){const e=Ue(n),t=to(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fg;for(;qM(e);)try{const o=await EM(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,BM(e,o)}catch(o){await Dh(e,o)}mC(e)&&gC(e)}function qM(n){return oa(n)&&n.Ta.length<10}function BM(n,e){n.Ta.push(e);const t=to(n);t.O_()&&t.X_&&t.ea(e.mutations)}function mC(n){return oa(n)&&!to(n).x_()&&n.Ta.length>0}function gC(n){to(n).start()}async function HM(n){to(n).ra()}async function GM(n){const e=to(n);for(const t of n.Ta)e.ea(t.mutations)}async function zM(n,e,t){const i=n.Ta.shift(),o=jg.from(i,e,t);await pC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await af(n)}async function jM(n,e){e&&to(n).X_&&await(async function(i,o){if((function(c){return Kw(c)&&c!==ae.ABORTED})(o.code)){const a=i.Ta.shift();to(i).B_(),await pC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await af(i)}})(n,e),mC(n)&&gC(n)}async function v0(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),ve(Zo,"RemoteStore received new credentials");const i=oa(t);t.Ea.add(3),await Au(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await of(t)}async function $M(n,e){const t=Ue(n);e?(t.Ea.delete(2),await of(t)):e||(t.Ea.add(2),await Au(t),t.Ra.set("Unknown"))}function wl(n){return n.ma||(n.ma=(function(t,i,o){const a=Ue(t);return a.sa(),new bM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:UM.bind(null,n),t_:LM.bind(null,n),r_:OM.bind(null,n),H_:FM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ny(n)?ty(n):n.Ra.set("Unknown")):(await n.ma.stop(),fC(n))}))),n.ma}function to(n){return n.fa||(n.fa=(function(t,i,o){const a=Ue(t);return a.sa(),new PM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:HM.bind(null,n),r_:jM.bind(null,n),ta:GM.bind(null,n),na:zM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await af(n)):(await n.fa.stop(),n.Ta.length>0&&(ve(Zo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const c=Date.now()+i,d=new iy(e,t,c,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Sl(n))return new ye(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{static emptySet(e){return new ol(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ne.comparator(t.key,i.key):(t,i)=>Ne.comparator(t.key,i.key),this.keyedMap=Fc(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ol)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ol;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.ga=new Ut(Ne.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class yl{constructor(e,t,i,o,a,c,d,f,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new yl(e,t,ol.emptySet(t),c,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class KM{constructor(){this.queries=E0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ue(t),a=o.queries;o.queries=E0(),a.forEach(((c,d)=>{for(const f of d.Sa)f.onError(i)}))})(this,new ye(ae.ABORTED,"Firestore shutting down"))}}function E0(){return new ra((n=>Vw(n)),Xh)}async function ry(n,e){const t=Ue(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new YM,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=sy(c,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&ay(t)}async function oy(n,e){const t=Ue(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function JM(n,e){const t=Ue(n);let i=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const d of c.Sa)d.Fa(o)&&(i=!0);c.wa=o}}i&&ay(t)}function QM(n,e,t){const i=Ue(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function ay(n){n.Ca.forEach((e=>{e.next()}))}var ag,A0;(A0=ag||(ag={})).Ma="default",A0.Cache="cache";class ly{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new yl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ag.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.key=e}}class _C{constructor(e){this.key=e}}class WM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=Uw(e),this.tu=new ol(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new T0,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const A=o.get(v),N=Zh(this.query,E)?E:null,L=!!A&&this.mutatedKeys.has(A.key),F=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;A&&N?A.data.isEqual(N.data)?L!==F&&(i.track({type:3,doc:N}),U=!0):this.su(A,N)||(i.track({type:2,doc:N}),U=!0,(f&&this.eu(N,f)>0||h&&this.eu(N,h)<0)&&(d=!0)):!A&&N?(i.track({type:0,doc:N}),U=!0):A&&!N&&(i.track({type:1,doc:A}),U=!0,(f||h)&&(d=!0)),U&&(N?(c=c.add(N),a=F?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:c,iu:i,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(N,L){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:U})}};return F(N)-F(L)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],f=this.Xa.size===0&&this.current&&!o?1:0,h=f!==this.Za;return this.Za=f,c.length!==0||h?{snapshot:new yl(this.query,e.tu,a,c,e.mutatedKeys,f===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new T0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new _C(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new yC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cy="SyncEngine";class XM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ZM{constructor(e){this.key=e,this.hu=!1}}class ek{constructor(e,t,i,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ra((d=>Vw(d)),Xh),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(Ne.comparator),this.Au=new Map,this.Ru=new Kg,this.Vu={},this.mu=new Map,this.fu=gl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tk(n,e,t=!0){const i=wC(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await vC(i,e,t,!0),o}async function nk(n,e){const t=wC(n);await vC(t,e,!0,!1)}async function vC(n,e,t,i){const o=await AM(n.localStore,Ts(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await ik(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&dC(n.remoteStore,o),d}async function ik(n,e,t,i,o){n.pu=(E,A,N)=>(async function(F,U,Q,H){let z=U.view.ru(Q);z.Cs&&(z=await p0(F.localStore,U.query,!1).then((({documents:O})=>U.view.ru(O,z))));const re=H&&H.targetChanges.get(U.targetId),ee=H&&H.targetMismatches.get(U.targetId)!=null,he=U.view.applyChanges(z,F.isPrimaryClient,re,ee);return w0(F,U.targetId,he.au),he.snapshot})(n,E,A,N);const a=await p0(n.localStore,e,!0),c=new WM(e,a.Qs),d=c.ru(a.documents),f=Eu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=c.applyChanges(d,n.isPrimaryClient,f);w0(n,t,h.au);const v=new XM(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function sk(n,e,t){const i=Ue(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((c=>!Xh(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await rg(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Zg(i.remoteStore,o.targetId),lg(i,o.targetId)})).catch(Al)):(lg(i,o.targetId),await rg(i.localStore,o.targetId,!0))}async function rk(n,e){const t=Ue(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Zg(t.remoteStore,i.targetId))}async function ok(n,e,t){const i=fk(n);try{const o=await(function(c,d){const f=Ue(c),h=St.now(),v=d.reduce(((N,L)=>N.add(L.key)),Ze());let E,A;return f.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let L=rr(),F=Ze();return f.Ns.getEntries(N,v).next((U=>{L=U,L.forEach(((Q,H)=>{H.isValidDocument()||(F=F.add(Q))}))})).next((()=>f.localDocuments.getOverlayedDocuments(N,L))).next((U=>{E=U;const Q=[];for(const H of d){const z=SD(H,E.get(H.key).overlayedDocument);z!=null&&Q.push(new oo(H.key,z,Rw(z.value.mapValue),An.exists(!0)))}return f.mutationQueue.addMutationBatch(N,h,Q,d)})).next((U=>{A=U;const Q=U.applyToLocalDocumentSet(E,F);return f.documentOverlayCache.saveOverlays(N,U.batchId,Q)}))})).then((()=>({batchId:A.batchId,changes:Ow(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,d,f){let h=c.Vu[c.currentUser.toKey()];h||(h=new Ut(Xe)),h=h.insert(d,f),c.Vu[c.currentUser.toKey()]=h})(i,o.batchId,t),await Su(i,o.changes),await af(i.remoteStore)}catch(o){const a=sy(o,"Failed to persist write");t.reject(a)}}async function TC(n,e){const t=Ue(n);try{const i=await vM(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const c=t.Au.get(a);c&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?nt(c.hu,14607):o.removedDocuments.size>0&&(nt(c.hu,42227),c.hu=!1))})),await Su(t,i,e)}catch(i){await Al(i)}}function S0(n,e,t){const i=Ue(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const f=Ue(c);f.onlineState=d;let h=!1;f.queries.forEach(((v,E)=>{for(const A of E.Sa)A.va(d)&&(h=!0)})),h&&ay(f)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ak(n,e,t){const i=Ue(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let c=new Ut(Ne.comparator);c=c.insert(a,un.newNoDocument(a,Me.min()));const d=Ze().add(a),f=new sf(Me.min(),new Map,new Ut(Xe),c,d);await TC(i,f),i.du=i.du.remove(a),i.Au.delete(e),uy(i)}else await rg(i.localStore,e,!1).then((()=>lg(i,e,t))).catch(Al)}async function lk(n,e){const t=Ue(n),i=e.batch.batchId;try{const o=await _M(t.localStore,e);AC(t,i,null),EC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Su(t,o)}catch(o){await Al(o)}}async function ck(n,e,t){const i=Ue(n);try{const o=await(function(c,d){const f=Ue(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return f.mutationQueue.lookupMutationBatch(h,d).next((E=>(nt(E!==null,37113),v=E.keys(),f.mutationQueue.removeMutationBatch(h,E)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,v,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>f.localDocuments.getDocuments(h,v)))}))})(i.localStore,e);AC(i,e,t),EC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Su(i,o)}catch(o){await Al(o)}}function EC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function AC(n,e,t){const i=Ue(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function lg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||SC(n,i)}))}function SC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Zg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),uy(n))}function w0(n,e,t){for(const i of t)i instanceof yC?(n.Ru.addReference(i.key,e),uk(n,i)):i instanceof _C?(ve(cy,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||SC(n,i.key)):be(19791,{wu:i})}function uk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ve(cy,"New document in limbo: "+t),n.Eu.add(i),uy(n))}function uy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ne(gt.fromString(e)),i=n.fu.next();n.Au.set(i,new ZM(t)),n.du=n.du.insert(t,i),dC(n.remoteStore,new Gr(Ts(Wh(t.path)),i,"TargetPurposeLimboResolution",Jh.ce))}}async function Su(n,e,t){const i=Ue(n),o=[],a=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,f)=>{c.push(i.pu(f,e,t).then((h=>{if((h||t)&&i.isPrimaryClient){const v=h?!h.fromCache:t?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(h){o.push(h);const v=Qg.As(f.targetId,h);a.push(v)}})))})),await Promise.all(c),i.Pu.H_(o),await(async function(f,h){const v=Ue(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(h,(A=>ue.forEach(A.Es,(N=>v.persistence.referenceDelegate.addReference(E,A.targetId,N))).next((()=>ue.forEach(A.ds,(N=>v.persistence.referenceDelegate.removeReference(E,A.targetId,N)))))))))}catch(E){if(!Sl(E))throw E;ve(Wg,"Failed to update sequence numbers: "+E)}for(const E of h){const A=E.targetId;if(!E.fromCache){const N=v.Ms.get(A),L=N.snapshotVersion,F=N.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(A,F)}}})(i.localStore,a))}async function dk(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){ve(cy,"User change. New user:",e.toKey());const i=await lC(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((d=>{d.forEach((f=>{f.reject(new ye(ae.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Su(t,i.Ls)}}function hk(n,e){const t=Ue(n),i=t.Au.get(e);if(i&&i.hu)return Ze().add(i.key);{let o=Ze();const a=t.Iu.get(e);if(!a)return o;for(const c of a){const d=t.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function wC(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ak.bind(null,e),e.Pu.H_=JM.bind(null,e.eventManager),e.Pu.yu=QM.bind(null,e.eventManager),e}function fk(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ck.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return yM(this.persistence,new pM,e.initialUser,this.serializer)}Cu(e){return new aC(Jg.mi,this.serializer)}Du(e){return new wM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class pk extends Mh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof Ph,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ZD(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new aC((i=>Ph.mi(i,t)),this.serializer)}}class cg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>S0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dk.bind(null,this.syncEngine),await $M(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KM})()}createDatastore(e){const t=rf(e.databaseInfo.databaseId),i=(function(a){return new xM(a)})(e.databaseInfo);return(function(a,c,d,f){return new MM(a,c,d,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,c,d){return new VM(i,o,a,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>S0(this.syncEngine,t,0)),(function(){return y0.v()?new y0:new CM})())}createSyncEngine(e,t){return(function(o,a,c,d,f,h,v){const E=new ek(o,a,c,d,f,h);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Ue(t);ve(Zo,"RemoteStore shutting down."),i.Ea.add(5),await Au(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cg.provider={build:()=>new cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ye(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,a){const c=Ue(o),d={documents:a.map((E=>bh(c.serializer,E)))},f=await c.Ho("BatchGetDocuments",c.serializer.databaseId,gt.emptyPath(),d,a.length),h=new Map;f.forEach((E=>{const A=UD(c.serializer,E);h.set(A.key.toString(),A)}));const v=[];return a.forEach((E=>{const A=h.get(E.toString());nt(!!A,55234,{key:E}),v.push(A)})),v})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new nf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const o=Ne.fromPath(i);this.mutations.push(new Yw(o,this.precondition(o)))})),await(async function(i,o){const a=Ue(i),c={writes:o.map((d=>nC(a.serializer,d)))};await a.Go("Commit",a.serializer.databaseId,gt.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw be(50498,{Gu:e.constructor.name});t=Me.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ye(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Me.min())?An.exists(!1):An.updateTime(t):An.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Me.min()))throw new ye(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return An.updateTime(t)}return An.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,t,i,o,a){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=o,this.deferred=a,this.zu=i.maxAttempts,this.M_=new Xg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new mk(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Yu(o)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!_u(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Kw(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="FirestoreClient";class yk{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=xn.UNAUTHENTICATED,this.clientId=Yh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async c=>{ve(no,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ve(no,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Dm(n,e){n.asyncQueue.verifyOperationInProgress(),ve(no,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await lC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function C0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _k(n);ve(no,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>v0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>v0(e.remoteStore,o))),n._onlineComponents=e}async function _k(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(no,"Using user provided OfflineComponentProvider");try{await Dm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Xo("Error using user provided cache. Falling back to memory cache: "+t),await Dm(n,new Mh)}}else ve(no,"Using default OfflineComponentProvider"),await Dm(n,new pk(void 0));return n._offlineComponents}async function hy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(no,"Using user provided OnlineComponentProvider"),await C0(n,n._uninitializedComponentsProvider._online)):(ve(no,"Using default OnlineComponentProvider"),await C0(n,new cg))),n._onlineComponents}function vk(n){return hy(n).then((e=>e.syncEngine))}function Tk(n){return hy(n).then((e=>e.datastore))}async function kh(n){const e=await hy(n),t=e.eventManager;return t.onListen=tk.bind(null,e.syncEngine),t.onUnlisten=sk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rk.bind(null,e.syncEngine),t}function Ek(n,e,t={}){const i=new vs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,f,h){const v=new dy({next:A=>{v.Nu(),c.enqueueAndForget((()=>oy(a,E)));const N=A.docs.has(d);!N&&A.fromCache?h.reject(new ye(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&A.fromCache&&f&&f.source==="server"?h.reject(new ye(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(A)},error:A=>h.reject(A)}),E=new ly(Wh(d.path),v,{includeMetadataChanges:!0,qa:!0});return ry(a,E)})(await kh(n),n.asyncQueue,e,t,i))),i.promise}function Ak(n,e,t={}){const i=new vs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,f,h){const v=new dy({next:A=>{v.Nu(),c.enqueueAndForget((()=>oy(a,E))),A.fromCache&&f.source==="server"?h.reject(new ye(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(A)},error:A=>h.reject(A)}),E=new ly(d,v,{includeMetadataChanges:!0,qa:!0});return ry(a,E)})(await kh(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="firestore.googleapis.com",R0=!0;class N0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IC,this.ssl=R0}else this.host=e.host,this.ssl=e.ssl??R0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WD)throw new ye(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lf{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new pw;switch(i.type){case"firstParty":return new DP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=I0.get(t);i&&(ve("ComponentProvider","Removing Datastore"),I0.delete(t),i.terminate())})(this),Promise.resolve()}}function RC(n,e,t,i={}){n=Pn(n,lf);const o=ia(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(wg(`https://${d}`),Cg("Firestore",!0)),a.host!==IC&&a.host!==d&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:d,ssl:o,emulatorOptions:i};if(!Ko(f,c)&&(n._setSettings(f),i.mockUserToken)){let h,v;if(typeof i.mockUserToken=="string")h=i.mockUserToken,v=xn.MOCK_USER;else{h=yS(i.mockUserToken,n._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ye(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new xn(E)}n._authCredentials=new xP(new fw(h,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ao(this.firestore,e,this._query)}}class xt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(yu(t,xt._jsonSchema))return new xt(e,i||null,new Ne(gt.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Jt("string",xt._jsonSchemaVersion),referencePath:Jt("string")};class Zs extends ao{constructor(e,t,i){super(e,t,Wh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Ne(e))}withConverter(e){return new Zs(this.firestore,e,this._path)}}function En(n,e,...t){if(n=Vt(n),mw("collection","path",e),n instanceof lf){const i=gt.fromString(e,...t);return BE(i),new Zs(n,null,i)}{if(!(n instanceof xt||n instanceof Zs))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(gt.fromString(e,...t));return BE(i),new Zs(n.firestore,null,i)}}function je(n,e,...t){if(n=Vt(n),arguments.length===1&&(e=Yh.newId()),mw("doc","path",e),n instanceof lf){const i=gt.fromString(e,...t);return qE(i),new xt(n,null,new Ne(i))}{if(!(n instanceof xt||n instanceof Zs))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(gt.fromString(e,...t));return qE(i),new xt(n.firestore,n instanceof Zs?n.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="AsyncQueue";class b0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xg(this,"async_queue_retry"),this._c=()=>{const i=Pm();i&&ve(x0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Pm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new vs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Sl(e))throw e;ve(x0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,sr("INTERNAL UNHANDLED ERROR: ",P0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=iy.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:P0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function P0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Xi extends lf{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new b0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b0(e),this._firestoreClient=void 0,await e}}}function NC(n,e){const t=typeof n=="object"?n:Ng(),i=typeof n=="string"?n:Sh,o=Gh(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=pS("firestore");a&&RC(o,...a)}return o}function Cl(n){if(n._terminated)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Sk(n),n._firestoreClient}function Sk(n){const e=n._freezeSettings(),t=(function(o,a,c,d){return new KP(o,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,CC(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new yk(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const a=o?._online.build();return{_offline:o?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(hn.fromBase64String(e))}catch(t){throw new ye(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xn(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yu(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Jt("string",Xn._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(e){if(yu(e,Yi._jsonSchema))return new Yi(e.latitude,e.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:Jt("string",Yi._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yu(e,Ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ki(e.vectorValues);throw new ye(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ki._jsonSchemaVersion="firestore/vectorValue/1.0",Ki._jsonSchema={type:Jt("string",Ki._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=/^__.*__$/;class Ck{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new oo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tu(e,this.data,t,this.fieldTransforms)}}class xC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new oo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:n})}}class fy{constructor(e,t,i,o,a,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bC(this.Ac)&&wk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ik{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||rf(e)}Cc(e,t,i,o=!1){return new fy({Ac:e,methodName:t,Dc:i,path:dn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wu(n){const e=n._freezeSettings(),t=rf(n._databaseId);return new Ik(n._databaseId,!!e.ignoreUndefinedProperties,t)}function py(n,e,t,i,o,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);my("Data must be an object, but it was:",c,i);const d=MC(i,c);let f,h;if(a.merge)f=new hi(c.fieldMask),h=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const A=ug(e,E,t);if(!c.contains(A))throw new ye(ae.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);VC(v,A)||v.push(A)}f=new hi(v),h=c.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,h=c.fieldTransforms;return new Ck(new Hn(d),f,h)}class uf extends cf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uf}}function PC(n,e,t,i){const o=n.Cc(1,e,t);my("Data must be an object, but it was:",o,i);const a=[],c=Hn.empty();ro(i,((f,h)=>{const v=gy(e,f,t);h=Vt(h);const E=o.yc(v);if(h instanceof uf)a.push(v);else{const A=Cu(h,E);A!=null&&(a.push(v),c.set(v,A))}}));const d=new hi(a);return new xC(c,d,o.fieldTransforms)}function DC(n,e,t,i,o,a){const c=n.Cc(1,e,t),d=[ug(e,i,t)],f=[o];if(a.length%2!=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)d.push(ug(e,a[A])),f.push(a[A+1]);const h=[],v=Hn.empty();for(let A=d.length-1;A>=0;--A)if(!VC(h,d[A])){const N=d[A];let L=f[A];L=Vt(L);const F=c.yc(N);if(L instanceof uf)h.push(N);else{const U=Cu(L,F);U!=null&&(h.push(N),v.set(N,U))}}const E=new hi(h);return new xC(v,E,c.fieldTransforms)}function Rk(n,e,t,i=!1){return Cu(t,n.Cc(i?4:3,e))}function Cu(n,e){if(kC(n=Vt(n)))return my("Unsupported field value:",e,n),MC(n,e);if(n instanceof cf)return(function(i,o){if(!bC(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let c=0;for(const d of i){let f=Cu(d,o.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return yD(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=St.fromDate(i);return{timestampValue:xh(o.serializer,a)}}if(i instanceof St){const a=new St(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:xh(o.serializer,a)}}if(i instanceof Yi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xn)return{bytesValue:Xw(o.serializer,i._byteString)};if(i instanceof xt){const a=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Yg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ki)return(function(c,d){return{mapValue:{fields:{[Cw]:{stringValue:Iw},[wh]:{arrayValue:{values:c.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return zg(d.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Kh(i)}`)})(n,e)}function MC(n,e){const t={};return vw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(n,((i,o)=>{const a=Cu(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function kC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof Yi||n instanceof Xn||n instanceof xt||n instanceof cf||n instanceof Ki)}function my(n,e,t){if(!kC(t)||!yw(t)){const i=Kh(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function ug(n,e,t){if((e=Vt(e))instanceof Il)return e._internalPath;if(typeof e=="string")return gy(n,e);throw Vh("Field path arguments must be of type string or ",n,!1,void 0,t)}const Nk=new RegExp("[~\\*/\\[\\]]");function gy(n,e,t){if(e.search(Nk)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Il(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vh(n,e,t,i,o){const a=i&&!i.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${i}`),c&&(f+=` in document ${o}`),f+=")"),new ye(ae.INVALID_ARGUMENT,d+n+f)}function VC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xk extends Uh{data(){return super.data()}}function yy(n,e){return typeof e=="string"?gy(n,e):e instanceof Il?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _y{}class LC extends _y{}function ms(n,e,...t){let i=[];e instanceof _y&&i.push(e),i=i.concat(t),(function(a){const c=a.filter((f=>f instanceof hf)).length,d=a.filter((f=>f instanceof Iu)).length;if(c>1||c>0&&d>0)throw new ye(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Iu extends LC{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Iu(e,t,i)}_apply(e){const t=this._parse(e);return OC(e._query,t),new ao(e.firestore,e.converter,eg(e._query,t))}_parse(e){const t=wu(e.firestore);return(function(a,c,d,f,h,v,E){let A;if(h.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){k0(E,v);const L=[];for(const F of E)L.push(M0(f,a,F));A={arrayValue:{values:L}}}else A=M0(f,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||k0(E,v),A=Rk(d,c,E,v==="in"||v==="not-in");return Kt.create(h,v,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function df(n,e,t){const i=e,o=yy("where",n);return Iu._create(o,i,t)}class hf extends _y{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Wi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let c=o;const d=a.getFlattenedFilters();for(const f of d)OC(c,f),c=eg(c,f)})(e._query,t),new ao(e.firestore,e.converter,eg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function M0(n,e,t){if(typeof(t=Vt(t))=="string"){if(t==="")throw new ye(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&t.indexOf("/")!==-1)throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(gt.fromString(t));if(!Ne.isDocumentKey(i))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return JE(n,new Ne(i))}if(t instanceof xt)return JE(n,t._key);throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(t)}.`)}function k0(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OC(n,e){const t=(function(o,a){for(const c of o)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class vy{convertValue(e,t="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ro(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){const t=e.fields?.[wh].arrayValue?.values?.map((i=>Ht(i.doubleValue)));return new Ki(t)}convertGeoPoint(e){return new Yi(Ht(e.latitude),Ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Qh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const t=Xr(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=gt.fromString(e);nt(rC(i),9688,{name:e});const o=new fl(i.get(1),i.get(3)),a=new Ne(i.popFirst(5));return o.isEqual(t)||sr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class bk extends vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}class Yo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class er extends Uh{constructor(e,t,i,o,a,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(yy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=er._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}er._jsonSchemaVersion="firestore/documentSnapshot/1.0",er._jsonSchema={type:Jt("string",er._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class eu extends er{data(e={}){return super.data(e)}}class Kr{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Yo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new eu(this._firestore,this._userDataWriter,i.key,i,new Yo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const f=new eu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Yo(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new eu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Yo(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,v=-1;return d.type!==0&&(h=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:Pk(d.type),doc:f,oldIndex:h,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Pk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(n){n=Pn(n,xt);const e=Pn(n.firestore,Xi);return Ek(Cl(e),n._key).then((t=>FC(e,n,t)))}Kr._jsonSchemaVersion="firestore/querySnapshot/1.0",Kr._jsonSchema={type:Jt("string",Kr._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class ff extends vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function Ey(n){n=Pn(n,ao);const e=Pn(n.firestore,Xi),t=Cl(e),i=new ff(e);return UC(n._query),Ak(t,n._query).then((o=>new Kr(e,i,n,o)))}function Qn(n,e,t){n=Pn(n,xt);const i=Pn(n.firestore,Xi),o=Ty(n.converter,e,t);return Ru(i,[py(wu(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,An.none())])}function Gn(n,e,t,...i){n=Pn(n,xt);const o=Pn(n.firestore,Xi),a=wu(o);let c;return c=typeof(e=Vt(e))=="string"||e instanceof Il?DC(a,"updateDoc",n._key,e,t,i):PC(a,"updateDoc",n._key,e),Ru(o,[c.toMutation(n._key,An.exists(!0))])}function el(n){return Ru(Pn(n.firestore,Xi),[new nf(n._key,An.none())])}function pf(n,e){const t=Pn(n.firestore,Xi),i=je(n),o=Ty(n.converter,e);return Ru(t,[py(wu(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,An.exists(!1))]).then((()=>i))}function Hi(n,...e){n=Vt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||D0(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(D0(e[i])){const f=e[i];e[i]=f.next?.bind(f),e[i+1]=f.error?.bind(f),e[i+2]=f.complete?.bind(f)}let a,c,d;if(n instanceof xt)c=Pn(n.firestore,Xi),d=Wh(n._key.path),a={next:f=>{e[i]&&e[i](FC(c,n,f))},error:e[i+1],complete:e[i+2]};else{const f=Pn(n,ao);c=Pn(f.firestore,Xi),d=f._query;const h=new ff(c);a={next:v=>{e[i]&&e[i](new Kr(c,h,f,v))},error:e[i+1],complete:e[i+2]},UC(n._query)}return(function(h,v,E,A){const N=new dy(A),L=new ly(v,N,E);return h.asyncQueue.enqueueAndForget((async()=>ry(await kh(h),L))),()=>{N.Nu(),h.asyncQueue.enqueueAndForget((async()=>oy(await kh(h),L)))}})(Cl(c),d,o,a)}function Ru(n,e){return(function(i,o){const a=new vs;return i.asyncQueue.enqueueAndForget((async()=>ok(await vk(i),o,a))),a.promise})(Cl(n),e)}function FC(n,e,t){const i=t.docs.get(e._key),o=new ff(n);return new er(n,o,e._key,i,new Yo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk={maxAttempts:5};function Bc(n,e){if((n=Vt(n)).firestore!==e)throw new ye(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wu(e)}get(e){const t=Bc(e,this._firestore),i=new bk(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return be(24041);const a=o[0];if(a.isFoundDocument())return new Uh(this._firestore,i,a.key,a,t.converter);if(a.isNoDocument())return new Uh(this._firestore,i,t._key,null,t.converter);throw be(18433,{doc:a})}))}set(e,t,i){const o=Bc(e,this._firestore),a=Ty(o.converter,t,i),c=py(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,i);return this._transaction.set(o._key,c),this}update(e,t,i,...o){const a=Bc(e,this._firestore);let c;return c=typeof(t=Vt(t))=="string"||t instanceof Il?DC(this._dataReader,"Transaction.update",a._key,t,i,o):PC(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Bc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC extends Mk{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bc(e,this._firestore),i=new ff(this._firestore);return super.get(e).then((o=>new er(this._firestore,i,t._key,o._document,new Yo(!1,!1),t.converter)))}}function BC(n,e,t){n=Pn(n,Xi);const i={...Dk,...t};return(function(a){if(a.maxAttempts<1)throw new ye(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(a,c,d){const f=new vs;return a.asyncQueue.enqueueAndForget((async()=>{const h=await Tk(a);new gk(a.asyncQueue,h,d,c,f).ju()})),f.promise})(Cl(n),(o=>e(new qC(n,o))),i)}(function(e,t=!0){(function(o){El=o})(sa),Jo(new Jr("firestore",((i,{instanceIdentifier:o,options:a})=>{const c=i.getProvider("app").getImmediate(),d=new Xi(new bP(i.getProvider("auth-internal")),new MP(c,i.getProvider("app-check-internal")),(function(h,v){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ye(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(h.options.projectId,v)})(c,o),c);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),ys(UE,LE,e),ys(UE,LE,"esm2020")})();const HC=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:vy,Bytes:Xn,CollectionReference:Zs,DocumentReference:xt,DocumentSnapshot:er,FieldPath:Il,FieldValue:cf,Firestore:Xi,FirestoreError:ye,GeoPoint:Yi,Query:ao,QueryCompositeFilterConstraint:hf,QueryConstraint:LC,QueryDocumentSnapshot:eu,QueryFieldFilterConstraint:Iu,QuerySnapshot:Kr,SnapshotMetadata:Yo,Timestamp:St,Transaction:qC,VectorValue:Ki,_AutoId:Yh,_ByteString:hn,_DatabaseId:fl,_DocumentKey:Ne,_EmptyAuthCredentialsProvider:pw,_FieldPath:dn,_cast:Pn,_logWarn:Xo,_validateIsNotUsedTogether:gw,addDoc:pf,collection:En,connectFirestoreEmulator:RC,deleteDoc:el,doc:je,ensureFirestoreConfigured:Cl,executeWrite:Ru,getDoc:jo,getDocs:Ey,getFirestore:NC,onSnapshot:Hi,query:ms,runTransaction:BC,setDoc:Qn,updateDoc:Gn,where:df},Symbol.toStringTag,{value:"Module"}));var kk="firebase",Vk="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys(kk,Vk,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="firebasestorage.googleapis.com",Uk="storageBucket",Lk=120*1e3,Ok=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Ss{constructor(e,t,i=0){super(Mm(e),`Firebase Storage: ${t} (${Mm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var As;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(As||(As={}));function Mm(n){return"storage/"+n}function Fk(){const n="An unknown error occurred, please check the error payload for server response.";return new Cs(As.UNKNOWN,n)}function qk(){return new Cs(As.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Bk(){return new Cs(As.CANCELED,"User canceled the upload/download.")}function Hk(n){return new Cs(As.INVALID_URL,"Invalid URL '"+n+"'.")}function Gk(n){return new Cs(As.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function V0(n){return new Cs(As.INVALID_ARGUMENT,n)}function zC(){return new Cs(As.APP_DELETED,"The Firebase app was deleted.")}function zk(n){return new Cs(As.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=zi.makeFromUrl(e,t)}catch{return new zi(e,"")}if(i.path==="")return i;throw Gk(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+o+c,"i"),f={bucket:1,path:3};function h(re){re.path_=decodeURIComponent(re.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",N=new RegExp(`^https?://${E}/${v}/b/${o}/o${A}`,"i"),L={bucket:1,path:3},F=t===GC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",Q=new RegExp(`^https?://${F}/${o}/${U}`,"i"),z=[{regex:d,indices:f,postModify:a},{regex:N,indices:L,postModify:h},{regex:Q,indices:{bucket:1,path:2},postModify:h}];for(let re=0;re<z.length;re++){const ee=z[re],he=ee.regex.exec(e);if(he){const O=he[ee.indices.bucket];let D=he[ee.indices.path];D||(D=""),i=new zi(O,D),ee.postModify(i);break}}if(i==null)throw Hk(e);return i}}class jk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(n,e,t){let i=1,o=null,a=null,c=!1,d=0;function f(){return d===2}let h=!1;function v(...U){h||(h=!0,e.apply(null,U))}function E(U){o=setTimeout(()=>{o=null,n(N,f())},U)}function A(){a&&clearTimeout(a)}function N(U,...Q){if(h){A();return}if(U){A(),v.call(null,U,...Q);return}if(f()||c){A(),v.call(null,U,...Q);return}i<64&&(i*=2);let z;d===1?(d=2,z=0):z=(i+Math.random())*1e3,E(z)}let L=!1;function F(U){L||(L=!0,A(),!h&&(o!==null?(U||(d=2),clearTimeout(o),E(0)):U||(d=1)))}return E(0),a=setTimeout(()=>{c=!0,F(!0)},t),F}function Yk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(n){return n!==void 0}function U0(n,e,t,i){if(i<e)throw V0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw V0(`Invalid value for '${n}'. Expected ${t} or less.`)}function Jk(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Lh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Lh||(Lh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t,i,o,a,c,d,f,h,v,E,A=!0,N=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=v,this.connectionFactory_=E,this.retry=A,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,F)=>{this.resolve_=L,this.reject_=F,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Jd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=d=>{const f=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const d=a.getErrorCode()===Lh.NO_ERROR,f=a.getStatus();if(!d||Qk(f,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===Lh.ABORT;i(!1,new Jd(!1,null,v));return}const h=this.successCodes_.indexOf(f)!==-1;i(!0,new Jd(h,a))})},t=(i,o)=>{const a=this.resolve_,c=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());Kk(f)?a(f):a()}catch(f){c(f)}else if(d!==null){const f=Fk();f.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,f)):c(f)}else if(o.canceled){const f=this.appDelete_?zC():Bk();c(f)}else{const f=qk();c(f)}};this.canceled_?t(!1,new Jd(!1,null,!0)):this.backoffId_=$k(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Yk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jd{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Xk(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Zk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function e2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function t2(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function n2(n,e,t,i,o,a,c=!0,d=!1){const f=Jk(n.urlParams),h=n.url+f,v=Object.assign({},n.headers);return e2(v,e),Xk(v,t),Zk(v,a),t2(v,i),new Wk(h,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function s2(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t){this._service=e,t instanceof zi?this._location=t:this._location=zi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Oh(e,t)}get root(){const e=new zi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s2(this._location.path)}get storage(){return this._service}get parent(){const e=i2(this._location.path);if(e===null)return null;const t=new zi(this._location.bucket,e);return new Oh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw zk(e)}}function L0(n,e){const t=e?.[Uk];return t==null?null:zi.makeFromBucketSpec(t,n)}function r2(n,e,t,i={}){n.host=`${e}:${t}`;const o=ia(e);o&&(wg(`https://${n.host}/b`),Cg("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:yS(a,n.app.options.projectId))}class o2{constructor(e,t,i,o,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=GC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Lk,this._maxUploadRetryTime=Ok,this._requests=new Set,o!=null?this._bucket=zi.makeFromBucketSpec(o,this._host):this._bucket=L0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zi.makeFromBucketSpec(this._url,e):this._bucket=L0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){U0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){U0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oh(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new jk(zC());{const c=n2(e,this._appId,i,o,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const O0="@firebase/storage",F0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="storage";function a2(n=Ng(),e){n=Vt(n);const i=Gh(n,jC).getImmediate({identifier:e}),o=pS("storage");return o&&l2(i,...o),i}function l2(n,e,t,i={}){r2(n,e,t,i)}function c2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new o2(t,i,o,e,sa)}function u2(){Jo(new Jr(jC,c2,"PUBLIC").setMultipleInstances(!0)),ys(O0,F0,""),ys(O0,F0,"esm2020")}u2();const d2={apiKey:"AIzaSyAWRYzgUdSBHcBLKJoVFs0M-r2bI7AYD1s",authDomain:"dukaan-476221.firebaseapp.com",projectId:"dukaan-476221",storageBucket:"dukaan-476221.firebasestorage.app",messagingSenderId:"344365593313",appId:"1:344365593313:web:6846271963a55723bcbda0",measurementId:"G-PBQPEPK818"},h2="dukaan-local-dev";let Or,dg,lh,hg;const $C=()=>(Or||(Or=TS(d2),dg=NC(Or),lh=RP(Or),lh.settings.appVerificationDisabledForTesting=!0,console.log("[Firebase]  App verification disabled for testing"),hg=a2(Or)),{app:Or,db:dg,auth:lh,storage:hg}),Is=()=>(Or||$C(),{app:Or,db:dg,auth:lh,storage:hg}),xe=h2,fg=Object.freeze(Object.defineProperty({__proto__:null,appId:xe,getFirebaseInstances:Is,initializeFirebase:$C},Symbol.toStringTag,{value:"Module"})),YC=X.createContext(null),mf=()=>{const n=X.useContext(YC);if(!n)throw new Error("useAuth must be used within AuthProvider");return n},f2=({children:n})=>{const[e,t]=X.useState(null),[i,o]=X.useState(!0),[a,c]=X.useState(null),[d,f]=X.useState(!1),[h,v]=X.useState(""),[E,A]=X.useState("+91"),[N,L]=X.useState(""),[F,U]=X.useState(""),[Q,H]=X.useState(null),[z,re]=X.useState("phone"),[ee,he]=X.useState(!1),{auth:O,db:D}=Is();X.useEffect(()=>{const se=QS(O,Ee=>{Ee?(console.log("[Auth] User authenticated:",Ee.uid),t(Ee),b(Ee.uid)):(console.log("[Auth] No user authenticated"),t(null),c(null)),o(!1)});return()=>se()},[O]);const b=X.useCallback(async se=>{try{console.log("[Auth] Loading profile for UID:",se);const Ee=je(D,"artifacts",xe,"public","data","users",se),B=await jo(Ee);if(B.exists()){const ie={id:B.id,...B.data()};console.log("[Auth] Profile loaded:",ie.name,"Role:",ie.role),c(ie),f(!1);const de=window.location.search;new URLSearchParams(de).get("mode")||(ie.role==="shopkeeper"?(console.log("[Auth] Auto-redirecting shopkeeper to dashboard"),window.location.href="?mode=shopkeeper"):ie.role==="rider"&&(console.log("[Auth] Auto-redirecting rider to dashboard"),window.location.href="?mode=rider"))}else console.log("[Auth] User authenticated but no profile found for UID:",se),c(null)}catch(Ee){console.error("Error loading user profile:",Ee),c(null)}},[D]),M=async()=>{if(!h||h.length<10){alert("Please enter a valid 10-digit phone number");return}try{const se=`${E}${h}@dukaan.app`,Ee=je(D,"artifacts",xe,"public","data","users_by_phone",h),B=await jo(Ee);if(B.exists()){const ie=B.data().uid,de=je(D,"artifacts",xe,"public","data","users",ie),fe=await jo(de);fe.exists()&&fe.data().password?(he(!1),re("password")):(console.log("[Auth] OTP-only user detected - sending OTP"),he(!1),await k())}else he(!0),await k()}catch(se){console.error("[Auth] Error checking user:",se),alert("Error checking user. Please try again.")}},k=async()=>{if(!O){alert("Authentication not initialized. Please refresh the page.");return}try{const se=`${E}${h}`;if(console.log("[Auth]  Attempting OTP send for:",se),window.recaptchaVerifier){try{window.recaptchaVerifier.clear()}catch(ie){console.log("[Auth] Error clearing old verifier:",ie)}window.recaptchaVerifier=null}console.log("[Auth]  Creating RecaptchaVerifier..."),window.recaptchaVerifier=new R1(O,"recaptcha-container",{size:"invisible",callback:ie=>{console.log("[Auth]  reCAPTCHA/Play Integrity callback triggered:",ie)},"expired-callback":()=>{console.warn("[Auth]  Verification expired - please try again")}});const Ee=window.recaptchaVerifier;console.log("[Auth]  Calling signInWithPhoneNumber...");const B=await b1(O,se,Ee);console.log("[Auth]  OTP sent successfully! Confirmation:",B),H(B),re("otp"),alert("OTP sent to your phone!")}catch(se){console.error("[Auth]  ============ FIREBASE OTP ERROR ============"),console.error("[Auth]  Error Code:",se.code),console.error("[Auth]  Error Message:",se.message),console.error("[Auth]  Full Error Object:",JSON.stringify(se,Object.getOwnPropertyNames(se),2)),se.code&&console.error("[Auth]  Firebase Error Code:",se.code),se.customData&&console.error("[Auth]  Custom Data:",se.customData),se.stack&&console.error("[Auth]  Stack Trace:",se.stack);const B={"auth/invalid-app-credential":" INVALID_APP_CREDENTIAL: SHA-1 fingerprint mismatch or API key issue. Check Firebase Console.","auth/missing-app-credential":" MISSING_APP_CREDENTIAL: App not properly configured in Firebase.","auth/invalid-phone-number":" Invalid phone number format.","auth/too-many-requests":" Too many OTP requests. Please wait and try again.","auth/quota-exceeded":" Daily OTP quota exceeded.","auth/operation-not-allowed":" Phone authentication not enabled in Firebase Console.","auth/captcha-check-failed":" reCAPTCHA verification failed."}[se.code]||se.message;if(console.error("[Auth]  Detailed Message:",B),console.error("[Auth]  ============================================"),window.recaptchaVerifier){try{window.recaptchaVerifier.clear()}catch(ie){console.log("[Auth] Error clearing verifier:",ie)}window.recaptchaVerifier=null}alert(`Failed to send OTP: ${B}`)}},pe={user:e,loading:i,userProfile:a,phoneNumber:h,setPhoneNumber:v,countryCode:E,setCountryCode:A,password:N,setPassword:L,otp:F,setOtp:U,authStep:z,setAuthStep:re,isNewUser:ee,showProfileSetup:d,setShowProfileSetup:f,checkUserExists:M,handleSendOTP:k,handleVerifyOTP:async()=>{if(!F||F.length!==6){alert("Please enter a valid 6-digit OTP");return}if(console.log("[Auth]  Verifying OTP..."),!Q){alert("Please request OTP first");return}try{const se=await Q.confirm(F);console.log("[Auth]  OTP verified successfully for user:",se.user.uid),ee?(console.log("[Auth] New user - showing registration/profile setup"),f(!0),re("register")):(console.log("[Auth] Existing OTP-only user - login complete"),f(!1),re("phone")),U("")}catch(se){console.error("[Auth]  ============ OTP VERIFICATION ERROR ============"),console.error("[Auth]  Error Code:",se.code),console.error("[Auth]  Error Message:",se.message),console.error("[Auth]  Full Error:",JSON.stringify(se,Object.getOwnPropertyNames(se),2)),console.error("[Auth]  ================================================"),alert({"auth/invalid-verification-code":"The OTP code is invalid. Please check and try again.","auth/code-expired":"The OTP code has expired. Please request a new one.","auth/session-expired":"Verification session expired. Please request a new OTP."}[se.code]||"Invalid OTP. Please try again.")}},handlePasswordLogin:async()=>{if(!N||N.length<6){alert("Please enter your password");return}try{const se=`${E}${h}@dukaan.app`,Ee=await i1(O,se,N);console.log("[Auth] Password login successful:",Ee.user.uid),f(!1),L(""),v(""),re("phone")}catch(se){console.error("[Auth] Password login error:",se),se.code==="auth/wrong-password"||se.code==="auth/user-not-found"?alert("Incorrect phone number or password"):alert(`Login failed: ${se.message}`)}},handleCompleteRegistration:async se=>{if(!e){alert("Please verify OTP first");return}if(!se.password||se.password.length<6){alert("Password must be at least 6 characters");return}try{const Ee=`${E}${h}@dukaan.app`,B=je(D,"artifacts",xe,"public","data","users",e.uid);await Qn(B,{name:se.name,phoneNumber:`${E}${h}`,password:se.password,email:se.email||"",createdAt:new Date().toISOString()});const ie=je(D,"artifacts",xe,"public","data","users_by_phone",h);if(await Qn(ie,{uid:e.uid,phoneNumber:`${E}${h}`}),se.address&&se.address.street){const de=je(En(D,"artifacts",xe,"public","data","addresses"));await Qn(de,{userId:e.uid,label:"Home",street:se.address.street,city:se.address.city,state:se.address.state,pincode:se.address.pincode,isDefault:!0,createdAt:new Date().toISOString()})}f(!1),re("phone"),c({id:e.uid,...se,phoneNumber:`${E}${h}`}),alert("Registration successful! You can now login with your phone number and password.")}catch(Ee){console.error("Error completing registration:",Ee),alert("Failed to complete registration. Please try again.")}},handleLogout:async()=>{try{await o1(O),t(null),c(null),v(""),L(""),re("phone"),alert("Logged out successfully!")}catch(se){console.error("[Auth] Logout error:",se),alert("Failed to logout")}},handleSaveProfile:async se=>{if(e)try{const Ee=e.phoneNumber||se.phoneNumber,B=Ee.replace(/[^\d]/g,"").slice(-10),ie=je(D,"artifacts",xe,"public","data","users_by_phone",B),de=await jo(ie);if(de.exists()&&de.data().uid!==e.uid){alert("This phone number is already registered. Please use a different number or login with your existing account."),console.error("[Auth] Duplicate phone number detected:",B,"Existing UID:",de.data().uid,"Current UID:",e.uid);return}const fe=je(D,"artifacts",xe,"public","data","users",e.uid),_e=await jo(fe),Ve=_e.exists()?_e.data().role:null;let Ce=se.name;Ce||(Ce=`User${(await Ey(En(D,"artifacts",xe,"public","data","users"))).size+1}`,console.log("[Auth] Auto-generated username:",Ce));const He={name:Ce,phoneNumber:e.phoneNumber||Ee,email:se.email||null,role:Ve||"customer",profileCompleted:se.profileCompleted||!1,updatedAt:new Date().toISOString()};_e.exists()||(He.createdAt=new Date().toISOString()),se.password&&(He.password=se.password),await Qn(fe,He,{merge:!0}),await Qn(ie,{uid:e.uid,phoneNumber:e.phoneNumber||Ee}),f(!1);const Qe={id:e.uid,name:Ce,phoneNumber:e.phoneNumber||Ee,email:se.email||null,role:Ve||"customer",profileCompleted:se.profileCompleted||!1};console.log("[Auth] Profile saved successfully:",Qe),c(Qe),se.profileCompleted?alert("Welcome to DUKAAN!  You can now start shopping."):alert("Welcome to DUKAAN! You can complete your profile anytime from the Profile tab.")}catch(Ee){console.error("Error saving profile:",Ee),alert("Failed to save profile. Please try again.")}}};return g.jsx(YC.Provider,{value:pe,children:n})},KC=X.createContext(null),p2=()=>{const n=X.useContext(KC);if(!n)throw new Error("useData must be used within DataProvider");return n},m2=({children:n})=>{const{user:e}=mf(),{db:t,auth:i}=Is(),[o,a]=X.useState(null),[c,d]=X.useState([]),[f,h]=X.useState([]),[v,E]=X.useState([]),[A,N]=X.useState([]),[L,F]=X.useState([]),[U,Q]=X.useState([]),[H,z]=X.useState([]),[re,ee]=X.useState(!0);X.useEffect(()=>{if(!i)return;const b=QS(i,M=>{a(M)});return()=>b()},[i]),X.useEffect(()=>{if(!e&&!o){ee(!1);return}ee(!0)},[e,o]),X.useEffect(()=>{if(!e&&!o)return;const b=ms(En(t,"artifacts",xe,"public","data","categories")),M=Hi(b,k=>{const V=k.docs.map(x=>({id:x.id,...x.data()}));h(V)});return()=>M()},[e,o,t]),X.useEffect(()=>{if(!e&&!o)return;const b=ms(En(t,"artifacts",xe,"public","data","subcategories")),M=Hi(b,k=>{const V=k.docs.map(x=>({id:x.id,...x.data()}));E(V)});return()=>M()},[e,o,t]),X.useEffect(()=>{if(!e&&!o)return;const b=ms(En(t,"artifacts",xe,"public","data","products")),M=Hi(b,k=>{const V=k.docs.map(x=>({id:x.id,...x.data()}));d(V),ee(!1)});return()=>M()},[e,o,t]),X.useEffect(()=>{if(!e)return;const b=ms(En(t,"artifacts",xe,"public","data","orders"),df("userId","==",e.uid)),M=Hi(b,k=>{const V=k.docs.map(x=>({id:x.id,...x.data()}));V.sort((x,we)=>new Date(we.createdAt)-new Date(x.createdAt)),N(V)});return()=>M()},[e,t]),X.useEffect(()=>{if(!e&&!o)return;const b=ms(En(t,"artifacts",xe,"public","data","orders")),M=Hi(b,k=>{const V=k.docs.map(x=>({id:x.id,...x.data()}));V.sort((x,we)=>new Date(we.createdAt)-new Date(x.createdAt)),F(V)});return()=>M()},[e,o,t]),X.useEffect(()=>{if(!e&&!o)return;const b=ms(En(t,"artifacts",xe,"public","data","users")),M=Hi(b,k=>{const V=k.docs.map(x=>({id:x.id,...x.data()}));Q(V)});return()=>M()},[e,o,t]),X.useEffect(()=>{if(!e&&!o)return;const b=ms(En(t,"artifacts",xe,"public","data","riders")),M=Hi(b,k=>{const V=k.docs.map(x=>({id:x.id,...x.data()}));z(V)});return()=>M()},[e,o,t]);const he=X.useCallback(async(b,M,k=null)=>{try{const V=je(t,"artifacts",xe,"public","data","orders",b),x={deliveryMethod:M,updatedAt:new Date().toISOString()};if(M==="pickup")x.deliveryAddress="Store Pickup",x.deliveryInstructions="",x.selectedAddressId=null;else{if(!k){alert("Please select a delivery address");return}x.deliveryAddress=k.fullAddress||`${k.street}, ${k.city}, ${k.state} ${k.pincode}`,x.deliveryInstructions=k.deliveryInstructions||"",x.selectedAddressId=k.id}await Gn(V,x),alert(`Order type changed to ${M==="pickup"?"Store Pickup":"Home Delivery"} successfully!`)}catch(V){console.error("Error changing delivery method:",V),alert("Failed to change order type. Please try again.")}},[t]),O=X.useCallback(async(b,M)=>{try{const k=je(t,"artifacts",xe,"public","data","orders",b);await Gn(k,{status:"cancelled",cancellationReason:M||"Customer cancelled",updatedAt:new Date().toISOString()}),alert("Order cancelled successfully!")}catch(k){console.error("Error cancelling order:",k),alert("Failed to cancel order. Please try again.")}},[t]),D={products:c,categoriesData:f,subcategoriesData:v,orders:A,allOrders:L,allUsers:U,allRiders:H,loading:re,handleChangeDeliveryMethod:he,handleCancelOrder:O};return g.jsx(KC.Provider,{value:D,children:n})},g2=async(n,e)=>{const t=new Date,i=5.5*60*60*1e3,a=new Date(t.getTime()+i).toISOString().split("T")[0].replace(/-/g,""),c=je(n,"artifacts",e,"public","meta","orderCounters",a);try{return await BC(n,async f=>{const h=await f.get(c);let v=1;return h.exists()&&(v=(h.data().counter||0)+1),f.set(c,{counter:v,date:a},{merge:!0}),`DKN-${v.toString().padStart(3,"0")}`})}catch(d){throw console.error("CRITICAL: Failed to generate order number with transaction:",d),new Error("Failed to generate order number. Please check your internet connection and try again.")}},JC=X.createContext(null),y2=()=>{const n=X.useContext(JC);if(!n)throw new Error("useCart must be used within CartProvider");return n},_2=({children:n})=>{const{user:e,userProfile:t}=mf(),{db:i}=Is(),[o,a]=X.useState({}),[c,d]=X.useState("delivery"),[f,h]=X.useState(null),v=X.useCallback((L,F=1)=>{a(U=>{const H=(U[L.id]?.quantity||0)+F;if(H<=0){const z={...U};return delete z[L.id],z}return{...U,[L.id]:{...L,quantity:H}}})},[]),E=X.useCallback(()=>{a({})},[]),A=X.useCallback(async(L,F,U="en")=>{if(Object.keys(o).length===0)return;if(!t||!t.phoneNumber){alert("Please set up your profile first (Profile tab  Add your details)"),F("Profile");return}if(!t.profileCompleted){alert(`Please complete your profile before placing an order.

Go to Profile  Edit your name and details.`),F("Profile");return}if(c==="delivery"){if(L.length===0){alert("Please add a delivery address first (Profile tab  Manage Addresses)"),F("Profile");return}if(!f){alert("Please select a delivery address");return}}const Q=Object.values(o),H=Q.reduce((z,re)=>{const ee=re.discountedPrice!==""&&re.discountedPrice!=null?Number(re.discountedPrice):null,he=Number(re.price)||0,O=ee??he,D=Number(re.quantity)||0;return z+O*D},0);try{const z=await g2(i,xe),re={orderNumber:z,userId:e.uid,customerName:t.name||"Customer",customerPhone:t.phoneNumber||"",customerLanguage:U,items:Q.map(ee=>{const he=Number(ee.price)||0,O=ee.discountedPrice!==""&&ee.discountedPrice!=null?Number(ee.discountedPrice):null,D=O??he;return{id:ee.id||"",name:ee.name||"",nameEn:ee.nameEn||ee.name||"",nameTe:ee.nameTe||ee.name||"",originalPrice:he,discountedPrice:O,price:D,quantity:Number(ee.quantity)||0,imageUrl:ee.imageUrl||"",weight:ee.weight||"",category:ee.category||""}}),total:H,totalSavings:Q.reduce((ee,he)=>{const O=Number(he.price)||0,D=he.discountedPrice!==""&&he.discountedPrice!=null?Number(he.discountedPrice):null,b=Number(he.quantity)||0;return D!=null&&D<O?ee+(O-D)*b:ee},0),status:"pending",deliveryMethod:c||"delivery",deliveryAddress:c==="delivery"?f?.fullAddress||"":"Store Pickup",deliveryInstructions:c==="delivery"&&f?.deliveryInstructions||"",selectedAddressId:c==="delivery"&&f?.id?f.id:null,deliveryLatitude:c==="delivery"&&f?.latitude?f.latitude:null,deliveryLongitude:c==="delivery"&&f?.longitude?f.longitude:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await pf(En(i,"artifacts",xe,"public","data","orders"),re),a({}),F("Orders"),alert(`Order placed successfully! Order Number: ${z}`)}catch(z){console.error("Error placing order:",z),alert(z.message||"Failed to place order. Please try again.")}},[o,e,t,c,f,i]),N={cartItems:o,deliveryMethod:c,setDeliveryMethod:d,selectedAddress:f,setSelectedAddress:h,handleAddToCart:v,clearCart:E,handleCheckout:A};return g.jsx(JC.Provider,{value:N,children:n})},QC=X.createContext(null),v2=()=>{const n=X.useContext(QC);if(!n)throw new Error("useAddress must be used within AddressProvider");return n},T2=({children:n})=>{const{user:e}=mf(),{db:t}=Is(),[i,o]=X.useState([]),[a,c]=X.useState(!1),[d,f]=X.useState(!1),[h,v]=X.useState(null);X.useEffect(()=>{if(!e)return;const F=ms(En(t,"artifacts",xe,"public","data","addresses"),df("userId","==",e.uid)),U=Hi(F,Q=>{const H=Q.docs.map(z=>({id:z.id,...z.data()}));o(H)});return()=>U()},[e,t]);const L={userAddresses:i,showAddressManager:a,setShowAddressManager:c,showAddressForm:d,setShowAddressForm:f,editingAddress:h,setEditingAddress:v,handleSaveAddress:async F=>{if(e)try{h?.id?(await Gn(je(t,"artifacts",xe,"public","data","addresses",h.id),{...F,updatedAt:new Date().toISOString()}),alert("Address updated successfully!")):(await pf(En(t,"artifacts",xe,"public","data","addresses"),{...F,userId:e.uid,isDefault:i.length===0,createdAt:new Date().toISOString()}),alert("Address added successfully!")),f(!1),v(null)}catch(U){console.error("Error saving address:",U),alert("Failed to save address. Please try again.")}},handleDeleteAddress:async F=>{if(!(!e||!window.confirm("Are you sure you want to delete this address?")))try{await el(je(t,"artifacts",xe,"public","data","addresses",F)),alert("Address deleted successfully!")}catch(Q){console.error("Error deleting address:",Q),alert("Failed to delete address. Please try again.")}},handleSetDefaultAddress:async F=>{if(e)try{const U=[];i.forEach(Q=>{const H=je(t,"artifacts",xe,"public","data","addresses",Q.id);U.push(Gn(H,{isDefault:!1}))}),await Promise.all(U),await Gn(je(t,"artifacts",xe,"public","data","addresses",F),{isDefault:!0}),await Gn(je(t,"artifacts",xe,"public","data","users",e.uid),{defaultAddressId:F}),alert("Default address updated!")}catch(U){console.error("Error setting default address:",U),alert("Failed to set default address. Please try again.")}}};return g.jsx(QC.Provider,{value:L,children:n})},WC=X.createContext(null),E2=()=>{const n=X.useContext(WC);if(!n)throw new Error("useRider must be used within RiderProvider");return n},A2=({children:n})=>{const{db:e,auth:t}=Is(),[i,o]=X.useState(null),[a,c]=X.useState(!0);X.useEffect(()=>{const A=localStorage.getItem("riderId");A?d(A):c(!1)},[]);const d=async A=>{try{const N=await jo(je(e,"artifacts",xe,"public","data","riders",A));N.exists()&&o({id:N.id,...N.data()}),c(!1)}catch(N){console.error("Error loading rider:",N),c(!1)}},E={rider:i,loading:a,loginRider:async(A,N)=>{try{const L=ms(En(e,"artifacts",xe,"public","data","riders"),df("phone","==",A));return new Promise((F,U)=>{const Q=Hi(L,H=>{if(Q(),H.empty){U(new Error("No rider found with this phone number"));return}const z=H.docs[0],re=z.data();if(re.password!==N){U(new Error("Invalid password"));return}const ee={id:z.id,...re};o(ee),localStorage.setItem("riderId",z.id),SE(t).catch(console.error),F(ee)},H=>{Q(),U(H)})})}catch(L){throw console.error("Rider login error:",L),L}},logoutRider:()=>{o(null),localStorage.removeItem("riderId")},registerRider:async A=>{try{const N=`rider_${Date.now()}`;await Qn(je(e,"artifacts",xe,"public","data","riders",N),{...A,createdAt:new Date().toISOString(),totalOrders:0,activeOrders:0});const L={id:N,...A};return o(L),localStorage.setItem("riderId",N),await SE(t),L}catch(N){throw console.error("Rider registration error:",N),N}}};return g.jsx(WC.Provider,{value:E,children:n})},Zn={en:{appName:"DUKAAN",search:"Search for groceries, services...",deliveryTo:"Delivery to",categories:{groceries:"Groceries",vegetables:"Vegetables",milk:"Milk",snacks:"Snacks",medicines:"Medicines",electronics:"Electronics"},popularProducts:"Popular Products",addToCart:"Add to Cart",cart:"Cart",orders:"Orders",profile:"Profile",home:"Home",viewCart:"View Cart",items:"Items",checkout:"Checkout",total:"Total",placeOrder:"Place Order",myOrders:"My Orders",logout:"Logout",empty:"Empty",noOrders:"No orders yet",orderPlaced:"Order Placed",processing:"Processing",delivered:"Delivered",admin:"Admin",addProduct:"Add Product",productName:"Product Name",productPrice:"Price",productWeight:"Weight",productImage:"Image URL",category:"Category",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",orderHistory:"Order History",totalOrders:"Total Orders",totalSpent:"Total Spent",enterAdminCode:"Enter Admin Code",adminPanel:"Admin Panel",manageProducts:"Manage Products",shopkeeperDashboard:"Shopkeeper Dashboard",incomingOrders:"Incoming Orders",orderDetails:"Order Details",customer:"Customer",updateStatus:"Update Status",markProcessing:"Mark as Processing",markDelivered:"Mark as Delivered",noIncomingOrders:"No orders yet",ordersTab:"Orders",productsTab:"Products",outOfStock:"Out of Stock",pending:"Pending",accepted:"Accepted",readyForPickup:"Ready for Pickup",outForDelivery:"Out for Delivery",completed:"Completed",cancelled:"Cancelled",voiceSearchResults:"Voice Search Results",searchResults:"Search Results",noProductsFound:"No products found for",noPopularProducts:"No popular products yet. Visit Shopkeeper Dashboard to mark products as popular.",searchingProducts:"Searching for products...",aiSearching:"AI searching...",productNameEn:"Product Name (English)",productNameTe:"Product Name (Telugu)",add:"Add",remove:"Remove",close:"Close",back:"Back",confirm:"Confirm",loading:"Loading...",error:"Error",success:"Success",unavailablePickupDelivery:"unavailable for pickup/delivery",noActiveOrders:"No active orders",activeOrders:"Active Orders",orderDate:"Order Date",qty:"Qty",each:"each",cancellationReason:"Cancellation Reason",homeDelivery:"Home Delivery",storePickup:"Store Pickup",orderTotal:"Order Total",orderID:"Order ID",status:"Status",customerPhone:"Customer Phone",deliveryDetails:"Delivery Details",instructions:"Instructions",itemsOrdered:"Items Ordered",chooseDeliveryMethod:"Choose Delivery Method",deliveryAddress:"Delivery Address",noSavedAddresses:"No saved addresses",addAddress:"Add Address",manageAddresses:"Manage Addresses",confirmOrder:"Confirm Order",proceedToCheckout:"Proceed to Checkout",selectDeliveryAddress:"Please select a delivery address",default:"Default",note:"Note",orderSummary:"Order Summary",orderReadyPickup:"Your order will be ready for pickup at the store.",moneySaved:"Money Saved",printBill:"Print Bill"},te:{appName:"",search:"  ...",deliveryTo:" ",categories:{groceries:"",vegetables:"",milk:"",snacks:"",medicines:"",electronics:""},popularProducts:" ",addToCart:" ",cart:"",orders:"",profile:"",home:"",viewCart:" ",items:"",checkout:"",total:"",placeOrder:" ",myOrders:" ",logout:"",empty:"",noOrders:" ",orderPlaced:" ",processing:" ",delivered:" ",admin:"",addProduct:" ",productName:" ",productPrice:"",productWeight:"",productImage:" URL",category:"",save:" ",cancel:"",delete:"",edit:"",orderHistory:" ",totalOrders:" ",totalSpent:" ",enterAdminCode:"   ",adminPanel:" ",manageProducts:" ",shopkeeperDashboard:" ",incomingOrders:" ",orderDetails:" ",customer:"",updateStatus:"  ",markProcessing:" ",markDelivered:"  ",noIncomingOrders:" ",ordersTab:"",productsTab:"",outOfStock:" ",pending:"",accepted:"",readyForPickup:"   ",outForDelivery:" ",completed:"",cancelled:" ",voiceSearchResults:"  ",searchResults:" ",noProductsFound:"   ",noPopularProducts:"   .     .",searchingProducts:" ...",aiSearching:"AI ...",productNameEn:"  ()",productNameTe:"  ()",add:"",remove:"",close:"",back:"",confirm:"",loading:" ...",error:"",success:"",unavailablePickupDelivery:"/  ",noActiveOrders:"  ",activeOrders:" ",orderDate:" ",qty:"",each:"",cancellationReason:" ",homeDelivery:" ",storePickup:" ",orderTotal:" ",orderID:" ID",status:"",customerPhone:" ",deliveryDetails:" ",instructions:"",itemsOrdered:"  ",chooseDeliveryMethod:"  ",deliveryAddress:" ",noSavedAddresses:"   ",addAddress:" ",manageAddresses:" ",confirmOrder:" ",proceedToCheckout:" ",selectDeliveryAddress:"   ",default:"",note:"",orderSummary:" ",orderReadyPickup:"      ",moneySaved:"  ",printBill:"  "}},q0=()=>{const[n,e]=X.useState(null);return X.useEffect(()=>{(async()=>{try{const{getFirebaseInstances:i,appId:o}=await nl(async()=>{const{getFirebaseInstances:h,appId:v}=await Promise.resolve().then(()=>fg);return{getFirebaseInstances:h,appId:v}},void 0),{doc:a,getDoc:c}=await nl(async()=>{const{doc:h,getDoc:v}=await Promise.resolve().then(()=>HC);return{doc:h,getDoc:v}},void 0),{db:d}=i(),f=await c(a(d,"artifacts",o,"public","data","settings","branding"));f.exists()&&f.data().logoUrl?e(f.data().logoUrl):e("/dukaan-logo.png")}catch{console.log("Using default logo"),e("/dukaan-logo.png")}})()},[]),g.jsxs("div",{className:"flex-center p-8",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)"},children:[g.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"24px",padding:"48px",display:"flex",flexDirection:"column",alignItems:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[n?g.jsx("img",{src:n,alt:"DUKAAN Logo",style:{width:"200px",height:"200px",objectFit:"contain",marginBottom:"32px",animation:"pulse 2s ease-in-out infinite"}}):g.jsx("div",{style:{width:"200px",height:"200px",marginBottom:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsxs("h1",{style:{fontSize:"48px",fontWeight:"700",color:"#2E7D32",textAlign:"center",animation:"pulse 2s ease-in-out infinite"},children:["DUKAAN",g.jsx("br",{}),""]})}),g.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-3 border-white",style:{borderWidth:"4px",borderStyle:"solid",borderColor:"#4CAF50",borderBottomColor:"transparent",borderRadius:"50%",width:"48px",height:"48px",animation:"spin 1s linear infinite"}}),g.jsx("p",{style:{marginTop:"24px",color:"#2E7D32",fontWeight:"600",fontSize:"18px"},children:"Loading..."})]}),g.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w2=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),B0=n=>{const e=w2(n);return e.charAt(0).toUpperCase()+e.slice(1)},XC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),C2=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var I2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=X.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:c,...d},f)=>X.createElement("svg",{ref:f,...I2,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:XC("lucide",o),...!a&&!C2(d)&&{"aria-hidden":"true"},...d},[...c.map(([h,v])=>X.createElement(h,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(n,e)=>{const t=X.forwardRef(({className:i,...o},a)=>X.createElement(R2,{ref:a,iconNode:e,className:XC(`lucide-${S2(B0(n))}`,`lucide-${n}`,i),...o}));return t.displayName=B0(n),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],ZC=Fe("bike",N2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],b2=Fe("calendar",x2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],D2=Fe("check",P2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Qd=Fe("chevron-down",M2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ni=Fe("chevron-left",k2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Wd=Fe("chevron-up",V2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ji=Fe("circle-check-big",U2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ch=Fe("circle-plus",L2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],uh=Fe("circle-x",O2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uu=Fe("clock",F2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],B2=Fe("eye",q2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],G2=Fe("house",H2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],Ji=Fe("indian-rupee",z2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],al=Fe("lock",j2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Y2=Fe("log-in",$2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],J2=Fe("log-out",K2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],W2=Fe("mail",Q2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ea=Fe("map-pin",X2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],Ay=Fe("mic-off",Z2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Sy=Fe("mic",eV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["path",{d:"M5 12h14",key:"1ays0h"}]],eI=Fe("minus",tV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],tI=Fe("navigation",nV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Tn=Fe("package",iV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],rV=Fe("pen",sV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],or=Fe("phone",oV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nI=Fe("plus",aV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],cV=Fe("refresh-cw",lV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ll=Fe("save",uV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],iI=Fe("search",dV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],H0=Fe("settings",hV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ta=Fe("shopping-bag",fV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],sI=Fe("shopping-cart",pV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dh=Fe("square-pen",mV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],km=Fe("star",gV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],_V=Fe("store",yV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Hc=Fe("trash-2",vV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],EV=Fe("trending-up",TV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],gs=Fe("truck",AV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Vm=Fe("upload",SV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],G0=Fe("user-plus",wV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$i=Fe("user",CV);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],aa=Fe("x",IV),z0=({message:n,type:e,onClose:t})=>(X.useEffect(()=>{const i=setTimeout(t,5e3);return()=>clearTimeout(i)},[t]),g.jsxs("div",{className:`toast-notification toast-${e}`,children:[g.jsxs("div",{className:"toast-content",children:[e==="success"&&g.jsx(ji,{className:"w-5 h-5"}),e==="info"&&g.jsx(Tn,{className:"w-5 h-5"}),g.jsx("p",{children:n})]}),g.jsx("button",{onClick:t,className:"toast-close",children:g.jsx(aa,{className:"w-4 h-4"})})]}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var _l;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(_l||(_l={}));class Um extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const RV=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},NV=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},i=t.Plugins=t.Plugins||{},o=()=>e!==null?e.name:RV(n),a=()=>o()!=="web",c=E=>{const A=h.get(E);return!!(A?.platforms.has(o())||d(E))},d=E=>{var A;return(A=t.PluginHeaders)===null||A===void 0?void 0:A.find(N=>N.name===E)},f=E=>n.console.error(E),h=new Map,v=(E,A={})=>{const N=h.get(E);if(N)return console.warn(`Capacitor plugin "${E}" already registered. Cannot register plugins twice.`),N.proxy;const L=o(),F=d(E);let U;const Q=async()=>(!U&&L in A?U=typeof A[L]=="function"?U=await A[L]():U=A[L]:e!==null&&!U&&"web"in A&&(U=typeof A.web=="function"?U=await A.web():U=A.web),U),H=(D,b)=>{var M,k;if(F){const V=F?.methods.find(x=>b===x.name);if(V)return V.rtype==="promise"?x=>t.nativePromise(E,b.toString(),x):(x,we)=>t.nativeCallback(E,b.toString(),x,we);if(D)return(M=D[b])===null||M===void 0?void 0:M.bind(D)}else{if(D)return(k=D[b])===null||k===void 0?void 0:k.bind(D);throw new Um(`"${E}" plugin is not implemented on ${L}`,_l.Unimplemented)}},z=D=>{let b;const M=(...k)=>{const V=Q().then(x=>{const we=H(x,D);if(we){const Be=we(...k);return b=Be?.remove,Be}else throw new Um(`"${E}.${D}()" is not implemented on ${L}`,_l.Unimplemented)});return D==="addListener"&&(V.remove=async()=>b()),V};return M.toString=()=>`${D.toString()}() { [capacitor code] }`,Object.defineProperty(M,"name",{value:D,writable:!1,configurable:!1}),M},re=z("addListener"),ee=z("removeListener"),he=(D,b)=>{const M=re({eventName:D},b),k=async()=>{const x=await M;ee({eventName:D,callbackId:x},b)},V=new Promise(x=>M.then(()=>x({remove:k})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},V},O=new Proxy({},{get(D,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return F?he:re;case"removeListener":return ee;default:return z(b)}}});return i[E]=O,h.set(E,{name:E,proxy:O,platforms:new Set([...Object.keys(A),...F?[L]:[]])}),O};return t.convertFileSrc||(t.convertFileSrc=E=>E),t.getPlatform=o,t.handleError=f,t.isNativePlatform=a,t.isPluginAvailable=c,t.registerPlugin=v,t.Exception=Um,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},xV=n=>n.Capacitor=NV(n),du=xV(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),wy=du.registerPlugin;class rI{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),i&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){const o=this.listeners[e];if(!o){if(i){let a=this.retainedEventArguments[e];a||(a=[]),a.push(t),this.retainedEventArguments[e]=a}return}o.forEach(a=>a(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new du.Exception(e,_l.Unimplemented)}unavailable(e="not available"){return new du.Exception(e,_l.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const o=i.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const j0=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),$0=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class bV extends rI{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[o,a]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=$0(o).trim(),a=$0(a).trim(),t[o]=a}),t}async setCookie(e){try{const t=j0(e.key),i=j0(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${o}; path=${a}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}wy("CapacitorCookies",{web:()=>new bV});const PV=async n=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const o=i.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},i.onerror=o=>t(o),i.readAsDataURL(n)}),DV=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(o=>o.toLocaleLowerCase()).reduce((o,a,c)=>(o[a]=n[e[c]],o),{})},MV=(n,e=!0)=>n?Object.entries(n).reduce((i,o)=>{const[a,c]=o;let d,f;return Array.isArray(c)?(f="",c.forEach(h=>{d=e?encodeURIComponent(h):h,f+=`${a}=${d}&`}),f.slice(0,-1)):(d=e?encodeURIComponent(c):c,f=`${a}=${d}`),`${i}&${f}`},"").substr(1):null,kV=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),o=DV(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(o.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[c,d]of Object.entries(n.data||{}))a.set(c,d);t.body=a.toString()}else if(o.includes("multipart/form-data")||n.data instanceof FormData){const a=new FormData;if(n.data instanceof FormData)n.data.forEach((d,f)=>{a.append(f,d)});else for(const d of Object.keys(n.data))a.append(d,n.data[d]);t.body=a;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(o.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class VV extends rI{async request(e){const t=kV(e,e.webFetchExtra),i=MV(e.params,e.shouldEncodeUrlParams),o=i?`${e.url}?${i}`:e.url,a=await fetch(o,t),c=a.headers.get("content-type")||"";let{responseType:d="text"}=a.ok?e:{};c.includes("application/json")&&(d="json");let f,h;switch(d){case"arraybuffer":case"blob":h=await a.blob(),f=await PV(h);break;case"json":f=await a.json();break;case"document":case"text":default:f=await a.text()}const v={};return a.headers.forEach((E,A)=>{v[A]=E}),{data:f,headers:v,status:a.status,url:a.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}wy("CapacitorHttp",{web:()=>new VV});const Mc=wy("VoiceRecorder",{web:()=>nl(()=>import("./web-C7qRfzaW.js").then(n=>n.w),[]).then(n=>new n.VoiceRecorderWeb)});class io{constructor(){this.mediaRecorder=null,this.audioChunks=[],this.stream=null,this.actualMimeType=null,this.isNative=du.isNativePlatform(),this.nativeRecording=null,this.audioContext=null,this.analyser=null,this.silenceTimer=null,this.onAutoStop=null}static isSupported(){return du.isNativePlatform()?!0:!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaRecorder)}async startRecording(e=null){try{if(!io.isSupported())throw new Error("FEATURE_NOT_SUPPORTED");if(this.onAutoStop=e,this.isNative){if(!(await Mc.hasAudioRecordingPermission()).value&&!(await Mc.requestAudioRecordingPermission()).value)throw{name:"NotAllowedError",message:"Microphone permission denied"};return await Mc.startRecording(),console.log("[AudioRecorder] Native recording started"),e&&(this.silenceTimer=setTimeout(()=>{console.log("[AudioRecorder] Auto-stopping native recording after 5s"),this.onAutoStop&&this.onAutoStop()},5e3)),!0}this.stream=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:16e3,echoCancellation:!0,noiseSuppression:!0}}),this.audioChunks=[];let t=null;MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?t="audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")?t="audio/webm":MediaRecorder.isTypeSupported("audio/ogg;codecs=opus")?t="audio/ogg;codecs=opus":MediaRecorder.isTypeSupported("audio/mp4")&&(t="audio/mp4");const i=t?{mimeType:t}:{};return this.mediaRecorder=new MediaRecorder(this.stream,i),this.actualMimeType=this.mediaRecorder.mimeType||t||"audio/webm",this.mediaRecorder.ondataavailable=o=>{o.data.size>0&&this.audioChunks.push(o.data)},this.mediaRecorder.start(100),e&&this.startSilenceDetection(),console.log("[AudioRecorder] Web recording started with mimeType:",this.actualMimeType),!0}catch(t){throw console.error("[AudioRecorder] Error starting recording:",t),t}}startSilenceDetection(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext);const e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.analyser.smoothingTimeConstant=.8,e.connect(this.analyser);const t=this.analyser.frequencyBinCount,i=new Uint8Array(t);let o=Date.now();const a=20,c=1500,d=800,f=Date.now(),h=()=>{if(!this.analyser||!this.mediaRecorder||this.mediaRecorder.state!=="recording")return;if(this.analyser.getByteFrequencyData(i),i.reduce((E,A)=>E+A,0)/t<a){const E=Date.now()-o,A=Date.now()-f;if(E>c&&A>d){console.log("[AudioRecorder] Silence detected, auto-stopping..."),this.onAutoStop&&this.onAutoStop();return}}else o=Date.now();requestAnimationFrame(h)};h(),console.log("[AudioRecorder] Silence detection started")}catch(e){console.error("[AudioRecorder] Error starting silence detection:",e)}}async stopRecording(){if(this.audioContext){try{await this.audioContext.close()}catch(e){console.log("[AudioRecorder] Error closing audio context:",e)}this.audioContext=null,this.analyser=null}if(this.isNative){this.silenceTimer&&(clearTimeout(this.silenceTimer),this.silenceTimer=null);const e=await Mc.stopRecording();if(!e.value||!e.value.recordDataBase64)throw new Error("No recording data received");console.log("[AudioRecorder] Native recording stopped, duration:",e.value.msDuration,"ms");const t=e.value.recordDataBase64,i=e.value.mimeType||"audio/aac",o=atob(t),a=new Uint8Array(o.length);for(let d=0;d<o.length;d++)a[d]=o.charCodeAt(d);const c=new Blob([a],{type:i});return this.actualMimeType=i,c}return new Promise((e,t)=>{if(!this.mediaRecorder||this.mediaRecorder.state==="inactive"){t(new Error("No active recording"));return}this.mediaRecorder.onstop=async()=>{try{const i=new Blob(this.audioChunks,{type:this.actualMimeType});this.stream&&(this.stream.getTracks().forEach(o=>o.stop()),this.stream=null),console.log("[AudioRecorder] Web recording stopped, blob size:",i.size,"type:",this.actualMimeType),e(i)}catch(i){t(i)}},this.mediaRecorder.stop()})}async cancel(){if(this.audioContext){try{await this.audioContext.close()}catch(e){console.log("[AudioRecorder] Error closing audio context:",e)}this.audioContext=null,this.analyser=null}if(this.isNative){try{await Mc.stopRecording()}catch(e){console.log("[AudioRecorder] Cancel error (may already be stopped):",e)}return}this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop(),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.audioChunks=[]}async blobToBase64(e){return new Promise((t,i)=>{const o=new FileReader;o.onloadend=()=>{const a=o.result.split(",")[1];t(a)},o.onerror=i,o.readAsDataURL(e)})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let UV,LV;function OV(){return{geminiUrl:UV,vertexUrl:LV}}function FV(n,e,t,i){var o,a;if(!n?.baseUrl){const c=OV();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(a=c.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class la{}function Se(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function _(n,e,t){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const f=n[d];if(Array.isArray(t))for(let h=0;h<f.length;h++){const v=f[h];_(v,e.slice(a+1),t[h])}else for(const h of f)_(h,e.slice(a+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const f=n[d];_(f[0],e.slice(a+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function p(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const c=n[a];return Array.isArray(c)?c.map(d=>p(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function qV(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),c=new Set;let d=-1;for(let f=0;f<o.length;f++)if(o[f]==="*"){d=f;break}if(d!==-1&&a.length>d)for(let f=d;f<a.length;f++){const h=a[f];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}pg(n,o,a,0,c)}}function pg(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const c=a.slice(0,-2),d=n;if(c in d&&Array.isArray(d[c]))for(const f of d[c])pg(f,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,d=Object.keys(c).filter(h=>!h.startsWith("_")&&!o.has(h)),f={};for(const h of d)f[h]=c[h];for(const[h,v]of Object.entries(f)){const E=[];for(const A of t.slice(i))A==="*"?E.push(h):E.push(A);_(c,E,v)}for(const h of d)delete c[h]}}else{const c=n;a in c&&pg(c[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cy(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BV(n){const e={},t=p(n,["operationName"]);t!=null&&_(e,["operationName"],t);const i=p(n,["resourceName"]);return i!=null&&_(e,["_url","resourceName"],i),e}function HV(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["metadata"]);i!=null&&_(e,["metadata"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);a!=null&&_(e,["error"],a);const c=p(n,["response","generateVideoResponse"]);return c!=null&&_(e,["response"],zV(c)),e}function GV(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["metadata"]);i!=null&&_(e,["metadata"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);a!=null&&_(e,["error"],a);const c=p(n,["response"]);return c!=null&&_(e,["response"],jV(c)),e}function zV(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>$V(c))),_(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&_(e,["raiMediaFilteredCount"],i);const o=p(n,["raiMediaFilteredReasons"]);return o!=null&&_(e,["raiMediaFilteredReasons"],o),e}function jV(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>YV(c))),_(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&_(e,["raiMediaFilteredCount"],i);const o=p(n,["raiMediaFilteredReasons"]);return o!=null&&_(e,["raiMediaFilteredReasons"],o),e}function $V(n){const e={},t=p(n,["video"]);return t!=null&&_(e,["video"],QV(t)),e}function YV(n){const e={},t=p(n,["_self"]);return t!=null&&_(e,["video"],WV(t)),e}function KV(n){const e={},t=p(n,["operationName"]);return t!=null&&_(e,["_url","operationName"],t),e}function JV(n){const e={},t=p(n,["operationName"]);return t!=null&&_(e,["_url","operationName"],t),e}function QV(n){const e={},t=p(n,["uri"]);t!=null&&_(e,["uri"],t);const i=p(n,["encodedVideo"]);i!=null&&_(e,["videoBytes"],Cy(i));const o=p(n,["encoding"]);return o!=null&&_(e,["mimeType"],o),e}function WV(n){const e={},t=p(n,["gcsUri"]);t!=null&&_(e,["uri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&_(e,["videoBytes"],Cy(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Y0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Y0||(Y0={}));var K0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(K0||(K0={}));var J0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(J0||(J0={}));var zr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(zr||(zr={}));var Q0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Q0||(Q0={}));var W0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(W0||(W0={}));var X0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(X0||(X0={}));var Z0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Z0||(Z0={}));var eA;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(eA||(eA={}));var tA;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(tA||(tA={}));var nA;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(nA||(nA={}));var iA;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(iA||(iA={}));var sA;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(sA||(sA={}));var rA;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(rA||(rA={}));var oA;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(oA||(oA={}));var aA;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(aA||(aA={}));var Fh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Fh||(Fh={}));var lA;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(lA||(lA={}));var mg;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(mg||(mg={}));var cA;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(cA||(cA={}));var uA;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(uA||(uA={}));var dA;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(dA||(dA={}));var hA;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(hA||(hA={}));var fA;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(fA||(fA={}));var pA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(pA||(pA={}));var mA;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mA||(mA={}));var gA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(gA||(gA={}));var yA;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(yA||(yA={}));var _A;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(_A||(_A={}));var vA;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(vA||(vA={}));var TA;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(TA||(TA={}));var EA;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(EA||(EA={}));var AA;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(AA||(AA={}));var SA;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(SA||(SA={}));var wA;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(wA||(wA={}));var CA;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(CA||(CA={}));var IA;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(IA||(IA={}));var RA;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(RA||(RA={}));var NA;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(NA||(NA={}));var xA;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(xA||(xA={}));var bA;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bA||(bA={}));var PA;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(PA||(PA={}));var DA;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(DA||(DA={}));var MA;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(MA||(MA={}));var kA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(kA||(kA={}));var VA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(VA||(VA={}));var UA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(UA||(UA={}));var LA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(LA||(LA={}));var tl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(tl||(tl={}));class gg{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class kc{get text(){var e,t,i,o,a,c,d,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const E=[];for(const A of(f=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[N,L]of Object.entries(A))N!=="text"&&N!=="thought"&&(L!==null||L!==void 0)&&E.push(N);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,h+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,t,i,o,a,c,d,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const E of(f=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[A,N]of Object.entries(E))A!=="inlineData"&&(N!==null||N!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,c,d,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if(h?.length!==0)return h}get executableCode(){var e,t,i,o,a,c,d,f,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(f=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if(v?.length!==0)return(h=v?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,c,d,f,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(f=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if(v?.length!==0)return(h=v?.[0])===null||h===void 0?void 0:h.output}}class OA{}class FA{}class XV{}class ZV{}class eU{}class tU{}class qA{}class BA{}class HA{}class nU{}class qh{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new qh;let o;const a=e;return t?o=GV(a):o=HV(a),Object.assign(i,o),i}}class GA{}class zA{}class jA{}class iU{}class sU{}class rU{}class $A{}class oU{get text(){var e,t,i;let o="",a=!1;const c=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(d))f!=="text"&&f!=="thought"&&h!==null&&c.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const c of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(c))d!=="inlineData"&&f!==null&&a.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class aU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function oI(n,e){const t=rt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function aI(n){return Array.isArray(n)?n.map(e=>Bh(e)):[Bh(n)]}function Bh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function lI(n){const e=Bh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cI(n){const e=Bh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YA(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function uI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>YA(e)):[YA(n)]}function yg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function KA(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function JA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function bn(n){if(n==null)throw new Error("ContentUnion is required");return yg(n)?n:{role:"user",parts:uI(n)}}function Iy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=bn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=bn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>bn(t)):[bn(e)]}function xi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(KA(n)||JA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[bn(n)]}const e=[],t=[],i=yg(n[0]);for(const o of n){const a=yg(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(KA(o)||JA(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:uI(t)}),e}function lU(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(zr).includes(t[0].toUpperCase())?t[0].toUpperCase():zr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(zr).includes(i.toUpperCase())?i.toUpperCase():zr.TYPE_UNSPECIFIED})}}function cl(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&lU(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(zr).includes(d.toUpperCase())?d.toUpperCase():zr.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=cl(d);else if(i.includes(c)){const f=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}f.push(cl(h))}e[c]=f}else if(o.includes(c)){const f={};for(const[h,v]of Object.entries(d))f[h]=cl(v);e[c]=f}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Ry(n){return cl(n)}function Ny(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function xy(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Rl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=cl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=cl(e.response));return n}function Nl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function cU(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function ar(n,e){if(typeof e!="string")throw new Error("name must be a string");return cU(n,e,"cachedContents")}function dI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function lo(n){return Cy(n)}function uU(n){return n!=null&&typeof n=="object"&&"name"in n}function dU(n){return n!=null&&typeof n=="object"&&"video"in n}function hU(n){return n!=null&&typeof n=="object"&&"uri"in n}function hI(n){var e;let t;if(uU(n)&&(t=n.name),!(hU(n)&&(t=n.uri,t===void 0))&&!(dU(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function fI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function pI(n){for(const e of["models","tunedModels","publisherModels"])if(fU(n,e))return n[e];return[]}function fU(n,e){return n!==null&&typeof n=="object"&&e in n}function pU(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function mU(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const c=pU(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function mI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function gU(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const f=c.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function xl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function yI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yU(n){const e={},t=p(n,["responsesFile"]);t!=null&&_(e,["fileName"],t);const i=p(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>KU(c))),_(e,["inlinedResponses"],a)}const o=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),_(e,["inlinedEmbedContentResponses"],a)}return e}function _U(n){const e={},t=p(n,["predictionsFormat"]);t!=null&&_(e,["format"],t);const i=p(n,["gcsDestination","outputUriPrefix"]);i!=null&&_(e,["gcsUri"],i);const o=p(n,["bigqueryDestination","outputUri"]);return o!=null&&_(e,["bigqueryUri"],o),e}function vU(n){const e={},t=p(n,["format"]);t!=null&&_(e,["predictionsFormat"],t);const i=p(n,["gcsUri"]);i!=null&&_(e,["gcsDestination","outputUriPrefix"],i);const o=p(n,["bigqueryUri"]);if(o!=null&&_(e,["bigqueryDestination","outputUri"],o),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function hh(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["metadata","displayName"]);i!=null&&_(e,["displayName"],i);const o=p(n,["metadata","state"]);o!=null&&_(e,["state"],yI(o));const a=p(n,["metadata","createTime"]);a!=null&&_(e,["createTime"],a);const c=p(n,["metadata","endTime"]);c!=null&&_(e,["endTime"],c);const d=p(n,["metadata","updateTime"]);d!=null&&_(e,["updateTime"],d);const f=p(n,["metadata","model"]);f!=null&&_(e,["model"],f);const h=p(n,["metadata","output"]);return h!=null&&_(e,["dest"],yU(gI(h))),e}function _g(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["displayName"]);i!=null&&_(e,["displayName"],i);const o=p(n,["state"]);o!=null&&_(e,["state"],yI(o));const a=p(n,["error"]);a!=null&&_(e,["error"],a);const c=p(n,["createTime"]);c!=null&&_(e,["createTime"],c);const d=p(n,["startTime"]);d!=null&&_(e,["startTime"],d);const f=p(n,["endTime"]);f!=null&&_(e,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&_(e,["updateTime"],h);const v=p(n,["model"]);v!=null&&_(e,["model"],v);const E=p(n,["inputConfig"]);E!=null&&_(e,["src"],TU(E));const A=p(n,["outputConfig"]);return A!=null&&_(e,["dest"],_U(gI(A))),e}function TU(n){const e={},t=p(n,["instancesFormat"]);t!=null&&_(e,["format"],t);const i=p(n,["gcsSource","uris"]);i!=null&&_(e,["gcsUri"],i);const o=p(n,["bigquerySource","inputUri"]);return o!=null&&_(e,["bigqueryUri"],o),e}function EU(n,e){const t={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&_(t,["fileName"],i);const o=p(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>YU(n,c))),_(t,["requests","requests"],a)}return t}function AU(n){const e={},t=p(n,["format"]);t!=null&&_(e,["instancesFormat"],t);const i=p(n,["gcsUri"]);i!=null&&_(e,["gcsSource","uris"],i);const o=p(n,["bigqueryUri"]);if(o!=null&&_(e,["bigquerySource","inputUri"],o),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function SU(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["data"]);t!=null&&_(e,["data"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function wU(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function CU(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function IU(n){const e={},t=p(n,["content"]);t!=null&&_(e,["content"],t);const i=p(n,["citationMetadata"]);i!=null&&_(e,["citationMetadata"],RU(i));const o=p(n,["tokenCount"]);o!=null&&_(e,["tokenCount"],o);const a=p(n,["finishReason"]);a!=null&&_(e,["finishReason"],a);const c=p(n,["urlContextMetadata"]);c!=null&&_(e,["urlContextMetadata"],c);const d=p(n,["avgLogprobs"]);d!=null&&_(e,["avgLogprobs"],d);const f=p(n,["groundingMetadata"]);f!=null&&_(e,["groundingMetadata"],f);const h=p(n,["index"]);h!=null&&_(e,["index"],h);const v=p(n,["logprobsResult"]);v!=null&&_(e,["logprobsResult"],v);const E=p(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(N=>N)),_(e,["safetyRatings"],A)}return e}function RU(n){const e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),_(e,["citations"],i)}return e}function _I(n){const e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>tL(a))),_(e,["parts"],o)}const i=p(n,["role"]);return i!=null&&_(e,["role"],i),e}function NU(n,e){const t={},i=p(n,["displayName"]);if(e!==void 0&&i!=null&&_(e,["batch","displayName"],i),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function xU(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const o=p(n,["dest"]);return e!==void 0&&o!=null&&_(e,["outputConfig"],vU(gU(o))),t}function QA(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["src"]);o!=null&&_(t,["batch","inputConfig"],EU(n,mI(n,o)));const a=p(e,["config"]);return a!=null&&NU(a,t),t}function bU(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["model"],rt(n,i));const o=p(e,["src"]);o!=null&&_(t,["inputConfig"],AU(mI(n,o)));const a=p(e,["config"]);return a!=null&&xU(a,t),t}function PU(n,e){const t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&_(e,["batch","displayName"],i),t}function DU(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["src"]);o!=null&&_(t,["batch","inputConfig"],FU(n,o));const a=p(e,["config"]);return a!=null&&PU(a,t),t}function MU(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function kU(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function VU(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&_(e,["name"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);return a!=null&&_(e,["error"],a),e}function UU(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&_(e,["name"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);return a!=null&&_(e,["error"],a),e}function LU(n,e){const t={},i=p(e,["contents"]);if(i!=null){let a=Iy(n,i);Array.isArray(a)&&(a=a.map(c=>c)),_(t,["requests[]","request","content"],a)}const o=p(e,["config"]);return o!=null&&(_(t,["_self"],OU(o,t)),qV(t,{"requests[].*":"requests[].request.*"})),t}function OU(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&_(e,["requests[]","taskType"],i);const o=p(n,["title"]);e!==void 0&&o!=null&&_(e,["requests[]","title"],o);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&_(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function FU(n,e){const t={},i=p(e,["fileName"]);i!=null&&_(t,["file_name"],i);const o=p(e,["inlinedRequests"]);return o!=null&&_(t,["requests"],LU(n,o)),t}function qU(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function BU(n,e,t){const i={},o=p(e,["systemInstruction"]);t!==void 0&&o!=null&&_(t,["systemInstruction"],_I(bn(o)));const a=p(e,["temperature"]);a!=null&&_(i,["temperature"],a);const c=p(e,["topP"]);c!=null&&_(i,["topP"],c);const d=p(e,["topK"]);d!=null&&_(i,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&_(i,["candidateCount"],f);const h=p(e,["maxOutputTokens"]);h!=null&&_(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&_(i,["stopSequences"],v);const E=p(e,["responseLogprobs"]);E!=null&&_(i,["responseLogprobs"],E);const A=p(e,["logprobs"]);A!=null&&_(i,["logprobs"],A);const N=p(e,["presencePenalty"]);N!=null&&_(i,["presencePenalty"],N);const L=p(e,["frequencyPenalty"]);L!=null&&_(i,["frequencyPenalty"],L);const F=p(e,["seed"]);F!=null&&_(i,["seed"],F);const U=p(e,["responseMimeType"]);U!=null&&_(i,["responseMimeType"],U);const Q=p(e,["responseSchema"]);Q!=null&&_(i,["responseSchema"],Ry(Q));const H=p(e,["responseJsonSchema"]);if(H!=null&&_(i,["responseJsonSchema"],H),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=p(e,["safetySettings"]);if(t!==void 0&&z!=null){let V=z;Array.isArray(V)&&(V=V.map(x=>nL(x))),_(t,["safetySettings"],V)}const re=p(e,["tools"]);if(t!==void 0&&re!=null){let V=Nl(re);Array.isArray(V)&&(V=V.map(x=>iL(Rl(x)))),_(t,["tools"],V)}const ee=p(e,["toolConfig"]);if(t!==void 0&&ee!=null&&_(t,["toolConfig"],ee),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const he=p(e,["cachedContent"]);t!==void 0&&he!=null&&_(t,["cachedContent"],ar(n,he));const O=p(e,["responseModalities"]);O!=null&&_(i,["responseModalities"],O);const D=p(e,["mediaResolution"]);D!=null&&_(i,["mediaResolution"],D);const b=p(e,["speechConfig"]);if(b!=null&&_(i,["speechConfig"],Ny(b)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=p(e,["thinkingConfig"]);M!=null&&_(i,["thinkingConfig"],M);const k=p(e,["imageConfig"]);return k!=null&&_(i,["imageConfig"],k),i}function HU(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>IU(h))),_(e,["candidates"],f)}const o=p(n,["modelVersion"]);o!=null&&_(e,["modelVersion"],o);const a=p(n,["promptFeedback"]);a!=null&&_(e,["promptFeedback"],a);const c=p(n,["responseId"]);c!=null&&_(e,["responseId"],c);const d=p(n,["usageMetadata"]);return d!=null&&_(e,["usageMetadata"],d),e}function GU(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function zU(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function jU(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function $U(n){const e={},t=p(n,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function YU(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["request","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let d=xi(o);Array.isArray(d)&&(d=d.map(f=>_I(f))),_(t,["request","contents"],d)}const a=p(e,["metadata"]);a!=null&&_(t,["metadata"],a);const c=p(e,["config"]);return c!=null&&_(t,["request","generationConfig"],BU(n,c,p(t,["request"],{}))),t}function KU(n){const e={},t=p(n,["response"]);t!=null&&_(e,["response"],HU(t));const i=p(n,["error"]);return i!=null&&_(e,["error"],i),e}function JU(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);if(e!==void 0&&o!=null&&_(e,["_query","pageToken"],o),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function QU(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);e!==void 0&&o!=null&&_(e,["_query","pageToken"],o);const a=p(n,["filter"]);return e!==void 0&&a!=null&&_(e,["_query","filter"],a),t}function WU(n){const e={},t=p(n,["config"]);return t!=null&&JU(t,e),e}function XU(n){const e={},t=p(n,["config"]);return t!=null&&QU(t,e),e}function ZU(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>hh(c))),_(e,["batchJobs"],a)}return e}function eL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>_g(c))),_(e,["batchJobs"],a)}return e}function tL(n){const e={},t=p(n,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const i=p(n,["thought"]);i!=null&&_(e,["thought"],i);const o=p(n,["inlineData"]);o!=null&&_(e,["inlineData"],SU(o));const a=p(n,["fileData"]);a!=null&&_(e,["fileData"],qU(a));const c=p(n,["thoughtSignature"]);c!=null&&_(e,["thoughtSignature"],c);const d=p(n,["functionCall"]);d!=null&&_(e,["functionCall"],d);const f=p(n,["codeExecutionResult"]);f!=null&&_(e,["codeExecutionResult"],f);const h=p(n,["executableCode"]);h!=null&&_(e,["executableCode"],h);const v=p(n,["functionResponse"]);v!=null&&_(e,["functionResponse"],v);const E=p(n,["text"]);return E!=null&&_(e,["text"],E),e}function nL(n){const e={};if(p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=p(n,["category"]);t!=null&&_(e,["category"],t);const i=p(n,["threshold"]);return i!=null&&_(e,["threshold"],i),e}function iL(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearch"]);i!=null&&_(e,["googleSearch"],$U(i));const o=p(n,["googleSearchRetrieval"]);if(o!=null&&_(e,["googleSearchRetrieval"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["googleMaps"]);a!=null&&_(e,["googleMaps"],jU(a));const c=p(n,["urlContext"]);c!=null&&_(e,["urlContext"],c);const d=p(n,["computerUse"]);d!=null&&_(e,["computerUse"],d);const f=p(n,["codeExecution"]);return f!=null&&_(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var na;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(na||(na={}));class Nu{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sL extends la{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Nu(na.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=QA(this.apiClient,e),i=t._url,o=Se("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,f=d.requests,h=[];for(const v of f){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const N=E.request;N.systemInstruction=A,E.request=N}h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(c)i.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=bU(this.apiClient,e);return d=Se("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>_g(v))}else{const h=QA(this.apiClient,e);return d=Se("{model}:batchGenerateContent",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>hh(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DU(this.apiClient,e);return a=Se("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>hh(f))}}async get(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=zU(this.apiClient,e);return d=Se("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>_g(v))}else{const h=GU(this.apiClient,e);return d=Se("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>hh(v))}}async cancel(e){var t,i,o,a;let c="",d={};if(this.apiClient.isVertexAI()){const f=CU(this.apiClient,e);c=Se("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=wU(this.apiClient,e);c=Se("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=XU(e);return d=Se("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=eL(v),A=new $A;return Object.assign(A,E),A})}else{const h=WU(e);return d=Se("batches",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=ZU(v),A=new $A;return Object.assign(A,E),A})}}async delete(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=kU(this.apiClient,e);return d=Se("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>UU(v))}else{const h=MU(this.apiClient,e);return d=Se("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>VU(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rL(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["data"]);t!=null&&_(e,["data"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function WA(n){const e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>IL(a))),_(e,["parts"],o)}const i=p(n,["role"]);return i!=null&&_(e,["role"],i),e}function oL(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const o=p(n,["expireTime"]);e!==void 0&&o!=null&&_(e,["expireTime"],o);const a=p(n,["displayName"]);e!==void 0&&a!=null&&_(e,["displayName"],a);const c=p(n,["contents"]);if(e!==void 0&&c!=null){let v=xi(c);Array.isArray(v)&&(v=v.map(E=>WA(E))),_(e,["contents"],v)}const d=p(n,["systemInstruction"]);e!==void 0&&d!=null&&_(e,["systemInstruction"],WA(bn(d)));const f=p(n,["tools"]);if(e!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(E=>RL(E))),_(e,["tools"],v)}const h=p(n,["toolConfig"]);if(e!==void 0&&h!=null&&_(e,["toolConfig"],h),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function aL(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const o=p(n,["expireTime"]);e!==void 0&&o!=null&&_(e,["expireTime"],o);const a=p(n,["displayName"]);e!==void 0&&a!=null&&_(e,["displayName"],a);const c=p(n,["contents"]);if(e!==void 0&&c!=null){let E=xi(c);Array.isArray(E)&&(E=E.map(A=>A)),_(e,["contents"],E)}const d=p(n,["systemInstruction"]);e!==void 0&&d!=null&&_(e,["systemInstruction"],bn(d));const f=p(n,["tools"]);if(e!==void 0&&f!=null){let E=f;Array.isArray(E)&&(E=E.map(A=>NL(A))),_(e,["tools"],E)}const h=p(n,["toolConfig"]);e!==void 0&&h!=null&&_(e,["toolConfig"],h);const v=p(n,["kmsKeyName"]);return e!==void 0&&v!=null&&_(e,["encryption_spec","kmsKeyName"],v),t}function lL(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["model"],oI(n,i));const o=p(e,["config"]);return o!=null&&oL(o,t),t}function cL(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["model"],oI(n,i));const o=p(e,["config"]);return o!=null&&aL(o,t),t}function uL(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],ar(n,i)),t}function dL(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],ar(n,i)),t}function hL(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function fL(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function pL(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function mL(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&_(e,["description"],t);const i=p(n,["name"]);i!=null&&_(e,["name"],i);const o=p(n,["parameters"]);o!=null&&_(e,["parameters"],o);const a=p(n,["parametersJsonSchema"]);a!=null&&_(e,["parametersJsonSchema"],a);const c=p(n,["response"]);c!=null&&_(e,["response"],c);const d=p(n,["responseJsonSchema"]);return d!=null&&_(e,["responseJsonSchema"],d),e}function gL(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],ar(n,i)),t}function yL(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],ar(n,i)),t}function _L(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function vL(n){const e={},t=p(n,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function TL(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);return e!==void 0&&o!=null&&_(e,["_query","pageToken"],o),t}function EL(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);return e!==void 0&&o!=null&&_(e,["_query","pageToken"],o),t}function AL(n){const e={},t=p(n,["config"]);return t!=null&&TL(t,e),e}function SL(n){const e={},t=p(n,["config"]);return t!=null&&EL(t,e),e}function wL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),_(e,["cachedContents"],a)}return e}function CL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),_(e,["cachedContents"],a)}return e}function IL(n){const e={},t=p(n,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const i=p(n,["thought"]);i!=null&&_(e,["thought"],i);const o=p(n,["inlineData"]);o!=null&&_(e,["inlineData"],rL(o));const a=p(n,["fileData"]);a!=null&&_(e,["fileData"],pL(a));const c=p(n,["thoughtSignature"]);c!=null&&_(e,["thoughtSignature"],c);const d=p(n,["functionCall"]);d!=null&&_(e,["functionCall"],d);const f=p(n,["codeExecutionResult"]);f!=null&&_(e,["codeExecutionResult"],f);const h=p(n,["executableCode"]);h!=null&&_(e,["executableCode"],h);const v=p(n,["functionResponse"]);v!=null&&_(e,["functionResponse"],v);const E=p(n,["text"]);return E!=null&&_(e,["text"],E),e}function RL(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearch"]);i!=null&&_(e,["googleSearch"],vL(i));const o=p(n,["googleSearchRetrieval"]);if(o!=null&&_(e,["googleSearchRetrieval"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["googleMaps"]);a!=null&&_(e,["googleMaps"],_L(a));const c=p(n,["urlContext"]);c!=null&&_(e,["urlContext"],c);const d=p(n,["computerUse"]);d!=null&&_(e,["computerUse"],d);const f=p(n,["codeExecution"]);return f!=null&&_(e,["codeExecution"],f),e}function NL(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>mL(A))),_(e,["functionDeclarations"],E)}const i=p(n,["retrieval"]);i!=null&&_(e,["retrieval"],i);const o=p(n,["googleSearch"]);o!=null&&_(e,["googleSearch"],o);const a=p(n,["googleSearchRetrieval"]);a!=null&&_(e,["googleSearchRetrieval"],a);const c=p(n,["enterpriseWebSearch"]);c!=null&&_(e,["enterpriseWebSearch"],c);const d=p(n,["googleMaps"]);d!=null&&_(e,["googleMaps"],d);const f=p(n,["urlContext"]);f!=null&&_(e,["urlContext"],f);const h=p(n,["computerUse"]);h!=null&&_(e,["computerUse"],h);const v=p(n,["codeExecution"]);return v!=null&&_(e,["codeExecution"],v),e}function xL(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const o=p(n,["expireTime"]);return e!==void 0&&o!=null&&_(e,["expireTime"],o),t}function bL(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const o=p(n,["expireTime"]);return e!==void 0&&o!=null&&_(e,["expireTime"],o),t}function PL(n,e){const t={},i=p(e,["name"]);i!=null&&_(t,["_url","name"],ar(n,i));const o=p(e,["config"]);return o!=null&&xL(o,t),t}function DL(n,e){const t={},i=p(e,["name"]);i!=null&&_(t,["_url","name"],ar(n,i));const o=p(e,["config"]);return o!=null&&bL(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ML extends la{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Nu(na.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=cL(this.apiClient,e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const h=lL(this.apiClient,e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=yL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const h=gL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=dL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=fL(v),A=new zA;return Object.assign(A,E),A})}else{const h=uL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=hL(v),A=new zA;return Object.assign(A,E),A})}}async update(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=DL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const h=PL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=SL(e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=CL(v),A=new jA;return Object.assign(A,E),A})}else{const h=AL(e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=wL(v),A=new jA;return Object.assign(A,E),A})}}}function XA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function It(n){return this instanceof It?(this.v=n,this):new It(n)}function ul(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(N){return function(L){return Promise.resolve(L).then(N,E)}}function d(N,L){i[N]&&(o[N]=function(F){return new Promise(function(U,Q){a.push([N,F,U,Q])>1||f(N,F)})},L&&(o[N]=L(o[N])))}function f(N,L){try{h(i[N](L))}catch(F){A(a[0][3],F)}}function h(N){N.value instanceof It?Promise.resolve(N.value.v).then(v,E):A(a[0][2],N)}function v(N){f("next",N)}function E(N){f("throw",N)}function A(N,L){N(L),a.shift(),a.length&&f(a[0][0],a[0][1])}}function tu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof XA=="function"?XA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(c){return new Promise(function(d,f){c=n[a](c),o(d,f,c.done,c.value)})}}function o(a,c,d,f){Promise.resolve(f).then(function(h){a({value:h,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kL(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:vI(t)}function vI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function VL(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ZA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!vI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class UL{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new LL(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class LL{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),VL(a)}async sendMessage(e){var t;await this.sendPromise;const i=bn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,c,d;const f=await o,h=(c=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,v=f.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(d=v.slice(E))!==null&&d!==void 0?d:[]);const N=h?[h]:[];this.recordHistory(i,N,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=bn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?ZA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return ul(this,arguments,function*(){var c,d,f,h;const v=[];try{for(var E=!0,A=tu(e),N;N=yield It(A.next()),c=N.done,!c;E=!0){h=N.value,E=!1;const L=h;if(kL(L)){const F=(o=(i=L.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;F!==void 0&&v.push(F)}yield yield It(L)}}catch(L){d={error:L}}finally{try{!E&&!c&&(f=A.return)&&(yield It(f.call(A)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...ZA(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,gf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OL(n){const e={},t=p(n,["file"]);return t!=null&&_(e,["file"],t),e}function FL(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function qL(n){const e={},t=p(n,["name"]);return t!=null&&_(e,["_url","file"],hI(t)),e}function BL(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function HL(n){const e={},t=p(n,["name"]);return t!=null&&_(e,["_url","file"],hI(t)),e}function GL(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);return e!==void 0&&o!=null&&_(e,["_query","pageToken"],o),t}function zL(n){const e={},t=p(n,["config"]);return t!=null&&GL(t,e),e}function jL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),_(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $L extends la{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Nu(na.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zL(e);return a=Se("files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const h=jL(f),v=new iU;return Object.assign(v,h),v})}}async createInternal(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=OL(e);return a=Se("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=FL(f),v=new sU;return Object.assign(v,h),v})}}async get(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HL(e);return a=Se("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qL(e);return a=Se("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const h=BL(f),v=new rU;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fh(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["data"]);t!=null&&_(e,["data"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function YL(n){const e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>lO(a))),_(e,["parts"],o)}const i=p(n,["role"]);return i!=null&&_(e,["role"],i),e}function KL(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function JL(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&_(e,["description"],t);const i=p(n,["name"]);i!=null&&_(e,["name"],i);const o=p(n,["parameters"]);o!=null&&_(e,["parameters"],o);const a=p(n,["parametersJsonSchema"]);a!=null&&_(e,["parametersJsonSchema"],a);const c=p(n,["response"]);c!=null&&_(e,["response"],c);const d=p(n,["responseJsonSchema"]);return d!=null&&_(e,["responseJsonSchema"],d),e}function QL(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&_(e,["modelConfig"],t);const i=p(n,["audioTimestamp"]);i!=null&&_(e,["audioTimestamp"],i);const o=p(n,["candidateCount"]);o!=null&&_(e,["candidateCount"],o);const a=p(n,["enableAffectiveDialog"]);a!=null&&_(e,["enableAffectiveDialog"],a);const c=p(n,["frequencyPenalty"]);c!=null&&_(e,["frequencyPenalty"],c);const d=p(n,["logprobs"]);d!=null&&_(e,["logprobs"],d);const f=p(n,["maxOutputTokens"]);f!=null&&_(e,["maxOutputTokens"],f);const h=p(n,["mediaResolution"]);h!=null&&_(e,["mediaResolution"],h);const v=p(n,["presencePenalty"]);v!=null&&_(e,["presencePenalty"],v);const E=p(n,["responseJsonSchema"]);E!=null&&_(e,["responseJsonSchema"],E);const A=p(n,["responseLogprobs"]);A!=null&&_(e,["responseLogprobs"],A);const N=p(n,["responseMimeType"]);N!=null&&_(e,["responseMimeType"],N);const L=p(n,["responseModalities"]);L!=null&&_(e,["responseModalities"],L);const F=p(n,["responseSchema"]);F!=null&&_(e,["responseSchema"],F);const U=p(n,["routingConfig"]);U!=null&&_(e,["routingConfig"],U);const Q=p(n,["seed"]);Q!=null&&_(e,["seed"],Q);const H=p(n,["speechConfig"]);H!=null&&_(e,["speechConfig"],TI(H));const z=p(n,["stopSequences"]);z!=null&&_(e,["stopSequences"],z);const re=p(n,["temperature"]);re!=null&&_(e,["temperature"],re);const ee=p(n,["thinkingConfig"]);ee!=null&&_(e,["thinkingConfig"],ee);const he=p(n,["topK"]);he!=null&&_(e,["topK"],he);const O=p(n,["topP"]);if(O!=null&&_(e,["topP"],O),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function WL(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function XL(n){const e={},t=p(n,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ZL(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig"],i);const o=p(n,["responseModalities"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","responseModalities"],o);const a=p(n,["temperature"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","temperature"],a);const c=p(n,["topP"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topP"],c);const d=p(n,["topK"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","mediaResolution"],h);const v=p(n,["seed"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","seed"],v);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&_(e,["setup","generationConfig","speechConfig"],xy(E));const A=p(n,["thinkingConfig"]);e!==void 0&&A!=null&&_(e,["setup","generationConfig","thinkingConfig"],A);const N=p(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],N);const L=p(n,["systemInstruction"]);e!==void 0&&L!=null&&_(e,["setup","systemInstruction"],YL(bn(L)));const F=p(n,["tools"]);if(e!==void 0&&F!=null){let he=Nl(F);Array.isArray(he)&&(he=he.map(O=>uO(Rl(O)))),_(e,["setup","tools"],he)}const U=p(n,["sessionResumption"]);e!==void 0&&U!=null&&_(e,["setup","sessionResumption"],cO(U));const Q=p(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&_(e,["setup","inputAudioTranscription"],Q);const H=p(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&_(e,["setup","outputAudioTranscription"],H);const z=p(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&_(e,["setup","realtimeInputConfig"],z);const re=p(n,["contextWindowCompression"]);e!==void 0&&re!=null&&_(e,["setup","contextWindowCompression"],re);const ee=p(n,["proactivity"]);return e!==void 0&&ee!=null&&_(e,["setup","proactivity"],ee),t}function eO(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig"],QL(i));const o=p(n,["responseModalities"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","responseModalities"],o);const a=p(n,["temperature"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","temperature"],a);const c=p(n,["topP"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topP"],c);const d=p(n,["topK"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","mediaResolution"],h);const v=p(n,["seed"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","seed"],v);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&_(e,["setup","generationConfig","speechConfig"],TI(xy(E)));const A=p(n,["thinkingConfig"]);e!==void 0&&A!=null&&_(e,["setup","generationConfig","thinkingConfig"],A);const N=p(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],N);const L=p(n,["systemInstruction"]);e!==void 0&&L!=null&&_(e,["setup","systemInstruction"],bn(L));const F=p(n,["tools"]);if(e!==void 0&&F!=null){let he=Nl(F);Array.isArray(he)&&(he=he.map(O=>dO(Rl(O)))),_(e,["setup","tools"],he)}const U=p(n,["sessionResumption"]);e!==void 0&&U!=null&&_(e,["setup","sessionResumption"],U);const Q=p(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&_(e,["setup","inputAudioTranscription"],Q);const H=p(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&_(e,["setup","outputAudioTranscription"],H);const z=p(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&_(e,["setup","realtimeInputConfig"],z);const re=p(n,["contextWindowCompression"]);e!==void 0&&re!=null&&_(e,["setup","contextWindowCompression"],re);const ee=p(n,["proactivity"]);return e!==void 0&&ee!=null&&_(e,["setup","proactivity"],ee),t}function tO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["setup","model"],rt(n,i));const o=p(e,["config"]);return o!=null&&_(t,["config"],ZL(o,t)),t}function nO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["setup","model"],rt(n,i));const o=p(e,["config"]);return o!=null&&_(t,["config"],eO(o,t)),t}function iO(n){const e={},t=p(n,["musicGenerationConfig"]);return t!=null&&_(e,["musicGenerationConfig"],t),e}function sO(n){const e={},t=p(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),_(e,["weightedPrompts"],i)}return e}function rO(n){const e={},t=p(n,["media"]);if(t!=null){let h=aI(t);Array.isArray(h)&&(h=h.map(v=>fh(v))),_(e,["mediaChunks"],h)}const i=p(n,["audio"]);i!=null&&_(e,["audio"],fh(cI(i)));const o=p(n,["audioStreamEnd"]);o!=null&&_(e,["audioStreamEnd"],o);const a=p(n,["video"]);a!=null&&_(e,["video"],fh(lI(a)));const c=p(n,["text"]);c!=null&&_(e,["text"],c);const d=p(n,["activityStart"]);d!=null&&_(e,["activityStart"],d);const f=p(n,["activityEnd"]);return f!=null&&_(e,["activityEnd"],f),e}function oO(n){const e={},t=p(n,["media"]);if(t!=null){let h=aI(t);Array.isArray(h)&&(h=h.map(v=>v)),_(e,["mediaChunks"],h)}const i=p(n,["audio"]);i!=null&&_(e,["audio"],cI(i));const o=p(n,["audioStreamEnd"]);o!=null&&_(e,["audioStreamEnd"],o);const a=p(n,["video"]);a!=null&&_(e,["video"],lI(a));const c=p(n,["text"]);c!=null&&_(e,["text"],c);const d=p(n,["activityStart"]);d!=null&&_(e,["activityStart"],d);const f=p(n,["activityEnd"]);return f!=null&&_(e,["activityEnd"],f),e}function aO(n){const e={},t=p(n,["setupComplete"]);t!=null&&_(e,["setupComplete"],t);const i=p(n,["serverContent"]);i!=null&&_(e,["serverContent"],i);const o=p(n,["toolCall"]);o!=null&&_(e,["toolCall"],o);const a=p(n,["toolCallCancellation"]);a!=null&&_(e,["toolCallCancellation"],a);const c=p(n,["usageMetadata"]);c!=null&&_(e,["usageMetadata"],hO(c));const d=p(n,["goAway"]);d!=null&&_(e,["goAway"],d);const f=p(n,["sessionResumptionUpdate"]);return f!=null&&_(e,["sessionResumptionUpdate"],f),e}function lO(n){const e={},t=p(n,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const i=p(n,["thought"]);i!=null&&_(e,["thought"],i);const o=p(n,["inlineData"]);o!=null&&_(e,["inlineData"],fh(o));const a=p(n,["fileData"]);a!=null&&_(e,["fileData"],KL(a));const c=p(n,["thoughtSignature"]);c!=null&&_(e,["thoughtSignature"],c);const d=p(n,["functionCall"]);d!=null&&_(e,["functionCall"],d);const f=p(n,["codeExecutionResult"]);f!=null&&_(e,["codeExecutionResult"],f);const h=p(n,["executableCode"]);h!=null&&_(e,["executableCode"],h);const v=p(n,["functionResponse"]);v!=null&&_(e,["functionResponse"],v);const E=p(n,["text"]);return E!=null&&_(e,["text"],E),e}function cO(n){const e={},t=p(n,["handle"]);if(t!=null&&_(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function TI(n){const e={},t=p(n,["voiceConfig"]);if(t!=null&&_(e,["voiceConfig"],t),p(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=p(n,["languageCode"]);return i!=null&&_(e,["languageCode"],i),e}function uO(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearch"]);i!=null&&_(e,["googleSearch"],XL(i));const o=p(n,["googleSearchRetrieval"]);if(o!=null&&_(e,["googleSearchRetrieval"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["googleMaps"]);a!=null&&_(e,["googleMaps"],WL(a));const c=p(n,["urlContext"]);c!=null&&_(e,["urlContext"],c);const d=p(n,["computerUse"]);d!=null&&_(e,["computerUse"],d);const f=p(n,["codeExecution"]);return f!=null&&_(e,["codeExecution"],f),e}function dO(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>JL(A))),_(e,["functionDeclarations"],E)}const i=p(n,["retrieval"]);i!=null&&_(e,["retrieval"],i);const o=p(n,["googleSearch"]);o!=null&&_(e,["googleSearch"],o);const a=p(n,["googleSearchRetrieval"]);a!=null&&_(e,["googleSearchRetrieval"],a);const c=p(n,["enterpriseWebSearch"]);c!=null&&_(e,["enterpriseWebSearch"],c);const d=p(n,["googleMaps"]);d!=null&&_(e,["googleMaps"],d);const f=p(n,["urlContext"]);f!=null&&_(e,["urlContext"],f);const h=p(n,["computerUse"]);h!=null&&_(e,["computerUse"],h);const v=p(n,["codeExecution"]);return v!=null&&_(e,["codeExecution"],v),e}function hO(n){const e={},t=p(n,["promptTokenCount"]);t!=null&&_(e,["promptTokenCount"],t);const i=p(n,["cachedContentTokenCount"]);i!=null&&_(e,["cachedContentTokenCount"],i);const o=p(n,["candidatesTokenCount"]);o!=null&&_(e,["responseTokenCount"],o);const a=p(n,["toolUsePromptTokenCount"]);a!=null&&_(e,["toolUsePromptTokenCount"],a);const c=p(n,["thoughtsTokenCount"]);c!=null&&_(e,["thoughtsTokenCount"],c);const d=p(n,["totalTokenCount"]);d!=null&&_(e,["totalTokenCount"],d);const f=p(n,["promptTokensDetails"]);if(f!=null){let N=f;Array.isArray(N)&&(N=N.map(L=>L)),_(e,["promptTokensDetails"],N)}const h=p(n,["cacheTokensDetails"]);if(h!=null){let N=h;Array.isArray(N)&&(N=N.map(L=>L)),_(e,["cacheTokensDetails"],N)}const v=p(n,["candidatesTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(L=>L)),_(e,["responseTokensDetails"],N)}const E=p(n,["toolUsePromptTokensDetails"]);if(E!=null){let N=E;Array.isArray(N)&&(N=N.map(L=>L)),_(e,["toolUsePromptTokensDetails"],N)}const A=p(n,["trafficType"]);return A!=null&&_(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fO(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["data"]);t!=null&&_(e,["data"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function pO(n){const e={},t=p(n,["content"]);t!=null&&_(e,["content"],t);const i=p(n,["citationMetadata"]);i!=null&&_(e,["citationMetadata"],mO(i));const o=p(n,["tokenCount"]);o!=null&&_(e,["tokenCount"],o);const a=p(n,["finishReason"]);a!=null&&_(e,["finishReason"],a);const c=p(n,["urlContextMetadata"]);c!=null&&_(e,["urlContextMetadata"],c);const d=p(n,["avgLogprobs"]);d!=null&&_(e,["avgLogprobs"],d);const f=p(n,["groundingMetadata"]);f!=null&&_(e,["groundingMetadata"],f);const h=p(n,["index"]);h!=null&&_(e,["index"],h);const v=p(n,["logprobsResult"]);v!=null&&_(e,["logprobsResult"],v);const E=p(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(N=>N)),_(e,["safetyRatings"],A)}return e}function mO(n){const e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),_(e,["citations"],i)}return e}function gO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let a=xi(o);Array.isArray(a)&&(a=a.map(c=>c)),_(t,["contents"],a)}return t}function yO(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),_(e,["tokensInfo"],o)}return e}function _O(n){const e={},t=p(n,["values"]);t!=null&&_(e,["values"],t);const i=p(n,["statistics"]);return i!=null&&_(e,["statistics"],vO(i)),e}function vO(n){const e={},t=p(n,["truncated"]);t!=null&&_(e,["truncated"],t);const i=p(n,["token_count"]);return i!=null&&_(e,["tokenCount"],i),e}function yf(n){const e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>w4(a))),_(e,["parts"],o)}const i=p(n,["role"]);return i!=null&&_(e,["role"],i),e}function TO(n){const e={},t=p(n,["controlType"]);t!=null&&_(e,["controlType"],t);const i=p(n,["enableControlImageComputation"]);return i!=null&&_(e,["computeControl"],i),e}function EO(n){const e={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function AO(n,e){const t={},i=p(n,["systemInstruction"]);e!==void 0&&i!=null&&_(e,["systemInstruction"],bn(i));const o=p(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>CI(d))),_(e,["tools"],c)}const a=p(n,["generationConfig"]);return e!==void 0&&a!=null&&_(e,["generationConfig"],d4(a)),t}function SO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let c=xi(o);Array.isArray(c)&&(c=c.map(d=>yf(d))),_(t,["contents"],c)}const a=p(e,["config"]);return a!=null&&EO(a),t}function wO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let c=xi(o);Array.isArray(c)&&(c=c.map(d=>d)),_(t,["contents"],c)}const a=p(e,["config"]);return a!=null&&AO(a,t),t}function CO(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["totalTokens"]);i!=null&&_(e,["totalTokens"],i);const o=p(n,["cachedContentTokenCount"]);return o!=null&&_(e,["cachedContentTokenCount"],o),e}function IO(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["totalTokens"]);return i!=null&&_(e,["totalTokens"],i),e}function RO(n,e){const t={},i=p(e,["model"]);return i!=null&&_(t,["_url","name"],rt(n,i)),t}function NO(n,e){const t={},i=p(e,["model"]);return i!=null&&_(t,["_url","name"],rt(n,i)),t}function xO(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function bO(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function PO(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const o=p(n,["negativePrompt"]);e!==void 0&&o!=null&&_(e,["parameters","negativePrompt"],o);const a=p(n,["numberOfImages"]);e!==void 0&&a!=null&&_(e,["parameters","sampleCount"],a);const c=p(n,["aspectRatio"]);e!==void 0&&c!=null&&_(e,["parameters","aspectRatio"],c);const d=p(n,["guidanceScale"]);e!==void 0&&d!=null&&_(e,["parameters","guidanceScale"],d);const f=p(n,["seed"]);e!==void 0&&f!=null&&_(e,["parameters","seed"],f);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&_(e,["parameters","safetySetting"],h);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&_(e,["parameters","personGeneration"],v);const E=p(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&_(e,["parameters","includeSafetyAttributes"],E);const A=p(n,["includeRaiReason"]);e!==void 0&&A!=null&&_(e,["parameters","includeRaiReason"],A);const N=p(n,["language"]);e!==void 0&&N!=null&&_(e,["parameters","language"],N);const L=p(n,["outputMimeType"]);e!==void 0&&L!=null&&_(e,["parameters","outputOptions","mimeType"],L);const F=p(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&_(e,["parameters","outputOptions","compressionQuality"],F);const U=p(n,["addWatermark"]);e!==void 0&&U!=null&&_(e,["parameters","addWatermark"],U);const Q=p(n,["labels"]);e!==void 0&&Q!=null&&_(e,["labels"],Q);const H=p(n,["editMode"]);e!==void 0&&H!=null&&_(e,["parameters","editMode"],H);const z=p(n,["baseSteps"]);return e!==void 0&&z!=null&&_(e,["parameters","editConfig","baseSteps"],z),t}function DO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["prompt"]);o!=null&&_(t,["instances[0]","prompt"],o);const a=p(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>b4(f))),_(t,["instances[0]","referenceImages"],d)}const c=p(e,["config"]);return c!=null&&PO(c,t),t}function MO(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_f(a))),_(e,["generatedImages"],o)}return e}function kO(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&_(e,["requests[]","taskType"],i);const o=p(n,["title"]);e!==void 0&&o!=null&&_(e,["requests[]","title"],o);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&_(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function VO(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&_(e,["instances[]","task_type"],i);const o=p(n,["title"]);e!==void 0&&o!=null&&_(e,["instances[]","title"],o);const a=p(n,["outputDimensionality"]);e!==void 0&&a!=null&&_(e,["parameters","outputDimensionality"],a);const c=p(n,["mimeType"]);e!==void 0&&c!=null&&_(e,["instances[]","mimeType"],c);const d=p(n,["autoTruncate"]);return e!==void 0&&d!=null&&_(e,["parameters","autoTruncate"],d),t}function UO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let d=Iy(n,o);Array.isArray(d)&&(d=d.map(f=>f)),_(t,["requests[]","content"],d)}const a=p(e,["config"]);a!=null&&kO(a,t);const c=p(e,["model"]);return c!==void 0&&_(t,["requests[]","model"],rt(n,c)),t}function LO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let c=Iy(n,o);Array.isArray(c)&&(c=c.map(d=>d)),_(t,["instances[]","content"],c)}const a=p(e,["config"]);return a!=null&&VO(a,t),t}function OO(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>c)),_(e,["embeddings"],a)}const o=p(n,["metadata"]);return o!=null&&_(e,["metadata"],o),e}function FO(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>_O(c))),_(e,["embeddings"],a)}const o=p(n,["metadata"]);return o!=null&&_(e,["metadata"],o),e}function qO(n){const e={},t=p(n,["endpoint"]);t!=null&&_(e,["name"],t);const i=p(n,["deployedModelId"]);return i!=null&&_(e,["deployedModelId"],i),e}function BO(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function HO(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&_(e,["description"],t);const i=p(n,["name"]);i!=null&&_(e,["name"],i);const o=p(n,["parameters"]);o!=null&&_(e,["parameters"],o);const a=p(n,["parametersJsonSchema"]);a!=null&&_(e,["parametersJsonSchema"],a);const c=p(n,["response"]);c!=null&&_(e,["response"],c);const d=p(n,["responseJsonSchema"]);return d!=null&&_(e,["responseJsonSchema"],d),e}function GO(n,e,t){const i={},o=p(e,["systemInstruction"]);t!==void 0&&o!=null&&_(t,["systemInstruction"],yf(bn(o)));const a=p(e,["temperature"]);a!=null&&_(i,["temperature"],a);const c=p(e,["topP"]);c!=null&&_(i,["topP"],c);const d=p(e,["topK"]);d!=null&&_(i,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&_(i,["candidateCount"],f);const h=p(e,["maxOutputTokens"]);h!=null&&_(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&_(i,["stopSequences"],v);const E=p(e,["responseLogprobs"]);E!=null&&_(i,["responseLogprobs"],E);const A=p(e,["logprobs"]);A!=null&&_(i,["logprobs"],A);const N=p(e,["presencePenalty"]);N!=null&&_(i,["presencePenalty"],N);const L=p(e,["frequencyPenalty"]);L!=null&&_(i,["frequencyPenalty"],L);const F=p(e,["seed"]);F!=null&&_(i,["seed"],F);const U=p(e,["responseMimeType"]);U!=null&&_(i,["responseMimeType"],U);const Q=p(e,["responseSchema"]);Q!=null&&_(i,["responseSchema"],Ry(Q));const H=p(e,["responseJsonSchema"]);if(H!=null&&_(i,["responseJsonSchema"],H),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=p(e,["safetySettings"]);if(t!==void 0&&z!=null){let V=z;Array.isArray(V)&&(V=V.map(x=>P4(x))),_(t,["safetySettings"],V)}const re=p(e,["tools"]);if(t!==void 0&&re!=null){let V=Nl(re);Array.isArray(V)&&(V=V.map(x=>L4(Rl(x)))),_(t,["tools"],V)}const ee=p(e,["toolConfig"]);if(t!==void 0&&ee!=null&&_(t,["toolConfig"],ee),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const he=p(e,["cachedContent"]);t!==void 0&&he!=null&&_(t,["cachedContent"],ar(n,he));const O=p(e,["responseModalities"]);O!=null&&_(i,["responseModalities"],O);const D=p(e,["mediaResolution"]);D!=null&&_(i,["mediaResolution"],D);const b=p(e,["speechConfig"]);if(b!=null&&_(i,["speechConfig"],Ny(b)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=p(e,["thinkingConfig"]);M!=null&&_(i,["thinkingConfig"],M);const k=p(e,["imageConfig"]);return k!=null&&_(i,["imageConfig"],k),i}function zO(n,e,t){const i={},o=p(e,["systemInstruction"]);t!==void 0&&o!=null&&_(t,["systemInstruction"],bn(o));const a=p(e,["temperature"]);a!=null&&_(i,["temperature"],a);const c=p(e,["topP"]);c!=null&&_(i,["topP"],c);const d=p(e,["topK"]);d!=null&&_(i,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&_(i,["candidateCount"],f);const h=p(e,["maxOutputTokens"]);h!=null&&_(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&_(i,["stopSequences"],v);const E=p(e,["responseLogprobs"]);E!=null&&_(i,["responseLogprobs"],E);const A=p(e,["logprobs"]);A!=null&&_(i,["logprobs"],A);const N=p(e,["presencePenalty"]);N!=null&&_(i,["presencePenalty"],N);const L=p(e,["frequencyPenalty"]);L!=null&&_(i,["frequencyPenalty"],L);const F=p(e,["seed"]);F!=null&&_(i,["seed"],F);const U=p(e,["responseMimeType"]);U!=null&&_(i,["responseMimeType"],U);const Q=p(e,["responseSchema"]);Q!=null&&_(i,["responseSchema"],Ry(Q));const H=p(e,["responseJsonSchema"]);H!=null&&_(i,["responseJsonSchema"],H);const z=p(e,["routingConfig"]);z!=null&&_(i,["routingConfig"],z);const re=p(e,["modelSelectionConfig"]);re!=null&&_(i,["modelConfig"],re);const ee=p(e,["safetySettings"]);if(t!==void 0&&ee!=null){let ne=ee;Array.isArray(ne)&&(ne=ne.map(pe=>pe)),_(t,["safetySettings"],ne)}const he=p(e,["tools"]);if(t!==void 0&&he!=null){let ne=Nl(he);Array.isArray(ne)&&(ne=ne.map(pe=>CI(Rl(pe)))),_(t,["tools"],ne)}const O=p(e,["toolConfig"]);t!==void 0&&O!=null&&_(t,["toolConfig"],O);const D=p(e,["labels"]);t!==void 0&&D!=null&&_(t,["labels"],D);const b=p(e,["cachedContent"]);t!==void 0&&b!=null&&_(t,["cachedContent"],ar(n,b));const M=p(e,["responseModalities"]);M!=null&&_(i,["responseModalities"],M);const k=p(e,["mediaResolution"]);k!=null&&_(i,["mediaResolution"],k);const V=p(e,["speechConfig"]);V!=null&&_(i,["speechConfig"],wI(Ny(V)));const x=p(e,["audioTimestamp"]);x!=null&&_(i,["audioTimestamp"],x);const we=p(e,["thinkingConfig"]);we!=null&&_(i,["thinkingConfig"],we);const Be=p(e,["imageConfig"]);return Be!=null&&_(i,["imageConfig"],Be),i}function eS(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let c=xi(o);Array.isArray(c)&&(c=c.map(d=>yf(d))),_(t,["contents"],c)}const a=p(e,["config"]);return a!=null&&_(t,["generationConfig"],GO(n,a,t)),t}function tS(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let c=xi(o);Array.isArray(c)&&(c=c.map(d=>d)),_(t,["contents"],c)}const a=p(e,["config"]);return a!=null&&_(t,["generationConfig"],zO(n,a,t)),t}function nS(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>pO(h))),_(e,["candidates"],f)}const o=p(n,["modelVersion"]);o!=null&&_(e,["modelVersion"],o);const a=p(n,["promptFeedback"]);a!=null&&_(e,["promptFeedback"],a);const c=p(n,["responseId"]);c!=null&&_(e,["responseId"],c);const d=p(n,["usageMetadata"]);return d!=null&&_(e,["usageMetadata"],d),e}function iS(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["candidates"],h)}const o=p(n,["createTime"]);o!=null&&_(e,["createTime"],o);const a=p(n,["modelVersion"]);a!=null&&_(e,["modelVersion"],a);const c=p(n,["promptFeedback"]);c!=null&&_(e,["promptFeedback"],c);const d=p(n,["responseId"]);d!=null&&_(e,["responseId"],d);const f=p(n,["usageMetadata"]);return f!=null&&_(e,["usageMetadata"],f),e}function jO(n,e){const t={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(n,["numberOfImages"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const o=p(n,["aspectRatio"]);e!==void 0&&o!=null&&_(e,["parameters","aspectRatio"],o);const a=p(n,["guidanceScale"]);if(e!==void 0&&a!=null&&_(e,["parameters","guidanceScale"],a),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=p(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&_(e,["parameters","safetySetting"],c);const d=p(n,["personGeneration"]);e!==void 0&&d!=null&&_(e,["parameters","personGeneration"],d);const f=p(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&_(e,["parameters","includeSafetyAttributes"],f);const h=p(n,["includeRaiReason"]);e!==void 0&&h!=null&&_(e,["parameters","includeRaiReason"],h);const v=p(n,["language"]);e!==void 0&&v!=null&&_(e,["parameters","language"],v);const E=p(n,["outputMimeType"]);e!==void 0&&E!=null&&_(e,["parameters","outputOptions","mimeType"],E);const A=p(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&_(e,["parameters","outputOptions","compressionQuality"],A),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=p(n,["imageSize"]);if(e!==void 0&&N!=null&&_(e,["parameters","sampleImageSize"],N),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function $O(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const o=p(n,["negativePrompt"]);e!==void 0&&o!=null&&_(e,["parameters","negativePrompt"],o);const a=p(n,["numberOfImages"]);e!==void 0&&a!=null&&_(e,["parameters","sampleCount"],a);const c=p(n,["aspectRatio"]);e!==void 0&&c!=null&&_(e,["parameters","aspectRatio"],c);const d=p(n,["guidanceScale"]);e!==void 0&&d!=null&&_(e,["parameters","guidanceScale"],d);const f=p(n,["seed"]);e!==void 0&&f!=null&&_(e,["parameters","seed"],f);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&_(e,["parameters","safetySetting"],h);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&_(e,["parameters","personGeneration"],v);const E=p(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&_(e,["parameters","includeSafetyAttributes"],E);const A=p(n,["includeRaiReason"]);e!==void 0&&A!=null&&_(e,["parameters","includeRaiReason"],A);const N=p(n,["language"]);e!==void 0&&N!=null&&_(e,["parameters","language"],N);const L=p(n,["outputMimeType"]);e!==void 0&&L!=null&&_(e,["parameters","outputOptions","mimeType"],L);const F=p(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&_(e,["parameters","outputOptions","compressionQuality"],F);const U=p(n,["addWatermark"]);e!==void 0&&U!=null&&_(e,["parameters","addWatermark"],U);const Q=p(n,["labels"]);e!==void 0&&Q!=null&&_(e,["labels"],Q);const H=p(n,["imageSize"]);e!==void 0&&H!=null&&_(e,["parameters","sampleImageSize"],H);const z=p(n,["enhancePrompt"]);return e!==void 0&&z!=null&&_(e,["parameters","enhancePrompt"],z),t}function YO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["prompt"]);o!=null&&_(t,["instances[0]","prompt"],o);const a=p(e,["config"]);return a!=null&&jO(a,t),t}function KO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["prompt"]);o!=null&&_(t,["instances[0]","prompt"],o);const a=p(e,["config"]);return a!=null&&$O(a,t),t}function JO(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>a4(c))),_(e,["generatedImages"],a)}const o=p(n,["positivePromptSafetyAttributes"]);return o!=null&&_(e,["positivePromptSafetyAttributes"],AI(o)),e}function QO(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>_f(c))),_(e,["generatedImages"],a)}const o=p(n,["positivePromptSafetyAttributes"]);return o!=null&&_(e,["positivePromptSafetyAttributes"],SI(o)),e}function WO(n,e){const t={},i=p(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=p(n,["durationSeconds"]);if(e!==void 0&&o!=null&&_(e,["parameters","durationSeconds"],o),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(n,["aspectRatio"]);e!==void 0&&a!=null&&_(e,["parameters","aspectRatio"],a);const c=p(n,["resolution"]);e!==void 0&&c!=null&&_(e,["parameters","resolution"],c);const d=p(n,["personGeneration"]);if(e!==void 0&&d!=null&&_(e,["parameters","personGeneration"],d),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=p(n,["negativePrompt"]);e!==void 0&&f!=null&&_(e,["parameters","negativePrompt"],f);const h=p(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&_(e,["parameters","enhancePrompt"],h),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=p(n,["lastFrame"]);e!==void 0&&v!=null&&_(e,["instances[0]","lastFrame"],vf(v));const E=p(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(N=>Q4(N))),_(e,["instances[0]","referenceImages"],A)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function XO(n,e){const t={},i=p(n,["numberOfVideos"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const o=p(n,["outputGcsUri"]);e!==void 0&&o!=null&&_(e,["parameters","storageUri"],o);const a=p(n,["fps"]);e!==void 0&&a!=null&&_(e,["parameters","fps"],a);const c=p(n,["durationSeconds"]);e!==void 0&&c!=null&&_(e,["parameters","durationSeconds"],c);const d=p(n,["seed"]);e!==void 0&&d!=null&&_(e,["parameters","seed"],d);const f=p(n,["aspectRatio"]);e!==void 0&&f!=null&&_(e,["parameters","aspectRatio"],f);const h=p(n,["resolution"]);e!==void 0&&h!=null&&_(e,["parameters","resolution"],h);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&_(e,["parameters","personGeneration"],v);const E=p(n,["pubsubTopic"]);e!==void 0&&E!=null&&_(e,["parameters","pubsubTopic"],E);const A=p(n,["negativePrompt"]);e!==void 0&&A!=null&&_(e,["parameters","negativePrompt"],A);const N=p(n,["enhancePrompt"]);e!==void 0&&N!=null&&_(e,["parameters","enhancePrompt"],N);const L=p(n,["generateAudio"]);e!==void 0&&L!=null&&_(e,["parameters","generateAudio"],L);const F=p(n,["lastFrame"]);e!==void 0&&F!=null&&_(e,["instances[0]","lastFrame"],Zi(F));const U=p(n,["referenceImages"]);if(e!==void 0&&U!=null){let z=U;Array.isArray(z)&&(z=z.map(re=>W4(re))),_(e,["instances[0]","referenceImages"],z)}const Q=p(n,["mask"]);e!==void 0&&Q!=null&&_(e,["instances[0]","mask"],J4(Q));const H=p(n,["compressionQuality"]);return e!==void 0&&H!=null&&_(e,["parameters","compressionQuality"],H),t}function ZO(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["metadata"]);i!=null&&_(e,["metadata"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);a!=null&&_(e,["error"],a);const c=p(n,["response","generateVideoResponse"]);return c!=null&&_(e,["response"],i4(c)),e}function e4(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["metadata"]);i!=null&&_(e,["metadata"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);a!=null&&_(e,["error"],a);const c=p(n,["response"]);return c!=null&&_(e,["response"],s4(c)),e}function t4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["prompt"]);o!=null&&_(t,["instances[0]","prompt"],o);const a=p(e,["image"]);a!=null&&_(t,["instances[0]","image"],vf(a));const c=p(e,["video"]);c!=null&&_(t,["instances[0]","video"],II(c));const d=p(e,["source"]);d!=null&&r4(d,t);const f=p(e,["config"]);return f!=null&&WO(f,t),t}function n4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["prompt"]);o!=null&&_(t,["instances[0]","prompt"],o);const a=p(e,["image"]);a!=null&&_(t,["instances[0]","image"],Zi(a));const c=p(e,["video"]);c!=null&&_(t,["instances[0]","video"],RI(c));const d=p(e,["source"]);d!=null&&o4(d,t);const f=p(e,["config"]);return f!=null&&XO(f,t),t}function i4(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>c4(c))),_(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&_(e,["raiMediaFilteredCount"],i);const o=p(n,["raiMediaFilteredReasons"]);return o!=null&&_(e,["raiMediaFilteredReasons"],o),e}function s4(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>u4(c))),_(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&_(e,["raiMediaFilteredCount"],i);const o=p(n,["raiMediaFilteredReasons"]);return o!=null&&_(e,["raiMediaFilteredReasons"],o),e}function r4(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const o=p(n,["image"]);e!==void 0&&o!=null&&_(e,["instances[0]","image"],vf(o));const a=p(n,["video"]);return e!==void 0&&a!=null&&_(e,["instances[0]","video"],II(a)),t}function o4(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const o=p(n,["image"]);e!==void 0&&o!=null&&_(e,["instances[0]","image"],Zi(o));const a=p(n,["video"]);return e!==void 0&&a!=null&&_(e,["instances[0]","video"],RI(a)),t}function a4(n){const e={},t=p(n,["_self"]);t!=null&&_(e,["image"],g4(t));const i=p(n,["raiFilteredReason"]);i!=null&&_(e,["raiFilteredReason"],i);const o=p(n,["_self"]);return o!=null&&_(e,["safetyAttributes"],AI(o)),e}function _f(n){const e={},t=p(n,["_self"]);t!=null&&_(e,["image"],EI(t));const i=p(n,["raiFilteredReason"]);i!=null&&_(e,["raiFilteredReason"],i);const o=p(n,["_self"]);o!=null&&_(e,["safetyAttributes"],SI(o));const a=p(n,["prompt"]);return a!=null&&_(e,["enhancedPrompt"],a),e}function l4(n){const e={},t=p(n,["_self"]);t!=null&&_(e,["mask"],EI(t));const i=p(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),_(e,["labels"],o)}return e}function c4(n){const e={},t=p(n,["video"]);return t!=null&&_(e,["video"],Y4(t)),e}function u4(n){const e={},t=p(n,["_self"]);return t!=null&&_(e,["video"],K4(t)),e}function d4(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&_(e,["modelConfig"],t);const i=p(n,["audioTimestamp"]);i!=null&&_(e,["audioTimestamp"],i);const o=p(n,["candidateCount"]);o!=null&&_(e,["candidateCount"],o);const a=p(n,["enableAffectiveDialog"]);a!=null&&_(e,["enableAffectiveDialog"],a);const c=p(n,["frequencyPenalty"]);c!=null&&_(e,["frequencyPenalty"],c);const d=p(n,["logprobs"]);d!=null&&_(e,["logprobs"],d);const f=p(n,["maxOutputTokens"]);f!=null&&_(e,["maxOutputTokens"],f);const h=p(n,["mediaResolution"]);h!=null&&_(e,["mediaResolution"],h);const v=p(n,["presencePenalty"]);v!=null&&_(e,["presencePenalty"],v);const E=p(n,["responseJsonSchema"]);E!=null&&_(e,["responseJsonSchema"],E);const A=p(n,["responseLogprobs"]);A!=null&&_(e,["responseLogprobs"],A);const N=p(n,["responseMimeType"]);N!=null&&_(e,["responseMimeType"],N);const L=p(n,["responseModalities"]);L!=null&&_(e,["responseModalities"],L);const F=p(n,["responseSchema"]);F!=null&&_(e,["responseSchema"],F);const U=p(n,["routingConfig"]);U!=null&&_(e,["routingConfig"],U);const Q=p(n,["seed"]);Q!=null&&_(e,["seed"],Q);const H=p(n,["speechConfig"]);H!=null&&_(e,["speechConfig"],wI(H));const z=p(n,["stopSequences"]);z!=null&&_(e,["stopSequences"],z);const re=p(n,["temperature"]);re!=null&&_(e,["temperature"],re);const ee=p(n,["thinkingConfig"]);ee!=null&&_(e,["thinkingConfig"],ee);const he=p(n,["topK"]);he!=null&&_(e,["topK"],he);const O=p(n,["topP"]);if(O!=null&&_(e,["topP"],O),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function h4(n,e){const t={},i=p(e,["model"]);return i!=null&&_(t,["_url","name"],rt(n,i)),t}function f4(n,e){const t={},i=p(e,["model"]);return i!=null&&_(t,["_url","name"],rt(n,i)),t}function p4(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function m4(n){const e={},t=p(n,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function g4(n){const e={},t=p(n,["bytesBase64Encoded"]);t!=null&&_(e,["imageBytes"],lo(t));const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function EI(n){const e={},t=p(n,["gcsUri"]);t!=null&&_(e,["gcsUri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&_(e,["imageBytes"],lo(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["mimeType"],o),e}function vf(n){const e={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=p(n,["imageBytes"]);t!=null&&_(e,["bytesBase64Encoded"],lo(t));const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function Zi(n){const e={},t=p(n,["gcsUri"]);t!=null&&_(e,["gcsUri"],t);const i=p(n,["imageBytes"]);i!=null&&_(e,["bytesBase64Encoded"],lo(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["mimeType"],o),e}function y4(n,e,t){const i={},o=p(e,["pageSize"]);t!==void 0&&o!=null&&_(t,["_query","pageSize"],o);const a=p(e,["pageToken"]);t!==void 0&&a!=null&&_(t,["_query","pageToken"],a);const c=p(e,["filter"]);t!==void 0&&c!=null&&_(t,["_query","filter"],c);const d=p(e,["queryBase"]);return t!==void 0&&d!=null&&_(t,["_url","models_url"],fI(n,d)),i}function _4(n,e,t){const i={},o=p(e,["pageSize"]);t!==void 0&&o!=null&&_(t,["_query","pageSize"],o);const a=p(e,["pageToken"]);t!==void 0&&a!=null&&_(t,["_query","pageToken"],a);const c=p(e,["filter"]);t!==void 0&&c!=null&&_(t,["_query","filter"],c);const d=p(e,["queryBase"]);return t!==void 0&&d!=null&&_(t,["_url","models_url"],fI(n,d)),i}function v4(n,e){const t={},i=p(e,["config"]);return i!=null&&y4(n,i,t),t}function T4(n,e){const t={},i=p(e,["config"]);return i!=null&&_4(n,i,t),t}function E4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["_self"]);if(o!=null){let a=pI(o);Array.isArray(a)&&(a=a.map(c=>vg(c))),_(e,["models"],a)}return e}function A4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["_self"]);if(o!=null){let a=pI(o);Array.isArray(a)&&(a=a.map(c=>Tg(c))),_(e,["models"],a)}return e}function S4(n){const e={},t=p(n,["maskMode"]);t!=null&&_(e,["maskMode"],t);const i=p(n,["segmentationClasses"]);i!=null&&_(e,["maskClasses"],i);const o=p(n,["maskDilation"]);return o!=null&&_(e,["dilation"],o),e}function vg(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["displayName"]);i!=null&&_(e,["displayName"],i);const o=p(n,["description"]);o!=null&&_(e,["description"],o);const a=p(n,["version"]);a!=null&&_(e,["version"],a);const c=p(n,["_self"]);c!=null&&_(e,["tunedModelInfo"],O4(c));const d=p(n,["inputTokenLimit"]);d!=null&&_(e,["inputTokenLimit"],d);const f=p(n,["outputTokenLimit"]);f!=null&&_(e,["outputTokenLimit"],f);const h=p(n,["supportedGenerationMethods"]);return h!=null&&_(e,["supportedActions"],h),e}function Tg(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["displayName"]);i!=null&&_(e,["displayName"],i);const o=p(n,["description"]);o!=null&&_(e,["description"],o);const a=p(n,["versionId"]);a!=null&&_(e,["version"],a);const c=p(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>qO(A))),_(e,["endpoints"],E)}const d=p(n,["labels"]);d!=null&&_(e,["labels"],d);const f=p(n,["_self"]);f!=null&&_(e,["tunedModelInfo"],F4(f));const h=p(n,["defaultCheckpointId"]);h!=null&&_(e,["defaultCheckpointId"],h);const v=p(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),_(e,["checkpoints"],E)}return e}function w4(n){const e={},t=p(n,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const i=p(n,["thought"]);i!=null&&_(e,["thought"],i);const o=p(n,["inlineData"]);o!=null&&_(e,["inlineData"],fO(o));const a=p(n,["fileData"]);a!=null&&_(e,["fileData"],BO(a));const c=p(n,["thoughtSignature"]);c!=null&&_(e,["thoughtSignature"],c);const d=p(n,["functionCall"]);d!=null&&_(e,["functionCall"],d);const f=p(n,["codeExecutionResult"]);f!=null&&_(e,["codeExecutionResult"],f);const h=p(n,["executableCode"]);h!=null&&_(e,["executableCode"],h);const v=p(n,["functionResponse"]);v!=null&&_(e,["functionResponse"],v);const E=p(n,["text"]);return E!=null&&_(e,["text"],E),e}function C4(n){const e={},t=p(n,["productImage"]);return t!=null&&_(e,["image"],Zi(t)),e}function I4(n,e){const t={},i=p(n,["numberOfImages"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const o=p(n,["baseSteps"]);e!==void 0&&o!=null&&_(e,["parameters","editConfig","baseSteps"],o);const a=p(n,["outputGcsUri"]);e!==void 0&&a!=null&&_(e,["parameters","storageUri"],a);const c=p(n,["seed"]);e!==void 0&&c!=null&&_(e,["parameters","seed"],c);const d=p(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&_(e,["parameters","safetySetting"],d);const f=p(n,["personGeneration"]);e!==void 0&&f!=null&&_(e,["parameters","personGeneration"],f);const h=p(n,["addWatermark"]);e!==void 0&&h!=null&&_(e,["parameters","addWatermark"],h);const v=p(n,["outputMimeType"]);e!==void 0&&v!=null&&_(e,["parameters","outputOptions","mimeType"],v);const E=p(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&_(e,["parameters","outputOptions","compressionQuality"],E);const A=p(n,["enhancePrompt"]);e!==void 0&&A!=null&&_(e,["parameters","enhancePrompt"],A);const N=p(n,["labels"]);return e!==void 0&&N!=null&&_(e,["labels"],N),t}function R4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["source"]);o!=null&&x4(o,t);const a=p(e,["config"]);return a!=null&&I4(a,t),t}function N4(n){const e={},t=p(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>_f(o))),_(e,["generatedImages"],i)}return e}function x4(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const o=p(n,["personImage"]);e!==void 0&&o!=null&&_(e,["instances[0]","personImage","image"],Zi(o));const a=p(n,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>C4(d))),_(e,["instances[0]","productImages"],c)}return t}function b4(n){const e={},t=p(n,["referenceImage"]);t!=null&&_(e,["referenceImage"],Zi(t));const i=p(n,["referenceId"]);i!=null&&_(e,["referenceId"],i);const o=p(n,["referenceType"]);o!=null&&_(e,["referenceType"],o);const a=p(n,["maskImageConfig"]);a!=null&&_(e,["maskImageConfig"],S4(a));const c=p(n,["controlImageConfig"]);c!=null&&_(e,["controlImageConfig"],TO(c));const d=p(n,["styleImageConfig"]);d!=null&&_(e,["styleImageConfig"],d);const f=p(n,["subjectImageConfig"]);return f!=null&&_(e,["subjectImageConfig"],f),e}function AI(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&_(e,["categories"],t);const i=p(n,["safetyAttributes","scores"]);i!=null&&_(e,["scores"],i);const o=p(n,["contentType"]);return o!=null&&_(e,["contentType"],o),e}function SI(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&_(e,["categories"],t);const i=p(n,["safetyAttributes","scores"]);i!=null&&_(e,["scores"],i);const o=p(n,["contentType"]);return o!=null&&_(e,["contentType"],o),e}function P4(n){const e={};if(p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=p(n,["category"]);t!=null&&_(e,["category"],t);const i=p(n,["threshold"]);return i!=null&&_(e,["threshold"],i),e}function D4(n){const e={},t=p(n,["image"]);return t!=null&&_(e,["image"],Zi(t)),e}function M4(n,e){const t={},i=p(n,["mode"]);e!==void 0&&i!=null&&_(e,["parameters","mode"],i);const o=p(n,["maxPredictions"]);e!==void 0&&o!=null&&_(e,["parameters","maxPredictions"],o);const a=p(n,["confidenceThreshold"]);e!==void 0&&a!=null&&_(e,["parameters","confidenceThreshold"],a);const c=p(n,["maskDilation"]);e!==void 0&&c!=null&&_(e,["parameters","maskDilation"],c);const d=p(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&_(e,["parameters","binaryColorThreshold"],d);const f=p(n,["labels"]);return e!==void 0&&f!=null&&_(e,["labels"],f),t}function k4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["source"]);o!=null&&U4(o,t);const a=p(e,["config"]);return a!=null&&M4(a,t),t}function V4(n){const e={},t=p(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>l4(o))),_(e,["generatedMasks"],i)}return e}function U4(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const o=p(n,["image"]);e!==void 0&&o!=null&&_(e,["instances[0]","image"],Zi(o));const a=p(n,["scribbleImage"]);return e!==void 0&&a!=null&&_(e,["instances[0]","scribble"],D4(a)),t}function wI(n){const e={},t=p(n,["voiceConfig"]);if(t!=null&&_(e,["voiceConfig"],t),p(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=p(n,["languageCode"]);return i!=null&&_(e,["languageCode"],i),e}function L4(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearch"]);i!=null&&_(e,["googleSearch"],m4(i));const o=p(n,["googleSearchRetrieval"]);if(o!=null&&_(e,["googleSearchRetrieval"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["googleMaps"]);a!=null&&_(e,["googleMaps"],p4(a));const c=p(n,["urlContext"]);c!=null&&_(e,["urlContext"],c);const d=p(n,["computerUse"]);d!=null&&_(e,["computerUse"],d);const f=p(n,["codeExecution"]);return f!=null&&_(e,["codeExecution"],f),e}function CI(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>HO(A))),_(e,["functionDeclarations"],E)}const i=p(n,["retrieval"]);i!=null&&_(e,["retrieval"],i);const o=p(n,["googleSearch"]);o!=null&&_(e,["googleSearch"],o);const a=p(n,["googleSearchRetrieval"]);a!=null&&_(e,["googleSearchRetrieval"],a);const c=p(n,["enterpriseWebSearch"]);c!=null&&_(e,["enterpriseWebSearch"],c);const d=p(n,["googleMaps"]);d!=null&&_(e,["googleMaps"],d);const f=p(n,["urlContext"]);f!=null&&_(e,["urlContext"],f);const h=p(n,["computerUse"]);h!=null&&_(e,["computerUse"],h);const v=p(n,["codeExecution"]);return v!=null&&_(e,["codeExecution"],v),e}function O4(n){const e={},t=p(n,["baseModel"]);t!=null&&_(e,["baseModel"],t);const i=p(n,["createTime"]);i!=null&&_(e,["createTime"],i);const o=p(n,["updateTime"]);return o!=null&&_(e,["updateTime"],o),e}function F4(n){const e={},t=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&_(e,["baseModel"],t);const i=p(n,["createTime"]);i!=null&&_(e,["createTime"],i);const o=p(n,["updateTime"]);return o!=null&&_(e,["updateTime"],o),e}function q4(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const o=p(n,["description"]);e!==void 0&&o!=null&&_(e,["description"],o);const a=p(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&_(e,["defaultCheckpointId"],a),t}function B4(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const o=p(n,["description"]);e!==void 0&&o!=null&&_(e,["description"],o);const a=p(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&_(e,["defaultCheckpointId"],a),t}function H4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","name"],rt(n,i));const o=p(e,["config"]);return o!=null&&q4(o,t),t}function G4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["config"]);return o!=null&&B4(o,t),t}function z4(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const o=p(n,["includeRaiReason"]);e!==void 0&&o!=null&&_(e,["parameters","includeRaiReason"],o);const a=p(n,["outputMimeType"]);e!==void 0&&a!=null&&_(e,["parameters","outputOptions","mimeType"],a);const c=p(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&_(e,["parameters","outputOptions","compressionQuality"],c);const d=p(n,["enhanceInputImage"]);e!==void 0&&d!=null&&_(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=p(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&_(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=p(n,["labels"]);e!==void 0&&h!=null&&_(e,["labels"],h);const v=p(n,["numberOfImages"]);e!==void 0&&v!=null&&_(e,["parameters","sampleCount"],v);const E=p(n,["mode"]);return e!==void 0&&E!=null&&_(e,["parameters","mode"],E),t}function j4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["image"]);o!=null&&_(t,["instances[0]","image"],Zi(o));const a=p(e,["upscaleFactor"]);a!=null&&_(t,["parameters","upscaleConfig","upscaleFactor"],a);const c=p(e,["config"]);return c!=null&&z4(c,t),t}function $4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_f(a))),_(e,["generatedImages"],o)}return e}function Y4(n){const e={},t=p(n,["uri"]);t!=null&&_(e,["uri"],t);const i=p(n,["encodedVideo"]);i!=null&&_(e,["videoBytes"],lo(i));const o=p(n,["encoding"]);return o!=null&&_(e,["mimeType"],o),e}function K4(n){const e={},t=p(n,["gcsUri"]);t!=null&&_(e,["uri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&_(e,["videoBytes"],lo(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["mimeType"],o),e}function J4(n){const e={},t=p(n,["image"]);t!=null&&_(e,["_self"],Zi(t));const i=p(n,["maskMode"]);return i!=null&&_(e,["maskMode"],i),e}function Q4(n){const e={},t=p(n,["image"]);t!=null&&_(e,["image"],vf(t));const i=p(n,["referenceType"]);return i!=null&&_(e,["referenceType"],i),e}function W4(n){const e={},t=p(n,["image"]);t!=null&&_(e,["image"],Zi(t));const i=p(n,["referenceType"]);return i!=null&&_(e,["referenceType"],i),e}function II(n){const e={},t=p(n,["uri"]);t!=null&&_(e,["uri"],t);const i=p(n,["videoBytes"]);i!=null&&_(e,["encodedVideo"],lo(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["encoding"],o),e}function RI(n){const e={},t=p(n,["uri"]);t!=null&&_(e,["gcsUri"],t);const i=p(n,["videoBytes"]);i!=null&&_(e,["bytesBase64Encoded"],lo(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X4="Content-Type",Z4="X-Server-Timeout",e6="User-Agent",Eg="x-goog-api-client",t6="1.27.0",n6=`google-genai-sdk/${t6}`,i6="v1beta1",s6="v1beta",sS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class r6{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:i6,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:s6,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))o.searchParams.append(c,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,c=a.signal;if(t.timeout&&t?.timeout>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=c}return t&&t.extraBody!==null&&o6(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await rS(o),new gg(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await rS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return ul(this,arguments,function*(){const o=(t=e?.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:f}=yield It(o.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(f,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),N=A.status,L=A.code,F=`got status: ${N}. ${JSON.stringify(E)}`;if(L>=400&&L<600)throw new gf({message:F,status:L})}}catch(E){if(E.name==="ApiError")throw E}c+=h;let v=c.match(sS);for(;v;){const E=v[1];try{const A=new Response(E,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield It(new gg(A)),c=c.slice(v[0].length),v=c.match(sS)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=n6+" "+this.clientOptions.userAgentExtra;return e[e6]=t,e[Eg]=t,e[X4]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(Z4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);o.sizeBytes=String(c.size);const d=(i=t?.mimeType)!==null&&i!==void 0?i:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const f=await this.fetchUploadUrl(o,t);return a.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let o={};t?.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},c=await this.request({path:Se("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:o});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(i=c?.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function rS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new gf({message:o,status:t}):new Error(o)}}function o6(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,c){const d=Object.assign({},a);for(const f in c)if(Object.prototype.hasOwnProperty.call(c,f)){const h=c[f],v=d[f];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?d[f]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),d[f]=h)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a6="mcp_used/unknown";let l6=!1;function NI(n){for(const e of n)if(c6(e)||typeof e=="object"&&"inputSchema"in e)return!0;return l6}function xI(n){var e;const t=(e=n[Eg])!==null&&e!==void 0?e:"";n[Eg]=(t+` ${a6}`).trimStart()}function c6(n){return n!==null&&typeof n=="object"&&n instanceof by}function u6(n,e=100){return ul(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield It(n.listTools({cursor:i}));for(const c of a.tools)yield yield It(c),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class by{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new by(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},c=[];for(const v of this.mcpClients)try{for(var d=!0,f=(t=void 0,tu(u6(v))),h;h=await f.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const E=o;c.push(E);const A=E.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),mU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function d6(n,e,t){const i=new aU;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class h6{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=m6(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const v=new Promise(z=>{h=z}),E=e.callbacks,A=function(){h({})},N=this.apiClient,L={onopen:A,onmessage:z=>{d6(N,E.onmessage,z)},onerror:(t=E?.onerror)!==null&&t!==void 0?t:function(z){},onclose:(i=E?.onclose)!==null&&i!==void 0?i:function(z){}},F=this.webSocketFactory.create(f,p6(c),L);F.connect(),await v;const H={setup:{model:rt(this.apiClient,e.model)}};return F.send(JSON.stringify(H)),new f6(F,this.apiClient)}}class f6{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=sO(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=iO(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(tl.PLAY)}pause(){this.sendPlaybackControl(tl.PAUSE)}stop(){this.sendPlaybackControl(tl.STOP)}resetContext(){this.sendPlaybackControl(tl.RESET_CONTEXT)}close(){this.conn.close()}}function p6(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function m6(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function y6(n,e,t){const i=new oU;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const c=aO(a);Object.assign(i,c)}else Object.assign(i,a);e(i)}class _6{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new h6(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&NI(e.config.tools)&&xI(E);const A=A6(E);if(this.apiClient.isVertexAI())v=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,v);else{const b=this.apiClient.getApiKey();let M="BidiGenerateContent",k="key";b?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",k="access_token"),v=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${M}?${k}=${b}`}let N=()=>{};const L=new Promise(b=>{N=b}),F=e.callbacks,U=function(){var b;(b=F?.onopen)===null||b===void 0||b.call(F),N({})},Q=this.apiClient,H={onopen:U,onmessage:b=>{y6(Q,F.onmessage,b)},onerror:(t=F?.onerror)!==null&&t!==void 0?t:function(b){},onclose:(i=F?.onclose)!==null&&i!==void 0?i:function(b){}},z=this.webSocketFactory.create(v,E6(A),H);z.connect(),await L;let re=rt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const b=this.apiClient.getProject(),M=this.apiClient.getLocation();re=`projects/${b}/locations/${M}/`+re}let ee={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Fh.AUDIO]}:e.config.responseModalities=[Fh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const he=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],O=[];for(const b of he)if(this.isCallableTool(b)){const M=b;O.push(await M.tool())}else O.push(b);O.length>0&&(e.config.tools=O);const D={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ee=nO(this.apiClient,D):ee=tO(this.apiClient,D),delete ee.config,z.send(JSON.stringify(ee)),new T6(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const v6={turnComplete:!0};class T6{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=xi(t.turns),e.isVertexAI()||(i=i.map(o=>yf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(g6)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},v6),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:oO(e)}:t={realtimeInput:rO(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function E6(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function A6(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oS=10;function aS(n){var e,t,i;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n?.tools)!==null&&t!==void 0?t:[])if(dl(c)){o=!0;break}if(!o)return!0;const a=(i=n?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function dl(n){return"callTool"in n&&typeof n.callTool=="function"}function S6(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>dl(o)))!==null&&i!==void 0?i:!1}function w6(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!dl(o)))!==null&&i!==void 0?i:!1}function lS(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C6 extends la{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,c,d;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!S6(t)||aS(t.config))return await this.generateContentInternal(f);if(w6(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,v;const E=xi(f.contents),A=(a=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:oS;let N=0;for(;N<A&&(h=await this.generateContentInternal(f),!(!h.functionCalls||h.functionCalls.length===0));){const L=h.candidates[0].content,F=[];for(const U of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(dl(U)){const H=await U.callTool(h.functionCalls);F.push(...H)}N++,v={role:"user",parts:F},f.contents=xi(f.contents),f.contents.push(L),f.contents.push(v),lS(f.config)&&(E.push(L),E.push(v))}return lS(f.config)&&(h.automaticFunctionCallingHistory=E),h},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),aS(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const c=[];if(i?.generatedImages)for(const f of i.generatedImages)f&&f?.safetyAttributes&&((o=f?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=f?.safetyAttributes:c.push(f);let d;return a?d={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Nu(na.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,c,d,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(a=t.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((f=(d=t.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const c=await Promise.all(a.map(async f=>dl(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&NI(e.config.tools)){const f=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),xI(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const c of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(dl(c)){const d=c,f=await d.tool();for(const h of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:oS;let c=!1,d=0;const f=await this.initAfcToolsMap(e);return(function(h,v,E){var A,N;return ul(this,arguments,function*(){for(var L,F,U,Q;d<a;){c&&(d++,c=!1);const ee=yield It(h.processParamsMaybeAddMcpUsage(E)),he=yield It(h.generateContentStreamInternal(ee)),O=[],D=[];try{for(var H=!0,z=(F=void 0,tu(he)),re;re=yield It(z.next()),L=re.done,!L;H=!0){Q=re.value,H=!1;const b=Q;if(yield yield It(b),b.candidates&&(!((A=b.candidates[0])===null||A===void 0)&&A.content)){D.push(b.candidates[0].content);for(const M of(N=b.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(d<a&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(M.functionCall.name)){const k=yield It(v.get(M.functionCall.name).callTool([M.functionCall]));O.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(b){F={error:b}}finally{try{!H&&!L&&(U=z.return)&&(yield It(U.call(z)))}finally{if(F)throw F.error}}if(O.length>0){c=!0;const b=new kc;b.candidates=[{content:{role:"user",parts:O}}],yield yield It(b);const M=[];M.push(...D),M.push({role:"user",parts:O});const k=xi(E.contents).concat(M);E.contents=k}else break}})})(this,f,e)}async generateContentInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=tS(this.apiClient,e);return d=Se("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=iS(v),A=new kc;return Object.assign(A,E),A})}else{const h=eS(this.apiClient,e);return d=Se("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=nS(v),A=new kc;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=tS(this.apiClient,e);return d=Se("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(E){return ul(this,arguments,function*(){var A,N,L,F;try{for(var U=!0,Q=tu(E),H;H=yield It(Q.next()),A=H.done,!A;U=!0){F=H.value,U=!1;const z=F,re=iS(yield It(z.json()));re.sdkHttpResponse={headers:z.headers};const ee=new kc;Object.assign(ee,re),yield yield It(ee)}}catch(z){N={error:z}}finally{try{!U&&!A&&(L=Q.return)&&(yield It(L.call(Q)))}finally{if(N)throw N.error}}})})}else{const h=eS(this.apiClient,e);return d=Se("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(E){return ul(this,arguments,function*(){var A,N,L,F;try{for(var U=!0,Q=tu(E),H;H=yield It(Q.next()),A=H.done,!A;U=!0){F=H.value,U=!1;const z=F,re=nS(yield It(z.json()));re.sdkHttpResponse={headers:z.headers};const ee=new kc;Object.assign(ee,re),yield yield It(ee)}}catch(z){N={error:z}}finally{try{!U&&!A&&(L=Q.return)&&(yield It(L.call(Q)))}finally{if(N)throw N.error}}})})}}async embedContent(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=LO(this.apiClient,e);return d=Se("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=FO(v),A=new OA;return Object.assign(A,E),A})}else{const h=UO(this.apiClient,e);return d=Se("{model}:batchEmbedContents",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=OO(v),A=new OA;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=KO(this.apiClient,e);return d=Se("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=QO(v),A=new FA;return Object.assign(A,E),A})}else{const h=YO(this.apiClient,e);return d=Se("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=JO(v),A=new FA;return Object.assign(A,E),A})}}async editImageInternal(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=DO(this.apiClient,e);return a=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const h=MO(f),v=new XV;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=j4(this.apiClient,e);return a=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const h=$4(f),v=new ZV;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=R4(this.apiClient,e);return a=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=N4(f),v=new eU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=k4(this.apiClient,e);return a=Se("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=V4(f),v=new tU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=f4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Tg(v))}else{const h=h4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>vg(v))}}async listInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=T4(this.apiClient,e);return d=Se("{models_url}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=A4(v),A=new qA;return Object.assign(A,E),A})}else{const h=v4(this.apiClient,e);return d=Se("{models_url}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=E4(v),A=new qA;return Object.assign(A,E),A})}}async update(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=G4(this.apiClient,e);return d=Se("{model}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Tg(v))}else{const h=H4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>vg(v))}}async delete(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=NO(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=bO(v),A=new BA;return Object.assign(A,E),A})}else{const h=RO(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=xO(v),A=new BA;return Object.assign(A,E),A})}}async countTokens(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=wO(this.apiClient,e);return d=Se("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=IO(v),A=new HA;return Object.assign(A,E),A})}else{const h=SO(this.apiClient,e);return d=Se("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=CO(v),A=new HA;return Object.assign(A,E),A})}}async computeTokens(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=gO(this.apiClient,e);return a=Se("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const h=yO(f),v=new nU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=n4(this.apiClient,e);return d=Se("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>{const E=e4(v),A=new qh;return Object.assign(A,E),A})}else{const h=t4(this.apiClient,e);return d=Se("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const E=ZO(v),A=new qh;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I6 extends la{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=JV(e);return d=Se("{operationName}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c}else{const h=KV(e);return d=Se("{operationName}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=BV(e);return a=Se("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R6(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["data"]);t!=null&&_(e,["data"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function N6(n){const e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>U6(a))),_(e,["parts"],o)}const i=p(n,["role"]);return i!=null&&_(e,["role"],i),e}function x6(n,e,t){const i={},o=p(e,["expireTime"]);t!==void 0&&o!=null&&_(t,["expireTime"],o);const a=p(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&_(t,["newSessionExpireTime"],a);const c=p(e,["uses"]);t!==void 0&&c!=null&&_(t,["uses"],c);const d=p(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&_(t,["bidiGenerateContentSetup"],V6(n,d));const f=p(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&_(t,["fieldMask"],f),i}function b6(n,e){const t={},i=p(e,["config"]);return i!=null&&_(t,["config"],x6(n,i,t)),t}function P6(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function D6(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function M6(n){const e={},t=p(n,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function k6(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig"],i);const o=p(n,["responseModalities"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","responseModalities"],o);const a=p(n,["temperature"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","temperature"],a);const c=p(n,["topP"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topP"],c);const d=p(n,["topK"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","mediaResolution"],h);const v=p(n,["seed"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","seed"],v);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&_(e,["setup","generationConfig","speechConfig"],xy(E));const A=p(n,["thinkingConfig"]);e!==void 0&&A!=null&&_(e,["setup","generationConfig","thinkingConfig"],A);const N=p(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],N);const L=p(n,["systemInstruction"]);e!==void 0&&L!=null&&_(e,["setup","systemInstruction"],N6(bn(L)));const F=p(n,["tools"]);if(e!==void 0&&F!=null){let he=Nl(F);Array.isArray(he)&&(he=he.map(O=>O6(Rl(O)))),_(e,["setup","tools"],he)}const U=p(n,["sessionResumption"]);e!==void 0&&U!=null&&_(e,["setup","sessionResumption"],L6(U));const Q=p(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&_(e,["setup","inputAudioTranscription"],Q);const H=p(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&_(e,["setup","outputAudioTranscription"],H);const z=p(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&_(e,["setup","realtimeInputConfig"],z);const re=p(n,["contextWindowCompression"]);e!==void 0&&re!=null&&_(e,["setup","contextWindowCompression"],re);const ee=p(n,["proactivity"]);return e!==void 0&&ee!=null&&_(e,["setup","proactivity"],ee),t}function V6(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["setup","model"],rt(n,i));const o=p(e,["config"]);return o!=null&&_(t,["config"],k6(o,t)),t}function U6(n){const e={},t=p(n,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const i=p(n,["thought"]);i!=null&&_(e,["thought"],i);const o=p(n,["inlineData"]);o!=null&&_(e,["inlineData"],R6(o));const a=p(n,["fileData"]);a!=null&&_(e,["fileData"],P6(a));const c=p(n,["thoughtSignature"]);c!=null&&_(e,["thoughtSignature"],c);const d=p(n,["functionCall"]);d!=null&&_(e,["functionCall"],d);const f=p(n,["codeExecutionResult"]);f!=null&&_(e,["codeExecutionResult"],f);const h=p(n,["executableCode"]);h!=null&&_(e,["executableCode"],h);const v=p(n,["functionResponse"]);v!=null&&_(e,["functionResponse"],v);const E=p(n,["text"]);return E!=null&&_(e,["text"],E),e}function L6(n){const e={},t=p(n,["handle"]);if(t!=null&&_(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function O6(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearch"]);i!=null&&_(e,["googleSearch"],M6(i));const o=p(n,["googleSearchRetrieval"]);if(o!=null&&_(e,["googleSearchRetrieval"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["googleMaps"]);a!=null&&_(e,["googleMaps"],D6(a));const c=p(n,["urlContext"]);c!=null&&_(e,["urlContext"],c);const d=p(n,["computerUse"]);d!=null&&_(e,["computerUse"],d);const f=p(n,["codeExecution"]);return f!=null&&_(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F6(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function q6(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=F6(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?n.fieldMask=a:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>c.includes(h)?`generationConfig.${h}`:h));const f=[];a&&f.push(a),d.length>0&&f.push(...d),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class B6 extends la{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=b6(this.apiClient,e);a=Se("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=q6(d,e.config);return o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H6(n,e){const t={},i=p(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function G6(n,e){const t={},i=p(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function z6(n,e,t){const i={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=p(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&_(e,["displayName"],o),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(n,["epochCount"]);e!==void 0&&a!=null&&_(e,["tuningTask","hyperparameters","epochCount"],a);const c=p(n,["learningRateMultiplier"]);if(c!=null&&_(i,["tuningTask","hyperparameters","learningRateMultiplier"],c),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=p(n,["batchSize"]);e!==void 0&&d!=null&&_(e,["tuningTask","hyperparameters","batchSize"],d);const f=p(n,["learningRate"]);if(e!==void 0&&f!=null&&_(e,["tuningTask","hyperparameters","learningRate"],f),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return i}function j6(n,e,t){const i={},o=p(n,["validationDataset"]);e!==void 0&&o!=null&&_(e,["supervisedTuningSpec"],o3(o));const a=p(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&_(e,["tunedModelDisplayName"],a);const c=p(n,["description"]);e!==void 0&&c!=null&&_(e,["description"],c);const d=p(n,["epochCount"]);e!==void 0&&d!=null&&_(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const f=p(n,["learningRateMultiplier"]);e!==void 0&&f!=null&&_(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const h=p(n,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&_(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h);const v=p(n,["adapterSize"]);if(e!==void 0&&v!=null&&_(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v),p(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=p(n,["labels"]);return e!==void 0&&E!=null&&_(e,["labels"],E),i}function $6(n,e){const t={},i=p(n,["baseModel"]);i!=null&&_(t,["baseModel"],i);const o=p(n,["preTunedModel"]);o!=null&&_(t,["preTunedModel"],o);const a=p(n,["trainingDataset"]);a!=null&&_(t,["tuningTask","trainingData"],i3(a));const c=p(n,["config"]);return c!=null&&z6(c,t),t}function Y6(n,e){const t={},i=p(n,["baseModel"]);i!=null&&_(t,["baseModel"],i);const o=p(n,["preTunedModel"]);o!=null&&_(t,["preTunedModel"],o);const a=p(n,["trainingDataset"]);a!=null&&s3(a,t);const c=p(n,["config"]);return c!=null&&j6(c,t),t}function K6(n,e){const t={},i=p(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function J6(n,e){const t={},i=p(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function Q6(n,e,t){const i={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&_(e,["_query","pageSize"],o);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&_(e,["_query","pageToken"],a);const c=p(n,["filter"]);return e!==void 0&&c!=null&&_(e,["_query","filter"],c),i}function W6(n,e,t){const i={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&_(e,["_query","pageSize"],o);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&_(e,["_query","pageToken"],a);const c=p(n,["filter"]);return e!==void 0&&c!=null&&_(e,["_query","filter"],c),i}function X6(n,e){const t={},i=p(n,["config"]);return i!=null&&Q6(i,t),t}function Z6(n,e){const t={},i=p(n,["config"]);return i!=null&&W6(i,t),t}function e3(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const o=p(n,["nextPageToken"]);o!=null&&_(t,["nextPageToken"],o);const a=p(n,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>bI(d))),_(t,["tuningJobs"],c)}return t}function t3(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const o=p(n,["nextPageToken"]);o!=null&&_(t,["nextPageToken"],o);const a=p(n,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>Ag(d))),_(t,["tuningJobs"],c)}return t}function n3(n,e){const t={},i=p(n,["name"]);i!=null&&_(t,["model"],i);const o=p(n,["name"]);return o!=null&&_(t,["endpoint"],o),t}function i3(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),_(t,["examples","examples"],o)}return t}function s3(n,e,t){const i={},o=p(n,["gcsUri"]);e!==void 0&&o!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],o);const a=p(n,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],a),p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function bI(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const o=p(n,["name"]);o!=null&&_(t,["name"],o);const a=p(n,["state"]);a!=null&&_(t,["state"],dI(a));const c=p(n,["createTime"]);c!=null&&_(t,["createTime"],c);const d=p(n,["tuningTask","startTime"]);d!=null&&_(t,["startTime"],d);const f=p(n,["tuningTask","completeTime"]);f!=null&&_(t,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&_(t,["updateTime"],h);const v=p(n,["description"]);v!=null&&_(t,["description"],v);const E=p(n,["baseModel"]);E!=null&&_(t,["baseModel"],E);const A=p(n,["_self"]);return A!=null&&_(t,["tunedModel"],n3(A)),t}function Ag(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const o=p(n,["name"]);o!=null&&_(t,["name"],o);const a=p(n,["state"]);a!=null&&_(t,["state"],dI(a));const c=p(n,["createTime"]);c!=null&&_(t,["createTime"],c);const d=p(n,["startTime"]);d!=null&&_(t,["startTime"],d);const f=p(n,["endTime"]);f!=null&&_(t,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&_(t,["updateTime"],h);const v=p(n,["error"]);v!=null&&_(t,["error"],v);const E=p(n,["description"]);E!=null&&_(t,["description"],E);const A=p(n,["baseModel"]);A!=null&&_(t,["baseModel"],A);const N=p(n,["tunedModel"]);N!=null&&_(t,["tunedModel"],N);const L=p(n,["preTunedModel"]);L!=null&&_(t,["preTunedModel"],L);const F=p(n,["supervisedTuningSpec"]);F!=null&&_(t,["supervisedTuningSpec"],F);const U=p(n,["tuningDataStats"]);U!=null&&_(t,["tuningDataStats"],U);const Q=p(n,["encryptionSpec"]);Q!=null&&_(t,["encryptionSpec"],Q);const H=p(n,["partnerModelTuningSpec"]);H!=null&&_(t,["partnerModelTuningSpec"],H);const z=p(n,["customBaseModel"]);z!=null&&_(t,["customBaseModel"],z);const re=p(n,["experiment"]);re!=null&&_(t,["experiment"],re);const ee=p(n,["labels"]);ee!=null&&_(t,["labels"],ee);const he=p(n,["outputUri"]);he!=null&&_(t,["outputUri"],he);const O=p(n,["pipelineJob"]);O!=null&&_(t,["pipelineJob"],O);const D=p(n,["serviceAccount"]);D!=null&&_(t,["serviceAccount"],D);const b=p(n,["tunedModelDisplayName"]);b!=null&&_(t,["tunedModelDisplayName"],b);const M=p(n,["veoTuningSpec"]);return M!=null&&_(t,["veoTuningSpec"],M),t}function r3(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const o=p(n,["name"]);o!=null&&_(t,["name"],o);const a=p(n,["metadata"]);a!=null&&_(t,["metadata"],a);const c=p(n,["done"]);c!=null&&_(t,["done"],c);const d=p(n,["error"]);return d!=null&&_(t,["error"],d),t}function o3(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&_(t,["validationDatasetUri"],i);const o=p(n,["vertexDatasetResource"]);return o!=null&&_(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a3 extends la{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Nu(na.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:mg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=J6(e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>Ag(v))}else{const h=K6(e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>bI(v))}}async listInternal(e){var t,i,o,a;let c,d="",f={};if(this.apiClient.isVertexAI()){const h=Z6(e);return d=Se("tuningJobs",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=t3(v),A=new GA;return Object.assign(A,E),A})}else{const h=X6(e);return d=Se("tunedModels",h._url),f=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=e3(v),A=new GA;return Object.assign(A,E),A})}}async cancel(e){var t,i,o,a;let c="",d={};if(this.apiClient.isVertexAI()){const f=G6(e);c=Se("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=H6(e);c=Se("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=Y6(e);return a=Se("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>Ag(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$6(e);return a=Se("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>r3(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const c3=1024*1024*8,u3=3,d3=1e3,h3=2,Lm="x-goog-upload-status";async function f3(n,e,t){var i,o,a;let c=0,d=0,f=new gg(new Response),h="upload";for(c=n.size;d<c;){const E=Math.min(c3,c-d),A=n.slice(d,d+E);d+E>=c&&(h+=", finalize");let N=0,L=d3;for(;N<u3&&(f=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(d),"Content-Length":String(E)}}}),!(!((i=f?.headers)===null||i===void 0)&&i[Lm]));)N++,await m3(L),L=L*h3;if(d+=E,((o=f?.headers)===null||o===void 0?void 0:o[Lm])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await f?.json();if(((a=f?.headers)===null||a===void 0?void 0:a[Lm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function p3(n){return{size:n.size,type:n.type}}function m3(n){return new Promise(e=>setTimeout(e,n))}class g3{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await f3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await p3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y3{create(e,t,i){return new _3(e,t,i)}}class _3{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cS="x-goog-api-key";class v3{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(cS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(cS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T3="gl-node/";class E3{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=FV(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new v3(this.apiKey);this.apiClient=new r6({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:T3+"web",uploader:new g3,downloader:new l3}),this.models=new C6(this.apiClient),this.live=new _6(this.apiClient,o,new y3),this.batches=new sL(this.apiClient),this.chats=new UL(this.models,this.apiClient),this.caches=new ML(this.apiClient),this.files=new $L(this.apiClient),this.operations=new I6(this.apiClient),this.authTokens=new B6(this.apiClient),this.tunings=new a3(this.apiClient)}}const Tf=new E3({apiKey:"AIzaSyAVBBw2bRGN8JUjZZyfjYIScdpwv6pGx9c"});async function A3(n,e){try{const i=`You are a product name translator for a quick commerce app in India.

Available products (format: id: name (telugu, hindi)):
${e.map(d=>`${d.id}: ${d.name} (${d.teluguName}, ${d.hindiName})`).join(`
`)}

User input: "${n}"

Task: Extract product names, quantities, and units from the user's input. The input may be in Telugu, English, Hindi, or Hinglish.

Match the input to products in the database using:
- Exact matches
- Synonyms (e.g., "dal" = "pappu" = "lentils")
- Telugu names (e.g., "" = "Milk", "" = "Onion")
- Common misspellings

Return a JSON array with this structure:
[
  {
    "productId": "product_id_from_database",
    "productName": "standardized product name",
    "quantity": number or null,
    "unit": "kg/litre/piece/packet" or null,
    "confidence": 0.0 to 1.0
  }
]

If no products match, return an empty array [].
Only return valid JSON, no explanations.`,c=((await Tf.models.generateContent({model:"gemini-2.0-flash-exp",contents:[{role:"user",parts:[{text:i}]}]})).text||"").match(/\[[\s\S]*\]/);return c?JSON.parse(c[0]):[]}catch(t){return console.error("[Gemini] Translation error:",t),[]}}async function PI(n,e){try{const t=e.map(d=>{const f=d.nameEn||d.name||"",h=d.nameTe||"",v=h?`${f} / ${h}`:f;return`${d.id}: ${v} (${d.category})`}).join(`
`),i=`You are a smart product search assistant for a quick commerce app.

User query: "${n}"

Available products (format: id: English Name / Telugu Name (category)):
${t}

Find products that match the user's intent. Consider:
- Synonyms (e.g., "vegetables" includes tomato, onion, etc.)
- Category matches (e.g., "breakfast items" includes milk, bread, etc.)
- Telugu/Hindi/English variations (e.g.,  = Milk, doodh = milk)
- Common misspellings

Return a JSON array of matching product IDs ordered by relevance:
["product_id_1", "product_id_2", ...]

Return up to 10 most relevant matches.
Only return valid JSON array, no explanations.`,c=((await Tf.models.generateContent({model:"gemini-2.0-flash-exp",contents:[{role:"user",parts:[{text:i}]}]})).text||"").match(/\[[\s\S]*\]/);if(c){const d=JSON.parse(c[0]);return e.filter(f=>d.includes(f.id))}return[]}catch(t){return console.error("[Gemini] Semantic search error:",t),[]}}async function S3(n){try{const e=`You are helping a shopkeeper add products to their inventory. They spoke this product name: "${n}"

Generate both English and Telugu names for this product:

Rules:
- If they spoke in Telugu, provide the proper English translation
- If they spoke in English, provide the proper Telugu translation
- If it's a mix, identify the product and provide both proper names
- Use commonly used names in Indian commerce
- Keep names simple and accurate

Return your response in this exact format:
ENGLISH: [English name]
TELUGU: [Telugu name]

Example input: ""
Example output:
ENGLISH: Tomato
TELUGU: 

Example input: "onion"
Example output:
ENGLISH: Onion
TELUGU: 

Now generate for: "${n}"`,i=((await Tf.models.generateContent({model:"gemini-2.0-flash-exp",contents:[{role:"user",parts:[{text:e}]}]})).text||"").trim(),o=i.match(/ENGLISH:\s*(.+)/i),a=i.match(/TELUGU:\s*(.+)/i);return{english:o?o[1].trim():n,telugu:a?a[1].trim():n}}catch(e){return console.error("[Gemini] Bilingual generation error:",e),{english:n,telugu:n}}}async function Py(n,e="audio/webm"){try{console.log("[Gemini] Starting audio transcription...");const i=((await Tf.models.generateContent({model:"gemini-2.0-flash-exp",contents:[{role:"user",parts:[{text:"Listen to this audio and transcribe exactly what was said. The audio may be in Telugu, English, Hindi, or a mix. Return ONLY the transcribed text, no explanations or additional commentary."},{inlineData:{mimeType:e,data:n}}]}]})).text||"").trim();if(console.log("[Gemini] Transcription result:",i),!i)throw new Error("No speech detected in audio");return i}catch(t){throw console.error("[Gemini] Audio transcription error:",t),t}}const tr={vegetables:{tomato:{english:["tomato","tomatoes"],telugu:["",""],hindi:["tamatar",""],aliases:["tamato"]},onion:{english:["onion","onions"],telugu:["","",""],hindi:["pyaz","kanda",""],aliases:["ulli","ullipaya"]},potato:{english:["potato","potatoes"],telugu:["",""],hindi:["aloo",""],aliases:["bangaladumpa"]},carrot:{english:["carrot","carrots"],telugu:["",""],hindi:["gajar",""],aliases:["gajjari"]},cauliflower:{english:["cauliflower"],telugu:["",""],hindi:["gobhi","phool gobhi",""],aliases:["gobi"]},cabbage:{english:["cabbage"],telugu:["",""],hindi:["patta gobhi"," "],aliases:["gosu"]},beans:{english:["beans","green beans"],telugu:[" ",""],hindi:["sem","beans",""],aliases:["chikkudu"]},ladyfinger:{english:["ladyfinger","okra","bhindi"],telugu:[""],hindi:["bhindi",""],aliases:["bendakaya"]},brinjal:{english:["brinjal","eggplant","aubergine"],telugu:["",""],hindi:["baingan",""],aliases:["vankaya"]},chilli:{english:["chilli","chili","green chilli"],telugu:[""," "],hindi:["mirch","hari mirch",""],aliases:["mirapakaya"]}},fruits:{apple:{english:["apple","apples"],telugu:["",""],hindi:["seb",""],aliases:["sebu"]},banana:{english:["banana","bananas"],telugu:[" ",""],hindi:["kela",""],aliases:["arati","kela"]},mango:{english:["mango","mangoes"],telugu:[" ",""],hindi:["aam",""],aliases:["mamidi"]},orange:{english:["orange","oranges"],telugu:["",""],hindi:["santra","narangi",""],aliases:["narinja"]},grapes:{english:["grapes","grape"],telugu:["",""],hindi:["angoor",""],aliases:["draksha"]},pomegranate:{english:["pomegranate"],telugu:[" "],hindi:["anar","anaar",""],aliases:["danimma"]}},dairy:{milk:{english:["milk"],telugu:["",""],hindi:["doodh",""],aliases:["palu"]},curd:{english:["curd","yogurt"],telugu:["",""],hindi:["dahi",""],aliases:["perugu"]},butter:{english:["butter"],telugu:["",""],hindi:["makhan",""],aliases:["venna"]},ghee:{english:["ghee","clarified butter"],telugu:[""],hindi:["ghee",""],aliases:["neyyi"]},paneer:{english:["paneer","cottage cheese"],telugu:[""],hindi:["paneer",""],aliases:["panneer"]}},groceries:{rice:{english:["rice"],telugu:["",""],hindi:["chawal",""],aliases:["biyyam","annam"]},wheat:{english:["wheat","wheat flour","atta"],telugu:["",""],hindi:["gehun","atta",""],aliases:["godhuma"]},lentils:{english:["lentils","dal","pulses"],telugu:["",""],hindi:["dal",""],aliases:["pappu","kandulu"]},oil:{english:["oil","cooking oil"],telugu:["",""],hindi:["tel",""],aliases:["noone"]},salt:{english:["salt"],telugu:[""],hindi:["namak",""],aliases:["uppu"]},sugar:{english:["sugar"],telugu:["",""],hindi:["cheeni",""],aliases:["chakkera","panchadara"]},tea:{english:["tea","tea powder"],telugu:["",""],hindi:["chai",""],aliases:["teyaku"]}}};function w3(n){return n.map(e=>{const t=e.nameEn||e.name||"";return{id:e.id,name:t,category:e.category,subcategory:e.subcategory,price:e.discountedPrice||e.price,unit:e.unit||"piece",teluguName:e.nameTe||C3(t),hindiName:I3(t),aliases:R3(t)}})}function C3(n){if(!n)return"";const e=n.toLowerCase().trim();for(const t in tr)for(const i in tr[t]){const o=tr[t][i];if(o.english.some(a=>e.includes(a)))return o.telugu[0]}return n}function I3(n){if(!n)return"";const e=n.toLowerCase().trim();for(const t in tr)for(const i in tr[t]){const o=tr[t][i];if(o.english.some(a=>e.includes(a)))return o.hindi[0]}return n}function R3(n){if(!n)return[];const e=n.toLowerCase().trim();for(const t in tr)for(const i in tr[t]){const o=tr[t][i];if(o.english.some(a=>e.includes(a)))return[...o.english,...o.telugu,...o.hindi,...o.aliases]}return[n]}function N3({products:n,onProductsFound:e,language:t,onVoiceStart:i,onVoiceEnd:o}){const[a,c]=X.useState(!1),[d,f]=X.useState(!1),[h,v]=X.useState(!0),[E]=X.useState(()=>new io);X.useEffect(()=>{v(io.isSupported())},[]);const A=async U=>{f(!0);try{const Q=w3(n),H=await A3(U,Q);if(H&&H.length>0){const re=n.filter(ee=>H.some(he=>he.productId===ee.id));if(re.length>0){e(re,U);return}}const z=await PI(U,n);z.length>0?e(z,U):e([],U)}catch(Q){console.error("[VoiceSearch] Search error:",Q),e([],"")}finally{f(!1)}},N=async()=>{try{await E.startRecording(()=>{console.log("[VoiceSearch] Auto-stopping after silence detected"),L()}),c(!0),i?.()}catch(U){console.error("[VoiceSearch] Recording error:",U),U.message==="FEATURE_NOT_SUPPORTED"?alert(t==="te"?"     ":"Voice recording is not supported on your device"):U.name==="NotAllowedError"||U.name==="PermissionDeniedError"?alert(t==="te"?"  ":"Please allow microphone access"):alert(t==="te"?"   ":"Failed to start voice recording")}},L=async()=>{try{c(!1),f(!0);const U=await E.stopRecording(),Q=await E.blobToBase64(U);console.log("[VoiceSearch] Audio recorded, sending to Gemini...");const H=await Py(Q,U.type);console.log("[VoiceSearch] Transcribed:",H),await A(H)}catch(U){console.error("[VoiceSearch] Transcription error:",U),alert(t==="te"?" .  ":"Voice search failed. Please try again"),e([],"")}finally{f(!1),o?.()}},F=async()=>{a?await L():await N()};return h?g.jsx("button",{onClick:F,className:`voice-search-btn ${a?"listening":""} ${d?"processing":""}`,disabled:d,"aria-label":t==="te"?" ":"Voice Search",title:a?t==="te"?"... (  -)":"Speak... (auto-stops after silence)":t==="te"?"  ":"Tap mic and speak",children:a?g.jsx(Ay,{size:20}):g.jsx(Sy,{size:20})}):null}const x3=({searchTerm:n,setSearchTerm:e,language:t,toggleLanguage:i,logoUrl:o,products:a,onVoiceSearch:c})=>{const d=Zn[t];return g.jsxs("div",{className:"app-header-modern",children:[g.jsxs("div",{className:"header-top",children:[g.jsxs("div",{className:"brand-section",children:[g.jsx("img",{src:o||"/dukaan-logo.png",alt:"DUKAAN Logo",className:"header-logo"}),g.jsx("h1",{className:"brand-name",children:t==="en"?"DUKAAN":""})]}),g.jsx("button",{onClick:i,className:"language-toggle-modern",children:"/EN"})]}),g.jsxs("div",{className:"search-bar-modern",children:[g.jsx(iI,{className:"search-icon"}),g.jsx("input",{type:"text",placeholder:d.search,value:n,onChange:h=>e(h.target.value),className:"search-input"}),a&&c&&g.jsx(N3,{products:a,onProductsFound:c,language:t})]})]})},b3=({currentView:n,setCurrentView:e,cartItems:t,language:i,onHomeClick:o})=>{const a=Zn[i],c=Object.values(t).reduce((h,v)=>h+v.quantity,0),d=h=>{h==="Home"&&o&&o(),e(h)},f=[{name:a.home,icon:G2,view:"Home"},{name:a.orders,icon:Tn,view:"Orders"},{name:a.cart,icon:sI,view:"Cart",badge:c},{name:a.profile,icon:$i,view:"Profile"}];return g.jsx("div",{className:"bottom-nav",children:f.map(h=>g.jsxs("button",{onClick:()=>d(h.view),className:`nav-item ${n===h.view?"nav-item-active":""}`,children:[g.jsxs("div",{className:"nav-icon-wrapper",children:[g.jsx(h.icon,{className:"w-6 h-6"}),h.badge>0&&g.jsx("span",{className:"nav-badge",children:h.badge})]}),g.jsx("span",{className:"nav-label",children:h.name})]},h.view))})},DI=({order:n,onClose:e,language:t})=>{const i=Zn[t],o=c=>({pending:i.pending,accepted:i.accepted,processing:i.processing,ready_for_pickup:i.readyForPickup,out_for_delivery:i.outForDelivery,delivered:i.delivered,completed:i.completed,cancelled:i.cancelled})[c]||c,a=c=>{switch(c){case"pending":return"#9E9E9E";case"accepted":return"#2196F3";case"processing":return"#2196F3";case"ready_for_pickup":return"#9C27B0";case"out_for_delivery":return"#FF9800";case"delivered":return"#4CAF50";case"completed":return"#4CAF50";case"cancelled":return"#F44336";default:return"#9E9E9E"}};return g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h3",{className:"modal-title",children:i.orderDetails}),g.jsx("button",{onClick:e,className:"modal-close-btn",children:g.jsx(aa,{className:"w-6 h-6"})})]}),g.jsxs("div",{className:"modal-body",children:[g.jsxs("div",{className:"modal-order-info",children:[g.jsxs("div",{className:"modal-info-row",children:[g.jsx("span",{className:"modal-label",children:i.orderID}),g.jsx("span",{className:"modal-value",children:n.orderNumber||`#${n.id.substring(0,12)}`})]}),g.jsxs("div",{className:"modal-info-row",children:[g.jsx("span",{className:"modal-label",children:i.orderDate}),g.jsx("span",{className:"modal-value",children:new Date(n.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),g.jsxs("div",{className:"modal-info-row",children:[g.jsx("span",{className:"modal-label",children:i.status}),g.jsx("span",{className:"modal-status-badge",style:{backgroundColor:a(n.status)},children:o(n.status)})]}),n.phoneNumber&&g.jsxs("div",{className:"modal-info-row",children:[g.jsx("span",{className:"modal-label",children:i.customerPhone}),g.jsxs("a",{href:`tel:${n.phoneNumber}`,className:"modal-phone-link",children:[g.jsx(or,{className:"w-4 h-4"}),n.phoneNumber]})]})]}),n.deliveryAddress&&g.jsxs("div",{className:"modal-delivery-section",children:[g.jsx("h4",{className:"modal-section-title",children:i.deliveryDetails}),g.jsxs("div",{className:"modal-address-card",children:[g.jsx(ea,{className:"w-5 h-5 text-green-600"}),g.jsxs("div",{className:"modal-address-content",children:[g.jsx("p",{className:"modal-address-text",children:n.deliveryAddress}),n.deliveryInstructions&&g.jsxs("p",{className:"modal-instructions-text",children:[g.jsxs("strong",{children:[i.instructions,":"]})," ",n.deliveryInstructions]})]})]})]}),g.jsxs("div",{className:"modal-items-section",children:[g.jsx("h4",{className:"modal-section-title",children:i.itemsOrdered}),g.jsx("div",{className:"modal-items-list",children:n.items.map((c,d)=>{const f=t==="te"?c.nameTe||c.nameEn||c.name:c.nameEn||c.name;return g.jsxs("div",{className:"modal-item-card",children:[g.jsx("div",{className:"modal-item-image",children:g.jsx("img",{src:c.imageUrl||"https://via.placeholder.com/60",alt:f,onError:h=>h.target.src="https://via.placeholder.com/60"})}),g.jsxs("div",{className:"modal-item-details",children:[g.jsx("h5",{className:"modal-item-name",children:f}),g.jsx("p",{className:"modal-item-weight",children:c.weight}),g.jsxs("p",{className:"modal-item-quantity",children:[i.qty,": ",c.quantity]})]}),g.jsxs("div",{className:"modal-item-price",children:[g.jsx(Ji,{className:"w-4 h-4"}),(c.price*c.quantity).toFixed(0)]})]},d)})})]}),g.jsxs("div",{className:"modal-total-section",children:[g.jsx("span",{className:"modal-total-label",children:i.orderTotal}),g.jsxs("span",{className:"modal-total-amount",children:[g.jsx(Ji,{className:"w-5 h-5"}),n.total.toFixed(0)]})]})]})]})})},P3=({isOpen:n,onClose:e,onConfirm:t,cartItems:i,userAddresses:o,selectedAddress:a,onAddressSelect:c,onManageAddresses:d,language:f})=>{const[h,v]=X.useState("delivery");if(!n)return null;const E=i.reduce((L,F)=>L+(F.discountedPrice??F.price)*F.quantity,0),A=f==="te"?Zn.te:Zn.en,N=()=>{if(h==="delivery"&&!a){alert(A.selectDeliveryAddress);return}t(h)};return o.find(L=>L.isDefault)||o[0],g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content",onClick:L=>L.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{className:"modal-title",children:A.confirmOrder}),g.jsx("button",{className:"modal-close-btn",onClick:e,children:g.jsx(aa,{className:"w-6 h-6"})})]}),g.jsxs("div",{className:"modal-body",children:[g.jsxs("div",{className:"checkout-section",children:[g.jsx("h3",{className:"checkout-section-title",children:A.chooseDeliveryMethod}),g.jsxs("div",{className:"delivery-options",children:[g.jsxs("button",{className:`delivery-option-btn ${h==="delivery"?"active":""}`,onClick:()=>v("delivery"),children:[g.jsx(gs,{className:"w-5 h-5"}),g.jsx("span",{children:A.homeDelivery})]}),g.jsxs("button",{className:`delivery-option-btn ${h==="pickup"?"active":""}`,onClick:()=>v("pickup"),children:[g.jsx(ta,{className:"w-5 h-5"}),g.jsx("span",{children:A.storePickup})]})]})]}),h==="delivery"&&g.jsxs("div",{className:"checkout-section",children:[g.jsx("h3",{className:"checkout-section-title",children:A.deliveryAddress}),o.length===0?g.jsxs("div",{className:"no-address-msg",children:[g.jsx("p",{children:A.noSavedAddresses}),g.jsx("button",{onClick:()=>{e(),d()},className:"add-address-btn",children:A.addAddress})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"address-list",children:o.map(L=>g.jsxs("div",{className:`address-card ${a?.id===L.id?"selected":""}`,onClick:()=>c(L),children:[g.jsxs("div",{className:"address-header",children:[g.jsx("span",{className:`address-label ${L.label.toLowerCase()}`,children:L.label}),L.isDefault&&g.jsx("span",{className:"default-badge",children:A.default})]}),g.jsx("p",{className:"address-text",children:L.fullAddress}),L.deliveryInstructions&&g.jsxs("p",{className:"address-instructions",children:[A.note,": ",L.deliveryInstructions]})]},L.id))}),g.jsx("button",{onClick:()=>{e(),d()},className:"manage-addresses-link",children:A.manageAddresses})]})]}),h==="pickup"&&g.jsx("div",{className:"checkout-section",children:g.jsxs("div",{className:"pickup-info-card",children:[g.jsx(ta,{className:"w-12 h-12 pickup-icon"}),g.jsx("h4",{children:A.storePickup}),g.jsx("p",{children:A.orderReadyPickup}),g.jsx("p",{className:"pickup-location",children:" Ponnur, Andhra Pradesh"})]})}),g.jsx("div",{className:"checkout-section",children:g.jsxs("div",{className:"order-summary",children:[g.jsx("h3",{className:"checkout-section-title",children:A.orderSummary}),g.jsx("div",{className:"summary-items",children:i.map(L=>{const F=f==="te"?L.nameTe||L.nameEn||L.name:L.nameEn||L.name;return g.jsxs("div",{className:"summary-item",children:[g.jsxs("span",{children:[F,"  ",L.quantity]}),g.jsxs("span",{children:["",((L.discountedPrice??L.price)*L.quantity).toFixed(2)]})]},L.id)})}),g.jsxs("div",{className:"summary-total",children:[g.jsx("span",{className:"total-label",children:A.total}),g.jsxs("span",{className:"total-amount",children:["",E.toFixed(2)]})]})]})})]}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{onClick:e,className:"cancel-btn",children:A.cancel}),g.jsxs("button",{onClick:N,className:"confirm-order-btn",disabled:h==="delivery"&&o.length===0,children:[g.jsx(ji,{className:"w-5 h-5"}),A.placeOrder," - ",E.toFixed(2)]})]})]})})},D3=({categoriesData:n,onCategoryClick:e,language:t})=>{Zn[t];const i=[...n].sort((o,a)=>(o.sortOrder||0)-(a.sortOrder||0));return g.jsx("div",{className:"category-section",children:g.jsx("div",{className:"category-grid",children:i.map(o=>g.jsxs("button",{onClick:()=>e(o.id),className:"category-card",style:{background:o.gradient},children:[g.jsx("div",{className:"category-icon",children:g.jsx("img",{src:o.imageUrl||"https://via.placeholder.com/50/CCCCCC/666666?text=No+Image",alt:o.nameEn,className:"category-image"})}),g.jsxs("div",{className:"category-labels",children:[g.jsx("div",{className:"category-name-en",children:o.nameEn}),g.jsxs("div",{className:"category-name-te",children:["/ ",o.nameTe]})]})]},o.id))})})},Xd=({product:n,onAddToCart:e,cartItems:t,language:i})=>{const o=Zn[i],a=t[n.id]?.quantity||0,c=n.outOfStock===!0,d=i==="te"?n.nameTe||n.nameEn||n.name:n.nameEn||n.name;return g.jsxs("div",{className:`product-card-modern ${c?"out-of-stock-card":""}`,children:[g.jsx("img",{src:n.imageUrl||"https://via.placeholder.com/150",alt:d,className:"product-image"}),c&&g.jsx("div",{className:"out-of-stock-overlay",children:g.jsx("span",{className:"out-of-stock-badge",children:o.outOfStock.toUpperCase()})}),g.jsxs("div",{className:"product-info",children:[g.jsx("h3",{className:"product-name",children:d}),g.jsx("p",{className:"product-weight",children:n.weight}),g.jsxs("div",{className:"product-price-row",children:[g.jsxs("span",{className:"product-price",children:[g.jsx(Ji,{className:"w-4 h-4"}),n.discountedPrice||n.price]}),n.discountedPrice&&g.jsxs("span",{className:"product-original-price",children:[g.jsx(Ji,{className:"w-3 h-3"}),n.price]})]})]}),c?g.jsx("button",{className:"add-to-cart-btn disabled-btn",disabled:!0,children:o.outOfStock}):a===0?g.jsx("button",{onClick:()=>e(n),className:"add-to-cart-btn",children:o.addToCart}):g.jsxs("div",{className:"quantity-controls",children:[g.jsx("button",{onClick:()=>e(n,-1),className:"quantity-btn",children:g.jsx(eI,{className:"w-4 h-4"})}),g.jsx("span",{className:"quantity-display",children:a}),g.jsx("button",{onClick:()=>e(n,1),className:"quantity-btn",children:g.jsx(nI,{className:"w-4 h-4"})})]})]})},M3=({categoriesData:n,selectedCategory:e,onCategoryClick:t,language:i})=>{const a=[...n].sort((c,d)=>(c.sortOrder||0)-(d.sortOrder||0)).slice(0,6);return g.jsx("div",{className:"quick-categories-bar",children:a.map(c=>g.jsx("button",{onClick:()=>t(c.id),className:`quick-category-chip ${e===c.id?"active":""}`,children:i==="en"?c.nameEn:c.nameTe},c.id))})},k3=({products:n,onAddToCart:e,cartItems:t,setCurrentView:i,selectedCategory:o,setSelectedCategory:a,selectedSubcategory:c,setSelectedSubcategory:d,searchTerm:f,language:h,categoriesData:v,subcategoriesData:E,voiceSearchResults:A=null,setVoiceSearchResults:N=()=>{}})=>{const L=Zn[h],[F,U]=X.useState(null),[Q,H]=X.useState(!1);console.log("[HomeView] Rendering with:",{productsCount:n?.length,categoriesCount:v?.length,voiceSearchResults:A?.length}),X.useEffect(()=>{if(!f||f.trim().length===0){U(null);return}const V=async()=>{H(!0);try{const we=await PI(f,n);U(we)}catch(we){console.error("[HomeView] Semantic search error:",we),U(null)}finally{H(!1)}},x=setTimeout(()=>{V()},500);return()=>clearTimeout(x)},[f,n]);const z=X.useMemo(()=>{if(!f)return[];const V=f.toLowerCase();return n.filter(x=>(x.nameEn||x.name||"").toLowerCase().includes(V)||x.nameTe&&x.nameTe.toLowerCase().includes(V)||x.category&&x.category.toLowerCase().includes(V))},[n,f]),re=X.useMemo(()=>A||(f?F&&F.length>0?F:z:[]),[n,f,A,F,z]),ee=X.useMemo(()=>n.filter(V=>V.isPopular===!0).sort((V,x)=>(V.sortOrder||0)-(x.sortOrder||0)),[n]),he=f.trim().length>0||A!==null,O=X.useMemo(()=>o?E.filter(V=>V.categoryId===o).sort((V,x)=>(V.sortOrder||0)-(x.sortOrder||0)):[],[E,o]),D=X.useMemo(()=>c?n.filter(V=>V.subcategoryId===c||!V.subcategoryId&&o&&E.find(x=>x.id===c)?.categoryId===V.category).sort((V,x)=>(V.sortOrder||0)-(x.sortOrder||0)):[],[n,c,o,E]),b=V=>{a(V),d(null)},M=V=>{d(V)},k=()=>{c?d(null):o&&a(null)};if(c){const V=E.find(x=>x.id===c);return v.find(x=>x.id===o),g.jsxs("div",{className:"subcategory-products-view",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:k,className:"back-button",children:g.jsx(Ni,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:h==="en"?V?.nameEn:V?.nameTe||V?.nameEn})]}),g.jsx("div",{className:"products-grid",children:D.length>0?D.map(x=>g.jsx(Xd,{product:x,onAddToCart:e,cartItems:t,language:h},x.id)):g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:"No products in this subcategory yet."})})})]})}if(o){const V=v.find(x=>x.id===o);if(O.length===0){const x=n.filter(we=>we.category===o).sort((we,Be)=>(we.sortOrder||0)-(Be.sortOrder||0));return g.jsxs("div",{className:"subcategory-products-view",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:k,className:"back-button",children:g.jsx(Ni,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:h==="en"?V?.nameEn:V?.nameTe||V?.nameEn})]}),g.jsx("div",{className:"products-grid",children:x.length>0?x.map(we=>g.jsx(Xd,{product:we,onAddToCart:e,cartItems:t,language:h},we.id)):g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:"No products in this category yet."})})})]})}return g.jsxs("div",{className:"subcategories-view",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:k,className:"back-button",children:g.jsx(Ni,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:h==="en"?V?.nameEn:V?.nameTe||V?.nameEn})]}),g.jsx("div",{className:"subcategory-grid",children:O.map(x=>g.jsxs("button",{onClick:()=>M(x.id),className:"subcategory-card",children:[g.jsx("span",{className:"subcategory-icon",children:g.jsx("img",{src:x.imageUrl||"https://via.placeholder.com/48/CCCCCC/666666?text=No+Image",alt:x.nameEn,className:"subcategory-image"})}),g.jsx("span",{className:"subcategory-name",children:h==="en"?x.nameEn:x.nameTe||x.nameEn})]},x.id))})]})}return g.jsxs("div",{className:"home-view",children:[!he&&!o&&g.jsx(M3,{categoriesData:v,selectedCategory:o,onCategoryClick:b,language:h}),!he&&g.jsx(D3,{categoriesData:v,onCategoryClick:b,language:h}),he?g.jsxs("div",{className:"search-results-section",children:[g.jsxs("h2",{className:"section-title",children:[A?L.voiceSearchResults:L.searchResults," (",re.length,")",Q&&g.jsxs("span",{className:"ai-searching",children:["  ",L.aiSearching]})]}),re.length>0?g.jsx("div",{className:"products-grid",children:re.map(V=>g.jsx(Xd,{product:V,onAddToCart:e,cartItems:t,language:h},V.id))}):Q?g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:L.searchingProducts})}):g.jsx("div",{className:"empty-state",children:g.jsxs("p",{children:[L.noProductsFound,' "',f,'"']})})]}):g.jsxs("div",{className:"popular-section",children:[g.jsx("h2",{className:"section-title",children:L.popularProducts}),ee.length>0?g.jsx("div",{className:"products-grid",children:ee.map(V=>g.jsx(Xd,{product:V,onAddToCart:e,cartItems:t,language:h},V.id))}):g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:L.noPopularProducts})})]})]})},V3=({cartItems:n,onAddToCart:e,setCurrentView:t,onCheckout:i,language:o})=>{const a=Zn[o],c=Object.values(n),d=c.reduce((f,h)=>f+(h.discountedPrice??h.price)*h.quantity,0);return c.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(sI,{className:"empty-icon"}),g.jsxs("p",{className:"empty-text",children:[a.cart," ",a.empty]})]}):g.jsxs("div",{className:"cart-view",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:()=>t("Home"),className:"back-button",children:g.jsx(Ni,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:a.cart})]}),g.jsx("div",{className:"cart-items",style:{paddingBottom:"140px"},children:c.map(f=>{const h=o==="te"?f.nameTe||f.nameEn||f.name||"":f.nameEn||f.nameTe||f.name||"Product";return g.jsxs("div",{className:"cart-item",children:[g.jsx("img",{src:f.imageUrl||"https://via.placeholder.com/80",alt:h,className:"cart-item-image"}),g.jsxs("div",{className:"cart-item-info",children:[g.jsx("h3",{className:"cart-item-name",children:h}),g.jsx("p",{className:"cart-item-weight",children:f.weight}),g.jsxs("p",{className:"cart-item-price",children:[g.jsx(Ji,{className:"w-4 h-4"}),f.discountedPrice??f.price]})]}),g.jsxs("div",{className:"quantity-controls",children:[g.jsx("button",{onClick:()=>e(f,-1),className:"quantity-btn",children:g.jsx(eI,{className:"w-4 h-4"})}),g.jsx("span",{className:"quantity-display",children:f.quantity}),g.jsx("button",{onClick:()=>e(f,1),className:"quantity-btn",children:g.jsx(nI,{className:"w-4 h-4"})})]})]},f.id)})}),g.jsxs("div",{className:"cart-footer-fixed",children:[g.jsxs("div",{className:"cart-total",children:[g.jsx("span",{children:a.total}),g.jsxs("span",{className:"total-amount",children:[g.jsx(Ji,{className:"w-5 h-5"}),d.toFixed(0)]})]}),g.jsx("button",{onClick:i,className:"checkout-button",children:a.proceedToCheckout})]})]})},U3=({isOpen:n,onClose:e,onConfirm:t,currentMethod:i,userAddresses:o,onManageAddresses:a})=>{const[c,d]=X.useState(o.find(v=>v.isDefault)||o[0]||null);if(!n)return null;const f=i==="delivery"?"pickup":"delivery",h=()=>{if(f==="delivery"){if(o.length===0){alert("Please add a delivery address first"),e(),a();return}if(!c){alert("Please select a delivery address");return}t(f,c)}else t(f,null)};return g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{className:"modal-title",children:"Change Order Type"}),g.jsx("button",{className:"modal-close-btn",onClick:e,children:g.jsx(aa,{className:"w-6 h-6"})})]}),g.jsxs("div",{className:"modal-body",children:[g.jsxs("div",{className:"change-type-info",children:[g.jsxs("div",{className:"current-method-display",children:[g.jsx("span",{className:"change-label",children:"Current:"}),i==="delivery"?g.jsxs("div",{className:"method-badge delivery",children:[g.jsx(gs,{className:"w-4 h-4"}),g.jsx("span",{children:"Home Delivery"})]}):g.jsxs("div",{className:"method-badge pickup",children:[g.jsx(ta,{className:"w-4 h-4"}),g.jsx("span",{children:"Store Pickup"})]})]}),g.jsx("div",{className:"arrow-divider",children:""}),g.jsxs("div",{className:"new-method-display",children:[g.jsx("span",{className:"change-label",children:"Change to:"}),f==="delivery"?g.jsxs("div",{className:"method-badge delivery",children:[g.jsx(gs,{className:"w-4 h-4"}),g.jsx("span",{children:"Home Delivery"})]}):g.jsxs("div",{className:"method-badge pickup",children:[g.jsx(ta,{className:"w-4 h-4"}),g.jsx("span",{children:"Store Pickup"})]})]})]}),f==="delivery"&&g.jsxs("div",{className:"address-selection-section",children:[g.jsx("h3",{className:"section-title",children:"Select Delivery Address"}),o.length===0?g.jsxs("div",{className:"no-address-msg",children:[g.jsx("p",{children:"No saved addresses. Please add one first."}),g.jsx("button",{onClick:()=>{e(),a()},className:"add-address-btn",children:"Add Address"})]}):g.jsx("div",{className:"address-list",children:o.map(v=>g.jsxs("div",{className:`address-card ${c?.id===v.id?"selected":""}`,onClick:()=>d(v),children:[g.jsx("div",{className:"address-selection-radio",children:c?.id===v.id&&g.jsx(D2,{className:"w-4 h-4"})}),g.jsxs("div",{className:"address-info",children:[g.jsxs("div",{className:"address-header",children:[g.jsx("span",{className:`address-label ${v.label.toLowerCase()}`,children:v.label}),v.isDefault&&g.jsx("span",{className:"default-badge",children:"Default"})]}),g.jsx("p",{className:"address-text",children:v.fullAddress}),v.deliveryInstructions&&g.jsxs("p",{className:"address-instructions-small",children:["Note: ",v.deliveryInstructions]})]})]},v.id))})]}),f==="pickup"&&g.jsxs("div",{className:"pickup-confirmation",children:[g.jsx("p",{className:"confirmation-text",children:"Your order will be ready for pickup at the store."}),g.jsx("p",{className:"store-location",children:" Ponnur, Andhra Pradesh"})]})]}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{onClick:e,className:"cancel-btn",children:"Cancel"}),g.jsx("button",{onClick:h,className:"confirm-btn",disabled:f==="delivery"&&o.length===0,children:"Confirm Change"})]})]})})},L3=({orders:n,language:e,setSelectedOrder:t,onChangeDeliveryMethod:i,onCancelOrder:o,userAddresses:a,onManageAddresses:c})=>{const d=Zn[e],[f,h]=X.useState(!1),[v,E]=X.useState(null),A=n.filter(H=>H.status!=="delivered"&&H.status!=="completed"&&H.status!=="cancelled");if(A.length===0)return g.jsxs("div",{className:"empty-state",children:[g.jsx(Tn,{className:"empty-icon"}),g.jsx("p",{className:"empty-text",children:d.noActiveOrders})]});const N=H=>({pending:d.pending,accepted:d.accepted,out_for_delivery:d.outForDelivery,ready_for_pickup:d.readyForPickup,delivered:d.delivered,completed:d.completed,cancelled:d.cancelled})[H]||H,L=H=>H==="delivered"||H==="completed"?g.jsx(ji,{className:"w-5 h-5"}):H==="cancelled"?g.jsx(uh,{className:"w-5 h-5"}):H==="out_for_delivery"?g.jsx(gs,{className:"w-5 h-5"}):H==="ready_for_pickup"?g.jsx(ta,{className:"w-5 h-5"}):H==="accepted"?g.jsx(ji,{className:"w-5 h-5"}):g.jsx(uu,{className:"w-5 h-5"}),F=H=>{switch(H){case"delivered":return"#4CAF50";case"completed":return"#4CAF50";case"accepted":return"#2196F3";case"out_for_delivery":return"#FF9800";case"ready_for_pickup":return"#9C27B0";case"cancelled":return"#f44336";case"pending":return"#9E9E9E";default:return"#9E9E9E"}},U=H=>{E(H),h(!0)},Q=(H,z)=>{v&&(i(v.id,H,z),h(!1),E(null))};return g.jsxs("div",{className:"orders-view",children:[g.jsx("h2",{className:"view-title",children:d.activeOrders}),g.jsx("div",{className:"orders-list",children:A.map(H=>g.jsxs("div",{className:"order-card-detailed",children:[g.jsx("div",{className:"order-header-detailed",children:g.jsxs("div",{className:"order-info-row",children:[g.jsxs("div",{className:"order-meta",children:[g.jsx("span",{className:"order-date-label",children:d.orderDate}),g.jsx("span",{className:"order-date-value",children:new Date(H.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),g.jsxs("div",{className:"order-status-badge",style:{backgroundColor:F(H.status)},children:[L(H.status),g.jsx("span",{children:N(H.status)})]})]})}),g.jsx("div",{className:"order-items-detailed",children:H.items.map((z,re)=>(console.log("[Order Item Debug]",{name:z.name,hasImageUrl:!!z.imageUrl,imageUrl:z.imageUrl,weight:z.weight}),g.jsxs("div",{className:"order-item-card",children:[g.jsx("div",{className:"order-item-image",children:g.jsx("img",{src:z.imageUrl||"https://via.placeholder.com/80?text=No+Image",alt:z.name,onError:ee=>{console.log("[Image Error]",z.name,"failed to load:",z.imageUrl),ee.target.src="https://via.placeholder.com/80?text=No+Image"}})}),g.jsxs("div",{className:"order-item-details",children:[g.jsx("h4",{className:"order-item-name",children:e==="te"?z.nameTe||z.nameEn||z.name:z.nameEn||z.name}),g.jsx("p",{className:"order-item-weight",children:z.weight||"N/A"}),g.jsxs("div",{className:"order-item-pricing",children:[g.jsxs("span",{className:"order-item-quantity",children:[d.qty,": ",z.quantity]}),g.jsxs("span",{className:"order-item-price",children:[g.jsx(Ji,{className:"w-3 h-3"}),(z.discountedPrice??z.price).toFixed(0)," ",d.each]})]})]}),g.jsxs("div",{className:"order-item-total",children:[g.jsx(Ji,{className:"w-4 h-4"}),((z.discountedPrice??z.price)*z.quantity).toFixed(0)]})]},re)))}),H.status==="cancelled"&&H.cancellationReason&&g.jsxs("div",{className:"order-cancellation-section",children:[g.jsxs("div",{className:"cancellation-badge",children:[g.jsx(uh,{className:"w-4 h-4 text-red-600"}),g.jsxs("span",{className:"cancellation-label",children:[d.cancellationReason,":"]})]}),g.jsx("p",{className:"cancellation-reason-text",children:H.cancellationReason})]}),g.jsxs("div",{className:"order-delivery-info",children:[g.jsx("div",{className:"delivery-method-badge",children:H.deliveryMethod==="delivery"?g.jsxs(g.Fragment,{children:[g.jsx(gs,{className:"w-4 h-4"}),g.jsx("span",{children:d.homeDelivery})]}):g.jsxs(g.Fragment,{children:[g.jsx(ta,{className:"w-4 h-4"}),g.jsx("span",{children:d.storePickup})]})}),g.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(H.status==="pending"||H.status==="accepted")&&i&&g.jsxs("button",{onClick:()=>U(H),className:"change-delivery-btn",children:[g.jsx(cV,{className:"w-4 h-4"}),e==="te"?"  ":"Change Order Type"]}),H.status==="pending"&&o&&g.jsxs("button",{onClick:()=>{window.confirm(e==="te"?"    ?":"Are you sure you want to cancel this order?")&&o(H.id,e==="te"?"  ":"Customer cancelled")},className:"cancel-order-btn",style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",background:"#fff",border:"1px solid #f44336",borderRadius:"8px",color:"#f44336",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},children:[g.jsx(uh,{className:"w-4 h-4"}),e==="te"?"  ":"Cancel Order"]})]})]}),H.riderPhone&&(H.status==="out_for_delivery"||H.status==="delivered")&&g.jsxs("div",{style:{background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",padding:"12px 16px",borderRadius:"8px",marginTop:"12px",border:"1px solid #2196F3"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[g.jsx(gs,{style:{color:"#1976D2",width:"18px",height:"18px"}}),g.jsx("span",{style:{fontWeight:"600",color:"#1565C0",fontSize:"14px"},children:"Delivery Partner"})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx(or,{style:{color:"#1976D2",width:"16px",height:"16px"}}),g.jsxs("a",{href:`tel:${H.riderPhone}`,style:{color:"#0D47A1",fontSize:"16px",fontWeight:"600",textDecoration:"none"},children:[H.riderName||"Delivery Partner",": ",H.riderPhone]})]})]}),g.jsx("div",{className:"order-footer-detailed",children:g.jsxs("div",{className:"order-total-row",children:[g.jsx("span",{className:"order-total-label",children:d.orderTotal}),g.jsxs("span",{className:"order-total-amount",children:[g.jsx(Ji,{className:"w-5 h-5"}),H.total.toFixed(0)]})]})})]},H.id))}),f&&v&&g.jsx(U3,{isOpen:f,onClose:()=>{h(!1),E(null)},onConfirm:Q,currentMethod:v.deliveryMethod,userAddresses:a||[],onManageAddresses:c})]})},O3=({userProfile:n,orders:e,onLogout:t,language:i,setCurrentView:o,userAddresses:a,onManageAddresses:c})=>{const d=Zn[i],[f,h]=X.useState(!1),[v,E]=X.useState({name:n?.name||"",email:n?.email||""}),A=e.length;e.reduce((H,z)=>H+z.total,0);const L=e.filter(H=>H.status==="delivered"||H.status==="completed").reduce((H,z)=>z.totalSavings?H+z.totalSavings:z.items?H+z.items.reduce((re,ee)=>ee.originalPrice&&ee.discountedPrice&&ee.discountedPrice<ee.originalPrice?re+(ee.originalPrice-ee.discountedPrice)*ee.quantity:re,0):H,0),F=()=>{E({name:n?.name||"",email:n?.email||""}),h(!0)},U=()=>{h(!1),E({name:n?.name||"",email:n?.email||""})},Q=async()=>{if(!v.name.trim()){alert("Please enter your name");return}if(!n||!n.id){alert("User profile not found");return}try{const{db:H}=Is(),z=je(H,"artifacts",xe,"public","data","users",n.id);await Gn(z,{name:v.name.trim(),email:v.email.trim(),profileCompleted:!0,updatedAt:new Date().toISOString()}),h(!1),alert("Profile updated successfully! Please refresh to see changes."),window.location.reload()}catch(H){console.error("Error updating profile:",H),alert("Failed to update profile. Please try again.")}};return g.jsxs("div",{className:"profile-view",children:[g.jsx("h2",{className:"view-title",children:d.profile}),g.jsxs("div",{className:"profile-info",children:[g.jsx("div",{className:"profile-avatar",children:g.jsx($i,{className:"w-12 h-12"})}),n?f?g.jsxs("div",{className:"profile-edit-form",children:[g.jsx("input",{type:"text",value:v.name,onChange:H=>E({...v,name:H.target.value}),placeholder:"Enter your name",className:"profile-edit-input"}),g.jsx("input",{type:"email",value:v.email,onChange:H=>E({...v,email:H.target.value}),placeholder:"Enter your email (optional)",className:"profile-edit-input"}),g.jsxs("div",{className:"profile-edit-actions",children:[g.jsxs("button",{onClick:Q,className:"profile-save-btn",children:[g.jsx(ll,{className:"w-4 h-4"}),"Save"]}),g.jsxs("button",{onClick:U,className:"profile-cancel-btn",children:[g.jsx(aa,{className:"w-4 h-4"}),"Cancel"]})]})]}):g.jsxs("div",{className:"profile-details",children:[g.jsxs("div",{className:"profile-info-text",children:[g.jsx("p",{className:"profile-name",children:n.name}),g.jsx("p",{className:"profile-phone",children:n.phoneNumber}),n.email&&g.jsx("p",{className:"profile-email",children:n.email})]}),g.jsx("button",{onClick:F,className:"profile-edit-btn",children:g.jsx(rV,{className:"w-4 h-4"})})]}):g.jsx("p",{className:"profile-id",children:"Loading profile..."})]}),g.jsxs("div",{className:"profile-stats",children:[g.jsxs("div",{className:"stat-card",children:[g.jsx(Tn,{className:"w-6 h-6 text-green-600"}),g.jsxs("div",{children:[g.jsx("p",{className:"stat-value",children:A}),g.jsx("p",{className:"stat-label",children:d.totalOrders})]})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx(Ji,{className:"w-6 h-6 text-green-600"}),g.jsxs("div",{children:[g.jsxs("p",{className:"stat-value",children:["",Math.round(L)]}),g.jsx("p",{className:"stat-label",children:d.moneySaved})]})]})]}),g.jsx("div",{className:"profile-section",children:g.jsxs("button",{className:"order-history-button",onClick:c,children:[g.jsx(ea,{className:"w-5 h-5"}),g.jsxs("span",{children:["Manage Addresses (",a.length,")"]}),g.jsx(Ni,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]})}),g.jsx("div",{className:"profile-section",children:g.jsxs("button",{className:"order-history-button",onClick:()=>o("OrderHistory"),children:[g.jsx(Tn,{className:"w-5 h-5"}),g.jsxs("span",{children:["View Order History (",A,")"]}),g.jsx(Ni,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]})}),n&&(n.role==="shopkeeper"||n.role==="rider")&&g.jsxs("div",{className:"profile-section",children:[g.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"#666"},children:"Switch Mode"}),n.role==="shopkeeper"&&g.jsxs("button",{className:"order-history-button",onClick:()=>window.location.href="?mode=shopkeeper",style:{marginBottom:"8px"},children:[g.jsx(_V,{className:"w-5 h-5"}),g.jsx("span",{children:"Shopkeeper Dashboard"}),g.jsx(Ni,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]}),n.role==="rider"&&g.jsxs("button",{className:"order-history-button",onClick:()=>window.location.href="?mode=rider",children:[g.jsx(ZC,{className:"w-5 h-5"}),g.jsx("span",{children:"Rider Dashboard"}),g.jsx(Ni,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]})]}),g.jsxs("button",{onClick:t,className:"logout-button",children:[g.jsx(J2,{className:"w-5 h-5"}),d.logout]})]})},F3=({orders:n,onBack:e,onSelectOrder:t,language:i,translations:o})=>{const a=o[i];return g.jsxs("div",{className:"order-history-view",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:e,className:"back-button",children:g.jsx(Ni,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:"Order History"})]}),n.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(Tn,{className:"empty-icon"}),g.jsx("p",{className:"empty-text",children:a.noOrders})]}):g.jsx("div",{className:"orders-list",children:n.map(c=>g.jsxs("div",{className:"order-history-item clickable",onClick:()=>t(c),children:[g.jsxs("div",{className:"order-history-info",children:[g.jsx("p",{className:"order-history-date",children:new Date(c.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),g.jsxs("p",{className:"order-history-items",children:[c.items.length," items  ",c.status]})]}),g.jsxs("div",{className:"order-history-right",children:[g.jsxs("p",{className:"order-history-price",children:["",c.total.toFixed(0)]}),g.jsx(Ni,{className:"chevron-icon",style:{transform:"rotate(180deg)"}})]})]},c.id))})]})},q3=({phoneNumber:n,onPhoneChange:e,countryCode:t,onCountryCodeChange:i,password:o,onPasswordChange:a,otp:c,onOtpChange:d,authStep:f,isNewUser:h,onCheckUser:v,onSendOTP:E,onVerifyOTP:A,onPasswordLogin:N,onCompleteRegistration:L})=>{const[F,U]=X.useState({name:"",password:"",confirmPassword:"",address:{street:"",city:"",state:"Andhra Pradesh",pincode:""}}),Q=()=>{if(!F.name||!F.password){alert("Please fill in all required fields");return}if(F.password!==F.confirmPassword){alert("Passwords do not match");return}if(F.password.length<6){alert("Password must be at least 6 characters");return}if(!F.address.street||!F.address.city||!F.address.pincode){alert("Please enter your address details");return}if(F.address.pincode.length!==6){alert("Please enter a valid 6-digit pincode");return}L(F)};return g.jsx("div",{className:"login-screen",children:g.jsxs("div",{className:"login-container",children:[g.jsxs("div",{className:"login-header",children:[g.jsx("h1",{className:"login-title",children:"DUKAAN "}),g.jsxs("p",{className:"login-subtitle",children:[f==="phone"&&"Welcome! Enter your phone number",f==="password"&&"Welcome back! Enter your password",f==="otp"&&"Verify your phone number",f==="register"&&"Complete your registration"]})]}),f==="phone"&&g.jsxs("div",{className:"login-form",children:[g.jsx("h2",{className:"form-title",children:"Phone Number"}),g.jsxs("div",{className:"phone-input-group",children:[g.jsxs("select",{value:t,onChange:H=>i(H.target.value),className:"country-code-select",children:[g.jsx("option",{value:"+91",children:"+91 (India)"}),g.jsx("option",{value:"+1",children:"+1 (US)"}),g.jsx("option",{value:"+44",children:"+44 (UK)"}),g.jsx("option",{value:"+971",children:"+971 (UAE)"})]}),g.jsx("input",{type:"tel",placeholder:"Phone Number",value:n,onChange:H=>{const z=H.target.value.replace(/\D/g,"").slice(0,10);e(z)},className:"phone-input",maxLength:"10"})]}),g.jsxs("button",{onClick:v,className:"login-btn",disabled:n.length!==10,children:[g.jsx(or,{className:"w-5 h-5"}),"Continue"]})]}),f==="password"&&g.jsxs("div",{className:"login-form",children:[g.jsx("h2",{className:"form-title",children:"Enter Password"}),g.jsxs("p",{className:"form-hint",children:["Phone: ",t,n]}),g.jsxs("div",{className:"input-group",children:[g.jsx(al,{className:"input-icon"}),g.jsx("input",{type:"password",placeholder:"Enter your password",value:o,onChange:H=>a(H.target.value),className:"password-input"})]}),g.jsxs("button",{onClick:N,className:"login-btn",children:[g.jsx(ji,{className:"w-5 h-5"}),"Login"]}),g.jsxs("button",{onClick:E,className:"otp-link-btn",style:{background:"transparent",border:"2px solid #4CAF50",color:"#4CAF50",marginTop:"12px"},children:[g.jsx(or,{className:"w-5 h-5"}),"Use OTP Instead"]}),g.jsx("button",{onClick:()=>window.location.reload(),className:"back-btn",children:"Change Phone Number"})]}),f==="otp"&&g.jsxs("div",{className:"login-form",children:[g.jsx("h2",{className:"form-title",children:"Enter OTP"}),g.jsxs("p",{className:"form-hint",children:["We sent a 6-digit code to ",t,n]}),g.jsx("input",{type:"text",placeholder:"Enter 6-digit OTP",value:c,onChange:H=>{const z=H.target.value.replace(/\D/g,"").slice(0,6);d(z)},className:"otp-input",maxLength:"6"}),g.jsxs("button",{onClick:A,className:"login-btn",disabled:c.length!==6,children:[g.jsx(ji,{className:"w-5 h-5"}),"Verify OTP"]}),g.jsx("button",{onClick:()=>window.location.reload(),className:"back-btn",children:"Change Phone Number"})]}),f==="register"&&g.jsxs("div",{className:"login-form",children:[g.jsx("h2",{className:"form-title",children:"Create Your Account"}),g.jsxs("p",{className:"form-hint",children:["Phone verified: ",t,n]}),g.jsxs("div",{className:"input-group",children:[g.jsx($i,{className:"input-icon"}),g.jsx("input",{type:"text",placeholder:"Your Full Name *",value:F.name,onChange:H=>U({...F,name:H.target.value}),className:"text-input"})]}),g.jsxs("div",{className:"input-group",children:[g.jsx(al,{className:"input-icon"}),g.jsx("input",{type:"password",placeholder:"Create Password (min 6 characters) *",value:F.password,onChange:H=>U({...F,password:H.target.value}),className:"password-input"})]}),g.jsxs("div",{className:"input-group",children:[g.jsx(al,{className:"input-icon"}),g.jsx("input",{type:"password",placeholder:"Confirm Password *",value:F.confirmPassword,onChange:H=>U({...F,confirmPassword:H.target.value}),className:"password-input"})]}),g.jsx("div",{className:"registration-divider",children:g.jsx("span",{children:"Your Address"})}),g.jsx("input",{type:"text",placeholder:"Street / Area / Village *",value:F.address.street,onChange:H=>U({...F,address:{...F.address,street:H.target.value}}),className:"registration-input"}),g.jsxs("div",{className:"registration-row",children:[g.jsx("input",{type:"text",placeholder:"City *",value:F.address.city,onChange:H=>U({...F,address:{...F.address,city:H.target.value}}),className:"registration-input",style:{flex:1}}),g.jsx("input",{type:"text",placeholder:"Pincode *",value:F.address.pincode,onChange:H=>{const z=H.target.value.replace(/\D/g,"").slice(0,6);U({...F,address:{...F.address,pincode:z}})},className:"registration-input",style:{flex:1},maxLength:"6"})]}),g.jsxs("select",{value:F.address.state,onChange:H=>U({...F,address:{...F.address,state:H.target.value}}),className:"registration-select",children:[g.jsx("option",{value:"Andhra Pradesh",children:"Andhra Pradesh"}),g.jsx("option",{value:"Telangana",children:"Telangana"}),g.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),g.jsx("option",{value:"Karnataka",children:"Karnataka"}),g.jsx("option",{value:"Other",children:"Other"})]}),g.jsxs("button",{onClick:Q,className:"login-btn",disabled:!F.name||!F.password||!F.confirmPassword,children:[g.jsx(ji,{className:"w-5 h-5"}),"Complete Registration"]})]}),g.jsx("div",{id:"recaptcha-container",style:{display:"none"}})]})})},B3=({onSave:n,onClose:e})=>{const[t,i]=X.useState({name:"",email:"",password:"",confirmPassword:""}),o=c=>{if(c.preventDefault(),!t.name.trim()){alert("Please enter your name");return}if(t.password&&t.password.length<6){alert("Password must be at least 6 characters");return}if(t.password&&t.password!==t.confirmPassword){alert("Passwords do not match");return}if(t.email&&!t.email.includes("@")){alert("Please enter a valid email address");return}n({name:t.name.trim(),email:t.email.trim()||null,password:t.password||null,profileCompleted:!0})},a=()=>{n({name:null,email:null,password:null,profileCompleted:!1})};return g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-content profile-setup-modal",onClick:c=>c.stopPropagation(),style:{padding:"0"},children:[g.jsxs("div",{className:"modal-header profile-setup-header",children:[g.jsx("h3",{className:"modal-title",style:{color:"white",margin:0,fontSize:"24px",fontWeight:"700"},children:"Welcome! "}),g.jsx("p",{style:{fontSize:"15px",color:"rgba(255,255,255,0.95)",marginTop:"10px",margin:0},children:"Just tell us your name to get started"})]}),g.jsxs("form",{onSubmit:o,className:"profile-setup-form",children:[g.jsxs("div",{className:"form-group",style:{marginBottom:"22px"},children:[g.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",fontWeight:"600",fontSize:"15px"},children:[g.jsx($i,{className:"w-5 h-5"}),"Your Name *"]}),g.jsx("input",{type:"text",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"Enter your full name",value:t.name,onChange:c=>i({...t,name:c.target.value}),required:!0,autoFocus:!0})]}),g.jsxs("div",{style:{background:"#f5f5f5",padding:"18px",borderRadius:"12px",marginBottom:"24px"},children:[g.jsx("p",{style:{fontSize:"14px",color:"#666",margin:"0 0 16px 0",fontWeight:"600"},children:"Optional (for future logins)"}),g.jsxs("div",{className:"form-group",style:{marginBottom:"14px"},children:[g.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"14px"},children:[g.jsx(W2,{className:"w-5 h-5"}),"Email Address"]}),g.jsx("input",{type:"email",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"your@email.com (optional)",value:t.email,onChange:c=>i({...t,email:c.target.value})})]}),g.jsxs("div",{className:"form-group",style:{marginBottom:"14px"},children:[g.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"14px"},children:[g.jsx(al,{className:"w-5 h-5"}),"Password"]}),g.jsx("input",{type:"password",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"Minimum 6 characters (optional)",value:t.password,onChange:c=>i({...t,password:c.target.value})})]}),t.password&&g.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[g.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"14px"},children:[g.jsx(al,{className:"w-5 h-5"}),"Confirm Password"]}),g.jsx("input",{type:"password",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"Re-enter password",value:t.confirmPassword,onChange:c=>i({...t,confirmPassword:c.target.value})})]}),g.jsx("p",{style:{fontSize:"11px",color:"#999",marginTop:"8px",marginBottom:0},children:" Skip password to continue with OTP-only login"})]}),g.jsxs("button",{type:"submit",className:"btn-primary",style:{width:"100%",padding:"16px",fontSize:"16px",fontWeight:"600",background:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)",border:"none",borderRadius:"12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"12px"},children:[g.jsx(ll,{className:"w-5 h-5"}),"Complete Setup"]}),g.jsx("button",{type:"button",onClick:a,className:"btn-secondary",style:{width:"100%",padding:"14px",fontSize:"14px",fontWeight:"500",background:"transparent",color:"#4CAF50",border:"2px solid #4CAF50",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s"},children:"Skip for Now"}),g.jsx("p",{style:{fontSize:"11px",color:"#999",textAlign:"center",marginTop:"12px",marginBottom:0},children:"You can complete your profile later before placing orders"})]})]})})},H3=({addresses:n,onAddAddress:e,onEditAddress:t,onDeleteAddress:i,onSetDefault:o,onClose:a})=>g.jsx("div",{className:"modal-overlay",onClick:a,children:g.jsxs("div",{className:"modal-content address-manager-modal",onClick:c=>c.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h3",{className:"modal-title",children:"Manage Addresses"}),g.jsx("button",{onClick:a,className:"modal-close-btn",children:g.jsx(aa,{className:"w-6 h-6"})})]}),g.jsxs("div",{className:"address-manager-body",children:[g.jsxs("button",{onClick:e,className:"add-address-btn",children:[g.jsx(ch,{className:"w-5 h-5"}),"Add New Address"]}),n.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(ea,{className:"w-16 h-16 text-gray-400"}),g.jsx("p",{children:"No saved addresses yet"})]}):g.jsx("div",{className:"addresses-list",children:n.map(c=>g.jsxs("div",{className:"address-card",children:[g.jsxs("div",{className:"address-card-header",children:[g.jsxs("div",{className:"address-label-section",children:[g.jsx("span",{className:`address-label-badge ${c.label.toLowerCase()}`,children:c.label}),c.isDefault&&g.jsx("span",{className:"default-badge",children:"Default"})]}),g.jsxs("div",{className:"address-actions",children:[g.jsx("button",{onClick:()=>t(c),className:"icon-btn",title:"Edit",children:g.jsx(dh,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>i(c.id),className:"icon-btn delete",title:"Delete",children:g.jsx(Hc,{className:"w-4 h-4"})})]})]}),g.jsxs("div",{className:"address-card-body",children:[g.jsx(ea,{className:"w-4 h-4 text-gray-500"}),g.jsx("p",{className:"address-text",children:c.fullAddress})]}),c.deliveryInstructions&&g.jsxs("p",{className:"address-instructions",children:[g.jsx("strong",{children:"Instructions:"})," ",c.deliveryInstructions]}),!c.isDefault&&g.jsx("button",{onClick:()=>o(c.id),className:"set-default-btn",children:"Set as Default"})]},c.id))})]})]})}),G3=({onSave:n,onClose:e,editingAddress:t})=>{const[i,o]=X.useState({label:t?.label||"Home",fullAddress:t?.fullAddress||"",deliveryInstructions:t?.deliveryInstructions||"",latitude:t?.latitude||null,longitude:t?.longitude||null}),[a,c]=X.useState(!1),d=()=>{"geolocation"in navigator?(c(!0),navigator.geolocation.getCurrentPosition(async h=>{const{latitude:v,longitude:E}=h.coords;try{const L=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${v}&lon=${E}&addressdetails=1`)).json()).display_name||`${v.toFixed(6)}, ${E.toFixed(6)}`;o({...i,fullAddress:L,latitude:v,longitude:E}),c(!1)}catch(A){console.error("Error getting address:",A),o({...i,fullAddress:`Location: ${v.toFixed(6)}, ${E.toFixed(6)}`,latitude:v,longitude:E}),c(!1)}},h=>{console.error("Geolocation error:",h),alert("Unable to get your location. Please enter address manually or check location permissions."),c(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):alert("Geolocation is not supported by your device.")},f=h=>{if(h.preventDefault(),!i.fullAddress.trim()){alert("Please enter an address");return}n(i)};return g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h3",{className:"modal-title",children:t?"Edit Address":"Add New Address"}),g.jsx("button",{onClick:e,className:"modal-close-btn",children:g.jsx(aa,{className:"w-6 h-6"})})]}),g.jsxs("form",{onSubmit:f,className:"address-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Address Label"}),g.jsxs("select",{className:"form-input",value:i.label,onChange:h=>o({...i,label:h.target.value}),children:[g.jsx("option",{value:"Home",children:"Home"}),g.jsx("option",{value:"Work",children:"Work"}),g.jsx("option",{value:"Other",children:"Other"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Full Address"}),g.jsx("textarea",{className:"form-input",rows:"3",placeholder:"Enter complete delivery address",value:i.fullAddress,onChange:h=>o({...i,fullAddress:h.target.value}),required:!0}),g.jsxs("button",{type:"button",onClick:d,disabled:a,style:{width:"100%",marginTop:"10px",background:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)",color:"white",border:"none",borderRadius:"8px",padding:"12px 16px",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",fontWeight:"600",opacity:a?.6:1,transition:"opacity 0.2s"},children:[g.jsx(tI,{className:"w-4 h-4"}),a?"Getting Location...":"Use My Location"]}),i.latitude&&i.longitude&&g.jsxs("p",{className:"form-hint",style:{color:"#4CAF50",marginTop:"8px",display:"flex",alignItems:"center",gap:"4px",fontSize:"13px"},children:[g.jsx(ea,{className:"w-4 h-4"}),"Location captured: ",i.latitude.toFixed(6),", ",i.longitude.toFixed(6)]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Delivery Instructions (Optional)"}),g.jsx("input",{type:"text",className:"form-input",placeholder:"e.g., Ring bell twice, Gate code 1234",value:i.deliveryInstructions,onChange:h=>o({...i,deliveryInstructions:h.target.value})})]}),g.jsxs("div",{className:"form-actions",children:[g.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),g.jsxs("button",{type:"submit",className:"btn-primary",children:[g.jsx(ll,{className:"w-5 h-5"}),t?"Update Address":"Add Address"]})]})]})]})})},z3=()=>{const{db:n}=Is(),[e,t]=X.useState([]),[i,o]=X.useState(!0);return X.useEffect(()=>{const a=En(n,"artifacts",xe,"public","data","users"),c=Hi(a,d=>{const f=d.docs.map(h=>({id:h.id,...h.data()}));f.sort((h,v)=>new Date(v.createdAt||0)-new Date(h.createdAt||0)),t(f),o(!1)});return()=>c()},[n]),i?g.jsx("div",{className:"loading-state",children:"Loading users..."}):g.jsxs("div",{className:"users-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h3",{className:"section-subtitle",children:"Registered Users"}),g.jsx("span",{className:"count-badge",children:e.length})]}),g.jsx("p",{className:"section-description",children:"All users who have registered via phone authentication."}),e.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx($i,{className:"empty-icon"}),g.jsx("p",{className:"empty-text",children:"No users registered yet"})]}):g.jsx("div",{className:"users-list",children:e.map(a=>g.jsxs("div",{className:"user-card",children:[g.jsx("div",{className:"user-avatar",children:g.jsx($i,{className:"w-8 h-8"})}),g.jsxs("div",{className:"user-info",children:[g.jsx("h4",{className:"user-name",children:a.name||"No name"}),g.jsxs("p",{className:"user-phone",children:[g.jsx(or,{className:"w-4 h-4"}),g.jsx("a",{href:`tel:${a.phoneNumber}`,children:a.phoneNumber})]}),a.email&&g.jsx("p",{className:"user-email",children:a.email}),g.jsxs("p",{className:"user-date",children:["Joined: ",a.createdAt?new Date(a.createdAt).toLocaleDateString():"Unknown"]})]})]},a.id))})]})};function Om({onTranscript:n,language:e="en",className:t=""}){const[i,o]=X.useState(!1),[a,c]=X.useState(!0),[d]=X.useState(()=>new io);X.useEffect(()=>{c(io.isSupported())},[]);const f=async()=>{try{await d.startRecording(()=>{console.log("[VoiceInput] Auto-stopping after silence"),h()}),o(!0)}catch(E){console.error("[VoiceInput] Recording error:",E),E.message==="FEATURE_NOT_SUPPORTED"?alert(e==="te"?"     ":"Voice recording is not supported on your device"):E.name==="NotAllowedError"||E.name==="PermissionDeniedError"?alert(e==="te"?"  ":"Please allow microphone access"):alert(e==="te"?"   ":"Failed to start voice recording")}},h=async()=>{try{const E=await d.stopRecording(),A=await d.blobToBase64(E),N=await Py(A,E.type);n(N)}catch(E){console.error("[VoiceInput] Transcription error:",E),alert(e==="te"?" .  ":"Voice input failed. Please try again")}finally{o(!1)}},v=async()=>{i?await h():await f()};return a?g.jsx("button",{type:"button",onClick:v,className:`voice-input-btn ${i?"listening":""} ${t}`,"aria-label":e==="te"?" ":"Voice Input",title:i?e==="te"?"... 2    ":"Speaking... Auto-stops after 2s silence":e==="te"?"  ":"Tap mic and speak",children:i?g.jsx(Ay,{size:18}):g.jsx(Sy,{size:18})}):null}const Fm=({onTranscript:n,className:e=""})=>{const[t,i]=X.useState(!1),[o,a]=X.useState(!0),[c]=X.useState(()=>new io);X.useEffect(()=>{a(io.isSupported())},[]);const d=async E=>{console.log("[BilingualVoiceInput] Recognized:",E);try{const{english:A,telugu:N}=await S3(E);console.log("[BilingualVoiceInput] Generated EN:",A,"TE:",N),n({english:A||"",telugu:N||"",original:E||""})}catch(A){console.error("[BilingualVoiceInput] Translation error:",A),n({english:E||"",telugu:E||"",original:E||""})}},f=async()=>{try{await c.startRecording(()=>{console.log("[BilingualVoiceInput] Auto-stopping after silence"),h()}),i(!0)}catch(E){console.error("[BilingualVoiceInput] Recording error:",E),E.message==="FEATURE_NOT_SUPPORTED"?alert(`Voice recording is not supported on your device
     `):E.name==="NotAllowedError"||E.name==="PermissionDeniedError"?alert(`Please allow microphone access
  `):alert(`Failed to start voice recording
   `)}},h=async()=>{try{const E=await c.stopRecording(),A=await c.blobToBase64(E),N=await Py(A,E.type);await d(N)}catch(E){console.error("[BilingualVoiceInput] Transcription error:",E),alert(`Voice input failed. Please try again
 .  `)}finally{i(!1)}},v=async()=>{t?await h():await f()};return o?g.jsx("button",{type:"button",onClick:v,className:`voice-input-btn ${t?"listening":""} ${e}`,title:t?"Speaking... Auto-stops after 2s silence":"Tap and speak (auto-translates to both languages)",children:t?g.jsx(Ay,{className:"w-4 h-4"}):g.jsx(Sy,{className:"w-4 h-4"})}):null},j3=({products:n,allOrders:e,allRiders:t,language:i,onExit:o,categoriesData:a,subcategoriesData:c,logoUrl:d,onLogoChange:f})=>{const{db:h,storage:v}=Is(),E=Zn[i],[A,N]=X.useState("orders"),[L,F]=X.useState(new Date().toISOString().split("T")[0]),[U,Q]=X.useState(!1),[H,z]=X.useState(""),[re,ee]=X.useState(null),[he,O]=X.useState(null),[D,b]=X.useState(!1),[M,k]=X.useState({nameEn:"",nameTe:"",price:"",discountedPrice:"",weight:"",imageUrl:"",category:"",subcategoryId:"",isPopular:!1,outOfStock:!1}),[V,x]=X.useState(null),[we,Be]=X.useState(""),[ne,pe]=X.useState("all"),[se,Ee]=X.useState(null),[B,ie]=X.useState(!1),[de,fe]=X.useState({nameEn:"",nameTe:"",imageUrl:"",color:"#4CAF50",gradient:""}),[_e,Ve]=X.useState(null),[Ce,He]=X.useState(null),[Qe,Rt]=X.useState(!1),[yt,Qt]=X.useState({nameEn:"",nameTe:"",categoryId:"",imageUrl:""}),[mi,Mn]=X.useState(null),[Pi,Rs]=X.useState(null),[es,bt]=X.useState(null),[fn,_t]=X.useState("active"),[Pt,zn]=X.useState(!1),[ts,Ns]=X.useState("orders"),[Di,Mi]=X.useState(new Set),kn=[{id:"groceries",nameEn:"Groceries",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1588964895597-cfccd6e2dbf9?w=100&h=100&fit=crop",color:"#4CAF50",gradient:"linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%)"},{id:"vegetables",nameEn:"Vegetables",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=100&h=100&fit=crop",color:"#8BC34A",gradient:"linear-gradient(135deg, #8BC34A 0%, #9CCC65 100%)"},{id:"milk",nameEn:"Milk",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100&h=100&fit=crop",color:"#5DADE2",gradient:"linear-gradient(135deg, #5DADE2 0%, #74B9E8 100%)"},{id:"snacks",nameEn:"Snacks",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1599490659213-e2b9527bd087?w=100&h=100&fit=crop",color:"#FF9800",gradient:"linear-gradient(135deg, #FF9800 0%, #FFA726 100%)"},{id:"medicines",nameEn:"Medicines",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1471864190281-a93a3070b6de?w=100&h=100&fit=crop",color:"#2196F3",gradient:"linear-gradient(135deg, #2196F3 0%, #42A5F5 100%)"},{id:"electronics",nameEn:"Electronics",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=100&h=100&fit=crop",color:"#9C27B0",gradient:"linear-gradient(135deg, #9C27B0 0%, #AB47BC 100%)"}],ot=async()=>{try{if(!(await Ey(En(h,"artifacts",xe,"public","data","categories"))).empty){alert("Categories already exist. Clear existing categories first if you want to reseed.");return}const J=[{id:"groceries",nameEn:"Groceries",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1588964895597-cfccd6e2dbf9?w=100&h=100&fit=crop",color:"#4CAF50",gradient:"linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%)"},{id:"vegetables",nameEn:"Vegetables",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=100&h=100&fit=crop",color:"#8BC34A",gradient:"linear-gradient(135deg, #8BC34A 0%, #9CCC65 100%)"},{id:"milk",nameEn:"Milk & Dairy",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100&h=100&fit=crop",color:"#5DADE2",gradient:"linear-gradient(135deg, #5DADE2 0%, #74B9E8 100%)"},{id:"snacks",nameEn:"Snacks",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1599490659213-e2b9527bd087?w=100&h=100&fit=crop",color:"#FF9800",gradient:"linear-gradient(135deg, #FF9800 0%, #FFA726 100%)"},{id:"medicines",nameEn:"Medicines",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1471864190281-a93a3070b6de?w=100&h=100&fit=crop",color:"#2196F3",gradient:"linear-gradient(135deg, #2196F3 0%, #42A5F5 100%)"},{id:"electronics",nameEn:"Electronics",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=100&h=100&fit=crop",color:"#9C27B0",gradient:"linear-gradient(135deg, #9C27B0 0%, #AB47BC 100%)"}],ge=[{id:"groceries-dals",nameEn:"Dals & Pulses",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1572449102205-d51f05b2a0e0?w=100&h=100&fit=crop"},{id:"groceries-rice",nameEn:"Rice & Rice Products",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1586201375761-83865001e31c?w=100&h=100&fit=crop"},{id:"groceries-oils",nameEn:"Oils & Ghee",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?w=100&h=100&fit=crop"},{id:"groceries-spices",nameEn:"Spices",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1596040033229-a0b0b7b98adc?w=100&h=100&fit=crop"},{id:"groceries-flours",nameEn:"Flours & Atta",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b?w=100&h=100&fit=crop"},{id:"vegetables-leafy",nameEn:"Leafy Vegetables",nameTe:" ",categoryId:"vegetables",imageUrl:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=100&h=100&fit=crop"},{id:"vegetables-root",nameEn:"Root Vegetables",nameTe:"",categoryId:"vegetables",imageUrl:"https://images.unsplash.com/photo-1447175008436-054170c2e979?w=100&h=100&fit=crop"},{id:"vegetables-seasonal",nameEn:"Seasonal Vegetables",nameTe:" ",categoryId:"vegetables",imageUrl:"https://images.unsplash.com/photo-1566385101042-1a0aa0c1268c?w=100&h=100&fit=crop"},{id:"milk-fresh",nameEn:"Fresh Milk",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100&h=100&fit=crop"},{id:"milk-curd",nameEn:"Curd & Yogurt",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1571212515935-c0629c19f520?w=100&h=100&fit=crop"},{id:"milk-butter",nameEn:"Butter & Ghee",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1589985270826-4b7bb135bc9d?w=100&h=100&fit=crop"},{id:"milk-cheese",nameEn:"Cheese & Paneer",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1452195100486-9cc805987862?w=100&h=100&fit=crop"},{id:"snacks-namkeen",nameEn:"Namkeen",nameTe:"",categoryId:"snacks",imageUrl:"https://images.unsplash.com/photo-1621939514649-280e2ee25f60?w=100&h=100&fit=crop"},{id:"snacks-biscuits",nameEn:"Biscuits & Cookies",nameTe:"",categoryId:"snacks",imageUrl:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?w=100&h=100&fit=crop"},{id:"snacks-chips",nameEn:"Chips",nameTe:"",categoryId:"snacks",imageUrl:"https://images.unsplash.com/photo-1600952841320-db92ec8b5d2a?w=100&h=100&fit=crop"},{id:"medicines-firstaid",nameEn:"First Aid",nameTe:" ",categoryId:"medicines",imageUrl:"https://images.unsplash.com/photo-1603398938378-e54eab446dde?w=100&h=100&fit=crop"},{id:"medicines-supplements",nameEn:"Health Supplements",nameTe:"",categoryId:"medicines",imageUrl:"https://images.unsplash.com/photo-1471864190281-a93a3070b6de?w=100&h=100&fit=crop"},{id:"electronics-mobiles",nameEn:"Mobiles & Accessories",nameTe:"",categoryId:"electronics",imageUrl:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=100&h=100&fit=crop"},{id:"electronics-headphones",nameEn:"Headphones & Earphones",nameTe:"",categoryId:"electronics",imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100&h=100&fit=crop"},{id:"electronics-chargers",nameEn:"Chargers & Cables",nameTe:"",categoryId:"electronics",imageUrl:"https://images.unsplash.com/photo-1583863788434-e58a36330cf0?w=100&h=100&fit=crop"}];for(const Oe of J){const{id:Ie,...Ge}=Oe;await Qn(je(h,"artifacts",xe,"public","data","categories",Ie),{...Ge,createdAt:new Date().toISOString()})}for(const Oe of ge){const{id:Ie,...Ge}=Oe;await Qn(je(h,"artifacts",xe,"public","data","subcategories",Ie),{...Ge,createdAt:new Date().toISOString()})}alert("Default categories and subcategories added successfully! Refresh the page to see them.")}catch(R){console.error("Error seeding data:",R),alert(`Failed to seed data: ${R.message}`)}},Sn=R=>{const J=R.target.files[0];if(J){if(J.size>5e5){alert("Image size should be less than 500KB");return}const ge=new FileReader;ge.onloadend=()=>{k({...M,imageUrl:ge.result}),Ee(ge.result)},ge.readAsDataURL(J)}},Wt=R=>{const J=R.target.files[0];if(J){if(J.size>5e5){alert("Image size should be less than 500KB");return}const ge=new FileReader;ge.onloadend=()=>{fe({...de,imageUrl:ge.result}),He(ge.result)},ge.readAsDataURL(J)}},ns=R=>{const J=R.target.files[0];if(J){if(J.size>5e5){alert("Image size should be less than 500KB");return}const ge=new FileReader;ge.onloadend=()=>{Qt({...yt,imageUrl:ge.result}),Rs(ge.result)},ge.readAsDataURL(J)}},xs=async(R,J)=>{console.log("[Shopkeeper] Updating order:",R,"to status:",J),console.log("[Shopkeeper] DB available:",!!h,"AppId:",xe);try{if(!h)throw new Error("Firebase database not initialized");await Gn(je(h,"artifacts",xe,"public","data","orders",R),{status:J,updatedAt:new Date().toISOString()}),alert(`Order status updated to ${J}!`)}catch(ge){console.error("Error updating order:",ge),alert(`Failed to update order status: ${ge.message}`)}},bs=async R=>{const J=prompt("Please enter reason for cancellation:");if(!(!J||J.trim()===""))try{if(!h)throw new Error("Firebase database not initialized");await Gn(je(h,"artifacts",xe,"public","data","orders",R),{status:"cancelled",cancellationReason:J.trim(),updatedAt:new Date().toISOString()}),alert("Order cancelled successfully!")}catch(ge){console.error("Error cancelling order:",ge),alert(`Failed to cancel order: ${ge.message}`)}},Xt=R=>{bt(R),zn(!0)},Vn=R=>{const J=window.open("","_blank"),ge=new Date(R.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),Oe=new Date(R.createdAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),Ie=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Receipt - ${R.orderNumber||R.id.substring(0,8)}</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { 
              font-family: 'Courier New', monospace; 
              padding: 30px 20px; 
              max-width: 320px; 
              margin: 0 auto;
              background: #fff;
              color: #333;
            }
            .receipt-header { 
              text-align: center; 
              margin-bottom: 20px;
              color: #999;
            }
            .receipt-header h1 { 
              font-size: 18px; 
              font-style: italic;
              font-weight: 400;
              margin-bottom: 10px;
              letter-spacing: 2px;
            }
            .receipt-number { 
              text-align: center;
              font-size: 11px;
              margin-bottom: 20px;
              color: #666;
            }
            .items-list { 
              margin-bottom: 20px;
            }
            .item-row { 
              display: flex;
              justify-content: space-between;
              margin-bottom: 8px;
              font-size: 13px;
            }
            .item-name {
              flex: 1;
              padding-right: 10px;
            }
            .item-price {
              text-align: right;
              white-space: nowrap;
            }
            .divider {
              border-top: 1px dashed #ccc;
              margin: 15px 0;
            }
            .total-row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 8px;
              font-size: 13px;
            }
            .total-row.grand {
              font-weight: bold;
              font-size: 16px;
              margin-top: 10px;
            }
            .footer {
              text-align: center;
              margin-top: 25px;
              font-size: 12px;
              color: #666;
            }
            .print-buttons {
              text-align: center;
              margin-top: 30px;
            }
            .print-buttons button {
              background: #333;
              color: white;
              border: none;
              padding: 10px 25px;
              font-size: 14px;
              cursor: pointer;
              margin: 0 5px;
              border-radius: 3px;
            }
            .print-buttons button:hover {
              background: #555;
            }
            @media print {
              body { padding: 10px; }
              .print-buttons { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="receipt-header">
            <h1>DUKAAN</h1>
            <div style="font-size: 11px; color: #999; margin-top: 5px;">
              ${R.customerName||"Customer"}<br>
              ${ge} ${Oe}
            </div>
          </div>
          
          <div class="receipt-number">
            ${R.orderNumber||`RECEIPT # ${R.id.substring(0,8).toUpperCase()}`}
          </div>

          <div class="items-list">
            ${R.items.map(Ge=>`
                <div class="item-row">
                  <span class="item-name">${R.customerLanguage==="te"?Ge.nameTe||Ge.nameEn||Ge.name:Ge.nameEn||Ge.name}</span>
                  <span class="item-price">${((Ge.price||0)*Ge.quantity).toFixed(2)}</span>
                </div>
              `).join("")}
          </div>

          <div class="divider"></div>

          ${R.totalSavings&&R.totalSavings>0?`
            <div class="total-row">
              <span>You Saved</span>
              <span style="color: #666;">${R.totalSavings.toFixed(2)}</span>
            </div>
          `:""}

          <div class="total-row grand">
            <span>TOTAL</span>
            <span>${R.total.toFixed(2)}</span>
          </div>

          <div class="footer">
            *** THANK YOU ***
          </div>

          <div class="print-buttons">
            <button onclick="window.print()">Print</button>
            <button onclick="window.close()">Close</button>
          </div>
        </body>
      </html>
    `;J.document.write(Ie),J.document.close()},Un=async R=>{if(R.preventDefault(),!M.category||!M.subcategoryId){alert("Please select both Category and Subcategory before saving the product.");return}try{if(!h)throw new Error("Firebase database not initialized");const J={...M,price:parseFloat(M.price),discountedPrice:M.discountedPrice?parseFloat(M.discountedPrice):null,isPopular:M.isPopular||!1};V?(await Gn(je(h,"artifacts",xe,"public","data","products",V),J),alert("Product updated successfully!")):(J.sortOrder=n.length,J.createdAt=new Date().toISOString(),await pf(En(h,"artifacts",xe,"public","data","products"),J),alert("Product added successfully!")),k({nameEn:"",nameTe:"",price:"",discountedPrice:"",weight:"",imageUrl:"",category:"",subcategoryId:"",isPopular:!1,outOfStock:!1}),Ee(null),Q(!1),x(null)}catch(J){console.error("Error saving product:",J),console.error("Error code:",J.code),console.error("Error message:",J.message),console.error("AppId:",xe),console.error("Database instance:",h?"initialized":"not initialized"),alert(`Failed to save product: ${J.message||J.code||"Unknown error"}`)}},wn=R=>{k({nameEn:R.nameEn||R.name||"",nameTe:R.nameTe||"",price:R.price.toString(),discountedPrice:R.discountedPrice?.toString()||"",weight:R.weight,imageUrl:R.imageUrl||"",category:R.category||"",subcategoryId:R.subcategoryId||"",isPopular:R.isPopular||!1,outOfStock:R.outOfStock||!1}),Ee(R.imageUrl||null),x(R.id),Q(!0),N("products")},jn=async R=>{if(console.log("[Shopkeeper] Delete product clicked:",R),window.confirm("Are you sure you want to delete this product?"))try{if(!h)throw new Error("Firebase database not initialized");await el(je(h,"artifacts",xe,"public","data","products",R)),alert("Product deleted successfully!")}catch(J){console.error("Error deleting product:",J),alert(`Failed to delete product: ${J.message}`)}},is=async(R,J)=>{console.log("[Shopkeeper] Toggle popular:",R,"current:",J);try{if(!h)throw new Error("Firebase database not initialized");await Gn(je(h,"artifacts",xe,"public","data","products",R),{isPopular:!J}),console.log("[Shopkeeper] Popular status updated successfully")}catch(ge){console.error("Error updating popular status:",ge),alert(`Failed to update popular status: ${ge.message}`)}},ti=async(R,J,ge,Oe)=>{if(!(ge===Oe||ge<0||Oe<0||ge>=J.length||Oe>=J.length))try{const Ie=[],Ge=[...J],[mn]=Ge.splice(ge,1);Ge.splice(Oe,0,mn),Ge.forEach((Dt,ca)=>{Ie.push(Qn(je(h,"artifacts",xe,"public","data",R,Dt.id),{sortOrder:ca},{merge:!0}))}),await Promise.all(Ie)}catch(Ie){console.error("Error reordering items:",Ie),alert("Failed to reorder items")}},ni=async(R,J)=>{const ge=[...a].sort((Ge,mn)=>(Ge.sortOrder||0)-(mn.sortOrder||0)),Oe=ge.findIndex(Ge=>Ge.id===R),Ie=J==="up"?Oe-1:Oe+1;await ti("categories",ge,Oe,Ie)},gi=async(R,J)=>{const ge=[...c].sort((Ge,mn)=>(Ge.sortOrder||0)-(mn.sortOrder||0)),Oe=ge.findIndex(Ge=>Ge.id===R),Ie=J==="up"?Oe-1:Oe+1;await ti("subcategories",ge,Oe,Ie)},dt=async(R,J)=>{const ge=[...n].sort((Ge,mn)=>(Ge.sortOrder||0)-(mn.sortOrder||0)),Oe=ge.findIndex(Ge=>Ge.id===R),Ie=J==="up"?Oe-1:Oe+1;await ti("products",ge,Oe,Ie)},Ps=async R=>{R.preventDefault();try{const J=de.nameEn.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),ge={nameEn:de.nameEn,nameTe:de.nameTe,imageUrl:de.imageUrl,color:de.color,gradient:de.gradient||`linear-gradient(135deg, ${de.color} 0%, ${de.color}dd 100%)`,sortOrder:_e?void 0:a.length,createdAt:new Date().toISOString()};_e?(await Qn(je(h,"artifacts",xe,"public","data","categories",_e),ge,{merge:!0}),alert("Category updated successfully!")):(await Qn(je(h,"artifacts",xe,"public","data","categories",J),ge),alert("Category added successfully!")),fe({nameEn:"",nameTe:"",imageUrl:"",color:"#4CAF50",gradient:""}),ie(!1),Ve(null),He(null)}catch(J){console.error("Error saving category:",J),alert(`Failed to save category: ${J.message}`)}},Ln=R=>{fe({nameEn:R.nameEn||"",nameTe:R.nameTe||"",imageUrl:R.imageUrl||"",color:R.color||"#4CAF50",gradient:R.gradient||""}),He(R.imageUrl||null),Ve(R.id),ie(!0)},yi=async R=>{if(window.confirm("Are you sure? This will affect related subcategories and products."))try{await el(je(h,"artifacts",xe,"public","data","categories",R)),alert("Category deleted successfully!")}catch(J){console.error("Error deleting category:",J),alert(`Failed to delete category: ${J.message}`)}},Ds=async R=>{R.preventDefault();try{const J=`${yt.categoryId}-${yt.nameEn.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}`,ge={nameEn:yt.nameEn,nameTe:yt.nameTe,categoryId:yt.categoryId,imageUrl:yt.imageUrl,sortOrder:mi?void 0:c.length,createdAt:new Date().toISOString()};mi?(await Qn(je(h,"artifacts",xe,"public","data","subcategories",mi),ge,{merge:!0}),alert("Subcategory updated successfully!")):(await Qn(je(h,"artifacts",xe,"public","data","subcategories",J),ge),alert("Subcategory added successfully!")),Qt({nameEn:"",nameTe:"",categoryId:"",imageUrl:""}),Rt(!1),Mn(null),Rs(null)}catch(J){console.error("Error saving subcategory:",J),alert(`Failed to save subcategory: ${J.message}`)}},lr=R=>{Qt({nameEn:R.nameEn,nameTe:R.nameTe||"",categoryId:R.categoryId,icon:R.icon||""}),Mn(R.id),Rt(!0)},ii=async R=>{if(window.confirm("Are you sure? This will affect related products."))try{await el(je(h,"artifacts",xe,"public","data","subcategories",R)),alert("Subcategory deleted successfully!")}catch(J){console.error("Error deleting subcategory:",J),alert(`Failed to delete subcategory: ${J.message}`)}},wt=R=>{switch(R){case"pending":return"#9E9E9E";case"accepted":return"#2196F3";case"out_for_delivery":return"#FF9800";case"ready_for_pickup":return"#9C27B0";case"delivered":return"#4CAF50";case"completed":return"#4CAF50";case"cancelled":return"#f44336";default:return"#9E9E9E"}},Ye=R=>{switch(R){case"pending":return"PENDING";case"accepted":return"ACCEPTED";case"out_for_delivery":return"OUT FOR DELIVERY";case"ready_for_pickup":return"READY FOR PICKUP";case"delivered":return"DELIVERED";case"completed":return"COMPLETED";case"cancelled":return"CANCELLED";default:return R.toUpperCase()}},it=["pending","accepted","out_for_delivery","ready_for_pickup"],vt=["delivered","cancelled","completed"],pn=[...e.filter(R=>fn==="active"?it.includes(R.status):vt.includes(R.status))].sort((R,J)=>new Date(J.createdAt)-new Date(R.createdAt)),Gt=n.filter(R=>{const J=R.nameEn||R.nameTe||R.name||"",ge=R.nameTe||"",Oe=J.toLowerCase().includes(we.toLowerCase())||ge.includes(we),Ie=ne==="all"||R.category===ne;return Oe&&Ie}),co=n.filter(R=>R.isPopular);return g.jsxs("div",{className:"shopkeeper-dashboard",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:o,className:"back-button",children:g.jsx(Ni,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:E.shopkeeperDashboard})]}),g.jsxs("div",{className:"shopkeeper-search-bar",children:[g.jsx(iI,{className:"w-5 h-5 text-gray-400"}),g.jsx("input",{type:"text",placeholder:"Search products, orders...",value:we,onChange:R=>Be(R.target.value),className:"search-input"})]}),g.jsxs("div",{className:"shopkeeper-tabs",children:[g.jsxs("button",{className:`tab-button ${A==="orders"?"active":""}`,onClick:()=>N("orders"),children:[g.jsx(Tn,{className:"w-5 h-5"}),"Orders"]}),g.jsxs("button",{className:`tab-button ${A==="categories"?"active":""}`,onClick:()=>N("categories"),children:[g.jsx(H0,{className:"w-5 h-5"}),"Categories"]}),g.jsxs("button",{className:`tab-button ${A==="subcategories"?"active":""}`,onClick:()=>N("subcategories"),children:[g.jsx(ta,{className:"w-5 h-5"}),"Subcategories"]}),g.jsxs("button",{className:`tab-button ${A==="products"?"active":""}`,onClick:()=>N("products"),children:[g.jsx(Tn,{className:"w-5 h-5"}),"Products"]}),g.jsxs("button",{className:`tab-button ${A==="popular"?"active":""}`,onClick:()=>N("popular"),children:[g.jsx(km,{className:"w-5 h-5"}),"Popular"]}),g.jsxs("button",{className:`tab-button ${A==="users"?"active":""}`,onClick:()=>N("users"),children:[g.jsx($i,{className:"w-5 h-5"}),"Users"]}),g.jsxs("button",{className:`tab-button ${A==="riders"?"active":""}`,onClick:()=>N("riders"),children:[g.jsx($i,{className:"w-5 h-5"}),"Riders"]}),g.jsxs("button",{className:`tab-button ${A==="analytics"?"active":""}`,onClick:()=>N("analytics"),children:[g.jsx(EV,{className:"w-5 h-5"}),"Analytics"]})]}),g.jsxs("div",{className:"shopkeeper-content",children:[A==="orders"&&g.jsxs("div",{className:"orders-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h3",{className:"section-subtitle",children:"Orders Management"}),g.jsx("span",{className:"count-badge",children:e.length})]}),g.jsxs("div",{className:"order-tabs",children:[g.jsxs("button",{className:`order-tab-btn ${fn==="active"?"active":""}`,onClick:()=>_t("active"),children:["Active Orders (",it.reduce((R,J)=>R+e.filter(ge=>ge.status===J).length,0),")"]}),g.jsxs("button",{className:`order-tab-btn ${fn==="completed"?"active":""}`,onClick:()=>_t("completed"),children:["Completed Orders (",vt.reduce((R,J)=>R+e.filter(ge=>ge.status===J).length,0),")"]})]}),pn.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(Tn,{className:"w-16 h-16 text-gray-400"}),g.jsx("p",{children:E.noIncomingOrders})]}):g.jsx("div",{className:"shopkeeper-orders-list",children:pn.map(R=>g.jsxs("div",{className:"shopkeeper-order-card-enhanced",children:[g.jsxs("div",{className:"order-card-top",children:[g.jsxs("div",{className:"order-info-section",children:[g.jsxs("div",{className:"order-id-row",children:[g.jsx($i,{className:"w-4 h-4 text-gray-500"}),g.jsx("span",{className:"order-customer",children:R.orderNumber||`Order #${R.id.substring(0,8)}`})]}),g.jsxs("div",{className:"order-time-row",children:[g.jsx(uu,{className:"w-4 h-4 text-gray-400"}),g.jsx("span",{className:"order-timestamp",children:new Date(R.createdAt).toLocaleString()})]}),R.customerPhone&&g.jsxs("div",{className:"order-phone-row",children:[g.jsx(or,{className:"w-4 h-4 text-green-600"}),g.jsx("a",{href:`tel:${R.customerPhone}`,className:"order-phone-link",children:R.customerPhone})]})]}),g.jsx("div",{className:"order-status-badge-new",style:{backgroundColor:wt(R.status)},children:Ye(R.status)})]}),R.deliveryAddress&&g.jsxs("div",{className:"order-address-section",children:[g.jsx(ea,{className:"w-4 h-4 text-gray-500"}),g.jsx("span",{className:"order-address-text",children:R.deliveryAddress})]}),g.jsxs("div",{className:"order-items-container",children:[g.jsxs("button",{onClick:()=>{const J=new Set(Di);J.has(R.id)?J.delete(R.id):J.add(R.id),Mi(J)},className:"items-dropdown-toggle",children:[g.jsx(Tn,{className:"w-4 h-4"}),g.jsxs("span",{className:"items-count-text",children:[R.items.length," ",R.items.length===1?"Item":"Items"]}),Di.has(R.id)?g.jsx(Wd,{className:"w-4 h-4"}):g.jsx(Qd,{className:"w-4 h-4"})]}),Di.has(R.id)&&g.jsx("div",{className:"order-items-list-enhanced",children:R.items.map((J,ge)=>g.jsxs("div",{className:"order-item-row-enhanced",children:[g.jsx("img",{src:J.imageUrl||"https://via.placeholder.com/50",alt:J.nameEn||J.name,className:"order-item-image"}),g.jsxs("div",{className:"order-item-details",children:[g.jsx("span",{className:"item-name",children:J.nameEn||J.name}),J.nameTe&&J.nameTe!==J.nameEn&&g.jsx("span",{className:"item-name-te",children:J.nameTe}),g.jsx("span",{className:"item-weight",children:J.weight})]}),g.jsxs("span",{className:"item-quantity-badge",children:[" ",J.quantity]}),g.jsxs("span",{className:"item-price-bold",children:["",(J.price*J.quantity).toFixed(0)]})]},ge))})]}),g.jsxs("div",{className:"order-card-bottom",children:[g.jsxs("div",{className:"order-total-section",children:[g.jsx("span",{className:"total-label",children:E.total}),g.jsxs("span",{className:"total-amount-large",children:["",R.total.toFixed(0)]})]}),g.jsxs("div",{className:"order-management-section",children:[g.jsxs("div",{className:"order-status-controls",children:[g.jsx("label",{className:"status-dropdown-label",children:"Status:"}),g.jsxs("select",{value:R.status,onChange:J=>xs(R.id,J.target.value),className:"status-dropdown",disabled:R.status==="cancelled"||R.status==="delivered"||R.status==="completed",children:[g.jsx("option",{value:"pending",children:"Pending"}),g.jsx("option",{value:"accepted",children:"Accepted"}),R.deliveryMethod==="pickup"?g.jsxs(g.Fragment,{children:[g.jsx("option",{value:"ready_for_pickup",children:"Ready for Pickup"}),g.jsx("option",{value:"completed",children:"Completed"})]}):g.jsxs(g.Fragment,{children:[g.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),g.jsx("option",{value:"delivered",children:"Delivered"})]}),g.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),R.deliveryMethod==="delivery"&&(R.status==="ready_for_pickup"||R.status==="accepted"||R.status==="out_for_delivery"||R.status==="delivered")&&g.jsxs("div",{className:"rider-assignment-section",style:{marginTop:"12px"},children:[g.jsx("label",{className:"status-dropdown-label",style:{fontSize:"13px"},children:R.riderName?`Rider: ${R.riderName}`:"Assign Rider:"}),R.status!=="delivered"?g.jsxs("select",{value:R.riderId||"",onChange:async J=>{const ge=t.find(Oe=>Oe.id===J.target.value);if(ge)try{await Gn(je(h,"artifacts",xe,"public","data","orders",R.id),{riderId:ge.id,riderName:ge.name,riderPhone:ge.phone,updatedAt:new Date().toISOString()}),alert(`Rider ${ge.name} assigned successfully!`)}catch(Oe){console.error("Error assigning rider:",Oe),alert("Failed to assign rider")}},className:"status-dropdown",style:{fontSize:"13px",padding:"6px 8px"},children:[g.jsx("option",{value:"",children:"Select Rider"}),t&&t.map(J=>g.jsxs("option",{value:J.id,children:[J.name," - ",J.phone]},J.id))]}):g.jsx("span",{style:{fontSize:"13px",color:"#4CAF50",fontWeight:"600"},children:R.riderPhone&&` ${R.riderPhone}`})]}),g.jsxs("div",{className:"order-action-buttons",children:[g.jsxs("button",{onClick:()=>Xt(R),className:"view-details-btn",children:[g.jsx(B2,{className:"w-4 h-4"}),"View Details"]}),g.jsxs("button",{onClick:()=>Vn(R),className:"view-details-btn",style:{background:"#2196F3"},children:[g.jsx(Tn,{className:"w-4 h-4"}),E.printBill]}),R.status!=="cancelled"&&R.status!=="delivered"&&R.status!=="completed"&&g.jsxs("button",{onClick:()=>bs(R.id),className:"cancel-order-btn",children:[g.jsx(uh,{className:"w-4 h-4"}),"Cancel"]})]})]})]})]},R.id))})]}),A==="products"&&g.jsxs("div",{className:"products-section",children:[g.jsxs("button",{onClick:()=>Q(!U),className:"add-product-btn",children:[g.jsx(ch,{className:"w-5 h-5"}),E.addProduct]}),U&&g.jsxs("form",{onSubmit:Un,className:"product-form",children:[g.jsxs("div",{className:"bilingual-input-group",children:[g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:E.productNameEn,value:M.nameEn,onChange:R=>k({...M,nameEn:R.target.value}),required:!0,className:"form-input"})}),g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:E.productNameTe,value:M.nameTe,onChange:R=>k({...M,nameTe:R.target.value}),required:!0,className:"form-input"})}),g.jsx(Fm,{onTranscript:({english:R,telugu:J})=>{k({...M,nameEn:R||"",nameTe:J||""})}})]}),g.jsxs("div",{className:"input-with-voice",children:[g.jsx("input",{type:"number",placeholder:E.productPrice,value:M.price,onChange:R=>k({...M,price:R.target.value}),required:!0,className:"form-input"}),g.jsx(Om,{onTranscript:R=>k({...M,price:R.replace(/[^0-9]/g,"")}),language:i})]}),g.jsxs("div",{className:"input-with-voice",children:[g.jsx("input",{type:"number",placeholder:"Discounted Price (Optional)",value:M.discountedPrice,onChange:R=>k({...M,discountedPrice:R.target.value}),className:"form-input"}),g.jsx(Om,{onTranscript:R=>k({...M,discountedPrice:R.replace(/[^0-9]/g,"")}),language:i})]}),g.jsxs("div",{className:"input-with-voice",children:[g.jsx("input",{type:"text",placeholder:E.productWeight,value:M.weight,onChange:R=>k({...M,weight:R.target.value}),required:!0,className:"form-input"}),g.jsx(Om,{onTranscript:R=>k({...M,weight:R}),language:i})]}),g.jsxs("div",{className:"image-upload-section",children:[g.jsxs("label",{className:"upload-label",children:[g.jsx(Vm,{className:"w-5 h-5"}),"Upload Image (Max 500KB)",g.jsx("input",{type:"file",accept:"image/*",onChange:Sn,className:"file-input-hidden"})]}),g.jsx("input",{type:"text",placeholder:"Or paste image URL",value:M.imageUrl,onChange:R=>k({...M,imageUrl:R.target.value}),className:"form-input"}),se&&g.jsx("div",{className:"image-preview",children:g.jsx("img",{src:se,alt:"Preview"})})]}),g.jsxs("select",{value:M.category,onChange:R=>k({...M,category:R.target.value,subcategoryId:""}),className:"form-input",required:!0,children:[g.jsx("option",{value:"",children:i==="te"?" ":"Select Category"}),a.map(R=>g.jsxs("option",{value:R.id,children:[R.nameEn," / ",R.nameTe||""]},R.id))]}),M.category&&g.jsxs("select",{value:M.subcategoryId,onChange:R=>k({...M,subcategoryId:R.target.value}),className:"form-input",required:!0,children:[g.jsx("option",{value:"",children:i==="te"?"- ":"Select Subcategory"}),c.filter(R=>R.categoryId===M.category).map(R=>g.jsxs("option",{value:R.id,children:[R.nameEn," / ",R.nameTe||""]},R.id))]}),g.jsxs("label",{className:"checkbox-label",children:[g.jsx("input",{type:"checkbox",checked:M.isPopular,onChange:R=>k({...M,isPopular:R.target.checked})}),i==="te"?"  ":"Mark as Popular Product"]}),g.jsxs("label",{className:"checkbox-label",children:[g.jsx("input",{type:"checkbox",checked:M.outOfStock,onChange:R=>k({...M,outOfStock:R.target.checked})}),E.outOfStock," (",E.unavailablePickupDelivery,")"]}),g.jsxs("div",{className:"form-actions",children:[g.jsxs("button",{type:"submit",className:"save-btn",children:[g.jsx(ll,{className:"w-4 h-4"}),E.save]}),g.jsx("button",{type:"button",onClick:()=>{Q(!1),x(null),Ee(null)},className:"cancel-btn",children:E.cancel})]})]}),g.jsxs("div",{className:"category-filters",children:[g.jsxs("button",{className:`filter-btn ${ne==="all"?"active":""}`,onClick:()=>pe("all"),children:[i==="te"?"":"All"," (",n.length,")"]}),kn.map(R=>{const J=n.filter(ge=>ge.category===R.id).length;return g.jsxs("button",{className:`filter-btn ${ne===R.id?"active":""}`,onClick:()=>pe(R.id),children:[R.nameEn," (",J,")"]},R.id)})]}),g.jsxs("div",{className:"products-admin-list",children:[g.jsxs("h3",{className:"section-subtitle",children:[E.manageProducts," (",Gt.length,")"]}),Gt.map(R=>g.jsxs("div",{className:"admin-product-card",children:[g.jsx("img",{src:R.imageUrl||"https://via.placeholder.com/60",alt:i==="te"?R.nameTe||R.nameEn||R.name:R.nameEn||R.name,className:"admin-product-img"}),g.jsxs("div",{className:"admin-product-info",children:[g.jsxs("h4",{children:[i==="te"?R.nameTe||R.nameEn||R.name:R.nameEn||R.name,R.nameEn&&R.nameTe&&i==="en"&&g.jsxs("span",{className:"name-alt",children:[" / ",R.nameTe]}),R.nameEn&&R.nameTe&&i==="te"&&g.jsxs("span",{className:"name-alt",children:[" / ",R.nameEn]})]}),g.jsxs("p",{children:[R.category,"  ",R.weight]}),g.jsxs("p",{className:"admin-price",children:["",R.discountedPrice||R.price]}),R.isPopular&&g.jsxs("span",{className:"popular-tag",children:[" ",i==="te"?"":"Popular"]})]}),g.jsxs("div",{className:"admin-product-actions",children:[g.jsx("button",{onClick:()=>wn(R),className:"edit-btn",children:g.jsx(dh,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>jn(R.id),className:"delete-btn",children:g.jsx(Hc,{className:"w-4 h-4"})})]})]},R.id))]})]}),A==="categories"&&g.jsxs("div",{className:"categories-section",children:[a.length===0&&g.jsxs("div",{style:{padding:"24px",background:"linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%)",borderRadius:"12px",marginBottom:"20px",border:"2px dashed #FF9800",textAlign:"center"},children:[g.jsx("h3",{style:{color:"#E65100",marginBottom:"12px",fontSize:"18px"},children:" No Categories Found in Database"}),g.jsx("p",{style:{color:"#757575",marginBottom:"16px",fontSize:"14px"},children:"Click below to add Zepto-style default categories (Groceries, Vegetables, Milk, Snacks, Medicines, Electronics)"}),g.jsxs("button",{onClick:ot,className:"add-product-btn",style:{background:"#FF9800",fontSize:"16px",padding:"12px 24px"},children:[g.jsx(H0,{className:"w-5 h-5"}),"Seed Default Categories"]})]}),g.jsx("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:g.jsxs("button",{onClick:()=>ie(!B),className:"add-product-btn",children:[g.jsx(ch,{className:"w-5 h-5"}),"Add Category"]})}),B&&g.jsxs("form",{onSubmit:Ps,className:"product-form",children:[g.jsxs("div",{className:"bilingual-input-group",children:[g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:"Category Name (English)",value:de.nameEn,onChange:R=>fe({...de,nameEn:R.target.value}),required:!0,className:"form-input"})}),g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:"Category Name (Telugu)",value:de.nameTe,onChange:R=>fe({...de,nameTe:R.target.value}),className:"form-input"})}),g.jsx(Fm,{onTranscript:({english:R,telugu:J})=>{fe({...de,nameEn:R||"",nameTe:J||""})}})]}),g.jsxs("div",{className:"image-upload-section",children:[g.jsxs("label",{className:"upload-label",children:[g.jsx(Vm,{className:"w-5 h-5"}),"Upload Image (Max 500KB)",g.jsx("input",{type:"file",accept:"image/*",onChange:Wt,className:"file-input-hidden"})]}),g.jsx("input",{type:"text",placeholder:"Or paste image URL",value:de.imageUrl,onChange:R=>fe({...de,imageUrl:R.target.value}),className:"form-input"}),(Ce||de.imageUrl)&&g.jsx("div",{className:"image-preview-container",children:g.jsx("img",{src:Ce||de.imageUrl,alt:"Category preview",className:"image-preview"})})]}),g.jsx("input",{type:"color",value:de.color,onChange:R=>fe({...de,color:R.target.value}),className:"form-input"}),g.jsxs("div",{className:"form-actions",children:[g.jsxs("button",{type:"submit",className:"save-btn",children:[g.jsx(ll,{className:"w-4 h-4"}),"Save"]}),g.jsx("button",{type:"button",onClick:()=>{ie(!1),Ve(null),He(null)},className:"cancel-btn",children:"Cancel"})]})]}),g.jsxs("div",{className:"products-admin-list",children:[g.jsxs("h3",{className:"section-subtitle",children:["Manage Categories (",a.length,")"]}),[...a].sort((R,J)=>(R.sortOrder||0)-(J.sortOrder||0)).map((R,J,ge)=>g.jsxs("div",{className:"admin-product-card",children:[g.jsx("div",{className:"category-icon-preview",style:{background:R.gradient},children:g.jsx("img",{src:R.imageUrl||"https://via.placeholder.com/40/CCCCCC/666666?text=No+Image",alt:R.nameEn,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px"}})}),g.jsxs("div",{className:"admin-product-info",children:[g.jsx("h4",{children:R.nameEn}),g.jsx("p",{children:R.nameTe}),g.jsx("p",{className:"admin-price",children:R.color})]}),g.jsxs("div",{className:"admin-product-actions",children:[g.jsx("button",{onClick:()=>ni(R.id,"up"),className:"edit-btn",disabled:J===0,title:"Move up",style:{opacity:J===0?.3:1},children:g.jsx(Wd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>ni(R.id,"down"),className:"edit-btn",disabled:J===ge.length-1,title:"Move down",style:{opacity:J===ge.length-1?.3:1},children:g.jsx(Qd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>Ln(R),className:"edit-btn",children:g.jsx(dh,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>yi(R.id),className:"delete-btn",children:g.jsx(Hc,{className:"w-4 h-4"})})]})]},R.id))]})]}),A==="subcategories"&&g.jsxs("div",{className:"subcategories-section",children:[g.jsxs("button",{onClick:()=>Rt(!Qe),className:"add-product-btn",children:[g.jsx(ch,{className:"w-5 h-5"}),"Add Subcategory"]}),Qe&&g.jsxs("form",{onSubmit:Ds,className:"product-form",children:[g.jsxs("select",{value:yt.categoryId,onChange:R=>Qt({...yt,categoryId:R.target.value}),required:!0,className:"form-input",children:[g.jsx("option",{value:"",children:"Select Parent Category"}),a.map(R=>g.jsx("option",{value:R.id,children:R.nameEn},R.id))]}),g.jsxs("div",{className:"bilingual-input-group",children:[g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:"Subcategory Name (English)",value:yt.nameEn,onChange:R=>Qt({...yt,nameEn:R.target.value}),required:!0,className:"form-input"})}),g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:"Subcategory Name (Telugu)",value:yt.nameTe,onChange:R=>Qt({...yt,nameTe:R.target.value}),className:"form-input"})}),g.jsx(Fm,{onTranscript:({english:R,telugu:J})=>{Qt({...yt,nameEn:R||"",nameTe:J||""})}})]}),g.jsxs("div",{className:"image-upload-section",children:[g.jsxs("label",{className:"upload-label",children:[g.jsx(Vm,{className:"w-5 h-5"}),"Upload Image (Max 500KB)",g.jsx("input",{type:"file",accept:"image/*",onChange:ns,className:"file-input-hidden"})]}),g.jsx("input",{type:"text",placeholder:"Or paste image URL",value:yt.imageUrl,onChange:R=>Qt({...yt,imageUrl:R.target.value}),className:"form-input"}),(Pi||yt.imageUrl)&&g.jsx("div",{className:"image-preview-container",children:g.jsx("img",{src:Pi||yt.imageUrl,alt:"Subcategory preview",className:"image-preview"})})]}),g.jsxs("div",{className:"form-actions",children:[g.jsxs("button",{type:"submit",className:"save-btn",children:[g.jsx(ll,{className:"w-4 h-4"}),"Save"]}),g.jsx("button",{type:"button",onClick:()=>{Rt(!1),Mn(null),Rs(null)},className:"cancel-btn",children:"Cancel"})]})]}),g.jsxs("div",{className:"products-admin-list",children:[g.jsxs("h3",{className:"section-subtitle",children:["Manage Subcategories (",c.length,")"]}),[...c].sort((R,J)=>(R.sortOrder||0)-(J.sortOrder||0)).map((R,J,ge)=>{const Oe=a.find(Ie=>Ie.id===R.categoryId);return g.jsxs("div",{className:"admin-product-card",children:[g.jsx("div",{className:"subcategory-icon-preview",children:g.jsx("img",{src:R.imageUrl||"https://via.placeholder.com/40/CCCCCC/666666?text=No+Image",alt:R.nameEn,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px"}})}),g.jsxs("div",{className:"admin-product-info",children:[g.jsx("h4",{children:R.nameEn}),g.jsx("p",{children:R.nameTe}),g.jsxs("p",{className:"admin-price",children:["Parent: ",Oe?.nameEn||"N/A"]})]}),g.jsxs("div",{className:"admin-product-actions",children:[g.jsx("button",{onClick:()=>gi(R.id,"up"),className:"edit-btn",disabled:J===0,title:"Move up",style:{opacity:J===0?.3:1},children:g.jsx(Wd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>gi(R.id,"down"),className:"edit-btn",disabled:J===ge.length-1,title:"Move down",style:{opacity:J===ge.length-1?.3:1},children:g.jsx(Qd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>lr(R),className:"edit-btn",children:g.jsx(dh,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>ii(R.id),className:"delete-btn",children:g.jsx(Hc,{className:"w-4 h-4"})})]})]},R.id)})]})]}),A==="popular"&&g.jsxs("div",{className:"popular-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h3",{className:"section-subtitle",children:"Popular Products Management"}),g.jsx("span",{className:"count-badge",children:co.length})]}),g.jsx("p",{className:"section-description",children:'Manage which products appear in the "Popular Products" section on the customer app. Toggle the star to add/remove from popular items.'}),g.jsx("div",{className:"products-admin-list",children:[...n].sort((R,J)=>(R.sortOrder||0)-(J.sortOrder||0)).map((R,J,ge)=>g.jsxs("div",{className:"admin-product-card",children:[g.jsx("img",{src:R.imageUrl||"https://via.placeholder.com/60",alt:i==="te"?R.nameTe||R.nameEn||R.name:R.nameEn||R.name,className:"admin-product-img"}),g.jsxs("div",{className:"admin-product-info",children:[g.jsx("h4",{children:i==="te"?R.nameTe||R.nameEn||R.name:R.nameEn||R.name}),g.jsxs("p",{children:[R.category,"  ",R.weight]}),g.jsxs("p",{className:"admin-price",children:["",R.discountedPrice||R.price]})]}),g.jsxs("div",{className:"admin-product-actions",children:[g.jsx("button",{onClick:()=>dt(R.id,"up"),className:"edit-btn",disabled:J===0,title:"Move up",style:{opacity:J===0?.3:1},children:g.jsx(Wd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>dt(R.id,"down"),className:"edit-btn",disabled:J===ge.length-1,title:"Move down",style:{opacity:J===ge.length-1?.3:1},children:g.jsx(Qd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>is(R.id,R.isPopular),className:`popular-toggle-btn ${R.isPopular?"is-popular":""}`,title:R.isPopular?"Remove from popular":"Add to popular",children:R.isPopular?g.jsx(km,{fill:"gold",stroke:"gold",className:"w-5 h-5"}):g.jsx(km,{className:"w-5 h-5"})})]})]},R.id))})]}),A==="users"&&g.jsx(z3,{}),A==="riders"&&g.jsxs("div",{className:"riders-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsxs("h3",{className:"section-subtitle",children:["Riders Management (",t?.length||0,")"]}),g.jsxs("select",{value:ts,onChange:R=>Ns(R.target.value),className:"form-input",style:{width:"auto",padding:"8px 12px"},children:[g.jsx("option",{value:"orders",children:"Sort by Orders"}),g.jsx("option",{value:"name",children:"Sort by Name"})]})]}),!t||t.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx($i,{className:"w-16 h-16 text-gray-400"}),g.jsx("p",{children:"No riders registered yet"}),g.jsx("p",{style:{fontSize:"14px",color:"#666",marginTop:"8px"},children:"Riders can register at: ?mode=rider"})]}):g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px",marginTop:"20px"},children:t.map(R=>({...R,totalOrders:e.filter(J=>J.riderId===R.id).length,activeOrders:e.filter(J=>J.riderId===R.id&&J.status==="out_for_delivery").length,completedOrders:e.filter(J=>J.riderId===R.id&&J.status==="delivered").length})).sort((R,J)=>ts==="orders"?J.totalOrders-R.totalOrders:R.name.localeCompare(J.name)).map(R=>g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0",position:"relative"},children:[g.jsx("button",{onClick:async()=>{if(R.activeOrders>0){alert(`Cannot delete rider ${R.name}. They have ${R.activeOrders} active delivery in progress.`);return}if(window.confirm(`Are you sure you want to delete rider ${R.name}? This action cannot be undone.`))try{await el(je(h,"artifacts",xe,"public","data","riders",R.id)),alert(`Rider ${R.name} deleted successfully!`)}catch(J){console.error("Error deleting rider:",J),alert("Failed to delete rider")}},className:"delete-btn",style:{position:"absolute",top:"12px",right:"12px",padding:"6px",borderRadius:"6px",background:"#fff",border:"1px solid #e0e0e0"},title:"Delete Rider",children:g.jsx(Hc,{className:"w-4 h-4",style:{color:"#f44336"}})}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid #f0f0f0"},children:[g.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #FF9800 0%, #F57C00 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px",fontWeight:"700"},children:R.name.charAt(0).toUpperCase()}),g.jsxs("div",{style:{flex:1},children:[g.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#333",marginBottom:"4px"},children:R.name}),g.jsxs("a",{href:`tel:${R.phone}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",color:"#2196F3",textDecoration:"none"},children:[g.jsx(or,{className:"w-4 h-4"}),R.phone]})]})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:[g.jsxs("div",{style:{textAlign:"center"},children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#333"},children:R.totalOrders}),g.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"Total Orders"})]}),g.jsxs("div",{style:{textAlign:"center"},children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#FF9800"},children:R.activeOrders}),g.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"Active"})]}),g.jsxs("div",{style:{textAlign:"center"},children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#4CAF50"},children:R.completedOrders}),g.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"Completed"})]})]})]},R.id))})]}),A==="analytics"&&g.jsxs("div",{className:"analytics-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h3",{className:"section-subtitle",children:"Daily Analytics"}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx(b2,{className:"w-5 h-5 text-gray-600"}),g.jsx("input",{type:"date",value:L,onChange:R=>F(R.target.value),max:new Date().toISOString().split("T")[0],style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #E0E0E0",fontSize:"14px",cursor:"pointer"}})]})]}),(()=>{const R=e.filter(Ie=>new Date(Ie.createdAt).toISOString().split("T")[0]===L),J=R.filter(Ie=>Ie.status==="completed"||Ie.status==="delivered").reduce((Ie,Ge)=>Ie+Ge.total,0),ge=R.filter(Ie=>Ie.status==="completed"||Ie.status==="delivered").length,Oe=R.filter(Ie=>Ie.status==="pending").length;return R.filter(Ie=>Ie.status==="cancelled").length,g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginTop:"20px"},children:[g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[g.jsx(Ji,{className:"w-6 h-6",style:{color:"#4CAF50"}}),g.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Total Revenue"})]}),g.jsxs("div",{style:{fontSize:"28px",fontWeight:"700",color:"#2E7D32"},children:["",J.toFixed(0)]})]}),g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[g.jsx(Tn,{className:"w-6 h-6",style:{color:"#2196F3"}}),g.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Total Orders"})]}),g.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#1976D2"},children:R.length})]}),g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[g.jsx(Tn,{className:"w-6 h-6",style:{color:"#4CAF50"}}),g.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Completed"})]}),g.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#2E7D32"},children:ge})]}),g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[g.jsx(uu,{className:"w-6 h-6",style:{color:"#FF9800"}}),g.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Pending"})]}),g.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#F57C00"},children:Oe})]})]}),g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",marginTop:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[g.jsxs("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:["Orders for ",new Date(L).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),R.length===0?g.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:[g.jsx(Tn,{className:"w-12 h-12",style:{margin:"0 auto 12px",opacity:.3}}),g.jsx("p",{children:"No orders on this date"})]}):g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:R.map(Ie=>g.jsxs("div",{style:{padding:"16px",background:"#f9f9f9",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsxs("div",{children:[g.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:Ie.orderNumber||`Order #${Ie.id.substring(0,8)}`}),g.jsxs("div",{style:{fontSize:"13px",color:"#666"},children:[new Date(Ie.createdAt).toLocaleTimeString("en-IN"),"  ",Ie.items.length," items"]})]}),g.jsxs("div",{style:{textAlign:"right"},children:[g.jsxs("div",{style:{fontWeight:"700",fontSize:"16px",color:"#2E7D32"},children:["",Ie.total.toFixed(0)]}),g.jsx("div",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px",background:Ie.status==="completed"||Ie.status==="delivered"?"#E8F5E9":"#FFF3E0",color:Ie.status==="completed"||Ie.status==="delivered"?"#2E7D32":"#F57C00",marginTop:"4px"},children:Ie.status.charAt(0).toUpperCase()+Ie.status.slice(1)})]})]},Ie.id))})]})]})})()]})]}),Pt&&es&&g.jsx(DI,{order:es,onClose:()=>zn(!1),language:i})]})},$3=({rider:n,allOrders:e,language:t,onExit:i})=>{const{db:o}=Is();Zn[t];const[a,c]=X.useState("pending"),d=e.filter(U=>U.deliveryMethod==="delivery"&&U.riderId===n.id),f=d.filter(U=>U.status==="ready_for_pickup"||U.status==="accepted"),h=d.filter(U=>U.status==="out_for_delivery"),v=d.filter(U=>U.status==="delivered"),E=async(U,Q)=>{try{const H=je(o,"artifacts",xe,"public","data","orders",U);await Gn(H,{status:Q,updatedAt:new Date().toISOString()}),alert(`Order status updated to ${Q}!`)}catch(H){console.error("Error updating order status:",H),alert("Failed to update order status. Please try again.")}},A=async U=>{if(window.confirm("Mark this order as picked up and out for delivery?"))try{const Q=je(o,"artifacts",xe,"public","data","orders",U);await Gn(Q,{status:"out_for_delivery",riderId:n.id,riderName:n.name,riderPhone:n.phone,updatedAt:new Date().toISOString()}),alert("Order picked up! Now out for delivery.")}catch(Q){console.error("Error picking up order:",Q),alert("Failed to pick up order. Please try again.")}},N=U=>{window.confirm("Confirm that this order has been delivered?")&&E(U,"delivered")},F=a==="pending"?f:a==="active"?h:v;return g.jsxs("div",{className:"rider-dashboard",children:[g.jsxs("div",{className:"rider-header",children:[g.jsxs("button",{onClick:i,className:"back-btn",children:[g.jsx(Ni,{className:"w-5 h-5"}),"Exit Rider Mode"]}),g.jsxs("div",{children:[g.jsxs("h1",{className:"rider-title",children:[g.jsx(gs,{className:"w-6 h-6"}),"Rider Dashboard"]}),g.jsxs("p",{style:{color:"#666",fontSize:"14px",marginTop:"4px"},children:["Welcome, ",n.name,"!"]})]})]}),g.jsxs("div",{className:"rider-stats",children:[g.jsxs("div",{className:"stat-card",children:[g.jsx("div",{className:"stat-icon pending-bg",children:g.jsx(uu,{className:"w-5 h-5"})}),g.jsxs("div",{className:"stat-content",children:[g.jsx("div",{className:"stat-value",children:f.length}),g.jsx("div",{className:"stat-label",children:"Ready to Pickup"})]})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx("div",{className:"stat-icon active-bg",children:g.jsx(gs,{className:"w-5 h-5"})}),g.jsxs("div",{className:"stat-content",children:[g.jsx("div",{className:"stat-value",children:h.length}),g.jsx("div",{className:"stat-label",children:"Out for Delivery"})]})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx("div",{className:"stat-icon delivered-bg",children:g.jsx(ji,{className:"w-5 h-5"})}),g.jsxs("div",{className:"stat-content",children:[g.jsx("div",{className:"stat-value",children:v.length}),g.jsx("div",{className:"stat-label",children:"Delivered Today"})]})]})]}),g.jsxs("div",{className:"rider-tabs",children:[g.jsxs("button",{className:`rider-tab ${a==="pending"?"active":""}`,onClick:()=>c("pending"),children:[g.jsx(uu,{className:"w-4 h-4"}),"Ready to Pickup (",f.length,")"]}),g.jsxs("button",{className:`rider-tab ${a==="active"?"active":""}`,onClick:()=>c("active"),children:[g.jsx(gs,{className:"w-4 h-4"}),"Out for Delivery (",h.length,")"]}),g.jsxs("button",{className:`rider-tab ${a==="completed"?"active":""}`,onClick:()=>c("completed"),children:[g.jsx(ji,{className:"w-4 h-4"}),"Delivered (",v.length,")"]})]}),g.jsx("div",{className:"rider-orders-list",children:F.length===0?g.jsxs("div",{className:"no-orders-message",children:[g.jsx(Tn,{className:"w-12 h-12 text-gray-400"}),g.jsx("p",{children:"No orders in this category"})]}):F.map(U=>g.jsxs("div",{className:"rider-order-card",children:[g.jsxs("div",{className:"rider-order-header",children:[g.jsxs("div",{className:"order-id-section",children:[g.jsx(Tn,{className:"w-4 h-4"}),g.jsx("span",{className:"order-id-text",children:U.orderNumber||`Order #${U.id.slice(-6)}`})]}),g.jsxs("div",{className:"order-total-section",children:[g.jsx("span",{className:"total-label-small",children:"Total"}),g.jsxs("span",{className:"total-amount-rider",children:["",U.total.toFixed(0)]})]})]}),g.jsxs("div",{className:"rider-customer-info",children:[g.jsxs("div",{className:"customer-detail",children:[g.jsx($i,{className:"w-4 h-4 text-gray-600"}),g.jsx("span",{className:"customer-name",children:U.customerName||U.userName||"Customer"})]}),(U.customerPhone||U.userPhone)&&g.jsxs("a",{href:`tel:${U.customerPhone||U.userPhone}`,className:"customer-phone-link",children:[g.jsx(or,{className:"w-4 h-4"}),U.customerPhone||U.userPhone]})]}),g.jsxs("div",{className:"rider-delivery-address",children:[g.jsxs("div",{className:"address-header-rider",children:[g.jsx(ea,{className:"w-5 h-5 text-green-600"}),g.jsx("span",{className:"address-label-rider",children:"Delivery Address"})]}),g.jsx("p",{className:"address-text-rider",children:U.deliveryAddress}),U.deliveryInstructions&&g.jsxs("p",{className:"delivery-instructions-rider",children:[g.jsx("strong",{children:"Instructions:"})," ",U.deliveryInstructions]}),g.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(U.deliveryAddress)}`,target:"_blank",rel:"noopener noreferrer",className:"navigate-btn",children:[g.jsx(tI,{className:"w-4 h-4"}),"Navigate"]})]}),g.jsxs("div",{className:"rider-order-items",children:[g.jsxs("div",{className:"items-count-badge",children:[g.jsx(Tn,{className:"w-4 h-4"}),U.items.length," items"]}),g.jsxs("div",{className:"items-preview",children:[U.items.slice(0,3).map((Q,H)=>g.jsxs("span",{className:"item-preview-text",children:[Q.name," x",Q.quantity,H<Math.min(U.items.length,3)-1&&", "]},H)),U.items.length>3&&g.jsxs("span",{className:"more-items",children:["+",U.items.length-3," more"]})]})]}),a==="pending"&&g.jsxs("button",{onClick:()=>A(U.id),className:"rider-action-btn pickup-btn",children:[g.jsx(gs,{className:"w-4 h-4"}),"Pick Up & Start Delivery"]}),a==="active"&&g.jsxs("button",{onClick:()=>N(U.id),className:"rider-action-btn deliver-btn",children:[g.jsx(ji,{className:"w-4 h-4"}),"Mark as Delivered"]}),a==="completed"&&g.jsxs("div",{className:"delivered-stamp",children:[g.jsx(ji,{className:"w-5 h-5"}),"Delivered"]})]},U.id))})]})},Y3=({onLogin:n,onRegister:e})=>{const[t,i]=X.useState(!1),[o,a]=X.useState(""),[c,d]=X.useState(""),[f,h]=X.useState(""),[v,E]=X.useState(""),[A,N]=X.useState(!1),L=async F=>{F.preventDefault(),E(""),N(!0);try{if(t){if(!f||!o||!c){E("All fields are required"),N(!1);return}await e({name:f,phone:o,password:c})}else{if(!o||!c){E("Phone and password are required"),N(!1);return}await n(o,c)}}catch(U){E(U.message||"Authentication failed"),N(!1)}};return g.jsxs("div",{className:"rider-login-container",children:[g.jsxs("div",{className:"rider-login-card",children:[g.jsxs("div",{className:"rider-login-header",children:[g.jsx("div",{className:"rider-icon-circle",children:g.jsx(ZC,{className:"w-12 h-12",style:{color:"#FF9800"}})}),g.jsx("h1",{className:"rider-login-title",children:t?"Rider Registration":"Rider Login"}),g.jsx("p",{className:"rider-login-subtitle",children:t?"Create your rider account to start delivering":"Sign in to access your delivery dashboard"})]}),g.jsxs("form",{onSubmit:L,className:"rider-login-form",children:[t&&g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Full Name"}),g.jsxs("div",{className:"input-with-icon",children:[g.jsx(G0,{className:"input-icon"}),g.jsx("input",{type:"text",value:f,onChange:F=>h(F.target.value),placeholder:"Enter your full name",className:"form-input",required:t})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Phone Number"}),g.jsxs("div",{className:"input-with-icon",children:[g.jsx(or,{className:"input-icon"}),g.jsx("input",{type:"tel",value:o,onChange:F=>a(F.target.value),placeholder:"10-digit phone number",className:"form-input",maxLength:"10",required:!0})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Password"}),g.jsxs("div",{className:"input-with-icon",children:[g.jsx(al,{className:"input-icon"}),g.jsx("input",{type:"password",value:c,onChange:F=>d(F.target.value),placeholder:"Enter password",className:"form-input",required:!0})]})]}),v&&g.jsx("div",{className:"error-message",children:v}),g.jsx("button",{type:"submit",className:"rider-login-button",disabled:A,children:A?"Processing...":g.jsxs(g.Fragment,{children:[t?g.jsx(G0,{className:"w-5 h-5"}):g.jsx(Y2,{className:"w-5 h-5"}),t?"Register as Rider":"Login"]})})]}),g.jsx("div",{className:"rider-login-footer",children:g.jsx("button",{onClick:()=>{i(!t),E("")},className:"toggle-mode-button",children:t?"Already have an account? Login":"Don't have an account? Register"})})]}),g.jsx("style",{jsx:!0,children:`
        .rider-login-container {
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          padding: 20px;
        }

        .rider-login-card {
          background: white;
          border-radius: 20px;
          padding: 40px;
          max-width: 450px;
          width: 100%;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .rider-login-header {
          text-align: center;
          margin-bottom: 32px;
        }

        .rider-icon-circle {
          width: 80px;
          height: 80px;
          background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 auto 20px;
          box-shadow: 0 8px 16px rgba(255, 152, 0, 0.3);
        }

        .rider-icon-circle svg {
          color: white !important;
        }

        .rider-login-title {
          font-size: 28px;
          font-weight: 700;
          color: #1a1a1a;
          margin-bottom: 8px;
        }

        .rider-login-subtitle {
          font-size: 14px;
          color: #666;
        }

        .rider-login-form {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-label {
          font-size: 14px;
          font-weight: 600;
          color: #333;
        }

        .input-with-icon {
          position: relative;
        }

        .input-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          width: 20px;
          height: 20px;
          color: #999;
        }

        .form-input {
          width: 100%;
          padding: 12px 12px 12px 44px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          font-size: 16px;
          transition: all 0.3s;
        }

        .form-input:focus {
          outline: none;
          border-color: #FF9800;
          box-shadow: 0 0 0 3px rgba(255, 152, 0, 0.1);
        }

        .error-message {
          background: #ffebee;
          color: #c62828;
          padding: 12px;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        .rider-login-button {
          background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
          color: white;
          border: none;
          padding: 14px 24px;
          border-radius: 10px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          transition: transform 0.2s, box-shadow 0.2s;
          margin-top: 8px;
        }

        .rider-login-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 8px 16px rgba(255, 152, 0, 0.3);
        }

        .rider-login-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .rider-login-footer {
          margin-top: 24px;
          text-align: center;
        }

        .toggle-mode-button {
          background: none;
          border: none;
          color: #667eea;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          transition: color 0.3s;
        }

        .toggle-mode-button:hover {
          color: #764ba2;
          text-decoration: underline;
        }
      `})]})};function K3(){const{user:n,loading:e,userProfile:t,phoneNumber:i,setPhoneNumber:o,countryCode:a,setCountryCode:c,password:d,setPassword:f,otp:h,setOtp:v,authStep:E,isNewUser:A,showProfileSetup:N,setShowProfileSetup:L,checkUserExists:F,handleSendOTP:U,handleVerifyOTP:Q,handlePasswordLogin:H,handleCompleteRegistration:z,handleLogout:re,handleSaveProfile:ee}=mf(),{rider:he,loading:O,loginRider:D,logoutRider:b,registerRider:M}=E2(),{products:k,categoriesData:V,subcategoriesData:x,orders:we,allOrders:Be,allRiders:ne,loading:pe,handleChangeDeliveryMethod:se,handleCancelOrder:Ee}=p2(),{cartItems:B,deliveryMethod:ie,setDeliveryMethod:de,selectedAddress:fe,setSelectedAddress:_e,handleAddToCart:Ve,handleCheckout:Ce}=y2(),{userAddresses:He,showAddressManager:Qe,setShowAddressManager:Rt,showAddressForm:yt,setShowAddressForm:Qt,editingAddress:mi,setEditingAddress:Mn,handleSaveAddress:Pi,handleDeleteAddress:Rs,handleSetDefaultAddress:es}=v2(),[bt,fn]=X.useState("Home"),[_t,Pt]=X.useState(""),[zn,ts]=X.useState(null),[Ns,Di]=X.useState(null),[Mi,kn]=X.useState(null),[ot,Sn]=X.useState("en"),[Wt,ns]=X.useState("Getting location..."),[xs,bs]=X.useState("/dukaan-logo.png"),[Xt,Vn]=X.useState(null),[Un,wn]=X.useState({}),[jn,is]=X.useState(!1),[ti,ni]=X.useState(!1),[gi,dt]=X.useState(null),[Ps,Ln]=X.useState(!1),yi=()=>{Sn(wt=>wt==="en"?"te":"en")};X.useEffect(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(async wt=>{try{const{latitude:Ye,longitude:it}=wt.coords,Zt=await(await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${Ye}&longitude=${it}&localityLanguage=en`)).json(),pn=Zt.city||Zt.locality||Zt.principalSubdivision||"Unknown",Gt=Zt.principalSubdivisionCode||"";ns(`${pn}${Gt?", "+Gt:""}`)}catch(Ye){console.error("Error getting location name:",Ye),ns("Ponnur, AP")}},wt=>{console.error("Geolocation error:",wt),ns("Ponnur, AP")},{enableHighAccuracy:!1,timeout:1e4,maximumAge:3e5}):ns("Ponnur, AP")},[]),X.useEffect(()=>{const Ye=new URLSearchParams(window.location.search).get("mode");is(Ye==="shopkeeper"),ni(Ye==="rider"),console.log("[Mode] Shopkeeper mode:",Ye==="shopkeeper","Rider mode:",Ye==="rider","URL:",window.location.search)},[]),X.useEffect(()=>{(async()=>{try{const{db:Ye}=await nl(()=>Promise.resolve().then(()=>fg),void 0).then(Gt=>({db:Gt.getFirebaseInstances().db})),{doc:it,getDoc:vt}=await nl(async()=>{const{doc:Gt,getDoc:co}=await Promise.resolve().then(()=>HC);return{doc:Gt,getDoc:co}},void 0),{appId:Zt}=await nl(async()=>{const{appId:Gt}=await Promise.resolve().then(()=>fg);return{appId:Gt}},void 0),pn=await vt(it(Ye,"artifacts",Zt,"public","data","settings","app"));pn.exists()&&pn.data().logoUrl&&bs(pn.data().logoUrl)}catch{console.log("Logo not found, using default")}})()},[]),X.useEffect(()=>{_t&&kn(null)},[_t]),X.useEffect(()=>{if(!n||jn||ti||we.length===0)return;const wt={};we.forEach(Ye=>{wt[Ye.id]=Ye.status}),we.forEach(Ye=>{const it=Un[Ye.id],vt=Ye.status;if(it&&it!==vt&&Ye.updatedAt){const Zt=new Date(Ye.updatedAt).getTime();new Date().getTime()-Zt<1e4&&(vt==="processing"?Vn({message:" Your order has been accepted! We are preparing it now.",type:"success"}):vt==="delivered"&&Vn({message:" Your order has been delivered! Thank you for shopping.",type:"success"}))}}),wn(wt)},[we,jn,ti,n]),X.useEffect(()=>{if(He.length>0&&!fe&&ie==="delivery"){const wt=He.find(Ye=>Ye.isDefault)||He[0];_e(wt)}},[He,fe,ie]);const Ds=wt=>{if(de(wt),wt==="delivery"){if(!fe&&He.length>0){const Ye=He.find(it=>it.isDefault)||He[0];_e(Ye)}}else _e(null);Ln(!1),Ce(He,fn,ot)};if(e||pe)return g.jsx(q0,{});if(jn)return g.jsx(j3,{products:k,allOrders:Be,allRiders:ne,language:ot,onExit:()=>window.location.href="/",categoriesData:V,subcategoriesData:x,logoUrl:xs,onLogoChange:bs});if(ti)return O?g.jsx(q0,{}):he?g.jsx($3,{rider:he,allOrders:Be,language:ot,onExit:()=>{b(),window.location.href="/"}}):g.jsx(Y3,{onLogin:D,onRegister:M});if(!n)return g.jsxs(g.Fragment,{children:[g.jsx(q3,{phoneNumber:i,onPhoneChange:o,countryCode:a,onCountryCodeChange:c,password:d,onPasswordChange:f,otp:h,onOtpChange:v,authStep:E,isNewUser:A,onCheckUser:F,onSendOTP:U,onVerifyOTP:Q,onPasswordLogin:H,onCompleteRegistration:z}),Xt&&g.jsx(z0,{message:Xt.message,type:Xt.type,onClose:()=>Vn(null)})]});const ii=(wt,Ye)=>{kn(wt),Pt(""),fn("Home"),ts(null),Di(null)};return g.jsxs("div",{className:"app-container-modern",children:[g.jsx(x3,{searchTerm:_t,setSearchTerm:Pt,location:Wt,language:ot,toggleLanguage:yi,logoUrl:xs,products:k,onVoiceSearch:ii}),g.jsxs("div",{className:"app-content",children:[bt==="Home"&&g.jsx(k3,{products:k,onAddToCart:Ve,cartItems:B,setCurrentView:fn,selectedCategory:zn,setSelectedCategory:ts,selectedSubcategory:Ns,setSelectedSubcategory:Di,searchTerm:_t,language:ot,categoriesData:V,subcategoriesData:x,voiceSearchResults:Mi,setVoiceSearchResults:kn}),bt==="Cart"&&g.jsx(V3,{cartItems:B,onAddToCart:Ve,setCurrentView:fn,onCheckout:()=>Ln(!0),language:ot}),bt==="Orders"&&g.jsx(L3,{orders:we,setCurrentView:fn,language:ot,onSelectOrder:dt,onChangeDeliveryMethod:se,onCancelOrder:Ee,userAddresses:He,onManageAddresses:()=>Rt(!0)}),bt==="Profile"&&g.jsx(O3,{userProfile:t,orders:we,onLogout:re,language:ot,setCurrentView:fn,userAddresses:He,onManageAddresses:()=>Rt(!0)}),bt==="OrderHistory"&&g.jsx(F3,{orders:we,onBack:()=>fn("Profile"),onSelectOrder:dt,language:ot,translations:Zn})]}),g.jsx(b3,{currentView:bt,setCurrentView:fn,cartItems:B,language:ot,onHomeClick:()=>{kn(null),ts(null),Di(null)}}),Xt&&g.jsx(z0,{message:Xt.message,type:Xt.type,onClose:()=>Vn(null)}),gi&&g.jsx(DI,{order:gi,onClose:()=>dt(null),language:ot}),N&&g.jsx(B3,{onSave:ee,onClose:()=>L(!1)}),Qe&&g.jsx(H3,{addresses:He,onAddAddress:()=>{Rt(!1),Qt(!0),Mn(null)},onEditAddress:wt=>{Mn(wt),Rt(!1),Qt(!0)},onDeleteAddress:Rs,onSetDefault:es,onClose:()=>Rt(!1)}),yt&&g.jsx(G3,{onSave:Pi,onClose:()=>{Qt(!1),Mn(null)},editingAddress:mi}),Ps&&g.jsx(P3,{isOpen:Ps,onClose:()=>Ln(!1),onConfirm:Ds,cartItems:Object.values(B),userAddresses:He,selectedAddress:fe,onAddressSelect:_e,onManageAddresses:()=>{Ln(!1),Rt(!0)},language:ot})]})}mN.createRoot(document.getElementById("root")).render(g.jsx(X.StrictMode,{children:g.jsx(f2,{children:g.jsx(m2,{children:g.jsx(_2,{children:g.jsx(T2,{children:g.jsx(A2,{children:g.jsx(K3,{})})})})})})}));export{du as C,rI as W,nl as _,kV as b,wy as r};
