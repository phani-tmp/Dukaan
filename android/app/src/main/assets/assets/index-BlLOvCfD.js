(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var om={exports:{}},Ru={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT;function Jx(){if(UT)return Ru;UT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return Ru.Fragment=e,Ru.jsx=t,Ru.jsxs=t,Ru}var VT;function Qx(){return VT||(VT=1,om.exports=Jx()),om.exports}var g=Qx(),am={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT;function Wx(){if(LT)return Ge;LT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function A(q){return q===null||typeof q!="object"?null:(q=E&&q[E]||q["@@iterator"],typeof q=="function"?q:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,F={};function U(q,ie,de){this.props=q,this.context=ie,this.refs=F,this.updater=de||R}U.prototype.isReactComponent={},U.prototype.setState=function(q,ie){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ie,"setState")},U.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function J(){}J.prototype=U.prototype;function H(q,ie,de){this.props=q,this.context=ie,this.refs=F,this.updater=de||R}var z=H.prototype=new J;z.constructor=H,L(z,U.prototype),z.isPureReactComponent=!0;var se=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},fe=Object.prototype.hasOwnProperty;function O(q,ie,de,he,ye,be){return de=be.ref,{$$typeof:n,type:q,key:ie,ref:de!==void 0?de:null,props:be}}function P(q,ie){return O(q.type,ie,void 0,void 0,void 0,q.props)}function b(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function M(q){var ie={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(de){return ie[de]})}var k=/\/+/g;function V(q,ie){return typeof q=="object"&&q!==null&&q.key!=null?M(""+q.key):ie.toString(36)}function N(){}function we(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(N,N):(q.status="pending",q.then(function(ie){q.status==="pending"&&(q.status="fulfilled",q.value=ie)},function(ie){q.status==="pending"&&(q.status="rejected",q.reason=ie)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function ze(q,ie,de,he,ye){var be=typeof q;(be==="undefined"||be==="boolean")&&(q=null);var Ee=!1;if(q===null)Ee=!0;else switch(be){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(q.$$typeof){case n:case e:Ee=!0;break;case v:return Ee=q._init,ze(Ee(q._payload),ie,de,he,ye)}}if(Ee)return ye=ye(q),Ee=he===""?"."+V(q,0):he,se(ye)?(de="",Ee!=null&&(de=Ee.replace(k,"$&/")+"/"),ze(ye,ie,de,"",function(ht){return ht})):ye!=null&&(b(ye)&&(ye=P(ye,de+(ye.key==null||q&&q.key===ye.key?"":(""+ye.key).replace(k,"$&/")+"/")+Ee)),ie.push(ye)),1;Ee=0;var Ve=he===""?".":he+":";if(se(q))for(var Le=0;Le<q.length;Le++)he=q[Le],be=Ve+V(he,Le),Ee+=ze(he,ie,de,be,ye);else if(Le=A(q),typeof Le=="function")for(q=Le.call(q),Le=0;!(he=q.next()).done;)he=he.value,be=Ve+V(he,Le++),Ee+=ze(he,ie,de,be,ye);else if(be==="object"){if(typeof q.then=="function")return ze(we(q),ie,de,he,ye);throw ie=String(q),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function ne(q,ie,de){if(q==null)return q;var he=[],ye=0;return ze(q,he,"","",function(be){return ie.call(de,be,ye++)}),he}function pe(q){if(q._status===-1){var ie=q._result;ie=ie(),ie.then(function(de){(q._status===0||q._status===-1)&&(q._status=1,q._result=de)},function(de){(q._status===0||q._status===-1)&&(q._status=2,q._result=de)}),q._status===-1&&(q._status=0,q._result=ie)}if(q._status===1)return q._result.default;throw q._result}var le=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function Te(){}return Ge.Children={map:ne,forEach:function(q,ie,de){ne(q,function(){ie.apply(this,arguments)},de)},count:function(q){var ie=0;return ne(q,function(){ie++}),ie},toArray:function(q){return ne(q,function(ie){return ie})||[]},only:function(q){if(!b(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Ge.Component=U,Ge.Fragment=t,Ge.Profiler=o,Ge.PureComponent=H,Ge.StrictMode=i,Ge.Suspense=f,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(q){return ee.H.useMemoCache(q)}},Ge.cache=function(q){return function(){return q.apply(null,arguments)}},Ge.cloneElement=function(q,ie,de){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var he=L({},q.props),ye=q.key,be=void 0;if(ie!=null)for(Ee in ie.ref!==void 0&&(be=void 0),ie.key!==void 0&&(ye=""+ie.key),ie)!fe.call(ie,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ie.ref===void 0||(he[Ee]=ie[Ee]);var Ee=arguments.length-2;if(Ee===1)he.children=de;else if(1<Ee){for(var Ve=Array(Ee),Le=0;Le<Ee;Le++)Ve[Le]=arguments[Le+2];he.children=Ve}return O(q.type,ye,void 0,void 0,be,he)},Ge.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Ge.createElement=function(q,ie,de){var he,ye={},be=null;if(ie!=null)for(he in ie.key!==void 0&&(be=""+ie.key),ie)fe.call(ie,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ye[he]=ie[he]);var Ee=arguments.length-2;if(Ee===1)ye.children=de;else if(1<Ee){for(var Ve=Array(Ee),Le=0;Le<Ee;Le++)Ve[Le]=arguments[Le+2];ye.children=Ve}if(q&&q.defaultProps)for(he in Ee=q.defaultProps,Ee)ye[he]===void 0&&(ye[he]=Ee[he]);return O(q,be,void 0,void 0,null,ye)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(q){return{$$typeof:d,render:q}},Ge.isValidElement=b,Ge.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:pe}},Ge.memo=function(q,ie){return{$$typeof:h,type:q,compare:ie===void 0?null:ie}},Ge.startTransition=function(q){var ie=ee.T,de={};ee.T=de;try{var he=q(),ye=ee.S;ye!==null&&ye(de,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(Te,le)}catch(be){le(be)}finally{ee.T=ie}},Ge.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Ge.use=function(q){return ee.H.use(q)},Ge.useActionState=function(q,ie,de){return ee.H.useActionState(q,ie,de)},Ge.useCallback=function(q,ie){return ee.H.useCallback(q,ie)},Ge.useContext=function(q){return ee.H.useContext(q)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(q,ie){return ee.H.useDeferredValue(q,ie)},Ge.useEffect=function(q,ie,de){var he=ee.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect(q,ie)},Ge.useId=function(){return ee.H.useId()},Ge.useImperativeHandle=function(q,ie,de){return ee.H.useImperativeHandle(q,ie,de)},Ge.useInsertionEffect=function(q,ie){return ee.H.useInsertionEffect(q,ie)},Ge.useLayoutEffect=function(q,ie){return ee.H.useLayoutEffect(q,ie)},Ge.useMemo=function(q,ie){return ee.H.useMemo(q,ie)},Ge.useOptimistic=function(q,ie){return ee.H.useOptimistic(q,ie)},Ge.useReducer=function(q,ie,de){return ee.H.useReducer(q,ie,de)},Ge.useRef=function(q){return ee.H.useRef(q)},Ge.useState=function(q){return ee.H.useState(q)},Ge.useSyncExternalStore=function(q,ie,de){return ee.H.useSyncExternalStore(q,ie,de)},Ge.useTransition=function(){return ee.H.useTransition()},Ge.version="19.1.1",Ge}var OT;function mg(){return OT||(OT=1,am.exports=Wx()),am.exports}var X=mg(),lm={exports:{}},Nu={},um={exports:{}},cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function Xx(){return FT||(FT=1,(function(n){function e(ne,pe){var le=ne.length;ne.push(pe);e:for(;0<le;){var Te=le-1>>>1,q=ne[Te];if(0<o(q,pe))ne[Te]=pe,ne[le]=q,le=Te;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var pe=ne[0],le=ne.pop();if(le!==pe){ne[0]=le;e:for(var Te=0,q=ne.length,ie=q>>>1;Te<ie;){var de=2*(Te+1)-1,he=ne[de],ye=de+1,be=ne[ye];if(0>o(he,le))ye<q&&0>o(be,he)?(ne[Te]=be,ne[ye]=le,Te=ye):(ne[Te]=he,ne[de]=le,Te=de);else if(ye<q&&0>o(be,le))ne[Te]=be,ne[ye]=le,Te=ye;else break e}}return pe}function o(ne,pe){var le=ne.sortIndex-pe.sortIndex;return le!==0?le:ne.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],h=[],v=1,E=null,A=3,R=!1,L=!1,F=!1,U=!1,J=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function se(ne){for(var pe=t(h);pe!==null;){if(pe.callback===null)i(h);else if(pe.startTime<=ne)i(h),pe.sortIndex=pe.expirationTime,e(f,pe);else break;pe=t(h)}}function ee(ne){if(F=!1,se(ne),!L)if(t(f)!==null)L=!0,fe||(fe=!0,V());else{var pe=t(h);pe!==null&&ze(ee,pe.startTime-ne)}}var fe=!1,O=-1,P=5,b=-1;function M(){return U?!0:!(n.unstable_now()-b<P)}function k(){if(U=!1,fe){var ne=n.unstable_now();b=ne;var pe=!0;try{e:{L=!1,F&&(F=!1,H(O),O=-1),R=!0;var le=A;try{t:{for(se(ne),E=t(f);E!==null&&!(E.expirationTime>ne&&M());){var Te=E.callback;if(typeof Te=="function"){E.callback=null,A=E.priorityLevel;var q=Te(E.expirationTime<=ne);if(ne=n.unstable_now(),typeof q=="function"){E.callback=q,se(ne),pe=!0;break t}E===t(f)&&i(f),se(ne)}else i(f);E=t(f)}if(E!==null)pe=!0;else{var ie=t(h);ie!==null&&ze(ee,ie.startTime-ne),pe=!1}}break e}finally{E=null,A=le,R=!1}pe=void 0}}finally{pe?V():fe=!1}}}var V;if(typeof z=="function")V=function(){z(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,we=N.port2;N.port1.onmessage=k,V=function(){we.postMessage(null)}}else V=function(){J(k,0)};function ze(ne,pe){O=J(function(){ne(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(ne){switch(A){case 1:case 2:case 3:var pe=3;break;default:pe=A}var le=A;A=pe;try{return ne()}finally{A=le}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(ne,pe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var le=A;A=ne;try{return pe()}finally{A=le}},n.unstable_scheduleCallback=function(ne,pe,le){var Te=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Te+le:Te):le=Te,ne){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=le+q,ne={id:v++,callback:pe,priorityLevel:ne,startTime:le,expirationTime:q,sortIndex:-1},le>Te?(ne.sortIndex=le,e(h,ne),t(f)===null&&ne===t(h)&&(F?(H(O),O=-1):F=!0,ze(ee,le-Te))):(ne.sortIndex=q,e(f,ne),L||R||(L=!0,fe||(fe=!0,V()))),ne},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(ne){var pe=A;return function(){var le=A;A=pe;try{return ne.apply(this,arguments)}finally{A=le}}}})(cm)),cm}var qT;function Zx(){return qT||(qT=1,um.exports=Xx()),um.exports}var dm={exports:{}},xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function eR(){if(BT)return xn;BT=1;var n=mg();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(f,h,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:f,containerInfo:h,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,xn.createPortal=function(f,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,v)},xn.flushSync=function(f){var h=u.T,v=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=h,i.p=v,i.d.f()}},xn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},xn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},xn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var v=h.as,E=d(v,h.crossOrigin),A=typeof h.integrity=="string"?h.integrity:void 0,R=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:R}):v==="script"&&i.d.X(f,{crossOrigin:E,integrity:A,fetchPriority:R,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},xn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=d(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},xn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,E=d(v,h.crossOrigin);i.d.L(f,v,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},xn.preloadModule=function(f,h){if(typeof f=="string")if(h){var v=d(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},xn.requestFormReset=function(f){i.d.r(f)},xn.unstable_batchedUpdates=function(f,h){return f(h)},xn.useFormState=function(f,h,v){return u.H.useFormState(f,h,v)},xn.useFormStatus=function(){return u.H.useHostTransitionStatus()},xn.version="19.1.1",xn}var HT;function tR(){if(HT)return dm.exports;HT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dm.exports=eR(),dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function nR(){if(GT)return Nu;GT=1;var n=Zx(),e=mg(),t=tR();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(a(s)!==s)throw Error(i(188))}function f(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var T=y.alternate;if(T===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===T.child){for(T=y.child;T;){if(T===l)return d(y),s;if(T===c)return d(y),r;T=T.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=T;else{for(var C=!1,I=y.child;I;){if(I===l){C=!0,l=y,c=T;break}if(I===c){C=!0,c=y,l=T;break}I=I.sibling}if(!C){for(I=T.child;I;){if(I===l){C=!0,l=T,c=y;break}if(I===c){C=!0,c=T,l=y;break}I=I.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function h(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=h(s),r!==null)return r;s=s.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),z=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function we(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case L:return"Fragment";case U:return"Profiler";case F:return"StrictMode";case ee:return"Suspense";case fe:return"SuspenseList";case b:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case z:return(s.displayName||"Context")+".Provider";case H:return(s._context.displayName||"Context")+".Consumer";case se:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return r=s.displayName||null,r!==null?r:we(s.type)||"Memo";case P:r=s._payload,s=s._init;try{return we(s(r))}catch{}}return null}var ze=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Te=[],q=-1;function ie(s){return{current:s}}function de(s){0>q||(s.current=Te[q],Te[q]=null,q--)}function he(s,r){q++,Te[q]=s.current,s.current=r}var ye=ie(null),be=ie(null),Ee=ie(null),Ve=ie(null);function Le(s,r){switch(he(Ee,r),he(be,s),he(ye,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?uT(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=uT(r),s=cT(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}de(ye),he(ye,s)}function ht(){de(ye),de(be),de(Ee)}function ot(s){s.memoizedState!==null&&he(Ve,s);var r=ye.current,l=cT(r,s.type);r!==l&&(he(be,s),he(ye,l))}function Vt(s){be.current===s&&(de(ye),de(be)),Ve.current===s&&(de(Ve),Su._currentValue=le)}var hi=Object.prototype.hasOwnProperty,Mn=n.unstable_scheduleCallback,xi=n.unstable_cancelCallback,Cs=n.unstable_shouldYield,Qi=n.unstable_requestPaint,bt=n.unstable_now,hn=n.unstable_getCurrentPriorityLevel,vt=n.unstable_ImmediatePriority,Pt=n.unstable_UserBlockingPriority,zn=n.unstable_NormalPriority,Wi=n.unstable_LowPriority,Is=n.unstable_IdlePriority,Ri=n.log,Ni=n.unstable_setDisableYieldValue,kn=null,at=null;function Sn(s){if(typeof Ri=="function"&&Ni(s),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(kn,s)}catch{}}var Qt=Math.clz32?Math.clz32:Rs,Xi=Math.log,xs=Math.LN2;function Rs(s){return s>>>=0,s===0?32:31-(Xi(s)/xs|0)|0}var Wt=256,Un=4194304;function Vn(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function wn(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,T=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var I=c&134217727;return I!==0?(c=I&~T,c!==0?y=Vn(c):(C&=I,C!==0?y=Vn(C):l||(l=I&~s,l!==0&&(y=Vn(l))))):(I=c&~T,I!==0?y=Vn(I):C!==0?y=Vn(C):l||(l=c&~s,l!==0&&(y=Vn(l)))),y===0?0:r!==0&&r!==y&&(r&T)===0&&(T=y&-y,l=r&-r,T>=l||T===32&&(l&4194048)!==0)?r:y}function jn(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Zi(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zn(){var s=Wt;return Wt<<=1,(Wt&4194048)===0&&(Wt=256),s}function ei(){var s=Un;return Un<<=1,(Un&62914560)===0&&(Un=4194304),s}function fi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function ft(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ns(s,r,l,c,y,T){var C=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var I=s.entanglements,B=s.expirationTimes,K=s.hiddenUpdates;for(l=C&~l;0<l;){var re=31-Qt(l),ue=1<<re;I[re]=0,B[re]=-1;var W=K[re];if(W!==null)for(K[re]=null,re=0;re<W.length;re++){var Z=W[re];Z!==null&&(Z.lane&=-536870913)}l&=~ue}c!==0&&Ln(s,c,0),T!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=T&~(C&~r))}function Ln(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-Qt(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&4194090}function pi(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-Qt(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function bs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ar(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ti(){var s=pe.p;return s!==0?s:(s=window.event,s===void 0?32:NT(s.type))}function Ct(s,r){var l=pe.p;try{return pe.p=s,r()}finally{pe.p=l}}var Ke=Math.random().toString(36).slice(2),it="__reactFiber$"+Ke,Tt="__reactProps$"+Ke,Xt="__reactContainer$"+Ke,fn="__reactEvents$"+Ke,zt="__reactListeners$"+Ke,uo="__reactHandles$"+Ke,x="__reactResources$"+Ke,Q="__reactMarker$"+Ke;function ge(s){delete s[it],delete s[Tt],delete s[fn],delete s[zt],delete s[uo]}function qe(s){var r=s[it];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Xt]||l[it]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=pT(s);s!==null;){if(l=s[it])return l;s=pT(s)}return r}s=l,l=s.parentNode}return null}function Ie(s){if(s=s[it]||s[Xt]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function je(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function pn(s){var r=s[x];return r||(r=s[x]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Dt(s){s[Q]=!0}var la=new Set,co={};function es(s,r){ts(s,r),ts(s+"Capture",r)}function ts(s,r){for(co[s]=r,s=0;s<r.length;s++)la.add(r[s])}var ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ns={},ua={};function ff(s){return hi.call(ua,s)?!0:hi.call(ns,s)?!1:ho.test(s)?ua[s]=!0:(ns[s]=!0,!1)}function fo(s,r,l){if(ff(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function po(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function mi(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}var mo,ca;function Ps(s){if(mo===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);mo=r&&r[1]||"",ca=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mo+s+ca}var da=!1;function ha(s,r){if(!s||da)return"";da=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(Z){var W=Z}Reflect.construct(s,[],ue)}else{try{ue.call()}catch(Z){W=Z}s.call(ue.prototype)}}else{try{throw Error()}catch(Z){W=Z}(ue=s())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=c.DetermineComponentFrameRoot(),C=T[0],I=T[1];if(C&&I){var B=C.split(`
`),K=I.split(`
`);for(y=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===B.length||y===K.length)for(c=B.length-1,y=K.length-1;1<=c&&0<=y&&B[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(B[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||B[c]!==K[y]){var re=`
`+B[c].replace(" at new "," at ");return s.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",s.displayName)),re}while(1<=c&&0<=y);break}}}finally{da=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Ps(l):""}function pf(s){switch(s.tag){case 26:case 27:case 5:return Ps(s.type);case 16:return Ps("Lazy");case 13:return Ps("Suspense");case 19:return Ps("SuspenseList");case 0:case 15:return ha(s.type,!1);case 11:return ha(s.type.render,!1);case 1:return ha(s.type,!0);case 31:return Ps("Activity");default:return""}}function bi(s){try{var r="";do r+=pf(s),s=s.return;while(s);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Mt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function lr(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function go(s){var r=lr(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),c=""+s[r];if(!s.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,T=l.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){c=""+C,T.call(this,C)}}),Object.defineProperty(s,r,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function ur(s){s._valueTracker||(s._valueTracker=go(s))}function pt(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=lr(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Ds(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var yo=/[\n"\\]/g;function sn(s){return s.replace(yo,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Rl(s,r,l,c,y,T,C,I){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),r!=null?C==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Mt(r)):s.value!==""+Mt(r)&&(s.value=""+Mt(r)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),r!=null?bl(s,C,Mt(r)):l!=null?bl(s,C,Mt(l)):c!=null&&s.removeAttribute("value"),y==null&&T!=null&&(s.defaultChecked=!!T),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+Mt(I):s.removeAttribute("name")}function Nl(s,r,l,c,y,T,C,I){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),r!=null||l!=null){if(!(T!=="submit"&&T!=="reset"||r!=null))return;l=l!=null?""+Mt(l):"",r=r!=null?""+Mt(r):l,I||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=I?s.checked:!!c,s.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function bl(s,r,l){r==="number"&&Ds(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function cr(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+Mt(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Ac(s,r,l){if(r!=null&&(r=""+Mt(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+Mt(l):""}function Sc(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(ze(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=Mt(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c)}function gi(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Ms=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Ms.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Dl(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&Pl(s,y,c)}else for(var T in r)r.hasOwnProperty(T)&&Pl(s,T,r[T])}function fa(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pi(s){return Cc.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Ml=null;function kl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var dr=null,On=null;function Ic(s){var r=Ie(s);if(r&&(s=r.stateNode)){var l=s[Tt]||null;e:switch(s=r.stateNode,r.type){case"input":if(Rl(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+sn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Tt]||null;if(!y)throw Error(i(90));Rl(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&pt(c)}break e;case"textarea":Ac(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&cr(s,!!l.multiple,r,!1)}}}var _o=!1;function vo(s,r,l){if(_o)return s(r,l);_o=!0;try{var c=s(r);return c}finally{if(_o=!1,(dr!==null||On!==null)&&(md(),dr&&(r=dr,s=On,On=dr=null,Ic(r),s)))for(r=0;r<s.length;r++)Ic(s[r])}}function hr(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Tt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ks=!1;if(Fn)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){ks=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{ks=!1}var yi=null,At=null,pa=null;function xc(){if(pa)return pa;var s,r=At,l=r.length,c,y="value"in yi?yi.value:yi.textContent,T=y.length;for(s=0;s<l&&r[s]===y[s];s++);var C=l-s;for(c=1;c<=C&&r[l-c]===y[T-c];c++);return pa=y.slice(s,1<c?1-c:void 0)}function To(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Eo(){return!0}function Ul(){return!1}function Zt(s){function r(l,c,y,T,C){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=T,this.target=C,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(l=s[I],this[I]=l?l(T):T[I]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Eo:Ul,this.isPropagationStopped=Ul,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),r}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ao=Zt(Cn),So=v({},Cn,{view:0,detail:0}),wo=Zt(So),ma,Co,is,Io=v({},So,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_a,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==is&&(is&&s.type==="mousemove"?(ma=s.screenX-is.screenX,Co=s.screenY-is.screenY):Co=ma=0,is=s),ma)},movementY:function(s){return"movementY"in s?s.movementY:Co}}),xo=Zt(Io),mf=v({},Io,{dataTransfer:0}),Rc=Zt(mf),Ro=v({},So,{relatedTarget:0}),ga=Zt(Ro),Nc=v({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),Vl=Zt(Nc),Ll=v({},Cn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),bc=Zt(Ll),ya=v({},Cn,{data:0}),Ol=Zt(ya),Pc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Us={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Dc[s])?!!r[s]:!1}function _a(){return Mc}var kc=v({},So,{key:function(s){if(s.key){var r=Pc[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=To(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Us[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_a,charCode:function(s){return s.type==="keypress"?To(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?To(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),va=Zt(kc),qn=v({},Io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fl=Zt(qn),Uc=v({},So,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_a}),pr=Zt(Uc),m=v({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Zt(m),w=v({},Io,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),D=Zt(w),Y=v({},Cn,{newState:0,oldState:0}),te=Zt(Y),me=[9,13,27,32],Fe=Fn&&"CompositionEvent"in window,It=null;Fn&&"documentMode"in document&&(It=document.documentMode);var ut=Fn&&"TextEvent"in window&&!It,qt=Fn&&(!Fe||It&&8<It&&11>=It),ni=" ",ss=!1;function Di(s,r){switch(s){case"keyup":return me.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mi(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ki=!1;function ql(s,r){switch(s){case"compositionend":return Mi(r);case"keypress":return r.which!==32?null:(ss=!0,ni);case"textInput":return s=r.data,s===ni&&ss?null:s;default:return null}}function AI(s,r){if(ki)return s==="compositionend"||!Fe&&Di(s,r)?(s=xc(),pa=At=yi=null,ki=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return qt&&r.locale!=="ko"?null:r.data;default:return null}}var SI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!SI[s.type]:r==="textarea"}function wy(s,r,l,c){dr?On?On.push(c):On=[c]:dr=c,r=Ed(r,"onChange"),0<r.length&&(l=new Ao("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var Bl=null,Hl=null;function wI(s){sT(s,0)}function Vc(s){var r=je(s);if(pt(r))return s}function Cy(s,r){if(s==="change")return r}var Iy=!1;if(Fn){var gf;if(Fn){var yf="oninput"in document;if(!yf){var xy=document.createElement("div");xy.setAttribute("oninput","return;"),yf=typeof xy.oninput=="function"}gf=yf}else gf=!1;Iy=gf&&(!document.documentMode||9<document.documentMode)}function Ry(){Bl&&(Bl.detachEvent("onpropertychange",Ny),Hl=Bl=null)}function Ny(s){if(s.propertyName==="value"&&Vc(Hl)){var r=[];wy(r,Hl,s,kl(s)),vo(wI,r)}}function CI(s,r,l){s==="focusin"?(Ry(),Bl=r,Hl=l,Bl.attachEvent("onpropertychange",Ny)):s==="focusout"&&Ry()}function II(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Vc(Hl)}function xI(s,r){if(s==="click")return Vc(r)}function RI(s,r){if(s==="input"||s==="change")return Vc(r)}function NI(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var ii=typeof Object.is=="function"?Object.is:NI;function Gl(s,r){if(ii(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!hi.call(r,y)||!ii(s[y],r[y]))return!1}return!0}function by(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Py(s,r){var l=by(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=by(l)}}function Dy(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Dy(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function My(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Ds(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Ds(s.document)}return r}function _f(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var bI=Fn&&"documentMode"in document&&11>=document.documentMode,Ta=null,vf=null,zl=null,Tf=!1;function ky(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Tf||Ta==null||Ta!==Ds(c)||(c=Ta,"selectionStart"in c&&_f(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),zl&&Gl(zl,c)||(zl=c,c=Ed(vf,"onSelect"),0<c.length&&(r=new Ao("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Ta)))}function No(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Ea={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionrun:No("Transition","TransitionRun"),transitionstart:No("Transition","TransitionStart"),transitioncancel:No("Transition","TransitionCancel"),transitionend:No("Transition","TransitionEnd")},Ef={},Uy={};Fn&&(Uy=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function bo(s){if(Ef[s])return Ef[s];if(!Ea[s])return s;var r=Ea[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Uy)return Ef[s]=r[l];return s}var Vy=bo("animationend"),Ly=bo("animationiteration"),Oy=bo("animationstart"),PI=bo("transitionrun"),DI=bo("transitionstart"),MI=bo("transitioncancel"),Fy=bo("transitionend"),qy=new Map,Af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Af.push("scrollEnd");function Ui(s,r){qy.set(s,r),es(r,[s])}var By=new WeakMap;function _i(s,r){if(typeof s=="object"&&s!==null){var l=By.get(s);return l!==void 0?l:(r={value:s,source:r,stack:bi(r)},By.set(s,r),r)}return{value:s,source:r,stack:bi(r)}}var vi=[],Aa=0,Sf=0;function Lc(){for(var s=Aa,r=Sf=Aa=0;r<s;){var l=vi[r];vi[r++]=null;var c=vi[r];vi[r++]=null;var y=vi[r];vi[r++]=null;var T=vi[r];if(vi[r++]=null,c!==null&&y!==null){var C=c.pending;C===null?y.next=y:(y.next=C.next,C.next=y),c.pending=y}T!==0&&Hy(l,y,T)}}function Oc(s,r,l,c){vi[Aa++]=s,vi[Aa++]=r,vi[Aa++]=l,vi[Aa++]=c,Sf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function wf(s,r,l,c){return Oc(s,r,l,c),Fc(s)}function Sa(s,r){return Oc(s,null,null,r),Fc(s)}function Hy(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,T=s.return;T!==null;)T.childLanes|=l,c=T.alternate,c!==null&&(c.childLanes|=l),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(y=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,y&&r!==null&&(y=31-Qt(l),s=T.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),T):null}function Fc(s){if(50<mu)throw mu=0,bp=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var wa={};function kI(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(s,r,l,c){return new kI(s,r,l,c)}function Cf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Vs(s,r){var l=s.alternate;return l===null?(l=si(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Gy(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function qc(s,r,l,c,y,T){var C=0;if(c=s,typeof s=="function")Cf(s)&&(C=1);else if(typeof s=="string")C=Vx(s,l,ye.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case b:return s=si(31,l,r,y),s.elementType=b,s.lanes=T,s;case L:return Po(l.children,y,T,r);case F:C=8,y|=24;break;case U:return s=si(12,l,r,y|2),s.elementType=U,s.lanes=T,s;case ee:return s=si(13,l,r,y),s.elementType=ee,s.lanes=T,s;case fe:return s=si(19,l,r,y),s.elementType=fe,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case J:case z:C=10;break e;case H:C=9;break e;case se:C=11;break e;case O:C=14;break e;case P:C=16,c=null;break e}C=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=si(C,l,r,y),r.elementType=s,r.type=c,r.lanes=T,r}function Po(s,r,l,c){return s=si(7,s,c,r),s.lanes=l,s}function If(s,r,l){return s=si(6,s,null,r),s.lanes=l,s}function xf(s,r,l){return r=si(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Ca=[],Ia=0,Bc=null,Hc=0,Ti=[],Ei=0,Do=null,Ls=1,Os="";function Mo(s,r){Ca[Ia++]=Hc,Ca[Ia++]=Bc,Bc=s,Hc=r}function zy(s,r,l){Ti[Ei++]=Ls,Ti[Ei++]=Os,Ti[Ei++]=Do,Do=s;var c=Ls;s=Os;var y=32-Qt(c)-1;c&=~(1<<y),l+=1;var T=32-Qt(r)+y;if(30<T){var C=y-y%5;T=(c&(1<<C)-1).toString(32),c>>=C,y-=C,Ls=1<<32-Qt(r)+y|l<<y|c,Os=T+s}else Ls=1<<T|l<<y|c,Os=s}function Rf(s){s.return!==null&&(Mo(s,1),zy(s,1,0))}function Nf(s){for(;s===Bc;)Bc=Ca[--Ia],Ca[Ia]=null,Hc=Ca[--Ia],Ca[Ia]=null;for(;s===Do;)Do=Ti[--Ei],Ti[Ei]=null,Os=Ti[--Ei],Ti[Ei]=null,Ls=Ti[--Ei],Ti[Ei]=null}var Bn=null,Lt=null,lt=!1,ko=null,rs=!1,bf=Error(i(519));function Uo(s){var r=Error(i(418,""));throw Yl(_i(r,s)),bf}function jy(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[it]=s,r[Tt]=c,l){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(l=0;l<yu.length;l++)Qe(yu[l],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Qe("invalid",r),Nl(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),ur(r);break;case"select":Qe("invalid",r);break;case"textarea":Qe("invalid",r),Sc(r,c.value,c.defaultValue,c.children),ur(r)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||lT(r.textContent,l)?(c.popover!=null&&(Qe("beforetoggle",r),Qe("toggle",r)),c.onScroll!=null&&Qe("scroll",r),c.onScrollEnd!=null&&Qe("scrollend",r),c.onClick!=null&&(r.onclick=Ad),r=!0):r=!1,r||Uo(s)}function $y(s){for(Bn=s.return;Bn;)switch(Bn.tag){case 5:case 13:rs=!1;return;case 27:case 3:rs=!0;return;default:Bn=Bn.return}}function jl(s){if(s!==Bn)return!1;if(!lt)return $y(s),lt=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||$p(s.type,s.memoizedProps)),l=!l),l&&Lt&&Uo(s),$y(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(r===0){Lt=Li(s.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;s=s.nextSibling}Lt=null}}else r===27?(r=Lt,br(s.type)?(s=Qp,Qp=null,Lt=s):Lt=r):Lt=Bn?Li(s.stateNode.nextSibling):null;return!0}function $l(){Lt=Bn=null,lt=!1}function Yy(){var s=ko;return s!==null&&(Kn===null?Kn=s:Kn.push.apply(Kn,s),ko=null),s}function Yl(s){ko===null?ko=[s]:ko.push(s)}var Pf=ie(null),Vo=null,Fs=null;function mr(s,r,l){he(Pf,r._currentValue),r._currentValue=l}function qs(s){s._currentValue=Pf.current,de(Pf)}function Df(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Mf(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var T=y.dependencies;if(T!==null){var C=y.child;T=T.firstContext;e:for(;T!==null;){var I=T;T=y;for(var B=0;B<r.length;B++)if(I.context===r[B]){T.lanes|=l,I=T.alternate,I!==null&&(I.lanes|=l),Df(T.return,l,s),c||(C=null);break e}T=I.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=l,T=C.alternate,T!==null&&(T.lanes|=l),Df(C,l,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Kl(s,r,l,c){s=null;for(var y=r,T=!1;y!==null;){if(!T){if((y.flags&524288)!==0)T=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var I=y.type;ii(y.pendingProps.value,C.value)||(s!==null?s.push(I):s=[I])}}else if(y===Ve.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Su):s=[Su])}y=y.return}s!==null&&Mf(r,s,l,c),r.flags|=262144}function Gc(s){for(s=s.firstContext;s!==null;){if(!ii(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Lo(s){Vo=s,Fs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function In(s){return Ky(Vo,s)}function zc(s,r){return Vo===null&&Lo(s),Ky(s,r)}function Ky(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Fs===null){if(s===null)throw Error(i(308));Fs=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Fs=Fs.next=r;return l}var UI=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},VI=n.unstable_scheduleCallback,LI=n.unstable_NormalPriority,en={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kf(){return{controller:new UI,data:new Map,refCount:0}}function Jl(s){s.refCount--,s.refCount===0&&VI(LI,function(){s.controller.abort()})}var Ql=null,Uf=0,xa=0,Ra=null;function OI(s,r){if(Ql===null){var l=Ql=[];Uf=0,xa=Lp(),Ra={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Uf++,r.then(Jy,Jy),r}function Jy(){if(--Uf===0&&Ql!==null){Ra!==null&&(Ra.status="fulfilled");var s=Ql;Ql=null,xa=0,Ra=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function FI(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Qy=ne.S;ne.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&OI(s,r),Qy!==null&&Qy(s,r)};var Oo=ie(null);function Vf(){var s=Oo.current;return s!==null?s:St.pooledCache}function jc(s,r){r===null?he(Oo,Oo.current):he(Oo,r.pool)}function Wy(){var s=Vf();return s===null?null:{parent:en._currentValue,pool:s}}var Wl=Error(i(460)),Xy=Error(i(474)),$c=Error(i(542)),Lf={then:function(){}};function Zy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Yc(){}function e_(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Yc,Yc),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,n_(s),s;default:if(typeof r.status=="string")r.then(Yc,Yc);else{if(s=St,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,n_(s),s}throw Xl=r,Wl}}var Xl=null;function t_(){if(Xl===null)throw Error(i(459));var s=Xl;return Xl=null,s}function n_(s){if(s===Wl||s===$c)throw Error(i(483))}var gr=!1;function Of(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ff(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function yr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function _r(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(ct&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Fc(s),Hy(s,null,l),r}return Oc(s,c,r,l),Fc(s)}function Zl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,pi(s,l)}}function qf(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,T=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};T===null?y=T=C:T=T.next=C,l=l.next}while(l!==null);T===null?y=T=r:T=T.next=r}else y=T=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:T,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Bf=!1;function eu(){if(Bf){var s=Ra;if(s!==null)throw s}}function tu(s,r,l,c){Bf=!1;var y=s.updateQueue;gr=!1;var T=y.firstBaseUpdate,C=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var B=I,K=B.next;B.next=null,C===null?T=K:C.next=K,C=B;var re=s.alternate;re!==null&&(re=re.updateQueue,I=re.lastBaseUpdate,I!==C&&(I===null?re.firstBaseUpdate=K:I.next=K,re.lastBaseUpdate=B))}if(T!==null){var ue=y.baseState;C=0,re=K=B=null,I=T;do{var W=I.lane&-536870913,Z=W!==I.lane;if(Z?(et&W)===W:(c&W)===W){W!==0&&W===xa&&(Bf=!0),re!==null&&(re=re.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ue=s,Pe=I;W=r;var yt=l;switch(Pe.tag){case 1:if(Ue=Pe.payload,typeof Ue=="function"){ue=Ue.call(yt,ue,W);break e}ue=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Pe.payload,W=typeof Ue=="function"?Ue.call(yt,ue,W):Ue,W==null)break e;ue=v({},ue,W);break e;case 2:gr=!0}}W=I.callback,W!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:I.tag,payload:I.payload,callback:I.callback,next:null},re===null?(K=re=Z,B=ue):re=re.next=Z,C|=W;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);re===null&&(B=ue),y.baseState=B,y.firstBaseUpdate=K,y.lastBaseUpdate=re,T===null&&(y.shared.lanes=0),Ir|=C,s.lanes=C,s.memoizedState=ue}}function i_(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function s_(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)i_(l[s],r)}var Na=ie(null),Kc=ie(0);function r_(s,r){s=Ys,he(Kc,s),he(Na,r),Ys=s|r.baseLanes}function Hf(){he(Kc,Ys),he(Na,Na.current)}function Gf(){Ys=Kc.current,de(Na),de(Kc)}var vr=0,$e=null,mt=null,jt=null,Jc=!1,ba=!1,Fo=!1,Qc=0,nu=0,Pa=null,qI=0;function Bt(){throw Error(i(321))}function zf(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!ii(s[l],r[l]))return!1;return!0}function jf(s,r,l,c,y,T){return vr=T,$e=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ne.H=s===null||s.memoizedState===null?H_:G_,Fo=!1,T=l(c,y),Fo=!1,ba&&(T=a_(r,l,c,y)),o_(s),T}function o_(s){ne.H=nd;var r=mt!==null&&mt.next!==null;if(vr=0,jt=mt=$e=null,Jc=!1,nu=0,Pa=null,r)throw Error(i(300));s===null||rn||(s=s.dependencies,s!==null&&Gc(s)&&(rn=!0))}function a_(s,r,l,c){$e=s;var y=0;do{if(ba&&(Pa=null),nu=0,ba=!1,25<=y)throw Error(i(301));if(y+=1,jt=mt=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}ne.H=YI,T=r(l,c)}while(ba);return T}function BI(){var s=ne.H,r=s.useState()[0];return r=typeof r.then=="function"?iu(r):r,s=s.useState()[0],(mt!==null?mt.memoizedState:null)!==s&&($e.flags|=1024),r}function $f(){var s=Qc!==0;return Qc=0,s}function Yf(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Kf(s){if(Jc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Jc=!1}vr=0,jt=mt=$e=null,ba=!1,nu=Qc=0,Pa=null}function $n(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?$e.memoizedState=jt=s:jt=jt.next=s,jt}function $t(){if(mt===null){var s=$e.alternate;s=s!==null?s.memoizedState:null}else s=mt.next;var r=jt===null?$e.memoizedState:jt.next;if(r!==null)jt=r,mt=s;else{if(s===null)throw $e.alternate===null?Error(i(467)):Error(i(310));mt=s,s={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},jt===null?$e.memoizedState=jt=s:jt=jt.next=s}return jt}function Jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function iu(s){var r=nu;return nu+=1,Pa===null&&(Pa=[]),s=e_(Pa,s,r),r=$e,(jt===null?r.memoizedState:jt.next)===null&&(r=r.alternate,ne.H=r===null||r.memoizedState===null?H_:G_),s}function Wc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return iu(s);if(s.$$typeof===z)return In(s)}throw Error(i(438,String(s)))}function Qf(s){var r=null,l=$e.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=$e.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Jf(),$e.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=M;return r.index++,l}function Bs(s,r){return typeof r=="function"?r(s):r}function Xc(s){var r=$t();return Wf(r,mt,s)}function Wf(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,T=c.pending;if(T!==null){if(y!==null){var C=y.next;y.next=T.next,T.next=C}r.baseQueue=y=T,c.pending=null}if(T=s.baseState,y===null)s.memoizedState=T;else{r=y.next;var I=C=null,B=null,K=r,re=!1;do{var ue=K.lane&-536870913;if(ue!==K.lane?(et&ue)===ue:(vr&ue)===ue){var W=K.revertLane;if(W===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ue===xa&&(re=!0);else if((vr&W)===W){K=K.next,W===xa&&(re=!0);continue}else ue={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},B===null?(I=B=ue,C=T):B=B.next=ue,$e.lanes|=W,Ir|=W;ue=K.action,Fo&&l(T,ue),T=K.hasEagerState?K.eagerState:l(T,ue)}else W={lane:ue,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},B===null?(I=B=W,C=T):B=B.next=W,$e.lanes|=ue,Ir|=ue;K=K.next}while(K!==null&&K!==r);if(B===null?C=T:B.next=I,!ii(T,s.memoizedState)&&(rn=!0,re&&(l=Ra,l!==null)))throw l;s.memoizedState=T,s.baseState=C,s.baseQueue=B,c.lastRenderedState=T}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Xf(s){var r=$t(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,T=r.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do T=s(T,C.action),C=C.next;while(C!==y);ii(T,r.memoizedState)||(rn=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),l.lastRenderedState=T}return[T,c]}function l_(s,r,l){var c=$e,y=$t(),T=lt;if(T){if(l===void 0)throw Error(i(407));l=l()}else l=r();var C=!ii((mt||y).memoizedState,l);C&&(y.memoizedState=l,rn=!0),y=y.queue;var I=d_.bind(null,c,y,s);if(su(2048,8,I,[s]),y.getSnapshot!==r||C||jt!==null&&jt.memoizedState.tag&1){if(c.flags|=2048,Da(9,Zc(),c_.bind(null,c,y,l,r),null),St===null)throw Error(i(349));T||(vr&124)!==0||u_(c,r,l)}return l}function u_(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=$e.updateQueue,r===null?(r=Jf(),$e.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function c_(s,r,l,c){r.value=l,r.getSnapshot=c,h_(r)&&f_(s)}function d_(s,r,l){return l(function(){h_(r)&&f_(s)})}function h_(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!ii(s,l)}catch{return!0}}function f_(s){var r=Sa(s,2);r!==null&&ui(r,s,2)}function Zf(s){var r=$n();if(typeof s=="function"){var l=s;if(s=l(),Fo){Sn(!0);try{l()}finally{Sn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:s},r}function p_(s,r,l,c){return s.baseState=l,Wf(s,mt,typeof c=="function"?c:Bs)}function HI(s,r,l,c,y){if(td(s))throw Error(i(485));if(s=r.action,s!==null){var T={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){T.listeners.push(C)}};ne.T!==null?l(!0):T.isTransition=!1,c(T),l=r.pending,l===null?(T.next=r.pending=T,m_(r,T)):(T.next=l.next,r.pending=l.next=T)}}function m_(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var T=ne.T,C={};ne.T=C;try{var I=l(y,c),B=ne.S;B!==null&&B(C,I),g_(s,r,I)}catch(K){ep(s,r,K)}finally{ne.T=T}}else try{T=l(y,c),g_(s,r,T)}catch(K){ep(s,r,K)}}function g_(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){y_(s,r,c)},function(c){return ep(s,r,c)}):y_(s,r,l)}function y_(s,r,l){r.status="fulfilled",r.value=l,__(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,m_(s,l)))}function ep(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,__(r),r=r.next;while(r!==c)}s.action=null}function __(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function v_(s,r){return r}function T_(s,r){if(lt){var l=St.formState;if(l!==null){e:{var c=$e;if(lt){if(Lt){t:{for(var y=Lt,T=rs;y.nodeType!==8;){if(!T){y=null;break t}if(y=Li(y.nextSibling),y===null){y=null;break t}}T=y.data,y=T==="F!"||T==="F"?y:null}if(y){Lt=Li(y.nextSibling),c=y.data==="F!";break e}}Uo(c)}c=!1}c&&(r=l[0])}}return l=$n(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v_,lastRenderedState:r},l.queue=c,l=F_.bind(null,$e,c),c.dispatch=l,c=Zf(!1),T=rp.bind(null,$e,!1,c.queue),c=$n(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=HI.bind(null,$e,y,T,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function E_(s){var r=$t();return A_(r,mt,s)}function A_(s,r,l){if(r=Wf(s,r,v_)[0],s=Xc(Bs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=iu(r)}catch(C){throw C===Wl?$c:C}else c=r;r=$t();var y=r.queue,T=y.dispatch;return l!==r.memoizedState&&($e.flags|=2048,Da(9,Zc(),GI.bind(null,y,l),null)),[c,T,s]}function GI(s,r){s.action=r}function S_(s){var r=$t(),l=mt;if(l!==null)return A_(r,l,s);$t(),r=r.memoizedState,l=$t();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function Da(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=$e.updateQueue,r===null&&(r=Jf(),$e.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function Zc(){return{destroy:void 0,resource:void 0}}function w_(){return $t().memoizedState}function ed(s,r,l,c){var y=$n();c=c===void 0?null:c,$e.flags|=s,y.memoizedState=Da(1|r,Zc(),l,c)}function su(s,r,l,c){var y=$t();c=c===void 0?null:c;var T=y.memoizedState.inst;mt!==null&&c!==null&&zf(c,mt.memoizedState.deps)?y.memoizedState=Da(r,T,l,c):($e.flags|=s,y.memoizedState=Da(1|r,T,l,c))}function C_(s,r){ed(8390656,8,s,r)}function I_(s,r){su(2048,8,s,r)}function x_(s,r){return su(4,2,s,r)}function R_(s,r){return su(4,4,s,r)}function N_(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function b_(s,r,l){l=l!=null?l.concat([s]):null,su(4,4,N_.bind(null,r,s),l)}function tp(){}function P_(s,r){var l=$t();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&zf(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function D_(s,r){var l=$t();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&zf(r,c[1]))return c[0];if(c=s(),Fo){Sn(!0);try{s()}finally{Sn(!1)}}return l.memoizedState=[c,r],c}function np(s,r,l){return l===void 0||(vr&1073741824)!==0?s.memoizedState=r:(s.memoizedState=l,s=Uv(),$e.lanes|=s,Ir|=s,l)}function M_(s,r,l,c){return ii(l,r)?l:Na.current!==null?(s=np(s,l,c),ii(s,r)||(rn=!0),s):(vr&42)===0?(rn=!0,s.memoizedState=l):(s=Uv(),$e.lanes|=s,Ir|=s,r)}function k_(s,r,l,c,y){var T=pe.p;pe.p=T!==0&&8>T?T:8;var C=ne.T,I={};ne.T=I,rp(s,!1,r,l);try{var B=y(),K=ne.S;if(K!==null&&K(I,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var re=FI(B,c);ru(s,r,re,li(s))}else ru(s,r,c,li(s))}catch(ue){ru(s,r,{then:function(){},status:"rejected",reason:ue},li())}finally{pe.p=T,ne.T=C}}function zI(){}function ip(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=U_(s).queue;k_(s,y,r,le,l===null?zI:function(){return V_(s),l(c)})}function U_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:le},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function V_(s){var r=U_(s).next.queue;ru(s,r,{},li())}function sp(){return In(Su)}function L_(){return $t().memoizedState}function O_(){return $t().memoizedState}function jI(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=li();s=yr(l);var c=_r(r,s,l);c!==null&&(ui(c,r,l),Zl(c,r,l)),r={cache:kf()},s.payload=r;return}r=r.return}}function $I(s,r,l){var c=li();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},td(s)?q_(r,l):(l=wf(s,r,l,c),l!==null&&(ui(l,s,c),B_(l,r,c)))}function F_(s,r,l){var c=li();ru(s,r,l,c)}function ru(s,r,l,c){var y={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(td(s))q_(r,y);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var C=r.lastRenderedState,I=T(C,l);if(y.hasEagerState=!0,y.eagerState=I,ii(I,C))return Oc(s,r,y,0),St===null&&Lc(),!1}catch{}finally{}if(l=wf(s,r,y,c),l!==null)return ui(l,s,c),B_(l,r,c),!0}return!1}function rp(s,r,l,c){if(c={lane:2,revertLane:Lp(),action:c,hasEagerState:!1,eagerState:null,next:null},td(s)){if(r)throw Error(i(479))}else r=wf(s,l,c,2),r!==null&&ui(r,s,2)}function td(s){var r=s.alternate;return s===$e||r!==null&&r===$e}function q_(s,r){ba=Jc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function B_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,pi(s,l)}}var nd={readContext:In,use:Wc,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},H_={readContext:In,use:Wc,useCallback:function(s,r){return $n().memoizedState=[s,r===void 0?null:r],s},useContext:In,useEffect:C_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,ed(4194308,4,N_.bind(null,r,s),l)},useLayoutEffect:function(s,r){return ed(4194308,4,s,r)},useInsertionEffect:function(s,r){ed(4,2,s,r)},useMemo:function(s,r){var l=$n();r=r===void 0?null:r;var c=s();if(Fo){Sn(!0);try{s()}finally{Sn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=$n();if(l!==void 0){var y=l(r);if(Fo){Sn(!0);try{l(r)}finally{Sn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=$I.bind(null,$e,s),[c.memoizedState,s]},useRef:function(s){var r=$n();return s={current:s},r.memoizedState=s},useState:function(s){s=Zf(s);var r=s.queue,l=F_.bind(null,$e,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:tp,useDeferredValue:function(s,r){var l=$n();return np(l,s,r)},useTransition:function(){var s=Zf(!1);return s=k_.bind(null,$e,s.queue,!0,!1),$n().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=$e,y=$n();if(lt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),St===null)throw Error(i(349));(et&124)!==0||u_(c,r,l)}y.memoizedState=l;var T={value:l,getSnapshot:r};return y.queue=T,C_(d_.bind(null,c,T,s),[s]),c.flags|=2048,Da(9,Zc(),c_.bind(null,c,T,l,r),null),l},useId:function(){var s=$n(),r=St.identifierPrefix;if(lt){var l=Os,c=Ls;l=(c&~(1<<32-Qt(c)-1)).toString(32)+l,r=""+r+"R"+l,l=Qc++,0<l&&(r+="H"+l.toString(32)),r+=""}else l=qI++,r=""+r+"r"+l.toString(32)+"";return s.memoizedState=r},useHostTransitionStatus:sp,useFormState:T_,useActionState:T_,useOptimistic:function(s){var r=$n();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=rp.bind(null,$e,!0,l),l.dispatch=r,[s,r]},useMemoCache:Qf,useCacheRefresh:function(){return $n().memoizedState=jI.bind(null,$e)}},G_={readContext:In,use:Wc,useCallback:P_,useContext:In,useEffect:I_,useImperativeHandle:b_,useInsertionEffect:x_,useLayoutEffect:R_,useMemo:D_,useReducer:Xc,useRef:w_,useState:function(){return Xc(Bs)},useDebugValue:tp,useDeferredValue:function(s,r){var l=$t();return M_(l,mt.memoizedState,s,r)},useTransition:function(){var s=Xc(Bs)[0],r=$t().memoizedState;return[typeof s=="boolean"?s:iu(s),r]},useSyncExternalStore:l_,useId:L_,useHostTransitionStatus:sp,useFormState:E_,useActionState:E_,useOptimistic:function(s,r){var l=$t();return p_(l,mt,s,r)},useMemoCache:Qf,useCacheRefresh:O_},YI={readContext:In,use:Wc,useCallback:P_,useContext:In,useEffect:I_,useImperativeHandle:b_,useInsertionEffect:x_,useLayoutEffect:R_,useMemo:D_,useReducer:Xf,useRef:w_,useState:function(){return Xf(Bs)},useDebugValue:tp,useDeferredValue:function(s,r){var l=$t();return mt===null?np(l,s,r):M_(l,mt.memoizedState,s,r)},useTransition:function(){var s=Xf(Bs)[0],r=$t().memoizedState;return[typeof s=="boolean"?s:iu(s),r]},useSyncExternalStore:l_,useId:L_,useHostTransitionStatus:sp,useFormState:S_,useActionState:S_,useOptimistic:function(s,r){var l=$t();return mt!==null?p_(l,mt,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Qf,useCacheRefresh:O_},Ma=null,ou=0;function id(s){var r=ou;return ou+=1,Ma===null&&(Ma=[]),e_(Ma,s,r)}function au(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function sd(s,r){throw r.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function z_(s){var r=s._init;return r(s._payload)}function j_(s){function r(j,G){if(s){var $=j.deletions;$===null?(j.deletions=[G],j.flags|=16):$.push(G)}}function l(j,G){if(!s)return null;for(;G!==null;)r(j,G),G=G.sibling;return null}function c(j){for(var G=new Map;j!==null;)j.key!==null?G.set(j.key,j):G.set(j.index,j),j=j.sibling;return G}function y(j,G){return j=Vs(j,G),j.index=0,j.sibling=null,j}function T(j,G,$){return j.index=$,s?($=j.alternate,$!==null?($=$.index,$<G?(j.flags|=67108866,G):$):(j.flags|=67108866,G)):(j.flags|=1048576,G)}function C(j){return s&&j.alternate===null&&(j.flags|=67108866),j}function I(j,G,$,ae){return G===null||G.tag!==6?(G=If($,j.mode,ae),G.return=j,G):(G=y(G,$),G.return=j,G)}function B(j,G,$,ae){var Ae=$.type;return Ae===L?re(j,G,$.props.children,ae,$.key):G!==null&&(G.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===P&&z_(Ae)===G.type)?(G=y(G,$.props),au(G,$),G.return=j,G):(G=qc($.type,$.key,$.props,null,j.mode,ae),au(G,$),G.return=j,G)}function K(j,G,$,ae){return G===null||G.tag!==4||G.stateNode.containerInfo!==$.containerInfo||G.stateNode.implementation!==$.implementation?(G=xf($,j.mode,ae),G.return=j,G):(G=y(G,$.children||[]),G.return=j,G)}function re(j,G,$,ae,Ae){return G===null||G.tag!==7?(G=Po($,j.mode,ae,Ae),G.return=j,G):(G=y(G,$),G.return=j,G)}function ue(j,G,$){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=If(""+G,j.mode,$),G.return=j,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return $=qc(G.type,G.key,G.props,null,j.mode,$),au($,G),$.return=j,$;case R:return G=xf(G,j.mode,$),G.return=j,G;case P:var ae=G._init;return G=ae(G._payload),ue(j,G,$)}if(ze(G)||V(G))return G=Po(G,j.mode,$,null),G.return=j,G;if(typeof G.then=="function")return ue(j,id(G),$);if(G.$$typeof===z)return ue(j,zc(j,G),$);sd(j,G)}return null}function W(j,G,$,ae){var Ae=G!==null?G.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ae!==null?null:I(j,G,""+$,ae);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return $.key===Ae?B(j,G,$,ae):null;case R:return $.key===Ae?K(j,G,$,ae):null;case P:return Ae=$._init,$=Ae($._payload),W(j,G,$,ae)}if(ze($)||V($))return Ae!==null?null:re(j,G,$,ae,null);if(typeof $.then=="function")return W(j,G,id($),ae);if($.$$typeof===z)return W(j,G,zc(j,$),ae);sd(j,$)}return null}function Z(j,G,$,ae,Ae){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return j=j.get($)||null,I(G,j,""+ae,Ae);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:return j=j.get(ae.key===null?$:ae.key)||null,B(G,j,ae,Ae);case R:return j=j.get(ae.key===null?$:ae.key)||null,K(G,j,ae,Ae);case P:var Ye=ae._init;return ae=Ye(ae._payload),Z(j,G,$,ae,Ae)}if(ze(ae)||V(ae))return j=j.get($)||null,re(G,j,ae,Ae,null);if(typeof ae.then=="function")return Z(j,G,$,id(ae),Ae);if(ae.$$typeof===z)return Z(j,G,$,zc(G,ae),Ae);sd(G,ae)}return null}function Ue(j,G,$,ae){for(var Ae=null,Ye=null,xe=G,De=G=0,an=null;xe!==null&&De<$.length;De++){xe.index>De?(an=xe,xe=null):an=xe.sibling;var st=W(j,xe,$[De],ae);if(st===null){xe===null&&(xe=an);break}s&&xe&&st.alternate===null&&r(j,xe),G=T(st,G,De),Ye===null?Ae=st:Ye.sibling=st,Ye=st,xe=an}if(De===$.length)return l(j,xe),lt&&Mo(j,De),Ae;if(xe===null){for(;De<$.length;De++)xe=ue(j,$[De],ae),xe!==null&&(G=T(xe,G,De),Ye===null?Ae=xe:Ye.sibling=xe,Ye=xe);return lt&&Mo(j,De),Ae}for(xe=c(xe);De<$.length;De++)an=Z(xe,j,De,$[De],ae),an!==null&&(s&&an.alternate!==null&&xe.delete(an.key===null?De:an.key),G=T(an,G,De),Ye===null?Ae=an:Ye.sibling=an,Ye=an);return s&&xe.forEach(function(Ur){return r(j,Ur)}),lt&&Mo(j,De),Ae}function Pe(j,G,$,ae){if($==null)throw Error(i(151));for(var Ae=null,Ye=null,xe=G,De=G=0,an=null,st=$.next();xe!==null&&!st.done;De++,st=$.next()){xe.index>De?(an=xe,xe=null):an=xe.sibling;var Ur=W(j,xe,st.value,ae);if(Ur===null){xe===null&&(xe=an);break}s&&xe&&Ur.alternate===null&&r(j,xe),G=T(Ur,G,De),Ye===null?Ae=Ur:Ye.sibling=Ur,Ye=Ur,xe=an}if(st.done)return l(j,xe),lt&&Mo(j,De),Ae;if(xe===null){for(;!st.done;De++,st=$.next())st=ue(j,st.value,ae),st!==null&&(G=T(st,G,De),Ye===null?Ae=st:Ye.sibling=st,Ye=st);return lt&&Mo(j,De),Ae}for(xe=c(xe);!st.done;De++,st=$.next())st=Z(xe,j,De,st.value,ae),st!==null&&(s&&st.alternate!==null&&xe.delete(st.key===null?De:st.key),G=T(st,G,De),Ye===null?Ae=st:Ye.sibling=st,Ye=st);return s&&xe.forEach(function(Kx){return r(j,Kx)}),lt&&Mo(j,De),Ae}function yt(j,G,$,ae){if(typeof $=="object"&&$!==null&&$.type===L&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case A:e:{for(var Ae=$.key;G!==null;){if(G.key===Ae){if(Ae=$.type,Ae===L){if(G.tag===7){l(j,G.sibling),ae=y(G,$.props.children),ae.return=j,j=ae;break e}}else if(G.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===P&&z_(Ae)===G.type){l(j,G.sibling),ae=y(G,$.props),au(ae,$),ae.return=j,j=ae;break e}l(j,G);break}else r(j,G);G=G.sibling}$.type===L?(ae=Po($.props.children,j.mode,ae,$.key),ae.return=j,j=ae):(ae=qc($.type,$.key,$.props,null,j.mode,ae),au(ae,$),ae.return=j,j=ae)}return C(j);case R:e:{for(Ae=$.key;G!==null;){if(G.key===Ae)if(G.tag===4&&G.stateNode.containerInfo===$.containerInfo&&G.stateNode.implementation===$.implementation){l(j,G.sibling),ae=y(G,$.children||[]),ae.return=j,j=ae;break e}else{l(j,G);break}else r(j,G);G=G.sibling}ae=xf($,j.mode,ae),ae.return=j,j=ae}return C(j);case P:return Ae=$._init,$=Ae($._payload),yt(j,G,$,ae)}if(ze($))return Ue(j,G,$,ae);if(V($)){if(Ae=V($),typeof Ae!="function")throw Error(i(150));return $=Ae.call($),Pe(j,G,$,ae)}if(typeof $.then=="function")return yt(j,G,id($),ae);if($.$$typeof===z)return yt(j,G,zc(j,$),ae);sd(j,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,G!==null&&G.tag===6?(l(j,G.sibling),ae=y(G,$),ae.return=j,j=ae):(l(j,G),ae=If($,j.mode,ae),ae.return=j,j=ae),C(j)):l(j,G)}return function(j,G,$,ae){try{ou=0;var Ae=yt(j,G,$,ae);return Ma=null,Ae}catch(xe){if(xe===Wl||xe===$c)throw xe;var Ye=si(29,xe,null,j.mode);return Ye.lanes=ae,Ye.return=j,Ye}finally{}}}var ka=j_(!0),$_=j_(!1),Ai=ie(null),os=null;function Tr(s){var r=s.alternate;he(tn,tn.current&1),he(Ai,s),os===null&&(r===null||Na.current!==null||r.memoizedState!==null)&&(os=s)}function Y_(s){if(s.tag===22){if(he(tn,tn.current),he(Ai,s),os===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(os=s)}}else Er()}function Er(){he(tn,tn.current),he(Ai,Ai.current)}function Hs(s){de(Ai),os===s&&(os=null),de(tn)}var tn=ie(0);function rd(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Jp(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function op(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:v({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var ap={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=li(),y=yr(c);y.payload=r,l!=null&&(y.callback=l),r=_r(s,y,c),r!==null&&(ui(r,s,c),Zl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=li(),y=yr(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=_r(s,y,c),r!==null&&(ui(r,s,c),Zl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=li(),c=yr(l);c.tag=2,r!=null&&(c.callback=r),r=_r(s,c,l),r!==null&&(ui(r,s,l),Zl(r,s,l))}};function K_(s,r,l,c,y,T,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,T,C):r.prototype&&r.prototype.isPureReactComponent?!Gl(l,c)||!Gl(y,T):!0}function J_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&ap.enqueueReplaceState(r,r.state,null)}function qo(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=v({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}var od=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Q_(s){od(s)}function W_(s){console.error(s)}function X_(s){od(s)}function ad(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Z_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function lp(s,r,l){return l=yr(l),l.tag=3,l.payload={element:null},l.callback=function(){ad(s,r)},l}function ev(s){return s=yr(s),s.tag=3,s}function tv(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var T=c.value;s.payload=function(){return y(T)},s.callback=function(){Z_(r,l,c)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){Z_(r,l,c),typeof y!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function KI(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Kl(r,l,y,!0),l=Ai.current,l!==null){switch(l.tag){case 13:return os===null?Dp():l.alternate===null&&Ot===0&&(Ot=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Lf?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),kp(s,c,y)),!1;case 22:return l.flags|=65536,c===Lf?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),kp(s,c,y)),!1}throw Error(i(435,l.tag))}return kp(s,c,y),Dp(),!1}if(lt)return r=Ai.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==bf&&(s=Error(i(422),{cause:c}),Yl(_i(s,l)))):(c!==bf&&(r=Error(i(423),{cause:c}),Yl(_i(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=_i(c,l),y=lp(s.stateNode,c,y),qf(s,y),Ot!==4&&(Ot=2)),!1;var T=Error(i(520),{cause:c});if(T=_i(T,l),pu===null?pu=[T]:pu.push(T),Ot!==4&&(Ot=2),r===null)return!0;c=_i(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=lp(l.stateNode,c,s),qf(l,s),!1;case 1:if(r=l.type,T=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(xr===null||!xr.has(T))))return l.flags|=65536,y&=-y,l.lanes|=y,y=ev(y),tv(y,s,l,c),qf(l,y),!1}l=l.return}while(l!==null);return!1}var nv=Error(i(461)),rn=!1;function mn(s,r,l,c){r.child=s===null?$_(r,null,l,c):ka(r,s.child,l,c)}function iv(s,r,l,c,y){l=l.render;var T=r.ref;if("ref"in c){var C={};for(var I in c)I!=="ref"&&(C[I]=c[I])}else C=c;return Lo(r),c=jf(s,r,l,C,T,y),I=$f(),s!==null&&!rn?(Yf(s,r,y),Gs(s,r,y)):(lt&&I&&Rf(r),r.flags|=1,mn(s,r,c,y),r.child)}function sv(s,r,l,c,y){if(s===null){var T=l.type;return typeof T=="function"&&!Cf(T)&&T.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=T,rv(s,r,T,c,y)):(s=qc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(T=s.child,!gp(s,y)){var C=T.memoizedProps;if(l=l.compare,l=l!==null?l:Gl,l(C,c)&&s.ref===r.ref)return Gs(s,r,y)}return r.flags|=1,s=Vs(T,c),s.ref=r.ref,s.return=r,r.child=s}function rv(s,r,l,c,y){if(s!==null){var T=s.memoizedProps;if(Gl(T,c)&&s.ref===r.ref)if(rn=!1,r.pendingProps=c=T,gp(s,y))(s.flags&131072)!==0&&(rn=!0);else return r.lanes=s.lanes,Gs(s,r,y)}return up(s,r,l,c,y)}function ov(s,r,l){var c=r.pendingProps,y=c.children,T=s!==null?s.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=T!==null?T.baseLanes|l:l,s!==null){for(y=r.child=s.child,T=0;y!==null;)T=T|y.lanes|y.childLanes,y=y.sibling;r.childLanes=T&~c}else r.childLanes=0,r.child=null;return av(s,r,c,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&jc(r,T!==null?T.cachePool:null),T!==null?r_(r,T):Hf(),Y_(r);else return r.lanes=r.childLanes=536870912,av(s,r,T!==null?T.baseLanes|l:l,l)}else T!==null?(jc(r,T.cachePool),r_(r,T),Er(),r.memoizedState=null):(s!==null&&jc(r,null),Hf(),Er());return mn(s,r,y,l),r.child}function av(s,r,l,c){var y=Vf();return y=y===null?null:{parent:en._currentValue,pool:y},r.memoizedState={baseLanes:l,cachePool:y},s!==null&&jc(r,null),Hf(),Y_(r),s!==null&&Kl(s,r,c,!0),null}function ld(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function up(s,r,l,c,y){return Lo(r),l=jf(s,r,l,c,void 0,y),c=$f(),s!==null&&!rn?(Yf(s,r,y),Gs(s,r,y)):(lt&&c&&Rf(r),r.flags|=1,mn(s,r,l,y),r.child)}function lv(s,r,l,c,y,T){return Lo(r),r.updateQueue=null,l=a_(r,c,l,y),o_(s),c=$f(),s!==null&&!rn?(Yf(s,r,T),Gs(s,r,T)):(lt&&c&&Rf(r),r.flags|=1,mn(s,r,l,T),r.child)}function uv(s,r,l,c,y){if(Lo(r),r.stateNode===null){var T=wa,C=l.contextType;typeof C=="object"&&C!==null&&(T=In(C)),T=new l(c,T),r.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=ap,r.stateNode=T,T._reactInternals=r,T=r.stateNode,T.props=c,T.state=r.memoizedState,T.refs={},Of(r),C=l.contextType,T.context=typeof C=="object"&&C!==null?In(C):wa,T.state=r.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(op(r,l,C,c),T.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(C=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),C!==T.state&&ap.enqueueReplaceState(T,T.state,null),tu(r,c,T,y),eu(),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){T=r.stateNode;var I=r.memoizedProps,B=qo(l,I);T.props=B;var K=T.context,re=l.contextType;C=wa,typeof re=="object"&&re!==null&&(C=In(re));var ue=l.getDerivedStateFromProps;re=typeof ue=="function"||typeof T.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,re||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I||K!==C)&&J_(r,T,c,C),gr=!1;var W=r.memoizedState;T.state=W,tu(r,c,T,y),eu(),K=r.memoizedState,I||W!==K||gr?(typeof ue=="function"&&(op(r,l,ue,c),K=r.memoizedState),(B=gr||K_(r,l,B,c,W,K,C))?(re||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),T.props=c,T.state=K,T.context=C,c=B):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{T=r.stateNode,Ff(s,r),C=r.memoizedProps,re=qo(l,C),T.props=re,ue=r.pendingProps,W=T.context,K=l.contextType,B=wa,typeof K=="object"&&K!==null&&(B=In(K)),I=l.getDerivedStateFromProps,(K=typeof I=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==ue||W!==B)&&J_(r,T,c,B),gr=!1,W=r.memoizedState,T.state=W,tu(r,c,T,y),eu();var Z=r.memoizedState;C!==ue||W!==Z||gr||s!==null&&s.dependencies!==null&&Gc(s.dependencies)?(typeof I=="function"&&(op(r,l,I,c),Z=r.memoizedState),(re=gr||K_(r,l,re,c,W,Z,B)||s!==null&&s.dependencies!==null&&Gc(s.dependencies))?(K||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(c,Z,B),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(c,Z,B)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Z),T.props=c,T.state=Z,T.context=B,c=re):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&W===s.memoizedState||(r.flags|=1024),c=!1)}return T=c,ld(s,r),c=(r.flags&128)!==0,T||c?(T=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:T.render(),r.flags|=1,s!==null&&c?(r.child=ka(r,s.child,null,y),r.child=ka(r,null,l,y)):mn(s,r,l,y),r.memoizedState=T.state,s=r.child):s=Gs(s,r,y),s}function cv(s,r,l,c){return $l(),r.flags|=256,mn(s,r,l,c),r.child}var cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dp(s){return{baseLanes:s,cachePool:Wy()}}function hp(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Si),s}function dv(s,r,l){var c=r.pendingProps,y=!1,T=(r.flags&128)!==0,C;if((C=T)||(C=s!==null&&s.memoizedState===null?!1:(tn.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,s===null){if(lt){if(y?Tr(r):Er(),lt){var I=Lt,B;if(B=I){e:{for(B=I,I=rs;B.nodeType!==8;){if(!I){I=null;break e}if(B=Li(B.nextSibling),B===null){I=null;break e}}I=B}I!==null?(r.memoizedState={dehydrated:I,treeContext:Do!==null?{id:Ls,overflow:Os}:null,retryLane:536870912,hydrationErrors:null},B=si(18,null,null,0),B.stateNode=I,B.return=r,r.child=B,Bn=r,Lt=null,B=!0):B=!1}B||Uo(r)}if(I=r.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return Jp(I)?r.lanes=32:r.lanes=536870912,null;Hs(r)}return I=c.children,c=c.fallback,y?(Er(),y=r.mode,I=ud({mode:"hidden",children:I},y),c=Po(c,y,l,null),I.return=r,c.return=r,I.sibling=c,r.child=I,y=r.child,y.memoizedState=dp(l),y.childLanes=hp(s,C,l),r.memoizedState=cp,c):(Tr(r),fp(r,I))}if(B=s.memoizedState,B!==null&&(I=B.dehydrated,I!==null)){if(T)r.flags&256?(Tr(r),r.flags&=-257,r=pp(s,r,l)):r.memoizedState!==null?(Er(),r.child=s.child,r.flags|=128,r=null):(Er(),y=c.fallback,I=r.mode,c=ud({mode:"visible",children:c.children},I),y=Po(y,I,l,null),y.flags|=2,c.return=r,y.return=r,c.sibling=y,r.child=c,ka(r,s.child,null,l),c=r.child,c.memoizedState=dp(l),c.childLanes=hp(s,C,l),r.memoizedState=cp,r=y);else if(Tr(r),Jp(I)){if(C=I.nextSibling&&I.nextSibling.dataset,C)var K=C.dgst;C=K,c=Error(i(419)),c.stack="",c.digest=C,Yl({value:c,source:null,stack:null}),r=pp(s,r,l)}else if(rn||Kl(s,r,l,!1),C=(l&s.childLanes)!==0,rn||C){if(C=St,C!==null&&(c=l&-l,c=(c&42)!==0?1:bs(c),c=(c&(C.suspendedLanes|l))!==0?0:c,c!==0&&c!==B.retryLane))throw B.retryLane=c,Sa(s,c),ui(C,s,c),nv;I.data==="$?"||Dp(),r=pp(s,r,l)}else I.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=B.treeContext,Lt=Li(I.nextSibling),Bn=r,lt=!0,ko=null,rs=!1,s!==null&&(Ti[Ei++]=Ls,Ti[Ei++]=Os,Ti[Ei++]=Do,Ls=s.id,Os=s.overflow,Do=r),r=fp(r,c.children),r.flags|=4096);return r}return y?(Er(),y=c.fallback,I=r.mode,B=s.child,K=B.sibling,c=Vs(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,K!==null?y=Vs(K,y):(y=Po(y,I,l,null),y.flags|=2),y.return=r,c.return=r,c.sibling=y,r.child=c,c=y,y=r.child,I=s.child.memoizedState,I===null?I=dp(l):(B=I.cachePool,B!==null?(K=en._currentValue,B=B.parent!==K?{parent:K,pool:K}:B):B=Wy(),I={baseLanes:I.baseLanes|l,cachePool:B}),y.memoizedState=I,y.childLanes=hp(s,C,l),r.memoizedState=cp,c):(Tr(r),l=s.child,s=l.sibling,l=Vs(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(C=r.deletions,C===null?(r.deletions=[s],r.flags|=16):C.push(s)),r.child=l,r.memoizedState=null,l)}function fp(s,r){return r=ud({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function ud(s,r){return s=si(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function pp(s,r,l){return ka(r,s.child,null,l),s=fp(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function hv(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Df(s.return,r,l)}function mp(s,r,l,c,y){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=l,T.tailMode=y)}function fv(s,r,l){var c=r.pendingProps,y=c.revealOrder,T=c.tail;if(mn(s,r,c.children,l),c=tn.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&hv(s,l,r);else if(s.tag===19)hv(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}switch(he(tn,c),y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&rd(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),mp(r,!1,y,l,T);break;case"backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&rd(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}mp(r,!0,l,null,T);break;case"together":mp(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Gs(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Ir|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Kl(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Vs(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Vs(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function gp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Gc(s)))}function JI(s,r,l){switch(r.tag){case 3:Le(r,r.stateNode.containerInfo),mr(r,en,s.memoizedState.cache),$l();break;case 27:case 5:ot(r);break;case 4:Le(r,r.stateNode.containerInfo);break;case 10:mr(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Tr(r),r.flags|=128,null):(l&r.child.childLanes)!==0?dv(s,r,l):(Tr(r),s=Gs(s,r,l),s!==null?s.sibling:null);Tr(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Kl(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return fv(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),he(tn,tn.current),c)break;return null;case 22:case 23:return r.lanes=0,ov(s,r,l);case 24:mr(r,en,s.memoizedState.cache)}return Gs(s,r,l)}function pv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)rn=!0;else{if(!gp(s,l)&&(r.flags&128)===0)return rn=!1,JI(s,r,l);rn=(s.flags&131072)!==0}else rn=!1,lt&&(r.flags&1048576)!==0&&zy(r,Hc,r.index);switch(r.lanes=0,r.tag){case 16:e:{s=r.pendingProps;var c=r.elementType,y=c._init;if(c=y(c._payload),r.type=c,typeof c=="function")Cf(c)?(s=qo(c,s),r.tag=1,r=uv(null,r,c,s,l)):(r.tag=0,r=up(null,r,c,s,l));else{if(c!=null){if(y=c.$$typeof,y===se){r.tag=11,r=iv(null,r,c,s,l);break e}else if(y===O){r.tag=14,r=sv(null,r,c,s,l);break e}}throw r=we(c)||c,Error(i(306,r,""))}}return r;case 0:return up(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=qo(c,r.pendingProps),uv(s,r,c,y,l);case 3:e:{if(Le(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var T=r.memoizedState;y=T.element,Ff(s,r),tu(r,c,null,l);var C=r.memoizedState;if(c=C.cache,mr(r,en,c),c!==T.cache&&Mf(r,[en],l,!0),eu(),c=C.element,T.isDehydrated)if(T={element:c,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){r=cv(s,r,c,l);break e}else if(c!==y){y=_i(Error(i(424)),r),Yl(y),r=cv(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Lt=Li(s.firstChild),Bn=r,lt=!0,ko=null,rs=!0,l=$_(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if($l(),c===y){r=Gs(s,r,l);break e}mn(s,r,c,l)}r=r.child}return r;case 26:return ld(s,r),s===null?(l=_T(r.type,null,r.pendingProps,null))?r.memoizedState=l:lt||(l=r.type,s=r.pendingProps,c=Sd(Ee.current).createElement(l),c[it]=r,c[Tt]=s,yn(c,l,s),Dt(c),r.stateNode=c):r.memoizedState=_T(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return ot(r),s===null&&lt&&(c=r.stateNode=mT(r.type,r.pendingProps,Ee.current),Bn=r,rs=!0,y=Lt,br(r.type)?(Qp=y,Lt=Li(c.firstChild)):Lt=y),mn(s,r,r.pendingProps.children,l),ld(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&lt&&((y=c=Lt)&&(c=Sx(c,r.type,r.pendingProps,rs),c!==null?(r.stateNode=c,Bn=r,Lt=Li(c.firstChild),rs=!1,y=!0):y=!1),y||Uo(r)),ot(r),y=r.type,T=r.pendingProps,C=s!==null?s.memoizedProps:null,c=T.children,$p(y,T)?c=null:C!==null&&$p(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=jf(s,r,BI,null,null,l),Su._currentValue=y),ld(s,r),mn(s,r,c,l),r.child;case 6:return s===null&&lt&&((s=l=Lt)&&(l=wx(l,r.pendingProps,rs),l!==null?(r.stateNode=l,Bn=r,Lt=null,s=!0):s=!1),s||Uo(r)),null;case 13:return dv(s,r,l);case 4:return Le(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=ka(r,null,c,l):mn(s,r,c,l),r.child;case 11:return iv(s,r,r.type,r.pendingProps,l);case 7:return mn(s,r,r.pendingProps,l),r.child;case 8:return mn(s,r,r.pendingProps.children,l),r.child;case 12:return mn(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,mr(r,r.type,c.value),mn(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Lo(r),y=In(y),c=c(y),r.flags|=1,mn(s,r,c,l),r.child;case 14:return sv(s,r,r.type,r.pendingProps,l);case 15:return rv(s,r,r.type,r.pendingProps,l);case 19:return fv(s,r,l);case 31:return c=r.pendingProps,l=r.mode,c={mode:c.mode,children:c.children},s===null?(l=ud(c,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=Vs(s.child,c),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return ov(s,r,l);case 24:return Lo(r),c=In(en),s===null?(y=Vf(),y===null&&(y=St,T=kf(),y.pooledCache=T,T.refCount++,T!==null&&(y.pooledCacheLanes|=l),y=T),r.memoizedState={parent:c,cache:y},Of(r),mr(r,en,y)):((s.lanes&l)!==0&&(Ff(s,r),tu(r,null,null,l),eu()),y=s.memoizedState,T=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),mr(r,en,c)):(c=T.cache,mr(r,en,c),c!==y.cache&&Mf(r,[en],l,!0))),mn(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function zs(s){s.flags|=4}function mv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!ST(r)){if(r=Ai.current,r!==null&&((et&4194048)===et?os!==null:(et&62914560)!==et&&(et&536870912)===0||r!==os))throw Xl=Lf,Xy;s.flags|=8192}}function cd(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?ei():536870912,s.lanes|=r,Oa|=r)}function lu(s,r){if(!lt)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function kt(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function QI(s,r,l){var c=r.pendingProps;switch(Nf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(r),null;case 1:return kt(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),qs(en),ht(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(jl(r)?zs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Yy())),kt(r),null;case 26:return l=r.memoizedState,s===null?(zs(r),l!==null?(kt(r),mv(r,l)):(kt(r),r.flags&=-16777217)):l?l!==s.memoizedState?(zs(r),kt(r),mv(r,l)):(kt(r),r.flags&=-16777217):(s.memoizedProps!==c&&zs(r),kt(r),r.flags&=-16777217),null;case 27:Vt(r),l=Ee.current;var y=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==c&&zs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return kt(r),null}s=ye.current,jl(r)?jy(r):(s=mT(y,c,l),r.stateNode=s,zs(r))}return kt(r),null;case 5:if(Vt(r),l=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&zs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return kt(r),null}if(s=ye.current,jl(r))jy(r);else{switch(y=Sd(Ee.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof c.is=="string"?y.createElement("select",{is:c.is}):y.createElement("select"),c.multiple?s.multiple=!0:c.size&&(s.size=c.size);break;default:s=typeof c.is=="string"?y.createElement(l,{is:c.is}):y.createElement(l)}}s[it]=r,s[Tt]=c;e:for(y=r.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===r)break e;for(;y.sibling===null;){if(y.return===null||y.return===r)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}r.stateNode=s;e:switch(yn(s,l,c),l){case"button":case"input":case"select":case"textarea":s=!!c.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&zs(r)}}return kt(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&zs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Ee.current,jl(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Bn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[it]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||lT(s.nodeValue,l)),s||Uo(r)}else s=Sd(s).createTextNode(c),s[it]=r,r.stateNode=s}return kt(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=jl(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[it]=r}else $l(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;kt(r),y=!1}else y=Yy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Hs(r),r):(Hs(r),null)}if(Hs(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=c!==null,s=s!==null&&s.memoizedState!==null,l){c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool);var T=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(T=c.memoizedState.cachePool.pool),T!==y&&(c.flags|=2048)}return l!==s&&l&&(r.child.flags|=8192),cd(r,r.updateQueue),kt(r),null;case 4:return ht(),s===null&&Bp(r.stateNode.containerInfo),kt(r),null;case 10:return qs(r.type),kt(r),null;case 19:if(de(tn),y=r.memoizedState,y===null)return kt(r),null;if(c=(r.flags&128)!==0,T=y.rendering,T===null)if(c)lu(y,!1);else{if(Ot!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(T=rd(s),T!==null){for(r.flags|=128,lu(y,!1),s=T.updateQueue,r.updateQueue=s,cd(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)Gy(l,s),l=l.sibling;return he(tn,tn.current&1|2),r.child}s=s.sibling}y.tail!==null&&bt()>fd&&(r.flags|=128,c=!0,lu(y,!1),r.lanes=4194304)}else{if(!c)if(s=rd(T),s!==null){if(r.flags|=128,c=!0,s=s.updateQueue,r.updateQueue=s,cd(r,s),lu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!lt)return kt(r),null}else 2*bt()-y.renderingStartTime>fd&&l!==536870912&&(r.flags|=128,c=!0,lu(y,!1),r.lanes=4194304);y.isBackwards?(T.sibling=r.child,r.child=T):(s=y.last,s!==null?s.sibling=T:r.child=T,y.last=T)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=bt(),r.sibling=null,s=tn.current,he(tn,c?s&1|2:s&1),r):(kt(r),null);case 22:case 23:return Hs(r),Gf(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(kt(r),r.subtreeFlags&6&&(r.flags|=8192)):kt(r),l=r.updateQueue,l!==null&&cd(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&de(Oo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),qs(en),kt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function WI(s,r){switch(Nf(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return qs(en),ht(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Vt(r),null;case 13:if(Hs(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));$l()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return de(tn),null;case 4:return ht(),null;case 10:return qs(r.type),null;case 22:case 23:return Hs(r),Gf(),s!==null&&de(Oo),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return qs(en),null;case 25:return null;default:return null}}function gv(s,r){switch(Nf(r),r.tag){case 3:qs(en),ht();break;case 26:case 27:case 5:Vt(r);break;case 4:ht();break;case 13:Hs(r);break;case 19:de(tn);break;case 10:qs(r.type);break;case 22:case 23:Hs(r),Gf(),s!==null&&de(Oo);break;case 24:qs(en)}}function uu(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var T=l.create,C=l.inst;c=T(),C.destroy=c}l=l.next}while(l!==y)}}catch(I){Et(r,r.return,I)}}function Ar(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var T=y.next;c=T;do{if((c.tag&s)===s){var C=c.inst,I=C.destroy;if(I!==void 0){C.destroy=void 0,y=r;var B=l,K=I;try{K()}catch(re){Et(y,B,re)}}}c=c.next}while(c!==T)}}catch(re){Et(r,r.return,re)}}function yv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{s_(r,l)}catch(c){Et(s,s.return,c)}}}function _v(s,r,l){l.props=qo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){Et(s,r,c)}}function cu(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){Et(s,r,y)}}function as(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){Et(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){Et(s,r,y)}else l.current=null}function vv(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){Et(s,s.return,y)}}function yp(s,r,l){try{var c=s.stateNode;_x(c,s.type,l,r),c[Tt]=r}catch(y){Et(s,s.return,y)}}function Tv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&br(s.type)||s.tag===4}function _p(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Tv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&br(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vp(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Ad));else if(c!==4&&(c===27&&br(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(vp(s,r,l),s=s.sibling;s!==null;)vp(s,r,l),s=s.sibling}function dd(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&br(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(dd(s,r,l),s=s.sibling;s!==null;)dd(s,r,l),s=s.sibling}function Ev(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);yn(r,c,l),r[it]=s,r[Tt]=l}catch(T){Et(s,s.return,T)}}var js=!1,Ht=!1,Tp=!1,Av=typeof WeakSet=="function"?WeakSet:Set,on=null;function XI(s,r){if(s=s.containerInfo,zp=Nd,s=My(s),_f(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,T=c.focusNode;c=c.focusOffset;try{l.nodeType,T.nodeType}catch{l=null;break e}var C=0,I=-1,B=-1,K=0,re=0,ue=s,W=null;t:for(;;){for(var Z;ue!==l||y!==0&&ue.nodeType!==3||(I=C+y),ue!==T||c!==0&&ue.nodeType!==3||(B=C+c),ue.nodeType===3&&(C+=ue.nodeValue.length),(Z=ue.firstChild)!==null;)W=ue,ue=Z;for(;;){if(ue===s)break t;if(W===l&&++K===y&&(I=C),W===T&&++re===c&&(B=C),(Z=ue.nextSibling)!==null)break;ue=W,W=ue.parentNode}ue=Z}l=I===-1||B===-1?null:{start:I,end:B}}else l=null}l=l||{start:0,end:0}}else l=null;for(jp={focusedElem:s,selectionRange:l},Nd=!1,on=r;on!==null;)if(r=on,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,on=s;else for(;on!==null;){switch(r=on,T=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,l=r,y=T.memoizedProps,T=T.memoizedState,c=l.stateNode;try{var Ue=qo(l.type,y,l.elementType===l.type);s=c.getSnapshotBeforeUpdate(Ue,T),c.__reactInternalSnapshotBeforeUpdate=s}catch(Pe){Et(l,l.return,Pe)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Kp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Kp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,on=s;break}on=r.return}}function Sv(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Sr(s,l),c&4&&uu(5,l);break;case 1:if(Sr(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(C){Et(l,l.return,C)}else{var y=qo(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(C){Et(l,l.return,C)}}c&64&&yv(l),c&512&&cu(l,l.return);break;case 3:if(Sr(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{s_(s,r)}catch(C){Et(l,l.return,C)}}break;case 27:r===null&&c&4&&Ev(l);case 26:case 5:Sr(s,l),r===null&&c&4&&vv(l),c&512&&cu(l,l.return);break;case 12:Sr(s,l);break;case 13:Sr(s,l),c&4&&Iv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=ax.bind(null,l),Cx(s,l))));break;case 22:if(c=l.memoizedState!==null||js,!c){r=r!==null&&r.memoizedState!==null||Ht,y=js;var T=Ht;js=c,(Ht=r)&&!T?wr(s,l,(l.subtreeFlags&8772)!==0):Sr(s,l),js=y,Ht=T}break;case 30:break;default:Sr(s,l)}}function wv(s){var r=s.alternate;r!==null&&(s.alternate=null,wv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&ge(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Rt=null,Yn=!1;function $s(s,r,l){for(l=l.child;l!==null;)Cv(s,r,l),l=l.sibling}function Cv(s,r,l){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(kn,l)}catch{}switch(l.tag){case 26:Ht||as(l,r),$s(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ht||as(l,r);var c=Rt,y=Yn;br(l.type)&&(Rt=l.stateNode,Yn=!1),$s(s,r,l),vu(l.stateNode),Rt=c,Yn=y;break;case 5:Ht||as(l,r);case 6:if(c=Rt,y=Yn,Rt=null,$s(s,r,l),Rt=c,Yn=y,Rt!==null)if(Yn)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(l.stateNode)}catch(T){Et(l,r,T)}else try{Rt.removeChild(l.stateNode)}catch(T){Et(l,r,T)}break;case 18:Rt!==null&&(Yn?(s=Rt,fT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),xu(s)):fT(Rt,l.stateNode));break;case 4:c=Rt,y=Yn,Rt=l.stateNode.containerInfo,Yn=!0,$s(s,r,l),Rt=c,Yn=y;break;case 0:case 11:case 14:case 15:Ht||Ar(2,l,r),Ht||Ar(4,l,r),$s(s,r,l);break;case 1:Ht||(as(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&_v(l,r,c)),$s(s,r,l);break;case 21:$s(s,r,l);break;case 22:Ht=(c=Ht)||l.memoizedState!==null,$s(s,r,l),Ht=c;break;default:$s(s,r,l)}}function Iv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{xu(s)}catch(l){Et(r,r.return,l)}}function ZI(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Av),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Av),r;default:throw Error(i(435,s.tag))}}function Ep(s,r){var l=ZI(s);r.forEach(function(c){var y=lx.bind(null,s,c);l.has(c)||(l.add(c),c.then(y,y))})}function ri(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],T=s,C=r,I=C;e:for(;I!==null;){switch(I.tag){case 27:if(br(I.type)){Rt=I.stateNode,Yn=!1;break e}break;case 5:Rt=I.stateNode,Yn=!1;break e;case 3:case 4:Rt=I.stateNode.containerInfo,Yn=!0;break e}I=I.return}if(Rt===null)throw Error(i(160));Cv(T,C,y),Rt=null,Yn=!1,T=y.alternate,T!==null&&(T.return=null),y.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)xv(r,s),r=r.sibling}var Vi=null;function xv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ri(r,s),oi(s),c&4&&(Ar(3,s,s.return),uu(3,s),Ar(5,s,s.return));break;case 1:ri(r,s),oi(s),c&512&&(Ht||l===null||as(l,l.return)),c&64&&js&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=Vi;if(ri(r,s),oi(s),c&512&&(Ht||l===null||as(l,l.return)),c&4){var T=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":T=y.getElementsByTagName("title")[0],(!T||T[Q]||T[it]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=y.createElement(c),y.head.insertBefore(T,y.querySelector("head > title"))),yn(T,c,l),T[it]=s,Dt(T),c=T;break e;case"link":var C=ET("link","href",y).get(c+(l.href||""));if(C){for(var I=0;I<C.length;I++)if(T=C[I],T.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&T.getAttribute("rel")===(l.rel==null?null:l.rel)&&T.getAttribute("title")===(l.title==null?null:l.title)&&T.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(I,1);break t}}T=y.createElement(c),yn(T,c,l),y.head.appendChild(T);break;case"meta":if(C=ET("meta","content",y).get(c+(l.content||""))){for(I=0;I<C.length;I++)if(T=C[I],T.getAttribute("content")===(l.content==null?null:""+l.content)&&T.getAttribute("name")===(l.name==null?null:l.name)&&T.getAttribute("property")===(l.property==null?null:l.property)&&T.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&T.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(I,1);break t}}T=y.createElement(c),yn(T,c,l),y.head.appendChild(T);break;default:throw Error(i(468,c))}T[it]=s,Dt(T),c=T}s.stateNode=c}else AT(y,s.type,s.stateNode);else s.stateNode=TT(y,c,s.memoizedProps);else T!==c?(T===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):T.count--,c===null?AT(y,s.type,s.stateNode):TT(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&yp(s,s.memoizedProps,l.memoizedProps)}break;case 27:ri(r,s),oi(s),c&512&&(Ht||l===null||as(l,l.return)),l!==null&&c&4&&yp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(ri(r,s),oi(s),c&512&&(Ht||l===null||as(l,l.return)),s.flags&32){y=s.stateNode;try{gi(y,"")}catch(Z){Et(s,s.return,Z)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,yp(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Tp=!0);break;case 6:if(ri(r,s),oi(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(Z){Et(s,s.return,Z)}}break;case 3:if(Id=null,y=Vi,Vi=wd(r.containerInfo),ri(r,s),Vi=y,oi(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{xu(r.containerInfo)}catch(Z){Et(s,s.return,Z)}Tp&&(Tp=!1,Rv(s));break;case 4:c=Vi,Vi=wd(s.stateNode.containerInfo),ri(r,s),oi(s),Vi=c;break;case 12:ri(r,s),oi(s);break;case 13:ri(r,s),oi(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(xp=bt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Ep(s,c)));break;case 22:y=s.memoizedState!==null;var B=l!==null&&l.memoizedState!==null,K=js,re=Ht;if(js=K||y,Ht=re||B,ri(r,s),Ht=re,js=K,oi(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||B||js||Ht||Bo(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){B=l=r;try{if(T=B.stateNode,y)C=T.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{I=B.stateNode;var ue=B.memoizedProps.style,W=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;I.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Z){Et(B,B.return,Z)}}}else if(r.tag===6){if(l===null){B=r;try{B.stateNode.nodeValue=y?"":B.memoizedProps}catch(Z){Et(B,B.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Ep(s,l))));break;case 19:ri(r,s),oi(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Ep(s,c)));break;case 30:break;case 21:break;default:ri(r,s),oi(s)}}function oi(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(Tv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,T=_p(s);dd(s,T,y);break;case 5:var C=l.stateNode;l.flags&32&&(gi(C,""),l.flags&=-33);var I=_p(s);dd(s,I,C);break;case 3:case 4:var B=l.stateNode.containerInfo,K=_p(s);vp(s,K,B);break;default:throw Error(i(161))}}catch(re){Et(s,s.return,re)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Rv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Rv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Sr(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Sv(s,r.alternate,r),r=r.sibling}function Bo(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ar(4,r,r.return),Bo(r);break;case 1:as(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&_v(r,r.return,l),Bo(r);break;case 27:vu(r.stateNode);case 26:case 5:as(r,r.return),Bo(r);break;case 22:r.memoizedState===null&&Bo(r);break;case 30:Bo(r);break;default:Bo(r)}s=s.sibling}}function wr(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,T=r,C=T.flags;switch(T.tag){case 0:case 11:case 15:wr(y,T,l),uu(4,T);break;case 1:if(wr(y,T,l),c=T,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){Et(c,c.return,K)}if(c=T,y=c.updateQueue,y!==null){var I=c.stateNode;try{var B=y.shared.hiddenCallbacks;if(B!==null)for(y.shared.hiddenCallbacks=null,y=0;y<B.length;y++)i_(B[y],I)}catch(K){Et(c,c.return,K)}}l&&C&64&&yv(T),cu(T,T.return);break;case 27:Ev(T);case 26:case 5:wr(y,T,l),l&&c===null&&C&4&&vv(T),cu(T,T.return);break;case 12:wr(y,T,l);break;case 13:wr(y,T,l),l&&C&4&&Iv(y,T);break;case 22:T.memoizedState===null&&wr(y,T,l),cu(T,T.return);break;case 30:break;default:wr(y,T,l)}r=r.sibling}}function Ap(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Jl(l))}function Sp(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Jl(s))}function ls(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Nv(s,r,l,c),r=r.sibling}function Nv(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ls(s,r,l,c),y&2048&&uu(9,r);break;case 1:ls(s,r,l,c);break;case 3:ls(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Jl(s)));break;case 12:if(y&2048){ls(s,r,l,c),s=r.stateNode;try{var T=r.memoizedProps,C=T.id,I=T.onPostCommit;typeof I=="function"&&I(C,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(B){Et(r,r.return,B)}}else ls(s,r,l,c);break;case 13:ls(s,r,l,c);break;case 23:break;case 22:T=r.stateNode,C=r.alternate,r.memoizedState!==null?T._visibility&2?ls(s,r,l,c):du(s,r):T._visibility&2?ls(s,r,l,c):(T._visibility|=2,Ua(s,r,l,c,(r.subtreeFlags&10256)!==0)),y&2048&&Ap(C,r);break;case 24:ls(s,r,l,c),y&2048&&Sp(r.alternate,r);break;default:ls(s,r,l,c)}}function Ua(s,r,l,c,y){for(y=y&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var T=s,C=r,I=l,B=c,K=C.flags;switch(C.tag){case 0:case 11:case 15:Ua(T,C,I,B,y),uu(8,C);break;case 23:break;case 22:var re=C.stateNode;C.memoizedState!==null?re._visibility&2?Ua(T,C,I,B,y):du(T,C):(re._visibility|=2,Ua(T,C,I,B,y)),y&&K&2048&&Ap(C.alternate,C);break;case 24:Ua(T,C,I,B,y),y&&K&2048&&Sp(C.alternate,C);break;default:Ua(T,C,I,B,y)}r=r.sibling}}function du(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:du(l,c),y&2048&&Ap(c.alternate,c);break;case 24:du(l,c),y&2048&&Sp(c.alternate,c);break;default:du(l,c)}r=r.sibling}}var hu=8192;function Va(s){if(s.subtreeFlags&hu)for(s=s.child;s!==null;)bv(s),s=s.sibling}function bv(s){switch(s.tag){case 26:Va(s),s.flags&hu&&s.memoizedState!==null&&Ox(Vi,s.memoizedState,s.memoizedProps);break;case 5:Va(s);break;case 3:case 4:var r=Vi;Vi=wd(s.stateNode.containerInfo),Va(s),Vi=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=hu,hu=16777216,Va(s),hu=r):Va(s));break;default:Va(s)}}function Pv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function fu(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];on=c,Mv(c,s)}Pv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Dv(s),s=s.sibling}function Dv(s){switch(s.tag){case 0:case 11:case 15:fu(s),s.flags&2048&&Ar(9,s,s.return);break;case 3:fu(s);break;case 12:fu(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,hd(s)):fu(s);break;default:fu(s)}}function hd(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];on=c,Mv(c,s)}Pv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ar(8,r,r.return),hd(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,hd(r));break;default:hd(r)}s=s.sibling}}function Mv(s,r){for(;on!==null;){var l=on;switch(l.tag){case 0:case 11:case 15:Ar(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Jl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,on=c;else e:for(l=s;on!==null;){c=on;var y=c.sibling,T=c.return;if(wv(c),c===l){on=null;break e}if(y!==null){y.return=T,on=y;break e}on=T}}}var ex={getCacheForType:function(s){var r=In(en),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l}},tx=typeof WeakMap=="function"?WeakMap:Map,ct=0,St=null,Je=null,et=0,dt=0,ai=null,Cr=!1,La=!1,wp=!1,Ys=0,Ot=0,Ir=0,Ho=0,Cp=0,Si=0,Oa=0,pu=null,Kn=null,Ip=!1,xp=0,fd=1/0,pd=null,xr=null,gn=0,Rr=null,Fa=null,qa=0,Rp=0,Np=null,kv=null,mu=0,bp=null;function li(){if((ct&2)!==0&&et!==0)return et&-et;if(ne.T!==null){var s=xa;return s!==0?s:Lp()}return ti()}function Uv(){Si===0&&(Si=(et&536870912)===0||lt?Zn():536870912);var s=Ai.current;return s!==null&&(s.flags|=32),Si}function ui(s,r,l){(s===St&&(dt===2||dt===9)||s.cancelPendingCommit!==null)&&(Ba(s,0),Nr(s,et,Si,!1)),ft(s,l),((ct&2)===0||s!==St)&&(s===St&&((ct&2)===0&&(Ho|=l),Ot===4&&Nr(s,et,Si,!1)),us(s))}function Vv(s,r,l){if((ct&6)!==0)throw Error(i(327));var c=!l&&(r&124)===0&&(r&s.expiredLanes)===0||jn(s,r),y=c?sx(s,r):Mp(s,r,!0),T=c;do{if(y===0){La&&!c&&Nr(s,r,0,!1);break}else{if(l=s.current.alternate,T&&!nx(l)){y=Mp(s,r,!1),T=!1;continue}if(y===2){if(T=r,s.errorRecoveryDisabledLanes&T)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var I=s;y=pu;var B=I.current.memoizedState.isDehydrated;if(B&&(Ba(I,C).flags|=256),C=Mp(I,C,!1),C!==2){if(wp&&!B){I.errorRecoveryDisabledLanes|=T,Ho|=T,y=4;break e}T=Kn,Kn=y,T!==null&&(Kn===null?Kn=T:Kn.push.apply(Kn,T))}y=C}if(T=!1,y!==2)continue}}if(y===1){Ba(s,0),Nr(s,r,0,!0);break}e:{switch(c=s,T=y,T){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Nr(c,r,Si,!Cr);break e;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=xp+300-bt(),10<y)){if(Nr(c,r,Si,!Cr),wn(c,0,!0)!==0)break e;c.timeoutHandle=dT(Lv.bind(null,c,l,Kn,pd,Ip,r,Si,Ho,Oa,Cr,T,2,-0,0),y);break e}Lv(c,l,Kn,pd,Ip,r,Si,Ho,Oa,Cr,T,0,-0,0)}}break}while(!0);us(s)}function Lv(s,r,l,c,y,T,C,I,B,K,re,ue,W,Z){if(s.timeoutHandle=-1,ue=r.subtreeFlags,(ue&8192||(ue&16785408)===16785408)&&(Au={stylesheets:null,count:0,unsuspend:Lx},bv(r),ue=Fx(),ue!==null)){s.cancelPendingCommit=ue(zv.bind(null,s,r,T,l,c,y,C,I,B,re,1,W,Z)),Nr(s,T,C,!K);return}zv(s,r,T,l,c,y,C,I,B)}function nx(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],T=y.getSnapshot;y=y.value;try{if(!ii(T(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Nr(s,r,l,c){r&=~Cp,r&=~Ho,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var T=31-Qt(y),C=1<<T;c[T]=-1,y&=~C}l!==0&&Ln(s,l,r)}function md(){return(ct&6)===0?(gu(0),!1):!0}function Pp(){if(Je!==null){if(dt===0)var s=Je.return;else s=Je,Fs=Vo=null,Kf(s),Ma=null,ou=0,s=Je;for(;s!==null;)gv(s.alternate,s),s=s.return;Je=null}}function Ba(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Tx(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Pp(),St=s,Je=l=Vs(s.current,null),et=r,dt=0,ai=null,Cr=!1,La=jn(s,r),wp=!1,Oa=Si=Cp=Ho=Ir=Ot=0,Kn=pu=null,Ip=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-Qt(c),T=1<<y;r|=s[y],c&=~T}return Ys=r,Lc(),l}function Ov(s,r){$e=null,ne.H=nd,r===Wl||r===$c?(r=t_(),dt=3):r===Xy?(r=t_(),dt=4):dt=r===nv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ai=r,Je===null&&(Ot=1,ad(s,_i(r,s.current)))}function Fv(){var s=ne.H;return ne.H=nd,s===null?nd:s}function qv(){var s=ne.A;return ne.A=ex,s}function Dp(){Ot=4,Cr||(et&4194048)!==et&&Ai.current!==null||(La=!0),(Ir&134217727)===0&&(Ho&134217727)===0||St===null||Nr(St,et,Si,!1)}function Mp(s,r,l){var c=ct;ct|=2;var y=Fv(),T=qv();(St!==s||et!==r)&&(pd=null,Ba(s,r)),r=!1;var C=Ot;e:do try{if(dt!==0&&Je!==null){var I=Je,B=ai;switch(dt){case 8:Pp(),C=6;break e;case 3:case 2:case 9:case 6:Ai.current===null&&(r=!0);var K=dt;if(dt=0,ai=null,Ha(s,I,B,K),l&&La){C=0;break e}break;default:K=dt,dt=0,ai=null,Ha(s,I,B,K)}}ix(),C=Ot;break}catch(re){Ov(s,re)}while(!0);return r&&s.shellSuspendCounter++,Fs=Vo=null,ct=c,ne.H=y,ne.A=T,Je===null&&(St=null,et=0,Lc()),C}function ix(){for(;Je!==null;)Bv(Je)}function sx(s,r){var l=ct;ct|=2;var c=Fv(),y=qv();St!==s||et!==r?(pd=null,fd=bt()+500,Ba(s,r)):La=jn(s,r);e:do try{if(dt!==0&&Je!==null){r=Je;var T=ai;t:switch(dt){case 1:dt=0,ai=null,Ha(s,r,T,1);break;case 2:case 9:if(Zy(T)){dt=0,ai=null,Hv(r);break}r=function(){dt!==2&&dt!==9||St!==s||(dt=7),us(s)},T.then(r,r);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Zy(T)?(dt=0,ai=null,Hv(r)):(dt=0,ai=null,Ha(s,r,T,7));break;case 5:var C=null;switch(Je.tag){case 26:C=Je.memoizedState;case 5:case 27:var I=Je;if(!C||ST(C)){dt=0,ai=null;var B=I.sibling;if(B!==null)Je=B;else{var K=I.return;K!==null?(Je=K,gd(K)):Je=null}break t}}dt=0,ai=null,Ha(s,r,T,5);break;case 6:dt=0,ai=null,Ha(s,r,T,6);break;case 8:Pp(),Ot=6;break e;default:throw Error(i(462))}}rx();break}catch(re){Ov(s,re)}while(!0);return Fs=Vo=null,ne.H=c,ne.A=y,ct=l,Je!==null?0:(St=null,et=0,Lc(),Ot)}function rx(){for(;Je!==null&&!Cs();)Bv(Je)}function Bv(s){var r=pv(s.alternate,s,Ys);s.memoizedProps=s.pendingProps,r===null?gd(s):Je=r}function Hv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=lv(l,r,r.pendingProps,r.type,void 0,et);break;case 11:r=lv(l,r,r.pendingProps,r.type.render,r.ref,et);break;case 5:Kf(r);default:gv(l,r),r=Je=Gy(r,Ys),r=pv(l,r,Ys)}s.memoizedProps=s.pendingProps,r===null?gd(s):Je=r}function Ha(s,r,l,c){Fs=Vo=null,Kf(r),Ma=null,ou=0;var y=r.return;try{if(KI(s,y,r,l,et)){Ot=1,ad(s,_i(l,s.current)),Je=null;return}}catch(T){if(y!==null)throw Je=y,T;Ot=1,ad(s,_i(l,s.current)),Je=null;return}r.flags&32768?(lt||c===1?s=!0:La||(et&536870912)!==0?s=!1:(Cr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Ai.current,c!==null&&c.tag===13&&(c.flags|=16384))),Gv(r,s)):gd(r)}function gd(s){var r=s;do{if((r.flags&32768)!==0){Gv(r,Cr);return}s=r.return;var l=QI(r.alternate,r,Ys);if(l!==null){Je=l;return}if(r=r.sibling,r!==null){Je=r;return}Je=r=s}while(r!==null);Ot===0&&(Ot=5)}function Gv(s,r){do{var l=WI(s.alternate,s);if(l!==null){l.flags&=32767,Je=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Je=s;return}Je=s=l}while(s!==null);Ot=6,Je=null}function zv(s,r,l,c,y,T,C,I,B){s.cancelPendingCommit=null;do yd();while(gn!==0);if((ct&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(T=r.lanes|r.childLanes,T|=Sf,Ns(s,l,T,C,I,B),s===St&&(Je=St=null,et=0),Fa=r,Rr=s,qa=l,Rp=T,Np=y,kv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,ux(zn,function(){return Jv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=ne.T,ne.T=null,y=pe.p,pe.p=2,C=ct,ct|=4;try{XI(s,r,l)}finally{ct=C,pe.p=y,ne.T=c}}gn=1,jv(),$v(),Yv()}}function jv(){if(gn===1){gn=0;var s=Rr,r=Fa,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null;var c=pe.p;pe.p=2;var y=ct;ct|=4;try{xv(r,s);var T=jp,C=My(s.containerInfo),I=T.focusedElem,B=T.selectionRange;if(C!==I&&I&&I.ownerDocument&&Dy(I.ownerDocument.documentElement,I)){if(B!==null&&_f(I)){var K=B.start,re=B.end;if(re===void 0&&(re=K),"selectionStart"in I)I.selectionStart=K,I.selectionEnd=Math.min(re,I.value.length);else{var ue=I.ownerDocument||document,W=ue&&ue.defaultView||window;if(W.getSelection){var Z=W.getSelection(),Ue=I.textContent.length,Pe=Math.min(B.start,Ue),yt=B.end===void 0?Pe:Math.min(B.end,Ue);!Z.extend&&Pe>yt&&(C=yt,yt=Pe,Pe=C);var j=Py(I,Pe),G=Py(I,yt);if(j&&G&&(Z.rangeCount!==1||Z.anchorNode!==j.node||Z.anchorOffset!==j.offset||Z.focusNode!==G.node||Z.focusOffset!==G.offset)){var $=ue.createRange();$.setStart(j.node,j.offset),Z.removeAllRanges(),Pe>yt?(Z.addRange($),Z.extend(G.node,G.offset)):($.setEnd(G.node,G.offset),Z.addRange($))}}}}for(ue=[],Z=I;Z=Z.parentNode;)Z.nodeType===1&&ue.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ue.length;I++){var ae=ue[I];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Nd=!!zp,jp=zp=null}finally{ct=y,pe.p=c,ne.T=l}}s.current=r,gn=2}}function $v(){if(gn===2){gn=0;var s=Rr,r=Fa,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=ne.T,ne.T=null;var c=pe.p;pe.p=2;var y=ct;ct|=4;try{Sv(s,r.alternate,r)}finally{ct=y,pe.p=c,ne.T=l}}gn=3}}function Yv(){if(gn===4||gn===3){gn=0,Qi();var s=Rr,r=Fa,l=qa,c=kv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?gn=5:(gn=0,Fa=Rr=null,Kv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(xr=null),ar(l),r=r.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(kn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=ne.T,y=pe.p,pe.p=2,ne.T=null;try{for(var T=s.onRecoverableError,C=0;C<c.length;C++){var I=c[C];T(I.value,{componentStack:I.stack})}}finally{ne.T=r,pe.p=y}}(qa&3)!==0&&yd(),us(s),y=s.pendingLanes,(l&4194090)!==0&&(y&42)!==0?s===bp?mu++:(mu=0,bp=s):mu=0,gu(0)}}function Kv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Jl(r)))}function yd(s){return jv(),$v(),Yv(),Jv()}function Jv(){if(gn!==5)return!1;var s=Rr,r=Rp;Rp=0;var l=ar(qa),c=ne.T,y=pe.p;try{pe.p=32>l?32:l,ne.T=null,l=Np,Np=null;var T=Rr,C=qa;if(gn=0,Fa=Rr=null,qa=0,(ct&6)!==0)throw Error(i(331));var I=ct;if(ct|=4,Dv(T.current),Nv(T,T.current,C,l),ct=I,gu(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(kn,T)}catch{}return!0}finally{pe.p=y,ne.T=c,Kv(s,r)}}function Qv(s,r,l){r=_i(l,r),r=lp(s.stateNode,r,2),s=_r(s,r,2),s!==null&&(ft(s,2),us(s))}function Et(s,r,l){if(s.tag===3)Qv(s,s,l);else for(;r!==null;){if(r.tag===3){Qv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(xr===null||!xr.has(c))){s=_i(l,s),l=ev(2),c=_r(r,l,2),c!==null&&(tv(l,c,r,s),ft(c,2),us(c));break}}r=r.return}}function kp(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new tx;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(wp=!0,y.add(l),s=ox.bind(null,s,r,l),r.then(s,s))}function ox(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,St===s&&(et&l)===l&&(Ot===4||Ot===3&&(et&62914560)===et&&300>bt()-xp?(ct&2)===0&&Ba(s,0):Cp|=l,Oa===et&&(Oa=0)),us(s)}function Wv(s,r){r===0&&(r=ei()),s=Sa(s,r),s!==null&&(ft(s,r),us(s))}function ax(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),Wv(s,l)}function lx(s,r){var l=0;switch(s.tag){case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Wv(s,l)}function ux(s,r){return Mn(s,r)}var _d=null,Ga=null,Up=!1,vd=!1,Vp=!1,Go=0;function us(s){s!==Ga&&s.next===null&&(Ga===null?_d=Ga=s:Ga=Ga.next=s),vd=!0,Up||(Up=!0,dx())}function gu(s,r){if(!Vp&&vd){Vp=!0;do for(var l=!1,c=_d;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var T=0;else{var C=c.suspendedLanes,I=c.pingedLanes;T=(1<<31-Qt(42|s)+1)-1,T&=y&~(C&~I),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(l=!0,tT(c,T))}else T=et,T=wn(c,c===St?T:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(T&3)===0||jn(c,T)||(l=!0,tT(c,T));c=c.next}while(l);Vp=!1}}function cx(){Xv()}function Xv(){vd=Up=!1;var s=0;Go!==0&&(vx()&&(s=Go),Go=0);for(var r=bt(),l=null,c=_d;c!==null;){var y=c.next,T=Zv(c,r);T===0?(c.next=null,l===null?_d=y:l.next=y,y===null&&(Ga=l)):(l=c,(s!==0||(T&3)!==0)&&(vd=!0)),c=y}gu(s)}function Zv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var C=31-Qt(T),I=1<<C,B=y[C];B===-1?((I&l)===0||(I&c)!==0)&&(y[C]=Zi(I,r)):B<=r&&(s.expiredLanes|=I),T&=~I}if(r=St,l=et,l=wn(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(dt===2||dt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&xi(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||jn(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&xi(c),ar(l)){case 2:case 8:l=Pt;break;case 32:l=zn;break;case 268435456:l=Is;break;default:l=zn}return c=eT.bind(null,s),l=Mn(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&xi(c),s.callbackPriority=2,s.callbackNode=null,2}function eT(s,r){if(gn!==0&&gn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(yd()&&s.callbackNode!==l)return null;var c=et;return c=wn(s,s===St?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Vv(s,c,r),Zv(s,bt()),s.callbackNode!=null&&s.callbackNode===l?eT.bind(null,s):null)}function tT(s,r){if(yd())return null;Vv(s,r,!0)}function dx(){Ex(function(){(ct&6)!==0?Mn(vt,cx):Xv()})}function Lp(){return Go===0&&(Go=Zn()),Go}function nT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Pi(""+s)}function iT(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function hx(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var T=nT((y[Tt]||null).action),C=c.submitter;C&&(r=(r=C[Tt]||null)?nT(r.formAction):C.getAttribute("formAction"),r!==null&&(T=r,C=null));var I=new Ao("action","action",null,c,y);s.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Go!==0){var B=C?iT(y,C):new FormData(y);ip(l,{pending:!0,data:B,method:y.method,action:T},null,B)}}else typeof T=="function"&&(I.preventDefault(),B=C?iT(y,C):new FormData(y),ip(l,{pending:!0,data:B,method:y.method,action:T},T,B))},currentTarget:y}]})}}for(var Op=0;Op<Af.length;Op++){var Fp=Af[Op],fx=Fp.toLowerCase(),px=Fp[0].toUpperCase()+Fp.slice(1);Ui(fx,"on"+px)}Ui(Vy,"onAnimationEnd"),Ui(Ly,"onAnimationIteration"),Ui(Oy,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(PI,"onTransitionRun"),Ui(DI,"onTransitionStart"),Ui(MI,"onTransitionCancel"),Ui(Fy,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),es("onBeforeInput",["compositionend","keypress","textInput","paste"]),es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yu));function sT(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var T=void 0;if(r)for(var C=c.length-1;0<=C;C--){var I=c[C],B=I.instance,K=I.currentTarget;if(I=I.listener,B!==T&&y.isPropagationStopped())break e;T=I,y.currentTarget=K;try{T(y)}catch(re){od(re)}y.currentTarget=null,T=B}else for(C=0;C<c.length;C++){if(I=c[C],B=I.instance,K=I.currentTarget,I=I.listener,B!==T&&y.isPropagationStopped())break e;T=I,y.currentTarget=K;try{T(y)}catch(re){od(re)}y.currentTarget=null,T=B}}}}function Qe(s,r){var l=r[fn];l===void 0&&(l=r[fn]=new Set);var c=s+"__bubble";l.has(c)||(rT(r,s,2,!1),l.add(c))}function qp(s,r,l){var c=0;r&&(c|=4),rT(l,s,c,r)}var Td="_reactListening"+Math.random().toString(36).slice(2);function Bp(s){if(!s[Td]){s[Td]=!0,la.forEach(function(l){l!=="selectionchange"&&(mx.has(l)||qp(l,!1,s),qp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Td]||(r[Td]=!0,qp("selectionchange",!1,r))}}function rT(s,r,l,c){switch(NT(r)){case 2:var y=Hx;break;case 8:y=Gx;break;default:y=tm}l=y.bind(null,r,l,s),y=void 0,!ks||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function Hp(s,r,l,c,y){var T=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var I=c.stateNode.containerInfo;if(I===y)break;if(C===4)for(C=c.return;C!==null;){var B=C.tag;if((B===3||B===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;I!==null;){if(C=qe(I),C===null)return;if(B=C.tag,B===5||B===6||B===26||B===27){c=T=C;continue e}I=I.parentNode}}c=c.return}vo(function(){var K=T,re=kl(l),ue=[];e:{var W=qy.get(s);if(W!==void 0){var Z=Ao,Ue=s;switch(s){case"keypress":if(To(l)===0)break e;case"keydown":case"keyup":Z=va;break;case"focusin":Ue="focus",Z=ga;break;case"focusout":Ue="blur",Z=ga;break;case"beforeblur":case"afterblur":Z=ga;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Rc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=pr;break;case Vy:case Ly:case Oy:Z=Vl;break;case Fy:Z=S;break;case"scroll":case"scrollend":Z=wo;break;case"wheel":Z=D;break;case"copy":case"cut":case"paste":Z=bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Fl;break;case"toggle":case"beforetoggle":Z=te}var Pe=(r&4)!==0,yt=!Pe&&(s==="scroll"||s==="scrollend"),j=Pe?W!==null?W+"Capture":null:W;Pe=[];for(var G=K,$;G!==null;){var ae=G;if($=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||$===null||j===null||(ae=hr(G,j),ae!=null&&Pe.push(_u(G,ae,$))),yt)break;G=G.return}0<Pe.length&&(W=new Z(W,Ue,null,l,re),ue.push({event:W,listeners:Pe}))}}if((r&7)===0){e:{if(W=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",W&&l!==Ml&&(Ue=l.relatedTarget||l.fromElement)&&(qe(Ue)||Ue[Xt]))break e;if((Z||W)&&(W=re.window===re?re:(W=re.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(Ue=l.relatedTarget||l.toElement,Z=K,Ue=Ue?qe(Ue):null,Ue!==null&&(yt=a(Ue),Pe=Ue.tag,Ue!==yt||Pe!==5&&Pe!==27&&Pe!==6)&&(Ue=null)):(Z=null,Ue=K),Z!==Ue)){if(Pe=xo,ae="onMouseLeave",j="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Pe=Fl,ae="onPointerLeave",j="onPointerEnter",G="pointer"),yt=Z==null?W:je(Z),$=Ue==null?W:je(Ue),W=new Pe(ae,G+"leave",Z,l,re),W.target=yt,W.relatedTarget=$,ae=null,qe(re)===K&&(Pe=new Pe(j,G+"enter",Ue,l,re),Pe.target=$,Pe.relatedTarget=yt,ae=Pe),yt=ae,Z&&Ue)t:{for(Pe=Z,j=Ue,G=0,$=Pe;$;$=za($))G++;for($=0,ae=j;ae;ae=za(ae))$++;for(;0<G-$;)Pe=za(Pe),G--;for(;0<$-G;)j=za(j),$--;for(;G--;){if(Pe===j||j!==null&&Pe===j.alternate)break t;Pe=za(Pe),j=za(j)}Pe=null}else Pe=null;Z!==null&&oT(ue,W,Z,Pe,!1),Ue!==null&&yt!==null&&oT(ue,yt,Ue,Pe,!0)}}e:{if(W=K?je(K):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var Ae=Cy;else if(Sy(W))if(Iy)Ae=RI;else{Ae=II;var Ye=CI}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?K&&fa(K.elementType)&&(Ae=Cy):Ae=xI;if(Ae&&(Ae=Ae(s,K))){wy(ue,Ae,l,re);break e}Ye&&Ye(s,W,K),s==="focusout"&&K&&W.type==="number"&&K.memoizedProps.value!=null&&bl(W,"number",W.value)}switch(Ye=K?je(K):window,s){case"focusin":(Sy(Ye)||Ye.contentEditable==="true")&&(Ta=Ye,vf=K,zl=null);break;case"focusout":zl=vf=Ta=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,ky(ue,l,re);break;case"selectionchange":if(bI)break;case"keydown":case"keyup":ky(ue,l,re)}var xe;if(Fe)e:{switch(s){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else ki?Di(s,l)&&(De="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(qt&&l.locale!=="ko"&&(ki||De!=="onCompositionStart"?De==="onCompositionEnd"&&ki&&(xe=xc()):(yi=re,At="value"in yi?yi.value:yi.textContent,ki=!0)),Ye=Ed(K,De),0<Ye.length&&(De=new Ol(De,s,null,l,re),ue.push({event:De,listeners:Ye}),xe?De.data=xe:(xe=Mi(l),xe!==null&&(De.data=xe)))),(xe=ut?ql(s,l):AI(s,l))&&(De=Ed(K,"onBeforeInput"),0<De.length&&(Ye=new Ol("onBeforeInput","beforeinput",null,l,re),ue.push({event:Ye,listeners:De}),Ye.data=xe)),hx(ue,s,K,l,re)}sT(ue,r)})}function _u(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Ed(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,T=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||T===null||(y=hr(s,l),y!=null&&c.unshift(_u(s,y,T)),y=hr(s,r),y!=null&&c.push(_u(s,y,T))),s.tag===3)return c;s=s.return}return[]}function za(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function oT(s,r,l,c,y){for(var T=r._reactName,C=[];l!==null&&l!==c;){var I=l,B=I.alternate,K=I.stateNode;if(I=I.tag,B!==null&&B===c)break;I!==5&&I!==26&&I!==27||K===null||(B=K,y?(K=hr(l,T),K!=null&&C.unshift(_u(l,K,B))):y||(K=hr(l,T),K!=null&&C.push(_u(l,K,B)))),l=l.return}C.length!==0&&s.push({event:r,listeners:C})}var gx=/\r\n?/g,yx=/\u0000|\uFFFD/g;function aT(s){return(typeof s=="string"?s:""+s).replace(gx,`
`).replace(yx,"")}function lT(s,r){return r=aT(r),aT(s)===r}function Ad(){}function gt(s,r,l,c,y,T){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||gi(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&gi(s,""+c);break;case"className":po(s,"class",c);break;case"tabIndex":po(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":po(s,l,c);break;case"style":Dl(s,c,T);break;case"data":if(r!=="object"){po(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Pi(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(l==="formAction"?(r!=="input"&&gt(s,r,"name",y.name,y,null),gt(s,r,"formEncType",y.formEncType,y,null),gt(s,r,"formMethod",y.formMethod,y,null),gt(s,r,"formTarget",y.formTarget,y,null)):(gt(s,r,"encType",y.encType,y,null),gt(s,r,"method",y.method,y,null),gt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Pi(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Ad);break;case"onScroll":c!=null&&Qe("scroll",s);break;case"onScrollEnd":c!=null&&Qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Pi(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Qe("beforetoggle",s),Qe("toggle",s),fo(s,"popover",c);break;case"xlinkActuate":mi(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":mi(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":mi(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":mi(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":mi(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":mi(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":mi(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":mi(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":mi(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":fo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=wc.get(l)||l,fo(s,l,c))}}function Gp(s,r,l,c,y,T){switch(l){case"style":Dl(s,c,T);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?gi(s,c):(typeof c=="number"||typeof c=="bigint")&&gi(s,""+c);break;case"onScroll":c!=null&&Qe("scroll",s);break;case"onScrollEnd":c!=null&&Qe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ad);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!co.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),T=s[Tt]||null,T=T!=null?T[l]:null,typeof T=="function"&&s.removeEventListener(r,T,y),typeof c=="function")){typeof T!="function"&&T!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):fo(s,l,c)}}}function yn(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",s),Qe("load",s);var c=!1,y=!1,T;for(T in l)if(l.hasOwnProperty(T)){var C=l[T];if(C!=null)switch(T){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:gt(s,r,T,C,l,null)}}y&&gt(s,r,"srcSet",l.srcSet,l,null),c&&gt(s,r,"src",l.src,l,null);return;case"input":Qe("invalid",s);var I=T=C=y=null,B=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var re=l[c];if(re!=null)switch(c){case"name":y=re;break;case"type":C=re;break;case"checked":B=re;break;case"defaultChecked":K=re;break;case"value":T=re;break;case"defaultValue":I=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,r));break;default:gt(s,r,c,re,l,null)}}Nl(s,T,I,B,K,C,y,!1),ur(s);return;case"select":Qe("invalid",s),c=C=T=null;for(y in l)if(l.hasOwnProperty(y)&&(I=l[y],I!=null))switch(y){case"value":T=I;break;case"defaultValue":C=I;break;case"multiple":c=I;default:gt(s,r,y,I,l,null)}r=T,l=C,s.multiple=!!c,r!=null?cr(s,!!c,r,!1):l!=null&&cr(s,!!c,l,!0);return;case"textarea":Qe("invalid",s),T=y=c=null;for(C in l)if(l.hasOwnProperty(C)&&(I=l[C],I!=null))switch(C){case"value":c=I;break;case"defaultValue":y=I;break;case"children":T=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:gt(s,r,C,I,l,null)}Sc(s,c,y,T),ur(s);return;case"option":for(B in l)if(l.hasOwnProperty(B)&&(c=l[B],c!=null))switch(B){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:gt(s,r,B,c,l,null)}return;case"dialog":Qe("beforetoggle",s),Qe("toggle",s),Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":Qe("load",s);break;case"video":case"audio":for(c=0;c<yu.length;c++)Qe(yu[c],s);break;case"image":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"embed":case"source":case"link":Qe("error",s),Qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:gt(s,r,K,c,l,null)}return;default:if(fa(r)){for(re in l)l.hasOwnProperty(re)&&(c=l[re],c!==void 0&&Gp(s,r,re,c,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(c=l[I],c!=null&&gt(s,r,I,c,l,null))}function _x(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,T=null,C=null,I=null,B=null,K=null,re=null;for(Z in l){var ue=l[Z];if(l.hasOwnProperty(Z)&&ue!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":B=ue;default:c.hasOwnProperty(Z)||gt(s,r,Z,null,c,ue)}}for(var W in c){var Z=c[W];if(ue=l[W],c.hasOwnProperty(W)&&(Z!=null||ue!=null))switch(W){case"type":T=Z;break;case"name":y=Z;break;case"checked":K=Z;break;case"defaultChecked":re=Z;break;case"value":C=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==ue&&gt(s,r,W,Z,c,ue)}}Rl(s,C,I,B,K,re,T,y);return;case"select":Z=C=I=W=null;for(T in l)if(B=l[T],l.hasOwnProperty(T)&&B!=null)switch(T){case"value":break;case"multiple":Z=B;default:c.hasOwnProperty(T)||gt(s,r,T,null,c,B)}for(y in c)if(T=c[y],B=l[y],c.hasOwnProperty(y)&&(T!=null||B!=null))switch(y){case"value":W=T;break;case"defaultValue":I=T;break;case"multiple":C=T;default:T!==B&&gt(s,r,y,T,c,B)}r=I,l=C,c=Z,W!=null?cr(s,!!l,W,!1):!!c!=!!l&&(r!=null?cr(s,!!l,r,!0):cr(s,!!l,l?[]:"",!1));return;case"textarea":Z=W=null;for(I in l)if(y=l[I],l.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:gt(s,r,I,null,c,y)}for(C in c)if(y=c[C],T=l[C],c.hasOwnProperty(C)&&(y!=null||T!=null))switch(C){case"value":W=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==T&&gt(s,r,C,y,c,T)}Ac(s,W,Z);return;case"option":for(var Ue in l)if(W=l[Ue],l.hasOwnProperty(Ue)&&W!=null&&!c.hasOwnProperty(Ue))switch(Ue){case"selected":s.selected=!1;break;default:gt(s,r,Ue,null,c,W)}for(B in c)if(W=c[B],Z=l[B],c.hasOwnProperty(B)&&W!==Z&&(W!=null||Z!=null))switch(B){case"selected":s.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:gt(s,r,B,W,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in l)W=l[Pe],l.hasOwnProperty(Pe)&&W!=null&&!c.hasOwnProperty(Pe)&&gt(s,r,Pe,null,c,W);for(K in c)if(W=c[K],Z=l[K],c.hasOwnProperty(K)&&W!==Z&&(W!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:gt(s,r,K,W,c,Z)}return;default:if(fa(r)){for(var yt in l)W=l[yt],l.hasOwnProperty(yt)&&W!==void 0&&!c.hasOwnProperty(yt)&&Gp(s,r,yt,void 0,c,W);for(re in c)W=c[re],Z=l[re],!c.hasOwnProperty(re)||W===Z||W===void 0&&Z===void 0||Gp(s,r,re,W,c,Z);return}}for(var j in l)W=l[j],l.hasOwnProperty(j)&&W!=null&&!c.hasOwnProperty(j)&&gt(s,r,j,null,c,W);for(ue in c)W=c[ue],Z=l[ue],!c.hasOwnProperty(ue)||W===Z||W==null&&Z==null||gt(s,r,ue,W,c,Z)}var zp=null,jp=null;function Sd(s){return s.nodeType===9?s:s.ownerDocument}function uT(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cT(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function $p(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Yp=null;function vx(){var s=window.event;return s&&s.type==="popstate"?s===Yp?!1:(Yp=s,!0):(Yp=null,!1)}var dT=typeof setTimeout=="function"?setTimeout:void 0,Tx=typeof clearTimeout=="function"?clearTimeout:void 0,hT=typeof Promise=="function"?Promise:void 0,Ex=typeof queueMicrotask=="function"?queueMicrotask:typeof hT<"u"?function(s){return hT.resolve(null).then(s).catch(Ax)}:dT;function Ax(s){setTimeout(function(){throw s})}function br(s){return s==="head"}function fT(s,r){var l=r,c=0,y=0;do{var T=l.nextSibling;if(s.removeChild(l),T&&T.nodeType===8)if(l=T.data,l==="/$"){if(0<c&&8>c){l=c;var C=s.ownerDocument;if(l&1&&vu(C.documentElement),l&2&&vu(C.body),l&4)for(l=C.head,vu(l),C=l.firstChild;C;){var I=C.nextSibling,B=C.nodeName;C[Q]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=I}}if(y===0){s.removeChild(T),xu(r);return}y--}else l==="$"||l==="$?"||l==="$!"?y++:c=l.charCodeAt(0)-48;else c=0;l=T}while(l);xu(r)}function Kp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Kp(l),ge(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function Sx(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Q])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var T=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=Li(s.nextSibling),s===null)break}return null}function wx(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Li(s.nextSibling),s===null))return null;return s}function Jp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Cx(s,r){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Li(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var Qp=null;function pT(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return s;r--}else l==="/$"&&r++}s=s.previousSibling}return null}function mT(s,r,l){switch(r=Sd(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function vu(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);ge(s)}var wi=new Map,gT=new Set;function wd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ks=pe.d;pe.d={f:Ix,r:xx,D:Rx,C:Nx,L:bx,m:Px,X:Mx,S:Dx,M:kx};function Ix(){var s=Ks.f(),r=md();return s||r}function xx(s){var r=Ie(s);r!==null&&r.tag===5&&r.type==="form"?V_(r):Ks.r(s)}var ja=typeof document>"u"?null:document;function yT(s,r,l){var c=ja;if(c&&typeof r=="string"&&r){var y=sn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),gT.has(y)||(gT.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),yn(r,"link",s),Dt(r),c.head.appendChild(r)))}}function Rx(s){Ks.D(s),yT("dns-prefetch",s,null)}function Nx(s,r){Ks.C(s,r),yT("preconnect",s,r)}function bx(s,r,l){Ks.L(s,r,l);var c=ja;if(c&&s&&r){var y='link[rel="preload"][as="'+sn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+sn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+sn(l.imageSizes)+'"]')):y+='[href="'+sn(s)+'"]';var T=y;switch(r){case"style":T=$a(s);break;case"script":T=Ya(s)}wi.has(T)||(s=v({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),wi.set(T,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Tu(T))||r==="script"&&c.querySelector(Eu(T))||(r=c.createElement("link"),yn(r,"link",s),Dt(r),c.head.appendChild(r)))}}function Px(s,r){Ks.m(s,r);var l=ja;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+sn(c)+'"][href="'+sn(s)+'"]',T=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ya(s)}if(!wi.has(T)&&(s=v({rel:"modulepreload",href:s},r),wi.set(T,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Eu(T)))return}c=l.createElement("link"),yn(c,"link",s),Dt(c),l.head.appendChild(c)}}}function Dx(s,r,l){Ks.S(s,r,l);var c=ja;if(c&&s){var y=pn(c).hoistableStyles,T=$a(s);r=r||"default";var C=y.get(T);if(!C){var I={loading:0,preload:null};if(C=c.querySelector(Tu(T)))I.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":r},l),(l=wi.get(T))&&Wp(s,l);var B=C=c.createElement("link");Dt(B),yn(B,"link",s),B._p=new Promise(function(K,re){B.onload=K,B.onerror=re}),B.addEventListener("load",function(){I.loading|=1}),B.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Cd(C,r,c)}C={type:"stylesheet",instance:C,count:1,state:I},y.set(T,C)}}}function Mx(s,r){Ks.X(s,r);var l=ja;if(l&&s){var c=pn(l).hoistableScripts,y=Ya(s),T=c.get(y);T||(T=l.querySelector(Eu(y)),T||(s=v({src:s,async:!0},r),(r=wi.get(y))&&Xp(s,r),T=l.createElement("script"),Dt(T),yn(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},c.set(y,T))}}function kx(s,r){Ks.M(s,r);var l=ja;if(l&&s){var c=pn(l).hoistableScripts,y=Ya(s),T=c.get(y);T||(T=l.querySelector(Eu(y)),T||(s=v({src:s,async:!0,type:"module"},r),(r=wi.get(y))&&Xp(s,r),T=l.createElement("script"),Dt(T),yn(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},c.set(y,T))}}function _T(s,r,l,c){var y=(y=Ee.current)?wd(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=$a(l.href),l=pn(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=$a(l.href);var T=pn(y).hoistableStyles,C=T.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,C),(T=y.querySelector(Tu(s)))&&!T._p&&(C.instance=T,C.state.loading=5),wi.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},wi.set(s,l),T||Ux(y,s,l,C.state))),r&&c===null)throw Error(i(528,""));return C}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ya(l),l=pn(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function $a(s){return'href="'+sn(s)+'"'}function Tu(s){return'link[rel="stylesheet"]['+s+"]"}function vT(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function Ux(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),yn(r,"link",l),Dt(r),s.head.appendChild(r))}function Ya(s){return'[src="'+sn(s)+'"]'}function Eu(s){return"script[async]"+s}function TT(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+sn(l.href)+'"]');if(c)return r.instance=c,Dt(c),c;var y=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Dt(c),yn(c,"style",y),Cd(c,l.precedence,s),r.instance=c;case"stylesheet":y=$a(l.href);var T=s.querySelector(Tu(y));if(T)return r.state.loading|=4,r.instance=T,Dt(T),T;c=vT(l),(y=wi.get(y))&&Wp(c,y),T=(s.ownerDocument||s).createElement("link"),Dt(T);var C=T;return C._p=new Promise(function(I,B){C.onload=I,C.onerror=B}),yn(T,"link",c),r.state.loading|=4,Cd(T,l.precedence,s),r.instance=T;case"script":return T=Ya(l.src),(y=s.querySelector(Eu(T)))?(r.instance=y,Dt(y),y):(c=l,(y=wi.get(T))&&(c=v({},l),Xp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Dt(y),yn(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Cd(c,l.precedence,s));return r.instance}function Cd(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,T=y,C=0;C<c.length;C++){var I=c[C];if(I.dataset.precedence===r)T=I;else if(T!==y)break}T?T.parentNode.insertBefore(s,T.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Wp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Xp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Id=null;function ET(s,r,l){if(Id===null){var c=new Map,y=Id=new Map;y.set(l,c)}else y=Id,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var T=l[y];if(!(T[Q]||T[it]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var C=T.getAttribute(r)||"";C=s+C;var I=c.get(C);I?I.push(T):c.set(C,[T])}}return c}function AT(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function Vx(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function ST(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Au=null;function Lx(){}function Ox(s,r,l){if(Au===null)throw Error(i(475));var c=Au;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var y=$a(l.href),T=s.querySelector(Tu(y));if(T){s=T._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(c.count++,c=xd.bind(c),s.then(c,c)),r.state.loading|=4,r.instance=T,Dt(T);return}T=s.ownerDocument||s,l=vT(l),(y=wi.get(y))&&Wp(l,y),T=T.createElement("link"),Dt(T);var C=T;C._p=new Promise(function(I,B){C.onload=I,C.onerror=B}),yn(T,"link",l),r.instance=T}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=xd.bind(c),s.addEventListener("load",r),s.addEventListener("error",r))}}function Fx(){if(Au===null)throw Error(i(475));var s=Au;return s.stylesheets&&s.count===0&&Zp(s,s.stylesheets),0<s.count?function(r){var l=setTimeout(function(){if(s.stylesheets&&Zp(s,s.stylesheets),s.unsuspend){var c=s.unsuspend;s.unsuspend=null,c()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(l)}}:null}function xd(){if(this.count--,this.count===0){if(this.stylesheets)Zp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Rd=null;function Zp(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Rd=new Map,r.forEach(qx,s),Rd=null,xd.call(s))}function qx(s,r){if(!(r.state.loading&4)){var l=Rd.get(s);if(l)var c=l.get(null);else{l=new Map,Rd.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<y.length;T++){var C=y[T];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),c=C)}c&&l.set(null,c)}y=r.instance,C=y.getAttribute("data-precedence"),T=l.get(C)||c,T===c&&l.set(null,y),l.set(C,y),this.count++,c=xd.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),T?T.parentNode.insertBefore(y,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Su={$$typeof:z,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function Bx(s,r,l,c,y,T,C,I){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=T,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function wT(s,r,l,c,y,T,C,I,B,K,re,ue){return s=new Bx(s,r,l,C,I,B,K,ue),r=1,T===!0&&(r|=24),T=si(3,null,null,r),s.current=T,T.stateNode=s,r=kf(),r.refCount++,s.pooledCache=r,r.refCount++,T.memoizedState={element:c,isDehydrated:l,cache:r},Of(T),s}function CT(s){return s?(s=wa,s):wa}function IT(s,r,l,c,y,T){y=CT(y),c.context===null?c.context=y:c.pendingContext=y,c=yr(r),c.payload={element:l},T=T===void 0?null:T,T!==null&&(c.callback=T),l=_r(s,c,r),l!==null&&(ui(l,s,r),Zl(l,s,r))}function xT(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function em(s,r){xT(s,r),(s=s.alternate)&&xT(s,r)}function RT(s){if(s.tag===13){var r=Sa(s,67108864);r!==null&&ui(r,s,67108864),em(s,67108864)}}var Nd=!0;function Hx(s,r,l,c){var y=ne.T;ne.T=null;var T=pe.p;try{pe.p=2,tm(s,r,l,c)}finally{pe.p=T,ne.T=y}}function Gx(s,r,l,c){var y=ne.T;ne.T=null;var T=pe.p;try{pe.p=8,tm(s,r,l,c)}finally{pe.p=T,ne.T=y}}function tm(s,r,l,c){if(Nd){var y=nm(c);if(y===null)Hp(s,r,c,bd,l),bT(s,c);else if(jx(y,s,r,l,c))c.stopPropagation();else if(bT(s,c),r&4&&-1<zx.indexOf(s)){for(;y!==null;){var T=Ie(y);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var C=Vn(T.pendingLanes);if(C!==0){var I=T;for(I.pendingLanes|=2,I.entangledLanes|=2;C;){var B=1<<31-Qt(C);I.entanglements[1]|=B,C&=~B}us(T),(ct&6)===0&&(fd=bt()+500,gu(0))}}break;case 13:I=Sa(T,2),I!==null&&ui(I,T,2),md(),em(T,2)}if(T=nm(c),T===null&&Hp(s,r,c,bd,l),T===y)break;y=T}y!==null&&c.stopPropagation()}else Hp(s,r,c,null,l)}}function nm(s){return s=kl(s),im(s)}var bd=null;function im(s){if(bd=null,s=qe(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return bd=s,null}function NT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hn()){case vt:return 2;case Pt:return 8;case zn:case Wi:return 32;case Is:return 268435456;default:return 32}default:return 32}}var sm=!1,Pr=null,Dr=null,Mr=null,wu=new Map,Cu=new Map,kr=[],zx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bT(s,r){switch(s){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":wu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(r.pointerId)}}function Iu(s,r,l,c,y,T){return s===null||s.nativeEvent!==T?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:T,targetContainers:[y]},r!==null&&(r=Ie(r),r!==null&&RT(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function jx(s,r,l,c,y){switch(r){case"focusin":return Pr=Iu(Pr,s,r,l,c,y),!0;case"dragenter":return Dr=Iu(Dr,s,r,l,c,y),!0;case"mouseover":return Mr=Iu(Mr,s,r,l,c,y),!0;case"pointerover":var T=y.pointerId;return wu.set(T,Iu(wu.get(T)||null,s,r,l,c,y)),!0;case"gotpointercapture":return T=y.pointerId,Cu.set(T,Iu(Cu.get(T)||null,s,r,l,c,y)),!0}return!1}function PT(s){var r=qe(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Ct(s.priority,function(){if(l.tag===13){var c=li();c=bs(c);var y=Sa(l,c);y!==null&&ui(y,l,c),em(l,c)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Pd(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=nm(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Ml=c,l.target.dispatchEvent(c),Ml=null}else return r=Ie(l),r!==null&&RT(r),s.blockedOn=l,!1;r.shift()}return!0}function DT(s,r,l){Pd(s)&&l.delete(r)}function $x(){sm=!1,Pr!==null&&Pd(Pr)&&(Pr=null),Dr!==null&&Pd(Dr)&&(Dr=null),Mr!==null&&Pd(Mr)&&(Mr=null),wu.forEach(DT),Cu.forEach(DT)}function Dd(s,r){s.blockedOn===r&&(s.blockedOn=null,sm||(sm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$x)))}var Md=null;function MT(s){Md!==s&&(Md=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Md===s&&(Md=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(im(c||l)===null)continue;break}var T=Ie(l);T!==null&&(s.splice(r,3),r-=3,ip(T,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function xu(s){function r(B){return Dd(B,s)}Pr!==null&&Dd(Pr,s),Dr!==null&&Dd(Dr,s),Mr!==null&&Dd(Mr,s),wu.forEach(r),Cu.forEach(r);for(var l=0;l<kr.length;l++){var c=kr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<kr.length&&(l=kr[0],l.blockedOn===null);)PT(l),l.blockedOn===null&&kr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],T=l[c+1],C=y[Tt]||null;if(typeof T=="function")C||MT(l);else if(C){var I=null;if(T&&T.hasAttribute("formAction")){if(y=T,C=T[Tt]||null)I=C.formAction;else if(im(y)!==null)continue}else I=C.action;typeof I=="function"?l[c+1]=I:(l.splice(c,3),c-=3),MT(l)}}}function rm(s){this._internalRoot=s}kd.prototype.render=rm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=li();IT(l,c,s,r,null,null)},kd.prototype.unmount=rm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;IT(s.current,2,null,s,null,null),md(),r[Xt]=null}};function kd(s){this._internalRoot=s}kd.prototype.unstable_scheduleHydration=function(s){if(s){var r=ti();s={blockedOn:null,target:s,priority:r};for(var l=0;l<kr.length&&r!==0&&r<kr[l].priority;l++);kr.splice(l,0,s),l===0&&PT(s)}};var kT=e.version;if(kT!=="19.1.1")throw Error(i(527,kT,"19.1.1"));pe.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(r),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var Yx={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{kn=Ud.inject(Yx),at=Ud}catch{}}return Nu.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=Q_,T=W_,C=X_,I=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(I=r.unstable_transitionCallbacks)),r=wT(s,1,!1,null,null,l,c,y,T,C,I,null),s[Xt]=r.current,Bp(s),new rm(r)},Nu.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",T=Q_,C=W_,I=X_,B=null,K=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(B=l.unstable_transitionCallbacks),l.formState!==void 0&&(K=l.formState)),r=wT(s,1,!0,r,l??null,c,y,T,C,I,B,K),r.context=CT(null),l=r.current,c=li(),c=bs(c),y=yr(c),y.callback=null,_r(l,y,c),l=c,r.current.lanes=l,ft(r,l),us(r),s[Xt]=r.current,Bp(s),new kd(r)},Nu.version="19.1.1",Nu}var zT;function iR(){if(zT)return lm.exports;zT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lm.exports=nR(),lm.exports}var sR=iR();const rR="modulepreload",oR=function(n){return"/"+n},jT={},tl=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let f=function(h){return Promise.all(h.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");o=f(t.map(h=>{if(h=oR(h),h in jT)return;jT[h]=!0;const v=h.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${E}`))return;const A=document.createElement("link");if(A.rel=v?"stylesheet":rR,v||(A.as="script"),A.crossOrigin="",A.href=h,d&&A.setAttribute("nonce",d),document.head.appendChild(A),v)return new Promise((R,L)=>{A.addEventListener("load",R),A.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},aR=()=>{};var $T={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},lR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},tS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,f=o+2<n.length,h=f?n[o+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let A=(d&15)<<2|h>>6,R=h&63;f||(R=64,u||(A=64)),i.push(t[v],t[E],t[A],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):lR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||h==null||E==null)throw new uR;const A=a<<2|d>>4;if(i.push(A),h!==64){const R=d<<4&240|h>>2;if(i.push(R),E!==64){const L=h<<6&192|E;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cR=function(n){const e=eS(n);return tS.encodeByteArray(e,!0)},oh=function(n){return cR(n).replace(/\./g,"")},nS=function(n){try{return tS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=()=>dR().__FIREBASE_DEFAULTS__,fR=()=>{if(typeof process>"u"||typeof $T>"u")return;const n=$T.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&nS(n[1]);return e&&JSON.parse(e)},kh=()=>{try{return aR()||hR()||fR()||pR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iS=n=>kh()?.emulatorHosts?.[n],sS=n=>{const e=iS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},rS=()=>kh()?.config,oS=n=>kh()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[oh(JSON.stringify(t)),oh(JSON.stringify(u)),""].join(".")}const Fu={};function gR(){const n={prod:[],emulator:[]};for(const e of Object.keys(Fu))Fu[e]?n.emulator.push(e):n.prod.push(e);return n}function yR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let YT=!1;function yg(n,e){if(typeof window>"u"||typeof document>"u"||!na(window.location.host)||Fu[n]===e||Fu[n]||YT)return;Fu[n]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",a=gR().prod.length>0;function u(){const A=document.getElementById(i);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function f(A,R){A.setAttribute("width","24"),A.setAttribute("id",R),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function h(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{YT=!0,u()},A}function v(A,R){A.setAttribute("id",R),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=yR(i),R=t("text"),L=document.getElementById(R)||document.createElement("span"),F=t("learnmore"),U=document.getElementById(F)||document.createElement("a"),J=t("preprendIcon"),H=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const z=A.element;d(z),v(U,F);const se=h();f(H,J),z.append(H,L,U,se),document.body.appendChild(z)}a?(L.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _R(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function vR(){const n=kh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ER(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function AR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SR(){const n=Dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function wR(){return!vR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CR(){try{return typeof indexedDB=="object"}catch{return!1}}function IR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="FirebaseError";class As extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=xR,Object.setPrototypeOf(this,As.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sc.prototype.create)}}class sc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?RR(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new As(o,d,i)}}function RR(n,e){return n.replace(NR,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const NR=/\{\$([^}]+)}/g;function bR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(KT(a)&&KT(u)){if(!Yo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function KT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Du(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Mu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function PR(n,e){const t=new DR(n,e);return t.subscribe.bind(t)}class DR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");MR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=hm),o.error===void 0&&(o.error=hm),o.complete===void 0&&(o.complete=hm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function hm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(n){return n&&n._delegate?n._delegate:n}class Kr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new mR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VR(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:UR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UR(n){return n===zo?void 0:n}function VR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(We||(We={}));const OR={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},FR=We.INFO,qR={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},BR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=qR[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _g{constructor(e){this.name=e,this._logLevel=FR,this._logHandler=BR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const HR=(n,e)=>e.some(t=>n instanceof t);let JT,QT;function GR(){return JT||(JT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zR(){return QT||(QT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lS=new WeakMap,bm=new WeakMap,uS=new WeakMap,fm=new WeakMap,vg=new WeakMap;function jR(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(zr(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&lS.set(t,n)}).catch(()=>{}),vg.set(e,n),e}function $R(n){if(bm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});bm.set(n,e)}let Pm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||uS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function YR(n){Pm=n(Pm)}function KR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(pm(this),e,...t);return uS.set(i,e.sort?e.sort():[e]),zr(i)}:zR().includes(n)?function(...e){return n.apply(pm(this),e),zr(lS.get(this))}:function(...e){return zr(n.apply(pm(this),e))}}function JR(n){return typeof n=="function"?KR(n):(n instanceof IDBTransaction&&$R(n),HR(n,GR())?new Proxy(n,Pm):n)}function zr(n){if(n instanceof IDBRequest)return jR(n);if(fm.has(n))return fm.get(n);const e=JR(n);return e!==n&&(fm.set(n,e),vg.set(e,n)),e}const pm=n=>vg.get(n);function QR(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=zr(u);return i&&u.addEventListener("upgradeneeded",f=>{i(zr(u.result),f.oldVersion,f.newVersion,zr(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const WR=["get","getKey","getAll","getAllKeys","count"],XR=["put","add","delete","clear"],mm=new Map;function WT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mm.get(e))return mm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=XR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||WR.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let h=f.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&f.done]))[0]};return mm.set(e,a),a}YR(n=>({...n,get:(e,t,i)=>WT(e,t)||n.get(e,t,i),has:(e,t)=>!!WT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(eN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function eN(n){return n.getComponent()?.type==="VERSION"}const Dm="@firebase/app",XT="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new _g("@firebase/app"),tN="@firebase/app-compat",nN="@firebase/analytics-compat",iN="@firebase/analytics",sN="@firebase/app-check-compat",rN="@firebase/app-check",oN="@firebase/auth",aN="@firebase/auth-compat",lN="@firebase/database",uN="@firebase/data-connect",cN="@firebase/database-compat",dN="@firebase/functions",hN="@firebase/functions-compat",fN="@firebase/installations",pN="@firebase/installations-compat",mN="@firebase/messaging",gN="@firebase/messaging-compat",yN="@firebase/performance",_N="@firebase/performance-compat",vN="@firebase/remote-config",TN="@firebase/remote-config-compat",EN="@firebase/storage",AN="@firebase/storage-compat",SN="@firebase/firestore",wN="@firebase/ai",CN="@firebase/firestore-compat",IN="firebase",xN="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",RN={[Dm]:"fire-core",[tN]:"fire-core-compat",[iN]:"fire-analytics",[nN]:"fire-analytics-compat",[rN]:"fire-app-check",[sN]:"fire-app-check-compat",[oN]:"fire-auth",[aN]:"fire-auth-compat",[lN]:"fire-rtdb",[uN]:"fire-data-connect",[cN]:"fire-rtdb-compat",[dN]:"fire-fn",[hN]:"fire-fn-compat",[fN]:"fire-iid",[pN]:"fire-iid-compat",[mN]:"fire-fcm",[gN]:"fire-fcm-compat",[yN]:"fire-perf",[_N]:"fire-perf-compat",[vN]:"fire-rc",[TN]:"fire-rc-compat",[EN]:"fire-gcs",[AN]:"fire-gcs-compat",[SN]:"fire-fst",[CN]:"fire-fst-compat",[wN]:"fire-vertex","fire-js":"fire-js",[IN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Map,NN=new Map,km=new Map;function ZT(n,e){try{n.container.addComponent(e)}catch(t){er.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ko(n){const e=n.name;if(km.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;km.set(e,n);for(const t of ah.values())ZT(t,n);for(const t of NN.values())ZT(t,n);return!0}function Uh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new sc("app","Firebase",bN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=xN;function cS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Mm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw jr.create("bad-app-name",{appName:String(o)});if(t||(t=rS()),!t)throw jr.create("no-options");const a=ah.get(o);if(a){if(Yo(t,a.options)&&Yo(i,a.config))return a;throw jr.create("duplicate-app",{appName:o})}const u=new LR(o);for(const f of km.values())u.addComponent(f);const d=new PN(t,i,u);return ah.set(o,d),d}function Tg(n=Mm){const e=ah.get(n);if(!e&&n===Mm&&rS())return cS();if(!e)throw jr.create("no-app",{appName:n});return e}function ps(n,e,t){let i=RN[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(u.join(" "));return}Ko(new Kr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="firebase-heartbeat-database",MN=1,Ku="firebase-heartbeat-store";let gm=null;function dS(){return gm||(gm=QR(DN,MN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw jr.create("idb-open",{originalErrorMessage:n.message})})),gm}async function kN(n){try{const t=(await dS()).transaction(Ku),i=await t.objectStore(Ku).get(hS(n));return await t.done,i}catch(e){if(e instanceof As)er.warn(e.message);else{const t=jr.create("idb-get",{originalErrorMessage:e?.message});er.warn(t.message)}}}async function eE(n,e){try{const i=(await dS()).transaction(Ku,"readwrite");await i.objectStore(Ku).put(e,hS(n)),await i.done}catch(t){if(t instanceof As)er.warn(t.message);else{const i=jr.create("idb-set",{originalErrorMessage:t?.message});er.warn(i.message)}}}function hS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=1024,VN=30;class LN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new FN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>VN){const o=qN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){er.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tE(),{heartbeatsToSend:t,unsentEntries:i}=ON(this._heartbeatsCache.heartbeats),o=oh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return er.warn(e),""}}}function tE(){return new Date().toISOString().substring(0,10)}function ON(n,e=UN){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),nE(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),nE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class FN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CR()?IR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nE(n){return oh(JSON.stringify({version:2,heartbeats:n})).length}function qN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(n){Ko(new Kr("platform-logger",e=>new ZR(e),"PRIVATE")),Ko(new Kr("heartbeat",e=>new LN(e),"PRIVATE")),ps(Dm,XT,n),ps(Dm,XT,"esm2020"),ps("fire-js","")}BN("");function fS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HN=fS,pS=new sc("auth","Firebase",fS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new _g("@firebase/auth");function GN(n,...e){lh.logLevel<=We.WARN&&lh.warn(`Auth (${ia}): ${n}`,...e)}function $d(n,...e){lh.logLevel<=We.ERROR&&lh.error(`Auth (${ia}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(n,...e){throw Eg(n,...e)}function ms(n,...e){return Eg(n,...e)}function mS(n,e,t){const i={...HN(),[e]:t};return new sc("auth","Firebase",i).create(e,{appName:n.name})}function gs(n){return mS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Eg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return pS.create(n,...e)}function ke(n,e,...t){if(!n)throw Eg(e,...t)}function Js(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $d(e),new Error(e)}function tr(n,e){n||Js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(){return typeof self<"u"&&self.location?.href||""}function zN(){return iE()==="http:"||iE()==="https:"}function iE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zN()||ER()||"connection"in navigator)?navigator.onLine:!0}function $N(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t){this.shortDelay=e,this.longDelay=t,tr(t>e,"Short delay should be less than long delay!"),this.isMobile=_R()||AR()}get(){return jN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(n,e){tr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JN=new oc(3e4,6e4);function no(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function io(n,e,t,i,o={}){return yS(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=rc({key:n.config.apiKey,...u}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...a};return TR()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&na(n.emulatorConfig.host)&&(h.credentials="include"),gS.fetch()(await _S(n,n.config.apiHost,t,d),h)})}async function yS(n,e,t){n._canInitEmulator=!1;const i={...YN,...e};try{const o=new WN(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Vd(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,h]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vd(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Vd(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Vd(n,"user-disabled",u);const v=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw mS(n,v,h);$i(n,v)}}catch(o){if(o instanceof As)throw o;$i(n,"network-request-failed",{message:String(o)})}}async function ac(n,e,t,i,o={}){const a=await io(n,e,t,i,o);return"mfaPendingCredential"in a&&$i(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function _S(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Ag(n.config,o):`${n.config.apiScheme}://${o}`;return KN.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function QN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ms(this.auth,"network-request-failed")),JN.get())})}}function Vd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ms(n,e,i);return o.customData._tokenResponse=t,o}function sE(n){return n!==void 0&&n.enterprise!==void 0}class XN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return QN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ZN(n,e){return io(n,"GET","/v2/recaptchaConfig",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eb(n,e){return io(n,"POST","/v1/accounts:delete",e)}async function uh(n,e){return io(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tb(n,e=!1){const t=Ft(n),i=await t.getIdToken(e),o=Sg(i);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:i,authTime:qu(ym(o.auth_time)),issuedAtTime:qu(ym(o.iat)),expirationTime:qu(ym(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function ym(n){return Number(n)*1e3}function Sg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{const o=nS(t);return o?JSON.parse(o):($d("Failed to decode base64 JWT payload"),null)}catch(o){return $d("Caught error parsing JWT payload as JSON",o?.toString()),null}}function rE(n){const e=Sg(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ju(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof As&&nb(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function nb({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ch(n){const e=n.auth,t=await n.getIdToken(),i=await Ju(n,uh(e,{idToken:t}));ke(i?.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=o.providerUserInfo?.length?vS(o.providerUserInfo):[],u=rb(n.providerData,a),d=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!u?.length,h=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Vm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,v)}async function sb(n){const e=Ft(n);await ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rb(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function vS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ob(n,e){const t=await yS(n,{},async()=>{const i=rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await _S(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:i};return n.emulatorConfig&&na(n.emulatorConfig.host)&&(f.credentials="include"),gS.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ab(n,e){return io(n,"POST","/v2/accounts:revokeToken",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=rE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await ob(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new nl;return i&&(ke(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(ke(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(ke(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nl,this.toJSON())}_performRefresh(){return Js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Fi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new ib(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ju(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tb(this,e)}reload(){return sb(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ch(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await Ju(this,eb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,f=t._redirectEventId??void 0,h=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:R,providerData:L,stsTokenManager:F}=t;ke(E&&F,e,"internal-error");const U=nl.fromJSON(this.name,F);ke(typeof E=="string",e,"internal-error"),Vr(i,e.name),Vr(o,e.name),ke(typeof A=="boolean",e,"internal-error"),ke(typeof R=="boolean",e,"internal-error"),Vr(a,e.name),Vr(u,e.name),Vr(d,e.name),Vr(f,e.name),Vr(h,e.name),Vr(v,e.name);const J=new Fi({uid:E,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:R,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:U,createdAt:h,lastLoginAt:v});return L&&Array.isArray(L)&&(J.providerData=L.map(H=>({...H}))),f&&(J._redirectEventId=f),J}static async _fromIdTokenResponse(e,t,i=!1){const o=new nl;o.updateFromServerResponse(t);const a=new Fi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ch(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?vS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,d=new nl;d.updateFromIdToken(i);const f=new Fi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Vm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=new Map;function Qs(n){tr(n instanceof Function,"Expected a class definition");let e=oE.get(n);return e?(tr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,oE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}TS.type="NONE";const aE=TS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(n,e,t){return`firebase:${n}:${e}:${t}`}class il{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Yd(this.userKey,o.apiKey,a),this.fullPersistenceKey=Yd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await uh(this.auth,{idToken:e}).catch(()=>{});return t?Fi._fromGetAccountInfoResponse(this.auth,t,e):null}return Fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new il(Qs(aE),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||Qs(aE);const u=Yd(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const v=await h._get(u);if(v){let E;if(typeof v=="string"){const A=await uh(e,{idToken:v}).catch(()=>{});if(!A)break;E=await Fi._fromGetAccountInfoResponse(e,A,v)}else E=Fi._fromJSON(e,v);h!==a&&(d=E),a=h;break}}catch{}const f=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new il(a,e,i):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new il(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ES(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IS(e))return"Blackberry";if(xS(e))return"Webos";if(AS(e))return"Safari";if((e.includes("chrome/")||SS(e))&&!e.includes("edge/"))return"Chrome";if(CS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function ES(n=Dn()){return/firefox\//i.test(n)}function AS(n=Dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SS(n=Dn()){return/crios\//i.test(n)}function wS(n=Dn()){return/iemobile/i.test(n)}function CS(n=Dn()){return/android/i.test(n)}function IS(n=Dn()){return/blackberry/i.test(n)}function xS(n=Dn()){return/webos/i.test(n)}function wg(n=Dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lb(n=Dn()){return wg(n)&&!!window.navigator?.standalone}function ub(){return SR()&&document.documentMode===10}function RS(n=Dn()){return wg(n)||CS(n)||xS(n)||IS(n)||/windows phone/i.test(n)||wS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(n,e=[]){let t;switch(n){case"Browser":t=lE(Dn());break;case"Worker":t=`${lE(Dn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ia}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function db(n,e={}){return io(n,"GET","/v2/passwordPolicy",no(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=6;class fb{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??hb,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uE(this),this.idTokenSubscription=new uE(this),this.beforeStateQueue=new cb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await il.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await uh(this,{idToken:e}),i=await Fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,u=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===u)&&d?.user&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ch(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$N()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(gs(this));const t=e?Ft(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await db(this),t=new fb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ab(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qs(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[Qs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,o);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&GN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function so(n){return Ft(n)}class uE{constructor(e){this.auth=e,this.observer=null,this.addObserver=PR(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mb(n){Vh=n}function bS(n){return Vh.loadJS(n)}function gb(){return Vh.recaptchaEnterpriseScript}function yb(){return Vh.gapiScript}function _b(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class vb{constructor(){this.enterprise=new Tb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Tb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Eb="recaptcha-enterprise",PS="NO_RECAPTCHA";class Ab{constructor(e){this.type=Eb,this.auth=so(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{ZN(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new XN(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(f=>{d(f)})})}function o(a,u,d){const f=window.grecaptcha;sE(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(PS)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vb().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&sE(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=gb();f.length!==0&&(f+=d),bS(f).then(()=>{o(d,a,u)}).catch(h=>{u(h)})}}).catch(d=>{u(d)})})}}async function cE(n,e,t,i=!1,o=!1){const a=new Ab(n);let u;if(o)u=PS;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Lm(n,e,t,i,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await cE(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await cE(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(n,e){const t=Uh(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Yo(a,e??{}))return o;$i(o,"already-initialized")}return t.initialize({options:e})}function wb(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Qs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Cb(n,e,t){const i=so(n);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=DS(e),{host:u,port:d}=Ib(e),f=d===null?"":`:${d}`,h={url:`${a}//${u}${f}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(Yo(h,i.config.emulator)&&Yo(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,na(u)?(gg(`${a}//${u}${f}`),yg("Auth",!0)):xb()}function DS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ib(n){const e=DS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:dE(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:dE(u)}}}function dE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Js("not implemented")}_getIdTokenResponse(e){return Js("not implemented")}_linkToIdToken(e,t){return Js("not implemented")}_getReauthenticationResolver(e){return Js("not implemented")}}async function Rb(n,e){return io(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(n,e){return ac(n,"POST","/v1/accounts:signInWithPassword",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(n,e){return ac(n,"POST","/v1/accounts:signInWithEmailLink",no(n,e))}async function Pb(n,e){return ac(n,"POST","/v1/accounts:signInWithEmailLink",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends Cg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Qu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Qu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,t,"signInWithPassword",Nb);case"emailLink":return bb(e,{email:this._email,oobCode:this._password});default:$i(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,i,"signUpPassword",Rb);case"emailLink":return Pb(e,{idToken:t,email:this._email,oobCode:this._password});default:$i(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n,e){return ac(n,"POST","/v1/accounts:signInWithIdp",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="http://localhost";class Jo extends Cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$i("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new Jo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return sl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,sl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sl(e,t)}buildRequest(){const e={requestUri:Db,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kb(n){const e=Du(Mu(n)).link,t=e?Du(Mu(e)).deep_link_id:null,i=Du(Mu(n)).deep_link_id;return(i?Du(Mu(i)).link:null)||i||t||e||n}class Ig{constructor(e){const t=Du(Mu(e)),i=t.apiKey??null,o=t.oobCode??null,a=Mb(t.mode??null);ke(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=kb(e);try{return new Ig(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.providerId=_l.PROVIDER_ID}static credential(e,t){return Qu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ig.parseLink(t);return ke(i,"argument-error"),Qu._fromEmailAndCode(e,i.code,i.tenantId)}}_l.PROVIDER_ID="password";_l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends MS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends lc{constructor(){super("facebook.com")}static credential(e){return Jo._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.FACEBOOK_SIGN_IN_METHOD="facebook.com";Or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Jo._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Fr.credential(t,i)}catch{return null}}}Fr.GOOGLE_SIGN_IN_METHOD="google.com";Fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends lc{constructor(){super("github.com")}static credential(e){return Jo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends lc{constructor(){super("twitter.com")}static credential(e,t){return Jo._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Br.credential(t,i)}catch{return null}}}Br.TWITTER_SIGN_IN_METHOD="twitter.com";Br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(n,e){return ac(n,"POST","/v1/accounts:signUp",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Fi._fromIdTokenResponse(e,i,o),u=hE(i);return new nr({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=hE(i);return new nr({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function hE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fE(n){if(Qn(n.app))return Promise.reject(gs(n));const e=so(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new nr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await kS(e,{returnSecureToken:!0}),i=await nr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends As{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new dh(e,t,i,o)}}function US(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(n,a,e,i):a})}async function Ub(n,e,t=!1){const i=await Ju(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return nr._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(n,e,t=!1){const{auth:i}=n;if(Qn(i.app))return Promise.reject(gs(i));const o="reauthenticate";try{const a=await Ju(n,US(i,o,e,n),t);ke(a.idToken,i,"internal-error");const u=Sg(a.idToken);ke(u,i,"internal-error");const{sub:d}=u;return ke(n.uid===d,i,"user-mismatch"),nr._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&$i(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(n,e,t=!1){if(Qn(n.app))return Promise.reject(gs(n));const i="signIn",o=await US(n,i,e),a=await nr._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function Lb(n,e){return VS(so(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(n){const e=so(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pE(n,e,t){if(Qn(n.app))return Promise.reject(gs(n));const i=so(n),u=await Lm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kS).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&LS(n),f}),d=await nr._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function mE(n,e,t){return Qn(n.app)?Promise.reject(gs(n)):Lb(Ft(n),_l.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&LS(n),i})}function Ob(n,e,t,i){return Ft(n).onIdTokenChanged(e,t,i)}function Fb(n,e,t){return Ft(n).beforeAuthStateChanged(e,t)}function OS(n,e,t,i){return Ft(n).onAuthStateChanged(e,t,i)}function qb(n){return Ft(n).signOut()}const hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hh,"1"),this.storage.removeItem(hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=1e3,Hb=10;class qS extends FS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);ub()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Hb):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Bb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qS.type="LOCAL";const Gb=qS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS extends FS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BS.type="SESSION";const HS=BS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Lh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(t.origin,a)),f=await zb(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const h=xg("",20);o.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===h)switch(A.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(A.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(){return window}function $b(n){ys().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){return typeof ys().WorkerGlobalScope<"u"&&typeof ys().importScripts=="function"}async function Yb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kb(){return navigator?.serviceWorker?.controller||null}function Jb(){return GS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="firebaseLocalStorageDb",Qb=1,fh="firebaseLocalStorage",jS="fbase_key";class uc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Oh(n,e){return n.transaction([fh],e?"readwrite":"readonly").objectStore(fh)}function Wb(){const n=indexedDB.deleteDatabase(zS);return new uc(n).toPromise()}function Om(){const n=indexedDB.open(zS,Qb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(fh,{keyPath:jS})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(fh)?e(i):(i.close(),await Wb(),e(await Om()))})})}async function gE(n,e,t){const i=Oh(n,!0).put({[jS]:e,value:t});return new uc(i).toPromise()}async function Xb(n,e){const t=Oh(n,!1).get(e),i=await new uc(t).toPromise();return i===void 0?null:i.value}function yE(n,e){const t=Oh(n,!0).delete(e);return new uc(t).toPromise()}const Zb=800,e1=3;class $S{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Om(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>e1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lh._getInstance(Jb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Yb(),!this.activeServiceWorker)return;this.sender=new jb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Kb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Om();return await gE(e,hh,"1"),await yE(e,hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>gE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Xb(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Oh(o,!1).getAll();return new uc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Zb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$S.type="LOCAL";const t1=$S;new oc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(n,e){return e?Qs(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends Cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function i1(n){return VS(n.auth,new Rg(n),n.bypassAuthState)}function s1(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),Vb(t,new Rg(n),n.bypassAuthState)}async function r1(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),Ub(t,new Rg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i1;case"linkViaPopup":case"linkViaRedirect":return r1;case"reauthViaPopup":case"reauthViaRedirect":return s1;default:$i(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=new oc(2e3,1e4);class Xa extends YS{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Xa.currentPopupAction&&Xa.currentPopupAction.cancel(),Xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,o1.get())};e()}}Xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="pendingRedirect",Kd=new Map;class l1 extends YS{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Kd.get(this.auth._key());if(!e){try{const i=await u1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Kd.set(this.auth._key(),e)}return this.bypassAuthState||Kd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u1(n,e){const t=h1(e),i=d1(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function c1(n,e){Kd.set(n._key(),e)}function d1(n){return Qs(n._redirectPersistence)}function h1(n){return Yd(a1,n.config.apiKey,n.name)}async function f1(n,e,t=!1){if(Qn(n.app))return Promise.reject(gs(n));const i=so(n),o=n1(i,e),u=await new l1(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=600*1e3;class m1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!KS(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ms(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=p1&&this.cachedEventUids.clear(),this.cachedEventUids.has(_E(e))}saveEventToCache(e){this.cachedEventUids.add(_E(e)),this.lastProcessedEventTime=Date.now()}}function _E(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function KS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function g1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(n,e={}){return io(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v1=/^https?/;async function T1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await y1(n);for(const t of e)try{if(E1(t))return}catch{}$i(n,"unauthorized-domain")}function E1(n){const e=Um(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!v1.test(t))return!1;if(_1.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=new oc(3e4,6e4);function vE(){const n=ys().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function S1(n){return new Promise((e,t)=>{function i(){vE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vE(),t(ms(n,"network-request-failed"))},timeout:A1.get()})}if(ys().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ys().gapi?.load)i();else{const o=_b("iframefcb");return ys()[o]=()=>{gapi.load?i():t(ms(n,"network-request-failed"))},bS(`${yb()}?onload=${o}`).catch(a=>t(a))}}).catch(e=>{throw Jd=null,e})}let Jd=null;function w1(n){return Jd=Jd||S1(n),Jd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=new oc(5e3,15e3),I1="__/auth/iframe",x1="emulator/auth/iframe",R1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b1(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ag(e,x1):`https://${n.config.authDomain}/${I1}`,i={apiKey:e.apiKey,appName:n.name,v:ia},o=N1.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${rc(i).slice(1)}`}async function P1(n){const e=await w1(n),t=ys().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:b1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R1,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=ms(n,"network-request-failed"),d=ys().setTimeout(()=>{a(u)},C1.get());function f(){ys().clearTimeout(d),o(i)}i.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M1=500,k1=600,U1="_blank",V1="http://localhost";class TE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function L1(n,e,t,i=M1,o=k1){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f={...D1,width:i.toString(),height:o.toString(),top:a,left:u},h=Dn().toLowerCase();t&&(d=SS(h)?U1:t),ES(h)&&(e=e||V1,f.scrollbars="yes");const v=Object.entries(f).reduce((A,[R,L])=>`${A}${R}=${L},`,"");if(lb(h)&&d!=="_self")return O1(e||"",d),new TE(null);const E=window.open(e||"",d,v);ke(E,n,"popup-blocked");try{E.focus()}catch{}return new TE(E)}function O1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="__/auth/handler",q1="emulator/auth/handler",B1=encodeURIComponent("fac");async function EE(n,e,t,i,o,a){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ia,eventId:o};if(e instanceof MS){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",bR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof lc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),h=f?`#${B1}=${encodeURIComponent(f)}`:"";return`${H1(n)}?${rc(d).slice(1)}${h}`}function H1({config:n}){return n.emulator?Ag(n,q1):`https://${n.authDomain}/${F1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="webStorageSupport";class G1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HS,this._completeRedirectFn=f1,this._overrideRedirectResult=c1}async _openPopup(e,t,i,o){tr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await EE(e,t,i,Um(),o);return L1(e,a,xg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await EE(e,t,i,Um(),o);return $b(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(tr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await P1(e),i=new m1(e);return t.register("authEvent",o=>(ke(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_m,{type:_m},o=>{const a=o?.[0]?.[_m];a!==void 0&&t(!!a),$i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=T1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RS()||AS()||wg()}}const z1=G1;var AE="@firebase/auth",SE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Y1(n){Ko(new Kr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;ke(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NS(n)},h=new pb(i,o,a,f);return wb(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ko(new Kr("auth-internal",e=>{const t=so(e.getProvider("auth").getImmediate());return(i=>new j1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ps(AE,SE,$1(n)),ps(AE,SE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=300,J1=oS("authIdTokenMaxAge")||K1;let wE=null;const Q1=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>J1)return;const o=t?.token;wE!==o&&(wE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function W1(n=Tg()){const e=Uh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Sb(n,{popupRedirectResolver:z1,persistence:[t1,Gb,HS]}),i=oS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=Q1(a.toString());Fb(t,u,()=>u(t.currentUser)),Ob(t,d=>u(d))}}const o=iS("auth");return o&&Cb(t,`http://${o}`),t}function X1(){return document.getElementsByTagName("head")?.[0]??document}mb({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=ms("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",X1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Y1("Browser");var CE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $r,JS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,P){function b(){}b.prototype=P.prototype,O.F=P.prototype,O.prototype=new b,O.prototype.constructor=O,O.D=function(M,k,V){for(var N=Array(arguments.length-2),we=2;we<arguments.length;we++)N[we-2]=arguments[we];return P.prototype[k].apply(M,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,P,b){b||(b=0);const M=Array(16);if(typeof P=="string")for(var k=0;k<16;++k)M[k]=P.charCodeAt(b++)|P.charCodeAt(b++)<<8|P.charCodeAt(b++)<<16|P.charCodeAt(b++)<<24;else for(k=0;k<16;++k)M[k]=P[b++]|P[b++]<<8|P[b++]<<16|P[b++]<<24;P=O.g[0],b=O.g[1],k=O.g[2];let V=O.g[3],N;N=P+(V^b&(k^V))+M[0]+3614090360&4294967295,P=b+(N<<7&4294967295|N>>>25),N=V+(k^P&(b^k))+M[1]+3905402710&4294967295,V=P+(N<<12&4294967295|N>>>20),N=k+(b^V&(P^b))+M[2]+606105819&4294967295,k=V+(N<<17&4294967295|N>>>15),N=b+(P^k&(V^P))+M[3]+3250441966&4294967295,b=k+(N<<22&4294967295|N>>>10),N=P+(V^b&(k^V))+M[4]+4118548399&4294967295,P=b+(N<<7&4294967295|N>>>25),N=V+(k^P&(b^k))+M[5]+1200080426&4294967295,V=P+(N<<12&4294967295|N>>>20),N=k+(b^V&(P^b))+M[6]+2821735955&4294967295,k=V+(N<<17&4294967295|N>>>15),N=b+(P^k&(V^P))+M[7]+4249261313&4294967295,b=k+(N<<22&4294967295|N>>>10),N=P+(V^b&(k^V))+M[8]+1770035416&4294967295,P=b+(N<<7&4294967295|N>>>25),N=V+(k^P&(b^k))+M[9]+2336552879&4294967295,V=P+(N<<12&4294967295|N>>>20),N=k+(b^V&(P^b))+M[10]+4294925233&4294967295,k=V+(N<<17&4294967295|N>>>15),N=b+(P^k&(V^P))+M[11]+2304563134&4294967295,b=k+(N<<22&4294967295|N>>>10),N=P+(V^b&(k^V))+M[12]+1804603682&4294967295,P=b+(N<<7&4294967295|N>>>25),N=V+(k^P&(b^k))+M[13]+4254626195&4294967295,V=P+(N<<12&4294967295|N>>>20),N=k+(b^V&(P^b))+M[14]+2792965006&4294967295,k=V+(N<<17&4294967295|N>>>15),N=b+(P^k&(V^P))+M[15]+1236535329&4294967295,b=k+(N<<22&4294967295|N>>>10),N=P+(k^V&(b^k))+M[1]+4129170786&4294967295,P=b+(N<<5&4294967295|N>>>27),N=V+(b^k&(P^b))+M[6]+3225465664&4294967295,V=P+(N<<9&4294967295|N>>>23),N=k+(P^b&(V^P))+M[11]+643717713&4294967295,k=V+(N<<14&4294967295|N>>>18),N=b+(V^P&(k^V))+M[0]+3921069994&4294967295,b=k+(N<<20&4294967295|N>>>12),N=P+(k^V&(b^k))+M[5]+3593408605&4294967295,P=b+(N<<5&4294967295|N>>>27),N=V+(b^k&(P^b))+M[10]+38016083&4294967295,V=P+(N<<9&4294967295|N>>>23),N=k+(P^b&(V^P))+M[15]+3634488961&4294967295,k=V+(N<<14&4294967295|N>>>18),N=b+(V^P&(k^V))+M[4]+3889429448&4294967295,b=k+(N<<20&4294967295|N>>>12),N=P+(k^V&(b^k))+M[9]+568446438&4294967295,P=b+(N<<5&4294967295|N>>>27),N=V+(b^k&(P^b))+M[14]+3275163606&4294967295,V=P+(N<<9&4294967295|N>>>23),N=k+(P^b&(V^P))+M[3]+4107603335&4294967295,k=V+(N<<14&4294967295|N>>>18),N=b+(V^P&(k^V))+M[8]+1163531501&4294967295,b=k+(N<<20&4294967295|N>>>12),N=P+(k^V&(b^k))+M[13]+2850285829&4294967295,P=b+(N<<5&4294967295|N>>>27),N=V+(b^k&(P^b))+M[2]+4243563512&4294967295,V=P+(N<<9&4294967295|N>>>23),N=k+(P^b&(V^P))+M[7]+1735328473&4294967295,k=V+(N<<14&4294967295|N>>>18),N=b+(V^P&(k^V))+M[12]+2368359562&4294967295,b=k+(N<<20&4294967295|N>>>12),N=P+(b^k^V)+M[5]+4294588738&4294967295,P=b+(N<<4&4294967295|N>>>28),N=V+(P^b^k)+M[8]+2272392833&4294967295,V=P+(N<<11&4294967295|N>>>21),N=k+(V^P^b)+M[11]+1839030562&4294967295,k=V+(N<<16&4294967295|N>>>16),N=b+(k^V^P)+M[14]+4259657740&4294967295,b=k+(N<<23&4294967295|N>>>9),N=P+(b^k^V)+M[1]+2763975236&4294967295,P=b+(N<<4&4294967295|N>>>28),N=V+(P^b^k)+M[4]+1272893353&4294967295,V=P+(N<<11&4294967295|N>>>21),N=k+(V^P^b)+M[7]+4139469664&4294967295,k=V+(N<<16&4294967295|N>>>16),N=b+(k^V^P)+M[10]+3200236656&4294967295,b=k+(N<<23&4294967295|N>>>9),N=P+(b^k^V)+M[13]+681279174&4294967295,P=b+(N<<4&4294967295|N>>>28),N=V+(P^b^k)+M[0]+3936430074&4294967295,V=P+(N<<11&4294967295|N>>>21),N=k+(V^P^b)+M[3]+3572445317&4294967295,k=V+(N<<16&4294967295|N>>>16),N=b+(k^V^P)+M[6]+76029189&4294967295,b=k+(N<<23&4294967295|N>>>9),N=P+(b^k^V)+M[9]+3654602809&4294967295,P=b+(N<<4&4294967295|N>>>28),N=V+(P^b^k)+M[12]+3873151461&4294967295,V=P+(N<<11&4294967295|N>>>21),N=k+(V^P^b)+M[15]+530742520&4294967295,k=V+(N<<16&4294967295|N>>>16),N=b+(k^V^P)+M[2]+3299628645&4294967295,b=k+(N<<23&4294967295|N>>>9),N=P+(k^(b|~V))+M[0]+4096336452&4294967295,P=b+(N<<6&4294967295|N>>>26),N=V+(b^(P|~k))+M[7]+1126891415&4294967295,V=P+(N<<10&4294967295|N>>>22),N=k+(P^(V|~b))+M[14]+2878612391&4294967295,k=V+(N<<15&4294967295|N>>>17),N=b+(V^(k|~P))+M[5]+4237533241&4294967295,b=k+(N<<21&4294967295|N>>>11),N=P+(k^(b|~V))+M[12]+1700485571&4294967295,P=b+(N<<6&4294967295|N>>>26),N=V+(b^(P|~k))+M[3]+2399980690&4294967295,V=P+(N<<10&4294967295|N>>>22),N=k+(P^(V|~b))+M[10]+4293915773&4294967295,k=V+(N<<15&4294967295|N>>>17),N=b+(V^(k|~P))+M[1]+2240044497&4294967295,b=k+(N<<21&4294967295|N>>>11),N=P+(k^(b|~V))+M[8]+1873313359&4294967295,P=b+(N<<6&4294967295|N>>>26),N=V+(b^(P|~k))+M[15]+4264355552&4294967295,V=P+(N<<10&4294967295|N>>>22),N=k+(P^(V|~b))+M[6]+2734768916&4294967295,k=V+(N<<15&4294967295|N>>>17),N=b+(V^(k|~P))+M[13]+1309151649&4294967295,b=k+(N<<21&4294967295|N>>>11),N=P+(k^(b|~V))+M[4]+4149444226&4294967295,P=b+(N<<6&4294967295|N>>>26),N=V+(b^(P|~k))+M[11]+3174756917&4294967295,V=P+(N<<10&4294967295|N>>>22),N=k+(P^(V|~b))+M[2]+718787259&4294967295,k=V+(N<<15&4294967295|N>>>17),N=b+(V^(k|~P))+M[9]+3951481745&4294967295,O.g[0]=O.g[0]+P&4294967295,O.g[1]=O.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,O.g[2]=O.g[2]+k&4294967295,O.g[3]=O.g[3]+V&4294967295}i.prototype.v=function(O,P){P===void 0&&(P=O.length);const b=P-this.blockSize,M=this.C;let k=this.h,V=0;for(;V<P;){if(k==0)for(;V<=b;)o(this,O,V),V+=this.blockSize;if(typeof O=="string"){for(;V<P;)if(M[k++]=O.charCodeAt(V++),k==this.blockSize){o(this,M),k=0;break}}else for(;V<P;)if(M[k++]=O[V++],k==this.blockSize){o(this,M),k=0;break}}this.h=k,this.o+=P},i.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var P=1;P<O.length-8;++P)O[P]=0;P=this.o*8;for(var b=O.length-8;b<O.length;++b)O[b]=P&255,P/=256;for(this.v(O),O=Array(16),P=0,b=0;b<4;++b)for(let M=0;M<32;M+=8)O[P++]=this.g[b]>>>M&255;return O};function a(O,P){var b=d;return Object.prototype.hasOwnProperty.call(b,O)?b[O]:b[O]=P(O)}function u(O,P){this.h=P;const b=[];let M=!0;for(let k=O.length-1;k>=0;k--){const V=O[k]|0;M&&V==P||(b[k]=V,M=!1)}this.g=b}var d={};function f(O){return-128<=O&&O<128?a(O,function(P){return new u([P|0],P<0?-1:0)}):new u([O|0],O<0?-1:0)}function h(O){if(isNaN(O)||!isFinite(O))return E;if(O<0)return U(h(-O));const P=[];let b=1;for(let M=0;O>=b;M++)P[M]=O/b|0,b*=4294967296;return new u(P,0)}function v(O,P){if(O.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(O.charAt(0)=="-")return U(v(O.substring(1),P));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=h(Math.pow(P,8));let M=E;for(let V=0;V<O.length;V+=8){var k=Math.min(8,O.length-V);const N=parseInt(O.substring(V,V+k),P);k<8?(k=h(Math.pow(P,k)),M=M.j(k).add(h(N))):(M=M.j(b),M=M.add(h(N)))}return M}var E=f(0),A=f(1),R=f(16777216);n=u.prototype,n.m=function(){if(F(this))return-U(this).m();let O=0,P=1;for(let b=0;b<this.g.length;b++){const M=this.i(b);O+=(M>=0?M:4294967296+M)*P,P*=4294967296}return O},n.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(L(this))return"0";if(F(this))return"-"+U(this).toString(O);const P=h(Math.pow(O,6));var b=this;let M="";for(;;){const k=se(b,P).g;b=J(b,k.j(P));let V=((b.g.length>0?b.g[0]:b.h)>>>0).toString(O);if(b=k,L(b))return V+M;for(;V.length<6;)V="0"+V;M=V+M}},n.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function L(O){if(O.h!=0)return!1;for(let P=0;P<O.g.length;P++)if(O.g[P]!=0)return!1;return!0}function F(O){return O.h==-1}n.l=function(O){return O=J(this,O),F(O)?-1:L(O)?0:1};function U(O){const P=O.g.length,b=[];for(let M=0;M<P;M++)b[M]=~O.g[M];return new u(b,~O.h).add(A)}n.abs=function(){return F(this)?U(this):this},n.add=function(O){const P=Math.max(this.g.length,O.g.length),b=[];let M=0;for(let k=0;k<=P;k++){let V=M+(this.i(k)&65535)+(O.i(k)&65535),N=(V>>>16)+(this.i(k)>>>16)+(O.i(k)>>>16);M=N>>>16,V&=65535,N&=65535,b[k]=N<<16|V}return new u(b,b[b.length-1]&-2147483648?-1:0)};function J(O,P){return O.add(U(P))}n.j=function(O){if(L(this)||L(O))return E;if(F(this))return F(O)?U(this).j(U(O)):U(U(this).j(O));if(F(O))return U(this.j(U(O)));if(this.l(R)<0&&O.l(R)<0)return h(this.m()*O.m());const P=this.g.length+O.g.length,b=[];for(var M=0;M<2*P;M++)b[M]=0;for(M=0;M<this.g.length;M++)for(let k=0;k<O.g.length;k++){const V=this.i(M)>>>16,N=this.i(M)&65535,we=O.i(k)>>>16,ze=O.i(k)&65535;b[2*M+2*k]+=N*ze,H(b,2*M+2*k),b[2*M+2*k+1]+=V*ze,H(b,2*M+2*k+1),b[2*M+2*k+1]+=N*we,H(b,2*M+2*k+1),b[2*M+2*k+2]+=V*we,H(b,2*M+2*k+2)}for(O=0;O<P;O++)b[O]=b[2*O+1]<<16|b[2*O];for(O=P;O<2*P;O++)b[O]=0;return new u(b,0)};function H(O,P){for(;(O[P]&65535)!=O[P];)O[P+1]+=O[P]>>>16,O[P]&=65535,P++}function z(O,P){this.g=O,this.h=P}function se(O,P){if(L(P))throw Error("division by zero");if(L(O))return new z(E,E);if(F(O))return P=se(U(O),P),new z(U(P.g),U(P.h));if(F(P))return P=se(O,U(P)),new z(U(P.g),P.h);if(O.g.length>30){if(F(O)||F(P))throw Error("slowDivide_ only works with positive integers.");for(var b=A,M=P;M.l(O)<=0;)b=ee(b),M=ee(M);var k=fe(b,1),V=fe(M,1);for(M=fe(M,2),b=fe(b,2);!L(M);){var N=V.add(M);N.l(O)<=0&&(k=k.add(b),V=N),M=fe(M,1),b=fe(b,1)}return P=J(O,k.j(P)),new z(k,P)}for(k=E;O.l(P)>=0;){for(b=Math.max(1,Math.floor(O.m()/P.m())),M=Math.ceil(Math.log(b)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),V=h(b),N=V.j(P);F(N)||N.l(O)>0;)b-=M,V=h(b),N=V.j(P);L(V)&&(V=A),k=k.add(V),O=J(O,N)}return new z(k,O)}n.B=function(O){return se(this,O).h},n.and=function(O){const P=Math.max(this.g.length,O.g.length),b=[];for(let M=0;M<P;M++)b[M]=this.i(M)&O.i(M);return new u(b,this.h&O.h)},n.or=function(O){const P=Math.max(this.g.length,O.g.length),b=[];for(let M=0;M<P;M++)b[M]=this.i(M)|O.i(M);return new u(b,this.h|O.h)},n.xor=function(O){const P=Math.max(this.g.length,O.g.length),b=[];for(let M=0;M<P;M++)b[M]=this.i(M)^O.i(M);return new u(b,this.h^O.h)};function ee(O){const P=O.g.length+1,b=[];for(let M=0;M<P;M++)b[M]=O.i(M)<<1|O.i(M-1)>>>31;return new u(b,O.h)}function fe(O,P){const b=P>>5;P%=32;const M=O.g.length-b,k=[];for(let V=0;V<M;V++)k[V]=P>0?O.i(V+b)>>>P|O.i(V+b+1)<<32-P:O.i(V+b);return new u(k,O.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,JS=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=v,$r=u}).apply(typeof CE<"u"?CE:typeof self<"u"?self:typeof window<"u"?window:{});var Ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QS,ku,WS,Qd,Fm,XS,ZS,ew;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ld=="object"&&Ld];for(var S=0;S<m.length;++S){var w=m[S];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function o(m,S){if(S)e:{var w=i;m=m.split(".");for(var D=0;D<m.length-1;D++){var Y=m[D];if(!(Y in w))break e;w=w[Y]}m=m[m.length-1],D=w[m],S=S(D),S!=D&&S!=null&&e(w,m,{configurable:!0,writable:!0,value:S})}}o("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(m){return m||function(S){var w=[],D;for(D in S)Object.prototype.hasOwnProperty.call(S,D)&&w.push([D,S[D]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function f(m,S,w){return m.call.apply(m.bind,arguments)}function h(m,S,w){return h=f,h.apply(null,arguments)}function v(m,S){var w=Array.prototype.slice.call(arguments,1);return function(){var D=w.slice();return D.push.apply(D,arguments),m.apply(this,D)}}function E(m,S){function w(){}w.prototype=S.prototype,m.Z=S.prototype,m.prototype=new w,m.prototype.constructor=m,m.Ob=function(D,Y,te){for(var me=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)me[Fe-2]=arguments[Fe];return S.prototype[Y].apply(D,me)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function R(m){const S=m.length;if(S>0){const w=Array(S);for(let D=0;D<S;D++)w[D]=m[D];return w}return[]}function L(m,S){for(let D=1;D<arguments.length;D++){const Y=arguments[D];var w=typeof Y;if(w=w!="object"?w:Y?Array.isArray(Y)?"array":w:"null",w=="array"||w=="object"&&typeof Y.length=="number"){w=m.length||0;const te=Y.length||0;m.length=w+te;for(let me=0;me<te;me++)m[w+me]=Y[me]}else m.push(Y)}}class F{constructor(S,w){this.i=S,this.j=w,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function U(m){u.setTimeout(()=>{throw m},0)}function J(){var m=O;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class H{constructor(){this.h=this.g=null}add(S,w){const D=z.get();D.set(S,w),this.h?this.h.next=D:this.g=D,this.h=D}}var z=new F(()=>new se,m=>m.reset());class se{constructor(){this.next=this.g=this.h=null}set(S,w){this.h=S,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,fe=!1,O=new H,P=()=>{const m=Promise.resolve(void 0);ee=()=>{m.then(b)}};function b(){for(var m;m=J();){try{m.h.call(m.g)}catch(w){U(w)}var S=z;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}fe=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};u.addEventListener("test",w,S),u.removeEventListener("test",w,S)}catch{}return m})();function N(m){return/^[\s\xa0]*$/.test(m)}function we(m,S){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}E(we,k),we.prototype.init=function(m,S){const w=this.type=m.type,D=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(w=="mouseover"?S=m.fromElement:w=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),ne=0;function pe(m,S,w,D,Y){this.listener=m,this.proxy=null,this.src=S,this.type=w,this.capture=!!D,this.ha=Y,this.key=++ne,this.da=this.fa=!1}function le(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Te(m,S,w){for(const D in m)S.call(w,m[D],D,m)}function q(m,S){for(const w in m)S.call(void 0,m[w],w,m)}function ie(m){const S={};for(const w in m)S[w]=m[w];return S}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(m,S){let w,D;for(let Y=1;Y<arguments.length;Y++){D=arguments[Y];for(w in D)m[w]=D[w];for(let te=0;te<de.length;te++)w=de[te],Object.prototype.hasOwnProperty.call(D,w)&&(m[w]=D[w])}}function ye(m){this.src=m,this.g={},this.h=0}ye.prototype.add=function(m,S,w,D,Y){const te=m.toString();m=this.g[te],m||(m=this.g[te]=[],this.h++);const me=Ee(m,S,D,Y);return me>-1?(S=m[me],w||(S.fa=!1)):(S=new pe(S,this.src,te,!!D,Y),S.fa=w,m.push(S)),S};function be(m,S){const w=S.type;if(w in m.g){var D=m.g[w],Y=Array.prototype.indexOf.call(D,S,void 0),te;(te=Y>=0)&&Array.prototype.splice.call(D,Y,1),te&&(le(S),m.g[w].length==0&&(delete m.g[w],m.h--))}}function Ee(m,S,w,D){for(let Y=0;Y<m.length;++Y){const te=m[Y];if(!te.da&&te.listener==S&&te.capture==!!w&&te.ha==D)return Y}return-1}var Ve="closure_lm_"+(Math.random()*1e6|0),Le={};function ht(m,S,w,D,Y){if(Array.isArray(S)){for(let te=0;te<S.length;te++)ht(m,S[te],w,D,Y);return null}return w=hn(w),m&&m[ze]?m.J(S,w,d(D)?!!D.capture:!1,Y):ot(m,S,w,!1,D,Y)}function ot(m,S,w,D,Y,te){if(!S)throw Error("Invalid event type");const me=d(Y)?!!Y.capture:!!Y;let Fe=Qi(m);if(Fe||(m[Ve]=Fe=new ye(m)),w=Fe.add(S,w,D,me,te),w.proxy)return w;if(D=Vt(),w.proxy=D,D.src=m,D.listener=w,m.addEventListener)V||(Y=me),Y===void 0&&(Y=!1),m.addEventListener(S.toString(),D,Y);else if(m.attachEvent)m.attachEvent(xi(S.toString()),D);else if(m.addListener&&m.removeListener)m.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Vt(){function m(w){return S.call(m.src,m.listener,w)}const S=Cs;return m}function hi(m,S,w,D,Y){if(Array.isArray(S))for(var te=0;te<S.length;te++)hi(m,S[te],w,D,Y);else D=d(D)?!!D.capture:!!D,w=hn(w),m&&m[ze]?(m=m.i,te=String(S).toString(),te in m.g&&(S=m.g[te],w=Ee(S,w,D,Y),w>-1&&(le(S[w]),Array.prototype.splice.call(S,w,1),S.length==0&&(delete m.g[te],m.h--)))):m&&(m=Qi(m))&&(S=m.g[S.toString()],m=-1,S&&(m=Ee(S,w,D,Y)),(w=m>-1?S[m]:null)&&Mn(w))}function Mn(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[ze])be(S.i,m);else{var w=m.type,D=m.proxy;S.removeEventListener?S.removeEventListener(w,D,m.capture):S.detachEvent?S.detachEvent(xi(w),D):S.addListener&&S.removeListener&&S.removeListener(D),(w=Qi(S))?(be(w,m),w.h==0&&(w.src=null,S[Ve]=null)):le(m)}}}function xi(m){return m in Le?Le[m]:Le[m]="on"+m}function Cs(m,S){if(m.da)m=!0;else{S=new we(S,this);const w=m.listener,D=m.ha||m.src;m.fa&&Mn(m),m=w.call(D,S)}return m}function Qi(m){return m=m[Ve],m instanceof ye?m:null}var bt="__closure_events_fn_"+(Math.random()*1e9>>>0);function hn(m){return typeof m=="function"?m:(m[bt]||(m[bt]=function(S){return m.handleEvent(S)}),m[bt])}function vt(){M.call(this),this.i=new ye(this),this.M=this,this.G=null}E(vt,M),vt.prototype[ze]=!0,vt.prototype.removeEventListener=function(m,S,w,D){hi(this,m,S,w,D)};function Pt(m,S){var w,D=m.G;if(D)for(w=[];D;D=D.G)w.push(D);if(m=m.M,D=S.type||S,typeof S=="string")S=new k(S,m);else if(S instanceof k)S.target=S.target||m;else{var Y=S;S=new k(D,m),he(S,Y)}Y=!0;let te,me;if(w)for(me=w.length-1;me>=0;me--)te=S.g=w[me],Y=zn(te,D,!0,S)&&Y;if(te=S.g=m,Y=zn(te,D,!0,S)&&Y,Y=zn(te,D,!1,S)&&Y,w)for(me=0;me<w.length;me++)te=S.g=w[me],Y=zn(te,D,!1,S)&&Y}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var m=this.i;for(const S in m.g){const w=m.g[S];for(let D=0;D<w.length;D++)le(w[D]);delete m.g[S],m.h--}}this.G=null},vt.prototype.J=function(m,S,w,D){return this.i.add(String(m),S,!1,w,D)},vt.prototype.K=function(m,S,w,D){return this.i.add(String(m),S,!0,w,D)};function zn(m,S,w,D){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let Y=!0;for(let te=0;te<S.length;++te){const me=S[te];if(me&&!me.da&&me.capture==w){const Fe=me.listener,It=me.ha||me.src;me.fa&&be(m.i,me),Y=Fe.call(It,D)!==!1&&Y}}return Y&&!D.defaultPrevented}function Wi(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(m,S||0)}function Is(m){m.g=Wi(()=>{m.g=null,m.i&&(m.i=!1,Is(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class Ri extends M{constructor(S,w){super(),this.m=S,this.l=w,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Is(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ni(m){M.call(this),this.h=m,this.g={}}E(Ni,M);var kn=[];function at(m){Te(m.g,function(S,w){this.g.hasOwnProperty(w)&&Mn(S)},m),m.g={}}Ni.prototype.N=function(){Ni.Z.N.call(this),at(this)},Ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=u.JSON.stringify,Qt=u.JSON.parse,Xi=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function xs(){}function Rs(){}var Wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Un(){k.call(this,"d")}E(Un,k);function Vn(){k.call(this,"c")}E(Vn,k);var wn={},jn=null;function Zi(){return jn=jn||new vt}wn.Ia="serverreachability";function Zn(m){k.call(this,wn.Ia,m)}E(Zn,k);function ei(m){const S=Zi();Pt(S,new Zn(S))}wn.STAT_EVENT="statevent";function fi(m,S){k.call(this,wn.STAT_EVENT,m),this.stat=S}E(fi,k);function ft(m){const S=Zi();Pt(S,new fi(S,m))}wn.Ja="timingevent";function Ns(m,S){k.call(this,wn.Ja,m),this.size=S}E(Ns,k);function Ln(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},S)}function pi(){this.g=!0}pi.prototype.ua=function(){this.g=!1};function bs(m,S,w,D,Y,te){m.info(function(){if(m.g)if(te){var me="",Fe=te.split("&");for(let ut=0;ut<Fe.length;ut++){var It=Fe[ut].split("=");if(It.length>1){const qt=It[0];It=It[1];const ni=qt.split("_");me=ni.length>=2&&ni[1]=="type"?me+(qt+"="+It+"&"):me+(qt+"=redacted&")}}}else me=null;else me=te;return"XMLHTTP REQ ("+D+") [attempt "+Y+"]: "+S+`
`+w+`
`+me})}function ar(m,S,w,D,Y,te,me){m.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Y+"]: "+S+`
`+w+`
`+te+" "+me})}function ti(m,S,w,D){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Ke(m,w)+(D?" "+D:"")})}function Ct(m,S){m.info(function(){return"TIMEOUT: "+S})}pi.prototype.info=function(){};function Ke(m,S){if(!m.g)return S;if(!S)return null;try{const te=JSON.parse(S);if(te){for(m=0;m<te.length;m++)if(Array.isArray(te[m])){var w=te[m];if(!(w.length<2)){var D=w[1];if(Array.isArray(D)&&!(D.length<1)){var Y=D[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let me=1;me<D.length;me++)D[me]=""}}}}return Sn(te)}catch{return S}}var it={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Tt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xt;function fn(){}E(fn,xs),fn.prototype.g=function(){return new XMLHttpRequest},Xt=new fn;function zt(m){return encodeURIComponent(String(m))}function uo(m){var S=1;m=m.split(":");const w=[];for(;S>0&&m.length;)w.push(m.shift()),S--;return m.length&&w.push(m.join(":")),w}function x(m,S,w,D){this.j=m,this.i=S,this.l=w,this.S=D||1,this.V=new Ni(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Q}function Q(){this.i=null,this.g="",this.h=!1}var ge={},qe={};function Ie(m,S,w){m.M=1,m.A=Ds(Mt(S)),m.u=w,m.R=!0,je(m,null)}function je(m,S){m.F=Date.now(),co(m),m.B=Mt(m.A);var w=m.B,D=m.S;Array.isArray(D)||(D=[String(D)]),wc(w.i,"t",D),m.C=0,w=m.j.L,m.h=new Q,m.g=_a(m.j,w?S:null,!m.u),m.P>0&&(m.O=new Ri(h(m.Y,m,m.g),m.P)),S=m.V,w=m.g,D=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(kn[0]=Y.toString()),Y=kn);for(let te=0;te<Y.length;te++){const me=ht(w,Y[te],D||S.handleEvent,!1,S.h||S);if(!me)break;S.g[me.key]=me}S=m.J?ie(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),ei(),bs(m.i,m.v,m.B,m.l,m.S,m.u)}x.prototype.ba=function(m){m=m.target;const S=this.O;S&&Cn(m)==3?S.j():this.Y(m)},x.prototype.Y=function(m){try{if(m==this.g)e:{const Fe=Cn(this.g),It=this.g.ya(),ut=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Ao(this.g)))){this.K||Fe!=4||It==7||(It==8||ut<=0?ei(3):ei(2)),ts(this);var S=this.g.ca();this.X=S;var w=pn(this);if(this.o=S==200,ar(this.i,this.v,this.B,this.l,this.S,Fe,S),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Y=this.g;if((D=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(D)){var te=D;break t}}te=null}if(m=te)ti(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ua(this,m);else{this.o=!1,this.m=3,ft(12),ns(this),ho(this);break e}}if(this.R){m=!0;let qt;for(;!this.K&&this.C<w.length;)if(qt=la(this,w),qt==qe){Fe==4&&(this.m=4,ft(14),m=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==ge){this.m=4,ft(15),ti(this.i,this.l,w,"[Invalid Chunk]"),m=!1;break}else ti(this.i,this.l,qt,null),ua(this,qt);if(Dt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||w.length!=0||this.h.h||(this.m=1,ft(16),m=!1),this.o=this.o&&m,!m)ti(this.i,this.l,w,"[Invalid Chunked Response]"),ns(this),ho(this);else if(w.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Ll(me),me.P=!0,ft(11))}}else ti(this.i,this.l,w,null),ua(this,w);Fe==4&&ns(this),this.o&&!this.K&&(Fe==4?Ol(this.j,this):(this.o=!1,co(this)))}else So(this.g),S==400&&w.indexOf("Unknown SID")>0?(this.m=3,ft(12)):(this.m=0,ft(13)),ns(this),ho(this)}}}catch{}finally{}};function pn(m){if(!Dt(m))return m.g.la();const S=Ao(m.g);if(S==="")return"";let w="";const D=S.length,Y=Cn(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return ns(m),ho(m),"";m.h.i=new u.TextDecoder}for(let te=0;te<D;te++)m.h.h=!0,w+=m.h.i.decode(S[te],{stream:!(Y&&te==D-1)});return S.length=0,m.h.g+=w,m.C=0,m.h.g}function Dt(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function la(m,S){var w=m.C,D=S.indexOf(`
`,w);return D==-1?qe:(w=Number(S.substring(w,D)),isNaN(w)?ge:(D+=1,D+w>S.length?qe:(S=S.slice(D,D+w),m.C=D+w,S)))}x.prototype.cancel=function(){this.K=!0,ns(this)};function co(m){m.T=Date.now()+m.H,es(m,m.H)}function es(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ln(h(m.aa,m),S)}function ts(m){m.D&&(u.clearTimeout(m.D),m.D=null)}x.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Ct(this.i,this.B),this.M!=2&&(ei(),ft(17)),ns(this),this.m=2,ho(this)):es(this,this.T-m)};function ho(m){m.j.I==0||m.K||Ol(m.j,m)}function ns(m){ts(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,at(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function ua(m,S){try{var w=m.j;if(w.I!=0&&(w.g==m||mo(w.h,m))){if(!m.L&&mo(w.h,m)&&w.I==3){try{var D=w.Ba.g.parse(S)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Y=D;if(Y[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<m.F)ya(w),is(w);else break e;Vl(w),ft(18)}}else w.xa=Y[1],0<w.xa-w.K&&Y[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ln(h(w.Va,w),6e3));mi(w.h)<=1&&w.ta&&(w.ta=void 0)}else Us(w,11)}else if((m.L||w.g==m)&&ya(w),!N(S))for(Y=w.Ba.g.parse(S),S=0;S<Y.length;S++){let ut=Y[S];const qt=ut[0];if(!(qt<=w.K))if(w.K=qt,ut=ut[1],w.I==2)if(ut[0]=="c"){w.M=ut[1],w.ba=ut[2];const ni=ut[3];ni!=null&&(w.ka=ni,w.j.info("VER="+w.ka));const ss=ut[4];ss!=null&&(w.za=ss,w.j.info("SVER="+w.za));const Di=ut[5];Di!=null&&typeof Di=="number"&&Di>0&&(D=1.5*Di,w.O=D,w.j.info("backChannelRequestTimeoutMs_="+D)),D=w;const Mi=m.g;if(Mi){const ki=Mi.g?Mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ki){var te=D.h;te.g||ki.indexOf("spdy")==-1&&ki.indexOf("quic")==-1&&ki.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(ca(te,te.h),te.h=null))}if(D.G){const ql=Mi.g?Mi.g.getResponseHeader("X-HTTP-Session-Id"):null;ql&&(D.wa=ql,pt(D.J,D.G,ql))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-m.F,w.j.info("Handshake RTT: "+w.T+"ms")),D=w;var me=m;if(D.na=Mc(D,D.L?D.ba:null,D.W),me.L){Ps(D.h,me);var Fe=me,It=D.O;It&&(Fe.H=It),Fe.D&&(ts(Fe),co(Fe)),D.g=me}else Nc(D);w.i.length>0&&xo(w)}else ut[0]!="stop"&&ut[0]!="close"||Us(w,7);else w.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Us(w,7):Co(w):ut[0]!="noop"&&w.l&&w.l.qa(ut),w.A=0)}}ei(4)}catch{}}var ff=class{constructor(m,S){this.g=m,this.map=S}};function fo(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function po(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function mi(m){return m.h?1:m.g?m.g.size:0}function mo(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function ca(m,S){m.g?m.g.add(S):m.h=S}function Ps(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}fo.prototype.cancel=function(){if(this.i=da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function da(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const w of m.g.values())S=S.concat(w.G);return S}return R(m.i)}var ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pf(m,S){if(m){m=m.split("&");for(let w=0;w<m.length;w++){const D=m[w].indexOf("=");let Y,te=null;D>=0?(Y=m[w].substring(0,D),te=m[w].substring(D+1)):Y=m[w],S(Y,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function bi(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof bi?(this.l=m.l,lr(this,m.j),this.o=m.o,this.g=m.g,go(this,m.u),this.h=m.h,ur(this,Cc(m.i)),this.m=m.m):m&&(S=String(m).match(ha))?(this.l=!1,lr(this,S[1]||"",!0),this.o=yo(S[2]||""),this.g=yo(S[3]||"",!0),go(this,S[4]),this.h=yo(S[5]||"",!0),ur(this,S[6]||"",!0),this.m=yo(S[7]||"")):(this.l=!1,this.i=new gi(null,this.l))}bi.prototype.toString=function(){const m=[];var S=this.j;S&&m.push(sn(S,Nl,!0),":");var w=this.g;return(w||S=="file")&&(m.push("//"),(S=this.o)&&m.push(sn(S,Nl,!0),"@"),m.push(zt(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&m.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(sn(w,w.charAt(0)=="/"?cr:bl,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",sn(w,Sc)),m.join("")},bi.prototype.resolve=function(m){const S=Mt(this);let w=!!m.j;w?lr(S,m.j):w=!!m.o,w?S.o=m.o:w=!!m.g,w?S.g=m.g:w=m.u!=null;var D=m.h;if(w)go(S,m.u);else if(w=!!m.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Y=S.h.lastIndexOf("/");Y!=-1&&(D=S.h.slice(0,Y+1)+D)}if(Y=D,Y==".."||Y==".")D="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){D=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const te=[];for(let me=0;me<Y.length;){const Fe=Y[me++];Fe=="."?D&&me==Y.length&&te.push(""):Fe==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),D&&me==Y.length&&te.push("")):(te.push(Fe),D=!0)}D=te.join("/")}else D=Y}return w?S.h=D:w=m.i.toString()!=="",w?ur(S,Cc(m.i)):w=!!m.m,w&&(S.m=m.m),S};function Mt(m){return new bi(m)}function lr(m,S,w){m.j=w?yo(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function go(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function ur(m,S,w){S instanceof gi?(m.i=S,Ml(m.i,m.l)):(w||(S=sn(S,Ac)),m.i=new gi(S,m.l))}function pt(m,S,w){m.i.set(S,w)}function Ds(m){return pt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function yo(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function sn(m,S,w){return typeof m=="string"?(m=encodeURI(m).replace(S,Rl),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Rl(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Nl=/[#\/\?@]/g,bl=/[#\?:]/g,cr=/[#\?]/g,Ac=/[#\?@]/g,Sc=/#/g;function gi(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Ms(m){m.g||(m.g=new Map,m.h=0,m.i&&pf(m.i,function(S,w){m.add(decodeURIComponent(S.replace(/\+/g," ")),w)}))}n=gi.prototype,n.add=function(m,S){Ms(this),this.i=null,m=Pi(this,m);let w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(S),this.h+=1,this};function Pl(m,S){Ms(m),S=Pi(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function Dl(m,S){return Ms(m),S=Pi(m,S),m.g.has(S)}n.forEach=function(m,S){Ms(this),this.g.forEach(function(w,D){w.forEach(function(Y){m.call(S,Y,D,this)},this)},this)};function fa(m,S){Ms(m);let w=[];if(typeof S=="string")Dl(m,S)&&(w=w.concat(m.g.get(Pi(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)w=w.concat(m[S]);return w}n.set=function(m,S){return Ms(this),this.i=null,m=Pi(this,m),Dl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},n.get=function(m,S){return m?(m=fa(this,m),m.length>0?String(m[0]):S):S};function wc(m,S,w){Pl(m,S),w.length>0&&(m.i=null,m.g.set(Pi(m,S),R(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(let D=0;D<S.length;D++){var w=S[D];const Y=zt(w);w=fa(this,w);for(let te=0;te<w.length;te++){let me=Y;w[te]!==""&&(me+="="+zt(w[te])),m.push(me)}}return this.i=m.join("&")};function Cc(m){const S=new gi;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function Pi(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function Ml(m,S){S&&!m.j&&(Ms(m),m.i=null,m.g.forEach(function(w,D){const Y=D.toLowerCase();D!=Y&&(Pl(this,D),wc(this,Y,w))},m)),m.j=S}function kl(m,S){const w=new pi;if(u.Image){const D=new Image;D.onload=v(On,w,"TestLoadImage: loaded",!0,S,D),D.onerror=v(On,w,"TestLoadImage: error",!1,S,D),D.onabort=v(On,w,"TestLoadImage: abort",!1,S,D),D.ontimeout=v(On,w,"TestLoadImage: timeout",!1,S,D),u.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=m}else S(!1)}function dr(m,S){const w=new pi,D=new AbortController,Y=setTimeout(()=>{D.abort(),On(w,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:D.signal}).then(te=>{clearTimeout(Y),te.ok?On(w,"TestPingServer: ok",!0,S):On(w,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Y),On(w,"TestPingServer: error",!1,S)})}function On(m,S,w,D,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),D(w)}catch{}}function Ic(){this.g=new Xi}function _o(m){this.i=m.Sb||null,this.h=m.ab||!1}E(_o,xs),_o.prototype.g=function(){return new vo(this.i,this.h)};function vo(m,S){vt.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(vo,vt),n=vo.prototype,n.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,ks(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ks(this)),this.g&&(this.readyState=3,ks(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function hr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Fn(this):ks(this),this.readyState==3&&hr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Fn(this))},n.Na=function(m){this.g&&(this.response=m,Fn(this))},n.ga=function(){this.g&&Fn(this)};function Fn(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ks(m)}n.setRequestHeader=function(m,S){this.A.append(m,S)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var w=S.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=S.next();return m.join(`\r
`)};function ks(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function fr(m){let S="";return Te(m,function(w,D){S+=D,S+=":",S+=w,S+=`\r
`}),S}function yi(m,S,w){e:{for(D in w){var D=!1;break e}D=!0}D||(w=fr(w),typeof m=="string"?w!=null&&zt(w):pt(m,S,w))}function At(m){vt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(At,vt);var pa=/^https?$/i,xc=["POST","PUT"];n=At.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,S,w,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xt.g(),this.g.onreadystatechange=A(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(te){To(this,te);return}if(m=w||"",w=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Y in D)w.set(Y,D[Y]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const te of D.keys())w.set(te,D.get(te));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(w.keys()).find(te=>te.toLowerCase()=="content-type"),Y=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(xc,S,void 0)>=0)||D||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of w)this.g.setRequestHeader(te,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(te){To(this,te)}};function To(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,Eo(m),Zt(m)}function Eo(m){m.A||(m.A=!0,Pt(m,"complete"),Pt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Pt(this,"complete"),Pt(this,"abort"),Zt(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),At.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ul(this):this.Xa())},n.Xa=function(){Ul(this)};function Ul(m){if(m.h&&typeof a<"u"){if(m.v&&Cn(m)==4)setTimeout(m.Ca.bind(m),0);else if(Pt(m,"readystatechange"),Cn(m)==4){m.h=!1;try{const te=m.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var w;if(!(w=S)){var D;if(D=te===0){let me=String(m.D).match(ha)[1]||null;!me&&u.self&&u.self.location&&(me=u.self.location.protocol.slice(0,-1)),D=!pa.test(me?me.toLowerCase():"")}w=D}if(w)Pt(m,"complete"),Pt(m,"success");else{m.o=6;try{var Y=Cn(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",Eo(m)}}finally{Zt(m)}}}}function Zt(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const w=m.g;m.g=null,S||Pt(m,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Cn(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Cn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Qt(S)}};function Ao(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function So(m){const S={};m=(m.g&&Cn(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<m.length;D++){if(N(m[D]))continue;var w=uo(m[D]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const te=S[Y]||[];S[Y]=te,te.push(w)}q(S,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wo(m,S,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||S}function ma(m){this.za=0,this.i=[],this.j=new pi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wo("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wo("baseRetryDelayMs",5e3,m),this.Za=wo("retryDelaySeedMs",1e4,m),this.Ta=wo("forwardChannelMaxRetries",2,m),this.va=wo("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new fo(m&&m.concurrentRequestLimit),this.Ba=new Ic,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ma.prototype,n.ka=8,n.I=1,n.connect=function(m,S,w,D){ft(0),this.W=m,this.H=S||{},w&&D!==void 0&&(this.H.OSID=w,this.H.OAID=D),this.F=this.X,this.J=Mc(this,null,this.W),xo(this)};function Co(m){if(Io(m),m.I==3){var S=m.V++,w=Mt(m.J);if(pt(w,"SID",m.M),pt(w,"RID",S),pt(w,"TYPE","terminate"),Ro(m,w),S=new x(m,m.j,S),S.M=2,S.A=Ds(Mt(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=S.A,w=!0),w||(S.g=_a(S.j,null),S.g.ea(S.A)),S.F=Date.now(),co(S)}Dc(m)}function is(m){m.g&&(Ll(m),m.g.cancel(),m.g=null)}function Io(m){is(m),m.v&&(u.clearTimeout(m.v),m.v=null),ya(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function xo(m){if(!po(m.h)&&!m.m){m.m=!0;var S=m.Ea;ee||P(),fe||(ee(),fe=!0),O.add(S,m),m.D=0}}function mf(m,S){return mi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ln(h(m.Ea,m,S),Pc(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new x(this,this.j,m);let te=this.o;if(this.U&&(te?(te=ie(te),he(te,this.U)):te=this.U),this.u!==null||this.R||(Y.J=te,te=null),this.S)e:{for(var S=0,w=0;w<this.i.length;w++){t:{var D=this.i[w];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(S+=D,S>4096){S=w;break e}if(S===4096||w===this.i.length-1){S=w+1;break e}}S=1e3}else S=1e3;S=ga(this,Y,S),w=Mt(this.J),pt(w,"RID",m),pt(w,"CVER",22),this.G&&pt(w,"X-HTTP-Session-Id",this.G),Ro(this,w),te&&(this.R?S="headers="+zt(fr(te))+"&"+S:this.u&&yi(w,this.u,te)),ca(this.h,Y),this.Ra&&pt(w,"TYPE","init"),this.S?(pt(w,"$req",S),pt(w,"SID","null"),Y.U=!0,Ie(Y,w,null)):Ie(Y,w,S),this.I=2}}else this.I==3&&(m?Rc(this,m):this.i.length==0||po(this.h)||Rc(this))};function Rc(m,S){var w;S?w=S.l:w=m.V++;const D=Mt(m.J);pt(D,"SID",m.M),pt(D,"RID",w),pt(D,"AID",m.K),Ro(m,D),m.u&&m.o&&yi(D,m.u,m.o),w=new x(m,m.j,w,m.D+1),m.u===null&&(w.J=m.o),S&&(m.i=S.G.concat(m.i)),S=ga(m,w,1e3),w.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ca(m.h,w),Ie(w,D,S)}function Ro(m,S){m.H&&Te(m.H,function(w,D){pt(S,D,w)}),m.l&&Te({},function(w,D){pt(S,D,w)})}function ga(m,S,w){w=Math.min(m.i.length,w);const D=m.l?h(m.l.Ka,m.l,m):null;e:{var Y=m.i;let Fe=-1;for(;;){const It=["count="+w];Fe==-1?w>0?(Fe=Y[0].g,It.push("ofs="+Fe)):Fe=0:It.push("ofs="+Fe);let ut=!0;for(let qt=0;qt<w;qt++){var te=Y[qt].g;const ni=Y[qt].map;if(te-=Fe,te<0)Fe=Math.max(0,Y[qt].g-100),ut=!1;else try{te="req"+te+"_"||"";try{var me=ni instanceof Map?ni:Object.entries(ni);for(const[ss,Di]of me){let Mi=Di;d(Di)&&(Mi=Sn(Di)),It.push(te+ss+"="+encodeURIComponent(Mi))}}catch(ss){throw It.push(te+"type="+encodeURIComponent("_badmap")),ss}}catch{D&&D(ni)}}if(ut){me=It.join("&");break e}}me=void 0}return m=m.i.splice(0,w),S.G=m,me}function Nc(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;ee||P(),fe||(ee(),fe=!0),O.add(S,m),m.A=0}}function Vl(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ln(h(m.Da,m),Pc(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,bc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ln(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ft(10),is(this),bc(this))};function Ll(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function bc(m){m.g=new x(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=Mt(m.na);pt(S,"RID","rpc"),pt(S,"SID",m.M),pt(S,"AID",m.K),pt(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&pt(S,"TO",m.ia),pt(S,"TYPE","xmlhttp"),Ro(m,S),m.u&&m.o&&yi(S,m.u,m.o),m.O&&(m.g.H=m.O);var w=m.g;m=m.ba,w.M=1,w.A=Ds(Mt(S)),w.u=null,w.R=!0,je(w,m)}n.Va=function(){this.C!=null&&(this.C=null,is(this),Vl(this),ft(19))};function ya(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Ol(m,S){var w=null;if(m.g==S){ya(m),Ll(m),m.g=null;var D=2}else if(mo(m.h,S))w=S.G,Ps(m.h,S),D=1;else return;if(m.I!=0){if(S.o)if(D==1){w=S.u?S.u.length:0,S=Date.now()-S.F;var Y=m.D;D=Zi(),Pt(D,new Ns(D,w)),xo(m)}else Nc(m);else if(Y=S.m,Y==3||Y==0&&S.X>0||!(D==1&&mf(m,S)||D==2&&Vl(m)))switch(w&&w.length>0&&(S=m.h,S.i=S.i.concat(w)),Y){case 1:Us(m,5);break;case 4:Us(m,10);break;case 3:Us(m,6);break;default:Us(m,2)}}}function Pc(m,S){let w=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(w*=2),w*S}function Us(m,S){if(m.j.info("Error code "+S),S==2){var w=h(m.bb,m),D=m.Ua;const Y=!D;D=new bi(D||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||lr(D,"https"),Ds(D),Y?kl(D.toString(),w):dr(D.toString(),w)}else ft(2);m.I=0,m.l&&m.l.pa(S),Dc(m),Io(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Dc(m){if(m.I=0,m.ja=[],m.l){const S=da(m.h);(S.length!=0||m.i.length!=0)&&(L(m.ja,S),L(m.ja,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.oa()}}function Mc(m,S,w){var D=w instanceof bi?Mt(w):new bi(w);if(D.g!="")S&&(D.g=S+"."+D.g),go(D,D.u);else{var Y=u.location;D=Y.protocol,S=S?S+"."+Y.hostname:Y.hostname,Y=+Y.port;const te=new bi(null);D&&lr(te,D),S&&(te.g=S),Y&&go(te,Y),w&&(te.h=w),D=te}return w=m.G,S=m.wa,w&&S&&pt(D,w,S),pt(D,"VER",m.ka),Ro(m,D),D}function _a(m,S,w){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new At(new _o({ab:w})):new At(m.ma),S.Fa(m.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kc(){}n=kc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function va(){}va.prototype.g=function(m,S){return new qn(m,S)};function qn(m,S){vt.call(this),this.g=new ma(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!N(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!N(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new pr(this)}E(qn,vt),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){Co(this.g)},qn.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.v&&(w={},w.__data__=Sn(m),m=w);S.i.push(new ff(S.Ya++,m)),S.I==3&&xo(S)},qn.prototype.N=function(){this.g.l=null,delete this.j,Co(this.g),delete this.g,qn.Z.N.call(this)};function Fl(m){Un.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const w in S){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}E(Fl,Un);function Uc(){Vn.call(this),this.status=1}E(Uc,Vn);function pr(m){this.g=m}E(pr,kc),pr.prototype.ra=function(){Pt(this.g,"a")},pr.prototype.qa=function(m){Pt(this.g,new Fl(m))},pr.prototype.pa=function(m){Pt(this.g,new Uc)},pr.prototype.oa=function(){Pt(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,ew=function(){return new va},ZS=function(){return Zi()},XS=wn,Fm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,Qd=it,Tt.COMPLETE="complete",WS=Tt,Rs.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",vt.prototype.listen=vt.prototype.J,ku=Rs,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,QS=At}).apply(typeof Ld<"u"?Ld:typeof self<"u"?self:typeof window<"u"?window:{});const IE="@firebase/firestore",xE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new _g("@firebase/firestore");function Ka(){return Qo.logLevel}function ve(n,...e){if(Qo.logLevel<=We.DEBUG){const t=e.map(Ng);Qo.debug(`Firestore (${vl}): ${n}`,...t)}}function ir(n,...e){if(Qo.logLevel<=We.ERROR){const t=e.map(Ng);Qo.error(`Firestore (${vl}): ${n}`,...t)}}function Wo(n,...e){if(Qo.logLevel<=We.WARN){const t=e.map(Ng);Qo.warn(`Firestore (${vl}): ${n}`,...t)}}function Ng(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,tw(n,i,t)}function tw(n,e,t){let i=`FIRESTORE (${vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ir(i),new Error(i)}function nt(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||tw(e,o,i)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends As{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nn.UNAUTHENTICATED)))}shutdown(){}}class Z1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class eP{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let i=this.i;const o=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new _s,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},d=f=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new _s)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string",31837,{l:i}),new nw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class tP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new tP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class RE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const i=a=>{a.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new RE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new RE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=sP(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Xe(n,e){return n<e?-1:n>e?1:0}function qm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return vm(o)===vm(a)?Xe(o,a):vm(o)?1:-1}return Xe(n.length,e.length)}const rP=55296,oP=57343;function vm(n){const e=n.charCodeAt(0);return e>=rP&&e<=oP}function dl(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="__name__";class ds{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ne(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ds.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ds?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=ds.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Xe(e.length,t.length)}static compareSegments(e,t){const i=ds.isNumericId(e),o=ds.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ds.extractNumericId(e).compare(ds.extractNumericId(t)):qm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $r.fromString(e.substring(4,e.length-2))}}class _t extends ds{construct(e,t,i){return new _t(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new _t(t)}static emptyPath(){return new _t([])}}const aP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends ds{construct(e,t,i){return new cn(e,t,i)}static isValidIdentifier(e){return aP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NE}static keyField(){return new cn([NE])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new _e(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new _e(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new _e(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(_t.fromString(e))}static fromName(e){return new Re(_t.fromString(e).popFirst(5))}static empty(){return new Re(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(n,e,t){if(!t)throw new _e(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rw(n,e,t,i){if(e===!0&&i===!0)throw new _e(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bE(n){if(!Re.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PE(n){if(Re.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ow(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne(12329,{type:typeof n})}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qh(n);throw new _e(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n,e){const t={typeString:n};return e&&(t.value=e),t}function cc(n,e){if(!ow(n))throw new _e(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new _e(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=-62135596800,ME=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ME);return new wt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DE)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ME}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cc(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-DE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Jt("string",wt._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new wt(0,0))}static max(){return new Me(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=-1;function lP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Me.fromTimestamp(i===1e9?new wt(t+1,0):new wt(t,i));return new Jr(o,Re.empty(),e)}function uP(n){return new Jr(n.readTime,n.key,Wu)}class Jr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Jr(Me.min(),Re.empty(),Wu)}static max(){return new Jr(Me.max(),Re.empty(),Wu)}}function cP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==dP)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.reject(t)}static resolve(e){return new ce(((t,i)=>{t(e)}))}static reject(e){return new ce(((t,i)=>{i(e)}))}static waitFor(e){return new ce(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(f=>i(f)))})),u=!0,a===o&&t()}))}static or(e){let t=ce.resolve(!1);for(const i of e)t=t.next((o=>o?ce.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new ce(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const h=f;t(e[h]).next((v=>{u[h]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new ce(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function fP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function El(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=-1;function dc(n){return n==null}function ph(n){return n===0&&1/n==-1/0}function pP(n){return typeof n=="number"&&Number.isInteger(n)&&!ph(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="";function mP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kE(e)),e=gP(n.get(t),e);return kE(e)}function gP(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case aw:t+="";break;default:t+=a}}return t}function kE(n){return n+aw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ro(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t){this.comparator=e,this.root=t||_n.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Od(this.root,e,this.comparator,!1)}getReverseIterator(){return new Od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Od(this.root,e,this.comparator,!0)}}class Od{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??_n.RED,this.left=o??_n.EMPTY,this.right=a??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new _n(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return _n.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new _n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new VE(this.data.getIterator())}getIteratorFrom(e){return new VE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class VE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new ci([])}unionWith(e){let t=new nn(cn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new uw("Invalid base64 string: "+a):a}})(e);return new dn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const yP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(n){if(nt(!!n,39018),typeof n=="string"){let e=0;const t=yP.exec(n);if(nt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(n.seconds),nanos:Gt(n.nanos)}}function Gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wr(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="server_timestamp",dw="__type__",hw="__previous_value__",fw="__local_write_time__";function Pg(n){return(n?.mapValue?.fields||{})[dw]?.stringValue===cw}function Hh(n){const e=n.mapValue.fields[hw];return Pg(e)?Hh(e):e}function Xu(n){const e=Qr(n.mapValue.fields[fw].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t,i,o,a,u,d,f,h,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=v}}const mh="(default)";class hl{constructor(e,t){this.projectId=e,this.database=t||mh}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database===mh}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="__type__",vP="__max__",Fd={mapValue:{}},mw="__vector__",gh="value";function Xr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pg(n)?4:EP(n)?9007199254740991:TP(n)?10:11:Ne(28295,{value:n})}function Ts(n,e){if(n===e)return!0;const t=Xr(n);if(t!==Xr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xu(n).isEqual(Xu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Qr(o.timestampValue),d=Qr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Wr(o.bytesValue).isEqual(Wr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Gt(o.geoPointValue.latitude)===Gt(a.geoPointValue.latitude)&&Gt(o.geoPointValue.longitude)===Gt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Gt(o.integerValue)===Gt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Gt(o.doubleValue),d=Gt(a.doubleValue);return u===d?ph(u)===ph(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return dl(n.arrayValue.values||[],e.arrayValue.values||[],Ts);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(UE(u)!==UE(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Ts(u[f],d[f])))return!1;return!0})(n,e);default:return Ne(52216,{left:n})}}function Zu(n,e){return(n.values||[]).find((t=>Ts(t,e)))!==void 0}function fl(n,e){if(n===e)return 0;const t=Xr(n),i=Xr(e);if(t!==i)return Xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Gt(a.integerValue||a.doubleValue),f=Gt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return LE(n.timestampValue,e.timestampValue);case 4:return LE(Xu(n),Xu(e));case 5:return qm(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Wr(a),f=Wr(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let h=0;h<d.length&&h<f.length;h++){const v=Xe(d[h],f[h]);if(v!==0)return v}return Xe(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Xe(Gt(a.latitude),Gt(u.latitude));return d!==0?d:Xe(Gt(a.longitude),Gt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return OE(n.arrayValue,e.arrayValue);case 10:return(function(a,u){const d=a.fields||{},f=u.fields||{},h=d[gh]?.arrayValue,v=f[gh]?.arrayValue,E=Xe(h?.values?.length||0,v?.values?.length||0);return E!==0?E:OE(h,v)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Fd.mapValue&&u===Fd.mapValue)return 0;if(a===Fd.mapValue)return 1;if(u===Fd.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),h=u.fields||{},v=Object.keys(h);f.sort(),v.sort();for(let E=0;E<f.length&&E<v.length;++E){const A=qm(f[E],v[E]);if(A!==0)return A;const R=fl(d[f[E]],h[v[E]]);if(R!==0)return R}return Xe(f.length,v.length)})(n.mapValue,e.mapValue);default:throw Ne(23264,{he:t})}}function LE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=Qr(n),i=Qr(e),o=Xe(t.seconds,i.seconds);return o!==0?o:Xe(t.nanos,i.nanos)}function OE(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=fl(t[o],i[o]);if(a)return a}return Xe(t.length,i.length)}function pl(n){return Bm(n)}function Bm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Qr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Wr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Re.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Bm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Bm(t.fields[u])}`;return o+"}"})(n.mapValue):Ne(61005,{value:n})}function Wd(n){switch(Xr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hh(n);return e?16+Wd(e):16;case 5:return 2*n.stringValue.length;case 6:return Wr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Wd(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return ro(i.fields,((a,u)=>{o+=a.length+Wd(u)})),o})(n.mapValue);default:throw Ne(13486,{value:n})}}function FE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hm(n){return!!n&&"integerValue"in n}function Dg(n){return!!n&&"arrayValue"in n}function qE(n){return!!n&&"nullValue"in n}function BE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xd(n){return!!n&&"mapValue"in n}function TP(n){return(n?.mapValue?.fields||{})[pw]?.stringValue===mw}function Bu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ro(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Bu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bu(n.arrayValue.values[t]);return e}return{...n}}function EP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===vP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(t)}setAll(e){let t=cn.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=Bu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ts(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Xd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ro(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Hn(Bu(this.value))}}function gw(n){const e=[];return ro(n.fields,((t,i)=>{const o=new cn([t]);if(Xd(i)){const a=gw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new un(e,0,Me.min(),Me.min(),Me.min(),Hn.empty(),0)}static newFoundDocument(e,t,i,o){return new un(e,1,t,Me.min(),i,o,0)}static newNoDocument(e,t){return new un(e,2,t,Me.min(),Me.min(),Hn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Me.min(),Me.min(),Hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t){this.position=e,this.inclusive=t}}function HE(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Re.comparator(Re.fromName(u.referenceValue),t.key):i=fl(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function GE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ts(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t="asc"){this.field=e,this.dir=t}}function AP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{}class Kt extends yw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new wP(e,t,i):t==="array-contains"?new xP(e,i):t==="in"?new RP(e,i):t==="not-in"?new NP(e,i):t==="array-contains-any"?new bP(e,i):new Kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new CP(e,i):new IP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fl(t,this.value)):t!==null&&Xr(this.value)===Xr(t)&&this.matchesComparison(fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yi extends yw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Yi(e,t)}matches(e){return _w(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _w(n){return n.op==="and"}function vw(n){return SP(n)&&_w(n)}function SP(n){for(const e of n.filters)if(e instanceof Yi)return!1;return!0}function Gm(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+pl(n.value);if(vw(n))return n.filters.map((e=>Gm(e))).join(",");{const e=n.filters.map((t=>Gm(t))).join(",");return`${n.op}(${e})`}}function Tw(n,e){return n instanceof Kt?(function(i,o){return o instanceof Kt&&i.op===o.op&&i.field.isEqual(o.field)&&Ts(i.value,o.value)})(n,e):n instanceof Yi?(function(i,o){return o instanceof Yi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&Tw(u,o.filters[d])),!0):!1})(n,e):void Ne(19439)}function Ew(n){return n instanceof Kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${pl(t.value)}`})(n):n instanceof Yi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ew).join(" ,")+"}"})(n):"Filter"}class wP extends Kt{constructor(e,t,i){super(e,t,i),this.key=Re.fromName(i.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class CP extends Kt{constructor(e,t){super(e,"in",t),this.keys=Aw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class IP extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=Aw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Aw(n,e){return(e.arrayValue?.values||[]).map((t=>Re.fromName(t.referenceValue)))}class xP extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dg(t)&&Zu(t.arrayValue,this.value)}}class RP extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zu(this.value.arrayValue,t)}}class NP extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zu(this.value.arrayValue,t)}}class bP extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Zu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function zE(n,e=null,t=[],i=[],o=null,a=null,u=null){return new PP(n,e,t,i,o,a,u)}function Mg(n){const e=Oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Gm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),dc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>pl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>pl(i))).join(",")),e.Te=t}return e.Te}function kg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Tw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GE(n.startAt,e.startAt)&&GE(n.endAt,e.endAt)}function zm(n){return Re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DP(n,e,t,i,o,a,u,d){return new hc(n,e,t,i,o,a,u,d)}function Gh(n){return new hc(n)}function jE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Sw(n){return n.collectionGroup!==null}function Hu(n){const e=Oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new nn(cn.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new _h(a,i))})),t.has(cn.keyField().canonicalString())||e.Ie.push(new _h(cn.keyField(),i))}return e.Ie}function vs(n){const e=Oe(n);return e.Ee||(e.Ee=MP(e,Hu(n))),e.Ee}function MP(n,e){if(n.limitType==="F")return zE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new _h(o.field,a)}));const t=n.endAt?new yh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new yh(n.startAt.position,n.startAt.inclusive):null;return zE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function jm(n,e){const t=n.filters.concat([e]);return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $m(n,e,t){return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zh(n,e){return kg(vs(n),vs(e))&&n.limitType===e.limitType}function ww(n){return`${Mg(vs(n))}|lt:${n.limitType}`}function Ja(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Ew(o))).join(", ")}]`),dc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>pl(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>pl(o))).join(",")),`Target(${i})`})(vs(n))}; limitType=${n.limitType})`}function jh(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Re.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of Hu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,f){const h=HE(u,d,f);return u.inclusive?h<=0:h<0})(i.startAt,Hu(i),o)||i.endAt&&!(function(u,d,f){const h=HE(u,d,f);return u.inclusive?h>=0:h>0})(i.endAt,Hu(i),o))})(n,e)}function kP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Cw(n){return(e,t)=>{let i=!1;for(const o of Hu(n)){const a=UP(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function UP(n,e,t){const i=n.field.isKeyField()?Re.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),h=d.data.field(a);return f!==null&&h!==null?fl(f,h):Ne(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ro(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return lw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=new Ut(Re.comparator);function sr(){return VP}const Iw=new Ut(Re.comparator);function Uu(...n){let e=Iw;for(const t of n)e=e.insert(t.key,t);return e}function xw(n){let e=Iw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function jo(){return Gu()}function Rw(){return Gu()}function Gu(){return new sa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const LP=new Ut(Re.comparator),OP=new nn(Re.comparator);function Ze(...n){let e=OP;for(const t of n)e=e.add(t);return e}const FP=new nn(Xe);function qP(){return FP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function Nw(n){return{integerValue:""+n}}function BP(n,e){return pP(e)?Nw(e):Ug(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this._=void 0}}function HP(n,e,t){return n instanceof vh?(function(o,a){const u={fields:{[dw]:{stringValue:cw},[fw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Pg(a)&&(a=Hh(a)),a&&(u.fields[hw]=a),{mapValue:u}})(t,e):n instanceof ec?Pw(n,e):n instanceof tc?Dw(n,e):(function(o,a){const u=bw(o,a),d=$E(u)+$E(o.Ae);return Hm(u)&&Hm(o.Ae)?Nw(d):Ug(o.serializer,d)})(n,e)}function GP(n,e,t){return n instanceof ec?Pw(n,e):n instanceof tc?Dw(n,e):t}function bw(n,e){return n instanceof Th?(function(i){return Hm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class vh extends $h{}class ec extends $h{constructor(e){super(),this.elements=e}}function Pw(n,e){const t=Mw(e);for(const i of n.elements)t.some((o=>Ts(o,i)))||t.push(i);return{arrayValue:{values:t}}}class tc extends $h{constructor(e){super(),this.elements=e}}function Dw(n,e){let t=Mw(e);for(const i of n.elements)t=t.filter((o=>!Ts(o,i)));return{arrayValue:{values:t}}}class Th extends $h{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function $E(n){return Gt(n.integerValue||n.doubleValue)}function Mw(n){return Dg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function zP(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof ec&&o instanceof ec||i instanceof tc&&o instanceof tc?dl(i.elements,o.elements,Ts):i instanceof Th&&o instanceof Th?Ts(i.Ae,o.Ae):i instanceof vh&&o instanceof vh})(n.transform,e.transform)}class jP{constructor(e,t){this.version=e,this.transformResults=t}}class An{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Yh{}function kw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Kh(n.key,An.none()):new fc(n.key,n.data,An.none());{const t=n.data,i=Hn.empty();let o=new nn(cn.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new oo(n.key,i,new ci(o.toArray()),An.none())}}function $P(n,e,t){n instanceof fc?(function(o,a,u){const d=o.value.clone(),f=KE(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof oo?(function(o,a,u){if(!Zd(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=KE(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(Uw(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function zu(n,e,t,i){return n instanceof fc?(function(a,u,d,f){if(!Zd(a.precondition,u))return d;const h=a.value.clone(),v=JE(a.fieldTransforms,f,u);return h.setAll(v),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof oo?(function(a,u,d,f){if(!Zd(a.precondition,u))return d;const h=JE(a.fieldTransforms,f,u),v=u.data;return v.setAll(Uw(a)),v.setAll(h),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Zd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function YP(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=bw(i.transform,o||null);a!=null&&(t===null&&(t=Hn.empty()),t.set(i.field,a))}return t||null}function YE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&dl(i,o,((a,u)=>zP(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fc extends Yh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class oo extends Yh{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Uw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function KE(n,e,t){const i=new Map;nt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,GP(u,d,t[o]))}return i}function JE(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,HP(a,u,e))}return i}class Kh extends Yh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vw extends Yh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&$P(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=zu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=zu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Rw();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const f=kw(u,d);f!==null&&i.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Me.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,((t,i)=>YE(t,i)))&&dl(this.baseMutations,e.baseMutations,((t,i)=>YE(t,i)))}}class Vg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){nt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return LP})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Vg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,tt;function Lw(n){switch(n){case oe.OK:return Ne(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ne(15467,{code:n})}}function Ow(n){if(n===void 0)return ir("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Yt.OK:return oe.OK;case Yt.CANCELLED:return oe.CANCELLED;case Yt.UNKNOWN:return oe.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return oe.INTERNAL;case Yt.UNAVAILABLE:return oe.UNAVAILABLE;case Yt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Yt.NOT_FOUND:return oe.NOT_FOUND;case Yt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Yt.ABORTED:return oe.ABORTED;case Yt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Yt.DATA_LOSS:return oe.DATA_LOSS;default:return Ne(39323,{code:n})}}(tt=Yt||(Yt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new $r([4294967295,4294967295],0);function QE(n){const e=WP().encode(n),t=new JS;return t.update(e),new Uint8Array(t.digest())}function WE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $r([t,i],0),new $r([o,a],0)]}class Lg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Vu(`Invalid padding: ${t}`);if(i<0)throw new Vu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Vu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Vu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=$r.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply($r.fromNumber(i)));return o.compare(XP)===1&&(o=new $r([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=QE(e),[i,o]=WE(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Lg(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=QE(e),[i,o]=WE(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Jh(Me.min(),o,new Ut(Xe),sr(),Ze())}}class pc{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new pc(i,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Fw{constructor(e,t){this.targetId=e,this.Ce=t}}class qw{constructor(e,t,i=dn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class XE{constructor(){this.ve=0,this.Fe=ZE(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),i=Ze();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ne(38017,{changeType:a})}})),new pc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=ZE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZP{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=qd(),this.He=qd(),this.Ye=new Ut(Xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(zm(a))if(i===0){const u=new Re(a.path);this.et(t,u,un.newNoDocument(u,Me.min()))}else nt(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),f=d?this.ct(d,e,u):1;if(f!==0){this.it(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Wr(i).toUint8Array()}catch(f){if(f instanceof uw)return Wo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new Lg(u,o,a)}catch(f){return Wo(f instanceof Vu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&zm(d.target)){const f=new Re(d.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,un.newNoDocument(f,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=Ze();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Jh(e,t,this.Ye,this.je,i);return this.je=sr(),this.Je=qd(),this.He=qd(),this.Ye=new Ut(Xe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new XE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new nn(Xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new nn(Xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qd(){return new Ut(Re.comparator)}function ZE(){return new Ut(Re.comparator)}const eD={asc:"ASCENDING",desc:"DESCENDING"},tD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nD={and:"AND",or:"OR"};class iD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ym(n,e){return n.useProto3Json||dc(e)?e:{value:e}}function Eh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sD(n,e){return Eh(n,e.toTimestamp())}function di(n){return nt(!!n,49232),Me.fromTimestamp((function(t){const i=Qr(t);return new wt(i.seconds,i.nanos)})(n))}function Og(n,e){return Km(n,e).canonicalString()}function Km(n,e){const t=(function(o){return new _t(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Hw(n){const e=_t.fromString(n);return nt(Kw(e),10190,{key:e.toString()}),e}function Ah(n,e){return Og(n.databaseId,e.path)}function ju(n,e){const t=Hw(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re(zw(t))}function Gw(n,e){return Og(n.databaseId,e)}function rD(n){const e=Hw(n);return e.length===4?_t.emptyPath():zw(e)}function Jm(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zw(n){return nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function e0(n,e,t){return{name:Ah(n,e),fields:t.value.mapValue.fields}}function oD(n,e){return"found"in e?(function(i,o){nt(!!o.found,43571),o.found.name,o.found.updateTime;const a=ju(i,o.found.name),u=di(o.found.updateTime),d=o.found.createTime?di(o.found.createTime):Me.min(),f=new Hn({mapValue:{fields:o.found.fields}});return un.newFoundDocument(a,u,d,f)})(n,e):"missing"in e?(function(i,o){nt(!!o.missing,3894),nt(!!o.readTime,22933);const a=ju(i,o.missing),u=di(o.readTime);return un.newNoDocument(a,u)})(n,e):Ne(7234,{result:e})}function aD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ne(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,v){return h.useProto3Json?(nt(v===void 0||typeof v=="string",58123),dn.fromBase64String(v||"")):(nt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),dn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const v=h.code===void 0?oe.UNKNOWN:Ow(h.code);return new _e(v,h.message||"")})(u);t=new qw(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=ju(n,i.document.name),a=di(i.document.updateTime),u=i.document.createTime?di(i.document.createTime):Me.min(),d=new Hn({mapValue:{fields:i.document.fields}}),f=un.newFoundDocument(o,a,u,d),h=i.targetIds||[],v=i.removedTargetIds||[];t=new eh(h,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=ju(n,i.document),a=i.readTime?di(i.readTime):Me.min(),u=un.newNoDocument(o,a),d=i.removedTargetIds||[];t=new eh([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=ju(n,i.document),a=i.removedTargetIds||[];t=new eh([],a,o,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new QP(o,a),d=i.targetId;t=new Fw(d,u)}}return t}function jw(n,e){let t;if(e instanceof fc)t={update:e0(n,e.key,e.value)};else if(e instanceof Kh)t={delete:Ah(n,e.key)};else if(e instanceof oo)t={update:e0(n,e.key,e.data),updateMask:gD(e.fieldMask)};else{if(!(e instanceof Vw))return Ne(16599,{Vt:e.type});t={verify:Ah(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof vh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ec)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof tc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Th)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ne(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:sD(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ne(27497)})(n,e.precondition)),t}function lD(n,e){return n&&n.length>0?(nt(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?di(o.updateTime):di(a);return u.isEqual(Me.min())&&(u=di(a)),new jP(u,o.transformResults||[])})(t,e)))):[]}function uD(n,e){return{documents:[Gw(n,e.path)]}}function cD(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Gw(n,o);const a=(function(h){if(h.length!==0)return Yw(Yi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((v=>(function(A){return{field:Qa(A.field),direction:fD(A.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Ym(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function dD(n){let e=rD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){nt(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(E){const A=$w(E);return A instanceof Yi&&vw(A)?A.getFilters():[A]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((A=>(function(L){return new _h(Wa(L.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,dc(A)?null:A})(t.limit));let f=null;t.startAt&&(f=(function(E){const A=!!E.before,R=E.values||[];return new yh(R,A)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const A=!E.before,R=E.values||[];return new yh(R,A)})(t.endAt)),DP(e,o,u,a,d,"F",f,h)}function hD(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $w(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Wa(t.unaryFilter.field);return Kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Wa(t.unaryFilter.field);return Kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Wa(t.unaryFilter.field);return Kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Wa(t.unaryFilter.field);return Kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Kt.create(Wa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Yi.create(t.compositeFilter.filters.map((i=>$w(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(n):Ne(30097,{filter:n})}function fD(n){return eD[n]}function pD(n){return tD[n]}function mD(n){return nD[n]}function Qa(n){return{fieldPath:n.canonicalString()}}function Wa(n){return cn.fromServerFormat(n.fieldPath)}function Yw(n){return n instanceof Kt?(function(t){if(t.op==="=="){if(BE(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NAN"}};if(qE(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BE(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NOT_NAN"}};if(qE(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qa(t.field),op:pD(t.op),value:t.value}}})(n):n instanceof Yi?(function(t){const i=t.getFilters().map((o=>Yw(o)));return i.length===1?i[0]:{compositeFilter:{op:mD(t.op),filters:i}}})(n):Ne(54877,{filter:n})}function gD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Kw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t,i,o,a=Me.min(),u=Me.min(),d=dn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.yt=e}}function _D(n){const e=dD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$m(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.Cn=new TD}addToCollectionParentIndex(e,t){return this.Cn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Jr.min())}updateCollectionGroup(e,t,i){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class TD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new nn(_t.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new nn(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jw=41943040;class Jn{static withCacheSize(e){return new Jn(e,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(Jw,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ml(0)}static cr(){return new ml(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="LruGarbageCollector",ED=1048576;function i0([n,e],[t,i]){const o=Xe(n,t);return o===0?Xe(e,i):o}class AD{constructor(e){this.Ir=e,this.buffer=new nn(i0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();i0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SD{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(n0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){El(t)?ve(n0,"Ignoring IndexedDB error during garbage collection: ",t):await Tl(t)}await this.Vr(3e5)}))}}class wD{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ce.resolve(Bh.ce);const i=new AD(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(t0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,d,f,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),Ka()<=We.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${E} documents in `+(h-f)+`ms
Total Duration: ${h-v}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function CD(n,e){return new wD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.changes=new sa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ce.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&zu(i.mutation,o,ci.empty(),wt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ze()){const o=jo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=Uu();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=jo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ze())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=sr();const u=Gu(),d=(function(){return Gu()})();return t.forEach(((f,h)=>{const v=i.get(h.key);o.has(h.key)&&(v===void 0||v.mutation instanceof oo)?a=a.insert(h.key,h):v!==void 0?(u.set(h.key,v.mutation.getFieldMask()),zu(v.mutation,h,v.mutation.getFieldMask(),wt.now())):u.set(h.key,ci.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,v)=>u.set(h,v))),t.forEach(((h,v)=>d.set(h,new xD(v,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Gu();let o=new Ut(((u,d)=>u-d)),a=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let v=i.get(f)||ci.empty();v=d.applyToLocalView(h,v),i.set(f,v);const E=(o.get(d.batchId)||Ze()).add(f);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),h=f.key,v=f.value,E=Rw();v.forEach((A=>{if(!a.has(A)){const R=kw(t.get(A),i.get(A));R!==null&&E.set(A,R),a=a.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ce.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Re.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):ce.resolve(jo());let d=Wu,f=a;return u.next((h=>ce.forEach(h,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?ce.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{f=f.insert(v,A)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,Ze()))).next((v=>({batchId:d,changes:xw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((i=>{let o=Uu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=Uu();return this.indexManager.getCollectionParents(e,a).next((d=>ce.forEach(d,(f=>{const h=(function(E,A){return new hc(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((v=>{v.forEach(((E,A)=>{u=u.insert(E,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((f,h)=>{const v=h.getKey();u.get(v)===null&&(u=u.insert(v,un.newInvalidDocument(v)))}));let d=Uu();return u.forEach(((f,h)=>{const v=a.get(f);v!==void 0&&zu(v.mutation,h,ci.empty(),wt.now()),jh(t,h)&&(d=d.insert(f,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ce.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:di(o.createTime)}})(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:_D(o.bundledQuery),readTime:di(o.readTime)}})(t)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.overlays=new Ut(Re.comparator),this.qr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const i=jo();return ce.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),ce.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),ce.resolve()}getOverlaysForCollection(e,t,i){const o=jo(),a=t.length+1,u=new Re(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new Ut(((h,v)=>h-v));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let v=a.get(h.largestBatchId);v===null&&(v=jo(),a=a.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const d=jo(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,v)=>d.set(h,v))),!(d.size()>=o)););return ce.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new JP(t,i));let a=this.qr.get(t);a===void 0&&(a=Ze(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this.Qr=new nn(ln.$r),this.Ur=new nn(ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new ln(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new ln(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Re(new _t([])),i=new ln(t,e),o=new ln(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Re(new _t([])),i=new ln(t,e),o=new ln(t,e+1);let a=Ze();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new ln(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class ln{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Re.comparator(e.key,t.key)||Xe(e.Yr,t.Yr)}static Kr(e,t){return Xe(e.Yr,t.Yr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new nn(ln.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new KP(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new ln(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,t){return ce.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return ce.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?bg:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new ln(t,0),o=new ln(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const d=this.Xr(u.Yr);a.push(d)})),ce.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nn(Xe);return t.forEach((o=>{const a=new ln(o,0),u=new ln(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),ce.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Re.isDocumentKey(a)||(a=a.child(""));const u=new ln(new Re(a),0);let d=new nn(Xe);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(f.Yr)),!0)}),u),ce.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ce.forEach(t.mutations,(o=>{const a=new ln(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new ln(t,0),o=this.Zr.firstAfterOrEqual(i);return ce.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.ri=e,this.docs=(function(){return new Ut(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ce.resolve(i?i.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let i=sr();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():un.newInvalidDocument(o))})),ce.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=sr();const u=t.path,d=new Re(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:h,value:{document:v}}=f.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||cP(uP(v),i)<=0||(o.has(v.key)||jh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ce.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ne(9500)}ii(e,t){return ce.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new kD(this)}getSize(e){return ce.resolve(this.size)}}class kD extends ID{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ce.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.persistence=e,this.si=new sa((t=>Mg(t)),kg),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new Fg,this.targetCount=0,this.ai=ml.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ce.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ml(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Pr(t),ce.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ce.waitFor(a).next((()=>o))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ce.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ce.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),ce.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ce.resolve(i)}containsKey(e,t){return ce.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Bh(0),this.li=!1,this.li=!0,this.hi=new PD,this.referenceDelegate=e(this),this.Pi=new UD(this),this.indexManager=new vD,this.remoteDocumentCache=(function(o){return new MD(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new yD(t),this.Ii=new ND(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new DD(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const o=new VD(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return ce.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class VD extends hP{constructor(e){super(),this.currentSequenceNumber=e}}class qg{constructor(e){this.persistence=e,this.Ri=new Fg,this.Vi=null}static mi(e){return new qg(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ce.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,(i=>{const o=Re.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Me.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ce.or([()=>ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Sh{constructor(e,t){this.persistence=e,this.pi=new sa((i=>mP(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=CD(this,t)}static mi(e,t){return new Sh(e,t)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ce.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?ce.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Me.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ce.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ce.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ce.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wd(e.data.value)),t}br(e,t,i){return ce.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ce.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ze(),o=Ze();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Bg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wR()?8:fP(Dn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new LD;return this.Ss(e,t,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Ka()<=We.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Ja(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(Ka()<=We.DEBUG&&ve("QueryEngine","Query:",Ja(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ka()<=We.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Ja(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(t))):ce.resolve())}ys(e,t){if(jE(t))return ce.resolve(null);let i=vs(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=$m(t,null,"F"),i=vs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ze(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((f=>{const h=this.Ds(t,d);return this.Cs(t,h,u,f.readTime)?this.ys(e,$m(t,null,"F")):this.vs(e,h,t,f)}))))})))))}ws(e,t,i,o){return jE(t)||o.isEqual(Me.min())?ce.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?ce.resolve(null):(Ka()<=We.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ja(t)),this.vs(e,u,t,lP(o,Wu)).next((d=>d)))}))}Ds(e,t){let i=new nn(Cw(e));return t.forEach(((o,a)=>{jh(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return Ka()<=We.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Ja(t)),this.ps.getDocumentsMatchingQuery(e,t,Jr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="LocalStore",FD=3e8;class qD{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Ut(Xe),this.xs=new sa((a=>Mg(a)),kg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function BD(n,e,t,i){return new qD(n,e,t,i)}async function Ww(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let f=Ze();for(const h of o){u.push(h.batchId);for(const v of h.mutations)f=f.add(v.key)}for(const h of a){d.push(h.batchId);for(const v of h.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(i,f).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function HD(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,f,h,v){const E=h.batch,A=E.keys();let R=ce.resolve();return A.forEach((L=>{R=R.next((()=>v.getEntry(f,L))).next((F=>{const U=h.docVersions.get(L);nt(U!==null,48541),F.version.compareTo(U)<0&&(E.applyToRemoteDocument(F,h),F.isValidDocument()&&(F.setReadTime(h.commitVersion),v.addEntry(F)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(f,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let f=Ze();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(f=f.add(d.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Xw(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function GD(n,e){const t=Oe(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const A=o.get(E);if(!A)return;d.push(t.Pi.removeMatchingKeys(a,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,v.addedDocuments,E))));let R=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(dn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),o=o.insert(E,R),(function(F,U,J){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=FD?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(A,R,v)&&d.push(t.Pi.updateTargetData(a,R))}));let f=sr(),h=Ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(zD(a,u,e.documentUpdates).next((v=>{f=v.ks,h=v.qs}))),!i.isEqual(Me.min())){const v=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return ce.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(t.Ms=o,a)))}function zD(n,e,t){let i=Ze(),o=Ze();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=sr();return t.forEach(((d,f)=>{const h=a.get(d);f.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(Me.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ve(Hg,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",f.version)})),{ks:u,qs:o}}))}function jD(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=bg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function $D(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,ce.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new Hr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Qm(n,e,t){const i=Oe(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!El(u))throw u;ve(Hg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function s0(n,e,t){const i=Oe(n);let o=Me.min(),a=Ze();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,h,v){const E=Oe(f),A=E.xs.get(v);return A!==void 0?ce.resolve(E.Ms.get(A)):E.Pi.getTargetData(h,v)})(i,u,vs(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:Me.min(),t?a:Ze()))).next((d=>(YD(i,kP(e),d),{documents:d,Qs:a})))))}function YD(n,e,t){let i=n.Os.get(e)||Me.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class r0{constructor(){this.activeTargetIds=qP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KD{constructor(){this.Mo=new r0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new r0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="ConnectivityMonitor";class a0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(o0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(o0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd=null;function Wm(){return Bd===null?Bd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bd++,"0x"+Bd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="RestConnection",QD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===mh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=Wm(),d=this.zo(e,t.toUriEncodedString());ve(Tm,`Sending RPC '${e}' ${u}:`,d,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,o,a);const{host:h}=new URL(d),v=na(h);return this.Jo(e,d,f,i,v).then((E=>(ve(Tm,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Wo(Tm,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=QD[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class ZD extends WD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=Wm();return new Promise(((d,f)=>{const h=new QS;h.setWithCredentials(!0),h.listenOnce(WS.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Qd.NO_ERROR:const E=h.getResponseJson();ve(Rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Qd.TIMEOUT:ve(Rn,`RPC '${e}' ${u} timed out`),f(new _e(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Qd.HTTP_ERROR:const A=h.getStatus();if(ve(Rn,`RPC '${e}' ${u} failed with status:`,A,"response text:",h.getResponseText()),A>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R?.error;if(L&&L.status&&L.message){const F=(function(J){const H=J.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(H)>=0?H:oe.UNKNOWN})(L.status);f(new _e(F,L.message))}else f(new _e(oe.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new _e(oe.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ve(Rn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);ve(Rn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=Wm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ew(),d=ZS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const v=a.join("");ve(Rn,`Creating RPC '${e}' stream ${o}: ${v}`,f);const E=u.createWebChannel(v,f);this.I_(E);let A=!1,R=!1;const L=new XD({Yo:U=>{R?ve(Rn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(A||(ve(Rn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),ve(Rn,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),F=(U,J,H)=>{U.listen(J,(z=>{try{H(z)}catch(se){setTimeout((()=>{throw se}),0)}}))};return F(E,ku.EventType.OPEN,(()=>{R||(ve(Rn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),F(E,ku.EventType.CLOSE,(()=>{R||(R=!0,ve(Rn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(E))})),F(E,ku.EventType.ERROR,(U=>{R||(R=!0,Wo(Rn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),L.a_(new _e(oe.UNAVAILABLE,"The operation could not be completed")))})),F(E,ku.EventType.MESSAGE,(U=>{if(!R){const J=U.data[0];nt(!!J,16349);const H=J,z=H?.error||H[0]?.error;if(z){ve(Rn,`RPC '${e}' stream ${o} received error:`,z);const se=z.status;let ee=(function(P){const b=Yt[P];if(b!==void 0)return Ow(b)})(se),fe=z.message;ee===void 0&&(ee=oe.INTERNAL,fe="Unknown error status: "+se+" with message "+z.message),R=!0,L.a_(new _e(ee,fe)),E.close()}else ve(Rn,`RPC '${e}' stream ${o} received:`,J),L.u_(J)}})),F(d,XS.STAT_EVENT,(U=>{U.stat===Fm.PROXY?ve(Rn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Fm.NOPROXY&&ve(Rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Em(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n){return new iD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="PersistentStream";class Zw{constructor(e,t,i,o,a,u,d,f){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Gg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(ir(t.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new _e(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(l0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(l0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eM extends Zw{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=aD(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Me.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Me.min():u.readTime?di(u.readTime):Me.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Jm(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=zm(f)?{documents:uD(a,f)}:{query:cD(a,f).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=Bw(a,u.resumeToken);const h=Ym(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Me.min())>0){d.readTime=Eh(a,u.snapshotVersion.toTimestamp());const h=Ym(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=hD(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Jm(this.serializer),t.removeTarget=e,this.q_(t)}}class tM extends Zw{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lD(e.writeResults,e.commitTime),i=di(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Jm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>jw(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{}class iM extends nM{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Km(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(oe.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Km(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class sM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ir(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="RemoteStore";class rM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{ra(this)&&(ve(Xo,"Restarting streams for network reachability change."),await(async function(f){const h=Oe(f);h.Ea.add(4),await mc(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Wh(h)})(this))}))})),this.Ra=new sM(i,o)}}async function Wh(n){if(ra(n))for(const e of n.da)await e(!0)}async function mc(n){for(const e of n.da)await e(!1)}function eC(n,e){const t=Oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Yg(t)?$g(t):Al(t).O_()&&jg(t,e))}function zg(n,e){const t=Oe(n),i=Al(t);t.Ia.delete(e),i.O_()&&tC(t,e),t.Ia.size===0&&(i.O_()?i.L_():ra(t)&&t.Ra.set("Unknown"))}function jg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Al(n).Y_(e)}function tC(n,e){n.Va.Ue(e),Al(n).Z_(e)}function $g(n){n.Va=new ZP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Al(n).start(),n.Ra.ua()}function Yg(n){return ra(n)&&!Al(n).x_()&&n.Ia.size>0}function ra(n){return Oe(n).Ea.size===0}function nC(n){n.Va=void 0}async function oM(n){n.Ra.set("Online")}async function aM(n){n.Ia.forEach(((e,t)=>{jg(n,e)}))}async function lM(n,e){nC(n),Yg(n)?(n.Ra.ha(e),$g(n)):n.Ra.set("Unknown")}async function uM(n,e,t){if(n.Ra.set("Online"),e instanceof qw&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){ve(Xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await wh(n,i)}else if(e instanceof eh?n.Va.Ze(e):e instanceof Fw?n.Va.st(e):n.Va.tt(e),!t.isEqual(Me.min()))try{const i=await Xw(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ia.get(h);v&&a.Ia.set(h,v.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,h)=>{const v=a.Ia.get(f);if(!v)return;a.Ia.set(f,v.withResumeToken(dn.EMPTY_BYTE_STRING,v.snapshotVersion)),tC(a,f);const E=new Hr(v.target,f,h,v.sequenceNumber);jg(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ve(Xo,"Failed to raise snapshot:",i),await wh(n,i)}}async function wh(n,e,t){if(!El(e))throw e;n.Ea.add(1),await mc(n),n.Ra.set("Offline"),t||(t=()=>Xw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve(Xo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Wh(n)}))}function iC(n,e){return e().catch((t=>wh(n,t,e)))}async function Xh(n){const e=Oe(n),t=Zr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bg;for(;cM(e);)try{const o=await jD(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,dM(e,o)}catch(o){await wh(e,o)}sC(e)&&rC(e)}function cM(n){return ra(n)&&n.Ta.length<10}function dM(n,e){n.Ta.push(e);const t=Zr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function sC(n){return ra(n)&&!Zr(n).x_()&&n.Ta.length>0}function rC(n){Zr(n).start()}async function hM(n){Zr(n).ra()}async function fM(n){const e=Zr(n);for(const t of n.Ta)e.ea(t.mutations)}async function pM(n,e,t){const i=n.Ta.shift(),o=Vg.from(i,e,t);await iC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Xh(n)}async function mM(n,e){e&&Zr(n).X_&&await(async function(i,o){if((function(u){return Lw(u)&&u!==oe.ABORTED})(o.code)){const a=i.Ta.shift();Zr(i).B_(),await iC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Xh(i)}})(n,e),sC(n)&&rC(n)}async function u0(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ve(Xo,"RemoteStore received new credentials");const i=ra(t);t.Ea.add(3),await mc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Wh(t)}async function gM(n,e){const t=Oe(n);e?(t.Ea.delete(2),await Wh(t)):e||(t.Ea.add(2),await mc(t),t.Ra.set("Unknown"))}function Al(n){return n.ma||(n.ma=(function(t,i,o){const a=Oe(t);return a.sa(),new eM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:oM.bind(null,n),t_:aM.bind(null,n),r_:lM.bind(null,n),H_:uM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Yg(n)?$g(n):n.Ra.set("Unknown")):(await n.ma.stop(),nC(n))}))),n.ma}function Zr(n){return n.fa||(n.fa=(function(t,i,o){const a=Oe(t);return a.sa(),new tM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:hM.bind(null,n),r_:mM.bind(null,n),ta:fM.bind(null,n),na:pM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Xh(n)):(await n.fa.stop(),n.Ta.length>0&&(ve(Xo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Kg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jg(n,e){if(ir("AsyncQueue",`${e}: ${n}`),El(n))return new _e(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{static emptySet(e){return new rl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Re.comparator(t.key,i.key):(t,i)=>Re.comparator(t.key,i.key),this.keyedMap=Uu(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new rl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.ga=new Ut(Re.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class gl{constructor(e,t,i,o,a,u,d,f,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new gl(e,t,rl.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class _M{constructor(){this.queries=d0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Oe(t),a=o.queries;o.queries=d0(),a.forEach(((u,d)=>{for(const f of d.Sa)f.onError(i)}))})(this,new _e(oe.ABORTED,"Firestore shutting down"))}}function d0(){return new sa((n=>ww(n)),zh)}async function Qg(n,e){const t=Oe(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new yM,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Jg(u,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Xg(t)}async function Wg(n,e){const t=Oe(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function vM(n,e){const t=Oe(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.Sa)d.Fa(o)&&(i=!0);u.wa=o}}i&&Xg(t)}function TM(n,e,t){const i=Oe(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function Xg(n){n.Ca.forEach((e=>{e.next()}))}var Xm,h0;(h0=Xm||(Xm={})).Ma="default",h0.Cache="cache";class Zg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new gl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.key=e}}class aC{constructor(e){this.key=e}}class EM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=Cw(e),this.tu=new rl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new c0,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const A=o.get(v),R=jh(this.query,E)?E:null,L=!!A&&this.mutatedKeys.has(A.key),F=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let U=!1;A&&R?A.data.isEqual(R.data)?L!==F&&(i.track({type:3,doc:R}),U=!0):this.su(A,R)||(i.track({type:2,doc:R}),U=!0,(f&&this.eu(R,f)>0||h&&this.eu(R,h)<0)&&(d=!0)):!A&&R?(i.track({type:0,doc:R}),U=!0):A&&!R&&(i.track({type:1,doc:A}),U=!0,(f||h)&&(d=!0)),U&&(R?(u=u.add(R),a=F?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(R,L){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:U})}};return F(R)-F(L)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],f=this.Xa.size===0&&this.current&&!o?1:0,h=f!==this.Za;return this.Za=f,u.length!==0||h?{snapshot:new gl(this.query,e.tu,a,u,e.mutatedKeys,f===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new c0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new aC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new oC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ey="SyncEngine";class AM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class SM{constructor(e){this.key=e,this.hu=!1}}class wM{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new sa((d=>ww(d)),zh),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(Re.comparator),this.Au=new Map,this.Ru=new Fg,this.Vu={},this.mu=new Map,this.fu=ml.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CM(n,e,t=!0){const i=fC(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await lC(i,e,t,!0),o}async function IM(n,e){const t=fC(n);await lC(t,e,!0,!1)}async function lC(n,e,t,i){const o=await $D(n.localStore,vs(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await xM(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&eC(n.remoteStore,o),d}async function xM(n,e,t,i,o){n.pu=(E,A,R)=>(async function(F,U,J,H){let z=U.view.ru(J);z.Cs&&(z=await s0(F.localStore,U.query,!1).then((({documents:O})=>U.view.ru(O,z))));const se=H&&H.targetChanges.get(U.targetId),ee=H&&H.targetMismatches.get(U.targetId)!=null,fe=U.view.applyChanges(z,F.isPrimaryClient,se,ee);return p0(F,U.targetId,fe.au),fe.snapshot})(n,E,A,R);const a=await s0(n.localStore,e,!0),u=new EM(e,a.Qs),d=u.ru(a.documents),f=pc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(d,n.isPrimaryClient,f);p0(n,t,h.au);const v=new AM(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function RM(n,e,t){const i=Oe(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!zh(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Qm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&zg(i.remoteStore,o.targetId),Zm(i,o.targetId)})).catch(Tl)):(Zm(i,o.targetId),await Qm(i.localStore,o.targetId,!0))}async function NM(n,e){const t=Oe(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),zg(t.remoteStore,i.targetId))}async function bM(n,e,t){const i=LM(n);try{const o=await(function(u,d){const f=Oe(u),h=wt.now(),v=d.reduce(((R,L)=>R.add(L.key)),Ze());let E,A;return f.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let L=sr(),F=Ze();return f.Ns.getEntries(R,v).next((U=>{L=U,L.forEach(((J,H)=>{H.isValidDocument()||(F=F.add(J))}))})).next((()=>f.localDocuments.getOverlayedDocuments(R,L))).next((U=>{E=U;const J=[];for(const H of d){const z=YP(H,E.get(H.key).overlayedDocument);z!=null&&J.push(new oo(H.key,z,gw(z.value.mapValue),An.exists(!0)))}return f.mutationQueue.addMutationBatch(R,h,J,d)})).next((U=>{A=U;const J=U.applyToLocalDocumentSet(E,F);return f.documentOverlayCache.saveOverlays(R,U.batchId,J)}))})).then((()=>({batchId:A.batchId,changes:xw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,f){let h=u.Vu[u.currentUser.toKey()];h||(h=new Ut(Xe)),h=h.insert(d,f),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await gc(i,o.changes),await Xh(i.remoteStore)}catch(o){const a=Jg(o,"Failed to persist write");t.reject(a)}}async function uC(n,e){const t=Oe(n);try{const i=await GD(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?nt(u.hu,14607):o.removedDocuments.size>0&&(nt(u.hu,42227),u.hu=!1))})),await gc(t,i,e)}catch(i){await Tl(i)}}function f0(n,e,t){const i=Oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const f=Oe(u);f.onlineState=d;let h=!1;f.queries.forEach(((v,E)=>{for(const A of E.Sa)A.va(d)&&(h=!0)})),h&&Xg(f)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function PM(n,e,t){const i=Oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new Ut(Re.comparator);u=u.insert(a,un.newNoDocument(a,Me.min()));const d=Ze().add(a),f=new Jh(Me.min(),new Map,new Ut(Xe),u,d);await uC(i,f),i.du=i.du.remove(a),i.Au.delete(e),ty(i)}else await Qm(i.localStore,e,!1).then((()=>Zm(i,e,t))).catch(Tl)}async function DM(n,e){const t=Oe(n),i=e.batch.batchId;try{const o=await HD(t.localStore,e);dC(t,i,null),cC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await gc(t,o)}catch(o){await Tl(o)}}async function MM(n,e,t){const i=Oe(n);try{const o=await(function(u,d){const f=Oe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return f.mutationQueue.lookupMutationBatch(h,d).next((E=>(nt(E!==null,37113),v=E.keys(),f.mutationQueue.removeMutationBatch(h,E)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,v,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>f.localDocuments.getDocuments(h,v)))}))})(i.localStore,e);dC(i,e,t),cC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await gc(i,o)}catch(o){await Tl(o)}}function cC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function dC(n,e,t){const i=Oe(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Zm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||hC(n,i)}))}function hC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(zg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ty(n))}function p0(n,e,t){for(const i of t)i instanceof oC?(n.Ru.addReference(i.key,e),kM(n,i)):i instanceof aC?(ve(ey,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||hC(n,i.key)):Ne(19791,{wu:i})}function kM(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ve(ey,"New document in limbo: "+t),n.Eu.add(i),ty(n))}function ty(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Re(_t.fromString(e)),i=n.fu.next();n.Au.set(i,new SM(t)),n.du=n.du.insert(t,i),eC(n.remoteStore,new Hr(vs(Gh(t.path)),i,"TargetPurposeLimboResolution",Bh.ce))}}async function gc(n,e,t){const i=Oe(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,f)=>{u.push(i.pu(f,e,t).then((h=>{if((h||t)&&i.isPrimaryClient){const v=h?!h.fromCache:t?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(h){o.push(h);const v=Bg.As(f.targetId,h);a.push(v)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(f,h){const v=Oe(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ce.forEach(h,(A=>ce.forEach(A.Es,(R=>v.persistence.referenceDelegate.addReference(E,A.targetId,R))).next((()=>ce.forEach(A.ds,(R=>v.persistence.referenceDelegate.removeReference(E,A.targetId,R)))))))))}catch(E){if(!El(E))throw E;ve(Hg,"Failed to update sequence numbers: "+E)}for(const E of h){const A=E.targetId;if(!E.fromCache){const R=v.Ms.get(A),L=R.snapshotVersion,F=R.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(A,F)}}})(i.localStore,a))}async function UM(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ve(ey,"User change. New user:",e.toKey());const i=await Ww(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((f=>{f.reject(new _e(oe.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await gc(t,i.Ls)}}function VM(n,e){const t=Oe(n),i=t.Au.get(e);if(i&&i.hu)return Ze().add(i.key);{let o=Ze();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function fC(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PM.bind(null,e),e.Pu.H_=vM.bind(null,e.eventManager),e.Pu.yu=TM.bind(null,e.eventManager),e}function LM(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MM.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return BD(this.persistence,new OD,e.initialUser,this.serializer)}Cu(e){return new Qw(qg.mi,this.serializer)}Du(e){return new KD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class OM extends Ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof Sh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new SD(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new Qw((i=>Sh.mi(i,t)),this.serializer)}}class eg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>f0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UM.bind(null,this.syncEngine),await gM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _M})()}createDatastore(e){const t=Qh(e.databaseInfo.databaseId),i=(function(a){return new ZD(a)})(e.databaseInfo);return(function(a,u,d,f){return new iM(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new rM(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>f0(this.syncEngine,t,0)),(function(){return a0.v()?new a0:new JD})())}createSyncEngine(e,t){return(function(o,a,u,d,f,h,v){const E=new wM(o,a,u,d,f,h);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Oe(t);ve(Xo,"RemoteStore shutting down."),i.Ea.add(5),await mc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}eg.provider={build:()=>new eg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new _e(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,a){const u=Oe(o),d={documents:a.map((E=>Ah(u.serializer,E)))},f=await u.Ho("BatchGetDocuments",u.serializer.databaseId,_t.emptyPath(),d,a.length),h=new Map;f.forEach((E=>{const A=oD(u.serializer,E);h.set(A.key.toString(),A)}));const v=[];return a.forEach((E=>{const A=h.get(E.toString());nt(!!A,55234,{key:E}),v.push(A)})),v})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const o=Re.fromPath(i);this.mutations.push(new Vw(o,this.precondition(o)))})),await(async function(i,o){const a=Oe(i),u={writes:o.map((d=>jw(a.serializer,d)))};await a.Go("Commit",a.serializer.databaseId,_t.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ne(50498,{Gu:e.constructor.name});t=Me.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new _e(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Me.min())?An.exists(!1):An.updateTime(t):An.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Me.min()))throw new _e(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return An.updateTime(t)}return An.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,t,i,o,a){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=o,this.deferred=a,this.zu=i.maxAttempts,this.M_=new Gg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new FM(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Yu(o)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!dc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Lw(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="FirestoreClient";class BM{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Nn.UNAUTHENTICATED,this.clientId=Fh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ve(eo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ve(eo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Jg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Am(n,e){n.asyncQueue.verifyOperationInProgress(),ve(eo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Ww(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function m0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await HM(n);ve(eo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>u0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>u0(e.remoteStore,o))),n._onlineComponents=e}async function HM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(eo,"Using user provided OfflineComponentProvider");try{await Am(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Wo("Error using user provided cache. Falling back to memory cache: "+t),await Am(n,new Ch)}}else ve(eo,"Using default OfflineComponentProvider"),await Am(n,new OM(void 0));return n._offlineComponents}async function iy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(eo,"Using user provided OnlineComponentProvider"),await m0(n,n._uninitializedComponentsProvider._online)):(ve(eo,"Using default OnlineComponentProvider"),await m0(n,new eg))),n._onlineComponents}function GM(n){return iy(n).then((e=>e.syncEngine))}function zM(n){return iy(n).then((e=>e.datastore))}async function Ih(n){const e=await iy(n),t=e.eventManager;return t.onListen=CM.bind(null,e.syncEngine),t.onUnlisten=RM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NM.bind(null,e.syncEngine),t}function jM(n,e,t={}){const i=new _s;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,h){const v=new ny({next:A=>{v.Nu(),u.enqueueAndForget((()=>Wg(a,E)));const R=A.docs.has(d);!R&&A.fromCache?h.reject(new _e(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&A.fromCache&&f&&f.source==="server"?h.reject(new _e(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(A)},error:A=>h.reject(A)}),E=new Zg(Gh(d.path),v,{includeMetadataChanges:!0,qa:!0});return Qg(a,E)})(await Ih(n),n.asyncQueue,e,t,i))),i.promise}function $M(n,e,t={}){const i=new _s;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,h){const v=new ny({next:A=>{v.Nu(),u.enqueueAndForget((()=>Wg(a,E))),A.fromCache&&f.source==="server"?h.reject(new _e(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(A)},error:A=>h.reject(A)}),E=new Zg(d,v,{includeMetadataChanges:!0,qa:!0});return Qg(a,E)})(await Ih(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="firestore.googleapis.com",y0=!0;class _0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mC,this.ssl=y0}else this.host=e.host,this.ssl=e.ssl??y0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Jw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ED)throw new _e(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new iw;switch(i.type){case"firstParty":return new nP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=g0.get(t);i&&(ve("ComponentProvider","Removing Datastore"),g0.delete(t),i.terminate())})(this),Promise.resolve()}}function gC(n,e,t,i={}){n=Pn(n,Zh);const o=na(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(gg(`https://${d}`),yg("Firestore",!0)),a.host!==mC&&a.host!==d&&Wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:d,ssl:o,emulatorOptions:i};if(!Yo(f,u)&&(n._setSettings(f),i.mockUserToken)){let h,v;if(typeof i.mockUserToken=="string")h=i.mockUserToken,v=Nn.MOCK_USER;else{h=aS(i.mockUserToken,n._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new _e(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Nn(E)}n._authCredentials=new Z1(new nw(h,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ao(this.firestore,e,this._query)}}class Nt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(cc(t,Nt._jsonSchema))return new Nt(e,i||null,new Re(_t.fromString(t.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Jt("string",Nt._jsonSchemaVersion),referencePath:Jt("string")};class Ws extends ao{constructor(e,t,i){super(e,t,Gh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Re(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function En(n,e,...t){if(n=Ft(n),sw("collection","path",e),n instanceof Zh){const i=_t.fromString(e,...t);return PE(i),new Ws(n,null,i)}{if(!(n instanceof Nt||n instanceof Ws))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_t.fromString(e,...t));return PE(i),new Ws(n.firestore,null,i)}}function Be(n,e,...t){if(n=Ft(n),arguments.length===1&&(e=Fh.newId()),sw("doc","path",e),n instanceof Zh){const i=_t.fromString(e,...t);return bE(i),new Nt(n,null,new Re(i))}{if(!(n instanceof Nt||n instanceof Ws))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_t.fromString(e,...t));return bE(i),new Nt(n.firestore,n instanceof Ws?n.converter:null,new Re(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="AsyncQueue";class T0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Gg(this,"async_queue_retry"),this._c=()=>{const i=Em();i&&ve(v0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Em();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Em();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new _s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!El(e))throw e;ve(v0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ir("INTERNAL UNHANDLED ERROR: ",E0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Kg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Ne(47125,{Pc:E0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function E0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Ki extends Zh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new T0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T0(e),this._firestoreClient=void 0,await e}}}function yC(n,e){const t=typeof n=="object"?n:Tg(),i=typeof n=="string"?n:mh,o=Uh(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=sS("firestore");a&&gC(o,...a)}return o}function Sl(n){if(n._terminated)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||YM(n),n._firestoreClient}function YM(n){const e=n._freezeSettings(),t=(function(o,a,u,d){return new _P(o,a,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,pC(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new BM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const a=o?._online.build();return{_offline:o?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(dn.fromBase64String(e))}catch(t){throw new _e(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wn(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cc(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:Jt("string",Wn._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(cc(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:Jt("string",Gi._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cc(e,zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new zi(e.vectorValues);throw new _e(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:Jt("string",zi._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=/^__.*__$/;class JM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new oo(e,this.data,this.fieldMask,t,this.fieldTransforms):new fc(e,this.data,t,this.fieldTransforms)}}class _C{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new oo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:n})}}class sy{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(vC(this.Ac)&&KM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class QM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Qh(e)}Cc(e,t,i,o=!1){return new sy({Ac:e,methodName:t,Dc:i,path:cn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yc(n){const e=n._freezeSettings(),t=Qh(n._databaseId);return new QM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ry(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);oy("Data must be an object, but it was:",u,i);const d=AC(i,u);let f,h;if(a.merge)f=new ci(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const A=tg(e,E,t);if(!u.contains(A))throw new _e(oe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);wC(v,A)||v.push(A)}f=new ci(v),h=u.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,h=u.fieldTransforms;return new JM(new Hn(d),f,h)}class tf extends ef{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tf}}function TC(n,e,t,i){const o=n.Cc(1,e,t);oy("Data must be an object, but it was:",o,i);const a=[],u=Hn.empty();ro(i,((f,h)=>{const v=ay(e,f,t);h=Ft(h);const E=o.yc(v);if(h instanceof tf)a.push(v);else{const A=_c(h,E);A!=null&&(a.push(v),u.set(v,A))}}));const d=new ci(a);return new _C(u,d,o.fieldTransforms)}function EC(n,e,t,i,o,a){const u=n.Cc(1,e,t),d=[tg(e,i,t)],f=[o];if(a.length%2!=0)throw new _e(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)d.push(tg(e,a[A])),f.push(a[A+1]);const h=[],v=Hn.empty();for(let A=d.length-1;A>=0;--A)if(!wC(h,d[A])){const R=d[A];let L=f[A];L=Ft(L);const F=u.yc(R);if(L instanceof tf)h.push(R);else{const U=_c(L,F);U!=null&&(h.push(R),v.set(R,U))}}const E=new ci(h);return new _C(v,E,u.fieldTransforms)}function WM(n,e,t,i=!1){return _c(t,n.Cc(i?4:3,e))}function _c(n,e){if(SC(n=Ft(n)))return oy("Unsupported field value:",e,n),AC(n,e);if(n instanceof ef)return(function(i,o){if(!vC(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let f=_c(d,o.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=Ft(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BP(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=wt.fromDate(i);return{timestampValue:Eh(o.serializer,a)}}if(i instanceof wt){const a=new wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Eh(o.serializer,a)}}if(i instanceof Gi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wn)return{bytesValue:Bw(o.serializer,i._byteString)};if(i instanceof Nt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Og(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof zi)return(function(u,d){return{mapValue:{fields:{[pw]:{stringValue:mw},[gh]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return Ug(d.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${qh(i)}`)})(n,e)}function AC(n,e){const t={};return lw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(n,((i,o)=>{const a=_c(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function SC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof Gi||n instanceof Wn||n instanceof Nt||n instanceof ef||n instanceof zi)}function oy(n,e,t){if(!SC(t)||!ow(t)){const i=qh(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function tg(n,e,t){if((e=Ft(e))instanceof wl)return e._internalPath;if(typeof e=="string")return ay(n,e);throw xh("Field path arguments must be of type string or ",n,!1,void 0,t)}const XM=new RegExp("[~\\*/\\[\\]]");function ay(n,e,t){if(e.search(XM)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wl(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xh(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${i}`),u&&(f+=` in document ${o}`),f+=")"),new _e(oe.INVALID_ARGUMENT,d+n+f)}function wC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ly("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ZM extends Rh{data(){return super.data()}}function ly(n,e){return typeof e=="string"?ay(n,e):e instanceof wl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uy{}class IC extends uy{}function hs(n,e,...t){let i=[];e instanceof uy&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((f=>f instanceof sf)).length,d=a.filter((f=>f instanceof vc)).length;if(u>1||u>0&&d>0)throw new _e(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class vc extends IC{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new vc(e,t,i)}_apply(e){const t=this._parse(e);return xC(e._query,t),new ao(e.firestore,e.converter,jm(e._query,t))}_parse(e){const t=yc(e.firestore);return(function(a,u,d,f,h,v,E){let A;if(h.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new _e(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){w0(E,v);const L=[];for(const F of E)L.push(S0(f,a,F));A={arrayValue:{values:L}}}else A=S0(f,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||w0(E,v),A=WM(d,u,E,v==="in"||v==="not-in");return Kt.create(h,v,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nf(n,e,t){const i=e,o=ly("where",n);return vc._create(o,i,t)}class sf extends uy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const f of d)xC(u,f),u=jm(u,f)})(e._query,t),new ao(e.firestore,e.converter,jm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function S0(n,e,t){if(typeof(t=Ft(t))=="string"){if(t==="")throw new _e(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sw(e)&&t.indexOf("/")!==-1)throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(_t.fromString(t));if(!Re.isDocumentKey(i))throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return FE(n,new Re(i))}if(t instanceof Nt)return FE(n,t._key);throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(t)}.`)}function w0(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xC(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class cy{convertValue(e,t="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ro(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){const t=e.fields?.[gh].arrayValue?.values?.map((i=>Gt(i.doubleValue)));return new zi(t)}convertGeoPoint(e){return new Gi(Gt(e.latitude),Gt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Hh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){const t=Qr(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=_t.fromString(e);nt(Kw(i),9688,{name:e});const o=new hl(i.get(1),i.get(3)),a=new Re(i.popFirst(5));return o.isEqual(t)||ir(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class e2 extends cy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,t)}}class $o{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xs extends Rh{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ly("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xs._jsonSchema={type:Jt("string",Xs._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class $u extends Xs{data(e={}){return super.data(e)}}class Yr{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new $o(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new $u(this._firestore,this._userDataWriter,i.key,i,new $o(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const f=new $u(o._firestore,o._userDataWriter,d.doc.key,d.doc,new $o(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new $u(o._firestore,o._userDataWriter,d.doc.key,d.doc,new $o(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,v=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:t2(d.type),doc:f,oldIndex:h,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function t2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(n){n=Pn(n,Nt);const e=Pn(n.firestore,Ki);return jM(Sl(e),n._key).then((t=>RC(e,n,t)))}Yr._jsonSchemaVersion="firestore/querySnapshot/1.0",Yr._jsonSchema={type:Jt("string",Yr._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class rf extends cy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,t)}}function hy(n){n=Pn(n,ao);const e=Pn(n.firestore,Ki),t=Sl(e),i=new rf(e);return CC(n._query),$M(t,n._query).then((o=>new Yr(e,i,n,o)))}function vn(n,e,t){n=Pn(n,Nt);const i=Pn(n.firestore,Ki),o=dy(n.converter,e,t);return Tc(i,[ry(yc(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,An.none())])}function Gn(n,e,t,...i){n=Pn(n,Nt);const o=Pn(n.firestore,Ki),a=yc(o);let u;return u=typeof(e=Ft(e))=="string"||e instanceof wl?EC(a,"updateDoc",n._key,e,t,i):TC(a,"updateDoc",n._key,e),Tc(o,[u.toMutation(n._key,An.exists(!0))])}function Za(n){return Tc(Pn(n.firestore,Ki),[new Kh(n._key,An.none())])}function of(n,e){const t=Pn(n.firestore,Ki),i=Be(n),o=dy(n.converter,e);return Tc(t,[ry(yc(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,An.exists(!1))]).then((()=>i))}function Oi(n,...e){n=Ft(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||A0(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(A0(e[i])){const f=e[i];e[i]=f.next?.bind(f),e[i+1]=f.error?.bind(f),e[i+2]=f.complete?.bind(f)}let a,u,d;if(n instanceof Nt)u=Pn(n.firestore,Ki),d=Gh(n._key.path),a={next:f=>{e[i]&&e[i](RC(u,n,f))},error:e[i+1],complete:e[i+2]};else{const f=Pn(n,ao);u=Pn(f.firestore,Ki),d=f._query;const h=new rf(u);a={next:v=>{e[i]&&e[i](new Yr(u,h,f,v))},error:e[i+1],complete:e[i+2]},CC(n._query)}return(function(h,v,E,A){const R=new ny(A),L=new Zg(v,R,E);return h.asyncQueue.enqueueAndForget((async()=>Qg(await Ih(h),L))),()=>{R.Nu(),h.asyncQueue.enqueueAndForget((async()=>Wg(await Ih(h),L)))}})(Sl(u),d,o,a)}function Tc(n,e){return(function(i,o){const a=new _s;return i.asyncQueue.enqueueAndForget((async()=>bM(await GM(i),o,a))),a.promise})(Sl(n),e)}function RC(n,e,t){const i=t.docs.get(e._key),o=new rf(n);return new Xs(n,o,e._key,i,new $o(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={maxAttempts:5};function Lu(n,e){if((n=Ft(n)).firestore!==e)throw new _e(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yc(e)}get(e){const t=Lu(e,this._firestore),i=new e2(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return Ne(24041);const a=o[0];if(a.isFoundDocument())return new Rh(this._firestore,i,a.key,a,t.converter);if(a.isNoDocument())return new Rh(this._firestore,i,t._key,null,t.converter);throw Ne(18433,{doc:a})}))}set(e,t,i){const o=Lu(e,this._firestore),a=dy(o.converter,t,i),u=ry(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,i);return this._transaction.set(o._key,u),this}update(e,t,i,...o){const a=Lu(e,this._firestore);let u;return u=typeof(t=Ft(t))=="string"||t instanceof wl?EC(this._dataReader,"Transaction.update",a._key,t,i,o):TC(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Lu(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC extends i2{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lu(e,this._firestore),i=new rf(this._firestore);return super.get(e).then((o=>new Xs(this._firestore,i,t._key,o._document,new $o(!1,!1),t.converter)))}}function bC(n,e,t){n=Pn(n,Ki);const i={...n2,...t};return(function(a){if(a.maxAttempts<1)throw new _e(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(a,u,d){const f=new _s;return a.asyncQueue.enqueueAndForget((async()=>{const h=await zM(a);new qM(a.asyncQueue,h,d,u,f).ju()})),f.promise})(Sl(n),(o=>e(new NC(n,o))),i)}(function(e,t=!0){(function(o){vl=o})(ia),Ko(new Kr("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Ki(new eP(i.getProvider("auth-internal")),new iP(u,i.getProvider("app-check-internal")),(function(h,v){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new _e(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(h.options.projectId,v)})(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),ps(IE,xE,e),ps(IE,xE,"esm2020")})();const PC=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:cy,Bytes:Wn,CollectionReference:Ws,DocumentReference:Nt,DocumentSnapshot:Xs,FieldPath:wl,FieldValue:ef,Firestore:Ki,FirestoreError:_e,GeoPoint:Gi,Query:ao,QueryCompositeFilterConstraint:sf,QueryConstraint:IC,QueryDocumentSnapshot:$u,QueryFieldFilterConstraint:vc,QuerySnapshot:Yr,SnapshotMetadata:$o,Timestamp:wt,Transaction:NC,VectorValue:zi,_AutoId:Fh,_ByteString:dn,_DatabaseId:hl,_DocumentKey:Re,_EmptyAuthCredentialsProvider:iw,_FieldPath:cn,_cast:Pn,_logWarn:Wo,_validateIsNotUsedTogether:rw,addDoc:of,collection:En,connectFirestoreEmulator:gC,deleteDoc:Za,doc:Be,ensureFirestoreConfigured:Sl,executeWrite:Tc,getDoc:cs,getDocs:hy,getFirestore:yC,onSnapshot:Oi,query:hs,runTransaction:bC,setDoc:vn,updateDoc:Gn,where:nf},Symbol.toStringTag,{value:"Module"}));var s2="firebase",r2="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ps(s2,r2,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="firebasestorage.googleapis.com",o2="storageBucket",a2=120*1e3,l2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends As{constructor(e,t,i=0){super(Sm(e),`Firebase Storage: ${t} (${Sm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ss.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Es;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Es||(Es={}));function Sm(n){return"storage/"+n}function u2(){const n="An unknown error occurred, please check the error payload for server response.";return new Ss(Es.UNKNOWN,n)}function c2(){return new Ss(Es.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function d2(){return new Ss(Es.CANCELED,"User canceled the upload/download.")}function h2(n){return new Ss(Es.INVALID_URL,"Invalid URL '"+n+"'.")}function f2(n){return new Ss(Es.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function C0(n){return new Ss(Es.INVALID_ARGUMENT,n)}function MC(){return new Ss(Es.APP_DELETED,"The Firebase app was deleted.")}function p2(n){return new Ss(Es.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=qi.makeFromUrl(e,t)}catch{return new qi(e,"")}if(i.path==="")return i;throw f2(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),f={bucket:1,path:3};function h(se){se.path_=decodeURIComponent(se.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",R=new RegExp(`^https?://${E}/${v}/b/${o}/o${A}`,"i"),L={bucket:1,path:3},F=t===DC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",J=new RegExp(`^https?://${F}/${o}/${U}`,"i"),z=[{regex:d,indices:f,postModify:a},{regex:R,indices:L,postModify:h},{regex:J,indices:{bucket:1,path:2},postModify:h}];for(let se=0;se<z.length;se++){const ee=z[se],fe=ee.regex.exec(e);if(fe){const O=fe[ee.indices.bucket];let P=fe[ee.indices.path];P||(P=""),i=new qi(O,P),ee.postModify(i);break}}if(i==null)throw h2(e);return i}}class m2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function f(){return d===2}let h=!1;function v(...U){h||(h=!0,e.apply(null,U))}function E(U){o=setTimeout(()=>{o=null,n(R,f())},U)}function A(){a&&clearTimeout(a)}function R(U,...J){if(h){A();return}if(U){A(),v.call(null,U,...J);return}if(f()||u){A(),v.call(null,U,...J);return}i<64&&(i*=2);let z;d===1?(d=2,z=0):z=(i+Math.random())*1e3,E(z)}let L=!1;function F(U){L||(L=!0,A(),!h&&(o!==null?(U||(d=2),clearTimeout(o),E(0)):U||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,F(!0)},t),F}function y2(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(n){return n!==void 0}function I0(n,e,t,i){if(i<e)throw C0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw C0(`Invalid value for '${n}'. Expected ${t} or less.`)}function v2(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Nh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Nh||(Nh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,t,i,o,a,u,d,f,h,v,E,A=!0,R=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=v,this.connectionFactory_=E,this.retry=A,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,F)=>{this.resolve_=L,this.reject_=F,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Hd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Nh.NO_ERROR,f=a.getStatus();if(!d||T2(f,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===Nh.ABORT;i(!1,new Hd(!1,null,v));return}const h=this.successCodes_.indexOf(f)!==-1;i(!0,new Hd(h,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());_2(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=u2();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(o.canceled){const f=this.appDelete_?MC():d2();u(f)}else{const f=c2();u(f)}};this.canceled_?t(!1,new Hd(!1,null,!0)):this.backoffId_=g2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&y2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hd{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function A2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function S2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function w2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function C2(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function I2(n,e,t,i,o,a,u=!0,d=!1){const f=v2(n.urlParams),h=n.url+f,v=Object.assign({},n.headers);return w2(v,e),A2(v,t),S2(v,a),C2(v,i),new E2(h,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function R2(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t){this._service=e,t instanceof qi?this._location=t:this._location=qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new bh(e,t)}get root(){const e=new qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R2(this._location.path)}get storage(){return this._service}get parent(){const e=x2(this._location.path);if(e===null)return null;const t=new qi(this._location.bucket,e);return new bh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw p2(e)}}function x0(n,e){const t=e?.[o2];return t==null?null:qi.makeFromBucketSpec(t,n)}function N2(n,e,t,i={}){n.host=`${e}:${t}`;const o=na(e);o&&(gg(`https://${n.host}/b`),yg("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:aS(a,n.app.options.projectId))}class b2{constructor(e,t,i,o,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=DC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a2,this._maxUploadRetryTime=l2,this._requests=new Set,o!=null?this._bucket=qi.makeFromBucketSpec(o,this._host):this._bucket=x0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qi.makeFromBucketSpec(this._url,e):this._bucket=x0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){I0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){I0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bh(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new m2(MC());{const u=I2(e,this._appId,i,o,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const R0="@firebase/storage",N0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="storage";function P2(n=Tg(),e){n=Ft(n);const i=Uh(n,kC).getImmediate({identifier:e}),o=sS("storage");return o&&D2(i,...o),i}function D2(n,e,t,i={}){N2(n,e,t,i)}function M2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new b2(t,i,o,e,ia)}function k2(){Ko(new Kr(kC,M2,"PUBLIC").setMultipleInstances(!0)),ps(R0,N0,""),ps(R0,N0,"esm2020")}k2();const U2={apiKey:"AIzaSyAWRYzgUdSBHcBLKJoVFs0M-r2bI7AYD1s",authDomain:"dukaan-476221.firebaseapp.com",projectId:"dukaan-476221",storageBucket:"dukaan-476221.firebasestorage.app",messagingSenderId:"344365593313",appId:"1:344365593313:web:6846271963a55723bcbda0",measurementId:"G-PBQPEPK818"},V2="dukaan-local-dev";let Lr,ng,ig,sg;const UC=()=>(Lr||(Lr=cS(U2),ng=yC(Lr),ig=W1(Lr),sg=P2(Lr)),{app:Lr,db:ng,auth:ig,storage:sg}),ws=()=>(Lr||UC(),{app:Lr,db:ng,auth:ig,storage:sg}),Ce=V2,rg=Object.freeze(Object.defineProperty({__proto__:null,appId:Ce,getFirebaseInstances:ws,initializeFirebase:UC},Symbol.toStringTag,{value:"Module"})),VC=X.createContext(null),af=()=>{const n=X.useContext(VC);if(!n)throw new Error("useAuth must be used within AuthProvider");return n},L2=({children:n})=>{const[e,t]=X.useState(null),[i,o]=X.useState(!0),[a,u]=X.useState(null),[d,f]=X.useState(!1),[h,v]=X.useState(""),[E,A]=X.useState("+91"),[R,L]=X.useState(""),[F,U]=X.useState(""),[J,H]=X.useState(null),[z,se]=X.useState("phone"),[ee,fe]=X.useState(!1),{auth:O,db:P}=ws();X.useEffect(()=>{const le=OS(O,Te=>{Te?(console.log("[Auth] User authenticated:",Te.uid),t(Te),b(Te.uid)):(console.log("[Auth] No user authenticated"),t(null),u(null)),o(!1)});return()=>le()},[O]);const b=X.useCallback(async le=>{try{console.log("[Auth] Loading profile for UID:",le);const Te=Be(P,"artifacts",Ce,"public","data","users",le),q=await cs(Te);if(q.exists()){const ie={id:q.id,...q.data()};console.log("[Auth] Profile loaded:",ie.name,"Role:",ie.role),u(ie),f(!1);const de=window.location.search;new URLSearchParams(de).get("mode")||(ie.role==="shopkeeper"?(console.log("[Auth] Auto-redirecting shopkeeper to dashboard"),window.location.href="?mode=shopkeeper"):ie.role==="rider"&&(console.log("[Auth] Auto-redirecting rider to dashboard"),window.location.href="?mode=rider"))}else console.log("[Auth] User authenticated but no profile found for UID:",le),console.log("[Auth] Auto-showing profile setup for user without profile"),u(null),f(!0)}catch(Te){console.error("Error loading user profile:",Te),u(null)}},[P]),M=async()=>{if(!h||h.length<10){alert("Please enter a valid 10-digit phone number");return}try{const le=`${E}${h}@dukaan.app`,Te=Be(P,"artifacts",Ce,"public","data","users_by_phone",h),q=await cs(Te);if(q.exists()){const ie=q.data().uid,de=Be(P,"artifacts",Ce,"public","data","users",ie),he=await cs(de);he.exists()&&he.data().password?(fe(!1),se("password")):(console.log("[Auth] OTP-only user detected - sending OTP"),fe(!1),await k())}else fe(!0),await k()}catch(le){console.error("[Auth] Error checking user:",le),alert("Error checking user. Please try again.")}},k=async()=>{try{const le=`${E}${h}`;console.log("[Auth] Sending OTP to:",le);const Te=window.location.hostname.includes("replit.dev")?`https://${window.location.hostname}:8000`:(window.location.hostname==="localhost","http://localhost:8000"),q=await fetch(`${Te}/send-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:le})}),ie=await q.json();if(!q.ok)throw new Error(ie.detail||"Failed to send OTP");console.log("[Auth] OTP sent successfully to",le),H({phone:le}),se("otp"),alert("OTP sent to your phone!")}catch(le){console.error("[Auth] OTP send error:",le),alert(`Failed to send OTP: ${le.message}. Please try again.`)}},pe={user:e,loading:i,userProfile:a,phoneNumber:h,setPhoneNumber:v,countryCode:E,setCountryCode:A,password:R,setPassword:L,otp:F,setOtp:U,authStep:z,setAuthStep:se,isNewUser:ee,showProfileSetup:d,setShowProfileSetup:f,checkUserExists:M,handleSendOTP:k,handleVerifyOTP:async()=>{if(!F||F.length!==6){alert("Please enter a valid 6-digit OTP");return}if(!J||!J.phone){alert("Please request OTP first");return}try{console.log("[Auth] Verifying OTP for:",J.phone);const le=window.location.hostname.includes("replit.dev")?`https://${window.location.hostname}:8000`:(window.location.hostname==="localhost","http://localhost:8000"),Te=await fetch(`${le}/verify-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:J.phone,otp:F})}),q=await Te.json();if(!Te.ok)throw new Error(q.detail||"Failed to verify OTP");console.log("[Auth] OTP verified successfully:",q);const ie=Be(P,"artifacts",Ce,"public","data","users_by_phone",h),de=await cs(ie);if(de.exists()){const he=de.data().uid;console.log("[Auth] Existing user verified, UID:",he);const ye=Be(P,"artifacts",Ce,"public","data","users",he),be=await cs(ye);if(be.exists()&&be.data().password){console.log("[Auth] User has password - redirecting to password login"),alert("Phone verified! Please enter your password to continue."),se("password"),U("");return}console.log("[Auth] Existing OTP-only user - allowing seamless login");const Ee=`${E}${h}@dukaan.app`;try{const Ve=`DUKAAN_${h}_TEMP`;console.log("[Auth] Attempting sign-in for existing user");const Le=await mE(O,Ee,Ve);console.log("[Auth] Existing user signed in successfully"),f(!1),se("phone"),U(""),alert("Welcome back! Login successful.");return}catch{console.log("[Auth] Creating new email/password account for existing user");try{const Le=`DUKAAN_${h}_TEMP`,ht=`${E}${h}@dukaan.app`,ot=await pE(O,ht,Le);console.log("[Auth] Account created, user logged in:",ot.user.uid);const Vt=Be(P,"artifacts",Ce,"public","data","users",ot.user.uid);await vn(Vt,{uid:ot.user.uid,phoneNumber:`${E}${h}`,phone:`${E}${h}`,tempPassword:Le,authMethod:"fast2sms-otp",updatedAt:new Date().toISOString()},{merge:!0}),console.log("[Auth] User logged in successfully"),f(!1),se("phone"),U(""),alert(" Welcome! You are now logged in.");return}catch(Le){console.error("[Auth] Failed to create account:",Le),Le.code==="auth/operation-not-allowed"?alert(` Setup Required:

Please enable Email/Password authentication in Firebase Console:

1. Go to Firebase Console  Authentication
2. Click "Sign-in method"
3. Enable "Email/Password"

Then try again.`):Le.code==="auth/email-already-in-use"?alert("Account exists. Please contact support."):alert(`Login failed: ${Le.message}`),se("phone"),U("");return}}}console.log("[Auth] New user detected - creating email/password account");try{const he=`${E}${h}@dukaan.app`,ye=`OTP${Date.now()}${Math.random().toString(36)}`.slice(0,20);console.log("[Auth] Creating Firebase account with email:",he);const Ee=(await pE(O,he,ye)).user.uid;console.log("[Auth] New user created with UID:",Ee);const Ve=Be(P,"artifacts",Ce,"public","data","users",Ee);await vn(Ve,{uid:Ee,phone:J.phone,phoneNumber:J.phone,name:`User-${h}`,role:"customer",createdAt:new Date().toISOString(),authMethod:"fast2sms-otp",tempPassword:ye},{merge:!0}),await vn(ie,{uid:Ee}),console.log("[Auth] New user - showing profile setup"),f(!0),se("register"),U("")}catch(he){if(console.error("[Auth] Firebase account creation error:",he),he.code==="auth/email-already-in-use"){alert("Account already exists. Please use password login."),se("password"),U("");return}alert(`Failed to create account: ${he.message}`),se("phone"),U("")}}catch(le){console.error("[Auth] OTP verification error:",le),alert(`Invalid OTP: ${le.message}. Please try again.`)}},handlePasswordLogin:async()=>{if(!R||R.length<6){alert("Please enter your password");return}try{const le=`${E}${h}@dukaan.app`,Te=await mE(O,le,R);console.log("[Auth] Password login successful:",Te.user.uid),f(!1),L(""),v(""),se("phone")}catch(le){console.error("[Auth] Password login error:",le),le.code==="auth/wrong-password"||le.code==="auth/user-not-found"?alert("Incorrect phone number or password"):alert(`Login failed: ${le.message}`)}},handleCompleteRegistration:async le=>{if(console.log("[Auth] Starting registration with data:",{hasUser:!!e,uid:e?.uid,phone:`${E}${h}`,hasPassword:!!le.password}),!e){alert("Authentication session expired. Please verify OTP again."),se("phone");return}const Te=le.password&&le.password.length>=6;try{const q=`${E}${h}@dukaan.app`;console.log("[Auth] Saving user profile to Firestore...");const ie=Be(P,"artifacts",Ce,"public","data","users",e.uid),de={name:le.name,phoneNumber:`${E}${h}`,email:le.email||"",role:"customer",updatedAt:new Date().toISOString()};Te&&(de.password=le.password),(await cs(ie)).exists()||(de.createdAt=new Date().toISOString()),await vn(ie,de,{merge:!0}),console.log("[Auth] User profile saved successfully");const ye=Be(P,"artifacts",Ce,"public","data","users_by_phone",h);if(await vn(ye,{uid:e.uid,phoneNumber:`${E}${h}`},{merge:!0}),console.log("[Auth] Phone mapping saved successfully"),le.address&&le.address.street){console.log("[Auth] Saving address...");const be=Be(En(P,"artifacts",Ce,"public","data","addresses"));await vn(be,{userId:e.uid,label:"Home",street:le.address.street,city:le.address.city,state:le.address.state,pincode:le.address.pincode,isDefault:!0,createdAt:new Date().toISOString()}),console.log("[Auth] Address saved successfully")}console.log("[Auth] Registration complete!"),f(!1),se("phone"),await b(e.uid),alert("Welcome to DUKAAN! Your profile has been created successfully.")}catch(q){console.error("[Auth] Error completing registration:",q),console.error("[Auth] Error details:",q.code,q.message),alert(`Failed to save profile: ${q.message}

Please try again or contact support.`)}},handleLogout:async()=>{try{await qb(O),t(null),u(null),v(""),L(""),se("phone"),alert("Logged out successfully!")}catch(le){console.error("[Auth] Logout error:",le),alert("Failed to logout")}},handleSaveProfile:async le=>{if(!e){console.error("[Auth] No user session - cannot save profile"),alert("Session expired. Please login again."),se("phone");return}try{const Te=e.phoneNumber||le.phoneNumber||`${E}${h}`||J?.phone;if(!Te){console.error("[Auth] No phone number available"),alert("Phone number missing. Please login again."),se("phone");return}const q=Te.replace(/[^\d]/g,"").slice(-10),ie=Be(P,"artifacts",Ce,"public","data","users_by_phone",q),de=await cs(ie);if(de.exists()&&de.data().uid!==e.uid){alert("This phone number is already registered. Please use a different number or login with your existing account."),console.error("[Auth] Duplicate phone number detected:",q,"Existing UID:",de.data().uid,"Current UID:",e.uid);return}const he=Be(P,"artifacts",Ce,"public","data","users",e.uid),ye=await cs(he),be=ye.exists()?ye.data().role:null;let Ee=le.name;Ee||(Ee=`User${(await hy(En(P,"artifacts",Ce,"public","data","users"))).size+1}`,console.log("[Auth] Auto-generated username:",Ee));const Ve=Te.startsWith("+")?Te:`+${Te}`;console.log("[Auth] Saving profile with phone:",Ve);const Le={name:Ee,phoneNumber:Ve,phone:Ve,email:le.email||null,role:be||"customer",profileCompleted:le.profileCompleted||!1,updatedAt:new Date().toISOString()};ye.exists()||(Le.createdAt=new Date().toISOString()),le.password&&(Le.password=le.password),await vn(he,Le,{merge:!0}),await vn(ie,{uid:e.uid,phoneNumber:Ve}),f(!1);const ht={id:e.uid,name:Ee,phoneNumber:Ve,phone:Ve,email:le.email||null,role:be||"customer",profileCompleted:le.profileCompleted||!1};console.log("[Auth] Profile saved successfully:",ht),u(ht),le.profileCompleted?alert("Welcome to DUKAAN!  You can now start shopping."):alert("Welcome to DUKAAN! You can complete your profile anytime from the Profile tab.")}catch(Te){console.error("Error saving profile:",Te),alert("Failed to save profile. Please try again.")}}};return g.jsx(VC.Provider,{value:pe,children:n})},LC=X.createContext(null),O2=()=>{const n=X.useContext(LC);if(!n)throw new Error("useData must be used within DataProvider");return n},F2=({children:n})=>{const{user:e}=af(),{db:t,auth:i}=ws(),[o,a]=X.useState(null),[u,d]=X.useState([]),[f,h]=X.useState([]),[v,E]=X.useState([]),[A,R]=X.useState([]),[L,F]=X.useState([]),[U,J]=X.useState([]),[H,z]=X.useState([]),[se,ee]=X.useState(!0);X.useEffect(()=>{if(!i)return;const b=OS(i,M=>{a(M)});return()=>b()},[i]),X.useEffect(()=>{if(!e&&!o){ee(!1);return}ee(!0)},[e,o]),X.useEffect(()=>{if(!e&&!o)return;const b=hs(En(t,"artifacts",Ce,"public","data","categories")),M=Oi(b,k=>{const V=k.docs.map(N=>({id:N.id,...N.data()}));h(V)});return()=>M()},[e,o,t]),X.useEffect(()=>{if(!e&&!o)return;const b=hs(En(t,"artifacts",Ce,"public","data","subcategories")),M=Oi(b,k=>{const V=k.docs.map(N=>({id:N.id,...N.data()}));E(V)});return()=>M()},[e,o,t]),X.useEffect(()=>{if(!e&&!o)return;const b=hs(En(t,"artifacts",Ce,"public","data","products")),M=Oi(b,k=>{const V=k.docs.map(N=>({id:N.id,...N.data()}));d(V),ee(!1)});return()=>M()},[e,o,t]),X.useEffect(()=>{if(!e)return;const b=hs(En(t,"artifacts",Ce,"public","data","orders"),nf("userId","==",e.uid)),M=Oi(b,k=>{const V=k.docs.map(N=>({id:N.id,...N.data()}));V.sort((N,we)=>new Date(we.createdAt)-new Date(N.createdAt)),R(V)});return()=>M()},[e,t]),X.useEffect(()=>{if(!e&&!o)return;const b=hs(En(t,"artifacts",Ce,"public","data","orders")),M=Oi(b,k=>{const V=k.docs.map(N=>({id:N.id,...N.data()}));V.sort((N,we)=>new Date(we.createdAt)-new Date(N.createdAt)),F(V)});return()=>M()},[e,o,t]),X.useEffect(()=>{if(!e&&!o)return;const b=hs(En(t,"artifacts",Ce,"public","data","users")),M=Oi(b,k=>{const V=k.docs.map(N=>({id:N.id,...N.data()}));J(V)});return()=>M()},[e,o,t]),X.useEffect(()=>{if(!e&&!o)return;const b=hs(En(t,"artifacts",Ce,"public","data","riders")),M=Oi(b,k=>{const V=k.docs.map(N=>({id:N.id,...N.data()}));z(V)});return()=>M()},[e,o,t]);const fe=X.useCallback(async(b,M,k=null)=>{try{const V=Be(t,"artifacts",Ce,"public","data","orders",b),N={deliveryMethod:M,updatedAt:new Date().toISOString()};if(M==="pickup")N.deliveryAddress="Store Pickup",N.deliveryInstructions="",N.selectedAddressId=null;else{if(!k){alert("Please select a delivery address");return}N.deliveryAddress=k.fullAddress||`${k.street}, ${k.city}, ${k.state} ${k.pincode}`,N.deliveryInstructions=k.deliveryInstructions||"",N.selectedAddressId=k.id}await Gn(V,N),alert(`Order type changed to ${M==="pickup"?"Store Pickup":"Home Delivery"} successfully!`)}catch(V){console.error("Error changing delivery method:",V),alert("Failed to change order type. Please try again.")}},[t]),O=X.useCallback(async(b,M)=>{try{const k=Be(t,"artifacts",Ce,"public","data","orders",b);await Gn(k,{status:"cancelled",cancellationReason:M||"Customer cancelled",updatedAt:new Date().toISOString()}),alert("Order cancelled successfully!")}catch(k){console.error("Error cancelling order:",k),alert("Failed to cancel order. Please try again.")}},[t]),P={products:u,categoriesData:f,subcategoriesData:v,orders:A,allOrders:L,allUsers:U,allRiders:H,loading:se,handleChangeDeliveryMethod:fe,handleCancelOrder:O};return g.jsx(LC.Provider,{value:P,children:n})},q2=async(n,e)=>{const t=new Date,i=5.5*60*60*1e3,a=new Date(t.getTime()+i).toISOString().split("T")[0].replace(/-/g,""),u=Be(n,"artifacts",e,"public","meta","orderCounters",a);try{return await bC(n,async f=>{const h=await f.get(u);let v=1;return h.exists()&&(v=(h.data().counter||0)+1),f.set(u,{counter:v,date:a},{merge:!0}),`DKN-${v.toString().padStart(3,"0")}`})}catch(d){throw console.error("CRITICAL: Failed to generate order number with transaction:",d),new Error("Failed to generate order number. Please check your internet connection and try again.")}},OC=X.createContext(null),B2=()=>{const n=X.useContext(OC);if(!n)throw new Error("useCart must be used within CartProvider");return n},H2=({children:n})=>{const{user:e,userProfile:t}=af(),{db:i}=ws(),[o,a]=X.useState({}),[u,d]=X.useState("delivery"),[f,h]=X.useState(null),v=X.useCallback((L,F=1)=>{a(U=>{const H=(U[L.id]?.quantity||0)+F;if(H<=0){const z={...U};return delete z[L.id],z}return{...U,[L.id]:{...L,quantity:H}}})},[]),E=X.useCallback(()=>{a({})},[]),A=X.useCallback(async(L,F,U="en")=>{if(Object.keys(o).length===0)return;if(!t||!t.phoneNumber){alert("Please set up your profile first (Profile tab  Add your details)"),F("Profile");return}if(!t.profileCompleted){alert(`Please complete your profile before placing an order.

Go to Profile  Edit your name and details.`),F("Profile");return}if(u==="delivery"){if(L.length===0){alert("Please add a delivery address first (Profile tab  Manage Addresses)"),F("Profile");return}if(!f){alert("Please select a delivery address");return}}const J=Object.values(o),H=J.reduce((z,se)=>{const ee=se.discountedPrice!==""&&se.discountedPrice!=null?Number(se.discountedPrice):null,fe=Number(se.price)||0,O=ee??fe,P=Number(se.quantity)||0;return z+O*P},0);try{const z=await q2(i,Ce),se={orderNumber:z,userId:e.uid,customerName:t.name||"Customer",customerPhone:t.phoneNumber||"",customerLanguage:U,items:J.map(ee=>{const fe=Number(ee.price)||0,O=ee.discountedPrice!==""&&ee.discountedPrice!=null?Number(ee.discountedPrice):null,P=O??fe;return{id:ee.id||"",name:ee.name||"",nameEn:ee.nameEn||ee.name||"",nameTe:ee.nameTe||ee.name||"",originalPrice:fe,discountedPrice:O,price:P,quantity:Number(ee.quantity)||0,imageUrl:ee.imageUrl||"",weight:ee.weight||"",category:ee.category||""}}),total:H,totalSavings:J.reduce((ee,fe)=>{const O=Number(fe.price)||0,P=fe.discountedPrice!==""&&fe.discountedPrice!=null?Number(fe.discountedPrice):null,b=Number(fe.quantity)||0;return P!=null&&P<O?ee+(O-P)*b:ee},0),status:"pending",deliveryMethod:u||"delivery",deliveryAddress:u==="delivery"?f?.fullAddress||"":"Store Pickup",deliveryInstructions:u==="delivery"&&f?.deliveryInstructions||"",selectedAddressId:u==="delivery"&&f?.id?f.id:null,deliveryLatitude:u==="delivery"&&f?.latitude?f.latitude:null,deliveryLongitude:u==="delivery"&&f?.longitude?f.longitude:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await of(En(i,"artifacts",Ce,"public","data","orders"),se),a({}),F("Orders"),alert(`Order placed successfully! Order Number: ${z}`)}catch(z){console.error("Error placing order:",z),alert(z.message||"Failed to place order. Please try again.")}},[o,e,t,u,f,i]),R={cartItems:o,deliveryMethod:u,setDeliveryMethod:d,selectedAddress:f,setSelectedAddress:h,handleAddToCart:v,clearCart:E,handleCheckout:A};return g.jsx(OC.Provider,{value:R,children:n})},FC=X.createContext(null),G2=()=>{const n=X.useContext(FC);if(!n)throw new Error("useAddress must be used within AddressProvider");return n},z2=({children:n})=>{const{user:e}=af(),{db:t}=ws(),[i,o]=X.useState([]),[a,u]=X.useState(!1),[d,f]=X.useState(!1),[h,v]=X.useState(null);X.useEffect(()=>{if(!e)return;const F=hs(En(t,"artifacts",Ce,"public","data","addresses"),nf("userId","==",e.uid)),U=Oi(F,J=>{const H=J.docs.map(z=>({id:z.id,...z.data()}));o(H)});return()=>U()},[e,t]);const L={userAddresses:i,showAddressManager:a,setShowAddressManager:u,showAddressForm:d,setShowAddressForm:f,editingAddress:h,setEditingAddress:v,handleSaveAddress:async F=>{if(e)try{h?.id?(await Gn(Be(t,"artifacts",Ce,"public","data","addresses",h.id),{...F,updatedAt:new Date().toISOString()}),alert("Address updated successfully!")):(await of(En(t,"artifacts",Ce,"public","data","addresses"),{...F,userId:e.uid,isDefault:i.length===0,createdAt:new Date().toISOString()}),alert("Address added successfully!")),f(!1),v(null)}catch(U){console.error("Error saving address:",U),alert("Failed to save address. Please try again.")}},handleDeleteAddress:async F=>{if(!(!e||!window.confirm("Are you sure you want to delete this address?")))try{await Za(Be(t,"artifacts",Ce,"public","data","addresses",F)),alert("Address deleted successfully!")}catch(J){console.error("Error deleting address:",J),alert("Failed to delete address. Please try again.")}},handleSetDefaultAddress:async F=>{if(e)try{const U=[];i.forEach(J=>{const H=Be(t,"artifacts",Ce,"public","data","addresses",J.id);U.push(Gn(H,{isDefault:!1}))}),await Promise.all(U),await Gn(Be(t,"artifacts",Ce,"public","data","addresses",F),{isDefault:!0}),await Gn(Be(t,"artifacts",Ce,"public","data","users",e.uid),{defaultAddressId:F}),alert("Default address updated!")}catch(U){console.error("Error setting default address:",U),alert("Failed to set default address. Please try again.")}}};return g.jsx(FC.Provider,{value:L,children:n})},qC=X.createContext(null),j2=()=>{const n=X.useContext(qC);if(!n)throw new Error("useRider must be used within RiderProvider");return n},$2=({children:n})=>{const{db:e,auth:t}=ws(),[i,o]=X.useState(null),[a,u]=X.useState(!0);X.useEffect(()=>{const A=localStorage.getItem("riderId");A?d(A):u(!1)},[]);const d=async A=>{try{const R=await cs(Be(e,"artifacts",Ce,"public","data","riders",A));R.exists()&&o({id:R.id,...R.data()}),u(!1)}catch(R){console.error("Error loading rider:",R),u(!1)}},E={rider:i,loading:a,loginRider:async(A,R)=>{try{const L=hs(En(e,"artifacts",Ce,"public","data","riders"),nf("phone","==",A));return new Promise((F,U)=>{const J=Oi(L,H=>{if(J(),H.empty){U(new Error("No rider found with this phone number"));return}const z=H.docs[0],se=z.data();if(se.password!==R){U(new Error("Invalid password"));return}const ee={id:z.id,...se};o(ee),localStorage.setItem("riderId",z.id),fE(t).catch(console.error),F(ee)},H=>{J(),U(H)})})}catch(L){throw console.error("Rider login error:",L),L}},logoutRider:()=>{o(null),localStorage.removeItem("riderId")},registerRider:async A=>{try{const R=`rider_${Date.now()}`;await vn(Be(e,"artifacts",Ce,"public","data","riders",R),{...A,createdAt:new Date().toISOString(),totalOrders:0,activeOrders:0});const L={id:R,...A};return o(L),localStorage.setItem("riderId",R),await fE(t),L}catch(R){throw console.error("Rider registration error:",R),R}}};return g.jsx(qC.Provider,{value:E,children:n})},Xn={en:{appName:"DUKAAN",search:"Search for groceries, services...",deliveryTo:"Delivery to",categories:{groceries:"Groceries",vegetables:"Vegetables",milk:"Milk",snacks:"Snacks",medicines:"Medicines",electronics:"Electronics"},popularProducts:"Popular Products",addToCart:"Add to Cart",cart:"Cart",orders:"Orders",profile:"Profile",home:"Home",viewCart:"View Cart",items:"Items",checkout:"Checkout",total:"Total",placeOrder:"Place Order",myOrders:"My Orders",logout:"Logout",empty:"Empty",noOrders:"No orders yet",orderPlaced:"Order Placed",processing:"Processing",delivered:"Delivered",admin:"Admin",addProduct:"Add Product",productName:"Product Name",productPrice:"Price",productWeight:"Weight",productImage:"Image URL",category:"Category",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",orderHistory:"Order History",totalOrders:"Total Orders",totalSpent:"Total Spent",enterAdminCode:"Enter Admin Code",adminPanel:"Admin Panel",manageProducts:"Manage Products",shopkeeperDashboard:"Shopkeeper Dashboard",incomingOrders:"Incoming Orders",orderDetails:"Order Details",customer:"Customer",updateStatus:"Update Status",markProcessing:"Mark as Processing",markDelivered:"Mark as Delivered",noIncomingOrders:"No orders yet",ordersTab:"Orders",productsTab:"Products",outOfStock:"Out of Stock",pending:"Pending",accepted:"Accepted",readyForPickup:"Ready for Pickup",outForDelivery:"Out for Delivery",completed:"Completed",cancelled:"Cancelled",voiceSearchResults:"Voice Search Results",searchResults:"Search Results",noProductsFound:"No products found for",noPopularProducts:"No popular products yet. Visit Shopkeeper Dashboard to mark products as popular.",searchingProducts:"Searching for products...",aiSearching:"AI searching...",productNameEn:"Product Name (English)",productNameTe:"Product Name (Telugu)",add:"Add",remove:"Remove",close:"Close",back:"Back",confirm:"Confirm",loading:"Loading...",error:"Error",success:"Success",unavailablePickupDelivery:"unavailable for pickup/delivery",noActiveOrders:"No active orders",activeOrders:"Active Orders",orderDate:"Order Date",qty:"Qty",each:"each",cancellationReason:"Cancellation Reason",homeDelivery:"Home Delivery",storePickup:"Store Pickup",orderTotal:"Order Total",orderID:"Order ID",status:"Status",customerPhone:"Customer Phone",deliveryDetails:"Delivery Details",instructions:"Instructions",itemsOrdered:"Items Ordered",chooseDeliveryMethod:"Choose Delivery Method",deliveryAddress:"Delivery Address",noSavedAddresses:"No saved addresses",addAddress:"Add Address",manageAddresses:"Manage Addresses",confirmOrder:"Confirm Order",proceedToCheckout:"Proceed to Checkout",selectDeliveryAddress:"Please select a delivery address",default:"Default",note:"Note",orderSummary:"Order Summary",orderReadyPickup:"Your order will be ready for pickup at the store.",moneySaved:"Money Saved",printBill:"Print Bill"},te:{appName:"",search:"  ...",deliveryTo:" ",categories:{groceries:"",vegetables:"",milk:"",snacks:"",medicines:"",electronics:""},popularProducts:" ",addToCart:" ",cart:"",orders:"",profile:"",home:"",viewCart:" ",items:"",checkout:"",total:"",placeOrder:" ",myOrders:" ",logout:"",empty:"",noOrders:" ",orderPlaced:" ",processing:" ",delivered:" ",admin:"",addProduct:" ",productName:" ",productPrice:"",productWeight:"",productImage:" URL",category:"",save:" ",cancel:"",delete:"",edit:"",orderHistory:" ",totalOrders:" ",totalSpent:" ",enterAdminCode:"   ",adminPanel:" ",manageProducts:" ",shopkeeperDashboard:" ",incomingOrders:" ",orderDetails:" ",customer:"",updateStatus:"  ",markProcessing:" ",markDelivered:"  ",noIncomingOrders:" ",ordersTab:"",productsTab:"",outOfStock:" ",pending:"",accepted:"",readyForPickup:"   ",outForDelivery:" ",completed:"",cancelled:" ",voiceSearchResults:"  ",searchResults:" ",noProductsFound:"   ",noPopularProducts:"   .     .",searchingProducts:" ...",aiSearching:"AI ...",productNameEn:"  ()",productNameTe:"  ()",add:"",remove:"",close:"",back:"",confirm:"",loading:" ...",error:"",success:"",unavailablePickupDelivery:"/  ",noActiveOrders:"  ",activeOrders:" ",orderDate:" ",qty:"",each:"",cancellationReason:" ",homeDelivery:" ",storePickup:" ",orderTotal:" ",orderID:" ID",status:"",customerPhone:" ",deliveryDetails:" ",instructions:"",itemsOrdered:"  ",chooseDeliveryMethod:"  ",deliveryAddress:" ",noSavedAddresses:"   ",addAddress:" ",manageAddresses:" ",confirmOrder:" ",proceedToCheckout:" ",selectDeliveryAddress:"   ",default:"",note:"",orderSummary:" ",orderReadyPickup:"      ",moneySaved:"  ",printBill:"  "}},b0=()=>{const[n,e]=X.useState(null);return X.useEffect(()=>{(async()=>{try{const{getFirebaseInstances:i,appId:o}=await tl(async()=>{const{getFirebaseInstances:h,appId:v}=await Promise.resolve().then(()=>rg);return{getFirebaseInstances:h,appId:v}},void 0),{doc:a,getDoc:u}=await tl(async()=>{const{doc:h,getDoc:v}=await Promise.resolve().then(()=>PC);return{doc:h,getDoc:v}},void 0),{db:d}=i(),f=await u(a(d,"artifacts",o,"public","data","settings","branding"));f.exists()&&f.data().logoUrl?e(f.data().logoUrl):e("/dukaan-logo.png")}catch{console.log("Using default logo"),e("/dukaan-logo.png")}})()},[]),g.jsxs("div",{className:"flex-center p-8",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)"},children:[g.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"24px",padding:"48px",display:"flex",flexDirection:"column",alignItems:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[n?g.jsx("img",{src:n,alt:"DUKAAN Logo",style:{width:"200px",height:"200px",objectFit:"contain",marginBottom:"32px",animation:"pulse 2s ease-in-out infinite"}}):g.jsx("div",{style:{width:"200px",height:"200px",marginBottom:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsxs("h1",{style:{fontSize:"48px",fontWeight:"700",color:"#2E7D32",textAlign:"center",animation:"pulse 2s ease-in-out infinite"},children:["DUKAAN",g.jsx("br",{}),""]})}),g.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-3 border-white",style:{borderWidth:"4px",borderStyle:"solid",borderColor:"#4CAF50",borderBottomColor:"transparent",borderRadius:"50%",width:"48px",height:"48px",animation:"spin 1s linear infinite"}}),g.jsx("p",{style:{marginTop:"24px",color:"#2E7D32",fontWeight:"600",fontSize:"18px"},children:"Loading..."})]}),g.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),K2=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),P0=n=>{const e=K2(n);return e.charAt(0).toUpperCase()+e.slice(1)},BC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),J2=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=X.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...d},f)=>X.createElement("svg",{ref:f,...Q2,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:BC("lucide",o),...!a&&!J2(d)&&{"aria-hidden":"true"},...d},[...u.map(([h,v])=>X.createElement(h,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(n,e)=>{const t=X.forwardRef(({className:i,...o},a)=>X.createElement(W2,{ref:a,iconNode:e,className:BC(`lucide-${Y2(P0(n))}`,`lucide-${n}`,i),...o}));return t.displayName=P0(n),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],HC=He("bike",X2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ek=He("calendar",Z2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],nk=He("check",tk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gd=He("chevron-down",ik);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ci=He("chevron-left",sk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],zd=He("chevron-up",rk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bi=He("circle-check-big",ok);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],th=He("circle-plus",ak);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],nh=He("circle-x",lk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nc=He("clock",uk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dk=He("eye",ck);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],fk=He("house",hk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],ji=He("indian-rupee",pk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ol=He("lock",mk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],yk=He("log-in",gk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],vk=He("log-out",_k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ek=He("mail",Tk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Zo=He("map-pin",Ak);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],fy=He("mic-off",Sk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],py=He("mic",wk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M5 12h14",key:"1ays0h"}]],GC=He("minus",Ck);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],zC=He("navigation",Ik);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Tn=He("package",xk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Nk=He("pen",Rk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],rr=He("phone",bk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jC=He("plus",Pk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Mk=He("refresh-cw",Dk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],al=He("save",kk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$C=He("search",Uk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],D0=He("settings",Vk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ea=He("shopping-bag",Lk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],YC=He("shopping-cart",Ok);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ih=He("square-pen",Fk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],wm=He("star",qk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Hk=He("store",Bk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ou=He("trash-2",Gk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],jk=He("trending-up",zk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fs=He("truck",$k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Cm=He("upload",Yk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],M0=He("user-plus",Kk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hi=He("user",Jk);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oa=He("x",Qk),k0=({message:n,type:e,onClose:t})=>(X.useEffect(()=>{const i=setTimeout(t,5e3);return()=>clearTimeout(i)},[t]),g.jsxs("div",{className:`toast-notification toast-${e}`,children:[g.jsxs("div",{className:"toast-content",children:[e==="success"&&g.jsx(Bi,{className:"w-5 h-5"}),e==="info"&&g.jsx(Tn,{className:"w-5 h-5"}),g.jsx("p",{children:n})]}),g.jsx("button",{onClick:t,className:"toast-close",children:g.jsx(oa,{className:"w-4 h-4"})})]}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var yl;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(yl||(yl={}));class Im extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const Wk=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Xk=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},i=t.Plugins=t.Plugins||{},o=()=>e!==null?e.name:Wk(n),a=()=>o()!=="web",u=E=>{const A=h.get(E);return!!(A?.platforms.has(o())||d(E))},d=E=>{var A;return(A=t.PluginHeaders)===null||A===void 0?void 0:A.find(R=>R.name===E)},f=E=>n.console.error(E),h=new Map,v=(E,A={})=>{const R=h.get(E);if(R)return console.warn(`Capacitor plugin "${E}" already registered. Cannot register plugins twice.`),R.proxy;const L=o(),F=d(E);let U;const J=async()=>(!U&&L in A?U=typeof A[L]=="function"?U=await A[L]():U=A[L]:e!==null&&!U&&"web"in A&&(U=typeof A.web=="function"?U=await A.web():U=A.web),U),H=(P,b)=>{var M,k;if(F){const V=F?.methods.find(N=>b===N.name);if(V)return V.rtype==="promise"?N=>t.nativePromise(E,b.toString(),N):(N,we)=>t.nativeCallback(E,b.toString(),N,we);if(P)return(M=P[b])===null||M===void 0?void 0:M.bind(P)}else{if(P)return(k=P[b])===null||k===void 0?void 0:k.bind(P);throw new Im(`"${E}" plugin is not implemented on ${L}`,yl.Unimplemented)}},z=P=>{let b;const M=(...k)=>{const V=J().then(N=>{const we=H(N,P);if(we){const ze=we(...k);return b=ze?.remove,ze}else throw new Im(`"${E}.${P}()" is not implemented on ${L}`,yl.Unimplemented)});return P==="addListener"&&(V.remove=async()=>b()),V};return M.toString=()=>`${P.toString()}() { [capacitor code] }`,Object.defineProperty(M,"name",{value:P,writable:!1,configurable:!1}),M},se=z("addListener"),ee=z("removeListener"),fe=(P,b)=>{const M=se({eventName:P},b),k=async()=>{const N=await M;ee({eventName:P,callbackId:N},b)},V=new Promise(N=>M.then(()=>N({remove:k})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},V},O=new Proxy({},{get(P,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return F?fe:se;case"removeListener":return ee;default:return z(b)}}});return i[E]=O,h.set(E,{name:E,proxy:O,platforms:new Set([...Object.keys(A),...F?[L]:[]])}),O};return t.convertFileSrc||(t.convertFileSrc=E=>E),t.getPlatform=o,t.handleError=f,t.isNativePlatform=a,t.isPluginAvailable=u,t.registerPlugin=v,t.Exception=Im,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},Zk=n=>n.Capacitor=Xk(n),ic=Zk(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),my=ic.registerPlugin;class KC{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),i&&this.sendRetainedArgumentsForEvent(e);const u=async()=>this.removeListener(e,t);return Promise.resolve({remove:u})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){const o=this.listeners[e];if(!o){if(i){let a=this.retainedEventArguments[e];a||(a=[]),a.push(t),this.retainedEventArguments[e]=a}return}o.forEach(a=>a(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new ic.Exception(e,yl.Unimplemented)}unavailable(e="not available"){return new ic.Exception(e,yl.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const o=i.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const U0=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),V0=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class eU extends KC{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[o,a]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=V0(o).trim(),a=V0(a).trim(),t[o]=a}),t}async setCookie(e){try{const t=U0(e.key),i=U0(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),u=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${o}; path=${a}; ${u};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}my("CapacitorCookies",{web:()=>new eU});const tU=async n=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const o=i.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},i.onerror=o=>t(o),i.readAsDataURL(n)}),nU=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(o=>o.toLocaleLowerCase()).reduce((o,a,u)=>(o[a]=n[e[u]],o),{})},iU=(n,e=!0)=>n?Object.entries(n).reduce((i,o)=>{const[a,u]=o;let d,f;return Array.isArray(u)?(f="",u.forEach(h=>{d=e?encodeURIComponent(h):h,f+=`${a}=${d}&`}),f.slice(0,-1)):(d=e?encodeURIComponent(u):u,f=`${a}=${d}`),`${i}&${f}`},"").substr(1):null,sU=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),o=nU(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(o.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[u,d]of Object.entries(n.data||{}))a.set(u,d);t.body=a.toString()}else if(o.includes("multipart/form-data")||n.data instanceof FormData){const a=new FormData;if(n.data instanceof FormData)n.data.forEach((d,f)=>{a.append(f,d)});else for(const d of Object.keys(n.data))a.append(d,n.data[d]);t.body=a;const u=new Headers(t.headers);u.delete("content-type"),t.headers=u}else(o.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class rU extends KC{async request(e){const t=sU(e,e.webFetchExtra),i=iU(e.params,e.shouldEncodeUrlParams),o=i?`${e.url}?${i}`:e.url,a=await fetch(o,t),u=a.headers.get("content-type")||"";let{responseType:d="text"}=a.ok?e:{};u.includes("application/json")&&(d="json");let f,h;switch(d){case"arraybuffer":case"blob":h=await a.blob(),f=await tU(h);break;case"json":f=await a.json();break;case"document":case"text":default:f=await a.text()}const v={};return a.headers.forEach((E,A)=>{v[A]=E}),{data:f,headers:v,status:a.status,url:a.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}my("CapacitorHttp",{web:()=>new rU});const bu=my("VoiceRecorder",{web:()=>tl(()=>import("./web-Bfcipa2x.js").then(n=>n.w),[]).then(n=>new n.VoiceRecorderWeb)});class to{constructor(){this.mediaRecorder=null,this.audioChunks=[],this.stream=null,this.actualMimeType=null,this.isNative=ic.isNativePlatform(),this.nativeRecording=null,this.audioContext=null,this.analyser=null,this.silenceTimer=null,this.onAutoStop=null}static isSupported(){return ic.isNativePlatform()?!0:!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaRecorder)}async startRecording(e=null){try{if(!to.isSupported())throw new Error("FEATURE_NOT_SUPPORTED");if(this.onAutoStop=e,this.isNative){if(!(await bu.hasAudioRecordingPermission()).value&&!(await bu.requestAudioRecordingPermission()).value)throw{name:"NotAllowedError",message:"Microphone permission denied"};return await bu.startRecording(),console.log("[AudioRecorder] Native recording started"),e&&(this.silenceTimer=setTimeout(()=>{console.log("[AudioRecorder] Auto-stopping native recording after 5s"),this.onAutoStop&&this.onAutoStop()},5e3)),!0}this.stream=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:16e3,echoCancellation:!0,noiseSuppression:!0}}),this.audioChunks=[];let t=null;MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?t="audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")?t="audio/webm":MediaRecorder.isTypeSupported("audio/ogg;codecs=opus")?t="audio/ogg;codecs=opus":MediaRecorder.isTypeSupported("audio/mp4")&&(t="audio/mp4");const i=t?{mimeType:t}:{};return this.mediaRecorder=new MediaRecorder(this.stream,i),this.actualMimeType=this.mediaRecorder.mimeType||t||"audio/webm",this.mediaRecorder.ondataavailable=o=>{o.data.size>0&&this.audioChunks.push(o.data)},this.mediaRecorder.start(100),e&&this.startSilenceDetection(),console.log("[AudioRecorder] Web recording started with mimeType:",this.actualMimeType),!0}catch(t){throw console.error("[AudioRecorder] Error starting recording:",t),t}}startSilenceDetection(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext);const e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.analyser.smoothingTimeConstant=.8,e.connect(this.analyser);const t=this.analyser.frequencyBinCount,i=new Uint8Array(t);let o=Date.now();const a=20,u=1500,d=800,f=Date.now(),h=()=>{if(!this.analyser||!this.mediaRecorder||this.mediaRecorder.state!=="recording")return;if(this.analyser.getByteFrequencyData(i),i.reduce((E,A)=>E+A,0)/t<a){const E=Date.now()-o,A=Date.now()-f;if(E>u&&A>d){console.log("[AudioRecorder] Silence detected, auto-stopping..."),this.onAutoStop&&this.onAutoStop();return}}else o=Date.now();requestAnimationFrame(h)};h(),console.log("[AudioRecorder] Silence detection started")}catch(e){console.error("[AudioRecorder] Error starting silence detection:",e)}}async stopRecording(){if(this.audioContext){try{await this.audioContext.close()}catch(e){console.log("[AudioRecorder] Error closing audio context:",e)}this.audioContext=null,this.analyser=null}if(this.isNative){this.silenceTimer&&(clearTimeout(this.silenceTimer),this.silenceTimer=null);const e=await bu.stopRecording();if(!e.value||!e.value.recordDataBase64)throw new Error("No recording data received");console.log("[AudioRecorder] Native recording stopped, duration:",e.value.msDuration,"ms");const t=e.value.recordDataBase64,i=e.value.mimeType||"audio/aac",o=atob(t),a=new Uint8Array(o.length);for(let d=0;d<o.length;d++)a[d]=o.charCodeAt(d);const u=new Blob([a],{type:i});return this.actualMimeType=i,u}return new Promise((e,t)=>{if(!this.mediaRecorder||this.mediaRecorder.state==="inactive"){t(new Error("No active recording"));return}this.mediaRecorder.onstop=async()=>{try{const i=new Blob(this.audioChunks,{type:this.actualMimeType});this.stream&&(this.stream.getTracks().forEach(o=>o.stop()),this.stream=null),console.log("[AudioRecorder] Web recording stopped, blob size:",i.size,"type:",this.actualMimeType),e(i)}catch(i){t(i)}},this.mediaRecorder.stop()})}async cancel(){if(this.audioContext){try{await this.audioContext.close()}catch(e){console.log("[AudioRecorder] Error closing audio context:",e)}this.audioContext=null,this.analyser=null}if(this.isNative){try{await bu.stopRecording()}catch(e){console.log("[AudioRecorder] Cancel error (may already be stopped):",e)}return}this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop(),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.audioChunks=[]}async blobToBase64(e){return new Promise((t,i)=>{const o=new FileReader;o.onloadend=()=>{const a=o.result.split(",")[1];t(a)},o.onerror=i,o.readAsDataURL(e)})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oU,aU;function lU(){return{geminiUrl:oU,vertexUrl:aU}}function uU(n,e,t,i){var o,a;if(!n?.baseUrl){const u=lU();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aa{}function Se(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function _(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const f=n[d];if(Array.isArray(t))for(let h=0;h<f.length;h++){const v=f[h];_(v,e.slice(a+1),t[h])}else for(const h of f)_(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const f=n[d];_(f[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function p(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>p(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function cU(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let f=0;f<o.length;f++)if(o[f]==="*"){d=f;break}if(d!==-1&&a.length>d)for(let f=d;f<a.length;f++){const h=a[f];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}og(n,o,a,0,u)}}function og(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const f of d[u])og(f,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),f={};for(const h of d)f[h]=u[h];for(const[h,v]of Object.entries(f)){const E=[];for(const A of t.slice(i))A==="*"?E.push(h):E.push(A);_(u,E,v)}for(const h of d)delete u[h]}}else{const u=n;a in u&&og(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gy(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dU(n){const e={},t=p(n,["operationName"]);t!=null&&_(e,["operationName"],t);const i=p(n,["resourceName"]);return i!=null&&_(e,["_url","resourceName"],i),e}function hU(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["metadata"]);i!=null&&_(e,["metadata"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);a!=null&&_(e,["error"],a);const u=p(n,["response","generateVideoResponse"]);return u!=null&&_(e,["response"],pU(u)),e}function fU(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["metadata"]);i!=null&&_(e,["metadata"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);a!=null&&_(e,["error"],a);const u=p(n,["response"]);return u!=null&&_(e,["response"],mU(u)),e}function pU(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>gU(u))),_(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&_(e,["raiMediaFilteredCount"],i);const o=p(n,["raiMediaFilteredReasons"]);return o!=null&&_(e,["raiMediaFilteredReasons"],o),e}function mU(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>yU(u))),_(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&_(e,["raiMediaFilteredCount"],i);const o=p(n,["raiMediaFilteredReasons"]);return o!=null&&_(e,["raiMediaFilteredReasons"],o),e}function gU(n){const e={},t=p(n,["video"]);return t!=null&&_(e,["video"],TU(t)),e}function yU(n){const e={},t=p(n,["_self"]);return t!=null&&_(e,["video"],EU(t)),e}function _U(n){const e={},t=p(n,["operationName"]);return t!=null&&_(e,["_url","operationName"],t),e}function vU(n){const e={},t=p(n,["operationName"]);return t!=null&&_(e,["_url","operationName"],t),e}function TU(n){const e={},t=p(n,["uri"]);t!=null&&_(e,["uri"],t);const i=p(n,["encodedVideo"]);i!=null&&_(e,["videoBytes"],gy(i));const o=p(n,["encoding"]);return o!=null&&_(e,["mimeType"],o),e}function EU(n){const e={},t=p(n,["gcsUri"]);t!=null&&_(e,["uri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&_(e,["videoBytes"],gy(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var L0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(L0||(L0={}));var O0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(O0||(O0={}));var F0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(F0||(F0={}));var Gr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Gr||(Gr={}));var q0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(q0||(q0={}));var B0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(B0||(B0={}));var H0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(H0||(H0={}));var G0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(G0||(G0={}));var z0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(z0||(z0={}));var j0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(j0||(j0={}));var $0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($0||($0={}));var Y0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(Y0||(Y0={}));var K0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(K0||(K0={}));var J0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(J0||(J0={}));var Q0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Q0||(Q0={}));var W0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(W0||(W0={}));var Ph;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ph||(Ph={}));var X0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(X0||(X0={}));var ag;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ag||(ag={}));var Z0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Z0||(Z0={}));var eA;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(eA||(eA={}));var tA;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(tA||(tA={}));var nA;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(nA||(nA={}));var iA;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(iA||(iA={}));var sA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(sA||(sA={}));var rA;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(rA||(rA={}));var oA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(oA||(oA={}));var aA;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(aA||(aA={}));var lA;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(lA||(lA={}));var uA;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(uA||(uA={}));var cA;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(cA||(cA={}));var dA;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(dA||(dA={}));var hA;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(hA||(hA={}));var fA;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(fA||(fA={}));var pA;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(pA||(pA={}));var mA;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(mA||(mA={}));var gA;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(gA||(gA={}));var yA;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(yA||(yA={}));var _A;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(_A||(_A={}));var vA;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(vA||(vA={}));var TA;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(TA||(TA={}));var EA;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(EA||(EA={}));var AA;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(AA||(AA={}));var SA;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(SA||(SA={}));var wA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(wA||(wA={}));var CA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(CA||(CA={}));var IA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(IA||(IA={}));var xA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(xA||(xA={}));var el;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(el||(el={}));class lg{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Pu{get text(){var e,t,i,o,a,u,d,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const E=[];for(const A of(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[R,L]of Object.entries(A))R!=="text"&&R!=="thought"&&(L!==null||L!==void 0)&&E.push(R);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,h+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,t,i,o,a,u,d,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const E of(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[A,R]of Object.entries(E))A!=="inlineData"&&(R!==null||R!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,d,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if(h?.length!==0)return h}get executableCode(){var e,t,i,o,a,u,d,f,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if(v?.length!==0)return(h=v?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,d,f,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(f=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if(v?.length!==0)return(h=v?.[0])===null||h===void 0?void 0:h.output}}class RA{}class NA{}class AU{}class SU{}class wU{}class CU{}class bA{}class PA{}class DA{}class IU{}class Dh{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new Dh;let o;const a=e;return t?o=fU(a):o=hU(a),Object.assign(i,o),i}}class MA{}class kA{}class UA{}class xU{}class RU{}class NU{}class VA{}class bU{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(d))f!=="text"&&f!=="thought"&&h!==null&&u.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(u))d!=="inlineData"&&f!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class PU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function JC(n,e){const t=rt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function QC(n){return Array.isArray(n)?n.map(e=>Mh(e)):[Mh(n)]}function Mh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function WC(n){const e=Mh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function XC(n){const e=Mh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function LA(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function ZC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>LA(e)):[LA(n)]}function ug(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function OA(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function FA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function bn(n){if(n==null)throw new Error("ContentUnion is required");return ug(n)?n:{role:"user",parts:ZC(n)}}function yy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=bn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=bn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>bn(t)):[bn(e)]}function Ii(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(OA(n)||FA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[bn(n)]}const e=[],t=[],i=ug(n[0]);for(const o of n){const a=ug(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(OA(o)||FA(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:ZC(t)}),e}function DU(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Gr).includes(t[0].toUpperCase())?t[0].toUpperCase():Gr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Gr).includes(i.toUpperCase())?i.toUpperCase():Gr.TYPE_UNSPECIFIED})}}function ll(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&DU(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Gr).includes(d.toUpperCase())?d.toUpperCase():Gr.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=ll(d);else if(i.includes(u)){const f=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}f.push(ll(h))}e[u]=f}else if(o.includes(u)){const f={};for(const[h,v]of Object.entries(d))f[h]=ll(v);e[u]=f}else{if(u==="additionalProperties")continue;e[u]=d}return e}function _y(n){return ll(n)}function vy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Ty(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Cl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ll(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ll(e.response));return n}function Il(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function MU(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function or(n,e){if(typeof e!="string")throw new Error("name must be a string");return MU(n,e,"cachedContents")}function eI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function lo(n){return gy(n)}function kU(n){return n!=null&&typeof n=="object"&&"name"in n}function UU(n){return n!=null&&typeof n=="object"&&"video"in n}function VU(n){return n!=null&&typeof n=="object"&&"uri"in n}function tI(n){var e;let t;if(kU(n)&&(t=n.name),!(VU(n)&&(t=n.uri,t===void 0))&&!(UU(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function nI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function iI(n){for(const e of["models","tunedModels","publisherModels"])if(LU(n,e))return n[e];return[]}function LU(n,e){return n!==null&&typeof n=="object"&&e in n}function OU(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function FU(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=OU(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function sI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function qU(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function rI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const f=u.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function xl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function oI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BU(n){const e={},t=p(n,["responsesFile"]);t!=null&&_(e,["fileName"],t);const i=p(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>_V(u))),_(e,["inlinedResponses"],a)}const o=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),_(e,["inlinedEmbedContentResponses"],a)}return e}function HU(n){const e={},t=p(n,["predictionsFormat"]);t!=null&&_(e,["format"],t);const i=p(n,["gcsDestination","outputUriPrefix"]);i!=null&&_(e,["gcsUri"],i);const o=p(n,["bigqueryDestination","outputUri"]);return o!=null&&_(e,["bigqueryUri"],o),e}function GU(n){const e={},t=p(n,["format"]);t!=null&&_(e,["predictionsFormat"],t);const i=p(n,["gcsUri"]);i!=null&&_(e,["gcsDestination","outputUriPrefix"],i);const o=p(n,["bigqueryUri"]);if(o!=null&&_(e,["bigqueryDestination","outputUri"],o),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function sh(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["metadata","displayName"]);i!=null&&_(e,["displayName"],i);const o=p(n,["metadata","state"]);o!=null&&_(e,["state"],oI(o));const a=p(n,["metadata","createTime"]);a!=null&&_(e,["createTime"],a);const u=p(n,["metadata","endTime"]);u!=null&&_(e,["endTime"],u);const d=p(n,["metadata","updateTime"]);d!=null&&_(e,["updateTime"],d);const f=p(n,["metadata","model"]);f!=null&&_(e,["model"],f);const h=p(n,["metadata","output"]);return h!=null&&_(e,["dest"],BU(rI(h))),e}function cg(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["displayName"]);i!=null&&_(e,["displayName"],i);const o=p(n,["state"]);o!=null&&_(e,["state"],oI(o));const a=p(n,["error"]);a!=null&&_(e,["error"],a);const u=p(n,["createTime"]);u!=null&&_(e,["createTime"],u);const d=p(n,["startTime"]);d!=null&&_(e,["startTime"],d);const f=p(n,["endTime"]);f!=null&&_(e,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&_(e,["updateTime"],h);const v=p(n,["model"]);v!=null&&_(e,["model"],v);const E=p(n,["inputConfig"]);E!=null&&_(e,["src"],zU(E));const A=p(n,["outputConfig"]);return A!=null&&_(e,["dest"],HU(rI(A))),e}function zU(n){const e={},t=p(n,["instancesFormat"]);t!=null&&_(e,["format"],t);const i=p(n,["gcsSource","uris"]);i!=null&&_(e,["gcsUri"],i);const o=p(n,["bigquerySource","inputUri"]);return o!=null&&_(e,["bigqueryUri"],o),e}function jU(n,e){const t={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&_(t,["fileName"],i);const o=p(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>yV(n,u))),_(t,["requests","requests"],a)}return t}function $U(n){const e={},t=p(n,["format"]);t!=null&&_(e,["instancesFormat"],t);const i=p(n,["gcsUri"]);i!=null&&_(e,["gcsSource","uris"],i);const o=p(n,["bigqueryUri"]);if(o!=null&&_(e,["bigquerySource","inputUri"],o),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function YU(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["data"]);t!=null&&_(e,["data"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function KU(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function JU(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function QU(n){const e={},t=p(n,["content"]);t!=null&&_(e,["content"],t);const i=p(n,["citationMetadata"]);i!=null&&_(e,["citationMetadata"],WU(i));const o=p(n,["tokenCount"]);o!=null&&_(e,["tokenCount"],o);const a=p(n,["finishReason"]);a!=null&&_(e,["finishReason"],a);const u=p(n,["urlContextMetadata"]);u!=null&&_(e,["urlContextMetadata"],u);const d=p(n,["avgLogprobs"]);d!=null&&_(e,["avgLogprobs"],d);const f=p(n,["groundingMetadata"]);f!=null&&_(e,["groundingMetadata"],f);const h=p(n,["index"]);h!=null&&_(e,["index"],h);const v=p(n,["logprobsResult"]);v!=null&&_(e,["logprobsResult"],v);const E=p(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(R=>R)),_(e,["safetyRatings"],A)}return e}function WU(n){const e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),_(e,["citations"],i)}return e}function aI(n){const e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>CV(a))),_(e,["parts"],o)}const i=p(n,["role"]);return i!=null&&_(e,["role"],i),e}function XU(n,e){const t={},i=p(n,["displayName"]);if(e!==void 0&&i!=null&&_(e,["batch","displayName"],i),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function ZU(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const o=p(n,["dest"]);return e!==void 0&&o!=null&&_(e,["outputConfig"],GU(qU(o))),t}function qA(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["src"]);o!=null&&_(t,["batch","inputConfig"],jU(n,sI(n,o)));const a=p(e,["config"]);return a!=null&&XU(a,t),t}function eV(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["model"],rt(n,i));const o=p(e,["src"]);o!=null&&_(t,["inputConfig"],$U(sI(n,o)));const a=p(e,["config"]);return a!=null&&ZU(a,t),t}function tV(n,e){const t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&_(e,["batch","displayName"],i),t}function nV(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["src"]);o!=null&&_(t,["batch","inputConfig"],uV(n,o));const a=p(e,["config"]);return a!=null&&tV(a,t),t}function iV(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function sV(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function rV(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&_(e,["name"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);return a!=null&&_(e,["error"],a),e}function oV(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&_(e,["name"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);return a!=null&&_(e,["error"],a),e}function aV(n,e){const t={},i=p(e,["contents"]);if(i!=null){let a=yy(n,i);Array.isArray(a)&&(a=a.map(u=>u)),_(t,["requests[]","request","content"],a)}const o=p(e,["config"]);return o!=null&&(_(t,["_self"],lV(o,t)),cU(t,{"requests[].*":"requests[].request.*"})),t}function lV(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&_(e,["requests[]","taskType"],i);const o=p(n,["title"]);e!==void 0&&o!=null&&_(e,["requests[]","title"],o);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&_(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function uV(n,e){const t={},i=p(e,["fileName"]);i!=null&&_(t,["file_name"],i);const o=p(e,["inlinedRequests"]);return o!=null&&_(t,["requests"],aV(n,o)),t}function cV(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function dV(n,e,t){const i={},o=p(e,["systemInstruction"]);t!==void 0&&o!=null&&_(t,["systemInstruction"],aI(bn(o)));const a=p(e,["temperature"]);a!=null&&_(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&_(i,["topP"],u);const d=p(e,["topK"]);d!=null&&_(i,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&_(i,["candidateCount"],f);const h=p(e,["maxOutputTokens"]);h!=null&&_(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&_(i,["stopSequences"],v);const E=p(e,["responseLogprobs"]);E!=null&&_(i,["responseLogprobs"],E);const A=p(e,["logprobs"]);A!=null&&_(i,["logprobs"],A);const R=p(e,["presencePenalty"]);R!=null&&_(i,["presencePenalty"],R);const L=p(e,["frequencyPenalty"]);L!=null&&_(i,["frequencyPenalty"],L);const F=p(e,["seed"]);F!=null&&_(i,["seed"],F);const U=p(e,["responseMimeType"]);U!=null&&_(i,["responseMimeType"],U);const J=p(e,["responseSchema"]);J!=null&&_(i,["responseSchema"],_y(J));const H=p(e,["responseJsonSchema"]);if(H!=null&&_(i,["responseJsonSchema"],H),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=p(e,["safetySettings"]);if(t!==void 0&&z!=null){let V=z;Array.isArray(V)&&(V=V.map(N=>IV(N))),_(t,["safetySettings"],V)}const se=p(e,["tools"]);if(t!==void 0&&se!=null){let V=Il(se);Array.isArray(V)&&(V=V.map(N=>xV(Cl(N)))),_(t,["tools"],V)}const ee=p(e,["toolConfig"]);if(t!==void 0&&ee!=null&&_(t,["toolConfig"],ee),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=p(e,["cachedContent"]);t!==void 0&&fe!=null&&_(t,["cachedContent"],or(n,fe));const O=p(e,["responseModalities"]);O!=null&&_(i,["responseModalities"],O);const P=p(e,["mediaResolution"]);P!=null&&_(i,["mediaResolution"],P);const b=p(e,["speechConfig"]);if(b!=null&&_(i,["speechConfig"],vy(b)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=p(e,["thinkingConfig"]);M!=null&&_(i,["thinkingConfig"],M);const k=p(e,["imageConfig"]);return k!=null&&_(i,["imageConfig"],k),i}function hV(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>QU(h))),_(e,["candidates"],f)}const o=p(n,["modelVersion"]);o!=null&&_(e,["modelVersion"],o);const a=p(n,["promptFeedback"]);a!=null&&_(e,["promptFeedback"],a);const u=p(n,["responseId"]);u!=null&&_(e,["responseId"],u);const d=p(n,["usageMetadata"]);return d!=null&&_(e,["usageMetadata"],d),e}function fV(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function pV(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],xl(n,i)),t}function mV(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function gV(n){const e={},t=p(n,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function yV(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["request","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let d=Ii(o);Array.isArray(d)&&(d=d.map(f=>aI(f))),_(t,["request","contents"],d)}const a=p(e,["metadata"]);a!=null&&_(t,["metadata"],a);const u=p(e,["config"]);return u!=null&&_(t,["request","generationConfig"],dV(n,u,p(t,["request"],{}))),t}function _V(n){const e={},t=p(n,["response"]);t!=null&&_(e,["response"],hV(t));const i=p(n,["error"]);return i!=null&&_(e,["error"],i),e}function vV(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);if(e!==void 0&&o!=null&&_(e,["_query","pageToken"],o),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function TV(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);e!==void 0&&o!=null&&_(e,["_query","pageToken"],o);const a=p(n,["filter"]);return e!==void 0&&a!=null&&_(e,["_query","filter"],a),t}function EV(n){const e={},t=p(n,["config"]);return t!=null&&vV(t,e),e}function AV(n){const e={},t=p(n,["config"]);return t!=null&&TV(t,e),e}function SV(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>sh(u))),_(e,["batchJobs"],a)}return e}function wV(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>cg(u))),_(e,["batchJobs"],a)}return e}function CV(n){const e={},t=p(n,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const i=p(n,["thought"]);i!=null&&_(e,["thought"],i);const o=p(n,["inlineData"]);o!=null&&_(e,["inlineData"],YU(o));const a=p(n,["fileData"]);a!=null&&_(e,["fileData"],cV(a));const u=p(n,["thoughtSignature"]);u!=null&&_(e,["thoughtSignature"],u);const d=p(n,["functionCall"]);d!=null&&_(e,["functionCall"],d);const f=p(n,["codeExecutionResult"]);f!=null&&_(e,["codeExecutionResult"],f);const h=p(n,["executableCode"]);h!=null&&_(e,["executableCode"],h);const v=p(n,["functionResponse"]);v!=null&&_(e,["functionResponse"],v);const E=p(n,["text"]);return E!=null&&_(e,["text"],E),e}function IV(n){const e={};if(p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=p(n,["category"]);t!=null&&_(e,["category"],t);const i=p(n,["threshold"]);return i!=null&&_(e,["threshold"],i),e}function xV(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearch"]);i!=null&&_(e,["googleSearch"],gV(i));const o=p(n,["googleSearchRetrieval"]);if(o!=null&&_(e,["googleSearchRetrieval"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["googleMaps"]);a!=null&&_(e,["googleMaps"],mV(a));const u=p(n,["urlContext"]);u!=null&&_(e,["urlContext"],u);const d=p(n,["computerUse"]);d!=null&&_(e,["computerUse"],d);const f=p(n,["codeExecution"]);return f!=null&&_(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ta;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ta||(ta={}));class Ec{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RV extends aa{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Ec(ta.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=qA(this.apiClient,e),i=t._url,o=Se("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,f=d.requests,h=[];for(const v of f){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const R=E.request;R.systemInstruction=A,E.request=R}h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=eV(this.apiClient,e);return d=Se("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>cg(v))}else{const h=qA(this.apiClient,e);return d=Se("{model}:batchGenerateContent",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>sh(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=nV(this.apiClient,e);return a=Se("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>sh(f))}}async get(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=pV(this.apiClient,e);return d=Se("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>cg(v))}else{const h=fV(this.apiClient,e);return d=Se("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>sh(v))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const f=JU(this.apiClient,e);u=Se("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=KU(this.apiClient,e);u=Se("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=AV(e);return d=Se("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=wV(v),A=new VA;return Object.assign(A,E),A})}else{const h=EV(e);return d=Se("batches",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=SV(v),A=new VA;return Object.assign(A,E),A})}}async delete(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=sV(this.apiClient,e);return d=Se("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>oV(v))}else{const h=iV(this.apiClient,e);return d=Se("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>rV(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NV(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["data"]);t!=null&&_(e,["data"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function BA(n){const e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>QV(a))),_(e,["parts"],o)}const i=p(n,["role"]);return i!=null&&_(e,["role"],i),e}function bV(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const o=p(n,["expireTime"]);e!==void 0&&o!=null&&_(e,["expireTime"],o);const a=p(n,["displayName"]);e!==void 0&&a!=null&&_(e,["displayName"],a);const u=p(n,["contents"]);if(e!==void 0&&u!=null){let v=Ii(u);Array.isArray(v)&&(v=v.map(E=>BA(E))),_(e,["contents"],v)}const d=p(n,["systemInstruction"]);e!==void 0&&d!=null&&_(e,["systemInstruction"],BA(bn(d)));const f=p(n,["tools"]);if(e!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(E=>WV(E))),_(e,["tools"],v)}const h=p(n,["toolConfig"]);if(e!==void 0&&h!=null&&_(e,["toolConfig"],h),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function PV(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const o=p(n,["expireTime"]);e!==void 0&&o!=null&&_(e,["expireTime"],o);const a=p(n,["displayName"]);e!==void 0&&a!=null&&_(e,["displayName"],a);const u=p(n,["contents"]);if(e!==void 0&&u!=null){let E=Ii(u);Array.isArray(E)&&(E=E.map(A=>A)),_(e,["contents"],E)}const d=p(n,["systemInstruction"]);e!==void 0&&d!=null&&_(e,["systemInstruction"],bn(d));const f=p(n,["tools"]);if(e!==void 0&&f!=null){let E=f;Array.isArray(E)&&(E=E.map(A=>XV(A))),_(e,["tools"],E)}const h=p(n,["toolConfig"]);e!==void 0&&h!=null&&_(e,["toolConfig"],h);const v=p(n,["kmsKeyName"]);return e!==void 0&&v!=null&&_(e,["encryption_spec","kmsKeyName"],v),t}function DV(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["model"],JC(n,i));const o=p(e,["config"]);return o!=null&&bV(o,t),t}function MV(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["model"],JC(n,i));const o=p(e,["config"]);return o!=null&&PV(o,t),t}function kV(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],or(n,i)),t}function UV(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],or(n,i)),t}function VV(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function LV(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function OV(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function FV(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&_(e,["description"],t);const i=p(n,["name"]);i!=null&&_(e,["name"],i);const o=p(n,["parameters"]);o!=null&&_(e,["parameters"],o);const a=p(n,["parametersJsonSchema"]);a!=null&&_(e,["parametersJsonSchema"],a);const u=p(n,["response"]);u!=null&&_(e,["response"],u);const d=p(n,["responseJsonSchema"]);return d!=null&&_(e,["responseJsonSchema"],d),e}function qV(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],or(n,i)),t}function BV(n,e){const t={},i=p(e,["name"]);return i!=null&&_(t,["_url","name"],or(n,i)),t}function HV(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function GV(n){const e={},t=p(n,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function zV(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);return e!==void 0&&o!=null&&_(e,["_query","pageToken"],o),t}function jV(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);return e!==void 0&&o!=null&&_(e,["_query","pageToken"],o),t}function $V(n){const e={},t=p(n,["config"]);return t!=null&&zV(t,e),e}function YV(n){const e={},t=p(n,["config"]);return t!=null&&jV(t,e),e}function KV(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),_(e,["cachedContents"],a)}return e}function JV(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),_(e,["cachedContents"],a)}return e}function QV(n){const e={},t=p(n,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const i=p(n,["thought"]);i!=null&&_(e,["thought"],i);const o=p(n,["inlineData"]);o!=null&&_(e,["inlineData"],NV(o));const a=p(n,["fileData"]);a!=null&&_(e,["fileData"],OV(a));const u=p(n,["thoughtSignature"]);u!=null&&_(e,["thoughtSignature"],u);const d=p(n,["functionCall"]);d!=null&&_(e,["functionCall"],d);const f=p(n,["codeExecutionResult"]);f!=null&&_(e,["codeExecutionResult"],f);const h=p(n,["executableCode"]);h!=null&&_(e,["executableCode"],h);const v=p(n,["functionResponse"]);v!=null&&_(e,["functionResponse"],v);const E=p(n,["text"]);return E!=null&&_(e,["text"],E),e}function WV(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearch"]);i!=null&&_(e,["googleSearch"],GV(i));const o=p(n,["googleSearchRetrieval"]);if(o!=null&&_(e,["googleSearchRetrieval"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["googleMaps"]);a!=null&&_(e,["googleMaps"],HV(a));const u=p(n,["urlContext"]);u!=null&&_(e,["urlContext"],u);const d=p(n,["computerUse"]);d!=null&&_(e,["computerUse"],d);const f=p(n,["codeExecution"]);return f!=null&&_(e,["codeExecution"],f),e}function XV(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>FV(A))),_(e,["functionDeclarations"],E)}const i=p(n,["retrieval"]);i!=null&&_(e,["retrieval"],i);const o=p(n,["googleSearch"]);o!=null&&_(e,["googleSearch"],o);const a=p(n,["googleSearchRetrieval"]);a!=null&&_(e,["googleSearchRetrieval"],a);const u=p(n,["enterpriseWebSearch"]);u!=null&&_(e,["enterpriseWebSearch"],u);const d=p(n,["googleMaps"]);d!=null&&_(e,["googleMaps"],d);const f=p(n,["urlContext"]);f!=null&&_(e,["urlContext"],f);const h=p(n,["computerUse"]);h!=null&&_(e,["computerUse"],h);const v=p(n,["codeExecution"]);return v!=null&&_(e,["codeExecution"],v),e}function ZV(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const o=p(n,["expireTime"]);return e!==void 0&&o!=null&&_(e,["expireTime"],o),t}function e4(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const o=p(n,["expireTime"]);return e!==void 0&&o!=null&&_(e,["expireTime"],o),t}function t4(n,e){const t={},i=p(e,["name"]);i!=null&&_(t,["_url","name"],or(n,i));const o=p(e,["config"]);return o!=null&&ZV(o,t),t}function n4(n,e){const t={},i=p(e,["name"]);i!=null&&_(t,["_url","name"],or(n,i));const o=p(e,["config"]);return o!=null&&e4(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i4 extends aa{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ec(ta.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=MV(this.apiClient,e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=DV(this.apiClient,e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=BV(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=qV(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=UV(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=LV(v),A=new kA;return Object.assign(A,E),A})}else{const h=kV(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=VV(v),A=new kA;return Object.assign(A,E),A})}}async update(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=n4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=t4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=YV(e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=JV(v),A=new UA;return Object.assign(A,E),A})}else{const h=$V(e);return d=Se("cachedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=KV(v),A=new UA;return Object.assign(A,E),A})}}}function HA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xt(n){return this instanceof xt?(this.v=n,this):new xt(n)}function ul(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(R){return function(L){return Promise.resolve(L).then(R,E)}}function d(R,L){i[R]&&(o[R]=function(F){return new Promise(function(U,J){a.push([R,F,U,J])>1||f(R,F)})},L&&(o[R]=L(o[R])))}function f(R,L){try{h(i[R](L))}catch(F){A(a[0][3],F)}}function h(R){R.value instanceof xt?Promise.resolve(R.value.v).then(v,E):A(a[0][2],R)}function v(R){f("next",R)}function E(R){f("throw",R)}function A(R,L){R(L),a.shift(),a.length&&f(a[0][0],a[0][1])}}function Yu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof HA=="function"?HA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,f){u=n[a](u),o(d,f,u.done,u.value)})}}function o(a,u,d,f){Promise.resolve(f).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s4(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:lI(t)}function lI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function r4(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function GA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!lI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class o4{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new a4(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class a4{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),r4(a)}async sendMessage(e){var t;await this.sendPromise;const i=bn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const f=await o,h=(u=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=f.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(d=v.slice(E))!==null&&d!==void 0?d:[]);const R=h?[h]:[];this.recordHistory(i,R,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=bn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?GA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return ul(this,arguments,function*(){var u,d,f,h;const v=[];try{for(var E=!0,A=Yu(e),R;R=yield xt(A.next()),u=R.done,!u;E=!0){h=R.value,E=!1;const L=h;if(s4(L)){const F=(o=(i=L.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;F!==void 0&&v.push(F)}yield yield xt(L)}}catch(L){d={error:L}}finally{try{!E&&!u&&(f=A.return)&&(yield xt(f.call(A)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...GA(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,lf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l4(n){const e={},t=p(n,["file"]);return t!=null&&_(e,["file"],t),e}function u4(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function c4(n){const e={},t=p(n,["name"]);return t!=null&&_(e,["_url","file"],tI(t)),e}function d4(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function h4(n){const e={},t=p(n,["name"]);return t!=null&&_(e,["_url","file"],tI(t)),e}function f4(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);return e!==void 0&&o!=null&&_(e,["_query","pageToken"],o),t}function p4(n){const e={},t=p(n,["config"]);return t!=null&&f4(t,e),e}function m4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),_(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g4 extends aa{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ec(ta.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=p4(e);return a=Se("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const h=m4(f),v=new xU;return Object.assign(v,h),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=l4(e);return a=Se("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=u4(f),v=new RU;return Object.assign(v,h),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h4(e);return a=Se("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=c4(e);return a=Se("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const h=d4(f),v=new NU;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rh(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["data"]);t!=null&&_(e,["data"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function y4(n){const e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>D4(a))),_(e,["parts"],o)}const i=p(n,["role"]);return i!=null&&_(e,["role"],i),e}function _4(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function v4(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&_(e,["description"],t);const i=p(n,["name"]);i!=null&&_(e,["name"],i);const o=p(n,["parameters"]);o!=null&&_(e,["parameters"],o);const a=p(n,["parametersJsonSchema"]);a!=null&&_(e,["parametersJsonSchema"],a);const u=p(n,["response"]);u!=null&&_(e,["response"],u);const d=p(n,["responseJsonSchema"]);return d!=null&&_(e,["responseJsonSchema"],d),e}function T4(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&_(e,["modelConfig"],t);const i=p(n,["audioTimestamp"]);i!=null&&_(e,["audioTimestamp"],i);const o=p(n,["candidateCount"]);o!=null&&_(e,["candidateCount"],o);const a=p(n,["enableAffectiveDialog"]);a!=null&&_(e,["enableAffectiveDialog"],a);const u=p(n,["frequencyPenalty"]);u!=null&&_(e,["frequencyPenalty"],u);const d=p(n,["logprobs"]);d!=null&&_(e,["logprobs"],d);const f=p(n,["maxOutputTokens"]);f!=null&&_(e,["maxOutputTokens"],f);const h=p(n,["mediaResolution"]);h!=null&&_(e,["mediaResolution"],h);const v=p(n,["presencePenalty"]);v!=null&&_(e,["presencePenalty"],v);const E=p(n,["responseJsonSchema"]);E!=null&&_(e,["responseJsonSchema"],E);const A=p(n,["responseLogprobs"]);A!=null&&_(e,["responseLogprobs"],A);const R=p(n,["responseMimeType"]);R!=null&&_(e,["responseMimeType"],R);const L=p(n,["responseModalities"]);L!=null&&_(e,["responseModalities"],L);const F=p(n,["responseSchema"]);F!=null&&_(e,["responseSchema"],F);const U=p(n,["routingConfig"]);U!=null&&_(e,["routingConfig"],U);const J=p(n,["seed"]);J!=null&&_(e,["seed"],J);const H=p(n,["speechConfig"]);H!=null&&_(e,["speechConfig"],uI(H));const z=p(n,["stopSequences"]);z!=null&&_(e,["stopSequences"],z);const se=p(n,["temperature"]);se!=null&&_(e,["temperature"],se);const ee=p(n,["thinkingConfig"]);ee!=null&&_(e,["thinkingConfig"],ee);const fe=p(n,["topK"]);fe!=null&&_(e,["topK"],fe);const O=p(n,["topP"]);if(O!=null&&_(e,["topP"],O),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function E4(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function A4(n){const e={},t=p(n,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function S4(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig"],i);const o=p(n,["responseModalities"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","responseModalities"],o);const a=p(n,["temperature"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","temperature"],a);const u=p(n,["topP"]);e!==void 0&&u!=null&&_(e,["setup","generationConfig","topP"],u);const d=p(n,["topK"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","mediaResolution"],h);const v=p(n,["seed"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","seed"],v);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&_(e,["setup","generationConfig","speechConfig"],Ty(E));const A=p(n,["thinkingConfig"]);e!==void 0&&A!=null&&_(e,["setup","generationConfig","thinkingConfig"],A);const R=p(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=p(n,["systemInstruction"]);e!==void 0&&L!=null&&_(e,["setup","systemInstruction"],y4(bn(L)));const F=p(n,["tools"]);if(e!==void 0&&F!=null){let fe=Il(F);Array.isArray(fe)&&(fe=fe.map(O=>k4(Cl(O)))),_(e,["setup","tools"],fe)}const U=p(n,["sessionResumption"]);e!==void 0&&U!=null&&_(e,["setup","sessionResumption"],M4(U));const J=p(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&_(e,["setup","inputAudioTranscription"],J);const H=p(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&_(e,["setup","outputAudioTranscription"],H);const z=p(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&_(e,["setup","realtimeInputConfig"],z);const se=p(n,["contextWindowCompression"]);e!==void 0&&se!=null&&_(e,["setup","contextWindowCompression"],se);const ee=p(n,["proactivity"]);return e!==void 0&&ee!=null&&_(e,["setup","proactivity"],ee),t}function w4(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig"],T4(i));const o=p(n,["responseModalities"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","responseModalities"],o);const a=p(n,["temperature"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","temperature"],a);const u=p(n,["topP"]);e!==void 0&&u!=null&&_(e,["setup","generationConfig","topP"],u);const d=p(n,["topK"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","mediaResolution"],h);const v=p(n,["seed"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","seed"],v);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&_(e,["setup","generationConfig","speechConfig"],uI(Ty(E)));const A=p(n,["thinkingConfig"]);e!==void 0&&A!=null&&_(e,["setup","generationConfig","thinkingConfig"],A);const R=p(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=p(n,["systemInstruction"]);e!==void 0&&L!=null&&_(e,["setup","systemInstruction"],bn(L));const F=p(n,["tools"]);if(e!==void 0&&F!=null){let fe=Il(F);Array.isArray(fe)&&(fe=fe.map(O=>U4(Cl(O)))),_(e,["setup","tools"],fe)}const U=p(n,["sessionResumption"]);e!==void 0&&U!=null&&_(e,["setup","sessionResumption"],U);const J=p(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&_(e,["setup","inputAudioTranscription"],J);const H=p(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&_(e,["setup","outputAudioTranscription"],H);const z=p(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&_(e,["setup","realtimeInputConfig"],z);const se=p(n,["contextWindowCompression"]);e!==void 0&&se!=null&&_(e,["setup","contextWindowCompression"],se);const ee=p(n,["proactivity"]);return e!==void 0&&ee!=null&&_(e,["setup","proactivity"],ee),t}function C4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["setup","model"],rt(n,i));const o=p(e,["config"]);return o!=null&&_(t,["config"],S4(o,t)),t}function I4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["setup","model"],rt(n,i));const o=p(e,["config"]);return o!=null&&_(t,["config"],w4(o,t)),t}function x4(n){const e={},t=p(n,["musicGenerationConfig"]);return t!=null&&_(e,["musicGenerationConfig"],t),e}function R4(n){const e={},t=p(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),_(e,["weightedPrompts"],i)}return e}function N4(n){const e={},t=p(n,["media"]);if(t!=null){let h=QC(t);Array.isArray(h)&&(h=h.map(v=>rh(v))),_(e,["mediaChunks"],h)}const i=p(n,["audio"]);i!=null&&_(e,["audio"],rh(XC(i)));const o=p(n,["audioStreamEnd"]);o!=null&&_(e,["audioStreamEnd"],o);const a=p(n,["video"]);a!=null&&_(e,["video"],rh(WC(a)));const u=p(n,["text"]);u!=null&&_(e,["text"],u);const d=p(n,["activityStart"]);d!=null&&_(e,["activityStart"],d);const f=p(n,["activityEnd"]);return f!=null&&_(e,["activityEnd"],f),e}function b4(n){const e={},t=p(n,["media"]);if(t!=null){let h=QC(t);Array.isArray(h)&&(h=h.map(v=>v)),_(e,["mediaChunks"],h)}const i=p(n,["audio"]);i!=null&&_(e,["audio"],XC(i));const o=p(n,["audioStreamEnd"]);o!=null&&_(e,["audioStreamEnd"],o);const a=p(n,["video"]);a!=null&&_(e,["video"],WC(a));const u=p(n,["text"]);u!=null&&_(e,["text"],u);const d=p(n,["activityStart"]);d!=null&&_(e,["activityStart"],d);const f=p(n,["activityEnd"]);return f!=null&&_(e,["activityEnd"],f),e}function P4(n){const e={},t=p(n,["setupComplete"]);t!=null&&_(e,["setupComplete"],t);const i=p(n,["serverContent"]);i!=null&&_(e,["serverContent"],i);const o=p(n,["toolCall"]);o!=null&&_(e,["toolCall"],o);const a=p(n,["toolCallCancellation"]);a!=null&&_(e,["toolCallCancellation"],a);const u=p(n,["usageMetadata"]);u!=null&&_(e,["usageMetadata"],V4(u));const d=p(n,["goAway"]);d!=null&&_(e,["goAway"],d);const f=p(n,["sessionResumptionUpdate"]);return f!=null&&_(e,["sessionResumptionUpdate"],f),e}function D4(n){const e={},t=p(n,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const i=p(n,["thought"]);i!=null&&_(e,["thought"],i);const o=p(n,["inlineData"]);o!=null&&_(e,["inlineData"],rh(o));const a=p(n,["fileData"]);a!=null&&_(e,["fileData"],_4(a));const u=p(n,["thoughtSignature"]);u!=null&&_(e,["thoughtSignature"],u);const d=p(n,["functionCall"]);d!=null&&_(e,["functionCall"],d);const f=p(n,["codeExecutionResult"]);f!=null&&_(e,["codeExecutionResult"],f);const h=p(n,["executableCode"]);h!=null&&_(e,["executableCode"],h);const v=p(n,["functionResponse"]);v!=null&&_(e,["functionResponse"],v);const E=p(n,["text"]);return E!=null&&_(e,["text"],E),e}function M4(n){const e={},t=p(n,["handle"]);if(t!=null&&_(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uI(n){const e={},t=p(n,["voiceConfig"]);if(t!=null&&_(e,["voiceConfig"],t),p(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=p(n,["languageCode"]);return i!=null&&_(e,["languageCode"],i),e}function k4(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearch"]);i!=null&&_(e,["googleSearch"],A4(i));const o=p(n,["googleSearchRetrieval"]);if(o!=null&&_(e,["googleSearchRetrieval"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["googleMaps"]);a!=null&&_(e,["googleMaps"],E4(a));const u=p(n,["urlContext"]);u!=null&&_(e,["urlContext"],u);const d=p(n,["computerUse"]);d!=null&&_(e,["computerUse"],d);const f=p(n,["codeExecution"]);return f!=null&&_(e,["codeExecution"],f),e}function U4(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>v4(A))),_(e,["functionDeclarations"],E)}const i=p(n,["retrieval"]);i!=null&&_(e,["retrieval"],i);const o=p(n,["googleSearch"]);o!=null&&_(e,["googleSearch"],o);const a=p(n,["googleSearchRetrieval"]);a!=null&&_(e,["googleSearchRetrieval"],a);const u=p(n,["enterpriseWebSearch"]);u!=null&&_(e,["enterpriseWebSearch"],u);const d=p(n,["googleMaps"]);d!=null&&_(e,["googleMaps"],d);const f=p(n,["urlContext"]);f!=null&&_(e,["urlContext"],f);const h=p(n,["computerUse"]);h!=null&&_(e,["computerUse"],h);const v=p(n,["codeExecution"]);return v!=null&&_(e,["codeExecution"],v),e}function V4(n){const e={},t=p(n,["promptTokenCount"]);t!=null&&_(e,["promptTokenCount"],t);const i=p(n,["cachedContentTokenCount"]);i!=null&&_(e,["cachedContentTokenCount"],i);const o=p(n,["candidatesTokenCount"]);o!=null&&_(e,["responseTokenCount"],o);const a=p(n,["toolUsePromptTokenCount"]);a!=null&&_(e,["toolUsePromptTokenCount"],a);const u=p(n,["thoughtsTokenCount"]);u!=null&&_(e,["thoughtsTokenCount"],u);const d=p(n,["totalTokenCount"]);d!=null&&_(e,["totalTokenCount"],d);const f=p(n,["promptTokensDetails"]);if(f!=null){let R=f;Array.isArray(R)&&(R=R.map(L=>L)),_(e,["promptTokensDetails"],R)}const h=p(n,["cacheTokensDetails"]);if(h!=null){let R=h;Array.isArray(R)&&(R=R.map(L=>L)),_(e,["cacheTokensDetails"],R)}const v=p(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(L=>L)),_(e,["responseTokensDetails"],R)}const E=p(n,["toolUsePromptTokensDetails"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(L=>L)),_(e,["toolUsePromptTokensDetails"],R)}const A=p(n,["trafficType"]);return A!=null&&_(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L4(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["data"]);t!=null&&_(e,["data"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function O4(n){const e={},t=p(n,["content"]);t!=null&&_(e,["content"],t);const i=p(n,["citationMetadata"]);i!=null&&_(e,["citationMetadata"],F4(i));const o=p(n,["tokenCount"]);o!=null&&_(e,["tokenCount"],o);const a=p(n,["finishReason"]);a!=null&&_(e,["finishReason"],a);const u=p(n,["urlContextMetadata"]);u!=null&&_(e,["urlContextMetadata"],u);const d=p(n,["avgLogprobs"]);d!=null&&_(e,["avgLogprobs"],d);const f=p(n,["groundingMetadata"]);f!=null&&_(e,["groundingMetadata"],f);const h=p(n,["index"]);h!=null&&_(e,["index"],h);const v=p(n,["logprobsResult"]);v!=null&&_(e,["logprobsResult"],v);const E=p(n,["safetyRatings"]);if(E!=null){let A=E;Array.isArray(A)&&(A=A.map(R=>R)),_(e,["safetyRatings"],A)}return e}function F4(n){const e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),_(e,["citations"],i)}return e}function q4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let a=Ii(o);Array.isArray(a)&&(a=a.map(u=>u)),_(t,["contents"],a)}return t}function B4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),_(e,["tokensInfo"],o)}return e}function H4(n){const e={},t=p(n,["values"]);t!=null&&_(e,["values"],t);const i=p(n,["statistics"]);return i!=null&&_(e,["statistics"],G4(i)),e}function G4(n){const e={},t=p(n,["truncated"]);t!=null&&_(e,["truncated"],t);const i=p(n,["token_count"]);return i!=null&&_(e,["tokenCount"],i),e}function uf(n){const e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>KL(a))),_(e,["parts"],o)}const i=p(n,["role"]);return i!=null&&_(e,["role"],i),e}function z4(n){const e={},t=p(n,["controlType"]);t!=null&&_(e,["controlType"],t);const i=p(n,["enableControlImageComputation"]);return i!=null&&_(e,["computeControl"],i),e}function j4(n){const e={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $4(n,e){const t={},i=p(n,["systemInstruction"]);e!==void 0&&i!=null&&_(e,["systemInstruction"],bn(i));const o=p(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>pI(d))),_(e,["tools"],u)}const a=p(n,["generationConfig"]);return e!==void 0&&a!=null&&_(e,["generationConfig"],UL(a)),t}function Y4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let u=Ii(o);Array.isArray(u)&&(u=u.map(d=>uf(d))),_(t,["contents"],u)}const a=p(e,["config"]);return a!=null&&j4(a),t}function K4(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let u=Ii(o);Array.isArray(u)&&(u=u.map(d=>d)),_(t,["contents"],u)}const a=p(e,["config"]);return a!=null&&$4(a,t),t}function J4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["totalTokens"]);i!=null&&_(e,["totalTokens"],i);const o=p(n,["cachedContentTokenCount"]);return o!=null&&_(e,["cachedContentTokenCount"],o),e}function Q4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["totalTokens"]);return i!=null&&_(e,["totalTokens"],i),e}function W4(n,e){const t={},i=p(e,["model"]);return i!=null&&_(t,["_url","name"],rt(n,i)),t}function X4(n,e){const t={},i=p(e,["model"]);return i!=null&&_(t,["_url","name"],rt(n,i)),t}function Z4(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function eL(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function tL(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const o=p(n,["negativePrompt"]);e!==void 0&&o!=null&&_(e,["parameters","negativePrompt"],o);const a=p(n,["numberOfImages"]);e!==void 0&&a!=null&&_(e,["parameters","sampleCount"],a);const u=p(n,["aspectRatio"]);e!==void 0&&u!=null&&_(e,["parameters","aspectRatio"],u);const d=p(n,["guidanceScale"]);e!==void 0&&d!=null&&_(e,["parameters","guidanceScale"],d);const f=p(n,["seed"]);e!==void 0&&f!=null&&_(e,["parameters","seed"],f);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&_(e,["parameters","safetySetting"],h);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&_(e,["parameters","personGeneration"],v);const E=p(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&_(e,["parameters","includeSafetyAttributes"],E);const A=p(n,["includeRaiReason"]);e!==void 0&&A!=null&&_(e,["parameters","includeRaiReason"],A);const R=p(n,["language"]);e!==void 0&&R!=null&&_(e,["parameters","language"],R);const L=p(n,["outputMimeType"]);e!==void 0&&L!=null&&_(e,["parameters","outputOptions","mimeType"],L);const F=p(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&_(e,["parameters","outputOptions","compressionQuality"],F);const U=p(n,["addWatermark"]);e!==void 0&&U!=null&&_(e,["parameters","addWatermark"],U);const J=p(n,["labels"]);e!==void 0&&J!=null&&_(e,["labels"],J);const H=p(n,["editMode"]);e!==void 0&&H!=null&&_(e,["parameters","editMode"],H);const z=p(n,["baseSteps"]);return e!==void 0&&z!=null&&_(e,["parameters","editConfig","baseSteps"],z),t}function nL(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["prompt"]);o!=null&&_(t,["instances[0]","prompt"],o);const a=p(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>eO(f))),_(t,["instances[0]","referenceImages"],d)}const u=p(e,["config"]);return u!=null&&tL(u,t),t}function iL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>cf(a))),_(e,["generatedImages"],o)}return e}function sL(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&_(e,["requests[]","taskType"],i);const o=p(n,["title"]);e!==void 0&&o!=null&&_(e,["requests[]","title"],o);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&_(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function rL(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&_(e,["instances[]","task_type"],i);const o=p(n,["title"]);e!==void 0&&o!=null&&_(e,["instances[]","title"],o);const a=p(n,["outputDimensionality"]);e!==void 0&&a!=null&&_(e,["parameters","outputDimensionality"],a);const u=p(n,["mimeType"]);e!==void 0&&u!=null&&_(e,["instances[]","mimeType"],u);const d=p(n,["autoTruncate"]);return e!==void 0&&d!=null&&_(e,["parameters","autoTruncate"],d),t}function oL(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let d=yy(n,o);Array.isArray(d)&&(d=d.map(f=>f)),_(t,["requests[]","content"],d)}const a=p(e,["config"]);a!=null&&sL(a,t);const u=p(e,["model"]);return u!==void 0&&_(t,["requests[]","model"],rt(n,u)),t}function aL(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let u=yy(n,o);Array.isArray(u)&&(u=u.map(d=>d)),_(t,["instances[]","content"],u)}const a=p(e,["config"]);return a!=null&&rL(a,t),t}function lL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),_(e,["embeddings"],a)}const o=p(n,["metadata"]);return o!=null&&_(e,["metadata"],o),e}function uL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>H4(u))),_(e,["embeddings"],a)}const o=p(n,["metadata"]);return o!=null&&_(e,["metadata"],o),e}function cL(n){const e={},t=p(n,["endpoint"]);t!=null&&_(e,["name"],t);const i=p(n,["deployedModelId"]);return i!=null&&_(e,["deployedModelId"],i),e}function dL(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function hL(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&_(e,["description"],t);const i=p(n,["name"]);i!=null&&_(e,["name"],i);const o=p(n,["parameters"]);o!=null&&_(e,["parameters"],o);const a=p(n,["parametersJsonSchema"]);a!=null&&_(e,["parametersJsonSchema"],a);const u=p(n,["response"]);u!=null&&_(e,["response"],u);const d=p(n,["responseJsonSchema"]);return d!=null&&_(e,["responseJsonSchema"],d),e}function fL(n,e,t){const i={},o=p(e,["systemInstruction"]);t!==void 0&&o!=null&&_(t,["systemInstruction"],uf(bn(o)));const a=p(e,["temperature"]);a!=null&&_(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&_(i,["topP"],u);const d=p(e,["topK"]);d!=null&&_(i,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&_(i,["candidateCount"],f);const h=p(e,["maxOutputTokens"]);h!=null&&_(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&_(i,["stopSequences"],v);const E=p(e,["responseLogprobs"]);E!=null&&_(i,["responseLogprobs"],E);const A=p(e,["logprobs"]);A!=null&&_(i,["logprobs"],A);const R=p(e,["presencePenalty"]);R!=null&&_(i,["presencePenalty"],R);const L=p(e,["frequencyPenalty"]);L!=null&&_(i,["frequencyPenalty"],L);const F=p(e,["seed"]);F!=null&&_(i,["seed"],F);const U=p(e,["responseMimeType"]);U!=null&&_(i,["responseMimeType"],U);const J=p(e,["responseSchema"]);J!=null&&_(i,["responseSchema"],_y(J));const H=p(e,["responseJsonSchema"]);if(H!=null&&_(i,["responseJsonSchema"],H),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=p(e,["safetySettings"]);if(t!==void 0&&z!=null){let V=z;Array.isArray(V)&&(V=V.map(N=>tO(N))),_(t,["safetySettings"],V)}const se=p(e,["tools"]);if(t!==void 0&&se!=null){let V=Il(se);Array.isArray(V)&&(V=V.map(N=>aO(Cl(N)))),_(t,["tools"],V)}const ee=p(e,["toolConfig"]);if(t!==void 0&&ee!=null&&_(t,["toolConfig"],ee),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=p(e,["cachedContent"]);t!==void 0&&fe!=null&&_(t,["cachedContent"],or(n,fe));const O=p(e,["responseModalities"]);O!=null&&_(i,["responseModalities"],O);const P=p(e,["mediaResolution"]);P!=null&&_(i,["mediaResolution"],P);const b=p(e,["speechConfig"]);if(b!=null&&_(i,["speechConfig"],vy(b)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=p(e,["thinkingConfig"]);M!=null&&_(i,["thinkingConfig"],M);const k=p(e,["imageConfig"]);return k!=null&&_(i,["imageConfig"],k),i}function pL(n,e,t){const i={},o=p(e,["systemInstruction"]);t!==void 0&&o!=null&&_(t,["systemInstruction"],bn(o));const a=p(e,["temperature"]);a!=null&&_(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&_(i,["topP"],u);const d=p(e,["topK"]);d!=null&&_(i,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&_(i,["candidateCount"],f);const h=p(e,["maxOutputTokens"]);h!=null&&_(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&_(i,["stopSequences"],v);const E=p(e,["responseLogprobs"]);E!=null&&_(i,["responseLogprobs"],E);const A=p(e,["logprobs"]);A!=null&&_(i,["logprobs"],A);const R=p(e,["presencePenalty"]);R!=null&&_(i,["presencePenalty"],R);const L=p(e,["frequencyPenalty"]);L!=null&&_(i,["frequencyPenalty"],L);const F=p(e,["seed"]);F!=null&&_(i,["seed"],F);const U=p(e,["responseMimeType"]);U!=null&&_(i,["responseMimeType"],U);const J=p(e,["responseSchema"]);J!=null&&_(i,["responseSchema"],_y(J));const H=p(e,["responseJsonSchema"]);H!=null&&_(i,["responseJsonSchema"],H);const z=p(e,["routingConfig"]);z!=null&&_(i,["routingConfig"],z);const se=p(e,["modelSelectionConfig"]);se!=null&&_(i,["modelConfig"],se);const ee=p(e,["safetySettings"]);if(t!==void 0&&ee!=null){let ne=ee;Array.isArray(ne)&&(ne=ne.map(pe=>pe)),_(t,["safetySettings"],ne)}const fe=p(e,["tools"]);if(t!==void 0&&fe!=null){let ne=Il(fe);Array.isArray(ne)&&(ne=ne.map(pe=>pI(Cl(pe)))),_(t,["tools"],ne)}const O=p(e,["toolConfig"]);t!==void 0&&O!=null&&_(t,["toolConfig"],O);const P=p(e,["labels"]);t!==void 0&&P!=null&&_(t,["labels"],P);const b=p(e,["cachedContent"]);t!==void 0&&b!=null&&_(t,["cachedContent"],or(n,b));const M=p(e,["responseModalities"]);M!=null&&_(i,["responseModalities"],M);const k=p(e,["mediaResolution"]);k!=null&&_(i,["mediaResolution"],k);const V=p(e,["speechConfig"]);V!=null&&_(i,["speechConfig"],fI(vy(V)));const N=p(e,["audioTimestamp"]);N!=null&&_(i,["audioTimestamp"],N);const we=p(e,["thinkingConfig"]);we!=null&&_(i,["thinkingConfig"],we);const ze=p(e,["imageConfig"]);return ze!=null&&_(i,["imageConfig"],ze),i}function zA(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let u=Ii(o);Array.isArray(u)&&(u=u.map(d=>uf(d))),_(t,["contents"],u)}const a=p(e,["config"]);return a!=null&&_(t,["generationConfig"],fL(n,a,t)),t}function jA(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["contents"]);if(o!=null){let u=Ii(o);Array.isArray(u)&&(u=u.map(d=>d)),_(t,["contents"],u)}const a=p(e,["config"]);return a!=null&&_(t,["generationConfig"],pL(n,a,t)),t}function $A(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>O4(h))),_(e,["candidates"],f)}const o=p(n,["modelVersion"]);o!=null&&_(e,["modelVersion"],o);const a=p(n,["promptFeedback"]);a!=null&&_(e,["promptFeedback"],a);const u=p(n,["responseId"]);u!=null&&_(e,["responseId"],u);const d=p(n,["usageMetadata"]);return d!=null&&_(e,["usageMetadata"],d),e}function YA(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["candidates"],h)}const o=p(n,["createTime"]);o!=null&&_(e,["createTime"],o);const a=p(n,["modelVersion"]);a!=null&&_(e,["modelVersion"],a);const u=p(n,["promptFeedback"]);u!=null&&_(e,["promptFeedback"],u);const d=p(n,["responseId"]);d!=null&&_(e,["responseId"],d);const f=p(n,["usageMetadata"]);return f!=null&&_(e,["usageMetadata"],f),e}function mL(n,e){const t={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(n,["numberOfImages"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const o=p(n,["aspectRatio"]);e!==void 0&&o!=null&&_(e,["parameters","aspectRatio"],o);const a=p(n,["guidanceScale"]);if(e!==void 0&&a!=null&&_(e,["parameters","guidanceScale"],a),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=p(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&_(e,["parameters","safetySetting"],u);const d=p(n,["personGeneration"]);e!==void 0&&d!=null&&_(e,["parameters","personGeneration"],d);const f=p(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&_(e,["parameters","includeSafetyAttributes"],f);const h=p(n,["includeRaiReason"]);e!==void 0&&h!=null&&_(e,["parameters","includeRaiReason"],h);const v=p(n,["language"]);e!==void 0&&v!=null&&_(e,["parameters","language"],v);const E=p(n,["outputMimeType"]);e!==void 0&&E!=null&&_(e,["parameters","outputOptions","mimeType"],E);const A=p(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&_(e,["parameters","outputOptions","compressionQuality"],A),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=p(n,["imageSize"]);if(e!==void 0&&R!=null&&_(e,["parameters","sampleImageSize"],R),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function gL(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const o=p(n,["negativePrompt"]);e!==void 0&&o!=null&&_(e,["parameters","negativePrompt"],o);const a=p(n,["numberOfImages"]);e!==void 0&&a!=null&&_(e,["parameters","sampleCount"],a);const u=p(n,["aspectRatio"]);e!==void 0&&u!=null&&_(e,["parameters","aspectRatio"],u);const d=p(n,["guidanceScale"]);e!==void 0&&d!=null&&_(e,["parameters","guidanceScale"],d);const f=p(n,["seed"]);e!==void 0&&f!=null&&_(e,["parameters","seed"],f);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&_(e,["parameters","safetySetting"],h);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&_(e,["parameters","personGeneration"],v);const E=p(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&_(e,["parameters","includeSafetyAttributes"],E);const A=p(n,["includeRaiReason"]);e!==void 0&&A!=null&&_(e,["parameters","includeRaiReason"],A);const R=p(n,["language"]);e!==void 0&&R!=null&&_(e,["parameters","language"],R);const L=p(n,["outputMimeType"]);e!==void 0&&L!=null&&_(e,["parameters","outputOptions","mimeType"],L);const F=p(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&_(e,["parameters","outputOptions","compressionQuality"],F);const U=p(n,["addWatermark"]);e!==void 0&&U!=null&&_(e,["parameters","addWatermark"],U);const J=p(n,["labels"]);e!==void 0&&J!=null&&_(e,["labels"],J);const H=p(n,["imageSize"]);e!==void 0&&H!=null&&_(e,["parameters","sampleImageSize"],H);const z=p(n,["enhancePrompt"]);return e!==void 0&&z!=null&&_(e,["parameters","enhancePrompt"],z),t}function yL(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["prompt"]);o!=null&&_(t,["instances[0]","prompt"],o);const a=p(e,["config"]);return a!=null&&mL(a,t),t}function _L(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["prompt"]);o!=null&&_(t,["instances[0]","prompt"],o);const a=p(e,["config"]);return a!=null&&gL(a,t),t}function vL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>PL(u))),_(e,["generatedImages"],a)}const o=p(n,["positivePromptSafetyAttributes"]);return o!=null&&_(e,["positivePromptSafetyAttributes"],dI(o)),e}function TL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>cf(u))),_(e,["generatedImages"],a)}const o=p(n,["positivePromptSafetyAttributes"]);return o!=null&&_(e,["positivePromptSafetyAttributes"],hI(o)),e}function EL(n,e){const t={},i=p(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=p(n,["durationSeconds"]);if(e!==void 0&&o!=null&&_(e,["parameters","durationSeconds"],o),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(n,["aspectRatio"]);e!==void 0&&a!=null&&_(e,["parameters","aspectRatio"],a);const u=p(n,["resolution"]);e!==void 0&&u!=null&&_(e,["parameters","resolution"],u);const d=p(n,["personGeneration"]);if(e!==void 0&&d!=null&&_(e,["parameters","personGeneration"],d),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=p(n,["negativePrompt"]);e!==void 0&&f!=null&&_(e,["parameters","negativePrompt"],f);const h=p(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&_(e,["parameters","enhancePrompt"],h),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=p(n,["lastFrame"]);e!==void 0&&v!=null&&_(e,["instances[0]","lastFrame"],df(v));const E=p(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(R=>TO(R))),_(e,["instances[0]","referenceImages"],A)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function AL(n,e){const t={},i=p(n,["numberOfVideos"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const o=p(n,["outputGcsUri"]);e!==void 0&&o!=null&&_(e,["parameters","storageUri"],o);const a=p(n,["fps"]);e!==void 0&&a!=null&&_(e,["parameters","fps"],a);const u=p(n,["durationSeconds"]);e!==void 0&&u!=null&&_(e,["parameters","durationSeconds"],u);const d=p(n,["seed"]);e!==void 0&&d!=null&&_(e,["parameters","seed"],d);const f=p(n,["aspectRatio"]);e!==void 0&&f!=null&&_(e,["parameters","aspectRatio"],f);const h=p(n,["resolution"]);e!==void 0&&h!=null&&_(e,["parameters","resolution"],h);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&_(e,["parameters","personGeneration"],v);const E=p(n,["pubsubTopic"]);e!==void 0&&E!=null&&_(e,["parameters","pubsubTopic"],E);const A=p(n,["negativePrompt"]);e!==void 0&&A!=null&&_(e,["parameters","negativePrompt"],A);const R=p(n,["enhancePrompt"]);e!==void 0&&R!=null&&_(e,["parameters","enhancePrompt"],R);const L=p(n,["generateAudio"]);e!==void 0&&L!=null&&_(e,["parameters","generateAudio"],L);const F=p(n,["lastFrame"]);e!==void 0&&F!=null&&_(e,["instances[0]","lastFrame"],Ji(F));const U=p(n,["referenceImages"]);if(e!==void 0&&U!=null){let z=U;Array.isArray(z)&&(z=z.map(se=>EO(se))),_(e,["instances[0]","referenceImages"],z)}const J=p(n,["mask"]);e!==void 0&&J!=null&&_(e,["instances[0]","mask"],vO(J));const H=p(n,["compressionQuality"]);return e!==void 0&&H!=null&&_(e,["parameters","compressionQuality"],H),t}function SL(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["metadata"]);i!=null&&_(e,["metadata"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);a!=null&&_(e,["error"],a);const u=p(n,["response","generateVideoResponse"]);return u!=null&&_(e,["response"],xL(u)),e}function wL(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["metadata"]);i!=null&&_(e,["metadata"],i);const o=p(n,["done"]);o!=null&&_(e,["done"],o);const a=p(n,["error"]);a!=null&&_(e,["error"],a);const u=p(n,["response"]);return u!=null&&_(e,["response"],RL(u)),e}function CL(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["prompt"]);o!=null&&_(t,["instances[0]","prompt"],o);const a=p(e,["image"]);a!=null&&_(t,["instances[0]","image"],df(a));const u=p(e,["video"]);u!=null&&_(t,["instances[0]","video"],mI(u));const d=p(e,["source"]);d!=null&&NL(d,t);const f=p(e,["config"]);return f!=null&&EL(f,t),t}function IL(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["prompt"]);o!=null&&_(t,["instances[0]","prompt"],o);const a=p(e,["image"]);a!=null&&_(t,["instances[0]","image"],Ji(a));const u=p(e,["video"]);u!=null&&_(t,["instances[0]","video"],gI(u));const d=p(e,["source"]);d!=null&&bL(d,t);const f=p(e,["config"]);return f!=null&&AL(f,t),t}function xL(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>ML(u))),_(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&_(e,["raiMediaFilteredCount"],i);const o=p(n,["raiMediaFilteredReasons"]);return o!=null&&_(e,["raiMediaFilteredReasons"],o),e}function RL(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>kL(u))),_(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&_(e,["raiMediaFilteredCount"],i);const o=p(n,["raiMediaFilteredReasons"]);return o!=null&&_(e,["raiMediaFilteredReasons"],o),e}function NL(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const o=p(n,["image"]);e!==void 0&&o!=null&&_(e,["instances[0]","image"],df(o));const a=p(n,["video"]);return e!==void 0&&a!=null&&_(e,["instances[0]","video"],mI(a)),t}function bL(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const o=p(n,["image"]);e!==void 0&&o!=null&&_(e,["instances[0]","image"],Ji(o));const a=p(n,["video"]);return e!==void 0&&a!=null&&_(e,["instances[0]","video"],gI(a)),t}function PL(n){const e={},t=p(n,["_self"]);t!=null&&_(e,["image"],qL(t));const i=p(n,["raiFilteredReason"]);i!=null&&_(e,["raiFilteredReason"],i);const o=p(n,["_self"]);return o!=null&&_(e,["safetyAttributes"],dI(o)),e}function cf(n){const e={},t=p(n,["_self"]);t!=null&&_(e,["image"],cI(t));const i=p(n,["raiFilteredReason"]);i!=null&&_(e,["raiFilteredReason"],i);const o=p(n,["_self"]);o!=null&&_(e,["safetyAttributes"],hI(o));const a=p(n,["prompt"]);return a!=null&&_(e,["enhancedPrompt"],a),e}function DL(n){const e={},t=p(n,["_self"]);t!=null&&_(e,["mask"],cI(t));const i=p(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),_(e,["labels"],o)}return e}function ML(n){const e={},t=p(n,["video"]);return t!=null&&_(e,["video"],yO(t)),e}function kL(n){const e={},t=p(n,["_self"]);return t!=null&&_(e,["video"],_O(t)),e}function UL(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&_(e,["modelConfig"],t);const i=p(n,["audioTimestamp"]);i!=null&&_(e,["audioTimestamp"],i);const o=p(n,["candidateCount"]);o!=null&&_(e,["candidateCount"],o);const a=p(n,["enableAffectiveDialog"]);a!=null&&_(e,["enableAffectiveDialog"],a);const u=p(n,["frequencyPenalty"]);u!=null&&_(e,["frequencyPenalty"],u);const d=p(n,["logprobs"]);d!=null&&_(e,["logprobs"],d);const f=p(n,["maxOutputTokens"]);f!=null&&_(e,["maxOutputTokens"],f);const h=p(n,["mediaResolution"]);h!=null&&_(e,["mediaResolution"],h);const v=p(n,["presencePenalty"]);v!=null&&_(e,["presencePenalty"],v);const E=p(n,["responseJsonSchema"]);E!=null&&_(e,["responseJsonSchema"],E);const A=p(n,["responseLogprobs"]);A!=null&&_(e,["responseLogprobs"],A);const R=p(n,["responseMimeType"]);R!=null&&_(e,["responseMimeType"],R);const L=p(n,["responseModalities"]);L!=null&&_(e,["responseModalities"],L);const F=p(n,["responseSchema"]);F!=null&&_(e,["responseSchema"],F);const U=p(n,["routingConfig"]);U!=null&&_(e,["routingConfig"],U);const J=p(n,["seed"]);J!=null&&_(e,["seed"],J);const H=p(n,["speechConfig"]);H!=null&&_(e,["speechConfig"],fI(H));const z=p(n,["stopSequences"]);z!=null&&_(e,["stopSequences"],z);const se=p(n,["temperature"]);se!=null&&_(e,["temperature"],se);const ee=p(n,["thinkingConfig"]);ee!=null&&_(e,["thinkingConfig"],ee);const fe=p(n,["topK"]);fe!=null&&_(e,["topK"],fe);const O=p(n,["topP"]);if(O!=null&&_(e,["topP"],O),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function VL(n,e){const t={},i=p(e,["model"]);return i!=null&&_(t,["_url","name"],rt(n,i)),t}function LL(n,e){const t={},i=p(e,["model"]);return i!=null&&_(t,["_url","name"],rt(n,i)),t}function OL(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function FL(n){const e={},t=p(n,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function qL(n){const e={},t=p(n,["bytesBase64Encoded"]);t!=null&&_(e,["imageBytes"],lo(t));const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function cI(n){const e={},t=p(n,["gcsUri"]);t!=null&&_(e,["gcsUri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&_(e,["imageBytes"],lo(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["mimeType"],o),e}function df(n){const e={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=p(n,["imageBytes"]);t!=null&&_(e,["bytesBase64Encoded"],lo(t));const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function Ji(n){const e={},t=p(n,["gcsUri"]);t!=null&&_(e,["gcsUri"],t);const i=p(n,["imageBytes"]);i!=null&&_(e,["bytesBase64Encoded"],lo(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["mimeType"],o),e}function BL(n,e,t){const i={},o=p(e,["pageSize"]);t!==void 0&&o!=null&&_(t,["_query","pageSize"],o);const a=p(e,["pageToken"]);t!==void 0&&a!=null&&_(t,["_query","pageToken"],a);const u=p(e,["filter"]);t!==void 0&&u!=null&&_(t,["_query","filter"],u);const d=p(e,["queryBase"]);return t!==void 0&&d!=null&&_(t,["_url","models_url"],nI(n,d)),i}function HL(n,e,t){const i={},o=p(e,["pageSize"]);t!==void 0&&o!=null&&_(t,["_query","pageSize"],o);const a=p(e,["pageToken"]);t!==void 0&&a!=null&&_(t,["_query","pageToken"],a);const u=p(e,["filter"]);t!==void 0&&u!=null&&_(t,["_query","filter"],u);const d=p(e,["queryBase"]);return t!==void 0&&d!=null&&_(t,["_url","models_url"],nI(n,d)),i}function GL(n,e){const t={},i=p(e,["config"]);return i!=null&&BL(n,i,t),t}function zL(n,e){const t={},i=p(e,["config"]);return i!=null&&HL(n,i,t),t}function jL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["_self"]);if(o!=null){let a=iI(o);Array.isArray(a)&&(a=a.map(u=>dg(u))),_(e,["models"],a)}return e}function $L(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const o=p(n,["_self"]);if(o!=null){let a=iI(o);Array.isArray(a)&&(a=a.map(u=>hg(u))),_(e,["models"],a)}return e}function YL(n){const e={},t=p(n,["maskMode"]);t!=null&&_(e,["maskMode"],t);const i=p(n,["segmentationClasses"]);i!=null&&_(e,["maskClasses"],i);const o=p(n,["maskDilation"]);return o!=null&&_(e,["dilation"],o),e}function dg(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["displayName"]);i!=null&&_(e,["displayName"],i);const o=p(n,["description"]);o!=null&&_(e,["description"],o);const a=p(n,["version"]);a!=null&&_(e,["version"],a);const u=p(n,["_self"]);u!=null&&_(e,["tunedModelInfo"],lO(u));const d=p(n,["inputTokenLimit"]);d!=null&&_(e,["inputTokenLimit"],d);const f=p(n,["outputTokenLimit"]);f!=null&&_(e,["outputTokenLimit"],f);const h=p(n,["supportedGenerationMethods"]);return h!=null&&_(e,["supportedActions"],h),e}function hg(n){const e={},t=p(n,["name"]);t!=null&&_(e,["name"],t);const i=p(n,["displayName"]);i!=null&&_(e,["displayName"],i);const o=p(n,["description"]);o!=null&&_(e,["description"],o);const a=p(n,["versionId"]);a!=null&&_(e,["version"],a);const u=p(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(A=>cL(A))),_(e,["endpoints"],E)}const d=p(n,["labels"]);d!=null&&_(e,["labels"],d);const f=p(n,["_self"]);f!=null&&_(e,["tunedModelInfo"],uO(f));const h=p(n,["defaultCheckpointId"]);h!=null&&_(e,["defaultCheckpointId"],h);const v=p(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),_(e,["checkpoints"],E)}return e}function KL(n){const e={},t=p(n,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const i=p(n,["thought"]);i!=null&&_(e,["thought"],i);const o=p(n,["inlineData"]);o!=null&&_(e,["inlineData"],L4(o));const a=p(n,["fileData"]);a!=null&&_(e,["fileData"],dL(a));const u=p(n,["thoughtSignature"]);u!=null&&_(e,["thoughtSignature"],u);const d=p(n,["functionCall"]);d!=null&&_(e,["functionCall"],d);const f=p(n,["codeExecutionResult"]);f!=null&&_(e,["codeExecutionResult"],f);const h=p(n,["executableCode"]);h!=null&&_(e,["executableCode"],h);const v=p(n,["functionResponse"]);v!=null&&_(e,["functionResponse"],v);const E=p(n,["text"]);return E!=null&&_(e,["text"],E),e}function JL(n){const e={},t=p(n,["productImage"]);return t!=null&&_(e,["image"],Ji(t)),e}function QL(n,e){const t={},i=p(n,["numberOfImages"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const o=p(n,["baseSteps"]);e!==void 0&&o!=null&&_(e,["parameters","editConfig","baseSteps"],o);const a=p(n,["outputGcsUri"]);e!==void 0&&a!=null&&_(e,["parameters","storageUri"],a);const u=p(n,["seed"]);e!==void 0&&u!=null&&_(e,["parameters","seed"],u);const d=p(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&_(e,["parameters","safetySetting"],d);const f=p(n,["personGeneration"]);e!==void 0&&f!=null&&_(e,["parameters","personGeneration"],f);const h=p(n,["addWatermark"]);e!==void 0&&h!=null&&_(e,["parameters","addWatermark"],h);const v=p(n,["outputMimeType"]);e!==void 0&&v!=null&&_(e,["parameters","outputOptions","mimeType"],v);const E=p(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&_(e,["parameters","outputOptions","compressionQuality"],E);const A=p(n,["enhancePrompt"]);e!==void 0&&A!=null&&_(e,["parameters","enhancePrompt"],A);const R=p(n,["labels"]);return e!==void 0&&R!=null&&_(e,["labels"],R),t}function WL(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["source"]);o!=null&&ZL(o,t);const a=p(e,["config"]);return a!=null&&QL(a,t),t}function XL(n){const e={},t=p(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>cf(o))),_(e,["generatedImages"],i)}return e}function ZL(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const o=p(n,["personImage"]);e!==void 0&&o!=null&&_(e,["instances[0]","personImage","image"],Ji(o));const a=p(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>JL(d))),_(e,["instances[0]","productImages"],u)}return t}function eO(n){const e={},t=p(n,["referenceImage"]);t!=null&&_(e,["referenceImage"],Ji(t));const i=p(n,["referenceId"]);i!=null&&_(e,["referenceId"],i);const o=p(n,["referenceType"]);o!=null&&_(e,["referenceType"],o);const a=p(n,["maskImageConfig"]);a!=null&&_(e,["maskImageConfig"],YL(a));const u=p(n,["controlImageConfig"]);u!=null&&_(e,["controlImageConfig"],z4(u));const d=p(n,["styleImageConfig"]);d!=null&&_(e,["styleImageConfig"],d);const f=p(n,["subjectImageConfig"]);return f!=null&&_(e,["subjectImageConfig"],f),e}function dI(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&_(e,["categories"],t);const i=p(n,["safetyAttributes","scores"]);i!=null&&_(e,["scores"],i);const o=p(n,["contentType"]);return o!=null&&_(e,["contentType"],o),e}function hI(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&_(e,["categories"],t);const i=p(n,["safetyAttributes","scores"]);i!=null&&_(e,["scores"],i);const o=p(n,["contentType"]);return o!=null&&_(e,["contentType"],o),e}function tO(n){const e={};if(p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=p(n,["category"]);t!=null&&_(e,["category"],t);const i=p(n,["threshold"]);return i!=null&&_(e,["threshold"],i),e}function nO(n){const e={},t=p(n,["image"]);return t!=null&&_(e,["image"],Ji(t)),e}function iO(n,e){const t={},i=p(n,["mode"]);e!==void 0&&i!=null&&_(e,["parameters","mode"],i);const o=p(n,["maxPredictions"]);e!==void 0&&o!=null&&_(e,["parameters","maxPredictions"],o);const a=p(n,["confidenceThreshold"]);e!==void 0&&a!=null&&_(e,["parameters","confidenceThreshold"],a);const u=p(n,["maskDilation"]);e!==void 0&&u!=null&&_(e,["parameters","maskDilation"],u);const d=p(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&_(e,["parameters","binaryColorThreshold"],d);const f=p(n,["labels"]);return e!==void 0&&f!=null&&_(e,["labels"],f),t}function sO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["source"]);o!=null&&oO(o,t);const a=p(e,["config"]);return a!=null&&iO(a,t),t}function rO(n){const e={},t=p(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>DL(o))),_(e,["generatedMasks"],i)}return e}function oO(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const o=p(n,["image"]);e!==void 0&&o!=null&&_(e,["instances[0]","image"],Ji(o));const a=p(n,["scribbleImage"]);return e!==void 0&&a!=null&&_(e,["instances[0]","scribble"],nO(a)),t}function fI(n){const e={},t=p(n,["voiceConfig"]);if(t!=null&&_(e,["voiceConfig"],t),p(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=p(n,["languageCode"]);return i!=null&&_(e,["languageCode"],i),e}function aO(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearch"]);i!=null&&_(e,["googleSearch"],FL(i));const o=p(n,["googleSearchRetrieval"]);if(o!=null&&_(e,["googleSearchRetrieval"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["googleMaps"]);a!=null&&_(e,["googleMaps"],OL(a));const u=p(n,["urlContext"]);u!=null&&_(e,["urlContext"],u);const d=p(n,["computerUse"]);d!=null&&_(e,["computerUse"],d);const f=p(n,["codeExecution"]);return f!=null&&_(e,["codeExecution"],f),e}function pI(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>hL(A))),_(e,["functionDeclarations"],E)}const i=p(n,["retrieval"]);i!=null&&_(e,["retrieval"],i);const o=p(n,["googleSearch"]);o!=null&&_(e,["googleSearch"],o);const a=p(n,["googleSearchRetrieval"]);a!=null&&_(e,["googleSearchRetrieval"],a);const u=p(n,["enterpriseWebSearch"]);u!=null&&_(e,["enterpriseWebSearch"],u);const d=p(n,["googleMaps"]);d!=null&&_(e,["googleMaps"],d);const f=p(n,["urlContext"]);f!=null&&_(e,["urlContext"],f);const h=p(n,["computerUse"]);h!=null&&_(e,["computerUse"],h);const v=p(n,["codeExecution"]);return v!=null&&_(e,["codeExecution"],v),e}function lO(n){const e={},t=p(n,["baseModel"]);t!=null&&_(e,["baseModel"],t);const i=p(n,["createTime"]);i!=null&&_(e,["createTime"],i);const o=p(n,["updateTime"]);return o!=null&&_(e,["updateTime"],o),e}function uO(n){const e={},t=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&_(e,["baseModel"],t);const i=p(n,["createTime"]);i!=null&&_(e,["createTime"],i);const o=p(n,["updateTime"]);return o!=null&&_(e,["updateTime"],o),e}function cO(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const o=p(n,["description"]);e!==void 0&&o!=null&&_(e,["description"],o);const a=p(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&_(e,["defaultCheckpointId"],a),t}function dO(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const o=p(n,["description"]);e!==void 0&&o!=null&&_(e,["description"],o);const a=p(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&_(e,["defaultCheckpointId"],a),t}function hO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","name"],rt(n,i));const o=p(e,["config"]);return o!=null&&cO(o,t),t}function fO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["config"]);return o!=null&&dO(o,t),t}function pO(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const o=p(n,["includeRaiReason"]);e!==void 0&&o!=null&&_(e,["parameters","includeRaiReason"],o);const a=p(n,["outputMimeType"]);e!==void 0&&a!=null&&_(e,["parameters","outputOptions","mimeType"],a);const u=p(n,["outputCompressionQuality"]);e!==void 0&&u!=null&&_(e,["parameters","outputOptions","compressionQuality"],u);const d=p(n,["enhanceInputImage"]);e!==void 0&&d!=null&&_(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=p(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&_(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=p(n,["labels"]);e!==void 0&&h!=null&&_(e,["labels"],h);const v=p(n,["numberOfImages"]);e!==void 0&&v!=null&&_(e,["parameters","sampleCount"],v);const E=p(n,["mode"]);return e!==void 0&&E!=null&&_(e,["parameters","mode"],E),t}function mO(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["_url","model"],rt(n,i));const o=p(e,["image"]);o!=null&&_(t,["instances[0]","image"],Ji(o));const a=p(e,["upscaleFactor"]);a!=null&&_(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=p(e,["config"]);return u!=null&&pO(u,t),t}function gO(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>cf(a))),_(e,["generatedImages"],o)}return e}function yO(n){const e={},t=p(n,["uri"]);t!=null&&_(e,["uri"],t);const i=p(n,["encodedVideo"]);i!=null&&_(e,["videoBytes"],lo(i));const o=p(n,["encoding"]);return o!=null&&_(e,["mimeType"],o),e}function _O(n){const e={},t=p(n,["gcsUri"]);t!=null&&_(e,["uri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&_(e,["videoBytes"],lo(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["mimeType"],o),e}function vO(n){const e={},t=p(n,["image"]);t!=null&&_(e,["_self"],Ji(t));const i=p(n,["maskMode"]);return i!=null&&_(e,["maskMode"],i),e}function TO(n){const e={},t=p(n,["image"]);t!=null&&_(e,["image"],df(t));const i=p(n,["referenceType"]);return i!=null&&_(e,["referenceType"],i),e}function EO(n){const e={},t=p(n,["image"]);t!=null&&_(e,["image"],Ji(t));const i=p(n,["referenceType"]);return i!=null&&_(e,["referenceType"],i),e}function mI(n){const e={},t=p(n,["uri"]);t!=null&&_(e,["uri"],t);const i=p(n,["videoBytes"]);i!=null&&_(e,["encodedVideo"],lo(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["encoding"],o),e}function gI(n){const e={},t=p(n,["uri"]);t!=null&&_(e,["gcsUri"],t);const i=p(n,["videoBytes"]);i!=null&&_(e,["bytesBase64Encoded"],lo(i));const o=p(n,["mimeType"]);return o!=null&&_(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AO="Content-Type",SO="X-Server-Timeout",wO="User-Agent",fg="x-goog-api-client",CO="1.27.0",IO=`google-genai-sdk/${CO}`,xO="v1beta1",RO="v1beta",KA=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class NO{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:xO,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:RO,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&t?.timeout>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&bO(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await JA(o),new lg(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await JA(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return ul(this,arguments,function*(){const o=(t=e?.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:f}=yield xt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(f,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),R=A.status,L=A.code,F=`got status: ${R}. ${JSON.stringify(E)}`;if(L>=400&&L<600)throw new lf({message:F,status:L})}}catch(E){if(E.name==="ApiError")throw E}u+=h;let v=u.match(KA);for(;v;){const E=v[1];try{const A=new Response(E,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield xt(new lg(A)),u=u.slice(v[0].length),v=u.match(KA)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=IO+" "+this.clientOptions.userAgentExtra;return e[wO]=t,e[fg]=t,e[AO]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(SO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t?.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const f=await this.fetchUploadUrl(o,t);return a.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let o={};t?.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},u=await this.request({path:Se("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:o});if(!u||!u?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(i=u?.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function JA(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new lf({message:o,status:t}):new Error(o)}}function bO(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f)){const h=u[f],v=d[f];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?d[f]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),d[f]=h)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PO="mcp_used/unknown";let DO=!1;function yI(n){for(const e of n)if(MO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return DO}function _I(n){var e;const t=(e=n[fg])!==null&&e!==void 0?e:"";n[fg]=(t+` ${PO}`).trimStart()}function MO(n){return n!==null&&typeof n=="object"&&n instanceof Ey}function kO(n,e=100){return ul(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield xt(n.listTools({cursor:i}));for(const u of a.tools)yield yield xt(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class Ey{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ey(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,f=(t=void 0,Yu(kO(v))),h;h=await f.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const E=o;u.push(E);const A=E.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),FU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UO(n,e,t){const i=new PU;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class VO{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=FO(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const v=new Promise(z=>{h=z}),E=e.callbacks,A=function(){h({})},R=this.apiClient,L={onopen:A,onmessage:z=>{UO(R,E.onmessage,z)},onerror:(t=E?.onerror)!==null&&t!==void 0?t:function(z){},onclose:(i=E?.onclose)!==null&&i!==void 0?i:function(z){}},F=this.webSocketFactory.create(f,OO(u),L);F.connect(),await v;const H={setup:{model:rt(this.apiClient,e.model)}};return F.send(JSON.stringify(H)),new LO(F,this.apiClient)}}class LO{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=R4(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=x4(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(el.PLAY)}pause(){this.sendPlaybackControl(el.PAUSE)}stop(){this.sendPlaybackControl(el.STOP)}resetContext(){this.sendPlaybackControl(el.RESET_CONTEXT)}close(){this.conn.close()}}function OO(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function FO(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function BO(n,e,t){const i=new bU;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=P4(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class HO{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new VO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&yI(e.config.tools)&&_I(E);const A=$O(E);if(this.apiClient.isVertexAI())v=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,v);else{const b=this.apiClient.getApiKey();let M="BidiGenerateContent",k="key";b?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",k="access_token"),v=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${M}?${k}=${b}`}let R=()=>{};const L=new Promise(b=>{R=b}),F=e.callbacks,U=function(){var b;(b=F?.onopen)===null||b===void 0||b.call(F),R({})},J=this.apiClient,H={onopen:U,onmessage:b=>{BO(J,F.onmessage,b)},onerror:(t=F?.onerror)!==null&&t!==void 0?t:function(b){},onclose:(i=F?.onclose)!==null&&i!==void 0?i:function(b){}},z=this.webSocketFactory.create(v,jO(A),H);z.connect(),await L;let se=rt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const b=this.apiClient.getProject(),M=this.apiClient.getLocation();se=`projects/${b}/locations/${M}/`+se}let ee={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ph.AUDIO]}:e.config.responseModalities=[Ph.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const fe=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],O=[];for(const b of fe)if(this.isCallableTool(b)){const M=b;O.push(await M.tool())}else O.push(b);O.length>0&&(e.config.tools=O);const P={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ee=I4(this.apiClient,P):ee=C4(this.apiClient,P),delete ee.config,z.send(JSON.stringify(ee)),new zO(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const GO={turnComplete:!0};class zO{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Ii(t.turns),e.isVertexAI()||(i=i.map(o=>uf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(qO)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},GO),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:b4(e)}:t={realtimeInput:N4(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function jO(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function $O(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QA=10;function WA(n){var e,t,i;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n?.tools)!==null&&t!==void 0?t:[])if(cl(u)){o=!0;break}if(!o)return!0;const a=(i=n?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function cl(n){return"callTool"in n&&typeof n.callTool=="function"}function YO(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>cl(o)))!==null&&i!==void 0?i:!1}function KO(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!cl(o)))!==null&&i!==void 0?i:!1}function XA(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JO extends aa{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!YO(t)||WA(t.config))return await this.generateContentInternal(f);if(KO(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,v;const E=Ii(f.contents),A=(a=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:QA;let R=0;for(;R<A&&(h=await this.generateContentInternal(f),!(!h.functionCalls||h.functionCalls.length===0));){const L=h.candidates[0].content,F=[];for(const U of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(cl(U)){const H=await U.callTool(h.functionCalls);F.push(...H)}R++,v={role:"user",parts:F},f.contents=Ii(f.contents),f.contents.push(L),f.contents.push(v),XA(f.config)&&(E.push(L),E.push(v))}return XA(f.config)&&(h.automaticFunctionCallingHistory=E),h},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),WA(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i?.generatedImages)for(const f of i.generatedImages)f&&f?.safetyAttributes&&((o=f?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=f?.safetyAttributes:u.push(f);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ec(ta.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((f=(d=t.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async f=>cl(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&yI(e.config.tools)){const f=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),_I(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(cl(u)){const d=u,f=await d.tool();for(const h of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:QA;let u=!1,d=0;const f=await this.initAfcToolsMap(e);return(function(h,v,E){var A,R;return ul(this,arguments,function*(){for(var L,F,U,J;d<a;){u&&(d++,u=!1);const ee=yield xt(h.processParamsMaybeAddMcpUsage(E)),fe=yield xt(h.generateContentStreamInternal(ee)),O=[],P=[];try{for(var H=!0,z=(F=void 0,Yu(fe)),se;se=yield xt(z.next()),L=se.done,!L;H=!0){J=se.value,H=!1;const b=J;if(yield yield xt(b),b.candidates&&(!((A=b.candidates[0])===null||A===void 0)&&A.content)){P.push(b.candidates[0].content);for(const M of(R=b.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(d<a&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(M.functionCall.name)){const k=yield xt(v.get(M.functionCall.name).callTool([M.functionCall]));O.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(b){F={error:b}}finally{try{!H&&!L&&(U=z.return)&&(yield xt(U.call(z)))}finally{if(F)throw F.error}}if(O.length>0){u=!0;const b=new Pu;b.candidates=[{content:{role:"user",parts:O}}],yield yield xt(b);const M=[];M.push(...P),M.push({role:"user",parts:O});const k=Ii(E.contents).concat(M);E.contents=k}else break}})})(this,f,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=jA(this.apiClient,e);return d=Se("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=YA(v),A=new Pu;return Object.assign(A,E),A})}else{const h=zA(this.apiClient,e);return d=Se("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=$A(v),A=new Pu;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=jA(this.apiClient,e);return d=Se("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return ul(this,arguments,function*(){var A,R,L,F;try{for(var U=!0,J=Yu(E),H;H=yield xt(J.next()),A=H.done,!A;U=!0){F=H.value,U=!1;const z=F,se=YA(yield xt(z.json()));se.sdkHttpResponse={headers:z.headers};const ee=new Pu;Object.assign(ee,se),yield yield xt(ee)}}catch(z){R={error:z}}finally{try{!U&&!A&&(L=J.return)&&(yield xt(L.call(J)))}finally{if(R)throw R.error}}})})}else{const h=zA(this.apiClient,e);return d=Se("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return ul(this,arguments,function*(){var A,R,L,F;try{for(var U=!0,J=Yu(E),H;H=yield xt(J.next()),A=H.done,!A;U=!0){F=H.value,U=!1;const z=F,se=$A(yield xt(z.json()));se.sdkHttpResponse={headers:z.headers};const ee=new Pu;Object.assign(ee,se),yield yield xt(ee)}}catch(z){R={error:z}}finally{try{!U&&!A&&(L=J.return)&&(yield xt(L.call(J)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=aL(this.apiClient,e);return d=Se("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=uL(v),A=new RA;return Object.assign(A,E),A})}else{const h=oL(this.apiClient,e);return d=Se("{model}:batchEmbedContents",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=lL(v),A=new RA;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=_L(this.apiClient,e);return d=Se("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=TL(v),A=new NA;return Object.assign(A,E),A})}else{const h=yL(this.apiClient,e);return d=Se("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=vL(v),A=new NA;return Object.assign(A,E),A})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=nL(this.apiClient,e);return a=Se("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const h=iL(f),v=new AU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=mO(this.apiClient,e);return a=Se("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const h=gO(f),v=new SU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=WL(this.apiClient,e);return a=Se("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=XL(f),v=new wU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=sO(this.apiClient,e);return a=Se("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const h=rO(f),v=new CU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=LL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>hg(v))}else{const h=VL(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>dg(v))}}async listInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=zL(this.apiClient,e);return d=Se("{models_url}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=$L(v),A=new bA;return Object.assign(A,E),A})}else{const h=GL(this.apiClient,e);return d=Se("{models_url}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=jL(v),A=new bA;return Object.assign(A,E),A})}}async update(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=fO(this.apiClient,e);return d=Se("{model}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>hg(v))}else{const h=hO(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>dg(v))}}async delete(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=X4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=eL(v),A=new PA;return Object.assign(A,E),A})}else{const h=W4(this.apiClient,e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=Z4(v),A=new PA;return Object.assign(A,E),A})}}async countTokens(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=K4(this.apiClient,e);return d=Se("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=Q4(v),A=new DA;return Object.assign(A,E),A})}else{const h=Y4(this.apiClient,e);return d=Se("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=J4(v),A=new DA;return Object.assign(A,E),A})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=q4(this.apiClient,e);return a=Se("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const h=B4(f),v=new IU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=IL(this.apiClient,e);return d=Se("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=wL(v),A=new Dh;return Object.assign(A,E),A})}else{const h=CL(this.apiClient,e);return d=Se("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=SL(v),A=new Dh;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QO extends aa{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=vU(e);return d=Se("{operationName}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const h=_U(e);return d=Se("{operationName}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=dU(e);return a=Se("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WO(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["data"]);t!=null&&_(e,["data"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function XO(n){const e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>o6(a))),_(e,["parts"],o)}const i=p(n,["role"]);return i!=null&&_(e,["role"],i),e}function ZO(n,e,t){const i={},o=p(e,["expireTime"]);t!==void 0&&o!=null&&_(t,["expireTime"],o);const a=p(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&_(t,["newSessionExpireTime"],a);const u=p(e,["uses"]);t!==void 0&&u!=null&&_(t,["uses"],u);const d=p(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&_(t,["bidiGenerateContentSetup"],r6(n,d));const f=p(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&_(t,["fieldMask"],f),i}function e6(n,e){const t={},i=p(e,["config"]);return i!=null&&_(t,["config"],ZO(n,i,t)),t}function t6(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function n6(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function i6(n){const e={},t=p(n,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function s6(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig"],i);const o=p(n,["responseModalities"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","responseModalities"],o);const a=p(n,["temperature"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","temperature"],a);const u=p(n,["topP"]);e!==void 0&&u!=null&&_(e,["setup","generationConfig","topP"],u);const d=p(n,["topK"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","mediaResolution"],h);const v=p(n,["seed"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","seed"],v);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&_(e,["setup","generationConfig","speechConfig"],Ty(E));const A=p(n,["thinkingConfig"]);e!==void 0&&A!=null&&_(e,["setup","generationConfig","thinkingConfig"],A);const R=p(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=p(n,["systemInstruction"]);e!==void 0&&L!=null&&_(e,["setup","systemInstruction"],XO(bn(L)));const F=p(n,["tools"]);if(e!==void 0&&F!=null){let fe=Il(F);Array.isArray(fe)&&(fe=fe.map(O=>l6(Cl(O)))),_(e,["setup","tools"],fe)}const U=p(n,["sessionResumption"]);e!==void 0&&U!=null&&_(e,["setup","sessionResumption"],a6(U));const J=p(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&_(e,["setup","inputAudioTranscription"],J);const H=p(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&_(e,["setup","outputAudioTranscription"],H);const z=p(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&_(e,["setup","realtimeInputConfig"],z);const se=p(n,["contextWindowCompression"]);e!==void 0&&se!=null&&_(e,["setup","contextWindowCompression"],se);const ee=p(n,["proactivity"]);return e!==void 0&&ee!=null&&_(e,["setup","proactivity"],ee),t}function r6(n,e){const t={},i=p(e,["model"]);i!=null&&_(t,["setup","model"],rt(n,i));const o=p(e,["config"]);return o!=null&&_(t,["config"],s6(o,t)),t}function o6(n){const e={},t=p(n,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const i=p(n,["thought"]);i!=null&&_(e,["thought"],i);const o=p(n,["inlineData"]);o!=null&&_(e,["inlineData"],WO(o));const a=p(n,["fileData"]);a!=null&&_(e,["fileData"],t6(a));const u=p(n,["thoughtSignature"]);u!=null&&_(e,["thoughtSignature"],u);const d=p(n,["functionCall"]);d!=null&&_(e,["functionCall"],d);const f=p(n,["codeExecutionResult"]);f!=null&&_(e,["codeExecutionResult"],f);const h=p(n,["executableCode"]);h!=null&&_(e,["executableCode"],h);const v=p(n,["functionResponse"]);v!=null&&_(e,["functionResponse"],v);const E=p(n,["text"]);return E!=null&&_(e,["text"],E),e}function a6(n){const e={},t=p(n,["handle"]);if(t!=null&&_(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function l6(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),_(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearch"]);i!=null&&_(e,["googleSearch"],i6(i));const o=p(n,["googleSearchRetrieval"]);if(o!=null&&_(e,["googleSearchRetrieval"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["googleMaps"]);a!=null&&_(e,["googleMaps"],n6(a));const u=p(n,["urlContext"]);u!=null&&_(e,["urlContext"],u);const d=p(n,["computerUse"]);d!=null&&_(e,["computerUse"],d);const f=p(n,["codeExecution"]);return f!=null&&_(e,["codeExecution"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u6(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function c6(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=u6(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?n.fieldMask=a:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const f=[];a&&f.push(a),d.length>0&&f.push(...d),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class d6 extends aa{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=e6(this.apiClient,e);a=Se("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=c6(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h6(n,e){const t={},i=p(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function f6(n,e){const t={},i=p(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function p6(n,e,t){const i={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=p(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&_(e,["displayName"],o),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(n,["epochCount"]);e!==void 0&&a!=null&&_(e,["tuningTask","hyperparameters","epochCount"],a);const u=p(n,["learningRateMultiplier"]);if(u!=null&&_(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=p(n,["batchSize"]);e!==void 0&&d!=null&&_(e,["tuningTask","hyperparameters","batchSize"],d);const f=p(n,["learningRate"]);if(e!==void 0&&f!=null&&_(e,["tuningTask","hyperparameters","learningRate"],f),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return i}function m6(n,e,t){const i={},o=p(n,["validationDataset"]);e!==void 0&&o!=null&&_(e,["supervisedTuningSpec"],b6(o));const a=p(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&_(e,["tunedModelDisplayName"],a);const u=p(n,["description"]);e!==void 0&&u!=null&&_(e,["description"],u);const d=p(n,["epochCount"]);e!==void 0&&d!=null&&_(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const f=p(n,["learningRateMultiplier"]);e!==void 0&&f!=null&&_(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const h=p(n,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&_(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h);const v=p(n,["adapterSize"]);if(e!==void 0&&v!=null&&_(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v),p(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=p(n,["labels"]);return e!==void 0&&E!=null&&_(e,["labels"],E),i}function g6(n,e){const t={},i=p(n,["baseModel"]);i!=null&&_(t,["baseModel"],i);const o=p(n,["preTunedModel"]);o!=null&&_(t,["preTunedModel"],o);const a=p(n,["trainingDataset"]);a!=null&&_(t,["tuningTask","trainingData"],x6(a));const u=p(n,["config"]);return u!=null&&p6(u,t),t}function y6(n,e){const t={},i=p(n,["baseModel"]);i!=null&&_(t,["baseModel"],i);const o=p(n,["preTunedModel"]);o!=null&&_(t,["preTunedModel"],o);const a=p(n,["trainingDataset"]);a!=null&&R6(a,t);const u=p(n,["config"]);return u!=null&&m6(u,t),t}function _6(n,e){const t={},i=p(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function v6(n,e){const t={},i=p(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function T6(n,e,t){const i={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&_(e,["_query","pageSize"],o);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&_(e,["_query","pageToken"],a);const u=p(n,["filter"]);return e!==void 0&&u!=null&&_(e,["_query","filter"],u),i}function E6(n,e,t){const i={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&_(e,["_query","pageSize"],o);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&_(e,["_query","pageToken"],a);const u=p(n,["filter"]);return e!==void 0&&u!=null&&_(e,["_query","filter"],u),i}function A6(n,e){const t={},i=p(n,["config"]);return i!=null&&T6(i,t),t}function S6(n,e){const t={},i=p(n,["config"]);return i!=null&&E6(i,t),t}function w6(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const o=p(n,["nextPageToken"]);o!=null&&_(t,["nextPageToken"],o);const a=p(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>vI(d))),_(t,["tuningJobs"],u)}return t}function C6(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const o=p(n,["nextPageToken"]);o!=null&&_(t,["nextPageToken"],o);const a=p(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>pg(d))),_(t,["tuningJobs"],u)}return t}function I6(n,e){const t={},i=p(n,["name"]);i!=null&&_(t,["model"],i);const o=p(n,["name"]);return o!=null&&_(t,["endpoint"],o),t}function x6(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),_(t,["examples","examples"],o)}return t}function R6(n,e,t){const i={},o=p(n,["gcsUri"]);e!==void 0&&o!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],o);const a=p(n,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],a),p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function vI(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const o=p(n,["name"]);o!=null&&_(t,["name"],o);const a=p(n,["state"]);a!=null&&_(t,["state"],eI(a));const u=p(n,["createTime"]);u!=null&&_(t,["createTime"],u);const d=p(n,["tuningTask","startTime"]);d!=null&&_(t,["startTime"],d);const f=p(n,["tuningTask","completeTime"]);f!=null&&_(t,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&_(t,["updateTime"],h);const v=p(n,["description"]);v!=null&&_(t,["description"],v);const E=p(n,["baseModel"]);E!=null&&_(t,["baseModel"],E);const A=p(n,["_self"]);return A!=null&&_(t,["tunedModel"],I6(A)),t}function pg(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const o=p(n,["name"]);o!=null&&_(t,["name"],o);const a=p(n,["state"]);a!=null&&_(t,["state"],eI(a));const u=p(n,["createTime"]);u!=null&&_(t,["createTime"],u);const d=p(n,["startTime"]);d!=null&&_(t,["startTime"],d);const f=p(n,["endTime"]);f!=null&&_(t,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&_(t,["updateTime"],h);const v=p(n,["error"]);v!=null&&_(t,["error"],v);const E=p(n,["description"]);E!=null&&_(t,["description"],E);const A=p(n,["baseModel"]);A!=null&&_(t,["baseModel"],A);const R=p(n,["tunedModel"]);R!=null&&_(t,["tunedModel"],R);const L=p(n,["preTunedModel"]);L!=null&&_(t,["preTunedModel"],L);const F=p(n,["supervisedTuningSpec"]);F!=null&&_(t,["supervisedTuningSpec"],F);const U=p(n,["tuningDataStats"]);U!=null&&_(t,["tuningDataStats"],U);const J=p(n,["encryptionSpec"]);J!=null&&_(t,["encryptionSpec"],J);const H=p(n,["partnerModelTuningSpec"]);H!=null&&_(t,["partnerModelTuningSpec"],H);const z=p(n,["customBaseModel"]);z!=null&&_(t,["customBaseModel"],z);const se=p(n,["experiment"]);se!=null&&_(t,["experiment"],se);const ee=p(n,["labels"]);ee!=null&&_(t,["labels"],ee);const fe=p(n,["outputUri"]);fe!=null&&_(t,["outputUri"],fe);const O=p(n,["pipelineJob"]);O!=null&&_(t,["pipelineJob"],O);const P=p(n,["serviceAccount"]);P!=null&&_(t,["serviceAccount"],P);const b=p(n,["tunedModelDisplayName"]);b!=null&&_(t,["tunedModelDisplayName"],b);const M=p(n,["veoTuningSpec"]);return M!=null&&_(t,["veoTuningSpec"],M),t}function N6(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const o=p(n,["name"]);o!=null&&_(t,["name"],o);const a=p(n,["metadata"]);a!=null&&_(t,["metadata"],a);const u=p(n,["done"]);u!=null&&_(t,["done"],u);const d=p(n,["error"]);return d!=null&&_(t,["error"],d),t}function b6(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&_(t,["validationDatasetUri"],i);const o=p(n,["vertexDatasetResource"]);return o!=null&&_(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P6 extends aa{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Ec(ta.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:ag.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=v6(e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>pg(v))}else{const h=_6(e);return d=Se("{name}",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>vI(v))}}async listInternal(e){var t,i,o,a;let u,d="",f={};if(this.apiClient.isVertexAI()){const h=S6(e);return d=Se("tuningJobs",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=C6(v),A=new MA;return Object.assign(A,E),A})}else{const h=A6(e);return d=Se("tunedModels",h._url),f=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=w6(v),A=new MA;return Object.assign(A,E),A})}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const f=f6(e);u=Se("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=h6(e);u=Se("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=y6(e);return a=Se("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>pg(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=g6(e);return a=Se("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>N6(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D6{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const M6=1024*1024*8,k6=3,U6=1e3,V6=2,xm="x-goog-upload-status";async function L6(n,e,t){var i,o,a;let u=0,d=0,f=new lg(new Response),h="upload";for(u=n.size;d<u;){const E=Math.min(M6,u-d),A=n.slice(d,d+E);d+E>=u&&(h+=", finalize");let R=0,L=U6;for(;R<k6&&(f=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(d),"Content-Length":String(E)}}}),!(!((i=f?.headers)===null||i===void 0)&&i[xm]));)R++,await F6(L),L=L*V6;if(d+=E,((o=f?.headers)===null||o===void 0?void 0:o[xm])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await f?.json();if(((a=f?.headers)===null||a===void 0?void 0:a[xm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function O6(n){return{size:n.size,type:n.type}}function F6(n){return new Promise(e=>setTimeout(e,n))}class q6{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await L6(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await O6(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B6{create(e,t,i){return new H6(e,t,i)}}class H6{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZA="x-goog-api-key";class G6{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(ZA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ZA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z6="gl-node/";class j6{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=uU(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new G6(this.apiKey);this.apiClient=new NO({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:z6+"web",uploader:new q6,downloader:new D6}),this.models=new JO(this.apiClient),this.live=new HO(this.apiClient,o,new B6),this.batches=new RV(this.apiClient),this.chats=new o4(this.models,this.apiClient),this.caches=new i4(this.apiClient),this.files=new g4(this.apiClient),this.operations=new QO(this.apiClient),this.authTokens=new d6(this.apiClient),this.tunings=new P6(this.apiClient)}}const hf=new j6({apiKey:"AIzaSyAVBBw2bRGN8JUjZZyfjYIScdpwv6pGx9c"});async function $6(n,e){try{const i=`You are a product name translator for a quick commerce app in India.

Available products (format: id: name (telugu, hindi)):
${e.map(d=>`${d.id}: ${d.name} (${d.teluguName}, ${d.hindiName})`).join(`
`)}

User input: "${n}"

Task: Extract product names, quantities, and units from the user's input. The input may be in Telugu, English, Hindi, or Hinglish.

Match the input to products in the database using:
- Exact matches
- Synonyms (e.g., "dal" = "pappu" = "lentils")
- Telugu names (e.g., "" = "Milk", "" = "Onion")
- Common misspellings

Return a JSON array with this structure:
[
  {
    "productId": "product_id_from_database",
    "productName": "standardized product name",
    "quantity": number or null,
    "unit": "kg/litre/piece/packet" or null,
    "confidence": 0.0 to 1.0
  }
]

If no products match, return an empty array [].
Only return valid JSON, no explanations.`,u=((await hf.models.generateContent({model:"gemini-2.0-flash-exp",contents:[{role:"user",parts:[{text:i}]}]})).text||"").match(/\[[\s\S]*\]/);return u?JSON.parse(u[0]):[]}catch(t){return console.error("[Gemini] Translation error:",t),[]}}async function TI(n,e){try{const t=e.map(d=>{const f=d.nameEn||d.name||"",h=d.nameTe||"",v=h?`${f} / ${h}`:f;return`${d.id}: ${v} (${d.category})`}).join(`
`),i=`You are a smart product search assistant for a quick commerce app.

User query: "${n}"

Available products (format: id: English Name / Telugu Name (category)):
${t}

Find products that match the user's intent. Consider:
- Synonyms (e.g., "vegetables" includes tomato, onion, etc.)
- Category matches (e.g., "breakfast items" includes milk, bread, etc.)
- Telugu/Hindi/English variations (e.g.,  = Milk, doodh = milk)
- Common misspellings

Return a JSON array of matching product IDs ordered by relevance:
["product_id_1", "product_id_2", ...]

Return up to 10 most relevant matches.
Only return valid JSON array, no explanations.`,u=((await hf.models.generateContent({model:"gemini-2.0-flash-exp",contents:[{role:"user",parts:[{text:i}]}]})).text||"").match(/\[[\s\S]*\]/);if(u){const d=JSON.parse(u[0]);return e.filter(f=>d.includes(f.id))}return[]}catch(t){return console.error("[Gemini] Semantic search error:",t),[]}}async function Y6(n){try{const e=`You are helping a shopkeeper add products to their inventory. They spoke this product name: "${n}"

Generate both English and Telugu names for this product:

Rules:
- If they spoke in Telugu, provide the proper English translation
- If they spoke in English, provide the proper Telugu translation
- If it's a mix, identify the product and provide both proper names
- Use commonly used names in Indian commerce
- Keep names simple and accurate

Return your response in this exact format:
ENGLISH: [English name]
TELUGU: [Telugu name]

Example input: ""
Example output:
ENGLISH: Tomato
TELUGU: 

Example input: "onion"
Example output:
ENGLISH: Onion
TELUGU: 

Now generate for: "${n}"`,i=((await hf.models.generateContent({model:"gemini-2.0-flash-exp",contents:[{role:"user",parts:[{text:e}]}]})).text||"").trim(),o=i.match(/ENGLISH:\s*(.+)/i),a=i.match(/TELUGU:\s*(.+)/i);return{english:o?o[1].trim():n,telugu:a?a[1].trim():n}}catch(e){return console.error("[Gemini] Bilingual generation error:",e),{english:n,telugu:n}}}async function Ay(n,e="audio/webm"){try{console.log("[Gemini] Starting audio transcription...");const i=((await hf.models.generateContent({model:"gemini-2.0-flash-exp",contents:[{role:"user",parts:[{text:"Listen to this audio and transcribe exactly what was said. The audio may be in Telugu, English, Hindi, or a mix. Return ONLY the transcribed text, no explanations or additional commentary."},{inlineData:{mimeType:e,data:n}}]}]})).text||"").trim();if(console.log("[Gemini] Transcription result:",i),!i)throw new Error("No speech detected in audio");return i}catch(t){throw console.error("[Gemini] Audio transcription error:",t),t}}const Zs={vegetables:{tomato:{english:["tomato","tomatoes"],telugu:["",""],hindi:["tamatar",""],aliases:["tamato"]},onion:{english:["onion","onions"],telugu:["","",""],hindi:["pyaz","kanda",""],aliases:["ulli","ullipaya"]},potato:{english:["potato","potatoes"],telugu:["",""],hindi:["aloo",""],aliases:["bangaladumpa"]},carrot:{english:["carrot","carrots"],telugu:["",""],hindi:["gajar",""],aliases:["gajjari"]},cauliflower:{english:["cauliflower"],telugu:["",""],hindi:["gobhi","phool gobhi",""],aliases:["gobi"]},cabbage:{english:["cabbage"],telugu:["",""],hindi:["patta gobhi"," "],aliases:["gosu"]},beans:{english:["beans","green beans"],telugu:[" ",""],hindi:["sem","beans",""],aliases:["chikkudu"]},ladyfinger:{english:["ladyfinger","okra","bhindi"],telugu:[""],hindi:["bhindi",""],aliases:["bendakaya"]},brinjal:{english:["brinjal","eggplant","aubergine"],telugu:["",""],hindi:["baingan",""],aliases:["vankaya"]},chilli:{english:["chilli","chili","green chilli"],telugu:[""," "],hindi:["mirch","hari mirch",""],aliases:["mirapakaya"]}},fruits:{apple:{english:["apple","apples"],telugu:["",""],hindi:["seb",""],aliases:["sebu"]},banana:{english:["banana","bananas"],telugu:[" ",""],hindi:["kela",""],aliases:["arati","kela"]},mango:{english:["mango","mangoes"],telugu:[" ",""],hindi:["aam",""],aliases:["mamidi"]},orange:{english:["orange","oranges"],telugu:["",""],hindi:["santra","narangi",""],aliases:["narinja"]},grapes:{english:["grapes","grape"],telugu:["",""],hindi:["angoor",""],aliases:["draksha"]},pomegranate:{english:["pomegranate"],telugu:[" "],hindi:["anar","anaar",""],aliases:["danimma"]}},dairy:{milk:{english:["milk"],telugu:["",""],hindi:["doodh",""],aliases:["palu"]},curd:{english:["curd","yogurt"],telugu:["",""],hindi:["dahi",""],aliases:["perugu"]},butter:{english:["butter"],telugu:["",""],hindi:["makhan",""],aliases:["venna"]},ghee:{english:["ghee","clarified butter"],telugu:[""],hindi:["ghee",""],aliases:["neyyi"]},paneer:{english:["paneer","cottage cheese"],telugu:[""],hindi:["paneer",""],aliases:["panneer"]}},groceries:{rice:{english:["rice"],telugu:["",""],hindi:["chawal",""],aliases:["biyyam","annam"]},wheat:{english:["wheat","wheat flour","atta"],telugu:["",""],hindi:["gehun","atta",""],aliases:["godhuma"]},lentils:{english:["lentils","dal","pulses"],telugu:["",""],hindi:["dal",""],aliases:["pappu","kandulu"]},oil:{english:["oil","cooking oil"],telugu:["",""],hindi:["tel",""],aliases:["noone"]},salt:{english:["salt"],telugu:[""],hindi:["namak",""],aliases:["uppu"]},sugar:{english:["sugar"],telugu:["",""],hindi:["cheeni",""],aliases:["chakkera","panchadara"]},tea:{english:["tea","tea powder"],telugu:["",""],hindi:["chai",""],aliases:["teyaku"]}}};function K6(n){return n.map(e=>{const t=e.nameEn||e.name||"";return{id:e.id,name:t,category:e.category,subcategory:e.subcategory,price:e.discountedPrice||e.price,unit:e.unit||"piece",teluguName:e.nameTe||J6(t),hindiName:Q6(t),aliases:W6(t)}})}function J6(n){if(!n)return"";const e=n.toLowerCase().trim();for(const t in Zs)for(const i in Zs[t]){const o=Zs[t][i];if(o.english.some(a=>e.includes(a)))return o.telugu[0]}return n}function Q6(n){if(!n)return"";const e=n.toLowerCase().trim();for(const t in Zs)for(const i in Zs[t]){const o=Zs[t][i];if(o.english.some(a=>e.includes(a)))return o.hindi[0]}return n}function W6(n){if(!n)return[];const e=n.toLowerCase().trim();for(const t in Zs)for(const i in Zs[t]){const o=Zs[t][i];if(o.english.some(a=>e.includes(a)))return[...o.english,...o.telugu,...o.hindi,...o.aliases]}return[n]}function X6({products:n,onProductsFound:e,language:t,onVoiceStart:i,onVoiceEnd:o}){const[a,u]=X.useState(!1),[d,f]=X.useState(!1),[h,v]=X.useState(!0),[E]=X.useState(()=>new to);X.useEffect(()=>{v(to.isSupported())},[]);const A=async U=>{f(!0);try{const J=K6(n),H=await $6(U,J);if(H&&H.length>0){const se=n.filter(ee=>H.some(fe=>fe.productId===ee.id));if(se.length>0){e(se,U);return}}const z=await TI(U,n);z.length>0?e(z,U):e([],U)}catch(J){console.error("[VoiceSearch] Search error:",J),e([],"")}finally{f(!1)}},R=async()=>{try{await E.startRecording(()=>{console.log("[VoiceSearch] Auto-stopping after silence detected"),L()}),u(!0),i?.()}catch(U){console.error("[VoiceSearch] Recording error:",U),U.message==="FEATURE_NOT_SUPPORTED"?alert(t==="te"?"     ":"Voice recording is not supported on your device"):U.name==="NotAllowedError"||U.name==="PermissionDeniedError"?alert(t==="te"?"  ":"Please allow microphone access"):alert(t==="te"?"   ":"Failed to start voice recording")}},L=async()=>{try{u(!1),f(!0);const U=await E.stopRecording(),J=await E.blobToBase64(U);console.log("[VoiceSearch] Audio recorded, sending to Gemini...");const H=await Ay(J,U.type);console.log("[VoiceSearch] Transcribed:",H),await A(H)}catch(U){console.error("[VoiceSearch] Transcription error:",U),alert(t==="te"?" .  ":"Voice search failed. Please try again"),e([],"")}finally{f(!1),o?.()}},F=async()=>{a?await L():await R()};return h?g.jsx("button",{onClick:F,className:`voice-search-btn ${a?"listening":""} ${d?"processing":""}`,disabled:d,"aria-label":t==="te"?" ":"Voice Search",title:a?t==="te"?"... (  -)":"Speak... (auto-stops after silence)":t==="te"?"  ":"Tap mic and speak",children:a?g.jsx(fy,{size:20}):g.jsx(py,{size:20})}):null}const Z6=({searchTerm:n,setSearchTerm:e,language:t,toggleLanguage:i,logoUrl:o,products:a,onVoiceSearch:u})=>{const d=Xn[t];return g.jsxs("div",{className:"app-header-modern",children:[g.jsxs("div",{className:"header-top",children:[g.jsxs("div",{className:"brand-section",children:[g.jsx("img",{src:o||"/dukaan-logo.png",alt:"DUKAAN Logo",className:"header-logo"}),g.jsx("h1",{className:"brand-name",children:t==="en"?"DUKAAN":""})]}),g.jsx("button",{onClick:i,className:"language-toggle-modern",children:"/EN"})]}),g.jsxs("div",{className:"search-bar-modern",children:[g.jsx($C,{className:"search-icon"}),g.jsx("input",{type:"text",placeholder:d.search,value:n,onChange:h=>e(h.target.value),className:"search-input"}),a&&u&&g.jsx(X6,{products:a,onProductsFound:u,language:t})]})]})},e3=({currentView:n,setCurrentView:e,cartItems:t,language:i,onHomeClick:o})=>{const a=Xn[i],u=Object.values(t).reduce((h,v)=>h+v.quantity,0),d=h=>{h==="Home"&&o&&o(),e(h)},f=[{name:a.home,icon:fk,view:"Home"},{name:a.orders,icon:Tn,view:"Orders"},{name:a.cart,icon:YC,view:"Cart",badge:u},{name:a.profile,icon:Hi,view:"Profile"}];return g.jsx("div",{className:"bottom-nav",children:f.map(h=>g.jsxs("button",{onClick:()=>d(h.view),className:`nav-item ${n===h.view?"nav-item-active":""}`,children:[g.jsxs("div",{className:"nav-icon-wrapper",children:[g.jsx(h.icon,{className:"w-6 h-6"}),h.badge>0&&g.jsx("span",{className:"nav-badge",children:h.badge})]}),g.jsx("span",{className:"nav-label",children:h.name})]},h.view))})},EI=({order:n,onClose:e,language:t})=>{const i=Xn[t],o=u=>({pending:i.pending,accepted:i.accepted,processing:i.processing,ready_for_pickup:i.readyForPickup,out_for_delivery:i.outForDelivery,delivered:i.delivered,completed:i.completed,cancelled:i.cancelled})[u]||u,a=u=>{switch(u){case"pending":return"#9E9E9E";case"accepted":return"#2196F3";case"processing":return"#2196F3";case"ready_for_pickup":return"#9C27B0";case"out_for_delivery":return"#FF9800";case"delivered":return"#4CAF50";case"completed":return"#4CAF50";case"cancelled":return"#F44336";default:return"#9E9E9E"}};return g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h3",{className:"modal-title",children:i.orderDetails}),g.jsx("button",{onClick:e,className:"modal-close-btn",children:g.jsx(oa,{className:"w-6 h-6"})})]}),g.jsxs("div",{className:"modal-body",children:[g.jsxs("div",{className:"modal-order-info",children:[g.jsxs("div",{className:"modal-info-row",children:[g.jsx("span",{className:"modal-label",children:i.orderID}),g.jsx("span",{className:"modal-value",children:n.orderNumber||`#${n.id.substring(0,12)}`})]}),g.jsxs("div",{className:"modal-info-row",children:[g.jsx("span",{className:"modal-label",children:i.orderDate}),g.jsx("span",{className:"modal-value",children:new Date(n.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),g.jsxs("div",{className:"modal-info-row",children:[g.jsx("span",{className:"modal-label",children:i.status}),g.jsx("span",{className:"modal-status-badge",style:{backgroundColor:a(n.status)},children:o(n.status)})]}),n.phoneNumber&&g.jsxs("div",{className:"modal-info-row",children:[g.jsx("span",{className:"modal-label",children:i.customerPhone}),g.jsxs("a",{href:`tel:${n.phoneNumber}`,className:"modal-phone-link",children:[g.jsx(rr,{className:"w-4 h-4"}),n.phoneNumber]})]})]}),n.deliveryAddress&&g.jsxs("div",{className:"modal-delivery-section",children:[g.jsx("h4",{className:"modal-section-title",children:i.deliveryDetails}),g.jsxs("div",{className:"modal-address-card",children:[g.jsx(Zo,{className:"w-5 h-5 text-green-600"}),g.jsxs("div",{className:"modal-address-content",children:[g.jsx("p",{className:"modal-address-text",children:n.deliveryAddress}),n.deliveryInstructions&&g.jsxs("p",{className:"modal-instructions-text",children:[g.jsxs("strong",{children:[i.instructions,":"]})," ",n.deliveryInstructions]})]})]})]}),g.jsxs("div",{className:"modal-items-section",children:[g.jsx("h4",{className:"modal-section-title",children:i.itemsOrdered}),g.jsx("div",{className:"modal-items-list",children:n.items.map((u,d)=>{const f=t==="te"?u.nameTe||u.nameEn||u.name:u.nameEn||u.name;return g.jsxs("div",{className:"modal-item-card",children:[g.jsx("div",{className:"modal-item-image",children:g.jsx("img",{src:u.imageUrl||"https://via.placeholder.com/60",alt:f,onError:h=>h.target.src="https://via.placeholder.com/60"})}),g.jsxs("div",{className:"modal-item-details",children:[g.jsx("h5",{className:"modal-item-name",children:f}),g.jsx("p",{className:"modal-item-weight",children:u.weight}),g.jsxs("p",{className:"modal-item-quantity",children:[i.qty,": ",u.quantity]})]}),g.jsxs("div",{className:"modal-item-price",children:[g.jsx(ji,{className:"w-4 h-4"}),(u.price*u.quantity).toFixed(0)]})]},d)})})]}),g.jsxs("div",{className:"modal-total-section",children:[g.jsx("span",{className:"modal-total-label",children:i.orderTotal}),g.jsxs("span",{className:"modal-total-amount",children:[g.jsx(ji,{className:"w-5 h-5"}),n.total.toFixed(0)]})]})]})]})})},t3=({isOpen:n,onClose:e,onConfirm:t,cartItems:i,userAddresses:o,selectedAddress:a,onAddressSelect:u,onManageAddresses:d,language:f})=>{const[h,v]=X.useState("delivery");if(!n)return null;const E=i.reduce((L,F)=>L+(F.discountedPrice??F.price)*F.quantity,0),A=f==="te"?Xn.te:Xn.en,R=()=>{if(h==="delivery"&&!a){alert(A.selectDeliveryAddress);return}t(h)};return o.find(L=>L.isDefault)||o[0],g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content",onClick:L=>L.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{className:"modal-title",children:A.confirmOrder}),g.jsx("button",{className:"modal-close-btn",onClick:e,children:g.jsx(oa,{className:"w-6 h-6"})})]}),g.jsxs("div",{className:"modal-body",children:[g.jsxs("div",{className:"checkout-section",children:[g.jsx("h3",{className:"checkout-section-title",children:A.chooseDeliveryMethod}),g.jsxs("div",{className:"delivery-options",children:[g.jsxs("button",{className:`delivery-option-btn ${h==="delivery"?"active":""}`,onClick:()=>v("delivery"),children:[g.jsx(fs,{className:"w-5 h-5"}),g.jsx("span",{children:A.homeDelivery})]}),g.jsxs("button",{className:`delivery-option-btn ${h==="pickup"?"active":""}`,onClick:()=>v("pickup"),children:[g.jsx(ea,{className:"w-5 h-5"}),g.jsx("span",{children:A.storePickup})]})]})]}),h==="delivery"&&g.jsxs("div",{className:"checkout-section",children:[g.jsx("h3",{className:"checkout-section-title",children:A.deliveryAddress}),o.length===0?g.jsxs("div",{className:"no-address-msg",children:[g.jsx("p",{children:A.noSavedAddresses}),g.jsx("button",{onClick:()=>{e(),d()},className:"add-address-btn",children:A.addAddress})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"address-list",children:o.map(L=>g.jsxs("div",{className:`address-card ${a?.id===L.id?"selected":""}`,onClick:()=>u(L),children:[g.jsxs("div",{className:"address-header",children:[g.jsx("span",{className:`address-label ${L.label.toLowerCase()}`,children:L.label}),L.isDefault&&g.jsx("span",{className:"default-badge",children:A.default})]}),g.jsx("p",{className:"address-text",children:L.fullAddress}),L.deliveryInstructions&&g.jsxs("p",{className:"address-instructions",children:[A.note,": ",L.deliveryInstructions]})]},L.id))}),g.jsx("button",{onClick:()=>{e(),d()},className:"manage-addresses-link",children:A.manageAddresses})]})]}),h==="pickup"&&g.jsx("div",{className:"checkout-section",children:g.jsxs("div",{className:"pickup-info-card",children:[g.jsx(ea,{className:"w-12 h-12 pickup-icon"}),g.jsx("h4",{children:A.storePickup}),g.jsx("p",{children:A.orderReadyPickup}),g.jsx("p",{className:"pickup-location",children:" Ponnur, Andhra Pradesh"})]})}),g.jsx("div",{className:"checkout-section",children:g.jsxs("div",{className:"order-summary",children:[g.jsx("h3",{className:"checkout-section-title",children:A.orderSummary}),g.jsx("div",{className:"summary-items",children:i.map(L=>{const F=f==="te"?L.nameTe||L.nameEn||L.name:L.nameEn||L.name;return g.jsxs("div",{className:"summary-item",children:[g.jsxs("span",{children:[F,"  ",L.quantity]}),g.jsxs("span",{children:["",((L.discountedPrice??L.price)*L.quantity).toFixed(2)]})]},L.id)})}),g.jsxs("div",{className:"summary-total",children:[g.jsx("span",{className:"total-label",children:A.total}),g.jsxs("span",{className:"total-amount",children:["",E.toFixed(2)]})]})]})})]}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{onClick:e,className:"cancel-btn",children:A.cancel}),g.jsxs("button",{onClick:R,className:"confirm-order-btn",disabled:h==="delivery"&&o.length===0,children:[g.jsx(Bi,{className:"w-5 h-5"}),A.placeOrder," - ",E.toFixed(2)]})]})]})})},n3=({categoriesData:n,onCategoryClick:e,language:t})=>{Xn[t];const i=[...n].sort((o,a)=>(o.sortOrder||0)-(a.sortOrder||0));return g.jsx("div",{className:"category-section",children:g.jsx("div",{className:"category-grid",children:i.map(o=>g.jsxs("button",{onClick:()=>e(o.id),className:"category-card",style:{background:o.gradient},children:[g.jsx("div",{className:"category-icon",children:g.jsx("img",{src:o.imageUrl||"https://via.placeholder.com/50/CCCCCC/666666?text=No+Image",alt:o.nameEn,className:"category-image"})}),g.jsxs("div",{className:"category-labels",children:[g.jsx("div",{className:"category-name-en",children:o.nameEn}),g.jsxs("div",{className:"category-name-te",children:["/ ",o.nameTe]})]})]},o.id))})})},jd=({product:n,onAddToCart:e,cartItems:t,language:i})=>{const o=Xn[i],a=t[n.id]?.quantity||0,u=n.outOfStock===!0,d=i==="te"?n.nameTe||n.nameEn||n.name:n.nameEn||n.name;return g.jsxs("div",{className:`product-card-modern ${u?"out-of-stock-card":""}`,children:[g.jsx("img",{src:n.imageUrl||"https://via.placeholder.com/150",alt:d,className:"product-image"}),u&&g.jsx("div",{className:"out-of-stock-overlay",children:g.jsx("span",{className:"out-of-stock-badge",children:o.outOfStock.toUpperCase()})}),g.jsxs("div",{className:"product-info",children:[g.jsx("h3",{className:"product-name",children:d}),g.jsx("p",{className:"product-weight",children:n.weight}),g.jsxs("div",{className:"product-price-row",children:[g.jsxs("span",{className:"product-price",children:[g.jsx(ji,{className:"w-4 h-4"}),n.discountedPrice||n.price]}),n.discountedPrice&&g.jsxs("span",{className:"product-original-price",children:[g.jsx(ji,{className:"w-3 h-3"}),n.price]})]})]}),u?g.jsx("button",{className:"add-to-cart-btn disabled-btn",disabled:!0,children:o.outOfStock}):a===0?g.jsx("button",{onClick:()=>e(n),className:"add-to-cart-btn",children:o.addToCart}):g.jsxs("div",{className:"quantity-controls",children:[g.jsx("button",{onClick:()=>e(n,-1),className:"quantity-btn",children:g.jsx(GC,{className:"w-4 h-4"})}),g.jsx("span",{className:"quantity-display",children:a}),g.jsx("button",{onClick:()=>e(n,1),className:"quantity-btn",children:g.jsx(jC,{className:"w-4 h-4"})})]})]})},i3=({categoriesData:n,selectedCategory:e,onCategoryClick:t,language:i})=>{const a=[...n].sort((u,d)=>(u.sortOrder||0)-(d.sortOrder||0)).slice(0,6);return g.jsx("div",{className:"quick-categories-bar",children:a.map(u=>g.jsx("button",{onClick:()=>t(u.id),className:`quick-category-chip ${e===u.id?"active":""}`,children:i==="en"?u.nameEn:u.nameTe},u.id))})},s3=({products:n,onAddToCart:e,cartItems:t,setCurrentView:i,selectedCategory:o,setSelectedCategory:a,selectedSubcategory:u,setSelectedSubcategory:d,searchTerm:f,language:h,categoriesData:v,subcategoriesData:E,voiceSearchResults:A=null,setVoiceSearchResults:R=()=>{}})=>{const L=Xn[h],[F,U]=X.useState(null),[J,H]=X.useState(!1);console.log("[HomeView] Rendering with:",{productsCount:n?.length,categoriesCount:v?.length,voiceSearchResults:A?.length}),X.useEffect(()=>{if(!f||f.trim().length===0){U(null);return}const V=async()=>{H(!0);try{const we=await TI(f,n);U(we)}catch(we){console.error("[HomeView] Semantic search error:",we),U(null)}finally{H(!1)}},N=setTimeout(()=>{V()},500);return()=>clearTimeout(N)},[f,n]);const z=X.useMemo(()=>{if(!f)return[];const V=f.toLowerCase();return n.filter(N=>(N.nameEn||N.name||"").toLowerCase().includes(V)||N.nameTe&&N.nameTe.toLowerCase().includes(V)||N.category&&N.category.toLowerCase().includes(V))},[n,f]),se=X.useMemo(()=>A||(f?F&&F.length>0?F:z:[]),[n,f,A,F,z]),ee=X.useMemo(()=>n.filter(V=>V.isPopular===!0).sort((V,N)=>(V.sortOrder||0)-(N.sortOrder||0)),[n]),fe=f.trim().length>0||A!==null,O=X.useMemo(()=>o?E.filter(V=>V.categoryId===o).sort((V,N)=>(V.sortOrder||0)-(N.sortOrder||0)):[],[E,o]),P=X.useMemo(()=>u?n.filter(V=>V.subcategoryId===u||!V.subcategoryId&&o&&E.find(N=>N.id===u)?.categoryId===V.category).sort((V,N)=>(V.sortOrder||0)-(N.sortOrder||0)):[],[n,u,o,E]),b=V=>{a(V),d(null)},M=V=>{d(V)},k=()=>{u?d(null):o&&a(null)};if(u){const V=E.find(N=>N.id===u);return v.find(N=>N.id===o),g.jsxs("div",{className:"subcategory-products-view",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:k,className:"back-button",children:g.jsx(Ci,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:h==="en"?V?.nameEn:V?.nameTe||V?.nameEn})]}),g.jsx("div",{className:"products-grid",children:P.length>0?P.map(N=>g.jsx(jd,{product:N,onAddToCart:e,cartItems:t,language:h},N.id)):g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:"No products in this subcategory yet."})})})]})}if(o){const V=v.find(N=>N.id===o);if(O.length===0){const N=n.filter(we=>we.category===o).sort((we,ze)=>(we.sortOrder||0)-(ze.sortOrder||0));return g.jsxs("div",{className:"subcategory-products-view",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:k,className:"back-button",children:g.jsx(Ci,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:h==="en"?V?.nameEn:V?.nameTe||V?.nameEn})]}),g.jsx("div",{className:"products-grid",children:N.length>0?N.map(we=>g.jsx(jd,{product:we,onAddToCart:e,cartItems:t,language:h},we.id)):g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:"No products in this category yet."})})})]})}return g.jsxs("div",{className:"subcategories-view",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:k,className:"back-button",children:g.jsx(Ci,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:h==="en"?V?.nameEn:V?.nameTe||V?.nameEn})]}),g.jsx("div",{className:"subcategory-grid",children:O.map(N=>g.jsxs("button",{onClick:()=>M(N.id),className:"subcategory-card",children:[g.jsx("span",{className:"subcategory-icon",children:g.jsx("img",{src:N.imageUrl||"https://via.placeholder.com/48/CCCCCC/666666?text=No+Image",alt:N.nameEn,className:"subcategory-image"})}),g.jsx("span",{className:"subcategory-name",children:h==="en"?N.nameEn:N.nameTe||N.nameEn})]},N.id))})]})}return g.jsxs("div",{className:"home-view",children:[!fe&&!o&&g.jsx(i3,{categoriesData:v,selectedCategory:o,onCategoryClick:b,language:h}),!fe&&g.jsx(n3,{categoriesData:v,onCategoryClick:b,language:h}),fe?g.jsxs("div",{className:"search-results-section",children:[g.jsxs("h2",{className:"section-title",children:[A?L.voiceSearchResults:L.searchResults," (",se.length,")",J&&g.jsxs("span",{className:"ai-searching",children:["  ",L.aiSearching]})]}),se.length>0?g.jsx("div",{className:"products-grid",children:se.map(V=>g.jsx(jd,{product:V,onAddToCart:e,cartItems:t,language:h},V.id))}):J?g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:L.searchingProducts})}):g.jsx("div",{className:"empty-state",children:g.jsxs("p",{children:[L.noProductsFound,' "',f,'"']})})]}):g.jsxs("div",{className:"popular-section",children:[g.jsx("h2",{className:"section-title",children:L.popularProducts}),ee.length>0?g.jsx("div",{className:"products-grid",children:ee.map(V=>g.jsx(jd,{product:V,onAddToCart:e,cartItems:t,language:h},V.id))}):g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:L.noPopularProducts})})]})]})},r3=({cartItems:n,onAddToCart:e,setCurrentView:t,onCheckout:i,language:o})=>{const a=Xn[o],u=Object.values(n),d=u.reduce((f,h)=>f+(h.discountedPrice??h.price)*h.quantity,0);return u.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(YC,{className:"empty-icon"}),g.jsxs("p",{className:"empty-text",children:[a.cart," ",a.empty]})]}):g.jsxs("div",{className:"cart-view",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:()=>t("Home"),className:"back-button",children:g.jsx(Ci,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:a.cart})]}),g.jsx("div",{className:"cart-items",style:{paddingBottom:"140px"},children:u.map(f=>{const h=o==="te"?f.nameTe||f.nameEn||f.name||"":f.nameEn||f.nameTe||f.name||"Product";return g.jsxs("div",{className:"cart-item",children:[g.jsx("img",{src:f.imageUrl||"https://via.placeholder.com/80",alt:h,className:"cart-item-image"}),g.jsxs("div",{className:"cart-item-info",children:[g.jsx("h3",{className:"cart-item-name",children:h}),g.jsx("p",{className:"cart-item-weight",children:f.weight}),g.jsxs("p",{className:"cart-item-price",children:[g.jsx(ji,{className:"w-4 h-4"}),f.discountedPrice??f.price]})]}),g.jsxs("div",{className:"quantity-controls",children:[g.jsx("button",{onClick:()=>e(f,-1),className:"quantity-btn",children:g.jsx(GC,{className:"w-4 h-4"})}),g.jsx("span",{className:"quantity-display",children:f.quantity}),g.jsx("button",{onClick:()=>e(f,1),className:"quantity-btn",children:g.jsx(jC,{className:"w-4 h-4"})})]})]},f.id)})}),g.jsxs("div",{className:"cart-footer-fixed",children:[g.jsxs("div",{className:"cart-total",children:[g.jsx("span",{children:a.total}),g.jsxs("span",{className:"total-amount",children:[g.jsx(ji,{className:"w-5 h-5"}),d.toFixed(0)]})]}),g.jsx("button",{onClick:i,className:"checkout-button",children:a.proceedToCheckout})]})]})},o3=({isOpen:n,onClose:e,onConfirm:t,currentMethod:i,userAddresses:o,onManageAddresses:a})=>{const[u,d]=X.useState(o.find(v=>v.isDefault)||o[0]||null);if(!n)return null;const f=i==="delivery"?"pickup":"delivery",h=()=>{if(f==="delivery"){if(o.length===0){alert("Please add a delivery address first"),e(),a();return}if(!u){alert("Please select a delivery address");return}t(f,u)}else t(f,null)};return g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{className:"modal-title",children:"Change Order Type"}),g.jsx("button",{className:"modal-close-btn",onClick:e,children:g.jsx(oa,{className:"w-6 h-6"})})]}),g.jsxs("div",{className:"modal-body",children:[g.jsxs("div",{className:"change-type-info",children:[g.jsxs("div",{className:"current-method-display",children:[g.jsx("span",{className:"change-label",children:"Current:"}),i==="delivery"?g.jsxs("div",{className:"method-badge delivery",children:[g.jsx(fs,{className:"w-4 h-4"}),g.jsx("span",{children:"Home Delivery"})]}):g.jsxs("div",{className:"method-badge pickup",children:[g.jsx(ea,{className:"w-4 h-4"}),g.jsx("span",{children:"Store Pickup"})]})]}),g.jsx("div",{className:"arrow-divider",children:""}),g.jsxs("div",{className:"new-method-display",children:[g.jsx("span",{className:"change-label",children:"Change to:"}),f==="delivery"?g.jsxs("div",{className:"method-badge delivery",children:[g.jsx(fs,{className:"w-4 h-4"}),g.jsx("span",{children:"Home Delivery"})]}):g.jsxs("div",{className:"method-badge pickup",children:[g.jsx(ea,{className:"w-4 h-4"}),g.jsx("span",{children:"Store Pickup"})]})]})]}),f==="delivery"&&g.jsxs("div",{className:"address-selection-section",children:[g.jsx("h3",{className:"section-title",children:"Select Delivery Address"}),o.length===0?g.jsxs("div",{className:"no-address-msg",children:[g.jsx("p",{children:"No saved addresses. Please add one first."}),g.jsx("button",{onClick:()=>{e(),a()},className:"add-address-btn",children:"Add Address"})]}):g.jsx("div",{className:"address-list",children:o.map(v=>g.jsxs("div",{className:`address-card ${u?.id===v.id?"selected":""}`,onClick:()=>d(v),children:[g.jsx("div",{className:"address-selection-radio",children:u?.id===v.id&&g.jsx(nk,{className:"w-4 h-4"})}),g.jsxs("div",{className:"address-info",children:[g.jsxs("div",{className:"address-header",children:[g.jsx("span",{className:`address-label ${v.label.toLowerCase()}`,children:v.label}),v.isDefault&&g.jsx("span",{className:"default-badge",children:"Default"})]}),g.jsx("p",{className:"address-text",children:v.fullAddress}),v.deliveryInstructions&&g.jsxs("p",{className:"address-instructions-small",children:["Note: ",v.deliveryInstructions]})]})]},v.id))})]}),f==="pickup"&&g.jsxs("div",{className:"pickup-confirmation",children:[g.jsx("p",{className:"confirmation-text",children:"Your order will be ready for pickup at the store."}),g.jsx("p",{className:"store-location",children:" Ponnur, Andhra Pradesh"})]})]}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{onClick:e,className:"cancel-btn",children:"Cancel"}),g.jsx("button",{onClick:h,className:"confirm-btn",disabled:f==="delivery"&&o.length===0,children:"Confirm Change"})]})]})})},a3=({orders:n,language:e,setSelectedOrder:t,onChangeDeliveryMethod:i,onCancelOrder:o,userAddresses:a,onManageAddresses:u})=>{const d=Xn[e],[f,h]=X.useState(!1),[v,E]=X.useState(null),A=n.filter(H=>H.status!=="delivered"&&H.status!=="completed"&&H.status!=="cancelled");if(A.length===0)return g.jsxs("div",{className:"empty-state",children:[g.jsx(Tn,{className:"empty-icon"}),g.jsx("p",{className:"empty-text",children:d.noActiveOrders})]});const R=H=>({pending:d.pending,accepted:d.accepted,out_for_delivery:d.outForDelivery,ready_for_pickup:d.readyForPickup,delivered:d.delivered,completed:d.completed,cancelled:d.cancelled})[H]||H,L=H=>H==="delivered"||H==="completed"?g.jsx(Bi,{className:"w-5 h-5"}):H==="cancelled"?g.jsx(nh,{className:"w-5 h-5"}):H==="out_for_delivery"?g.jsx(fs,{className:"w-5 h-5"}):H==="ready_for_pickup"?g.jsx(ea,{className:"w-5 h-5"}):H==="accepted"?g.jsx(Bi,{className:"w-5 h-5"}):g.jsx(nc,{className:"w-5 h-5"}),F=H=>{switch(H){case"delivered":return"#4CAF50";case"completed":return"#4CAF50";case"accepted":return"#2196F3";case"out_for_delivery":return"#FF9800";case"ready_for_pickup":return"#9C27B0";case"cancelled":return"#f44336";case"pending":return"#9E9E9E";default:return"#9E9E9E"}},U=H=>{E(H),h(!0)},J=(H,z)=>{v&&(i(v.id,H,z),h(!1),E(null))};return g.jsxs("div",{className:"orders-view",children:[g.jsx("h2",{className:"view-title",children:d.activeOrders}),g.jsx("div",{className:"orders-list",children:A.map(H=>g.jsxs("div",{className:"order-card-detailed",children:[g.jsx("div",{className:"order-header-detailed",children:g.jsxs("div",{className:"order-info-row",children:[g.jsxs("div",{className:"order-meta",children:[g.jsx("span",{className:"order-date-label",children:d.orderDate}),g.jsx("span",{className:"order-date-value",children:new Date(H.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),g.jsxs("div",{className:"order-status-badge",style:{backgroundColor:F(H.status)},children:[L(H.status),g.jsx("span",{children:R(H.status)})]})]})}),g.jsx("div",{className:"order-items-detailed",children:H.items.map((z,se)=>(console.log("[Order Item Debug]",{name:z.name,hasImageUrl:!!z.imageUrl,imageUrl:z.imageUrl,weight:z.weight}),g.jsxs("div",{className:"order-item-card",children:[g.jsx("div",{className:"order-item-image",children:g.jsx("img",{src:z.imageUrl||"https://via.placeholder.com/80?text=No+Image",alt:z.name,onError:ee=>{console.log("[Image Error]",z.name,"failed to load:",z.imageUrl),ee.target.src="https://via.placeholder.com/80?text=No+Image"}})}),g.jsxs("div",{className:"order-item-details",children:[g.jsx("h4",{className:"order-item-name",children:e==="te"?z.nameTe||z.nameEn||z.name:z.nameEn||z.name}),g.jsx("p",{className:"order-item-weight",children:z.weight||"N/A"}),g.jsxs("div",{className:"order-item-pricing",children:[g.jsxs("span",{className:"order-item-quantity",children:[d.qty,": ",z.quantity]}),g.jsxs("span",{className:"order-item-price",children:[g.jsx(ji,{className:"w-3 h-3"}),(z.discountedPrice??z.price).toFixed(0)," ",d.each]})]})]}),g.jsxs("div",{className:"order-item-total",children:[g.jsx(ji,{className:"w-4 h-4"}),((z.discountedPrice??z.price)*z.quantity).toFixed(0)]})]},se)))}),H.status==="cancelled"&&H.cancellationReason&&g.jsxs("div",{className:"order-cancellation-section",children:[g.jsxs("div",{className:"cancellation-badge",children:[g.jsx(nh,{className:"w-4 h-4 text-red-600"}),g.jsxs("span",{className:"cancellation-label",children:[d.cancellationReason,":"]})]}),g.jsx("p",{className:"cancellation-reason-text",children:H.cancellationReason})]}),g.jsxs("div",{className:"order-delivery-info",children:[g.jsx("div",{className:"delivery-method-badge",children:H.deliveryMethod==="delivery"?g.jsxs(g.Fragment,{children:[g.jsx(fs,{className:"w-4 h-4"}),g.jsx("span",{children:d.homeDelivery})]}):g.jsxs(g.Fragment,{children:[g.jsx(ea,{className:"w-4 h-4"}),g.jsx("span",{children:d.storePickup})]})}),g.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(H.status==="pending"||H.status==="accepted")&&i&&g.jsxs("button",{onClick:()=>U(H),className:"change-delivery-btn",children:[g.jsx(Mk,{className:"w-4 h-4"}),e==="te"?"  ":"Change Order Type"]}),H.status==="pending"&&o&&g.jsxs("button",{onClick:()=>{window.confirm(e==="te"?"    ?":"Are you sure you want to cancel this order?")&&o(H.id,e==="te"?"  ":"Customer cancelled")},className:"cancel-order-btn",style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",background:"#fff",border:"1px solid #f44336",borderRadius:"8px",color:"#f44336",fontSize:"13px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},children:[g.jsx(nh,{className:"w-4 h-4"}),e==="te"?"  ":"Cancel Order"]})]})]}),H.riderPhone&&(H.status==="out_for_delivery"||H.status==="delivered")&&g.jsxs("div",{style:{background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",padding:"12px 16px",borderRadius:"8px",marginTop:"12px",border:"1px solid #2196F3"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[g.jsx(fs,{style:{color:"#1976D2",width:"18px",height:"18px"}}),g.jsx("span",{style:{fontWeight:"600",color:"#1565C0",fontSize:"14px"},children:"Delivery Partner"})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx(rr,{style:{color:"#1976D2",width:"16px",height:"16px"}}),g.jsxs("a",{href:`tel:${H.riderPhone}`,style:{color:"#0D47A1",fontSize:"16px",fontWeight:"600",textDecoration:"none"},children:[H.riderName||"Delivery Partner",": ",H.riderPhone]})]})]}),g.jsx("div",{className:"order-footer-detailed",children:g.jsxs("div",{className:"order-total-row",children:[g.jsx("span",{className:"order-total-label",children:d.orderTotal}),g.jsxs("span",{className:"order-total-amount",children:[g.jsx(ji,{className:"w-5 h-5"}),H.total.toFixed(0)]})]})})]},H.id))}),f&&v&&g.jsx(o3,{isOpen:f,onClose:()=>{h(!1),E(null)},onConfirm:J,currentMethod:v.deliveryMethod,userAddresses:a||[],onManageAddresses:u})]})},l3=({userProfile:n,orders:e,onLogout:t,language:i,setCurrentView:o,userAddresses:a,onManageAddresses:u})=>{const d=Xn[i],[f,h]=X.useState(!1),[v,E]=X.useState({name:n?.name||"",email:n?.email||""}),A=e.length;e.reduce((H,z)=>H+z.total,0);const L=e.filter(H=>H.status==="delivered"||H.status==="completed").reduce((H,z)=>z.totalSavings?H+z.totalSavings:z.items?H+z.items.reduce((se,ee)=>ee.originalPrice&&ee.discountedPrice&&ee.discountedPrice<ee.originalPrice?se+(ee.originalPrice-ee.discountedPrice)*ee.quantity:se,0):H,0),F=()=>{E({name:n?.name||"",email:n?.email||""}),h(!0)},U=()=>{h(!1),E({name:n?.name||"",email:n?.email||""})},J=async()=>{if(!v.name.trim()){alert("Please enter your name");return}if(!n||!n.id){alert("User profile not found");return}try{const{db:H}=ws(),z=Be(H,"artifacts",Ce,"public","data","users",n.id);await Gn(z,{name:v.name.trim(),email:v.email.trim(),profileCompleted:!0,updatedAt:new Date().toISOString()}),h(!1),alert("Profile updated successfully! Please refresh to see changes."),window.location.reload()}catch(H){console.error("Error updating profile:",H),alert("Failed to update profile. Please try again.")}};return g.jsxs("div",{className:"profile-view",children:[g.jsx("h2",{className:"view-title",children:d.profile}),g.jsxs("div",{className:"profile-info",children:[g.jsx("div",{className:"profile-avatar",children:g.jsx(Hi,{className:"w-12 h-12"})}),n?f?g.jsxs("div",{className:"profile-edit-form",children:[g.jsx("input",{type:"text",value:v.name,onChange:H=>E({...v,name:H.target.value}),placeholder:"Enter your name",className:"profile-edit-input"}),g.jsx("input",{type:"email",value:v.email,onChange:H=>E({...v,email:H.target.value}),placeholder:"Enter your email (optional)",className:"profile-edit-input"}),g.jsxs("div",{className:"profile-edit-actions",children:[g.jsxs("button",{onClick:J,className:"profile-save-btn",children:[g.jsx(al,{className:"w-4 h-4"}),"Save"]}),g.jsxs("button",{onClick:U,className:"profile-cancel-btn",children:[g.jsx(oa,{className:"w-4 h-4"}),"Cancel"]})]})]}):g.jsxs("div",{className:"profile-details",children:[g.jsxs("div",{className:"profile-info-text",children:[g.jsx("p",{className:"profile-name",children:n.name}),g.jsx("p",{className:"profile-phone",children:n.phoneNumber}),n.email&&g.jsx("p",{className:"profile-email",children:n.email})]}),g.jsx("button",{onClick:F,className:"profile-edit-btn",children:g.jsx(Nk,{className:"w-4 h-4"})})]}):g.jsx("p",{className:"profile-id",children:"Loading profile..."})]}),g.jsxs("div",{className:"profile-stats",children:[g.jsxs("div",{className:"stat-card",children:[g.jsx(Tn,{className:"w-6 h-6 text-green-600"}),g.jsxs("div",{children:[g.jsx("p",{className:"stat-value",children:A}),g.jsx("p",{className:"stat-label",children:d.totalOrders})]})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx(ji,{className:"w-6 h-6 text-green-600"}),g.jsxs("div",{children:[g.jsxs("p",{className:"stat-value",children:["",Math.round(L)]}),g.jsx("p",{className:"stat-label",children:d.moneySaved})]})]})]}),g.jsx("div",{className:"profile-section",children:g.jsxs("button",{className:"order-history-button",onClick:u,children:[g.jsx(Zo,{className:"w-5 h-5"}),g.jsxs("span",{children:["Manage Addresses (",a.length,")"]}),g.jsx(Ci,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]})}),g.jsx("div",{className:"profile-section",children:g.jsxs("button",{className:"order-history-button",onClick:()=>o("OrderHistory"),children:[g.jsx(Tn,{className:"w-5 h-5"}),g.jsxs("span",{children:["View Order History (",A,")"]}),g.jsx(Ci,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]})}),n&&(n.role==="shopkeeper"||n.role==="rider")&&g.jsxs("div",{className:"profile-section",children:[g.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"#666"},children:"Switch Mode"}),n.role==="shopkeeper"&&g.jsxs("button",{className:"order-history-button",onClick:()=>window.location.href="?mode=shopkeeper",style:{marginBottom:"8px"},children:[g.jsx(Hk,{className:"w-5 h-5"}),g.jsx("span",{children:"Shopkeeper Dashboard"}),g.jsx(Ci,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]}),n.role==="rider"&&g.jsxs("button",{className:"order-history-button",onClick:()=>window.location.href="?mode=rider",children:[g.jsx(HC,{className:"w-5 h-5"}),g.jsx("span",{children:"Rider Dashboard"}),g.jsx(Ci,{className:"w-5 h-5",style:{transform:"rotate(180deg)"}})]})]}),g.jsxs("button",{onClick:t,className:"logout-button",children:[g.jsx(vk,{className:"w-5 h-5"}),d.logout]})]})},u3=({orders:n,onBack:e,onSelectOrder:t,language:i,translations:o})=>{const a=o[i];return g.jsxs("div",{className:"order-history-view",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:e,className:"back-button",children:g.jsx(Ci,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:"Order History"})]}),n.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(Tn,{className:"empty-icon"}),g.jsx("p",{className:"empty-text",children:a.noOrders})]}):g.jsx("div",{className:"orders-list",children:n.map(u=>g.jsxs("div",{className:"order-history-item clickable",onClick:()=>t(u),children:[g.jsxs("div",{className:"order-history-info",children:[g.jsx("p",{className:"order-history-date",children:new Date(u.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),g.jsxs("p",{className:"order-history-items",children:[u.items.length," items  ",u.status]})]}),g.jsxs("div",{className:"order-history-right",children:[g.jsxs("p",{className:"order-history-price",children:["",u.total.toFixed(0)]}),g.jsx(Ci,{className:"chevron-icon",style:{transform:"rotate(180deg)"}})]})]},u.id))})]})},c3=({phoneNumber:n,onPhoneChange:e,countryCode:t,onCountryCodeChange:i,password:o,onPasswordChange:a,otp:u,onOtpChange:d,authStep:f,isNewUser:h,onCheckUser:v,onSendOTP:E,onVerifyOTP:A,onPasswordLogin:R,onCompleteRegistration:L})=>{const[F,U]=X.useState({name:"",password:"",confirmPassword:"",address:{street:"",city:"",state:"Andhra Pradesh",pincode:""}}),J=()=>{if(!F.name||!F.password){alert("Please fill in all required fields");return}if(F.password!==F.confirmPassword){alert("Passwords do not match");return}if(F.password.length<6){alert("Password must be at least 6 characters");return}if(!F.address.street||!F.address.city||!F.address.pincode){alert("Please enter your address details");return}if(F.address.pincode.length!==6){alert("Please enter a valid 6-digit pincode");return}L(F)};return g.jsx("div",{className:"login-screen",children:g.jsxs("div",{className:"login-container",children:[g.jsxs("div",{className:"login-header",children:[g.jsx("h1",{className:"login-title",children:"DUKAAN "}),g.jsxs("p",{className:"login-subtitle",children:[f==="phone"&&"Welcome! Enter your phone number",f==="password"&&"Welcome back! Enter your password",f==="otp"&&"Verify your phone number",f==="register"&&"Complete your registration"]})]}),f==="phone"&&g.jsxs("div",{className:"login-form",children:[g.jsx("h2",{className:"form-title",children:"Phone Number"}),g.jsxs("div",{className:"phone-input-group",children:[g.jsxs("select",{value:t,onChange:H=>i(H.target.value),className:"country-code-select",children:[g.jsx("option",{value:"+91",children:"+91 (India)"}),g.jsx("option",{value:"+1",children:"+1 (US)"}),g.jsx("option",{value:"+44",children:"+44 (UK)"}),g.jsx("option",{value:"+971",children:"+971 (UAE)"})]}),g.jsx("input",{type:"tel",placeholder:"Phone Number",value:n,onChange:H=>{const z=H.target.value.replace(/\D/g,"").slice(0,10);e(z)},className:"phone-input",maxLength:"10"})]}),g.jsxs("button",{onClick:v,className:"login-btn",disabled:n.length!==10,children:[g.jsx(rr,{className:"w-5 h-5"}),"Continue"]})]}),f==="password"&&g.jsxs("div",{className:"login-form",children:[g.jsx("h2",{className:"form-title",children:"Enter Password"}),g.jsxs("p",{className:"form-hint",children:["Phone: ",t,n]}),g.jsxs("div",{className:"input-group",children:[g.jsx(ol,{className:"input-icon"}),g.jsx("input",{type:"password",placeholder:"Enter your password",value:o,onChange:H=>a(H.target.value),className:"password-input"})]}),g.jsxs("button",{onClick:R,className:"login-btn",children:[g.jsx(Bi,{className:"w-5 h-5"}),"Login"]}),g.jsxs("button",{onClick:E,className:"otp-link-btn",style:{background:"transparent",border:"2px solid #4CAF50",color:"#4CAF50",marginTop:"12px"},children:[g.jsx(rr,{className:"w-5 h-5"}),"Use OTP Instead"]}),g.jsx("button",{onClick:()=>window.location.reload(),className:"back-btn",children:"Change Phone Number"})]}),f==="otp"&&g.jsxs("div",{className:"login-form",children:[g.jsx("h2",{className:"form-title",children:"Enter OTP"}),g.jsxs("p",{className:"form-hint",children:["We sent a 6-digit code to ",t,n]}),g.jsx("input",{type:"text",placeholder:"Enter 6-digit OTP",value:u,onChange:H=>{const z=H.target.value.replace(/\D/g,"").slice(0,6);d(z)},className:"otp-input",maxLength:"6"}),g.jsxs("button",{onClick:A,className:"login-btn",disabled:u.length!==6,children:[g.jsx(Bi,{className:"w-5 h-5"}),"Verify OTP"]}),g.jsx("button",{onClick:()=>window.location.reload(),className:"back-btn",children:"Change Phone Number"})]}),f==="register"&&g.jsxs("div",{className:"login-form",children:[g.jsx("h2",{className:"form-title",children:"Create Your Account"}),g.jsxs("p",{className:"form-hint",children:["Phone verified: ",t,n]}),g.jsxs("div",{className:"input-group",children:[g.jsx(Hi,{className:"input-icon"}),g.jsx("input",{type:"text",placeholder:"Your Full Name *",value:F.name,onChange:H=>U({...F,name:H.target.value}),className:"text-input"})]}),g.jsxs("div",{className:"input-group",children:[g.jsx(ol,{className:"input-icon"}),g.jsx("input",{type:"password",placeholder:"Create Password (min 6 characters) *",value:F.password,onChange:H=>U({...F,password:H.target.value}),className:"password-input"})]}),g.jsxs("div",{className:"input-group",children:[g.jsx(ol,{className:"input-icon"}),g.jsx("input",{type:"password",placeholder:"Confirm Password *",value:F.confirmPassword,onChange:H=>U({...F,confirmPassword:H.target.value}),className:"password-input"})]}),g.jsx("div",{className:"registration-divider",children:g.jsx("span",{children:"Your Address"})}),g.jsx("input",{type:"text",placeholder:"Street / Area / Village *",value:F.address.street,onChange:H=>U({...F,address:{...F.address,street:H.target.value}}),className:"registration-input"}),g.jsxs("div",{className:"registration-row",children:[g.jsx("input",{type:"text",placeholder:"City *",value:F.address.city,onChange:H=>U({...F,address:{...F.address,city:H.target.value}}),className:"registration-input",style:{flex:1}}),g.jsx("input",{type:"text",placeholder:"Pincode *",value:F.address.pincode,onChange:H=>{const z=H.target.value.replace(/\D/g,"").slice(0,6);U({...F,address:{...F.address,pincode:z}})},className:"registration-input",style:{flex:1},maxLength:"6"})]}),g.jsxs("select",{value:F.address.state,onChange:H=>U({...F,address:{...F.address,state:H.target.value}}),className:"registration-select",children:[g.jsx("option",{value:"Andhra Pradesh",children:"Andhra Pradesh"}),g.jsx("option",{value:"Telangana",children:"Telangana"}),g.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),g.jsx("option",{value:"Karnataka",children:"Karnataka"}),g.jsx("option",{value:"Other",children:"Other"})]}),g.jsxs("button",{onClick:J,className:"login-btn",disabled:!F.name||!F.password||!F.confirmPassword,children:[g.jsx(Bi,{className:"w-5 h-5"}),"Complete Registration"]})]}),g.jsx("div",{id:"recaptcha-container",style:{position:"absolute",visibility:"hidden"}})]})})},d3=({onSave:n,onClose:e})=>{const[t,i]=X.useState({name:"",email:"",password:"",confirmPassword:""}),o=u=>{if(u.preventDefault(),!t.name.trim()){alert("Please enter your name");return}if(t.password&&t.password.length<6){alert("Password must be at least 6 characters");return}if(t.password&&t.password!==t.confirmPassword){alert("Passwords do not match");return}if(t.email&&!t.email.includes("@")){alert("Please enter a valid email address");return}n({name:t.name.trim(),email:t.email.trim()||null,password:t.password||null,profileCompleted:!0})},a=()=>{n({name:null,email:null,password:null,profileCompleted:!1})};return g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-content profile-setup-modal",onClick:u=>u.stopPropagation(),style:{padding:"0"},children:[g.jsxs("div",{className:"modal-header profile-setup-header",children:[g.jsx("h3",{className:"modal-title",style:{color:"white",margin:0,fontSize:"24px",fontWeight:"700"},children:"Welcome! "}),g.jsx("p",{style:{fontSize:"15px",color:"rgba(255,255,255,0.95)",marginTop:"10px",margin:0},children:"Just tell us your name to get started"})]}),g.jsxs("form",{onSubmit:o,className:"profile-setup-form",children:[g.jsxs("div",{className:"form-group",style:{marginBottom:"22px"},children:[g.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",fontWeight:"600",fontSize:"15px"},children:[g.jsx(Hi,{className:"w-5 h-5"}),"Your Name *"]}),g.jsx("input",{type:"text",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"Enter your full name",value:t.name,onChange:u=>i({...t,name:u.target.value}),required:!0,autoFocus:!0})]}),g.jsxs("div",{style:{background:"#f5f5f5",padding:"18px",borderRadius:"12px",marginBottom:"24px"},children:[g.jsx("p",{style:{fontSize:"14px",color:"#666",margin:"0 0 16px 0",fontWeight:"600"},children:"Optional (for future logins)"}),g.jsxs("div",{className:"form-group",style:{marginBottom:"14px"},children:[g.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"14px"},children:[g.jsx(Ek,{className:"w-5 h-5"}),"Email Address"]}),g.jsx("input",{type:"email",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"your@email.com (optional)",value:t.email,onChange:u=>i({...t,email:u.target.value})})]}),g.jsxs("div",{className:"form-group",style:{marginBottom:"14px"},children:[g.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"14px"},children:[g.jsx(ol,{className:"w-5 h-5"}),"Password"]}),g.jsx("input",{type:"password",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"Minimum 6 characters (optional)",value:t.password,onChange:u=>i({...t,password:u.target.value})})]}),t.password&&g.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[g.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"14px"},children:[g.jsx(ol,{className:"w-5 h-5"}),"Confirm Password"]}),g.jsx("input",{type:"password",className:"form-input",style:{fontSize:"16px",padding:"14px 16px"},placeholder:"Re-enter password",value:t.confirmPassword,onChange:u=>i({...t,confirmPassword:u.target.value})})]}),g.jsx("p",{style:{fontSize:"11px",color:"#999",marginTop:"8px",marginBottom:0},children:" Skip password to continue with OTP-only login"})]}),g.jsxs("button",{type:"submit",className:"btn-primary",style:{width:"100%",padding:"16px",fontSize:"16px",fontWeight:"600",background:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)",border:"none",borderRadius:"12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"12px"},children:[g.jsx(al,{className:"w-5 h-5"}),"Complete Setup"]}),g.jsx("button",{type:"button",onClick:a,className:"btn-secondary",style:{width:"100%",padding:"14px",fontSize:"14px",fontWeight:"500",background:"transparent",color:"#4CAF50",border:"2px solid #4CAF50",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s"},children:"Skip for Now"}),g.jsx("p",{style:{fontSize:"11px",color:"#999",textAlign:"center",marginTop:"12px",marginBottom:0},children:"You can complete your profile later before placing orders"})]})]})})},h3=({addresses:n,onAddAddress:e,onEditAddress:t,onDeleteAddress:i,onSetDefault:o,onClose:a})=>g.jsx("div",{className:"modal-overlay",onClick:a,children:g.jsxs("div",{className:"modal-content address-manager-modal",onClick:u=>u.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h3",{className:"modal-title",children:"Manage Addresses"}),g.jsx("button",{onClick:a,className:"modal-close-btn",children:g.jsx(oa,{className:"w-6 h-6"})})]}),g.jsxs("div",{className:"address-manager-body",children:[g.jsxs("button",{onClick:e,className:"add-address-btn",children:[g.jsx(th,{className:"w-5 h-5"}),"Add New Address"]}),n.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(Zo,{className:"w-16 h-16 text-gray-400"}),g.jsx("p",{children:"No saved addresses yet"})]}):g.jsx("div",{className:"addresses-list",children:n.map(u=>g.jsxs("div",{className:"address-card",children:[g.jsxs("div",{className:"address-card-header",children:[g.jsxs("div",{className:"address-label-section",children:[g.jsx("span",{className:`address-label-badge ${u.label.toLowerCase()}`,children:u.label}),u.isDefault&&g.jsx("span",{className:"default-badge",children:"Default"})]}),g.jsxs("div",{className:"address-actions",children:[g.jsx("button",{onClick:()=>t(u),className:"icon-btn",title:"Edit",children:g.jsx(ih,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>i(u.id),className:"icon-btn delete",title:"Delete",children:g.jsx(Ou,{className:"w-4 h-4"})})]})]}),g.jsxs("div",{className:"address-card-body",children:[g.jsx(Zo,{className:"w-4 h-4 text-gray-500"}),g.jsx("p",{className:"address-text",children:u.fullAddress})]}),u.deliveryInstructions&&g.jsxs("p",{className:"address-instructions",children:[g.jsx("strong",{children:"Instructions:"})," ",u.deliveryInstructions]}),!u.isDefault&&g.jsx("button",{onClick:()=>o(u.id),className:"set-default-btn",children:"Set as Default"})]},u.id))})]})]})}),f3=({onSave:n,onClose:e,editingAddress:t})=>{const[i,o]=X.useState({label:t?.label||"Home",fullAddress:t?.fullAddress||"",deliveryInstructions:t?.deliveryInstructions||"",latitude:t?.latitude||null,longitude:t?.longitude||null}),[a,u]=X.useState(!1),d=()=>{"geolocation"in navigator?(u(!0),navigator.geolocation.getCurrentPosition(async h=>{const{latitude:v,longitude:E}=h.coords;try{const A=window.location.hostname.includes("replit.dev")?`https://${window.location.hostname}:8000`:(window.location.hostname==="localhost","http://localhost:8000"),L=await(await fetch(`${A}/geocode?lat=${v}&lon=${E}`)).json();L.status==="success"&&L.address?o({...i,fullAddress:L.address,latitude:v,longitude:E}):o({...i,fullAddress:`Location: ${v.toFixed(6)}, ${E.toFixed(6)}`,latitude:v,longitude:E}),u(!1)}catch(A){console.error("Error getting address:",A),o({...i,fullAddress:`${v.toFixed(6)}, ${E.toFixed(6)}`,latitude:v,longitude:E}),u(!1)}},h=>{console.error("Geolocation error:",h),alert("Unable to get your location. Please enter address manually or check location permissions."),u(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):alert("Geolocation is not supported by your device.")},f=h=>{if(h.preventDefault(),!i.fullAddress.trim()){alert("Please enter an address");return}n(i)};return g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h3",{className:"modal-title",children:t?"Edit Address":"Add New Address"}),g.jsx("button",{onClick:e,className:"modal-close-btn",children:g.jsx(oa,{className:"w-6 h-6"})})]}),g.jsxs("form",{onSubmit:f,className:"address-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Address Label"}),g.jsxs("select",{className:"form-input",value:i.label,onChange:h=>o({...i,label:h.target.value}),children:[g.jsx("option",{value:"Home",children:"Home"}),g.jsx("option",{value:"Work",children:"Work"}),g.jsx("option",{value:"Other",children:"Other"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Full Address"}),g.jsx("textarea",{className:"form-input",rows:"3",placeholder:"Enter complete delivery address",value:i.fullAddress,onChange:h=>o({...i,fullAddress:h.target.value}),required:!0}),g.jsxs("button",{type:"button",onClick:d,disabled:a,style:{width:"100%",marginTop:"10px",background:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)",color:"white",border:"none",borderRadius:"8px",padding:"12px 16px",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",fontWeight:"600",opacity:a?.6:1,transition:"opacity 0.2s"},children:[g.jsx(zC,{className:"w-4 h-4"}),a?"Getting Location...":"Use My Location"]}),i.latitude&&i.longitude&&g.jsxs("p",{className:"form-hint",style:{color:"#4CAF50",marginTop:"8px",display:"flex",alignItems:"center",gap:"4px",fontSize:"13px"},children:[g.jsx(Zo,{className:"w-4 h-4"}),"Location captured: ",i.latitude.toFixed(6),", ",i.longitude.toFixed(6)]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Delivery Instructions (Optional)"}),g.jsx("input",{type:"text",className:"form-input",placeholder:"e.g., Ring bell twice, Gate code 1234",value:i.deliveryInstructions,onChange:h=>o({...i,deliveryInstructions:h.target.value})})]}),g.jsxs("div",{className:"form-actions",children:[g.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"}),g.jsxs("button",{type:"submit",className:"btn-primary",children:[g.jsx(al,{className:"w-5 h-5"}),t?"Update Address":"Add Address"]})]})]})]})})},p3=()=>{const{db:n}=ws(),[e,t]=X.useState([]),[i,o]=X.useState(!0);return X.useEffect(()=>{const a=En(n,"artifacts",Ce,"public","data","users"),u=Oi(a,d=>{const f=d.docs.map(h=>({id:h.id,...h.data()}));f.sort((h,v)=>new Date(v.createdAt||0)-new Date(h.createdAt||0)),t(f),o(!1)});return()=>u()},[n]),i?g.jsx("div",{className:"loading-state",children:"Loading users..."}):g.jsxs("div",{className:"users-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h3",{className:"section-subtitle",children:"Registered Users"}),g.jsx("span",{className:"count-badge",children:e.length})]}),g.jsx("p",{className:"section-description",children:"All users who have registered via phone authentication."}),e.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(Hi,{className:"empty-icon"}),g.jsx("p",{className:"empty-text",children:"No users registered yet"})]}):g.jsx("div",{className:"users-list",children:e.map(a=>g.jsxs("div",{className:"user-card",children:[g.jsx("div",{className:"user-avatar",children:g.jsx(Hi,{className:"w-8 h-8"})}),g.jsxs("div",{className:"user-info",children:[g.jsx("h4",{className:"user-name",children:a.name||"No name"}),g.jsxs("p",{className:"user-phone",children:[g.jsx(rr,{className:"w-4 h-4"}),g.jsx("a",{href:`tel:${a.phoneNumber}`,children:a.phoneNumber})]}),a.email&&g.jsx("p",{className:"user-email",children:a.email}),g.jsxs("p",{className:"user-date",children:["Joined: ",a.createdAt?new Date(a.createdAt).toLocaleDateString():"Unknown"]})]})]},a.id))})]})};function Rm({onTranscript:n,language:e="en",className:t=""}){const[i,o]=X.useState(!1),[a,u]=X.useState(!0),[d]=X.useState(()=>new to);X.useEffect(()=>{u(to.isSupported())},[]);const f=async()=>{try{await d.startRecording(()=>{console.log("[VoiceInput] Auto-stopping after silence"),h()}),o(!0)}catch(E){console.error("[VoiceInput] Recording error:",E),E.message==="FEATURE_NOT_SUPPORTED"?alert(e==="te"?"     ":"Voice recording is not supported on your device"):E.name==="NotAllowedError"||E.name==="PermissionDeniedError"?alert(e==="te"?"  ":"Please allow microphone access"):alert(e==="te"?"   ":"Failed to start voice recording")}},h=async()=>{try{const E=await d.stopRecording(),A=await d.blobToBase64(E),R=await Ay(A,E.type);n(R)}catch(E){console.error("[VoiceInput] Transcription error:",E),alert(e==="te"?" .  ":"Voice input failed. Please try again")}finally{o(!1)}},v=async()=>{i?await h():await f()};return a?g.jsx("button",{type:"button",onClick:v,className:`voice-input-btn ${i?"listening":""} ${t}`,"aria-label":e==="te"?" ":"Voice Input",title:i?e==="te"?"... 2    ":"Speaking... Auto-stops after 2s silence":e==="te"?"  ":"Tap mic and speak",children:i?g.jsx(fy,{size:18}):g.jsx(py,{size:18})}):null}const Nm=({onTranscript:n,className:e=""})=>{const[t,i]=X.useState(!1),[o,a]=X.useState(!0),[u]=X.useState(()=>new to);X.useEffect(()=>{a(to.isSupported())},[]);const d=async E=>{console.log("[BilingualVoiceInput] Recognized:",E);try{const{english:A,telugu:R}=await Y6(E);console.log("[BilingualVoiceInput] Generated EN:",A,"TE:",R),n({english:A||"",telugu:R||"",original:E||""})}catch(A){console.error("[BilingualVoiceInput] Translation error:",A),n({english:E||"",telugu:E||"",original:E||""})}},f=async()=>{try{await u.startRecording(()=>{console.log("[BilingualVoiceInput] Auto-stopping after silence"),h()}),i(!0)}catch(E){console.error("[BilingualVoiceInput] Recording error:",E),E.message==="FEATURE_NOT_SUPPORTED"?alert(`Voice recording is not supported on your device
     `):E.name==="NotAllowedError"||E.name==="PermissionDeniedError"?alert(`Please allow microphone access
  `):alert(`Failed to start voice recording
   `)}},h=async()=>{try{const E=await u.stopRecording(),A=await u.blobToBase64(E),R=await Ay(A,E.type);await d(R)}catch(E){console.error("[BilingualVoiceInput] Transcription error:",E),alert(`Voice input failed. Please try again
 .  `)}finally{i(!1)}},v=async()=>{t?await h():await f()};return o?g.jsx("button",{type:"button",onClick:v,className:`voice-input-btn ${t?"listening":""} ${e}`,title:t?"Speaking... Auto-stops after 2s silence":"Tap and speak (auto-translates to both languages)",children:t?g.jsx(fy,{className:"w-4 h-4"}):g.jsx(py,{className:"w-4 h-4"})}):null},m3=({products:n,allOrders:e,allRiders:t,language:i,onExit:o,categoriesData:a,subcategoriesData:u,logoUrl:d,onLogoChange:f})=>{const{db:h,storage:v}=ws(),E=Xn[i],[A,R]=X.useState("orders"),[L,F]=X.useState(new Date().toISOString().split("T")[0]),[U,J]=X.useState(!1),[H,z]=X.useState(""),[se,ee]=X.useState(null),[fe,O]=X.useState(null),[P,b]=X.useState(!1),[M,k]=X.useState({nameEn:"",nameTe:"",price:"",discountedPrice:"",weight:"",imageUrl:"",category:"",subcategoryId:"",isPopular:!1,outOfStock:!1}),[V,N]=X.useState(null),[we,ze]=X.useState(""),[ne,pe]=X.useState("all"),[le,Te]=X.useState(null),[q,ie]=X.useState(!1),[de,he]=X.useState({nameEn:"",nameTe:"",imageUrl:"",color:"#4CAF50",gradient:""}),[ye,be]=X.useState(null),[Ee,Ve]=X.useState(null),[Le,ht]=X.useState(!1),[ot,Vt]=X.useState({nameEn:"",nameTe:"",categoryId:"",imageUrl:""}),[hi,Mn]=X.useState(null),[xi,Cs]=X.useState(null),[Qi,bt]=X.useState(null),[hn,vt]=X.useState("active"),[Pt,zn]=X.useState(!1),[Wi,Is]=X.useState("orders"),[Ri,Ni]=X.useState(new Set),kn=[{id:"groceries",nameEn:"Groceries",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1588964895597-cfccd6e2dbf9?w=100&h=100&fit=crop",color:"#4CAF50",gradient:"linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%)"},{id:"vegetables",nameEn:"Vegetables",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=100&h=100&fit=crop",color:"#8BC34A",gradient:"linear-gradient(135deg, #8BC34A 0%, #9CCC65 100%)"},{id:"milk",nameEn:"Milk",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100&h=100&fit=crop",color:"#5DADE2",gradient:"linear-gradient(135deg, #5DADE2 0%, #74B9E8 100%)"},{id:"snacks",nameEn:"Snacks",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1599490659213-e2b9527bd087?w=100&h=100&fit=crop",color:"#FF9800",gradient:"linear-gradient(135deg, #FF9800 0%, #FFA726 100%)"},{id:"medicines",nameEn:"Medicines",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1471864190281-a93a3070b6de?w=100&h=100&fit=crop",color:"#2196F3",gradient:"linear-gradient(135deg, #2196F3 0%, #42A5F5 100%)"},{id:"electronics",nameEn:"Electronics",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=100&h=100&fit=crop",color:"#9C27B0",gradient:"linear-gradient(135deg, #9C27B0 0%, #AB47BC 100%)"}],at=async()=>{try{if(!(await hy(En(h,"artifacts",Ce,"public","data","categories"))).empty){alert("Categories already exist. Clear existing categories first if you want to reseed.");return}const Q=[{id:"groceries",nameEn:"Groceries",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1588964895597-cfccd6e2dbf9?w=100&h=100&fit=crop",color:"#4CAF50",gradient:"linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%)"},{id:"vegetables",nameEn:"Vegetables",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=100&h=100&fit=crop",color:"#8BC34A",gradient:"linear-gradient(135deg, #8BC34A 0%, #9CCC65 100%)"},{id:"milk",nameEn:"Milk & Dairy",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100&h=100&fit=crop",color:"#5DADE2",gradient:"linear-gradient(135deg, #5DADE2 0%, #74B9E8 100%)"},{id:"snacks",nameEn:"Snacks",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1599490659213-e2b9527bd087?w=100&h=100&fit=crop",color:"#FF9800",gradient:"linear-gradient(135deg, #FF9800 0%, #FFA726 100%)"},{id:"medicines",nameEn:"Medicines",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1471864190281-a93a3070b6de?w=100&h=100&fit=crop",color:"#2196F3",gradient:"linear-gradient(135deg, #2196F3 0%, #42A5F5 100%)"},{id:"electronics",nameEn:"Electronics",nameTe:"",imageUrl:"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=100&h=100&fit=crop",color:"#9C27B0",gradient:"linear-gradient(135deg, #9C27B0 0%, #AB47BC 100%)"}],ge=[{id:"groceries-dals",nameEn:"Dals & Pulses",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1572449102205-d51f05b2a0e0?w=100&h=100&fit=crop"},{id:"groceries-rice",nameEn:"Rice & Rice Products",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1586201375761-83865001e31c?w=100&h=100&fit=crop"},{id:"groceries-oils",nameEn:"Oils & Ghee",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?w=100&h=100&fit=crop"},{id:"groceries-spices",nameEn:"Spices",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1596040033229-a0b0b7b98adc?w=100&h=100&fit=crop"},{id:"groceries-flours",nameEn:"Flours & Atta",nameTe:"",categoryId:"groceries",imageUrl:"https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b?w=100&h=100&fit=crop"},{id:"vegetables-leafy",nameEn:"Leafy Vegetables",nameTe:" ",categoryId:"vegetables",imageUrl:"https://images.unsplash.com/photo-1540420773420-3366772f4999?w=100&h=100&fit=crop"},{id:"vegetables-root",nameEn:"Root Vegetables",nameTe:"",categoryId:"vegetables",imageUrl:"https://images.unsplash.com/photo-1447175008436-054170c2e979?w=100&h=100&fit=crop"},{id:"vegetables-seasonal",nameEn:"Seasonal Vegetables",nameTe:" ",categoryId:"vegetables",imageUrl:"https://images.unsplash.com/photo-1566385101042-1a0aa0c1268c?w=100&h=100&fit=crop"},{id:"milk-fresh",nameEn:"Fresh Milk",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100&h=100&fit=crop"},{id:"milk-curd",nameEn:"Curd & Yogurt",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1571212515935-c0629c19f520?w=100&h=100&fit=crop"},{id:"milk-butter",nameEn:"Butter & Ghee",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1589985270826-4b7bb135bc9d?w=100&h=100&fit=crop"},{id:"milk-cheese",nameEn:"Cheese & Paneer",nameTe:"",categoryId:"milk",imageUrl:"https://images.unsplash.com/photo-1452195100486-9cc805987862?w=100&h=100&fit=crop"},{id:"snacks-namkeen",nameEn:"Namkeen",nameTe:"",categoryId:"snacks",imageUrl:"https://images.unsplash.com/photo-1621939514649-280e2ee25f60?w=100&h=100&fit=crop"},{id:"snacks-biscuits",nameEn:"Biscuits & Cookies",nameTe:"",categoryId:"snacks",imageUrl:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?w=100&h=100&fit=crop"},{id:"snacks-chips",nameEn:"Chips",nameTe:"",categoryId:"snacks",imageUrl:"https://images.unsplash.com/photo-1600952841320-db92ec8b5d2a?w=100&h=100&fit=crop"},{id:"medicines-firstaid",nameEn:"First Aid",nameTe:" ",categoryId:"medicines",imageUrl:"https://images.unsplash.com/photo-1603398938378-e54eab446dde?w=100&h=100&fit=crop"},{id:"medicines-supplements",nameEn:"Health Supplements",nameTe:"",categoryId:"medicines",imageUrl:"https://images.unsplash.com/photo-1471864190281-a93a3070b6de?w=100&h=100&fit=crop"},{id:"electronics-mobiles",nameEn:"Mobiles & Accessories",nameTe:"",categoryId:"electronics",imageUrl:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=100&h=100&fit=crop"},{id:"electronics-headphones",nameEn:"Headphones & Earphones",nameTe:"",categoryId:"electronics",imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100&h=100&fit=crop"},{id:"electronics-chargers",nameEn:"Chargers & Cables",nameTe:"",categoryId:"electronics",imageUrl:"https://images.unsplash.com/photo-1583863788434-e58a36330cf0?w=100&h=100&fit=crop"}];for(const qe of Q){const{id:Ie,...je}=qe;await vn(Be(h,"artifacts",Ce,"public","data","categories",Ie),{...je,createdAt:new Date().toISOString()})}for(const qe of ge){const{id:Ie,...je}=qe;await vn(Be(h,"artifacts",Ce,"public","data","subcategories",Ie),{...je,createdAt:new Date().toISOString()})}alert("Default categories and subcategories added successfully! Refresh the page to see them.")}catch(x){console.error("Error seeding data:",x),alert(`Failed to seed data: ${x.message}`)}},Sn=x=>{const Q=x.target.files[0];if(Q){if(Q.size>5e5){alert("Image size should be less than 500KB");return}const ge=new FileReader;ge.onloadend=()=>{k({...M,imageUrl:ge.result}),Te(ge.result)},ge.readAsDataURL(Q)}},Qt=x=>{const Q=x.target.files[0];if(Q){if(Q.size>5e5){alert("Image size should be less than 500KB");return}const ge=new FileReader;ge.onloadend=()=>{he({...de,imageUrl:ge.result}),Ve(ge.result)},ge.readAsDataURL(Q)}},Xi=x=>{const Q=x.target.files[0];if(Q){if(Q.size>5e5){alert("Image size should be less than 500KB");return}const ge=new FileReader;ge.onloadend=()=>{Vt({...ot,imageUrl:ge.result}),Cs(ge.result)},ge.readAsDataURL(Q)}},xs=async(x,Q)=>{console.log("[Shopkeeper] Updating order:",x,"to status:",Q),console.log("[Shopkeeper] DB available:",!!h,"AppId:",Ce);try{if(!h)throw new Error("Firebase database not initialized");await Gn(Be(h,"artifacts",Ce,"public","data","orders",x),{status:Q,updatedAt:new Date().toISOString()}),alert(`Order status updated to ${Q}!`)}catch(ge){console.error("Error updating order:",ge),alert(`Failed to update order status: ${ge.message}`)}},Rs=async x=>{const Q=prompt("Please enter reason for cancellation:");if(!(!Q||Q.trim()===""))try{if(!h)throw new Error("Firebase database not initialized");await Gn(Be(h,"artifacts",Ce,"public","data","orders",x),{status:"cancelled",cancellationReason:Q.trim(),updatedAt:new Date().toISOString()}),alert("Order cancelled successfully!")}catch(ge){console.error("Error cancelling order:",ge),alert(`Failed to cancel order: ${ge.message}`)}},Wt=x=>{bt(x),zn(!0)},Un=x=>{const Q=window.open("","_blank"),ge=new Date(x.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),qe=new Date(x.createdAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),Ie=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Receipt - ${x.orderNumber||x.id.substring(0,8)}</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { 
              font-family: 'Courier New', monospace; 
              padding: 30px 20px; 
              max-width: 320px; 
              margin: 0 auto;
              background: #fff;
              color: #333;
            }
            .receipt-header { 
              text-align: center; 
              margin-bottom: 20px;
              color: #999;
            }
            .receipt-header h1 { 
              font-size: 18px; 
              font-style: italic;
              font-weight: 400;
              margin-bottom: 10px;
              letter-spacing: 2px;
            }
            .receipt-number { 
              text-align: center;
              font-size: 11px;
              margin-bottom: 20px;
              color: #666;
            }
            .items-list { 
              margin-bottom: 20px;
            }
            .item-row { 
              display: flex;
              justify-content: space-between;
              margin-bottom: 8px;
              font-size: 13px;
            }
            .item-name {
              flex: 1;
              padding-right: 10px;
            }
            .item-price {
              text-align: right;
              white-space: nowrap;
            }
            .divider {
              border-top: 1px dashed #ccc;
              margin: 15px 0;
            }
            .total-row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 8px;
              font-size: 13px;
            }
            .total-row.grand {
              font-weight: bold;
              font-size: 16px;
              margin-top: 10px;
            }
            .footer {
              text-align: center;
              margin-top: 25px;
              font-size: 12px;
              color: #666;
            }
            .print-buttons {
              text-align: center;
              margin-top: 30px;
            }
            .print-buttons button {
              background: #333;
              color: white;
              border: none;
              padding: 10px 25px;
              font-size: 14px;
              cursor: pointer;
              margin: 0 5px;
              border-radius: 3px;
            }
            .print-buttons button:hover {
              background: #555;
            }
            @media print {
              body { padding: 10px; }
              .print-buttons { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="receipt-header">
            <h1>DUKAAN</h1>
            <div style="font-size: 11px; color: #999; margin-top: 5px;">
              ${x.customerName||"Customer"}<br>
              ${ge} ${qe}
            </div>
          </div>
          
          <div class="receipt-number">
            ${x.orderNumber||`RECEIPT # ${x.id.substring(0,8).toUpperCase()}`}
          </div>

          <div class="items-list">
            ${x.items.map(je=>`
                <div class="item-row">
                  <span class="item-name">${x.customerLanguage==="te"?je.nameTe||je.nameEn||je.name:je.nameEn||je.name}</span>
                  <span class="item-price">${((je.price||0)*je.quantity).toFixed(2)}</span>
                </div>
              `).join("")}
          </div>

          <div class="divider"></div>

          ${x.totalSavings&&x.totalSavings>0?`
            <div class="total-row">
              <span>You Saved</span>
              <span style="color: #666;">${x.totalSavings.toFixed(2)}</span>
            </div>
          `:""}

          <div class="total-row grand">
            <span>TOTAL</span>
            <span>${x.total.toFixed(2)}</span>
          </div>

          <div class="footer">
            *** THANK YOU ***
          </div>

          <div class="print-buttons">
            <button onclick="window.print()">Print</button>
            <button onclick="window.close()">Close</button>
          </div>
        </body>
      </html>
    `;Q.document.write(Ie),Q.document.close()},Vn=async x=>{if(x.preventDefault(),!M.category||!M.subcategoryId){alert("Please select both Category and Subcategory before saving the product.");return}try{if(!h)throw new Error("Firebase database not initialized");const Q={...M,price:parseFloat(M.price),discountedPrice:M.discountedPrice?parseFloat(M.discountedPrice):null,isPopular:M.isPopular||!1};V?(await Gn(Be(h,"artifacts",Ce,"public","data","products",V),Q),alert("Product updated successfully!")):(Q.sortOrder=n.length,Q.createdAt=new Date().toISOString(),await of(En(h,"artifacts",Ce,"public","data","products"),Q),alert("Product added successfully!")),k({nameEn:"",nameTe:"",price:"",discountedPrice:"",weight:"",imageUrl:"",category:"",subcategoryId:"",isPopular:!1,outOfStock:!1}),Te(null),J(!1),N(null)}catch(Q){console.error("Error saving product:",Q),console.error("Error code:",Q.code),console.error("Error message:",Q.message),console.error("AppId:",Ce),console.error("Database instance:",h?"initialized":"not initialized"),alert(`Failed to save product: ${Q.message||Q.code||"Unknown error"}`)}},wn=x=>{k({nameEn:x.nameEn||x.name||"",nameTe:x.nameTe||"",price:x.price.toString(),discountedPrice:x.discountedPrice?.toString()||"",weight:x.weight,imageUrl:x.imageUrl||"",category:x.category||"",subcategoryId:x.subcategoryId||"",isPopular:x.isPopular||!1,outOfStock:x.outOfStock||!1}),Te(x.imageUrl||null),N(x.id),J(!0),R("products")},jn=async x=>{if(console.log("[Shopkeeper] Delete product clicked:",x),window.confirm("Are you sure you want to delete this product?"))try{if(!h)throw new Error("Firebase database not initialized");await Za(Be(h,"artifacts",Ce,"public","data","products",x)),alert("Product deleted successfully!")}catch(Q){console.error("Error deleting product:",Q),alert(`Failed to delete product: ${Q.message}`)}},Zi=async(x,Q)=>{console.log("[Shopkeeper] Toggle popular:",x,"current:",Q);try{if(!h)throw new Error("Firebase database not initialized");await Gn(Be(h,"artifacts",Ce,"public","data","products",x),{isPopular:!Q}),console.log("[Shopkeeper] Popular status updated successfully")}catch(ge){console.error("Error updating popular status:",ge),alert(`Failed to update popular status: ${ge.message}`)}},Zn=async(x,Q,ge,qe)=>{if(!(ge===qe||ge<0||qe<0||ge>=Q.length||qe>=Q.length))try{const Ie=[],je=[...Q],[pn]=je.splice(ge,1);je.splice(qe,0,pn),je.forEach((Dt,la)=>{Ie.push(vn(Be(h,"artifacts",Ce,"public","data",x,Dt.id),{sortOrder:la},{merge:!0}))}),await Promise.all(Ie)}catch(Ie){console.error("Error reordering items:",Ie),alert("Failed to reorder items")}},ei=async(x,Q)=>{const ge=[...a].sort((je,pn)=>(je.sortOrder||0)-(pn.sortOrder||0)),qe=ge.findIndex(je=>je.id===x),Ie=Q==="up"?qe-1:qe+1;await Zn("categories",ge,qe,Ie)},fi=async(x,Q)=>{const ge=[...u].sort((je,pn)=>(je.sortOrder||0)-(pn.sortOrder||0)),qe=ge.findIndex(je=>je.id===x),Ie=Q==="up"?qe-1:qe+1;await Zn("subcategories",ge,qe,Ie)},ft=async(x,Q)=>{const ge=[...n].sort((je,pn)=>(je.sortOrder||0)-(pn.sortOrder||0)),qe=ge.findIndex(je=>je.id===x),Ie=Q==="up"?qe-1:qe+1;await Zn("products",ge,qe,Ie)},Ns=async x=>{x.preventDefault();try{const Q=de.nameEn.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),ge={nameEn:de.nameEn,nameTe:de.nameTe,imageUrl:de.imageUrl,color:de.color,gradient:de.gradient||`linear-gradient(135deg, ${de.color} 0%, ${de.color}dd 100%)`,sortOrder:ye?void 0:a.length,createdAt:new Date().toISOString()};ye?(await vn(Be(h,"artifacts",Ce,"public","data","categories",ye),ge,{merge:!0}),alert("Category updated successfully!")):(await vn(Be(h,"artifacts",Ce,"public","data","categories",Q),ge),alert("Category added successfully!")),he({nameEn:"",nameTe:"",imageUrl:"",color:"#4CAF50",gradient:""}),ie(!1),be(null),Ve(null)}catch(Q){console.error("Error saving category:",Q),alert(`Failed to save category: ${Q.message}`)}},Ln=x=>{he({nameEn:x.nameEn||"",nameTe:x.nameTe||"",imageUrl:x.imageUrl||"",color:x.color||"#4CAF50",gradient:x.gradient||""}),Ve(x.imageUrl||null),be(x.id),ie(!0)},pi=async x=>{if(window.confirm("Are you sure? This will affect related subcategories and products."))try{await Za(Be(h,"artifacts",Ce,"public","data","categories",x)),alert("Category deleted successfully!")}catch(Q){console.error("Error deleting category:",Q),alert(`Failed to delete category: ${Q.message}`)}},bs=async x=>{x.preventDefault();try{const Q=`${ot.categoryId}-${ot.nameEn.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}`,ge={nameEn:ot.nameEn,nameTe:ot.nameTe,categoryId:ot.categoryId,imageUrl:ot.imageUrl,sortOrder:hi?void 0:u.length,createdAt:new Date().toISOString()};hi?(await vn(Be(h,"artifacts",Ce,"public","data","subcategories",hi),ge,{merge:!0}),alert("Subcategory updated successfully!")):(await vn(Be(h,"artifacts",Ce,"public","data","subcategories",Q),ge),alert("Subcategory added successfully!")),Vt({nameEn:"",nameTe:"",categoryId:"",imageUrl:""}),ht(!1),Mn(null),Cs(null)}catch(Q){console.error("Error saving subcategory:",Q),alert(`Failed to save subcategory: ${Q.message}`)}},ar=x=>{Vt({nameEn:x.nameEn,nameTe:x.nameTe||"",categoryId:x.categoryId,icon:x.icon||""}),Mn(x.id),ht(!0)},ti=async x=>{if(window.confirm("Are you sure? This will affect related products."))try{await Za(Be(h,"artifacts",Ce,"public","data","subcategories",x)),alert("Subcategory deleted successfully!")}catch(Q){console.error("Error deleting subcategory:",Q),alert(`Failed to delete subcategory: ${Q.message}`)}},Ct=x=>{switch(x){case"pending":return"#9E9E9E";case"accepted":return"#2196F3";case"out_for_delivery":return"#FF9800";case"ready_for_pickup":return"#9C27B0";case"delivered":return"#4CAF50";case"completed":return"#4CAF50";case"cancelled":return"#f44336";default:return"#9E9E9E"}},Ke=x=>{switch(x){case"pending":return"PENDING";case"accepted":return"ACCEPTED";case"out_for_delivery":return"OUT FOR DELIVERY";case"ready_for_pickup":return"READY FOR PICKUP";case"delivered":return"DELIVERED";case"completed":return"COMPLETED";case"cancelled":return"CANCELLED";default:return x.toUpperCase()}},it=["pending","accepted","out_for_delivery","ready_for_pickup"],Tt=["delivered","cancelled","completed"],fn=[...e.filter(x=>hn==="active"?it.includes(x.status):Tt.includes(x.status))].sort((x,Q)=>new Date(Q.createdAt)-new Date(x.createdAt)),zt=n.filter(x=>{const Q=x.nameEn||x.nameTe||x.name||"",ge=x.nameTe||"",qe=Q.toLowerCase().includes(we.toLowerCase())||ge.includes(we),Ie=ne==="all"||x.category===ne;return qe&&Ie}),uo=n.filter(x=>x.isPopular);return g.jsxs("div",{className:"shopkeeper-dashboard",children:[g.jsxs("div",{className:"view-header",children:[g.jsx("button",{onClick:o,className:"back-button",children:g.jsx(Ci,{className:"w-6 h-6"})}),g.jsx("h2",{className:"view-title",children:E.shopkeeperDashboard})]}),g.jsxs("div",{className:"shopkeeper-search-bar",children:[g.jsx($C,{className:"w-5 h-5 text-gray-400"}),g.jsx("input",{type:"text",placeholder:"Search products, orders...",value:we,onChange:x=>ze(x.target.value),className:"search-input"})]}),g.jsxs("div",{className:"shopkeeper-tabs",children:[g.jsxs("button",{className:`tab-button ${A==="orders"?"active":""}`,onClick:()=>R("orders"),children:[g.jsx(Tn,{className:"w-5 h-5"}),"Orders"]}),g.jsxs("button",{className:`tab-button ${A==="categories"?"active":""}`,onClick:()=>R("categories"),children:[g.jsx(D0,{className:"w-5 h-5"}),"Categories"]}),g.jsxs("button",{className:`tab-button ${A==="subcategories"?"active":""}`,onClick:()=>R("subcategories"),children:[g.jsx(ea,{className:"w-5 h-5"}),"Subcategories"]}),g.jsxs("button",{className:`tab-button ${A==="products"?"active":""}`,onClick:()=>R("products"),children:[g.jsx(Tn,{className:"w-5 h-5"}),"Products"]}),g.jsxs("button",{className:`tab-button ${A==="popular"?"active":""}`,onClick:()=>R("popular"),children:[g.jsx(wm,{className:"w-5 h-5"}),"Popular"]}),g.jsxs("button",{className:`tab-button ${A==="users"?"active":""}`,onClick:()=>R("users"),children:[g.jsx(Hi,{className:"w-5 h-5"}),"Users"]}),g.jsxs("button",{className:`tab-button ${A==="riders"?"active":""}`,onClick:()=>R("riders"),children:[g.jsx(Hi,{className:"w-5 h-5"}),"Riders"]}),g.jsxs("button",{className:`tab-button ${A==="analytics"?"active":""}`,onClick:()=>R("analytics"),children:[g.jsx(jk,{className:"w-5 h-5"}),"Analytics"]})]}),g.jsxs("div",{className:"shopkeeper-content",children:[A==="orders"&&g.jsxs("div",{className:"orders-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h3",{className:"section-subtitle",children:"Orders Management"}),g.jsx("span",{className:"count-badge",children:e.length})]}),g.jsxs("div",{className:"order-tabs",children:[g.jsxs("button",{className:`order-tab-btn ${hn==="active"?"active":""}`,onClick:()=>vt("active"),children:["Active Orders (",it.reduce((x,Q)=>x+e.filter(ge=>ge.status===Q).length,0),")"]}),g.jsxs("button",{className:`order-tab-btn ${hn==="completed"?"active":""}`,onClick:()=>vt("completed"),children:["Completed Orders (",Tt.reduce((x,Q)=>x+e.filter(ge=>ge.status===Q).length,0),")"]})]}),fn.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(Tn,{className:"w-16 h-16 text-gray-400"}),g.jsx("p",{children:E.noIncomingOrders})]}):g.jsx("div",{className:"shopkeeper-orders-list",children:fn.map(x=>g.jsxs("div",{className:"shopkeeper-order-card-enhanced",children:[g.jsxs("div",{className:"order-card-top",children:[g.jsxs("div",{className:"order-info-section",children:[g.jsxs("div",{className:"order-id-row",children:[g.jsx(Hi,{className:"w-4 h-4 text-gray-500"}),g.jsx("span",{className:"order-customer",children:x.orderNumber||`Order #${x.id.substring(0,8)}`})]}),g.jsxs("div",{className:"order-time-row",children:[g.jsx(nc,{className:"w-4 h-4 text-gray-400"}),g.jsx("span",{className:"order-timestamp",children:new Date(x.createdAt).toLocaleString()})]}),x.customerPhone&&g.jsxs("div",{className:"order-phone-row",children:[g.jsx(rr,{className:"w-4 h-4 text-green-600"}),g.jsx("a",{href:`tel:${x.customerPhone}`,className:"order-phone-link",children:x.customerPhone})]})]}),g.jsx("div",{className:"order-status-badge-new",style:{backgroundColor:Ct(x.status)},children:Ke(x.status)})]}),x.deliveryAddress&&g.jsxs("div",{className:"order-address-section",children:[g.jsx(Zo,{className:"w-4 h-4 text-gray-500"}),g.jsx("span",{className:"order-address-text",children:x.deliveryAddress})]}),g.jsxs("div",{className:"order-items-container",children:[g.jsxs("button",{onClick:()=>{const Q=new Set(Ri);Q.has(x.id)?Q.delete(x.id):Q.add(x.id),Ni(Q)},className:"items-dropdown-toggle",children:[g.jsx(Tn,{className:"w-4 h-4"}),g.jsxs("span",{className:"items-count-text",children:[x.items.length," ",x.items.length===1?"Item":"Items"]}),Ri.has(x.id)?g.jsx(zd,{className:"w-4 h-4"}):g.jsx(Gd,{className:"w-4 h-4"})]}),Ri.has(x.id)&&g.jsx("div",{className:"order-items-list-enhanced",children:x.items.map((Q,ge)=>g.jsxs("div",{className:"order-item-row-enhanced",children:[g.jsx("img",{src:Q.imageUrl||"https://via.placeholder.com/50",alt:Q.nameEn||Q.name,className:"order-item-image"}),g.jsxs("div",{className:"order-item-details",children:[g.jsx("span",{className:"item-name",children:Q.nameEn||Q.name}),Q.nameTe&&Q.nameTe!==Q.nameEn&&g.jsx("span",{className:"item-name-te",children:Q.nameTe}),g.jsx("span",{className:"item-weight",children:Q.weight})]}),g.jsxs("span",{className:"item-quantity-badge",children:[" ",Q.quantity]}),g.jsxs("span",{className:"item-price-bold",children:["",(Q.price*Q.quantity).toFixed(0)]})]},ge))})]}),g.jsxs("div",{className:"order-card-bottom",children:[g.jsxs("div",{className:"order-total-section",children:[g.jsx("span",{className:"total-label",children:E.total}),g.jsxs("span",{className:"total-amount-large",children:["",x.total.toFixed(0)]})]}),g.jsxs("div",{className:"order-management-section",children:[g.jsxs("div",{className:"order-status-controls",children:[g.jsx("label",{className:"status-dropdown-label",children:"Status:"}),g.jsxs("select",{value:x.status,onChange:Q=>xs(x.id,Q.target.value),className:"status-dropdown",disabled:x.status==="cancelled"||x.status==="delivered"||x.status==="completed",children:[g.jsx("option",{value:"pending",children:"Pending"}),g.jsx("option",{value:"accepted",children:"Accepted"}),x.deliveryMethod==="pickup"?g.jsxs(g.Fragment,{children:[g.jsx("option",{value:"ready_for_pickup",children:"Ready for Pickup"}),g.jsx("option",{value:"completed",children:"Completed"})]}):g.jsxs(g.Fragment,{children:[g.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),g.jsx("option",{value:"delivered",children:"Delivered"})]}),g.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),x.deliveryMethod==="delivery"&&(x.status==="ready_for_pickup"||x.status==="accepted"||x.status==="out_for_delivery"||x.status==="delivered")&&g.jsxs("div",{className:"rider-assignment-section",style:{marginTop:"12px"},children:[g.jsx("label",{className:"status-dropdown-label",style:{fontSize:"13px"},children:x.riderName?`Rider: ${x.riderName}`:"Assign Rider:"}),x.status!=="delivered"?g.jsxs("select",{value:x.riderId||"",onChange:async Q=>{const ge=t.find(qe=>qe.id===Q.target.value);if(ge)try{await Gn(Be(h,"artifacts",Ce,"public","data","orders",x.id),{riderId:ge.id,riderName:ge.name,riderPhone:ge.phone,updatedAt:new Date().toISOString()}),alert(`Rider ${ge.name} assigned successfully!`)}catch(qe){console.error("Error assigning rider:",qe),alert("Failed to assign rider")}},className:"status-dropdown",style:{fontSize:"13px",padding:"6px 8px"},children:[g.jsx("option",{value:"",children:"Select Rider"}),t&&t.map(Q=>g.jsxs("option",{value:Q.id,children:[Q.name," - ",Q.phone]},Q.id))]}):g.jsx("span",{style:{fontSize:"13px",color:"#4CAF50",fontWeight:"600"},children:x.riderPhone&&` ${x.riderPhone}`})]}),g.jsxs("div",{className:"order-action-buttons",children:[g.jsxs("button",{onClick:()=>Wt(x),className:"view-details-btn",children:[g.jsx(dk,{className:"w-4 h-4"}),"View Details"]}),g.jsxs("button",{onClick:()=>Un(x),className:"view-details-btn",style:{background:"#2196F3"},children:[g.jsx(Tn,{className:"w-4 h-4"}),E.printBill]}),x.status!=="cancelled"&&x.status!=="delivered"&&x.status!=="completed"&&g.jsxs("button",{onClick:()=>Rs(x.id),className:"cancel-order-btn",children:[g.jsx(nh,{className:"w-4 h-4"}),"Cancel"]})]})]})]})]},x.id))})]}),A==="products"&&g.jsxs("div",{className:"products-section",children:[g.jsxs("button",{onClick:()=>J(!U),className:"add-product-btn",children:[g.jsx(th,{className:"w-5 h-5"}),E.addProduct]}),U&&g.jsxs("form",{onSubmit:Vn,className:"product-form",children:[g.jsxs("div",{className:"bilingual-input-group",children:[g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:E.productNameEn,value:M.nameEn,onChange:x=>k({...M,nameEn:x.target.value}),required:!0,className:"form-input"})}),g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:E.productNameTe,value:M.nameTe,onChange:x=>k({...M,nameTe:x.target.value}),required:!0,className:"form-input"})}),g.jsx(Nm,{onTranscript:({english:x,telugu:Q})=>{k({...M,nameEn:x||"",nameTe:Q||""})}})]}),g.jsxs("div",{className:"input-with-voice",children:[g.jsx("input",{type:"number",placeholder:E.productPrice,value:M.price,onChange:x=>k({...M,price:x.target.value}),required:!0,className:"form-input"}),g.jsx(Rm,{onTranscript:x=>k({...M,price:x.replace(/[^0-9]/g,"")}),language:i})]}),g.jsxs("div",{className:"input-with-voice",children:[g.jsx("input",{type:"number",placeholder:"Discounted Price (Optional)",value:M.discountedPrice,onChange:x=>k({...M,discountedPrice:x.target.value}),className:"form-input"}),g.jsx(Rm,{onTranscript:x=>k({...M,discountedPrice:x.replace(/[^0-9]/g,"")}),language:i})]}),g.jsxs("div",{className:"input-with-voice",children:[g.jsx("input",{type:"text",placeholder:E.productWeight,value:M.weight,onChange:x=>k({...M,weight:x.target.value}),required:!0,className:"form-input"}),g.jsx(Rm,{onTranscript:x=>k({...M,weight:x}),language:i})]}),g.jsxs("div",{className:"image-upload-section",children:[g.jsxs("label",{className:"upload-label",children:[g.jsx(Cm,{className:"w-5 h-5"}),"Upload Image (Max 500KB)",g.jsx("input",{type:"file",accept:"image/*",onChange:Sn,className:"file-input-hidden"})]}),g.jsx("input",{type:"text",placeholder:"Or paste image URL",value:M.imageUrl,onChange:x=>k({...M,imageUrl:x.target.value}),className:"form-input"}),le&&g.jsx("div",{className:"image-preview",children:g.jsx("img",{src:le,alt:"Preview"})})]}),g.jsxs("select",{value:M.category,onChange:x=>k({...M,category:x.target.value,subcategoryId:""}),className:"form-input",required:!0,children:[g.jsx("option",{value:"",children:i==="te"?" ":"Select Category"}),a.map(x=>g.jsxs("option",{value:x.id,children:[x.nameEn," / ",x.nameTe||""]},x.id))]}),M.category&&g.jsxs("select",{value:M.subcategoryId,onChange:x=>k({...M,subcategoryId:x.target.value}),className:"form-input",required:!0,children:[g.jsx("option",{value:"",children:i==="te"?"- ":"Select Subcategory"}),u.filter(x=>x.categoryId===M.category).map(x=>g.jsxs("option",{value:x.id,children:[x.nameEn," / ",x.nameTe||""]},x.id))]}),g.jsxs("label",{className:"checkbox-label",children:[g.jsx("input",{type:"checkbox",checked:M.isPopular,onChange:x=>k({...M,isPopular:x.target.checked})}),i==="te"?"  ":"Mark as Popular Product"]}),g.jsxs("label",{className:"checkbox-label",children:[g.jsx("input",{type:"checkbox",checked:M.outOfStock,onChange:x=>k({...M,outOfStock:x.target.checked})}),E.outOfStock," (",E.unavailablePickupDelivery,")"]}),g.jsxs("div",{className:"form-actions",children:[g.jsxs("button",{type:"submit",className:"save-btn",children:[g.jsx(al,{className:"w-4 h-4"}),E.save]}),g.jsx("button",{type:"button",onClick:()=>{J(!1),N(null),Te(null)},className:"cancel-btn",children:E.cancel})]})]}),g.jsxs("div",{className:"category-filters",children:[g.jsxs("button",{className:`filter-btn ${ne==="all"?"active":""}`,onClick:()=>pe("all"),children:[i==="te"?"":"All"," (",n.length,")"]}),kn.map(x=>{const Q=n.filter(ge=>ge.category===x.id).length;return g.jsxs("button",{className:`filter-btn ${ne===x.id?"active":""}`,onClick:()=>pe(x.id),children:[x.nameEn," (",Q,")"]},x.id)})]}),g.jsxs("div",{className:"products-admin-list",children:[g.jsxs("h3",{className:"section-subtitle",children:[E.manageProducts," (",zt.length,")"]}),zt.map(x=>g.jsxs("div",{className:"admin-product-card",children:[g.jsx("img",{src:x.imageUrl||"https://via.placeholder.com/60",alt:i==="te"?x.nameTe||x.nameEn||x.name:x.nameEn||x.name,className:"admin-product-img"}),g.jsxs("div",{className:"admin-product-info",children:[g.jsxs("h4",{children:[i==="te"?x.nameTe||x.nameEn||x.name:x.nameEn||x.name,x.nameEn&&x.nameTe&&i==="en"&&g.jsxs("span",{className:"name-alt",children:[" / ",x.nameTe]}),x.nameEn&&x.nameTe&&i==="te"&&g.jsxs("span",{className:"name-alt",children:[" / ",x.nameEn]})]}),g.jsxs("p",{children:[x.category,"  ",x.weight]}),g.jsxs("p",{className:"admin-price",children:["",x.discountedPrice||x.price]}),x.isPopular&&g.jsxs("span",{className:"popular-tag",children:[" ",i==="te"?"":"Popular"]})]}),g.jsxs("div",{className:"admin-product-actions",children:[g.jsx("button",{onClick:()=>wn(x),className:"edit-btn",children:g.jsx(ih,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>jn(x.id),className:"delete-btn",children:g.jsx(Ou,{className:"w-4 h-4"})})]})]},x.id))]})]}),A==="categories"&&g.jsxs("div",{className:"categories-section",children:[a.length===0&&g.jsxs("div",{style:{padding:"24px",background:"linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%)",borderRadius:"12px",marginBottom:"20px",border:"2px dashed #FF9800",textAlign:"center"},children:[g.jsx("h3",{style:{color:"#E65100",marginBottom:"12px",fontSize:"18px"},children:" No Categories Found in Database"}),g.jsx("p",{style:{color:"#757575",marginBottom:"16px",fontSize:"14px"},children:"Click below to add Zepto-style default categories (Groceries, Vegetables, Milk, Snacks, Medicines, Electronics)"}),g.jsxs("button",{onClick:at,className:"add-product-btn",style:{background:"#FF9800",fontSize:"16px",padding:"12px 24px"},children:[g.jsx(D0,{className:"w-5 h-5"}),"Seed Default Categories"]})]}),g.jsx("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:g.jsxs("button",{onClick:()=>ie(!q),className:"add-product-btn",children:[g.jsx(th,{className:"w-5 h-5"}),"Add Category"]})}),q&&g.jsxs("form",{onSubmit:Ns,className:"product-form",children:[g.jsxs("div",{className:"bilingual-input-group",children:[g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:"Category Name (English)",value:de.nameEn,onChange:x=>he({...de,nameEn:x.target.value}),required:!0,className:"form-input"})}),g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:"Category Name (Telugu)",value:de.nameTe,onChange:x=>he({...de,nameTe:x.target.value}),className:"form-input"})}),g.jsx(Nm,{onTranscript:({english:x,telugu:Q})=>{he({...de,nameEn:x||"",nameTe:Q||""})}})]}),g.jsxs("div",{className:"image-upload-section",children:[g.jsxs("label",{className:"upload-label",children:[g.jsx(Cm,{className:"w-5 h-5"}),"Upload Image (Max 500KB)",g.jsx("input",{type:"file",accept:"image/*",onChange:Qt,className:"file-input-hidden"})]}),g.jsx("input",{type:"text",placeholder:"Or paste image URL",value:de.imageUrl,onChange:x=>he({...de,imageUrl:x.target.value}),className:"form-input"}),(Ee||de.imageUrl)&&g.jsx("div",{className:"image-preview-container",children:g.jsx("img",{src:Ee||de.imageUrl,alt:"Category preview",className:"image-preview"})})]}),g.jsx("input",{type:"color",value:de.color,onChange:x=>he({...de,color:x.target.value}),className:"form-input"}),g.jsxs("div",{className:"form-actions",children:[g.jsxs("button",{type:"submit",className:"save-btn",children:[g.jsx(al,{className:"w-4 h-4"}),"Save"]}),g.jsx("button",{type:"button",onClick:()=>{ie(!1),be(null),Ve(null)},className:"cancel-btn",children:"Cancel"})]})]}),g.jsxs("div",{className:"products-admin-list",children:[g.jsxs("h3",{className:"section-subtitle",children:["Manage Categories (",a.length,")"]}),[...a].sort((x,Q)=>(x.sortOrder||0)-(Q.sortOrder||0)).map((x,Q,ge)=>g.jsxs("div",{className:"admin-product-card",children:[g.jsx("div",{className:"category-icon-preview",style:{background:x.gradient},children:g.jsx("img",{src:x.imageUrl||"https://via.placeholder.com/40/CCCCCC/666666?text=No+Image",alt:x.nameEn,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px"}})}),g.jsxs("div",{className:"admin-product-info",children:[g.jsx("h4",{children:x.nameEn}),g.jsx("p",{children:x.nameTe}),g.jsx("p",{className:"admin-price",children:x.color})]}),g.jsxs("div",{className:"admin-product-actions",children:[g.jsx("button",{onClick:()=>ei(x.id,"up"),className:"edit-btn",disabled:Q===0,title:"Move up",style:{opacity:Q===0?.3:1},children:g.jsx(zd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>ei(x.id,"down"),className:"edit-btn",disabled:Q===ge.length-1,title:"Move down",style:{opacity:Q===ge.length-1?.3:1},children:g.jsx(Gd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>Ln(x),className:"edit-btn",children:g.jsx(ih,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>pi(x.id),className:"delete-btn",children:g.jsx(Ou,{className:"w-4 h-4"})})]})]},x.id))]})]}),A==="subcategories"&&g.jsxs("div",{className:"subcategories-section",children:[g.jsxs("button",{onClick:()=>ht(!Le),className:"add-product-btn",children:[g.jsx(th,{className:"w-5 h-5"}),"Add Subcategory"]}),Le&&g.jsxs("form",{onSubmit:bs,className:"product-form",children:[g.jsxs("select",{value:ot.categoryId,onChange:x=>Vt({...ot,categoryId:x.target.value}),required:!0,className:"form-input",children:[g.jsx("option",{value:"",children:"Select Parent Category"}),a.map(x=>g.jsx("option",{value:x.id,children:x.nameEn},x.id))]}),g.jsxs("div",{className:"bilingual-input-group",children:[g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:"Subcategory Name (English)",value:ot.nameEn,onChange:x=>Vt({...ot,nameEn:x.target.value}),required:!0,className:"form-input"})}),g.jsx("div",{className:"input-with-voice",children:g.jsx("input",{type:"text",placeholder:"Subcategory Name (Telugu)",value:ot.nameTe,onChange:x=>Vt({...ot,nameTe:x.target.value}),className:"form-input"})}),g.jsx(Nm,{onTranscript:({english:x,telugu:Q})=>{Vt({...ot,nameEn:x||"",nameTe:Q||""})}})]}),g.jsxs("div",{className:"image-upload-section",children:[g.jsxs("label",{className:"upload-label",children:[g.jsx(Cm,{className:"w-5 h-5"}),"Upload Image (Max 500KB)",g.jsx("input",{type:"file",accept:"image/*",onChange:Xi,className:"file-input-hidden"})]}),g.jsx("input",{type:"text",placeholder:"Or paste image URL",value:ot.imageUrl,onChange:x=>Vt({...ot,imageUrl:x.target.value}),className:"form-input"}),(xi||ot.imageUrl)&&g.jsx("div",{className:"image-preview-container",children:g.jsx("img",{src:xi||ot.imageUrl,alt:"Subcategory preview",className:"image-preview"})})]}),g.jsxs("div",{className:"form-actions",children:[g.jsxs("button",{type:"submit",className:"save-btn",children:[g.jsx(al,{className:"w-4 h-4"}),"Save"]}),g.jsx("button",{type:"button",onClick:()=>{ht(!1),Mn(null),Cs(null)},className:"cancel-btn",children:"Cancel"})]})]}),g.jsxs("div",{className:"products-admin-list",children:[g.jsxs("h3",{className:"section-subtitle",children:["Manage Subcategories (",u.length,")"]}),[...u].sort((x,Q)=>(x.sortOrder||0)-(Q.sortOrder||0)).map((x,Q,ge)=>{const qe=a.find(Ie=>Ie.id===x.categoryId);return g.jsxs("div",{className:"admin-product-card",children:[g.jsx("div",{className:"subcategory-icon-preview",children:g.jsx("img",{src:x.imageUrl||"https://via.placeholder.com/40/CCCCCC/666666?text=No+Image",alt:x.nameEn,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px"}})}),g.jsxs("div",{className:"admin-product-info",children:[g.jsx("h4",{children:x.nameEn}),g.jsx("p",{children:x.nameTe}),g.jsxs("p",{className:"admin-price",children:["Parent: ",qe?.nameEn||"N/A"]})]}),g.jsxs("div",{className:"admin-product-actions",children:[g.jsx("button",{onClick:()=>fi(x.id,"up"),className:"edit-btn",disabled:Q===0,title:"Move up",style:{opacity:Q===0?.3:1},children:g.jsx(zd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>fi(x.id,"down"),className:"edit-btn",disabled:Q===ge.length-1,title:"Move down",style:{opacity:Q===ge.length-1?.3:1},children:g.jsx(Gd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>ar(x),className:"edit-btn",children:g.jsx(ih,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>ti(x.id),className:"delete-btn",children:g.jsx(Ou,{className:"w-4 h-4"})})]})]},x.id)})]})]}),A==="popular"&&g.jsxs("div",{className:"popular-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h3",{className:"section-subtitle",children:"Popular Products Management"}),g.jsx("span",{className:"count-badge",children:uo.length})]}),g.jsx("p",{className:"section-description",children:'Manage which products appear in the "Popular Products" section on the customer app. Toggle the star to add/remove from popular items.'}),g.jsx("div",{className:"products-admin-list",children:[...n].sort((x,Q)=>(x.sortOrder||0)-(Q.sortOrder||0)).map((x,Q,ge)=>g.jsxs("div",{className:"admin-product-card",children:[g.jsx("img",{src:x.imageUrl||"https://via.placeholder.com/60",alt:i==="te"?x.nameTe||x.nameEn||x.name:x.nameEn||x.name,className:"admin-product-img"}),g.jsxs("div",{className:"admin-product-info",children:[g.jsx("h4",{children:i==="te"?x.nameTe||x.nameEn||x.name:x.nameEn||x.name}),g.jsxs("p",{children:[x.category,"  ",x.weight]}),g.jsxs("p",{className:"admin-price",children:["",x.discountedPrice||x.price]})]}),g.jsxs("div",{className:"admin-product-actions",children:[g.jsx("button",{onClick:()=>ft(x.id,"up"),className:"edit-btn",disabled:Q===0,title:"Move up",style:{opacity:Q===0?.3:1},children:g.jsx(zd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>ft(x.id,"down"),className:"edit-btn",disabled:Q===ge.length-1,title:"Move down",style:{opacity:Q===ge.length-1?.3:1},children:g.jsx(Gd,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>Zi(x.id,x.isPopular),className:`popular-toggle-btn ${x.isPopular?"is-popular":""}`,title:x.isPopular?"Remove from popular":"Add to popular",children:x.isPopular?g.jsx(wm,{fill:"gold",stroke:"gold",className:"w-5 h-5"}):g.jsx(wm,{className:"w-5 h-5"})})]})]},x.id))})]}),A==="users"&&g.jsx(p3,{}),A==="riders"&&g.jsxs("div",{className:"riders-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsxs("h3",{className:"section-subtitle",children:["Riders Management (",t?.length||0,")"]}),g.jsxs("select",{value:Wi,onChange:x=>Is(x.target.value),className:"form-input",style:{width:"auto",padding:"8px 12px"},children:[g.jsx("option",{value:"orders",children:"Sort by Orders"}),g.jsx("option",{value:"name",children:"Sort by Name"})]})]}),!t||t.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(Hi,{className:"w-16 h-16 text-gray-400"}),g.jsx("p",{children:"No riders registered yet"}),g.jsx("p",{style:{fontSize:"14px",color:"#666",marginTop:"8px"},children:"Riders can register at: ?mode=rider"})]}):g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px",marginTop:"20px"},children:t.map(x=>({...x,totalOrders:e.filter(Q=>Q.riderId===x.id).length,activeOrders:e.filter(Q=>Q.riderId===x.id&&Q.status==="out_for_delivery").length,completedOrders:e.filter(Q=>Q.riderId===x.id&&Q.status==="delivered").length})).sort((x,Q)=>Wi==="orders"?Q.totalOrders-x.totalOrders:x.name.localeCompare(Q.name)).map(x=>g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0",position:"relative"},children:[g.jsx("button",{onClick:async()=>{if(x.activeOrders>0){alert(`Cannot delete rider ${x.name}. They have ${x.activeOrders} active delivery in progress.`);return}if(window.confirm(`Are you sure you want to delete rider ${x.name}? This action cannot be undone.`))try{await Za(Be(h,"artifacts",Ce,"public","data","riders",x.id)),alert(`Rider ${x.name} deleted successfully!`)}catch(Q){console.error("Error deleting rider:",Q),alert("Failed to delete rider")}},className:"delete-btn",style:{position:"absolute",top:"12px",right:"12px",padding:"6px",borderRadius:"6px",background:"#fff",border:"1px solid #e0e0e0"},title:"Delete Rider",children:g.jsx(Ou,{className:"w-4 h-4",style:{color:"#f44336"}})}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid #f0f0f0"},children:[g.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #FF9800 0%, #F57C00 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px",fontWeight:"700"},children:x.name.charAt(0).toUpperCase()}),g.jsxs("div",{style:{flex:1},children:[g.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#333",marginBottom:"4px"},children:x.name}),g.jsxs("a",{href:`tel:${x.phone}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",color:"#2196F3",textDecoration:"none"},children:[g.jsx(rr,{className:"w-4 h-4"}),x.phone]})]})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:[g.jsxs("div",{style:{textAlign:"center"},children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#333"},children:x.totalOrders}),g.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"Total Orders"})]}),g.jsxs("div",{style:{textAlign:"center"},children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#FF9800"},children:x.activeOrders}),g.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"Active"})]}),g.jsxs("div",{style:{textAlign:"center"},children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#4CAF50"},children:x.completedOrders}),g.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"Completed"})]})]})]},x.id))})]}),A==="analytics"&&g.jsxs("div",{className:"analytics-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h3",{className:"section-subtitle",children:"Daily Analytics"}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx(ek,{className:"w-5 h-5 text-gray-600"}),g.jsx("input",{type:"date",value:L,onChange:x=>F(x.target.value),max:new Date().toISOString().split("T")[0],style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #E0E0E0",fontSize:"14px",cursor:"pointer"}})]})]}),(()=>{const x=e.filter(Ie=>new Date(Ie.createdAt).toISOString().split("T")[0]===L),Q=x.filter(Ie=>Ie.status==="completed"||Ie.status==="delivered").reduce((Ie,je)=>Ie+je.total,0),ge=x.filter(Ie=>Ie.status==="completed"||Ie.status==="delivered").length,qe=x.filter(Ie=>Ie.status==="pending").length;return x.filter(Ie=>Ie.status==="cancelled").length,g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginTop:"20px"},children:[g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[g.jsx(ji,{className:"w-6 h-6",style:{color:"#4CAF50"}}),g.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Total Revenue"})]}),g.jsxs("div",{style:{fontSize:"28px",fontWeight:"700",color:"#2E7D32"},children:["",Q.toFixed(0)]})]}),g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[g.jsx(Tn,{className:"w-6 h-6",style:{color:"#2196F3"}}),g.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Total Orders"})]}),g.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#1976D2"},children:x.length})]}),g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[g.jsx(Tn,{className:"w-6 h-6",style:{color:"#4CAF50"}}),g.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Completed"})]}),g.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#2E7D32"},children:ge})]}),g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[g.jsx(nc,{className:"w-6 h-6",style:{color:"#FF9800"}}),g.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Pending"})]}),g.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#F57C00"},children:qe})]})]}),g.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",marginTop:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[g.jsxs("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:["Orders for ",new Date(L).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),x.length===0?g.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:[g.jsx(Tn,{className:"w-12 h-12",style:{margin:"0 auto 12px",opacity:.3}}),g.jsx("p",{children:"No orders on this date"})]}):g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:x.map(Ie=>g.jsxs("div",{style:{padding:"16px",background:"#f9f9f9",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsxs("div",{children:[g.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:Ie.orderNumber||`Order #${Ie.id.substring(0,8)}`}),g.jsxs("div",{style:{fontSize:"13px",color:"#666"},children:[new Date(Ie.createdAt).toLocaleTimeString("en-IN"),"  ",Ie.items.length," items"]})]}),g.jsxs("div",{style:{textAlign:"right"},children:[g.jsxs("div",{style:{fontWeight:"700",fontSize:"16px",color:"#2E7D32"},children:["",Ie.total.toFixed(0)]}),g.jsx("div",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px",background:Ie.status==="completed"||Ie.status==="delivered"?"#E8F5E9":"#FFF3E0",color:Ie.status==="completed"||Ie.status==="delivered"?"#2E7D32":"#F57C00",marginTop:"4px"},children:Ie.status.charAt(0).toUpperCase()+Ie.status.slice(1)})]})]},Ie.id))})]})]})})()]})]}),Pt&&Qi&&g.jsx(EI,{order:Qi,onClose:()=>zn(!1),language:i})]})},g3=({rider:n,allOrders:e,language:t,onExit:i})=>{const{db:o}=ws();Xn[t];const[a,u]=X.useState("pending"),d=e.filter(U=>U.deliveryMethod==="delivery"&&U.riderId===n.id),f=d.filter(U=>U.status==="ready_for_pickup"||U.status==="accepted"),h=d.filter(U=>U.status==="out_for_delivery"),v=d.filter(U=>U.status==="delivered"),E=async(U,J)=>{try{const H=Be(o,"artifacts",Ce,"public","data","orders",U);await Gn(H,{status:J,updatedAt:new Date().toISOString()}),alert(`Order status updated to ${J}!`)}catch(H){console.error("Error updating order status:",H),alert("Failed to update order status. Please try again.")}},A=async U=>{if(window.confirm("Mark this order as picked up and out for delivery?"))try{const J=Be(o,"artifacts",Ce,"public","data","orders",U);await Gn(J,{status:"out_for_delivery",riderId:n.id,riderName:n.name,riderPhone:n.phone,updatedAt:new Date().toISOString()}),alert("Order picked up! Now out for delivery.")}catch(J){console.error("Error picking up order:",J),alert("Failed to pick up order. Please try again.")}},R=U=>{window.confirm("Confirm that this order has been delivered?")&&E(U,"delivered")},F=a==="pending"?f:a==="active"?h:v;return g.jsxs("div",{className:"rider-dashboard",children:[g.jsxs("div",{className:"rider-header",children:[g.jsxs("button",{onClick:i,className:"back-btn",children:[g.jsx(Ci,{className:"w-5 h-5"}),"Exit Rider Mode"]}),g.jsxs("div",{children:[g.jsxs("h1",{className:"rider-title",children:[g.jsx(fs,{className:"w-6 h-6"}),"Rider Dashboard"]}),g.jsxs("p",{style:{color:"#666",fontSize:"14px",marginTop:"4px"},children:["Welcome, ",n.name,"!"]})]})]}),g.jsxs("div",{className:"rider-stats",children:[g.jsxs("div",{className:"stat-card",children:[g.jsx("div",{className:"stat-icon pending-bg",children:g.jsx(nc,{className:"w-5 h-5"})}),g.jsxs("div",{className:"stat-content",children:[g.jsx("div",{className:"stat-value",children:f.length}),g.jsx("div",{className:"stat-label",children:"Ready to Pickup"})]})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx("div",{className:"stat-icon active-bg",children:g.jsx(fs,{className:"w-5 h-5"})}),g.jsxs("div",{className:"stat-content",children:[g.jsx("div",{className:"stat-value",children:h.length}),g.jsx("div",{className:"stat-label",children:"Out for Delivery"})]})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx("div",{className:"stat-icon delivered-bg",children:g.jsx(Bi,{className:"w-5 h-5"})}),g.jsxs("div",{className:"stat-content",children:[g.jsx("div",{className:"stat-value",children:v.length}),g.jsx("div",{className:"stat-label",children:"Delivered Today"})]})]})]}),g.jsxs("div",{className:"rider-tabs",children:[g.jsxs("button",{className:`rider-tab ${a==="pending"?"active":""}`,onClick:()=>u("pending"),children:[g.jsx(nc,{className:"w-4 h-4"}),"Ready to Pickup (",f.length,")"]}),g.jsxs("button",{className:`rider-tab ${a==="active"?"active":""}`,onClick:()=>u("active"),children:[g.jsx(fs,{className:"w-4 h-4"}),"Out for Delivery (",h.length,")"]}),g.jsxs("button",{className:`rider-tab ${a==="completed"?"active":""}`,onClick:()=>u("completed"),children:[g.jsx(Bi,{className:"w-4 h-4"}),"Delivered (",v.length,")"]})]}),g.jsx("div",{className:"rider-orders-list",children:F.length===0?g.jsxs("div",{className:"no-orders-message",children:[g.jsx(Tn,{className:"w-12 h-12 text-gray-400"}),g.jsx("p",{children:"No orders in this category"})]}):F.map(U=>g.jsxs("div",{className:"rider-order-card",children:[g.jsxs("div",{className:"rider-order-header",children:[g.jsxs("div",{className:"order-id-section",children:[g.jsx(Tn,{className:"w-4 h-4"}),g.jsx("span",{className:"order-id-text",children:U.orderNumber||`Order #${U.id.slice(-6)}`})]}),g.jsxs("div",{className:"order-total-section",children:[g.jsx("span",{className:"total-label-small",children:"Total"}),g.jsxs("span",{className:"total-amount-rider",children:["",U.total.toFixed(0)]})]})]}),g.jsxs("div",{className:"rider-customer-info",children:[g.jsxs("div",{className:"customer-detail",children:[g.jsx(Hi,{className:"w-4 h-4 text-gray-600"}),g.jsx("span",{className:"customer-name",children:U.customerName||U.userName||"Customer"})]}),(U.customerPhone||U.userPhone)&&g.jsxs("a",{href:`tel:${U.customerPhone||U.userPhone}`,className:"customer-phone-link",children:[g.jsx(rr,{className:"w-4 h-4"}),U.customerPhone||U.userPhone]})]}),g.jsxs("div",{className:"rider-delivery-address",children:[g.jsxs("div",{className:"address-header-rider",children:[g.jsx(Zo,{className:"w-5 h-5 text-green-600"}),g.jsx("span",{className:"address-label-rider",children:"Delivery Address"})]}),g.jsx("p",{className:"address-text-rider",children:U.deliveryAddress}),U.deliveryInstructions&&g.jsxs("p",{className:"delivery-instructions-rider",children:[g.jsx("strong",{children:"Instructions:"})," ",U.deliveryInstructions]}),g.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(U.deliveryAddress)}`,target:"_blank",rel:"noopener noreferrer",className:"navigate-btn",children:[g.jsx(zC,{className:"w-4 h-4"}),"Navigate"]})]}),g.jsxs("div",{className:"rider-order-items",children:[g.jsxs("div",{className:"items-count-badge",children:[g.jsx(Tn,{className:"w-4 h-4"}),U.items.length," items"]}),g.jsxs("div",{className:"items-preview",children:[U.items.slice(0,3).map((J,H)=>g.jsxs("span",{className:"item-preview-text",children:[J.name," x",J.quantity,H<Math.min(U.items.length,3)-1&&", "]},H)),U.items.length>3&&g.jsxs("span",{className:"more-items",children:["+",U.items.length-3," more"]})]})]}),a==="pending"&&g.jsxs("button",{onClick:()=>A(U.id),className:"rider-action-btn pickup-btn",children:[g.jsx(fs,{className:"w-4 h-4"}),"Pick Up & Start Delivery"]}),a==="active"&&g.jsxs("button",{onClick:()=>R(U.id),className:"rider-action-btn deliver-btn",children:[g.jsx(Bi,{className:"w-4 h-4"}),"Mark as Delivered"]}),a==="completed"&&g.jsxs("div",{className:"delivered-stamp",children:[g.jsx(Bi,{className:"w-5 h-5"}),"Delivered"]})]},U.id))})]})},y3=({onLogin:n,onRegister:e})=>{const[t,i]=X.useState(!1),[o,a]=X.useState(""),[u,d]=X.useState(""),[f,h]=X.useState(""),[v,E]=X.useState(""),[A,R]=X.useState(!1),L=async F=>{F.preventDefault(),E(""),R(!0);try{if(t){if(!f||!o||!u){E("All fields are required"),R(!1);return}await e({name:f,phone:o,password:u})}else{if(!o||!u){E("Phone and password are required"),R(!1);return}await n(o,u)}}catch(U){E(U.message||"Authentication failed"),R(!1)}};return g.jsxs("div",{className:"rider-login-container",children:[g.jsxs("div",{className:"rider-login-card",children:[g.jsxs("div",{className:"rider-login-header",children:[g.jsx("div",{className:"rider-icon-circle",children:g.jsx(HC,{className:"w-12 h-12",style:{color:"#FF9800"}})}),g.jsx("h1",{className:"rider-login-title",children:t?"Rider Registration":"Rider Login"}),g.jsx("p",{className:"rider-login-subtitle",children:t?"Create your rider account to start delivering":"Sign in to access your delivery dashboard"})]}),g.jsxs("form",{onSubmit:L,className:"rider-login-form",children:[t&&g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Full Name"}),g.jsxs("div",{className:"input-with-icon",children:[g.jsx(M0,{className:"input-icon"}),g.jsx("input",{type:"text",value:f,onChange:F=>h(F.target.value),placeholder:"Enter your full name",className:"form-input",required:t})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Phone Number"}),g.jsxs("div",{className:"input-with-icon",children:[g.jsx(rr,{className:"input-icon"}),g.jsx("input",{type:"tel",value:o,onChange:F=>a(F.target.value),placeholder:"10-digit phone number",className:"form-input",maxLength:"10",required:!0})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Password"}),g.jsxs("div",{className:"input-with-icon",children:[g.jsx(ol,{className:"input-icon"}),g.jsx("input",{type:"password",value:u,onChange:F=>d(F.target.value),placeholder:"Enter password",className:"form-input",required:!0})]})]}),v&&g.jsx("div",{className:"error-message",children:v}),g.jsx("button",{type:"submit",className:"rider-login-button",disabled:A,children:A?"Processing...":g.jsxs(g.Fragment,{children:[t?g.jsx(M0,{className:"w-5 h-5"}):g.jsx(yk,{className:"w-5 h-5"}),t?"Register as Rider":"Login"]})})]}),g.jsx("div",{className:"rider-login-footer",children:g.jsx("button",{onClick:()=>{i(!t),E("")},className:"toggle-mode-button",children:t?"Already have an account? Login":"Don't have an account? Register"})})]}),g.jsx("style",{jsx:!0,children:`
        .rider-login-container {
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          padding: 20px;
        }

        .rider-login-card {
          background: white;
          border-radius: 20px;
          padding: 40px;
          max-width: 450px;
          width: 100%;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .rider-login-header {
          text-align: center;
          margin-bottom: 32px;
        }

        .rider-icon-circle {
          width: 80px;
          height: 80px;
          background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 auto 20px;
          box-shadow: 0 8px 16px rgba(255, 152, 0, 0.3);
        }

        .rider-icon-circle svg {
          color: white !important;
        }

        .rider-login-title {
          font-size: 28px;
          font-weight: 700;
          color: #1a1a1a;
          margin-bottom: 8px;
        }

        .rider-login-subtitle {
          font-size: 14px;
          color: #666;
        }

        .rider-login-form {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-label {
          font-size: 14px;
          font-weight: 600;
          color: #333;
        }

        .input-with-icon {
          position: relative;
        }

        .input-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          width: 20px;
          height: 20px;
          color: #999;
        }

        .form-input {
          width: 100%;
          padding: 12px 12px 12px 44px;
          border: 2px solid #e0e0e0;
          border-radius: 10px;
          font-size: 16px;
          transition: all 0.3s;
        }

        .form-input:focus {
          outline: none;
          border-color: #FF9800;
          box-shadow: 0 0 0 3px rgba(255, 152, 0, 0.1);
        }

        .error-message {
          background: #ffebee;
          color: #c62828;
          padding: 12px;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        .rider-login-button {
          background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
          color: white;
          border: none;
          padding: 14px 24px;
          border-radius: 10px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          transition: transform 0.2s, box-shadow 0.2s;
          margin-top: 8px;
        }

        .rider-login-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 8px 16px rgba(255, 152, 0, 0.3);
        }

        .rider-login-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .rider-login-footer {
          margin-top: 24px;
          text-align: center;
        }

        .toggle-mode-button {
          background: none;
          border: none;
          color: #667eea;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          transition: color 0.3s;
        }

        .toggle-mode-button:hover {
          color: #764ba2;
          text-decoration: underline;
        }
      `})]})};function _3(){const{user:n,loading:e,userProfile:t,phoneNumber:i,setPhoneNumber:o,countryCode:a,setCountryCode:u,password:d,setPassword:f,otp:h,setOtp:v,authStep:E,isNewUser:A,showProfileSetup:R,setShowProfileSetup:L,checkUserExists:F,handleSendOTP:U,handleVerifyOTP:J,handlePasswordLogin:H,handleCompleteRegistration:z,handleLogout:se,handleSaveProfile:ee}=af(),{rider:fe,loading:O,loginRider:P,logoutRider:b,registerRider:M}=j2(),{products:k,categoriesData:V,subcategoriesData:N,orders:we,allOrders:ze,allRiders:ne,loading:pe,handleChangeDeliveryMethod:le,handleCancelOrder:Te}=O2(),{cartItems:q,deliveryMethod:ie,setDeliveryMethod:de,selectedAddress:he,setSelectedAddress:ye,handleAddToCart:be,handleCheckout:Ee}=B2(),{userAddresses:Ve,showAddressManager:Le,setShowAddressManager:ht,showAddressForm:ot,setShowAddressForm:Vt,editingAddress:hi,setEditingAddress:Mn,handleSaveAddress:xi,handleDeleteAddress:Cs,handleSetDefaultAddress:Qi}=G2(),[bt,hn]=X.useState("Home"),[vt,Pt]=X.useState(""),[zn,Wi]=X.useState(null),[Is,Ri]=X.useState(null),[Ni,kn]=X.useState(null),[at,Sn]=X.useState("en"),[Qt,Xi]=X.useState("Getting location..."),[xs,Rs]=X.useState("/dukaan-logo.png"),[Wt,Un]=X.useState(null),[Vn,wn]=X.useState({}),[jn,Zi]=X.useState(!1),[Zn,ei]=X.useState(!1),[fi,ft]=X.useState(null),[Ns,Ln]=X.useState(!1),pi=()=>{Sn(Ct=>Ct==="en"?"te":"en")};X.useEffect(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(async Ct=>{try{const{latitude:Ke,longitude:it}=Ct.coords,Xt=await(await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${Ke}&longitude=${it}&localityLanguage=en`)).json(),fn=Xt.city||Xt.locality||Xt.principalSubdivision||"Unknown",zt=Xt.principalSubdivisionCode||"";Xi(`${fn}${zt?", "+zt:""}`)}catch(Ke){console.error("Error getting location name:",Ke),Xi("Ponnur, AP")}},Ct=>{console.error("Geolocation error:",Ct),Xi("Ponnur, AP")},{enableHighAccuracy:!1,timeout:1e4,maximumAge:3e5}):Xi("Ponnur, AP")},[]),X.useEffect(()=>{const Ke=new URLSearchParams(window.location.search).get("mode");Zi(Ke==="shopkeeper"),ei(Ke==="rider"),console.log("[Mode] Shopkeeper mode:",Ke==="shopkeeper","Rider mode:",Ke==="rider","URL:",window.location.search)},[]),X.useEffect(()=>{(async()=>{try{const{db:Ke}=await tl(()=>Promise.resolve().then(()=>rg),void 0).then(zt=>({db:zt.getFirebaseInstances().db})),{doc:it,getDoc:Tt}=await tl(async()=>{const{doc:zt,getDoc:uo}=await Promise.resolve().then(()=>PC);return{doc:zt,getDoc:uo}},void 0),{appId:Xt}=await tl(async()=>{const{appId:zt}=await Promise.resolve().then(()=>rg);return{appId:zt}},void 0),fn=await Tt(it(Ke,"artifacts",Xt,"public","data","settings","app"));fn.exists()&&fn.data().logoUrl&&Rs(fn.data().logoUrl)}catch{console.log("Logo not found, using default")}})()},[]),X.useEffect(()=>{vt&&kn(null)},[vt]),X.useEffect(()=>{if(!n||jn||Zn||we.length===0)return;const Ct={};we.forEach(Ke=>{Ct[Ke.id]=Ke.status}),we.forEach(Ke=>{const it=Vn[Ke.id],Tt=Ke.status;if(it&&it!==Tt&&Ke.updatedAt){const Xt=new Date(Ke.updatedAt).getTime();new Date().getTime()-Xt<1e4&&(Tt==="processing"?Un({message:" Your order has been accepted! We are preparing it now.",type:"success"}):Tt==="delivered"&&Un({message:" Your order has been delivered! Thank you for shopping.",type:"success"}))}}),wn(Ct)},[we,jn,Zn,n]),X.useEffect(()=>{if(Ve.length>0&&!he&&ie==="delivery"){const Ct=Ve.find(Ke=>Ke.isDefault)||Ve[0];ye(Ct)}},[Ve,he,ie]);const bs=Ct=>{if(de(Ct),Ct==="delivery"){if(!he&&Ve.length>0){const Ke=Ve.find(it=>it.isDefault)||Ve[0];ye(Ke)}}else ye(null);Ln(!1),Ee(Ve,hn,at)};if(e||pe)return g.jsx(b0,{});if(jn)return g.jsx(m3,{products:k,allOrders:ze,allRiders:ne,language:at,onExit:()=>window.location.href="/",categoriesData:V,subcategoriesData:N,logoUrl:xs,onLogoChange:Rs});if(Zn)return O?g.jsx(b0,{}):fe?g.jsx(g3,{rider:fe,allOrders:ze,language:at,onExit:()=>{b(),window.location.href="/"}}):g.jsx(y3,{onLogin:P,onRegister:M});if(!n)return g.jsxs(g.Fragment,{children:[g.jsx(c3,{phoneNumber:i,onPhoneChange:o,countryCode:a,onCountryCodeChange:u,password:d,onPasswordChange:f,otp:h,onOtpChange:v,authStep:E,isNewUser:A,onCheckUser:F,onSendOTP:U,onVerifyOTP:J,onPasswordLogin:H,onCompleteRegistration:z}),Wt&&g.jsx(k0,{message:Wt.message,type:Wt.type,onClose:()=>Un(null)})]});const ti=(Ct,Ke)=>{kn(Ct),Pt(""),hn("Home"),Wi(null),Ri(null)};return g.jsxs("div",{className:"app-container-modern",children:[g.jsx(Z6,{searchTerm:vt,setSearchTerm:Pt,location:Qt,language:at,toggleLanguage:pi,logoUrl:xs,products:k,onVoiceSearch:ti}),g.jsxs("div",{className:"app-content",children:[bt==="Home"&&g.jsx(s3,{products:k,onAddToCart:be,cartItems:q,setCurrentView:hn,selectedCategory:zn,setSelectedCategory:Wi,selectedSubcategory:Is,setSelectedSubcategory:Ri,searchTerm:vt,language:at,categoriesData:V,subcategoriesData:N,voiceSearchResults:Ni,setVoiceSearchResults:kn}),bt==="Cart"&&g.jsx(r3,{cartItems:q,onAddToCart:be,setCurrentView:hn,onCheckout:()=>Ln(!0),language:at}),bt==="Orders"&&g.jsx(a3,{orders:we,setCurrentView:hn,language:at,onSelectOrder:ft,onChangeDeliveryMethod:le,onCancelOrder:Te,userAddresses:Ve,onManageAddresses:()=>ht(!0)}),bt==="Profile"&&g.jsx(l3,{userProfile:t,orders:we,onLogout:se,language:at,setCurrentView:hn,userAddresses:Ve,onManageAddresses:()=>ht(!0)}),bt==="OrderHistory"&&g.jsx(u3,{orders:we,onBack:()=>hn("Profile"),onSelectOrder:ft,language:at,translations:Xn})]}),g.jsx(e3,{currentView:bt,setCurrentView:hn,cartItems:q,language:at,onHomeClick:()=>{kn(null),Wi(null),Ri(null)}}),Wt&&g.jsx(k0,{message:Wt.message,type:Wt.type,onClose:()=>Un(null)}),fi&&g.jsx(EI,{order:fi,onClose:()=>ft(null),language:at}),R&&g.jsx(d3,{onSave:ee,onClose:()=>L(!1)}),Le&&g.jsx(h3,{addresses:Ve,onAddAddress:()=>{ht(!1),Vt(!0),Mn(null)},onEditAddress:Ct=>{Mn(Ct),ht(!1),Vt(!0)},onDeleteAddress:Cs,onSetDefault:Qi,onClose:()=>ht(!1)}),ot&&g.jsx(f3,{onSave:xi,onClose:()=>{Vt(!1),Mn(null)},editingAddress:hi}),Ns&&g.jsx(t3,{isOpen:Ns,onClose:()=>Ln(!1),onConfirm:bs,cartItems:Object.values(q),userAddresses:Ve,selectedAddress:he,onAddressSelect:ye,onManageAddresses:()=>{Ln(!1),ht(!0)},language:at})]})}sR.createRoot(document.getElementById("root")).render(g.jsx(X.StrictMode,{children:g.jsx(L2,{children:g.jsx(F2,{children:g.jsx(H2,{children:g.jsx(z2,{children:g.jsx($2,{children:g.jsx(_3,{})})})})})})}));export{ic as C,KC as W,tl as _,sU as b,my as r};
